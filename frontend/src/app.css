* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

:root {
	/* === NEBULA COSMIC THEME === */
	/* Unified left-to-right gradients for a space nebula vibeâ€”purples, blues, pinks fading like interstellar clouds. Deep cosmic depths with starry accents. */

	/* Main backgrounds - Ethereal nebula gradients */
	--bg-primary: linear-gradient(to right, #0f0c29 0%, #302b63 100%);  /* Deep space purple fade for main app */
	--bg-secondary: rgba(0,0,0,0%);  /* Transparent for messages (blends into cosmic void) */
	--bg-tertiary: #24243e;  /* Solid dark indigo for sidebars */
	--bg-hover: #302b63;  /* Solid hover in mid-purple */

	/* Text colors - Starlight contrasts */
	--text-primary: #e0e0ff;  /* Pale lavender (high contrast on dark) */
	--text-secondary: #b3b3ff;  /* Soft blue-purple */
	--text-tertiary: #9999ff;  /* Muted violet */

	/* Accent - Pulsing nebula energy */
	--accent: linear-gradient(to right, #ff00ff 0%, #ff69b4 100%);  /* Magenta to hot pink glow */
	--accent-hover: linear-gradient(to right, #ff69b4 0%, #ff1493 100%);  /* Hot pink to deep magenta pulse */

	/* Borders - Glowing cosmic edges */
	--border: none;

	/* Status colors - Celestial phenomena */
	--status-online: #00ff7f;  /* Spring green (comet trail) */
	--status-online-hover: #00fa9a;
	--status-away: #ffd700;  /* Gold (distant star) */
	--status-away-hover: #ffc300;
	--status-busy: #ff00ff;  /* Magenta (nebula core) */
	--status-busy-hover: #ee82ee;
	--status-offline: #708090;  /* Slate gray (void) */

	/* Semantic colors - Galactic alerts */
	--color-success: #00ff7f;  /* Green success flare */
	--color-success-hover: #00fa9a;
	--color-info: #00bfff;  /* Deep sky blue info */
	--color-info-hover: #1e90ff;
	--color-warning: #ffd700;  /* Gold warning */
	--color-warning-hover: #ffc300;
	--color-danger: #ff00ff;  /* Magenta danger */
	--color-danger-hover: #ee82ee;
	--color-danger-dark: #db7093;

	/* Modal/Dialog colors - Starfield clarity */
	--modal-bg: #0f0c29;  /* Deep space for modals */
	--modal-overlay: rgba(48, 43, 99, 0.7);  /* Purple haze overlay */
	--modal-border: none;
	--modal-header-bg: #24243e;
	--modal-text: #e0e0ff;  /* Starlight text */
	--modal-text-secondary: #b3b3ff;
	--modal-text-muted: #9999ff;

	/* UI element colors - Cosmic dust */
	--ui-bg-light: #302b63;
	--ui-bg-lighter: #24243e;
	--ui-border-light: none;
	--ui-border: none;
	--ui-text: #b3b3ff;
	--ui-text-dark: #e0e0ff;

	/* Pinned messages theme - Supernova highlights */
	--pinned-bg: #4b0082;
	--pinned-bg-hover: #6a1b9a;
	--pinned-border: none;
	--pinned-text: #e0e0ff;
	--pinned-text-dark: #ff00ff;
	--pinned-text-secondary: #ee82ee;

	/* Special backgrounds - Nebula variations */
	--bg-info-light: #302b63;
	--bg-info-lighter: #24243e;
	--bg-warning-light: #4b0082;

	/* Shadow colors - Black hole pulls */
	--shadow-sm: rgba(123, 104, 238, 0.1);  /* Medium slate blue tint */
	--shadow-md: rgba(123, 104, 238, 0.15);
	--shadow-lg: rgba(123, 104, 238, 0.2);

	/* Dark theme - Even deeper void */
	--dark-bg-primary: #000000;
	--dark-bg-secondary: #0f0c29;

	/* Error state */
	--error: #ff1493;  /* Deep pink error flash */
}

body {
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
	background: var(--bg-primary);
	color: var(--text-primary);
	overflow: hidden;
}

button {
	background: var(--accent);
	color: white;
	border: none;
	padding: 0.5rem 1rem;
	border-radius: 0px;
	cursor: pointer;
	font-size: 0.9rem;
	font-weight: 500;
	transition: all 0.2s;
	box-shadow: none;
}

button:hover {
	background: var(--accent-hover);
	transform: translateY(-1px);
	box-shadow: none;
}

button:active {
	transform: translateY(0);
	box-shadow: none;
}

button:disabled {
	opacity: 0.5;
	cursor: not-allowed;
	transform: none;
}

input, textarea {
	background: var(--ui-bg-lighter);
	color: var(--text-primary);
	border: none;
	padding: 0.625rem;
	border-radius: 0px;
	font-size: 0.9rem;
	transition: all 0.2s;
}

input:focus, textarea:focus {
	outline: none;
	border: none;
	box-shadow: none;
}

.input-container textarea::placeholder {
	color: var(--text-secondary);
}

.input-container .send-button {
	background: var(--accent);
	color: white;
	padding: 0.5rem 1rem;
	border-radius: 0px;
	font-size: 0.9rem;
	font-weight: 500;
}

.input-container .send-button:disabled {
	opacity: 0.4;
}

/* Scrollbar theming - Cosmic styled */
::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}

::-webkit-scrollbar-track {
	background: var(--ui-bg-light);
}

::-webkit-scrollbar-thumb {
	background: linear-gradient(to bottom, #7b68ee 0%, #9370db 100%);
	border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
	background: linear-gradient(to bottom, #9370db 0%, #8a2be2 100%);
}

/* Spoiler styling - Nebula reveal mystery */
.spoiler {
	background: var(--text-primary);
	color: transparent;
	padding: 0.125rem 0.25rem;
	border-radius: 4px;
	cursor: pointer;
	user-select: none;
	transition: all 0.3s ease;
}

.spoiler:hover {
	background: var(--text-secondary);
}

.spoiler.revealed {
	background: var(--ui-bg-light);
	color: var(--text-primary);
	user-select: text;
	cursor: text;
}

/* Emoji inline styling - Inline emojis in messages */
.emoji-inline {
	width: 1.25em;
	height: 1.25em;
	vertical-align: -0.2em;
	display: inline-block;
	object-fit: contain;
}

/* Custom emote styling - GIF/animated emotes */
.emote {
	width: 2em;
	height: 2em;
	vertical-align: -0.4em;
	display: inline-block;
	object-fit: contain;
}

.emote-animated {
	/* No additional styling needed for now */
}

/* Generic Avatar styles */
.avatar, .avatar-placeholder, .profile-picture, .user-avatar, .dm-avatar, .dm-list-avatar {
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    object-fit: cover;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
/* --- Responsive Design for Mobile --- */

/* On screens 768px or less, apply these mobile-first styles */
@media (max-width: 768px) {
	.app-container {
		/* Stack elements vertically instead of side-by-side */
		flex-direction: column;
	}

	/* Hide the side panels by default on mobile */
	.channel-sidebar-container,
	.user-panel-container,
    .dm-panel-container {
		display: none;
	}

    /* When the user panel is toggled, make it a full-screen overlay */
    .user-panel-container.mobile-visible {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 200;
        background: var(--bg-primary);
    }
    
    /* When the DM panel is toggled, make it a full-screen overlay */
    .dm-panel-container.mobile-visible {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 200;
        background: var(--bg-primary);
    }

	/* Main content should take up all available space */
	.main-content {
		flex: 1;
		width: 100%;
	}

	/* Hide the desktop-only resize handles */
	.resize-handle {
		display: none;
	}

	/* Reposition the user panel toggle button */
	.user-panel-toggle {
		/* We will handle toggling with a new hamburger menu, so hide this for now */
        display: none;
	}

	/* Adjust the business hub button for mobile */
	.business-hub-btn {
		left: auto;
		right: 20px;
		bottom: 20px;
		/* Make it a bit smaller */
		padding: 0.5rem 0.8rem;
		font-size: 0.8rem;
	}

    /* Make the PureRef button less intrusive on mobile */
    .pureref-button-container {
        bottom: 10px;
        right: 10px;
    }

    .pureref-button-container button {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }
}

/* Further adjustments for very small screens (e.g., small phones) */
@media (max-width: 480px) {
	/* Reduce padding and font sizes for tiny screens */
	button {
		padding: 0.4rem 0.8rem;
		font-size: 0.8rem;
	}

	input, textarea {
		padding: 0.5rem;
		font-size: 0.85rem;
	}

    .business-hub-btn {
        right: 10px;
        bottom: 10px;
    }
}

/* ========== GLOBAL MOBILE TOUCH IMPROVEMENTS ========== */

@media (max-width: 768px) {
	/* Prevent double-tap zoom on buttons */
	button {
		touch-action: manipulation;
	}

	/* Better touch feedback */
	button:active,
	[role="button"]:active {
		opacity: 0.85;
	}

	/* Prevent horizontal scroll */
	body {
		overflow-x: hidden;
	}

	/* Smooth scrolling for iOS */
	.messages,
	.channel-list,
	.user-list,
	.dm-messages,
	.dm-list {
		-webkit-overflow-scrolling: touch;
	}

	/* Prevent pull-to-refresh on chat containers */
	.chat-container,
	.dm-panel,
	.channel-sidebar,
	.user-panel {
		overscroll-behavior: contain;
	}

	/* Input fields - prevent iOS zoom */
	input,
	textarea,
	select {
		font-size: 16px !important;
	}
}

/* Safe area support for devices with notches/home indicators */
@supports (padding: env(safe-area-inset-bottom)) {
	.mobile-bottom-nav {
		padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
	}

	.input-wrapper {
		padding-bottom: calc(0.25rem + env(safe-area-inset-bottom));
	}
}

/* High contrast mode for accessibility */
@media (prefers-contrast: high) {
	:root {
		--border: 1px solid var(--text-primary);
	}
}

/* Reduced motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}
