import{z as Ie,s as ft,n as ze,d as _,N as it,i as V,f as c,O as G,w as f,h as k,j as R,l as M,P as X,m as w,o as z,Q as Or,q as Ne,R as We,e as ie,S as nt,k as Z,t as J,T as Vt,x as De,p as Le,A as In,y as tt,U as Rs,V as Mt,W as ho,X as po,Y as he,Z as cc,_ as uc,$ as ri,a0 as go,H as fc,a1 as dc,a2 as hc,a3 as mo}from"../chunks/DtNMkya2.js";import{a as Ae,S as dt,i as ht,f as zt,d as Ke,t as Me,g as qn,c as xn,m as Xe,e as Ze,b as Je}from"../chunks/CiatsH2b.js";import{w as bt}from"../chunks/Cid0SPyj.js";import{b as He}from"../chunks/z6mVhR0x.js";/* empty css                */const Mr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ye(n){return n?.length!==void 0?n:Array.from(n)}function Jt(n,e){n.d(1),e.delete(n.key)}function Qt(n,e,t,s,r,i,l,a,o,u,d,p){let h=n.length,b=i.length,g=h;const y={};for(;g--;)y[n[g].key]=g;const C=[],I=new Map,m=new Map,T=[];for(g=b;g--;){const E=p(r,i,g),N=t(E);let D=l.get(N);D?T.push(()=>D.p(E,e)):(D=u(N,E),D.c()),I.set(N,C[g]=D),N in y&&m.set(N,Math.abs(g-y[N]))}const v=new Set,A=new Set;function S(E){Ae(E,1),E.m(a,d),l.set(E.key,E),d=E.first,b--}for(;h&&b;){const E=C[b-1],N=n[h-1],D=E.key,B=N.key;E===N?(d=E.first,h--,b--):I.has(B)?!l.has(D)||v.has(D)?S(E):A.has(B)?h--:m.get(D)>m.get(B)?(A.add(D),S(E)):(v.add(B),h--):(o(N,l),h--)}for(;h--;){const E=n[h];I.has(E.key)||o(E,l)}for(;b;)S(C[b-1]);return Ie(T),C}const ln=Object.create(null);ln.open="0";ln.close="1";ln.ping="2";ln.pong="3";ln.message="4";ln.upgrade="5";ln.noop="6";const ks=Object.create(null);Object.keys(ln).forEach(n=>{ks[ln[n]]=n});const wr={type:"error",data:"parser error"},vo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_o=typeof ArrayBuffer=="function",bo=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,zr=({type:n,data:e},t,s)=>vo&&e instanceof Blob?t?s(e):ii(e,s):_o&&(e instanceof ArrayBuffer||bo(e))?t?s(e):ii(new Blob([e]),s):s(ln[n]+(e||"")),ii=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function li(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Ls;function pc(n,e){if(vo&&n.data instanceof Blob)return n.data.arrayBuffer().then(li).then(e);if(_o&&(n.data instanceof ArrayBuffer||bo(n.data)))return e(li(n.data));zr(n,!1,t=>{Ls||(Ls=new TextEncoder),e(Ls.encode(t))})}const ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ts=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ai.length;n++)ts[ai.charCodeAt(n)]=n;const gc=n=>{let e=n.length*.75,t=n.length,s,r=0,i,l,a,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(s=0;s<t;s+=4)i=ts[n.charCodeAt(s)],l=ts[n.charCodeAt(s+1)],a=ts[n.charCodeAt(s+2)],o=ts[n.charCodeAt(s+3)],d[r++]=i<<2|l>>4,d[r++]=(l&15)<<4|a>>2,d[r++]=(a&3)<<6|o&63;return u},mc=typeof ArrayBuffer=="function",Fr=(n,e)=>{if(typeof n!="string")return{type:"message",data:ko(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:vc(n.substring(1),e)}:ks[t]?n.length>1?{type:ks[t],data:n.substring(1)}:{type:ks[t]}:wr},vc=(n,e)=>{if(mc){const t=gc(n);return ko(t,e)}else return{base64:!0,data:n}},ko=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},wo="",_c=(n,e)=>{const t=n.length,s=new Array(t);let r=0;n.forEach((i,l)=>{zr(i,!1,a=>{s[l]=a,++r===t&&e(s.join(wo))})})},bc=(n,e)=>{const t=n.split(wo),s=[];for(let r=0;r<t.length;r++){const i=Fr(t[r],e);if(s.push(i),i.type==="error")break}return s};function kc(){return new TransformStream({transform(n,e){pc(n,t=>{const s=t.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Us;function fs(n){return n.reduce((e,t)=>e+t.length,0)}function ds(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)t[r]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function wc(n,e){Us||(Us=new TextDecoder);const t=[];let s=0,r=-1,i=!1;return new TransformStream({transform(l,a){for(t.push(l);;){if(s===0){if(fs(t)<1)break;const o=ds(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(fs(t)<2)break;const o=ds(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),s=3}else if(s===2){if(fs(t)<8)break;const o=ds(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(wr);break}r=d*Math.pow(2,32)+u.getUint32(4),s=3}else{if(fs(t)<r)break;const o=ds(t,r);a.enqueue(Fr(i?o:Us.decode(o),e)),s=0}if(r===0||r>n){a.enqueue(wr);break}}}})}const yo=4;function ut(n){if(n)return yc(n)}function yc(n){for(var e in ut.prototype)n[e]=ut.prototype[e];return n}ut.prototype.on=ut.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};ut.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};ut.prototype.off=ut.prototype.removeListener=ut.prototype.removeAllListeners=ut.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};ut.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};ut.prototype.emitReserved=ut.prototype.emit;ut.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};ut.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ps=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),qt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ec="arraybuffer";function Eo(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Tc=qt.setTimeout,Ac=qt.clearTimeout;function Os(n,e){e.useNativeTimers?(n.setTimeoutFn=Tc.bind(qt),n.clearTimeoutFn=Ac.bind(qt)):(n.setTimeoutFn=qt.setTimeout.bind(qt),n.clearTimeoutFn=qt.clearTimeout.bind(qt))}const Cc=1.33;function Sc(n){return typeof n=="string"?Ic(n):Math.ceil((n.byteLength||n.size)*Cc)}function Ic(n){let e=0,t=0;for(let s=0,r=n.length;s<r;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function To(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Dc(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Nc(n){let e={},t=n.split("&");for(let s=0,r=t.length;s<r;s++){let i=t[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Rc extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Br extends ut{constructor(e){super(),this.writable=!1,Os(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Rc(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Fr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Dc(e);return t.length?"?"+t:""}}class Pc extends Br{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};bc(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,_c(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=To()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Ao=!1;try{Ao=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Oc=Ao;function Mc(){}class zc extends Pc{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class rn extends ut{constructor(e,t,s){super(),this.createRequest=e,Os(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=Eo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=rn.requestsCount++,rn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Mc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}rn.requestsCount=0;rn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",oi);else if(typeof addEventListener=="function"){const n="onpagehide"in qt?"pagehide":"unload";addEventListener(n,oi,!1)}}function oi(){for(let n in rn.requests)rn.requests.hasOwnProperty(n)&&rn.requests[n].abort()}const Fc=(function(){const n=Co({xdomain:!1});return n&&n.responseType!==null})();class Bc extends zc{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Fc&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new rn(Co,this.uri(),e)}}function Co(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Oc))return new XMLHttpRequest}catch{}if(!e)try{return new qt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const So=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Lc extends Br{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=So?{}:Eo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;zr(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&Ps(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=To()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const qs=qt.WebSocket||qt.MozWebSocket;class Uc extends Lc{createSocket(e,t,s){return So?new qs(e,t,s):t?new qs(e,t):new qs(e)}doWrite(e,t){this.ws.send(t)}}class qc extends Br{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=wc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=kc();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:a,value:o})=>{a||(this.onPacket(o),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&Ps(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const xc={websocket:Uc,webtransport:qc,polling:Bc},jc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Vc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let r=jc.exec(n||""),i={},l=14;for(;l--;)i[Vc[l]]=r[l]||"";return t!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Hc(i,i.path),i.queryKey=Gc(i,i.query),i}function Hc(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Gc(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(t[r]=i)}),t}const Er=typeof addEventListener=="function"&&typeof removeEventListener=="function",ws=[];Er&&addEventListener("offline",()=>{ws.forEach(n=>n())},!1);class gn extends ut{constructor(e,t){if(super(),this.binaryType=Ec,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=yr(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=yr(t.host).host);Os(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Nc(this.opts.query)),Er&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ws.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=yo,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(t+=Sc(r)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ps(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Er&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=ws.indexOf(this._offlineEventListener);s!==-1&&ws.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}gn.protocol=yo;class Wc extends gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;gn.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;gn.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,d(),t.close(),t=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function a(){l("transport closed")}function o(){l("socket closed")}function u(p){t&&p.name!==t.name&&i()}const d=()=>{t.removeListener("open",r),t.removeListener("error",l),t.removeListener("close",a),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",l),t.once("close",a),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let Yc=class extends Wc{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>xc[r]).filter(r=>!!r)),super(e,s)}};function Kc(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=yr(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(t&&t.port===s.port?"":":"+s.port),s}const Xc=typeof ArrayBuffer=="function",Zc=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Io=Object.prototype.toString,Jc=typeof Blob=="function"||typeof Blob<"u"&&Io.call(Blob)==="[object BlobConstructor]",Qc=typeof File=="function"||typeof File<"u"&&Io.call(File)==="[object FileConstructor]";function Lr(n){return Xc&&(n instanceof ArrayBuffer||Zc(n))||Jc&&n instanceof Blob||Qc&&n instanceof File}function ys(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(ys(n[t]))return!0;return!1}if(Lr(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return ys(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ys(n[t]))return!0;return!1}function $c(n){const e=[],t=n.data,s=n;return s.data=Tr(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Tr(n,e){if(!n)return n;if(Lr(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Tr(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Tr(n[s],e));return t}return n}function eu(n,e){return n.data=Ar(n.data,e),delete n.attachments,n}function Ar(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Ar(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Ar(n[t],e));return n}const tu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nu=5;var je;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(je||(je={}));class su{constructor(e){this.replacer=e}encode(e){return(e.type===je.EVENT||e.type===je.ACK)&&ys(e)?this.encodeAsBinary({type:e.type===je.EVENT?je.BINARY_EVENT:je.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===je.BINARY_EVENT||e.type===je.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=$c(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function ci(n){return Object.prototype.toString.call(n)==="[object Object]"}class Ur extends ut{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===je.BINARY_EVENT;s||t.type===je.BINARY_ACK?(t.type=s?je.EVENT:je.ACK,this.reconstructor=new ru(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Lr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(je[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===je.BINARY_EVENT||s.type===je.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(i,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(i,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(Ur.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case je.CONNECT:return ci(t);case je.DISCONNECT:return t===void 0;case je.CONNECT_ERROR:return typeof t=="string"||ci(t);case je.EVENT:case je.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&tu.indexOf(t[0])===-1);case je.ACK:case je.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ru{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=eu(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const iu=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ur,Encoder:su,get PacketType(){return je},protocol:nu},Symbol.toStringTag,{value:"Module"}));function Yt(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const lu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Do extends ut{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Yt(e,"open",this.onopen.bind(this)),Yt(e,"packet",this.onpacket.bind(this)),Yt(e,"error",this.onerror.bind(this)),Yt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,i;if(lu.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:je.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,p=t.pop();this._registerAckCallback(d,p),l.id=d}const a=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(o?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r),l=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((s,r)=>{const i=(l,a)=>l?r(l):s(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:je.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case je.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case je.EVENT:case je.BINARY_EVENT:this.onevent(e);break;case je.ACK:case je.BINARY_ACK:this.onack(e);break;case je.DISCONNECT:this.ondisconnect();break;case je.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:je.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:je.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function jn(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}jn.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};jn.prototype.reset=function(){this.attempts=0};jn.prototype.setMin=function(n){this.ms=n};jn.prototype.setMax=function(n){this.max=n};jn.prototype.setJitter=function(n){this.jitter=n};class Cr extends ut{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Os(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new jn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||iu;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Yc(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Yt(t,"open",function(){s.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},l=Yt(t,"error",i);if(this._timeout!==!1){const a=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Yt(e,"ping",this.onping.bind(this)),Yt(e,"data",this.ondata.bind(this)),Yt(e,"error",this.onerror.bind(this)),Yt(e,"close",this.onclose.bind(this)),Yt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ps(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Do(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Wn={};function Es(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=Kc(n,e.path||"/socket.io"),s=t.source,r=t.id,i=t.path,l=Wn[r]&&i in Wn[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let o;return a?o=new Cr(s,e):(Wn[r]||(Wn[r]=new Cr(s,e)),o=Wn[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(Es,{Manager:Cr,Socket:Do,io:Es,connect:Es});let at=null;function No(){He&&(at||(at=new(window.AudioContext||window.webkitAudioContext)))}function au(){if(!He||(No(),!at))return;const n=at.createOscillator(),e=at.createGain();n.connect(e),e.connect(at.destination),n.frequency.value=800,n.type="sine",e.gain.setValueAtTime(.1,at.currentTime),e.gain.exponentialRampToValueAtTime(.01,at.currentTime+.1),n.start(at.currentTime),n.stop(at.currentTime+.1)}function Ro(){if(!He||(No(),!at))return;const n=()=>{const e=at.createOscillator(),t=at.createOscillator(),s=at.createGain();e.connect(s),t.connect(s),s.connect(at.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",s.gain.setValueAtTime(.15,at.currentTime),s.gain.exponentialRampToValueAtTime(.01,at.currentTime+.8),e.start(at.currentTime),t.start(at.currentTime),e.stop(at.currentTime+.8),t.stop(at.currentTime+.8)};n(),setTimeout(n,1e3)}function ou(n,e,t){if(!He||e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(au(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let r="",i="",l="/icon-192.png";const a=t?`${n.user} in #${t}`:n.user;switch(n.type){case"text":r=a,i=n.text;break;case"gif":r=a,i="ðŸŽ¬ Sent a GIF";break;case"file":r=a,i=`ðŸ“Ž Sent a file: ${n.fileName}`;break}const o=new Notification(r,{body:i,icon:l,badge:l,tag:`message-${n.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function cu(n,e,t,s){if(!He)return null;if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;Ro();const i=`Incoming ${e?"Video":"Voice"} Call`,l=`${n} is calling...`,a="/icon-192.png",o=new Notification(i,{body:l,icon:a,badge:a,tag:`call-${n}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function qr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Rn=qr();function Po(n){Rn=n}var rs={exec:()=>null};function Ve(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(r,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(Ct.caret,"$1"),t=t.replace(r,l),s},getRegex:()=>new RegExp(t,e)};return s}var uu=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ct={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},fu=/^(?:[ \t]*(?:\n|$))+/,du=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,hu=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,as=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,pu=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,xr=/(?:[*+-]|\d{1,9}[.)])/,Oo=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Mo=Ve(Oo).replace(/bull/g,xr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gu=Ve(Oo).replace(/bull/g,xr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),jr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mu=/^[^\n]+/,Vr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,vu=Ve(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Vr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),_u=Ve(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,xr).getRegex(),Ms="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Hr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bu=Ve("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Hr).replace("tag",Ms).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zo=Ve(jr).replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex(),ku=Ve(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",zo).getRegex(),Gr={blockquote:ku,code:du,def:vu,fences:hu,heading:pu,hr:as,html:bu,lheading:Mo,list:_u,newline:fu,paragraph:zo,table:rs,text:mu},ui=Ve("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex(),wu={...Gr,lheading:gu,table:ui,paragraph:Ve(jr).replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ui).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex()},yu={...Gr,html:Ve(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Hr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ve(jr).replace("hr",as).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Mo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Eu=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Tu=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Fo=/^( {2,}|\\)\n(?!\s*$)/,Au=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,zs=/[\p{P}\p{S}]/u,Wr=/[\s\p{P}\p{S}]/u,Bo=/[^\s\p{P}\p{S}]/u,Cu=Ve(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Wr).getRegex(),Lo=/(?!~)[\p{P}\p{S}]/u,Su=/(?!~)[\s\p{P}\p{S}]/u,Iu=/(?:[^\s\p{P}\p{S}]|~)/u,Du=Ve(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",uu?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Uo=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Nu=Ve(Uo,"u").replace(/punct/g,zs).getRegex(),Ru=Ve(Uo,"u").replace(/punct/g,Lo).getRegex(),qo="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Pu=Ve(qo,"gu").replace(/notPunctSpace/g,Bo).replace(/punctSpace/g,Wr).replace(/punct/g,zs).getRegex(),Ou=Ve(qo,"gu").replace(/notPunctSpace/g,Iu).replace(/punctSpace/g,Su).replace(/punct/g,Lo).getRegex(),Mu=Ve("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Bo).replace(/punctSpace/g,Wr).replace(/punct/g,zs).getRegex(),zu=Ve(/\\(punct)/,"gu").replace(/punct/g,zs).getRegex(),Fu=Ve(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Bu=Ve(Hr).replace("(?:-->|$)","-->").getRegex(),Lu=Ve("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Bu).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),As=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Uu=Ve(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",As).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),xo=Ve(/^!?\[(label)\]\[(ref)\]/).replace("label",As).replace("ref",Vr).getRegex(),jo=Ve(/^!?\[(ref)\](?:\[\])?/).replace("ref",Vr).getRegex(),qu=Ve("reflink|nolink(?!\\()","g").replace("reflink",xo).replace("nolink",jo).getRegex(),fi=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Yr={_backpedal:rs,anyPunctuation:zu,autolink:Fu,blockSkip:Du,br:Fo,code:Tu,del:rs,emStrongLDelim:Nu,emStrongRDelimAst:Pu,emStrongRDelimUnd:Mu,escape:Eu,link:Uu,nolink:jo,punctuation:Cu,reflink:xo,reflinkSearch:qu,tag:Lu,text:Au,url:rs},xu={...Yr,link:Ve(/^!?\[(label)\]\((.*?)\)/).replace("label",As).getRegex(),reflink:Ve(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",As).getRegex()},Sr={...Yr,emStrongRDelimAst:Ou,emStrongLDelim:Ru,url:Ve(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",fi).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ve(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",fi).getRegex()},ju={...Sr,br:Ve(Fo).replace("{2,}","*").getRegex(),text:Ve(Sr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},hs={normal:Gr,gfm:wu,pedantic:yu},Yn={normal:Yr,gfm:Sr,breaks:ju,pedantic:xu},Vu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},di=n=>Vu[n];function fn(n,e){if(e){if(Ct.escapeTest.test(n))return n.replace(Ct.escapeReplace,di)}else if(Ct.escapeTestNoEncode.test(n))return n.replace(Ct.escapeReplaceNoEncode,di);return n}function hi(n){try{n=encodeURI(n).replace(Ct.percentDecode,"%")}catch{return null}return n}function pi(n,e){let t=n.replace(Ct.findPipe,(i,l,a)=>{let o=!1,u=l;for(;--u>=0&&a[u]==="\\";)o=!o;return o?"|":" |"}),s=t.split(Ct.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(Ct.slashPipe,"|");return s}function Kn(n,e,t){let s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function Hu(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function gi(n,e,t,s,r){let i=e.href,l=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:l,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}function Gu(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let r=s[1];return e.split(`
`).map(i=>{let l=i.match(t.other.beginningSpace);if(l===null)return i;let[a]=l;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}var Cs=class{options;rules;lexer;constructor(n){this.options=n||Rn}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Kn(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=Gu(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=Kn(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Kn(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Kn(e[0],`
`).split(`
`),s="",r="",i=[];for(;t.length>0;){let l=!1,a=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))a.push(t[o]),l=!0;else if(!l)a.push(t[o]);else break;t=t.slice(o);let u=a.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,r=r?`${r}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=p,t.length===0)break;let h=i.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let b=h,g=b.raw+`
`+t.join(`
`),y=this.blockquote(g);i[i.length-1]=y,s=s.substring(0,s.length-b.raw.length)+y.raw,r=r.substring(0,r.length-b.text.length)+y.text;break}else if(h?.type==="list"){let b=h,g=b.raw+`
`+t.join(`
`),y=this.list(g);i[i.length-1]=y,s=s.substring(0,s.length-h.raw.length)+y.raw,r=r.substring(0,r.length-b.raw.length)+y.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,r={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let i=this.rules.other.listItemRegex(t),l=!1;for(;n;){let o=!1,u="",d="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),h=n.split(`
`,1)[0],b=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):b?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=e[1].length),b&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,n=n.substring(h.length+1),o=!0),!o){let y=this.rules.other.nextBulletRegex(g),C=this.rules.other.hrRegex(g),I=this.rules.other.fencesBeginRegex(g),m=this.rules.other.headingBeginRegex(g),T=this.rules.other.htmlBeginRegex(g);for(;n;){let v=n.split(`
`,1)[0],A;if(h=v,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),A=h):A=h.replace(this.rules.other.tabCharGlobal,"    "),I.test(h)||m.test(h)||T.test(h)||y.test(h)||C.test(h))break;if(A.search(this.rules.other.nonSpaceChar)>=g||!h.trim())d+=`
`+A.slice(g);else{if(b||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(p)||m.test(p)||C.test(p))break;d+=`
`+h}!b&&!h.trim()&&(b=!0),u+=v+`
`,n=n.substring(v.length+1),p=A.slice(g)}}r.loose||(l?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0)),r.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),r.raw+=u}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let o of r.items){if(this.lexer.state.top=!1,o.tokens=this.lexer.blockTokens(o.text,[]),o.task){if(o.text=o.text.replace(this.rules.other.listReplaceTask,""),o.tokens[0]?.type==="text"||o.tokens[0]?.type==="paragraph"){o.tokens[0].raw=o.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),o.tokens[0].text=o.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(o.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};o.checked=d.checked,r.loose?o.tokens[0]&&["paragraph","text"].includes(o.tokens[0].type)&&"tokens"in o.tokens[0]&&o.tokens[0].tokens?(o.tokens[0].raw=d.raw+o.tokens[0].raw,o.tokens[0].text=d.raw+o.tokens[0].text,o.tokens[0].tokens.unshift(d)):o.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):o.tokens.unshift(d)}}if(!r.loose){let u=o.tokens.filter(p=>p.type==="space"),d=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=d}}if(r.loose)for(let o of r.items){o.loose=!0;for(let u of o.tokens)u.type==="text"&&(u.type="paragraph")}return r}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:r}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=pi(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(pi(l,i.header.length).map((a,o)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[o]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=Kn(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=Hu(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),gi(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[s.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return gi(t,r,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...s[0]].length-1,i,l,a=r,o=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+r);(s=u.exec(e))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(l=[...i].length,s[3]||s[4]){a+=l;continue}else if((s[5]||s[6])&&r%3&&!((r+l)%3)){o+=l;continue}if(a-=l,a>0)continue;l=Math.min(l,l+a+o);let d=[...s[0]][0].length,p=n.slice(0,r+s.index+d+l);if(Math.min(r,l)%2){let b=p.slice(1,-1);return{type:"em",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Xt=class Ir{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rn,this.options.tokenizer=this.options.tokenizer||new Cs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Ct,block:hs.normal,inline:Yn.normal};this.options.pedantic?(t.block=hs.pedantic,t.inline=Yn.pedantic):this.options.gfm&&(t.block=hs.gfm,this.options.breaks?t.inline=Yn.breaks:t.inline=Yn.gfm),this.tokenizer.rules=t}static get rules(){return{block:hs,inline:Yn}}static lex(e,t){return new Ir(t).lex(e)}static lexInline(e,t){return new Ir(t).inlineTokens(e)}lex(e){e=e.replace(Ct.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(Ct.tabCharGlobal,"    ").replace(Ct.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let l=t.at(-1);r.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,a=e.slice(1),o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},a),typeof o=="number"&&o>=0&&(l=Math.min(l,o))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let l=t.at(-1);s&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r),s=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let l=!1,a="";for(;e;){l||(a=""),l=!1;let o;if(this.options.extensions?.inline?.some(d=>(o=d.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let d=t.at(-1);o.type==="text"&&d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,s,a)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let u=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),h;this.options.extensions.startInline.forEach(b=>{h=b.call({lexer:this},p),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(a=o.raw.slice(-1)),l=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},Ss=class{options;parser;constructor(n){this.options=n||Rn}space(n){return""}code({text:n,lang:e,escaped:t}){let s=(e||"").match(Ct.notSpaceStart)?.[0],r=n.replace(Ct.endingNewline,"")+`
`;return s?'<pre><code class="language-'+fn(s)+'">'+(t?r:fn(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:fn(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let l=0;l<n.items.length;l++){let a=n.items[l];s+=this.listitem(a)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+s+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let r=0;r<n.header.length;r++)t+=this.tablecell(n.header[r]);e+=this.tablerow({text:t});let s="";for(let r=0;r<n.rows.length;r++){let i=n.rows[r];t="";for(let l=0;l<i.length;l++)t+=this.tablecell(i[l]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${fn(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),r=hi(n);if(r===null)return s;n=r;let i='<a href="'+n+'"';return e&&(i+=' title="'+fn(e)+'"'),i+=">"+s+"</a>",i}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let r=hi(n);if(r===null)return fn(t);n=r;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${fn(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:fn(n.text)}},Kr=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},Zt=class Dr{options;renderer;textRenderer;constructor(e){this.options=e||Rn,this.options.renderer=this.options.renderer||new Ss,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Kr}static parse(e,t){return new Dr(t).parse(e)}static parseInline(e,t){return new Dr(t).parseInline(e)}parse(e){let t="";for(let s=0;s<e.length;s++){let r=e[s];if(this.options.extensions?.renderers?.[r.type]){let l=r,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){t+=a||"";continue}}let i=r;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}parseInline(e,t=this.renderer){let s="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=a||"";continue}}let l=i;switch(l.type){case"escape":{s+=t.text(l);break}case"html":{s+=t.html(l);break}case"link":{s+=t.link(l);break}case"image":{s+=t.image(l);break}case"checkbox":{s+=t.checkbox(l);break}case"strong":{s+=t.strong(l);break}case"em":{s+=t.em(l);break}case"codespan":{s+=t.codespan(l);break}case"br":{s+=t.br(l);break}case"del":{s+=t.del(l);break}case"text":{s+=t.text(l);break}default:{let a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}},ns=class{options;block;constructor(n){this.options=n||Rn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Xt.lex:Xt.lexInline}provideParser(){return this.block?Zt.parse:Zt.parseInline}},Wu=class{defaults=qr();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Zt;Renderer=Ss;TextRenderer=Kr;Lexer=Xt;Tokenizer=Cs;Hooks=ns;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let s of n)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let r=s;for(let i of r.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of r.rows)for(let l of i)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let r=s;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let l=r[i].flat(1/0);t=t.concat(this.walkTokens(l,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...l){let a=r.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),t.renderer){let r=this.defaults.renderer||new Ss(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,a=t.renderer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d||""}}s.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new Cs(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,a=t.tokenizer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new ns;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,a=t.hooks[l],o=r[l];ns.passThroughHooks.has(i)?r[l]=u=>{if(this.defaults.async&&ns.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await a.call(r,u);return o.call(r,p)})();let d=a.call(r,u);return o.call(r,d)}:r[l]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;s.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),r&&(a=a.concat(r.call(this,l))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Xt.lex(n,e??this.defaults)}parser(n,e){return Zt.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let l=r.hooks?await r.hooks.preprocess(e):e,a=await(r.hooks?await r.hooks.provideLexer():n?Xt.lex:Xt.lexInline)(l,r),o=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():n?Zt.parse:Zt.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let l=(r.hooks?r.hooks.provideLexer():n?Xt.lex:Xt.lexInline)(e,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():n?Zt.parse:Zt.parseInline)(l,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(l){return i(l)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+fn(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},Dn=new Wu;function Ge(n,e){return Dn.parse(n,e)}Ge.options=Ge.setOptions=function(n){return Dn.setOptions(n),Ge.defaults=Dn.defaults,Po(Ge.defaults),Ge};Ge.getDefaults=qr;Ge.defaults=Rn;Ge.use=function(...n){return Dn.use(...n),Ge.defaults=Dn.defaults,Po(Ge.defaults),Ge};Ge.walkTokens=function(n,e){return Dn.walkTokens(n,e)};Ge.parseInline=Dn.parseInline;Ge.Parser=Zt;Ge.parser=Zt.parse;Ge.Renderer=Ss;Ge.TextRenderer=Kr;Ge.Lexer=Xt;Ge.lexer=Xt.lex;Ge.Tokenizer=Cs;Ge.Hooks=ns;Ge.parse=Ge;Ge.options;Ge.setOptions;Ge.use;Ge.walkTokens;Ge.parseInline;Zt.parse;Xt.lex;var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xs={exports:{}},vi;function Yu(){return vi||(vi=1,(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var t=(function(s){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function m(T){return T instanceof o?new o(T.type,m(T.content),T.alias):Array.isArray(T)?T.map(m):T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++i}),m.__id},clone:function m(T,v){v=v||{};var A,S;switch(a.util.type(T)){case"Object":if(S=a.util.objId(T),v[S])return v[S];A={},v[S]=A;for(var E in T)T.hasOwnProperty(E)&&(A[E]=m(T[E],v));return A;case"Array":return S=a.util.objId(T),v[S]?v[S]:(A=[],v[S]=A,T.forEach(function(N,D){A[D]=m(N,v)}),A);default:return T}},getLanguage:function(m){for(;m;){var T=r.exec(m.className);if(T)return T[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,T){m.className=m.className.replace(RegExp(r,"gi"),""),m.classList.add("language-"+T)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(m){var T=document.getElementsByTagName("script");for(var v in T)if(T[v].src==m)return T[v]}return null}},isActive:function(m,T,v){for(var A="no-"+T;m;){var S=m.classList;if(S.contains(T))return!0;if(S.contains(A))return!1;m=m.parentElement}return!!v}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(m,T){var v=a.util.clone(a.languages[m]);for(var A in T)v[A]=T[A];return v},insertBefore:function(m,T,v,A){A=A||a.languages;var S=A[m],E={};for(var N in S)if(S.hasOwnProperty(N)){if(N==T)for(var D in v)v.hasOwnProperty(D)&&(E[D]=v[D]);v.hasOwnProperty(N)||(E[N]=S[N])}var B=A[m];return A[m]=E,a.languages.DFS(a.languages,function(O,F){F===B&&O!=m&&(this[O]=E)}),E},DFS:function m(T,v,A,S){S=S||{};var E=a.util.objId;for(var N in T)if(T.hasOwnProperty(N)){v.call(T,N,T[N],A||N);var D=T[N],B=a.util.type(D);B==="Object"&&!S[E(D)]?(S[E(D)]=!0,m(D,v,null,S)):B==="Array"&&!S[E(D)]&&(S[E(D)]=!0,m(D,v,N,S))}}},plugins:{},highlightAll:function(m,T){a.highlightAllUnder(document,m,T)},highlightAllUnder:function(m,T,v){var A={callback:v,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),a.hooks.run("before-all-elements-highlight",A);for(var S=0,E;E=A.elements[S++];)a.highlightElement(E,T===!0,A.callback)},highlightElement:function(m,T,v){var A=a.util.getLanguage(m),S=a.languages[A];a.util.setLanguage(m,A);var E=m.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(E,A);var N=m.textContent,D={element:m,language:A,grammar:S,code:N};function B(F){D.highlightedCode=F,a.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,a.hooks.run("after-highlight",D),a.hooks.run("complete",D),v&&v.call(D.element)}if(a.hooks.run("before-sanity-check",D),E=D.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!D.code){a.hooks.run("complete",D),v&&v.call(D.element);return}if(a.hooks.run("before-highlight",D),!D.grammar){B(a.util.encode(D.code));return}if(T&&s.Worker){var O=new Worker(a.filename);O.onmessage=function(F){B(F.data)},O.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else B(a.highlight(D.code,D.grammar,D.language))},highlight:function(m,T,v){var A={code:m,grammar:T,language:v};if(a.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=a.tokenize(A.code,A.grammar),a.hooks.run("after-tokenize",A),o.stringify(a.util.encode(A.tokens),A.language)},tokenize:function(m,T){var v=T.rest;if(v){for(var A in v)T[A]=v[A];delete T.rest}var S=new p;return h(S,S.head,m),d(m,S,T,S.head,0),g(S)},hooks:{all:{},add:function(m,T){var v=a.hooks.all;v[m]=v[m]||[],v[m].push(T)},run:function(m,T){var v=a.hooks.all[m];if(!(!v||!v.length))for(var A=0,S;S=v[A++];)S(T)}},Token:o};s.Prism=a;function o(m,T,v,A){this.type=m,this.content=T,this.alias=v,this.length=(A||"").length|0}o.stringify=function m(T,v){if(typeof T=="string")return T;if(Array.isArray(T)){var A="";return T.forEach(function(B){A+=m(B,v)}),A}var S={type:T.type,content:m(T.content,v),tag:"span",classes:["token",T.type],attributes:{},language:v},E=T.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),a.hooks.run("wrap",S);var N="";for(var D in S.attributes)N+=" "+D+'="'+(S.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+N+">"+S.content+"</"+S.tag+">"};function u(m,T,v,A){m.lastIndex=T;var S=m.exec(v);if(S&&A&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function d(m,T,v,A,S,E){for(var N in v)if(!(!v.hasOwnProperty(N)||!v[N])){var D=v[N];D=Array.isArray(D)?D:[D];for(var B=0;B<D.length;++B){if(E&&E.cause==N+","+B)return;var O=D[B],F=O.inside,L=!!O.lookbehind,U=!!O.greedy,P=O.alias;if(U&&!O.pattern.global){var q=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,q+"g")}for(var Y=O.pattern||O,x=A.next,K=S;x!==T.tail&&!(E&&K>=E.reach);K+=x.value.length,x=x.next){var H=x.value;if(T.length>m.length)return;if(!(H instanceof o)){var W=1,$;if(U){if($=u(Y,K,m,L),!$||$.index>=m.length)break;var de=$.index,ne=$.index+$[0].length,le=K;for(le+=x.value.length;de>=le;)x=x.next,le+=x.value.length;if(le-=x.value.length,K=le,x.value instanceof o)continue;for(var se=x;se!==T.tail&&(le<ne||typeof se.value=="string");se=se.next)W++,le+=se.value.length;W--,H=m.slice(K,le),$.index-=K}else if($=u(Y,0,H,L),!$)continue;var de=$.index,re=$[0],ee=H.slice(0,de),oe=H.slice(de+re.length),ke=K+H.length;E&&ke>E.reach&&(E.reach=ke);var Te=x.prev;ee&&(Te=h(T,Te,ee),K+=ee.length),b(T,Te,W);var Ue=new o(N,F?a.tokenize(re,F):re,P,re);if(x=h(T,Te,Ue),oe&&h(T,x,oe),W>1){var _e={cause:N+","+B,reach:ke};d(m,T,v,x.prev,K,_e),E&&_e.reach>E.reach&&(E.reach=_e.reach)}}}}}}function p(){var m={value:null,prev:null,next:null},T={value:null,prev:m,next:null};m.next=T,this.head=m,this.tail=T,this.length=0}function h(m,T,v){var A=T.next,S={value:v,prev:T,next:A};return T.next=S,A.prev=S,m.length++,S}function b(m,T,v){for(var A=T.next,S=0;S<v&&A!==m.tail;S++)A=A.next;T.next=A,A.prev=T,m.length-=S}function g(m){for(var T=[],v=m.head.next;v!==m.tail;)T.push(v.value),v=v.next;return T}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(m){var T=JSON.parse(m.data),v=T.language,A=T.code,S=T.immediateClose;s.postMessage(a.highlight(A,a.languages[v],v)),S&&s.close()},!1)),a;var y=a.util.currentScript();y&&(a.filename=y.src,y.hasAttribute("data-manual")&&(a.manual=!0));function C(){a.manual||a.highlightAll()}if(!a.manual){var I=document.readyState;I==="loading"||I==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return a})(e);n.exports&&(n.exports=t),typeof mi<"u"&&(mi.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};a["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(s,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,(function(s){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var i=s.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))})(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,(function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",r=function(y,C){return"âœ– Error "+y+" while fetching file: "+C},i="âœ– Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",o="loading",u="loaded",d="failed",p="pre[data-src]:not(["+a+'="'+u+'"]):not(['+a+'="'+o+'"])';function h(y,C,I){var m=new XMLHttpRequest;m.open("GET",y,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?C(m.responseText):m.status>=400?I(r(m.status,m.statusText)):I(i))},m.send(null)}function b(y){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(C){var I=Number(C[1]),m=C[2],T=C[3];return m?T?[I,Number(T)]:[I,void 0]:[I,I]}}t.hooks.add("before-highlightall",function(y){y.selector+=", "+p}),t.hooks.add("before-sanity-check",function(y){var C=y.element;if(C.matches(p)){y.code="",C.setAttribute(a,o);var I=C.appendChild(document.createElement("CODE"));I.textContent=s;var m=C.getAttribute("data-src"),T=y.language;if(T==="none"){var v=(/\.(\w+)$/.exec(m)||[,"none"])[1];T=l[v]||v}t.util.setLanguage(I,T),t.util.setLanguage(C,T);var A=t.plugins.autoloader;A&&A.loadLanguages(T),h(m,function(S){C.setAttribute(a,u);var E=b(C.getAttribute("data-range"));if(E){var N=S.split(/\r\n?|\n/g),D=E[0],B=E[1]==null?N.length:E[1];D<0&&(D+=N.length),D=Math.max(0,Math.min(D-1,N.length)),B<0&&(B+=N.length),B=Math.max(0,Math.min(B,N.length)),S=N.slice(D,B).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(D+1))}I.textContent=S,t.highlightElement(I)},function(S){C.setAttribute(a,d),I.textContent=S})}}),t.plugins.fileHighlight={highlight:function(C){for(var I=(C||document).querySelectorAll(p),m=0,T;T=I[m++];)t.highlightElement(T)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(xs)),xs.exports}var Ku=Yu();const js=Vo(Ku);const{entries:Ho,setPrototypeOf:_i,isFrozen:Xu,getPrototypeOf:Zu,getOwnPropertyDescriptor:Ju}=Object;let{freeze:St,seal:Ht,create:Nr}=Object,{apply:Rr,construct:Pr}=typeof Reflect<"u"&&Reflect;St||(St=function(e){return e});Ht||(Ht=function(e){return e});Rr||(Rr=function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return e.apply(t,r)});Pr||(Pr=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new e(...s)});const ps=It(Array.prototype.forEach),Qu=It(Array.prototype.lastIndexOf),bi=It(Array.prototype.pop),Xn=It(Array.prototype.push),$u=It(Array.prototype.splice),Ts=It(String.prototype.toLowerCase),Vs=It(String.prototype.toString),Hs=It(String.prototype.match),Zn=It(String.prototype.replace),ef=It(String.prototype.indexOf),tf=It(String.prototype.trim),Wt=It(Object.prototype.hasOwnProperty),Tt=It(RegExp.prototype.test),Jn=nf(TypeError);function It(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return Rr(n,e,s)}}function nf(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Pr(n,t)}}function Be(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ts;_i&&_i(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const i=t(r);i!==r&&(Xu(e)||(e[s]=i),r=i)}n[r]=!0}return n}function sf(n){for(let e=0;e<n.length;e++)Wt(n,e)||(n[e]=null);return n}function dn(n){const e=Nr(null);for(const[t,s]of Ho(n))Wt(n,t)&&(Array.isArray(s)?e[t]=sf(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=dn(s):e[t]=s);return e}function Qn(n,e){for(;n!==null;){const s=Ju(n,e);if(s){if(s.get)return It(s.get);if(typeof s.value=="function")return It(s.value)}n=Zu(n)}function t(){return null}return t}const ki=St(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gs=St(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ws=St(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rf=St(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ys=St(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lf=St(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wi=St(["#text"]),yi=St(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ks=St(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ei=St(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gs=St(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),af=Ht(/\{\{[\w\W]*|[\w\W]*\}\}/gm),of=Ht(/<%[\w\W]*|[\w\W]*%>/gm),cf=Ht(/\$\{[\w\W]*/gm),uf=Ht(/^data-[\-\w.\u00B7-\uFFFF]+$/),ff=Ht(/^aria-[\-\w]+$/),Go=Ht(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),df=Ht(/^(?:\w+script|data):/i),hf=Ht(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wo=Ht(/^html$/i),pf=Ht(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ti=Object.freeze({__proto__:null,ARIA_ATTR:ff,ATTR_WHITESPACE:hf,CUSTOM_ELEMENT:pf,DATA_ATTR:uf,DOCTYPE_NAME:Wo,ERB_EXPR:of,IS_ALLOWED_URI:Go,IS_SCRIPT_OR_DATA:df,MUSTACHE_EXPR:af,TMPLIT_EXPR:cf});const $n={element:1,text:3,progressingInstruction:7,comment:8,document:9},gf=function(){return typeof window>"u"?null:window},mf=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Ai=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Yo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gf();const e=me=>Yo(me);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==$n.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:a,Element:o,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:b}=n,g=o.prototype,y=Qn(g,"cloneNode"),C=Qn(g,"remove"),I=Qn(g,"nextSibling"),m=Qn(g,"childNodes"),T=Qn(g,"parentNode");if(typeof l=="function"){const me=t.createElement("template");me.content&&me.content.ownerDocument&&(t=me.content.ownerDocument)}let v,A="";const{implementation:S,createNodeIterator:E,createDocumentFragment:N,getElementsByTagName:D}=t,{importNode:B}=s;let O=Ai();e.isSupported=typeof Ho=="function"&&typeof T=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:L,TMPLIT_EXPR:U,DATA_ATTR:P,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:x,CUSTOM_ELEMENT:K}=Ti;let{IS_ALLOWED_URI:H}=Ti,W=null;const $=Be({},[...ki,...Gs,...Ws,...Ys,...wi]);let ne=null;const le=Be({},[...yi,...Ks,...Ei,...gs]);let se=Object.seal(Nr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,re=null;const ee=Object.seal(Nr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let oe=!0,ke=!0,Te=!1,Ue=!0,_e=!1,ae=!0,be=!1,ve=!1,pe=!1,Q=!1,ue=!1,Ee=!1,qe=!0,Re=!1;const Ce="user-content-";let xe=!0,Oe=!1,ot={},st=null;const mt=Be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dt=null;const fe=Be({},["audio","video","img","source","image","track"]);let we=null;const Fe=Be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",te="http://www.w3.org/1999/xhtml";let ye=te,kt=!1,pt=null;const $e=Be({},[Nt,Ft,te],Vs);let Bt=Be({},["mi","mo","mn","ms","mtext"]),gt=Be({},["annotation-xml"]);const on=Be({},["title","style","font","a","script"]);let Qe=null;const $t=["application/xhtml+xml","text/html"],_n="text/html";let Pe=null,rt=null;const Mn=t.createElement("form"),bn=function(j){return j instanceof RegExp||j instanceof Function},wt=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(rt&&rt===j)){if((!j||typeof j!="object")&&(j={}),j=dn(j),Qe=$t.indexOf(j.PARSER_MEDIA_TYPE)===-1?_n:j.PARSER_MEDIA_TYPE,Pe=Qe==="application/xhtml+xml"?Vs:Ts,W=Wt(j,"ALLOWED_TAGS")?Be({},j.ALLOWED_TAGS,Pe):$,ne=Wt(j,"ALLOWED_ATTR")?Be({},j.ALLOWED_ATTR,Pe):le,pt=Wt(j,"ALLOWED_NAMESPACES")?Be({},j.ALLOWED_NAMESPACES,Vs):$e,we=Wt(j,"ADD_URI_SAFE_ATTR")?Be(dn(Fe),j.ADD_URI_SAFE_ATTR,Pe):Fe,Dt=Wt(j,"ADD_DATA_URI_TAGS")?Be(dn(fe),j.ADD_DATA_URI_TAGS,Pe):fe,st=Wt(j,"FORBID_CONTENTS")?Be({},j.FORBID_CONTENTS,Pe):mt,de=Wt(j,"FORBID_TAGS")?Be({},j.FORBID_TAGS,Pe):dn({}),re=Wt(j,"FORBID_ATTR")?Be({},j.FORBID_ATTR,Pe):dn({}),ot=Wt(j,"USE_PROFILES")?j.USE_PROFILES:!1,oe=j.ALLOW_ARIA_ATTR!==!1,ke=j.ALLOW_DATA_ATTR!==!1,Te=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=j.SAFE_FOR_TEMPLATES||!1,ae=j.SAFE_FOR_XML!==!1,be=j.WHOLE_DOCUMENT||!1,Q=j.RETURN_DOM||!1,ue=j.RETURN_DOM_FRAGMENT||!1,Ee=j.RETURN_TRUSTED_TYPE||!1,pe=j.FORCE_BODY||!1,qe=j.SANITIZE_DOM!==!1,Re=j.SANITIZE_NAMED_PROPS||!1,xe=j.KEEP_CONTENT!==!1,Oe=j.IN_PLACE||!1,H=j.ALLOWED_URI_REGEXP||Go,ye=j.NAMESPACE||te,Bt=j.MATHML_TEXT_INTEGRATION_POINTS||Bt,gt=j.HTML_INTEGRATION_POINTS||gt,se=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&bn(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(se.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&bn(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(se.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(se.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(ke=!1),ue&&(Q=!0),ot&&(W=Be({},wi),ne=[],ot.html===!0&&(Be(W,ki),Be(ne,yi)),ot.svg===!0&&(Be(W,Gs),Be(ne,Ks),Be(ne,gs)),ot.svgFilters===!0&&(Be(W,Ws),Be(ne,Ks),Be(ne,gs)),ot.mathMl===!0&&(Be(W,Ys),Be(ne,Ei),Be(ne,gs))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?ee.tagCheck=j.ADD_TAGS:(W===$&&(W=dn(W)),Be(W,j.ADD_TAGS,Pe))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?ee.attributeCheck=j.ADD_ATTR:(ne===le&&(ne=dn(ne)),Be(ne,j.ADD_ATTR,Pe))),j.ADD_URI_SAFE_ATTR&&Be(we,j.ADD_URI_SAFE_ATTR,Pe),j.FORBID_CONTENTS&&(st===mt&&(st=dn(st)),Be(st,j.FORBID_CONTENTS,Pe)),xe&&(W["#text"]=!0),be&&Be(W,["html","head","body"]),W.table&&(Be(W,["tbody"]),delete de.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw Jn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Jn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=j.TRUSTED_TYPES_POLICY,A=v.createHTML("")}else v===void 0&&(v=mf(b,r)),v!==null&&typeof A=="string"&&(A=v.createHTML(""));St&&St(j),rt=j}},Gt=Be({},[...Gs,...Ws,...rf]),kn=Be({},[...Ys,...lf]),us=function(j){let ce=T(j);(!ce||!ce.tagName)&&(ce={namespaceURI:ye,tagName:"template"});const ge=Ts(j.tagName),et=Ts(ce.tagName);return pt[j.namespaceURI]?j.namespaceURI===Ft?ce.namespaceURI===te?ge==="svg":ce.namespaceURI===Nt?ge==="svg"&&(et==="annotation-xml"||Bt[et]):!!Gt[ge]:j.namespaceURI===Nt?ce.namespaceURI===te?ge==="math":ce.namespaceURI===Ft?ge==="math"&&gt[et]:!!kn[ge]:j.namespaceURI===te?ce.namespaceURI===Ft&&!gt[et]||ce.namespaceURI===Nt&&!Bt[et]?!1:!kn[ge]&&(on[ge]||!Gt[ge]):!!(Qe==="application/xhtml+xml"&&pt[j.namespaceURI]):!1},Et=function(j){Xn(e.removed,{element:j});try{T(j).removeChild(j)}catch{C(j)}},en=function(j,ce){try{Xn(e.removed,{attribute:ce.getAttributeNode(j),from:ce})}catch{Xn(e.removed,{attribute:null,from:ce})}if(ce.removeAttribute(j),j==="is")if(Q||ue)try{Et(ce)}catch{}else try{ce.setAttribute(j,"")}catch{}},wn=function(j){let ce=null,ge=null;if(pe)j="<remove></remove>"+j;else{const ct=Hs(j,/^[\r\n\t ]+/);ge=ct&&ct[0]}Qe==="application/xhtml+xml"&&ye===te&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const et=v?v.createHTML(j):j;if(ye===te)try{ce=new h().parseFromString(et,Qe)}catch{}if(!ce||!ce.documentElement){ce=S.createDocument(ye,"template",null);try{ce.documentElement.innerHTML=kt?A:et}catch{}}const yt=ce.body||ce.documentElement;return j&&ge&&yt.insertBefore(t.createTextNode(ge),yt.childNodes[0]||null),ye===te?D.call(ce,be?"html":"body")[0]:be?ce.documentElement:yt},Hn=function(j){return E.call(j.ownerDocument||j,j,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},hn=function(j){return j instanceof p&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof d)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},yn=function(j){return typeof a=="function"&&j instanceof a};function Ut(me,j,ce){ps(me,ge=>{ge.call(e,j,ce,rt)})}const En=function(j){let ce=null;if(Ut(O.beforeSanitizeElements,j,null),hn(j))return Et(j),!0;const ge=Pe(j.nodeName);if(Ut(O.uponSanitizeElement,j,{tagName:ge,allowedTags:W}),ae&&j.hasChildNodes()&&!yn(j.firstElementChild)&&Tt(/<[/\w!]/g,j.innerHTML)&&Tt(/<[/\w!]/g,j.textContent)||j.nodeType===$n.progressingInstruction||ae&&j.nodeType===$n.comment&&Tt(/<[/\w]/g,j.data))return Et(j),!0;if(!(ee.tagCheck instanceof Function&&ee.tagCheck(ge))&&(!W[ge]||de[ge])){if(!de[ge]&&Gn(ge)&&(se.tagNameCheck instanceof RegExp&&Tt(se.tagNameCheck,ge)||se.tagNameCheck instanceof Function&&se.tagNameCheck(ge)))return!1;if(xe&&!st[ge]){const et=T(j)||j.parentNode,yt=m(j)||j.childNodes;if(yt&&et){const ct=yt.length;for(let Rt=ct-1;Rt>=0;--Rt){const cn=y(yt[Rt],!0);cn.__removalCount=(j.__removalCount||0)+1,et.insertBefore(cn,I(j))}}}return Et(j),!0}return j instanceof o&&!us(j)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&Tt(/<\/no(script|embed|frames)/i,j.innerHTML)?(Et(j),!0):(_e&&j.nodeType===$n.text&&(ce=j.textContent,ps([F,L,U],et=>{ce=Zn(ce,et," ")}),j.textContent!==ce&&(Xn(e.removed,{element:j.cloneNode()}),j.textContent=ce)),Ut(O.afterSanitizeElements,j,null),!1)},Tn=function(j,ce,ge){if(qe&&(ce==="id"||ce==="name")&&(ge in t||ge in Mn))return!1;if(!(ke&&!re[ce]&&Tt(P,ce))){if(!(oe&&Tt(q,ce))){if(!(ee.attributeCheck instanceof Function&&ee.attributeCheck(ce,j))){if(!ne[ce]||re[ce]){if(!(Gn(j)&&(se.tagNameCheck instanceof RegExp&&Tt(se.tagNameCheck,j)||se.tagNameCheck instanceof Function&&se.tagNameCheck(j))&&(se.attributeNameCheck instanceof RegExp&&Tt(se.attributeNameCheck,ce)||se.attributeNameCheck instanceof Function&&se.attributeNameCheck(ce,j))||ce==="is"&&se.allowCustomizedBuiltInElements&&(se.tagNameCheck instanceof RegExp&&Tt(se.tagNameCheck,ge)||se.tagNameCheck instanceof Function&&se.tagNameCheck(ge))))return!1}else if(!we[ce]){if(!Tt(H,Zn(ge,x,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&j!=="script"&&ef(ge,"data:")===0&&Dt[j])){if(!(Te&&!Tt(Y,Zn(ge,x,"")))){if(ge)return!1}}}}}}}return!0},Gn=function(j){return j!=="annotation-xml"&&Hs(j,K)},An=function(j){Ut(O.beforeSanitizeAttributes,j,null);const{attributes:ce}=j;if(!ce||hn(j))return;const ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne,forceKeepAttr:void 0};let et=ce.length;for(;et--;){const yt=ce[et],{name:ct,namespaceURI:Rt,value:cn}=yt,Fn=Pe(ct),Bs=cn;let vt=ct==="value"?Bs:tf(Bs);if(ge.attrName=Fn,ge.attrValue=vt,ge.keepAttr=!0,ge.forceKeepAttr=void 0,Ut(O.uponSanitizeAttribute,j,ge),vt=ge.attrValue,Re&&(Fn==="id"||Fn==="name")&&(en(ct,j),vt=Ce+vt),ae&&Tt(/((--!?|])>)|<\/(style|title|textarea)/i,vt)){en(ct,j);continue}if(Fn==="attributename"&&Hs(vt,"href")){en(ct,j);continue}if(ge.forceKeepAttr)continue;if(!ge.keepAttr){en(ct,j);continue}if(!Ue&&Tt(/\/>/i,vt)){en(ct,j);continue}_e&&ps([F,L,U],si=>{vt=Zn(vt,si," ")});const ni=Pe(j.nodeName);if(!Tn(ni,Fn,vt)){en(ct,j);continue}if(v&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Rt)switch(b.getAttributeType(ni,Fn)){case"TrustedHTML":{vt=v.createHTML(vt);break}case"TrustedScriptURL":{vt=v.createScriptURL(vt);break}}if(vt!==Bs)try{Rt?j.setAttributeNS(Rt,ct,vt):j.setAttribute(ct,vt),hn(j)?Et(j):bi(e.removed)}catch{en(ct,j)}}Ut(O.afterSanitizeAttributes,j,null)},zn=function me(j){let ce=null;const ge=Hn(j);for(Ut(O.beforeSanitizeShadowDOM,j,null);ce=ge.nextNode();)Ut(O.uponSanitizeShadowNode,ce,null),En(ce),An(ce),ce.content instanceof i&&me(ce.content);Ut(O.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(me){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=null,ge=null,et=null,yt=null;if(kt=!me,kt&&(me="<!-->"),typeof me!="string"&&!yn(me))if(typeof me.toString=="function"){if(me=me.toString(),typeof me!="string")throw Jn("dirty is not a string, aborting")}else throw Jn("toString is not a function");if(!e.isSupported)return me;if(ve||wt(j),e.removed=[],typeof me=="string"&&(Oe=!1),Oe){if(me.nodeName){const cn=Pe(me.nodeName);if(!W[cn]||de[cn])throw Jn("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof a)ce=wn("<!---->"),ge=ce.ownerDocument.importNode(me,!0),ge.nodeType===$n.element&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?ce=ge:ce.appendChild(ge);else{if(!Q&&!_e&&!be&&me.indexOf("<")===-1)return v&&Ee?v.createHTML(me):me;if(ce=wn(me),!ce)return Q?null:Ee?A:""}ce&&pe&&Et(ce.firstChild);const ct=Hn(Oe?me:ce);for(;et=ct.nextNode();)En(et),An(et),et.content instanceof i&&zn(et.content);if(Oe)return me;if(Q){if(ue)for(yt=N.call(ce.ownerDocument);ce.firstChild;)yt.appendChild(ce.firstChild);else yt=ce;return(ne.shadowroot||ne.shadowrootmode)&&(yt=B.call(s,yt,!0)),yt}let Rt=be?ce.outerHTML:ce.innerHTML;return be&&W["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&Tt(Wo,ce.ownerDocument.doctype.name)&&(Rt="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+Rt),_e&&ps([F,L,U],cn=>{Rt=Zn(Rt,cn," ")}),v&&Ee?v.createHTML(Rt):Rt},e.setConfig=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wt(me),ve=!0},e.clearConfig=function(){rt=null,ve=!1},e.isValidAttribute=function(me,j,ce){rt||wt({});const ge=Pe(me),et=Pe(j);return Tn(ge,et,ce)},e.addHook=function(me,j){typeof j=="function"&&Xn(O[me],j)},e.removeHook=function(me,j){if(j!==void 0){const ce=Qu(O[me],j);return ce===-1?void 0:$u(O[me],ce,1)[0]}return bi(O[me])},e.removeHooks=function(me){O[me]=[]},e.removeAllHooks=function(){O=Ai()},e}var vf=Yo();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var Ci={},Si;function _f(){return Si||(Si=1,(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var e=n.languages.extend("typescript",{});delete e["class-name"],n.languages.typescript["class-name"].inside=e,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),n.languages.ts=n.languages.typescript})(Prism)),Ci}_f();var Ii={},Di;function bf(){return Di||(Di=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Ii}bf();var Ni={},Ri;function kf(){return Ri||(Ri=1,(function(n){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,s={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[s,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:s.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:s.inside}],keyword:e,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":s,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:s.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:s.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),Ni}kf();Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;var Pi={},Oi;function wf(){return Oi||(Oi=1,(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism)),Pi}wf();var Mi={},zi;function yf(){return zi||(zi=1,(function(n){function e(K,H){return K.replace(/<<(\d+)>>/g,function(W,$){return"(?:"+H[+$]+")"})}function t(K,H,W){return RegExp(e(K,H),"")}function s(K,H){for(var W=0;W<H;W++)K=K.replace(/<<self>>/g,function(){return"(?:"+K+")"});return K.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(K){return"\\b(?:"+K.trim().replace(/ /g,"|")+")\\b"}var l=i(r.typeDeclaration),a=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),d=s(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=s(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,b=e(/<<0>>(?:\s*<<1>>)?/.source,[h,d]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,b]),y=/\[\s*(?:,\s*)*\]/.source,C=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,y]),I=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,p,y]),m=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[I]),T=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[m,g,y]),v={keyword:a,punctuation:/[<>()?,.:[\]]/},A=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,S=/"(?:\\.|[^\\"\r\n])*"/.source,E=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:v},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,T]),lookbehind:!0,inside:v},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[l,b]),lookbehind:!0,inside:v},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:v},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[C]),lookbehind:!0,inside:v},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[T,u,h]),inside:v}],keyword:a,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:v},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[T,g]),inside:v,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[T]),lookbehind:!0,inside:v,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,d]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(d),alias:"class-name",inside:v}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[l,b,h,T,a.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[b,p]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:a,"class-name":{pattern:RegExp(T),greedy:!0,inside:v},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var N=S+"|"+A,D=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[N]),B=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),O=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,F=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,B]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[O,F]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[O]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[B]),inside:n.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var L=/:[^}\r\n]+/.source,U=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),P=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,L]),q=s(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[N]),2),Y=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[q,L]);function x(K,H){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[K]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[H,L]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[P]),lookbehind:!0,greedy:!0,inside:x(P,U)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[Y]),lookbehind:!0,greedy:!0,inside:x(Y,q)}],char:{pattern:RegExp(A),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(Prism)),Mi}yf();Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];var Fi={},Bi;function Ef(){return Bi||(Bi=1,(function(n){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism)),Fi}Ef();var Li={},Ui;function Tf(){return Ui||(Ui=1,(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",s=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+s),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+s+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism)),Li}Tf();(function(n){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},s={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:s},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:s},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:s.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:s.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=n.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=s.variable[1].inside,l=0;l<r.length;l++)i[r[l]]=n.languages.bash[r[l]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var t=n.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const ls=new Map;Ge.setOptions({breaks:!0,gfm:!0});const qi={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},Af={code(n){const e=n.text;let t=n.lang;if(t&&qi[t.toLowerCase()]&&(t=qi[t.toLowerCase()]),t&&js.languages[t])try{const r=js.highlight(e,js.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Ge.use({renderer:Af});function Is(n){n=n.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),n=n.replace(/```(\w+)\n([\s\S]*?)```/g,(s,r,i)=>i.endsWith(`
`)?s:"```"+r+`
`+i+"\n```");let e;try{const s=Ge.parse(n,{async:!1});e=typeof s=="string"?s:String(s)}catch(s){console.error("Markdown parse error:",s),e=n}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(s,r)=>{const i=ls.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:s}),vf.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Cf(n){ls.set(n.name,n)}function Sf(n){ls.delete(n)}function If(n){ls.clear(),n.forEach(e=>{ls.set(e.name,e)})}const Df="wabi-chat-db",Nf=1,Pt="messages",Bn="settings";class Rf{db=null;initPromise=null;async init(){if(He&&!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Df,Nf);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(Pt)||i.createObjectStore(Pt,{keyPath:"period"}),i.objectStoreNames.contains(Bn)||i.createObjectStore(Bn,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return!He||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Bn],"readonly").objectStore(Bn).get(e);l.onsuccess=()=>t(l.result?.value),l.onerror=()=>s(l.error)})}async setSetting(e,t){if(!(!He||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Bn],"readwrite").objectStore(Bn).put({key:e,value:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async getArchive(e){return!He||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Pt],"readonly").objectStore(Pt).get(e);l.onsuccess=()=>t(l.result?.data),l.onerror=()=>s(l.error)})}async setArchive(e,t){if(!(!He||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Pt],"readwrite").objectStore(Pt).put({period:e,data:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async deleteArchive(e){if(!(!He||!this.db))return new Promise((t,s)=>{const l=this.db.transaction([Pt],"readwrite").objectStore(Pt).delete(e);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}async getAllArchiveKeys(){return!He||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Pt],"readonly").objectStore(Pt).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async getAllArchives(){return!He||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Pt],"readonly").objectStore(Pt).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async clearAllArchives(){if(!(!He||!this.db))return new Promise((e,t)=>{const i=this.db.transaction([Pt],"readwrite").objectStore(Pt).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Pf{rotationPeriod="month";maxArchives=4;db;initPromise=null;constructor(){this.db=new Rf,He&&(this.initPromise=this.init())}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){if(!He)return;const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){He&&(await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e))}async setMaxArchives(e){He&&(await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives())}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const s=this.getWeekNumber(e);return`${t}-W${String(s).padStart(2,"0")}`}case"month":{const s=e.getMonth()+1;return`${t}-${String(s).padStart(2,"0")}`}case"half-year":{const s=e.getMonth()<6?"H1":"H2";return`${t}-${s}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-t.getTime())/(1440*60*1e3));return Math.ceil((s+t.getDay()+1)/7)}async isEnabled(){if(!He)return!1;await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){He&&(await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString()))}async saveMessage(e,t){if(!He||(await this.ensureInit(),!await this.isEnabled()))return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(l){console.error("Failed to save message to IndexedDB:",l),await this.rotateArchives()}}async rotateArchives(){if(!He)return;await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const s of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${s}`),await this.db.deleteArchive(s)}}async loadAllMessages(){if(!He)return{};if(await this.ensureInit(),!await this.isEnabled())return{};const t={},s=await this.db.getAllArchives();for(const r of s){const i=r.data||{};Object.entries(i).forEach(([l,a])=>{t[l]||(t[l]=[]),t[l].push(...a)})}return Object.keys(t).forEach(r=>{t[r].sort((i,l)=>i.timestamp-l.timestamp)}),t}async deleteArchive(e){He&&(await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`))}async clearAllHistory(){He&&(await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history"))}async exportArchives(){if(!He)return;await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const s=JSON.stringify(t.data),r=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`wabi-chat-${t.period}.json`,l.click(),URL.revokeObjectURL(i)})}async exportArchive(e){if(!He)return;await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const s=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){if(!He)return{archives:[],totalSize:0,totalMessages:0};await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const l=JSON.stringify(i.data),a=new Blob([l]).size,o=i.data,u=Object.values(o).reduce((d,p)=>d+p.length,0);return{period:i.period,size:a,messageCount:u}}).sort((i,l)=>l.period.localeCompare(i.period)),s=t.reduce((i,l)=>i+l.size,0),r=t.reduce((i,l)=>i+l.messageCount,0);return{archives:t,totalSize:s,totalMessages:r}}}const Lt=new Pf,Vn=bt(null),sn=bt([]),Nn=bt("general"),At=bt({general:[]}),xt=bt([]),Ko=bt([]),an=bt(null),xi=bt(!1),Xo=bt(0),Xr=bt(null);let Se=null;function Of(n){if(!He)return;let e="http://localhost:3000";if(typeof window<"u"){const t=window.location.origin;t.includes(":5173")||(e=t)}return Se=Es(e),Vn.set(Se),Lt.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const s={};for(const[r,i]of Object.entries(t)){const l=new Set;s[r]=i.filter(a=>l.has(a.id)?!1:(l.add(a.id),!0))}At.set(s)}}),Se.on("connect",()=>{console.log("Connected to server"),xi.set(!0),Se?.emit("join",n)}),Se.on("disconnect",()=>{console.log("Disconnected from server"),xi.set(!1)}),Se.on("init",t=>{xt.set(t.users);const s=t.channels.map(i=>{if(i.type==="dm"&&i.members){const l=i.members.find(o=>o!==Se?.id),a=t.users.find(o=>o.id===l);if(a)return{...i,name:a.username,otherUser:a}}return i});sn.set(s),t.emotes&&If(t.emotes);const r=t.users.find(i=>i.id===Se?.id);r&&an.set(r),Se?.emit("join-channel","general")}),Se.on("channel-messages",t=>{At.update(s=>{const r=s[t.channelId]||[],i=new Set(r.map(a=>a.id)),l=t.messages.filter(a=>!i.has(a.id));return{...s,[t.channelId]:[...r,...l]}})}),Se.on("message",t=>{At.update(i=>{const l=i[t.channelId]||[];return l.some(a=>a.id===t.message.id)?i:{...i,[t.channelId]:[...l,t.message]}}),Lt.saveMessage(t.channelId,t.message);const s=t.message.userId===Se?.id;let r;sn.subscribe(i=>{r=i.find(a=>a.id===t.channelId)?.name})(),ou(t.message,s,r),!s&&document.hidden&&Xo.update(i=>(i===0&&Xr.set(t.message.id),i+1))}),Se.on("user-joined",t=>{xt.update(s=>[...s,t])}),Se.on("user-left",t=>{xt.update(s=>s.filter(r=>r.id!==t.id))}),Se.on("typing",t=>{Ko.set(t)}),Se.on("profile-updated",t=>{xt.update(s=>s.map(r=>r.id===t.id?t:r)),an.update(s=>s&&s.id===t.id?t:s)}),Se.on("message-edited",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),Se.on("message-deleted",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),Se.on("message-pin-toggled",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),Se.on("channel-created",t=>{let s=t;t.type==="dm"&&t.members&&xt.subscribe(r=>{const i=t.members.find(a=>a!==Se?.id),l=r.find(a=>a.id===i);l&&(s={...t,name:l.username,otherUser:l})})(),sn.update(r=>[...r,s]),At.update(r=>({...r,[s.id]:[]}))}),Se.on("channel-deleted",t=>{sn.update(s=>s.filter(r=>r.id!==t)),At.update(s=>{const r={...s};return delete r[t],r}),Nn.update(s=>s===t?"general":s)}),Se.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),Se.on("dm-created",t=>{const s={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};sn.update(r=>r.some(i=>i.id===t.channelId)?r:[...r,s]),At.update(r=>({...r,[t.channelId]:r[t.channelId]||[]})),Nn.set(t.channelId)}),Se.on("group-created",t=>{sn.update(s=>s.some(r=>r.id===t.id)?s:[...s,t]),At.update(s=>({...s,[t.id]:s[t.id]||[]}))}),Se.on("emote-added",t=>{Cf(t)}),Se.on("emote-deleted",t=>{Sf(t)}),Se.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),Se.on("channel-settings-updated",t=>{sn.update(s=>s.map(r=>r.id===t.channelId?{...r,autoDeleteAfter:t.autoDeleteAfter}:r))}),Se}function Mf(n){Se?.emit("join-channel",n),Nn.set(n)}function zf(n){Se?.emit("create-channel",n)}function Ff(n){Se?.emit("delete-channel",n)}function ms(n,e,t="text",s){Se?.emit("message",{channelId:n,text:e,type:t,...s})}function Zo(n,e,t){Se?.emit("edit-message",{channelId:n,messageId:e,newText:t})}function Bf(n,e){Se?.emit("delete-message",{channelId:n,messageId:e})}function Zr(n,e){Se?.emit("toggle-pin-message",{channelId:n,messageId:e})}function Xs(n){Se?.emit("typing",n)}function ji(n,e){Se?.emit("update-profile",{status:n,profilePicture:e})}function Lf(){Se?.disconnect(),Vn.set(null),Se=null}function Uf(){Xo.set(0),Xr.set(null)}function Jo(n){Se?.emit("create-dm",{targetUserId:n})}function qf(n,e){Se?.emit("update-channel-settings",{channelId:n,autoDeleteAfter:e})}let vs;const xf=new Uint8Array(16);function jf(){if(!vs&&(vs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vs(xf)}const _t=[];for(let n=0;n<256;++n)_t.push((n+256).toString(16).slice(1));function Vf(n,e=0){return _t[n[e+0]]+_t[n[e+1]]+_t[n[e+2]]+_t[n[e+3]]+"-"+_t[n[e+4]]+_t[n[e+5]]+"-"+_t[n[e+6]]+_t[n[e+7]]+"-"+_t[n[e+8]]+_t[n[e+9]]+"-"+_t[n[e+10]]+_t[n[e+11]]+_t[n[e+12]]+_t[n[e+13]]+_t[n[e+14]]+_t[n[e+15]]}const Hf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vi={randomUUID:Hf};function Gf(n,e,t){if(Vi.randomUUID&&!n)return Vi.randomUUID();n=n||{};const s=n.random||(n.rng||jf)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Vf(s)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var Cn="",Qo=16,Wf=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let s=0;s<Qo;s++)n+=e.charAt(Math.floor(Math.random()*t));return n},Yf=()=>{if(!Cn){try{Cn=sessionStorage.getItem("giphyPingbackId")}catch{}if(!Cn){const n=new Date().getTime().toString(16);try{Cn=`${n}${Gf().replace(/-/g,"")}`.substring(0,Qo)}catch{Cn=Wf()}try{sessionStorage.setItem("giphyPingbackId",Cn)}catch{}}}return Cn},Kf=Yf,_s=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{_s=!0,n(_s)},e.onerror=()=>{_s=!1,n(_s)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var ss=(typeof window<"u"?window:global)||{};ss._GIPHY_SDK_HEADERS_=ss._GIPHY_SDK_HEADERS_||(ss.Headers?new ss.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var $o=()=>ss._GIPHY_SDK_HEADERS_,Hi=(n,e)=>{var t;return(t=$o())==null?void 0:t.set(n,e)},Xf=Object.defineProperty,Zf=Object.defineProperties,Jf=Object.getOwnPropertyDescriptors,Qf=Object.getOwnPropertyNames,Gi=Object.getOwnPropertySymbols,$f=Object.prototype.hasOwnProperty,ed=Object.prototype.propertyIsEnumerable,Wi=(n,e,t)=>e in n?Xf(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,nn=(n,e)=>{for(var t in e||(e={}))$f.call(e,t)&&Wi(n,t,e[t]);if(Gi)for(var t of Gi(e))ed.call(e,t)&&Wi(n,t,e[t]);return n},Zs=(n,e)=>Zf(n,Jf(e)),td=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),nd=(n,e)=>function(){return e||(0,n[Qf(n)[0]])((e={exports:{}}).exports,e),e.exports},sd=(n,e,t)=>new Promise((s,r)=>{var i=o=>{try{a(t.next(o))}catch(u){r(u)}},l=o=>{try{a(t.throw(o))}catch(u){r(u)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,l);a((t=t.apply(n,e)).next())}),rd=nd({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),id=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],ld=["suppress_chrome","is_public","is_verified"],Yi=n=>e=>n[e]=!!n[e],ad=n=>typeof n=="string"?n:n.text,ec=(n,e="")=>{const t=nn({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(ad),t.bottle_data||(t.bottle_data={}),t.response_id=e,id.forEach(Yi(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:s}=t;if(s){const r=nn({},s);ld.forEach(Yi(r)),t.user=r}return t},Ki=n=>{const{response_id:e}=n.meta;return n.data=ec(n.data,e),n},un=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>ec(t,e)),n},od=(typeof window<"u"?window:global)||{},cd=od.GIPHY_API_URL||"https://api.giphy.com/v1/",tc=class extends Error{constructor(n,e,t=0,s=""){super(n),this.url=e,this.status=t,this.statusText=s}},ud=class extends tc{},Xi=tc,fd="@giphy/js-fetch-api: ",dd="Error fetching",hd=n=>n,Kt={},pd=6e4,gd=6e3,md=()=>{const n=Date.now();Object.keys(Kt).forEach(e=>{const t=Kt[e].isError?gd:pd;n-Kt[e].ts>=t&&delete Kt[e]})};function vd(n,e={}){const{apiVersion:t=1,noCache:s=!1,normalizer:r=hd}=e,i=cd.replace(/\/v\d+\/$/,`/v${t}/`);if(md(),!Kt[n]||s){const l=`${i}${n}`,a=()=>sd(this,null,function*(){var o,u;let d;try{const p=yield fetch(l,{method:"get"});if(p.ok){const h=yield p.json();if((o=h.meta)!=null&&o.response_id)return r(h);throw{message:"synthetic response"}}else{let h=dd;try{const g=yield p.json();g.message&&(h=g.message),(u=g.meta)!=null&&u.msg&&(h=g.meta.msg)}catch{}Kt[n]&&(Kt[n].isError=!0);let b=Xi;h==="This content is not available in your location"&&(b=ud),d=new b(`${fd}${h}`,l,p.status,p.statusText)}}catch(p){d=new Xi(p.message,l),Kt[n]&&(Kt[n].isError=!0)}throw d});Kt[n]={request:a(),ts:Date.now()}}return Kt[n].request}var Ot=vd,Js=n=>n&&n.type?n.type:"gifs",_d=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(nn(Zs(nn({},t),{api_key:this.apiKey,pingback_id:Kf()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return Ot(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return Ot(`${t}gifs/${n}?${this.getQS()}`,{normalizer:Ki})}gifs(n,e){return Array.isArray(n)?Ot(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:un}):Ot(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:un})}emoji(n){return Ot(`emoji?${this.getQS(n)}`,{normalizer:un})}emojiDefaultVariations(n){return Ot(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:un})}emojiVariations(n){return Ot(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:un})}animate(n,e={}){const t=this.getQS(Zs(nn({},e),{m:n}));return Ot(`text/animate?${t}`,{normalizer:un})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let s;e.type==="text"&&(s=!0);const r=this.getQS(Zs(nn({rating:"pg-13"},e),{q:t,excludeDynamicResults:s}));return Ot(`${Js(e)}/search?${r}`,{normalizer:un})}subcategories(n,e){return Ot(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return Ot(`${Js(n)}/trending?${this.getQS(nn({rating:"pg-13"},n))}`,{normalizer:un})}random(n){return Ot(`${Js(n)}/random?${this.getQS(nn({rating:"pg-13"},n))}`,{noCache:!0,normalizer:Ki})}related(n,e={}){const{type:t="gifs"}=e;return Ot(`${t}/related?${this.getQS(nn({gif_id:n,rating:"pg-13"},e))}`,{normalizer:un})}channels(n,e={}){return Ot(`channels/search?${this.getQS(nn({q:n,rating:"pg-13"},e))}`)}},bd=_d,Zi;if(typeof td<"u"){const{version:n}=rd();(Zi=$o())!=null&&Zi.get("X-GIPHY-SDK-NAME")||(Hi("X-GIPHY-SDK-NAME","FetchAPI"),Hi("X-GIPHY-SDK-VERSION",n))}function Ji(n,e,t){const s=n.slice();return s[11]=e[t],s}function kd(n){let e=[],t=new Map,s,r=Ye(n[1]);const i=l=>l[11].id;for(let l=0;l<r.length;l+=1){let a=Ji(n,r,l),o=i(a);t.set(o,e[l]=Qi(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Ne()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Ne()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);V(l,s,a)},p(l,a){a&34&&(r=Ye(l[1]),e=Qt(e,a,i,1,l,r,t,s.parentNode,Jt,Qi,s,Ji))},d(l){l&&_(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function wd(n){let e,t="No GIFs found";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){f(e,"class","no-results svelte-x54k5n")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function yd(n){let e,t="Loading...";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-x54k5n")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function Qi(n,e){let t,s,r,i,l,a,o;function u(){return e[8](e[11])}return{key:n,first:null,c(){t=w("button"),s=w("img"),l=z(),this.h()},l(d){t=k(d,"BUTTON",{class:!0});var p=R(t);s=k(p,"IMG",{src:!0,alt:!0,class:!0}),l=M(p),p.forEach(_),this.h()},h(){We(s.src,r=e[11].images.fixed_height_small.url)||f(s,"src",r),f(s,"alt",i=e[11].title),f(s,"class","svelte-x54k5n"),f(t,"class","gif-item svelte-x54k5n"),this.first=t},m(d,p){V(d,t,p),c(t,s),c(t,l),a||(o=G(t,"click",u),a=!0)},p(d,p){e=d,p&2&&!We(s.src,r=e[11].images.fixed_height_small.url)&&f(s,"src",r),p&2&&i!==(i=e[11].title)&&f(s,"alt",i)},d(d){d&&_(t),a=!1,o()}}}function Ed(n){let e,t,s,r,i,l="âœ•",a,o,u,d;function p(g,y){return g[2]?yd:g[1].length===0?wd:kd}let h=p(n),b=h(n);return{c(){e=w("div"),t=w("div"),s=w("input"),r=z(),i=w("button"),i.textContent=l,a=z(),o=w("div"),b.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"DIV",{class:!0});var C=R(t);s=k(C,"INPUT",{type:!0,placeholder:!0,class:!0}),r=M(C),i=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-xkwxcu"&&(i.textContent=l),C.forEach(_),a=M(y),o=k(y,"DIV",{class:!0});var I=R(o);b.l(I),I.forEach(_),y.forEach(_),this.h()},h(){f(s,"type","text"),f(s,"placeholder","Search GIFs..."),f(s,"class","svelte-x54k5n"),f(i,"class","close-btn svelte-x54k5n"),f(t,"class","giphy-header svelte-x54k5n"),f(o,"class","gif-grid svelte-x54k5n"),f(e,"class","giphy-picker svelte-x54k5n")},m(g,y){V(g,e,y),c(e,t),c(t,s),it(s,n[0]),c(t,r),c(t,i),c(e,a),c(e,o),b.m(o,null),u||(d=[G(s,"input",n[6]),G(s,"input",n[4]),G(i,"click",n[7])],u=!0)},p(g,[y]){y&1&&s.value!==g[0]&&it(s,g[0]),h===(h=p(g))&&b?b.p(g,y):(b.d(1),b=h(g),b&&(b.c(),b.m(o,null)))},i:ze,o:ze,d(g){g&&_(e),b.d(),u=!1,Ie(d)}}}function Td(n,e,t){const s=Or();let r="",i=[],l=!1;const a=new bd("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,l=!0);try{const{data:g}=await a.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,l=!1)}async function u(){t(2,l=!0);try{const{data:g}=await a.trending({limit:20});t(1,i=g),console.log("Loaded GIFs:",i.length,i)}catch(g){console.error("Error fetching trending GIFs:",g),t(1,i=[])}t(2,l=!1)}function d(g){s("select",g.images.fixed_height.url)}function p(){r=this.value,t(0,r)}return[r,i,l,s,o,d,p,()=>s("close"),g=>d(g)]}class Ad extends dt{constructor(e){super(),ht(this,e,Td,Ed,ft,{})}}function $i(n){let e,t,s,r,i=(n[2]?"Your Profile":n[1].username)+"",l,a,o,u="Ã—",d,p,h,b,g,y,C,I,m,T="Username:",v,A,S=n[1].username+"",E,N,D,B,O,F;function L($,ne){return $[4]||$[1].profilePicture?Sd:Cd}let U=L(n),P=U(n),q=n[2]&&el(n),Y=!n[2]&&tl(n);function x($,ne){return $[2]?Pd:Rd}let K=x(n),H=K(n),W=n[2]&&sl(n);return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),l=J(i),a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),h=w("div"),b=w("div"),P.c(),g=z(),q&&q.c(),y=z(),C=w("div"),I=w("div"),m=w("span"),m.textContent=T,v=z(),A=w("span"),E=J(S),N=z(),Y&&Y.c(),D=z(),H.c(),B=z(),W&&W.c(),this.h()},l($){e=k($,"DIV",{class:!0});var ne=R(e);t=k(ne,"DIV",{class:!0});var le=R(t);s=k(le,"DIV",{class:!0});var se=R(s);r=k(se,"H2",{class:!0});var de=R(r);l=Z(de,i),de.forEach(_),a=M(se),o=k(se,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-12zniqk"&&(o.textContent=u),se.forEach(_),d=M(le),p=k(le,"DIV",{class:!0});var re=R(p);h=k(re,"DIV",{class:!0});var ee=R(h);b=k(ee,"DIV",{class:!0});var oe=R(b);P.l(oe),oe.forEach(_),g=M(ee),q&&q.l(ee),ee.forEach(_),y=M(re),C=k(re,"DIV",{class:!0});var ke=R(C);I=k(ke,"DIV",{class:!0});var Te=R(I);m=k(Te,"SPAN",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-1fffgfa"&&(m.textContent=T),v=M(Te),A=k(Te,"SPAN",{class:!0});var Ue=R(A);E=Z(Ue,S),Ue.forEach(_),Te.forEach(_),ke.forEach(_),N=M(re),Y&&Y.l(re),D=M(re),H.l(re),re.forEach(_),B=M(le),W&&W.l(le),le.forEach(_),ne.forEach(_),this.h()},h(){f(r,"class","svelte-mn2c16"),f(o,"class","close-btn svelte-mn2c16"),f(s,"class","modal-header svelte-mn2c16"),f(b,"class","profile-picture-container svelte-mn2c16"),f(h,"class","profile-picture-section svelte-mn2c16"),f(m,"class","info-label svelte-mn2c16"),f(A,"class","info-value svelte-mn2c16"),f(I,"class","info-row svelte-mn2c16"),f(C,"class","user-info svelte-mn2c16"),f(p,"class","modal-body svelte-mn2c16"),f(t,"class","modal-content svelte-mn2c16"),f(e,"class","modal-overlay svelte-mn2c16")},m($,ne){V($,e,ne),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),c(p,h),c(h,b),P.m(b,null),c(h,g),q&&q.m(h,null),c(p,y),c(p,C),c(C,I),c(I,m),c(I,v),c(I,A),c(A,E),c(p,N),Y&&Y.m(p,null),c(p,D),H.m(p,null),c(t,B),W&&W.m(t,null),O||(F=[G(o,"click",n[9]),G(t,"click",nt(n[12])),G(e,"click",n[9])],O=!0)},p($,ne){ne&6&&i!==(i=($[2]?"Your Profile":$[1].username)+"")&&ie(l,i),U===(U=L($))&&P?P.p($,ne):(P.d(1),P=U($),P&&(P.c(),P.m(b,null))),$[2]?q?q.p($,ne):(q=el($),q.c(),q.m(h,null)):q&&(q.d(1),q=null),ne&2&&S!==(S=$[1].username+"")&&ie(E,S),$[2]?Y&&(Y.d(1),Y=null):Y?Y.p($,ne):(Y=tl($),Y.c(),Y.m(p,D)),K===(K=x($))&&H?H.p($,ne):(H.d(1),H=K($),H&&(H.c(),H.m(p,null))),$[2]?W?W.p($,ne):(W=sl($),W.c(),W.m(t,null)):W&&(W.d(1),W=null)},d($){$&&_(e),P.d(),q&&q.d(),Y&&Y.d(),H.d(),W&&W.d(),O=!1,Ie(F)}}}function Cd(n){let e,t=n[1].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","profile-picture-placeholder svelte-mn2c16"),De(e,"background-color",n[1].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&2&&De(e,"background-color",r[1].color)},d(r){r&&_(e)}}}function Sd(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[4]||n[1].profilePicture)||f(e,"src",t),f(e,"alt",s=n[1].username),f(e,"class","profile-picture svelte-mn2c16")},m(r,i){V(r,e,i)},p(r,i){i&18&&!We(e.src,t=r[4]||r[1].profilePicture)&&f(e,"src",t),i&2&&s!==(s=r[1].username)&&f(e,"alt",s)},d(r){r&&_(e)}}}function el(n){let e,t,s=n[4]||n[1].profilePicture?"Change Picture":"Upload Picture",r,i,l,a,o;return{c(){e=w("div"),t=w("label"),r=J(s),i=z(),l=w("input"),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"LABEL",{for:!0,class:!0});var p=R(t);r=Z(p,s),p.forEach(_),i=M(d),l=k(d,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),d.forEach(_),this.h()},h(){f(t,"for","profile-picture"),f(t,"class","upload-label svelte-mn2c16"),f(l,"id","profile-picture"),f(l,"type","file"),f(l,"accept","image/*"),f(l,"class","file-input svelte-mn2c16"),f(e,"class","upload-section svelte-mn2c16")},m(u,d){V(u,e,d),c(e,t),c(t,r),c(e,i),c(e,l),a||(o=G(l,"change",n[10]),a=!0)},p(u,d){d&18&&s!==(s=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&ie(r,s)},d(u){u&&_(e),a=!1,o()}}}function tl(n){let e,t,s,r="Personal Notes:",i,l,a=!n[6]&&nl(n);function o(p,h){return p[6]?Nd:p[5]?Dd:Id}let u=o(n),d=u(n);return{c(){e=w("div"),t=w("div"),s=w("label"),s.textContent=r,i=z(),a&&a.c(),l=z(),d.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"DIV",{class:!0});var b=R(t);s=k(b,"LABEL",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1vz1uda"&&(s.textContent=r),i=M(b),a&&a.l(b),b.forEach(_),l=M(h),d.l(h),h.forEach(_),this.h()},h(){f(s,"class","notes-label svelte-mn2c16"),f(t,"class","notes-header svelte-mn2c16"),f(e,"class","notes-section svelte-mn2c16")},m(p,h){V(p,e,h),c(e,t),c(t,s),c(t,i),a&&a.m(t,null),c(e,l),d.m(e,null)},p(p,h){p[6]?a&&(a.d(1),a=null):a?a.p(p,h):(a=nl(p),a.c(),a.m(t,null)),u===(u=o(p))&&d?d.p(p,h):(d.d(1),d=u(p),d&&(d.c(),d.m(e,null)))},d(p){p&&_(e),a&&a.d(),d.d()}}}function nl(n){let e,t=n[5]?"Edit":"Add Note",s,r,i;return{c(){e=w("button"),s=J(t),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=R(e);s=Z(a,t),a.forEach(_),this.h()},h(){f(e,"class","edit-note-btn svelte-mn2c16")},m(l,a){V(l,e,a),c(e,s),r||(i=G(e,"click",n[13]),r=!0)},p(l,a){a&32&&t!==(t=l[5]?"Edit":"Add Note")&&ie(s,t)},d(l){l&&_(e),r=!1,i()}}}function Id(n){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){f(e,"class","note-placeholder svelte-mn2c16")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function Dd(n){let e,t;return{c(){e=w("div"),t=J(n[5]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=R(e);t=Z(r,n[5]),r.forEach(_),this.h()},h(){f(e,"class","note-display svelte-mn2c16")},m(s,r){V(s,e,r),c(e,t)},p(s,r){r&32&&ie(t,s[5])},d(s){s&&_(e)}}}function Nd(n){let e,t,s,r,i="Cancel",l,a,o="Save Note",u,d;return{c(){e=w("textarea"),t=z(),s=w("div"),r=w("button"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,this.h()},l(p){e=k(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),R(e).forEach(_),t=M(p),s=k(p,"DIV",{class:!0});var h=R(s);r=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-hulrz8"&&(r.textContent=i),l=M(h),a=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-9d2dbm"&&(a.textContent=o),h.forEach(_),this.h()},h(){f(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),f(e,"class","note-textarea svelte-mn2c16"),f(e,"rows","3"),f(r,"class","cancel-note-btn svelte-mn2c16"),f(a,"class","save-note-btn svelte-mn2c16"),f(s,"class","note-actions svelte-mn2c16")},m(p,h){V(p,e,h),it(e,n[5]),V(p,t,h),V(p,s,h),c(s,r),c(s,l),c(s,a),u||(d=[G(e,"input",n[14]),G(r,"click",n[15]),G(a,"click",n[8])],u=!0)},p(p,h){h&32&&it(e,p[5])},d(p){p&&(_(e),_(t),_(s)),u=!1,Ie(d)}}}function Rd(n){let e,t,s,r,i=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1)+"",l;return{c(){e=w("div"),t=w("span"),s=z(),r=w("span"),l=J(i),this.h()},l(a){e=k(a,"DIV",{class:!0});var o=R(e);t=k(o,"SPAN",{class:!0,style:!0}),R(t).forEach(_),s=M(o),r=k(o,"SPAN",{class:!0});var u=R(r);l=Z(u,i),u.forEach(_),o.forEach(_),this.h()},h(){f(t,"class","status-dot svelte-mn2c16"),De(t,"background-color",is(n[1].status)),f(r,"class","status-text svelte-mn2c16"),f(e,"class","status-display svelte-mn2c16")},m(a,o){V(a,e,o),c(e,t),c(e,s),c(e,r),c(r,l)},p(a,o){o&2&&De(t,"background-color",is(a[1].status)),o&2&&i!==(i=a[1].status.charAt(0).toUpperCase()+a[1].status.slice(1)+"")&&ie(l,i)},d(a){a&&_(e)}}}function Pd(n){let e,t,s="Status:",r,i,l,a,o,u,d,p,h,b,g,y,C,I,m,T,v,A;return{c(){e=w("div"),t=w("label"),t.textContent=s,r=z(),i=w("div"),l=w("button"),a=w("span"),o=J(`\r
								Active`),d=z(),p=w("button"),h=w("span"),b=J(`\r
								Away`),y=z(),C=w("button"),I=w("span"),m=J(`\r
								Busy`),this.h()},l(S){e=k(S,"DIV",{class:!0});var E=R(e);t=k(E,"LABEL",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-138t5u0"&&(t.textContent=s),r=M(E),i=k(E,"DIV",{class:!0});var N=R(i);l=k(N,"BUTTON",{class:!0});var D=R(l);a=k(D,"SPAN",{class:!0,style:!0}),R(a).forEach(_),o=Z(D,`\r
								Active`),D.forEach(_),d=M(N),p=k(N,"BUTTON",{class:!0});var B=R(p);h=k(B,"SPAN",{class:!0,style:!0}),R(h).forEach(_),b=Z(B,`\r
								Away`),B.forEach(_),y=M(N),C=k(N,"BUTTON",{class:!0});var O=R(C);I=k(O,"SPAN",{class:!0,style:!0}),R(I).forEach(_),m=Z(O,`\r
								Busy`),O.forEach(_),N.forEach(_),E.forEach(_),this.h()},h(){f(t,"class","status-label svelte-mn2c16"),f(a,"class","status-dot svelte-mn2c16"),De(a,"background-color",is("active")),f(l,"class",u="status-btn "+(n[3]==="active"?"selected":"")+" svelte-mn2c16"),f(h,"class","status-dot svelte-mn2c16"),De(h,"background-color",is("away")),f(p,"class",g="status-btn "+(n[3]==="away"?"selected":"")+" svelte-mn2c16"),f(I,"class","status-dot svelte-mn2c16"),De(I,"background-color",is("busy")),f(C,"class",T="status-btn "+(n[3]==="busy"?"selected":"")+" svelte-mn2c16"),f(i,"class","status-options svelte-mn2c16"),f(e,"class","status-section svelte-mn2c16")},m(S,E){V(S,e,E),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),c(l,o),c(i,d),c(i,p),c(p,h),c(p,b),c(i,y),c(i,C),c(C,I),c(C,m),v||(A=[G(l,"click",n[16]),G(p,"click",n[17]),G(C,"click",n[18])],v=!0)},p(S,E){E&8&&u!==(u="status-btn "+(S[3]==="active"?"selected":"")+" svelte-mn2c16")&&f(l,"class",u),E&8&&g!==(g="status-btn "+(S[3]==="away"?"selected":"")+" svelte-mn2c16")&&f(p,"class",g),E&8&&T!==(T="status-btn "+(S[3]==="busy"?"selected":"")+" svelte-mn2c16")&&f(C,"class",T)},d(S){S&&_(e),v=!1,Ie(A)}}}function sl(n){let e,t,s="Cancel",r,i,l="Save Changes",a,o;return{c(){e=w("div"),t=w("button"),t.textContent=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-2pqgi7"&&(t.textContent=s),r=M(d),i=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-2yi6cr"&&(i.textContent=l),d.forEach(_),this.h()},h(){f(t,"class","cancel-btn svelte-mn2c16"),f(i,"class","save-btn svelte-mn2c16"),f(e,"class","modal-footer svelte-mn2c16")},m(u,d){V(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=[G(t,"click",n[9]),G(i,"click",n[11])],a=!0)},p:ze,d(u){u&&_(e),a=!1,Ie(o)}}}function Od(n){let e,t=n[0]&&n[1]&&$i(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=$i(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function is(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Md(n,e,t){let{isOpen:s=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,l=r?.status||"active";r?.profilePicture;let a=null,o=null,u="",d=!1;function p(){if(!He||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=E[r.id]||"")}function h(){if(!He||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?E[r.id]=u:delete E[r.id],localStorage.setItem("userNotes",JSON.stringify(E)),t(6,d=!1)}function b(){t(0,s=!1),a=null,t(4,o=null),t(6,d=!1)}function g(E){const D=E.target.files?.[0];if(D&&D.type.startsWith("image/")){a=D;const B=new FileReader;B.onload=O=>{t(4,o=O.target?.result)},B.readAsDataURL(D)}}function y(){i&&(a&&o?ji(l,o):l!==r?.status&&ji(l,void 0),b())}function C(E){Vt.call(this,n,E)}const I=()=>t(6,d=!0);function m(){u=this.value,t(5,u)}const T=()=>{t(6,d=!1),p()},v=()=>t(3,l="active"),A=()=>t(3,l="away"),S=()=>t(3,l="busy");return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"user"in E&&t(1,r=E.user),"isOwnProfile"in E&&t(2,i=E.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&2&&r&&(t(3,l=r.status),r.profilePicture,p())},[s,r,i,l,o,u,d,p,h,b,g,y,C,I,m,T,v,A,S]}class Jr extends dt{constructor(e){super(),ht(this,e,Md,Od,ft,{isOpen:0,user:1,isOwnProfile:2})}}function rl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,i,l,a,o,u,d,p=n[1].isPinned?"ðŸ“Œ":"ðŸ“",h,b,g=n[1].isPinned?"Unpin":"Pin",y,C,I,m,T=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,v,A,S,E=n[11]&&n[6]&&il(n),N=n[7]&&ll(n),D=n[12]&&al(n),B=n[12]&&ol(n);return{c(){e=w("div"),t=w("div"),s=w("button"),s.innerHTML=r,i=z(),E&&E.c(),l=z(),N&&N.c(),a=z(),D&&D.c(),o=z(),u=w("button"),d=w("span"),h=J(p),b=z(),y=J(g),C=J(" Message"),I=z(),m=w("button"),m.innerHTML=T,v=z(),B&&B.c(),this.h()},l(O){e=k(O,"DIV",{class:!0});var F=R(e);t=k(F,"DIV",{class:!0,style:!0});var L=R(t);s=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1bhlhgs"&&(s.innerHTML=r),i=M(L),E&&E.l(L),l=M(L),N&&N.l(L),a=M(L),D&&D.l(L),o=M(L),u=k(L,"BUTTON",{class:!0});var U=R(u);d=k(U,"SPAN",{class:!0});var P=R(d);h=Z(P,p),P.forEach(_),b=M(U),y=Z(U,g),C=Z(U," Message"),U.forEach(_),I=M(L),m=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-pkfnng"&&(m.innerHTML=T),v=M(L),B&&B.l(L),L.forEach(_),F.forEach(_),this.h()},h(){f(s,"class","menu-item svelte-5kwx2s"),f(d,"class","menu-icon svelte-5kwx2s"),f(u,"class","menu-item svelte-5kwx2s"),f(m,"class","menu-item copy svelte-5kwx2s"),f(t,"class","context-menu svelte-5kwx2s"),De(t,"top",n[9]+"px"),De(t,"left",n[10]+"px"),f(e,"class","context-menu-overlay svelte-5kwx2s")},m(O,F){V(O,e,F),c(e,t),c(t,s),c(t,i),E&&E.m(t,null),c(t,l),N&&N.m(t,null),c(t,a),D&&D.m(t,null),c(t,o),c(t,u),c(u,d),c(d,h),c(u,b),c(u,y),c(u,C),c(t,I),c(t,m),c(t,v),B&&B.m(t,null),n[18](t),A||(S=[G(s,"click",function(){In(n[5])&&n[5].apply(this,arguments)}),G(u,"click",function(){In(n[4])&&n[4].apply(this,arguments)}),G(m,"click",n[17]),G(t,"click",nt(n[16])),G(e,"click",n[19])],A=!0)},p(O,F){n=O,n[11]&&n[6]?E?E.p(n,F):(E=il(n),E.c(),E.m(t,l)):E&&(E.d(1),E=null),n[7]?N?N.p(n,F):(N=ll(n),N.c(),N.m(t,a)):N&&(N.d(1),N=null),n[12]?D?D.p(n,F):(D=al(n),D.c(),D.m(t,o)):D&&(D.d(1),D=null),F&2&&p!==(p=n[1].isPinned?"ðŸ“Œ":"ðŸ“")&&ie(h,p),F&2&&g!==(g=n[1].isPinned?"Unpin":"Pin")&&ie(y,g),n[12]?B?B.p(n,F):(B=ol(n),B.c(),B.m(t,null)):B&&(B.d(1),B=null),F&512&&De(t,"top",n[9]+"px"),F&1024&&De(t,"left",n[10]+"px")},d(O){O&&_(e),E&&E.d(),N&&N.d(),D&&D.d(),B&&B.d(),n[18](null),A=!1,Ie(S)}}}function il(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=G(e,"click",function(){In(n[6])&&n[6].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&_(e),s=!1,r()}}}function ll(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=G(e,"click",function(){In(n[7])&&n[7].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&_(e),s=!1,r()}}}function al(n){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=G(e,"click",function(){In(n[2])&&n[2].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&_(e),s=!1,r()}}}function ol(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,i,l;return{c(){e=w("div"),t=z(),s=w("button"),s.innerHTML=r,this.h()},l(a){e=k(a,"DIV",{class:!0}),R(e).forEach(_),t=M(a),s=k(a,"BUTTON",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-g8outl"&&(s.innerHTML=r),this.h()},h(){f(e,"class","menu-divider svelte-5kwx2s"),f(s,"class","menu-item delete svelte-5kwx2s")},m(a,o){V(a,e,o),V(a,t,o),V(a,s,o),i||(l=G(s,"click",function(){In(n[3])&&n[3].apply(this,arguments)}),i=!0)},p(a,o){n=a},d(a){a&&(_(e),_(t),_(s)),i=!1,l()}}}function zd(n){let e,t=n[0]&&rl(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=rl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function Fd(n,e,t){let s,r,i,l,a;Le(n,an,E=>t(15,a=E));let{message:o}=e,{x:u=0}=e,{y:d=0}=e,{visible:p=!1}=e,{onEdit:h}=e,{onDelete:b}=e,{onPin:g}=e,{onReply:y}=e,{onDownload:C=void 0}=e,{onForward:I=void 0}=e,m;function T(E){Vt.call(this,n,E)}const v=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function A(E){tt[E?"unshift":"push"](()=>{m=E,t(8,m)})}const S=()=>t(0,p=!1);return n.$$set=E=>{"message"in E&&t(1,o=E.message),"x"in E&&t(13,u=E.x),"y"in E&&t(14,d=E.y),"visible"in E&&t(0,p=E.visible),"onEdit"in E&&t(2,h=E.onEdit),"onDelete"in E&&t(3,b=E.onDelete),"onPin"in E&&t(4,g=E.onPin),"onReply"in E&&t(5,y=E.onReply),"onDownload"in E&&t(6,C=E.onDownload),"onForward"in E&&t(7,I=E.onForward)},n.$$.update=()=>{n.$$.dirty&32770&&t(12,s=o.userId===a?.id),n.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),n.$$.dirty&8448&&t(10,i=(()=>{if(!m)return u;const E=m.offsetWidth||200,N=window.innerWidth;return u+E>N?u-E:u})()),n.$$.dirty&16640&&t(9,l=(()=>{if(!m)return d;const E=m.offsetHeight||300,N=window.innerHeight;return d+E>N?d-E:d})())},[p,o,h,b,g,y,C,I,m,l,i,r,s,u,d,a,T,v,A,S]}class Bd extends dt{constructor(e){super(),ht(this,e,Fd,zd,ft,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function cl(n,e,t){const s=n.slice();return s[9]=e[t],s}function ul(n){let e,t,s,r,i="Forward Message",l,a,o="âœ•",u,d,p,h="Choose a channel to forward this message to:",b,g,y,C,I=Ye(n[2]),m=[];for(let T=0;T<I.length;T+=1)m[T]=dl(cl(n,I,T));return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h3"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("p"),p.textContent=h,b=z(),g=w("div");for(let T=0;T<m.length;T+=1)m[T].c();this.h()},l(T){e=k(T,"DIV",{class:!0});var v=R(e);t=k(v,"DIV",{class:!0});var A=R(t);s=k(A,"DIV",{class:!0});var S=R(s);r=k(S,"H3",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1xq5ns4"&&(r.textContent=i),l=M(S),a=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-19jqbg1"&&(a.textContent=o),S.forEach(_),u=M(A),d=k(A,"DIV",{class:!0});var E=R(d);p=k(E,"P",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-alvqmp"&&(p.textContent=h),b=M(E),g=k(E,"DIV",{class:!0});var N=R(g);for(let D=0;D<m.length;D+=1)m[D].l(N);N.forEach(_),E.forEach(_),A.forEach(_),v.forEach(_),this.h()},h(){f(r,"class","svelte-70r9o1"),f(a,"class","close-button svelte-70r9o1"),f(s,"class","dialog-header svelte-70r9o1"),f(p,"class","dialog-description svelte-70r9o1"),f(g,"class","channel-list svelte-70r9o1"),f(d,"class","dialog-content svelte-70r9o1"),f(t,"class","dialog svelte-70r9o1"),f(e,"class","dialog-overlay svelte-70r9o1")},m(T,v){V(T,e,v),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(d,b),c(d,g);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(g,null);y||(C=[G(a,"click",n[5]),G(t,"click",nt(n[6])),G(e,"click",n[5])],y=!0)},p(T,v){if(v&28){I=Ye(T[2]);let A;for(A=0;A<I.length;A+=1){const S=cl(T,I,A);m[A]?m[A].p(S,v):(m[A]=dl(S),m[A].c(),m[A].m(g,null))}for(;A<m.length;A+=1)m[A].d(1);m.length=I.length}},d(T){T&&_(e),Rs(m,T),y=!1,Ie(C)}}}function fl(n){let e,t,s,r,i=n[9].name+"",l,a,o,u;function d(g,y){return g[9].type==="dm"?Ud:Ld}let p=d(n),h=p(n);function b(){return n[7](n[9])}return{c(){e=w("button"),t=w("span"),h.c(),s=z(),r=w("span"),l=J(i),a=z(),this.h()},l(g){e=k(g,"BUTTON",{class:!0});var y=R(e);t=k(y,"SPAN",{class:!0});var C=R(t);h.l(C),C.forEach(_),s=M(y),r=k(y,"SPAN",{class:!0});var I=R(r);l=Z(I,i),I.forEach(_),a=M(y),y.forEach(_),this.h()},h(){f(t,"class","channel-icon svelte-70r9o1"),f(r,"class","channel-name svelte-70r9o1"),f(e,"class","channel-item svelte-70r9o1")},m(g,y){V(g,e,y),c(e,t),h.m(t,null),c(e,s),c(e,r),c(r,l),c(e,a),o||(u=G(e,"click",b),o=!0)},p(g,y){n=g,p!==(p=d(n))&&(h.d(1),h=p(n),h&&(h.c(),h.m(t,null))),y&4&&i!==(i=n[9].name+"")&&ie(l,i)},d(g){g&&_(e),h.d(),o=!1,u()}}}function Ld(n){let e;return{c(){e=J("#")},l(t){e=Z(t,"#")},m(t,s){V(t,e,s)},d(t){t&&_(e)}}}function Ud(n){let e;return{c(){e=J("ðŸ’¬")},l(t){e=Z(t,"ðŸ’¬")},m(t,s){V(t,e,s)},d(t){t&&_(e)}}}function dl(n){let e,t=n[9].id!==n[3]&&fl(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,r){s[9].id!==s[3]?t?t.p(s,r):(t=fl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&_(e),t&&t.d(s)}}}function qd(n){let e,t=n[0]&&n[1]&&ul(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=ul(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function xd(n,e,t){let s,r,i;Le(n,Vn,h=>t(8,s=h)),Le(n,sn,h=>t(2,r=h)),Le(n,Nn,h=>t(3,i=h));let{visible:l=!1}=e,{message:a=null}=e;function o(h){!a||!s||(s.emit("message",{channelId:h,text:a.text,type:a.type,gifUrl:a.gifUrl,fileUrl:a.fileUrl,fileName:a.fileName,fileSize:a.fileSize,files:a.files}),t(0,l=!1))}function u(){t(0,l=!1)}function d(h){Vt.call(this,n,h)}const p=h=>o(h.id);return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"message"in h&&t(1,a=h.message)},[l,a,r,i,o,u,d,p]}class jd extends dt{constructor(e){super(),ht(this,e,xd,qd,ft,{visible:0,message:1})}}function hl(n){let e,t,s,r,i,l,a,o="Ã—",u,d,p,h,b,g,y,C,I,m,T,v,A,S;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),i=J(n[1]),l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("p"),h=J(n[2]),b=z(),g=w("div"),y=w("button"),C=J(n[4]),I=z(),m=w("button"),T=J(n[3]),this.h()},l(E){e=k(E,"DIV",{class:!0});var N=R(e);t=k(N,"DIV",{class:!0});var D=R(t);s=k(D,"DIV",{class:!0});var B=R(s);r=k(B,"H2",{class:!0});var O=R(r);i=Z(O,n[1]),O.forEach(_),l=M(B),a=k(B,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-y9ayml"&&(a.textContent=o),B.forEach(_),u=M(D),d=k(D,"DIV",{class:!0});var F=R(d);p=k(F,"P",{class:!0});var L=R(p);h=Z(L,n[2]),L.forEach(_),F.forEach(_),b=M(D),g=k(D,"DIV",{class:!0});var U=R(g);y=k(U,"BUTTON",{class:!0});var P=R(y);C=Z(P,n[4]),P.forEach(_),I=M(U),m=k(U,"BUTTON",{class:!0});var q=R(m);T=Z(q,n[3]),q.forEach(_),U.forEach(_),D.forEach(_),N.forEach(_),this.h()},h(){f(r,"class","svelte-1myntg4"),f(a,"class","close-btn svelte-1myntg4"),f(s,"class","modal-header svelte-1myntg4"),f(p,"class","svelte-1myntg4"),f(d,"class","modal-body svelte-1myntg4"),f(y,"class","cancel-btn svelte-1myntg4"),f(m,"class",v="confirm-btn "+n[5]+" svelte-1myntg4"),f(g,"class","modal-footer svelte-1myntg4"),f(t,"class","modal-content svelte-1myntg4"),f(e,"class","modal-overlay svelte-1myntg4")},m(E,N){V(E,e,N),c(e,t),c(t,s),c(s,r),c(r,i),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(t,b),c(t,g),c(g,y),c(y,C),c(g,I),c(g,m),c(m,T),A||(S=[G(a,"click",n[7]),G(y,"click",n[7]),G(m,"click",n[6]),G(t,"click",nt(n[10])),G(e,"click",n[7])],A=!0)},p(E,N){N&2&&ie(i,E[1]),N&4&&ie(h,E[2]),N&16&&ie(C,E[4]),N&8&&ie(T,E[3]),N&32&&v!==(v="confirm-btn "+E[5]+" svelte-1myntg4")&&f(m,"class",v)},d(E){E&&_(e),A=!1,Ie(S)}}}function Vd(n){let e,t=n[0]&&hl(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=hl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function Hd(n,e,t){let{isOpen:s=!1}=e,{title:r="Confirm Action"}=e,{message:i="Are you sure you want to proceed?"}=e,{confirmText:l="Confirm"}=e,{cancelText:a="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:d=()=>{}}=e;function p(){u()}function h(){d()}function b(g){Vt.call(this,n,g)}return n.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"title"in g&&t(1,r=g.title),"message"in g&&t(2,i=g.message),"confirmText"in g&&t(3,l=g.confirmText),"cancelText"in g&&t(4,a=g.cancelText),"variant"in g&&t(5,o=g.variant),"onConfirm"in g&&t(8,u=g.onConfirm),"onCancel"in g&&t(9,d=g.onCancel)},[s,r,i,l,a,o,p,h,u,d,b]}class Sn extends dt{constructor(e){super(),ht(this,e,Hd,Vd,ft,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:Gd}=Mr;function pl(n,e,t){const s=n.slice();s[68]=e[t];const r=s[19](s[68].user);s[69]=r;const i=s[33](s[68].replyTo);return s[70]=i,s}function gl(n,e,t){const s=n.slice();return s[73]=e[t],s[75]=t,s}function ml(n){let e,t="<span>New Messages</span>";return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){f(e,"class","new-messages-divider svelte-zjz65z")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function Wd(n){let e,t=n[68].user.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-zjz65z"),De(e,"background-color",n[20](n[68].user))},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user.charAt(0).toUpperCase()+"")&&ie(s,t),i[0]&1&&De(e,"background-color",r[20](r[68].user))},d(r){r&&_(e)}}}function Yd(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[69].profilePicture)||f(e,"src",t),f(e,"alt",s=n[68].user),f(e,"class","avatar svelte-zjz65z")},m(r,i){V(r,e,i)},p(r,i){i[0]&1&&!We(e.src,t=r[69].profilePicture)&&f(e,"src",t),i[0]&1&&s!==(s=r[68].user)&&f(e,"alt",s)},d(r){r&&_(e)}}}function Kd(n){let e,t=n[68].user+"",s;return{c(){e=w("span"),s=J(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user+"")&&ie(s,t)},d(r){r&&_(e)}}}function Xd(n){let e,t=n[68].user+"",s,r,i;function l(){return n[44](n[69])}return{c(){e=w("button"),s=J(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var o=R(e);s=Z(o,t),o.forEach(_),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(a,o){V(a,e,o),c(e,s),r||(i=G(e,"click",l),r=!0)},p(a,o){n=a,o[0]&1&&t!==(t=n[68].user+"")&&ie(s,t)},d(a){a&&_(e),r=!1,i()}}}function vl(n){let e,t="ðŸ“Œ";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){f(e,"class","pin-badge svelte-zjz65z"),f(e,"title","Pinned message")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function _l(n){let e,t="(edited)";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){f(e,"class","edited-badge svelte-zjz65z"),f(e,"title","Edited")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function bl(n){let e,t,s,r,i,l=n[70].user+"",a,o,u,d=n[70].text.substring(0,100)+"",p,h=n[70].text.length>100?"...":"",b,g,y;function C(){return n[45](n[70])}return{c(){e=w("div"),t=w("div"),s=z(),r=w("div"),i=w("span"),a=J(l),o=z(),u=w("span"),p=J(d),b=J(h),this.h()},l(I){e=k(I,"DIV",{class:!0});var m=R(e);t=k(m,"DIV",{class:!0}),R(t).forEach(_),s=M(m),r=k(m,"DIV",{class:!0});var T=R(r);i=k(T,"SPAN",{class:!0});var v=R(i);a=Z(v,l),v.forEach(_),o=M(T),u=k(T,"SPAN",{class:!0});var A=R(u);p=Z(A,d),b=Z(A,h),A.forEach(_),T.forEach(_),m.forEach(_),this.h()},h(){f(t,"class","reply-line svelte-zjz65z"),f(i,"class","reply-username svelte-zjz65z"),f(u,"class","reply-text svelte-zjz65z"),f(r,"class","reply-content svelte-zjz65z"),f(e,"class","reply-preview svelte-zjz65z")},m(I,m){V(I,e,m),c(e,t),c(e,s),c(e,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(u,b),g||(y=G(e,"click",C),g=!0)},p(I,m){n=I,m[0]&1&&l!==(l=n[70].user+"")&&ie(a,l),m[0]&1&&d!==(d=n[70].text.substring(0,100)+"")&&ie(p,d),m[0]&1&&h!==(h=n[70].text.length>100?"...":"")&&ie(b,h)},d(I){I&&_(e),g=!1,y()}}}function Zd(n){let e;function t(i,l){return i[68].type==="gif"&&i[68].gifUrl?eh:i[68].type==="file"&&(i[68].fileUrl||i[68].files)?$d:Qd}let s=t(n),r=s(n);return{c(){e=w("div"),r.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=R(e);r.l(l),l.forEach(_),this.h()},h(){f(e,"class","message-content")},m(i,l){V(i,e,l),r.m(e,null)},p(i,l){s===(s=t(i))&&r?r.p(i,l):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&_(e),r.d()}}}function Jd(n){let e,t,s,r,i,l="Cancel",a,o,u="Save",d,p;function h(...g){return n[47](n[68],...g)}function b(){return n[48](n[68])}return{c(){e=w("div"),t=w("textarea"),s=z(),r=w("div"),i=w("button"),i.textContent=l,a=z(),o=w("button"),o.textContent=u,this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"TEXTAREA",{class:!0,rows:!0}),R(t).forEach(_),s=M(y),r=k(y,"DIV",{class:!0});var C=R(r);i=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1czerce"&&(i.textContent=l),a=M(C),o=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-w3glyi"&&(o.textContent=u),C.forEach(_),y.forEach(_),this.h()},h(){f(t,"class","edit-textarea svelte-zjz65z"),f(t,"rows","3"),f(i,"class","edit-cancel svelte-zjz65z"),f(o,"class","edit-save svelte-zjz65z"),f(r,"class","edit-actions svelte-zjz65z"),f(e,"class","edit-mode svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),it(t,n[10]),c(e,s),c(e,r),c(r,i),c(r,a),c(r,o),d||(p=[G(t,"input",n[46]),G(t,"keydown",h),G(i,"click",n[25]),G(o,"click",b)],d=!0)},p(g,y){n=g,y[0]&1024&&it(t,n[10])},d(g){g&&_(e),d=!1,Ie(p)}}}function Qd(n){let e,t,s=Is(n[68].text)+"";return{c(){e=w("div"),t=new po(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);t=ho(i,!1),i.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){V(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Is(r[68].text)+"")&&t.p(s)},d(r){r&&_(e)}}}function $d(n){let e,t;function s(a,o){if(a[68].files&&a[68].files.length>1)return nh;if(a[68].fileUrl)return th}let r=s(n),i=r&&r(n),l=n[68].text&&(n[68].files?n[68].text!==`Shared ${n[68].files.length} files`:n[68].text!==`Shared: ${n[68].fileName}`)&&El(n);return{c(){i&&i.c(),e=z(),l&&l.c(),t=Ne()},l(a){i&&i.l(a),e=M(a),l&&l.l(a),t=Ne()},m(a,o){i&&i.m(a,o),V(a,e,o),l&&l.m(a,o),V(a,t,o)},p(a,o){r===(r=s(a))&&i?i.p(a,o):(i&&i.d(1),i=r&&r(a),i&&(i.c(),i.m(e.parentNode,e))),a[68].text&&(a[68].files?a[68].text!==`Shared ${a[68].files.length} files`:a[68].text!==`Shared: ${a[68].fileName}`)?l?l.p(a,o):(l=El(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){a&&(_(e),_(t)),i&&i.d(a),l&&l.d(a)}}}function eh(n){let e,t,s,r;return{c(){e=w("img"),this.h()},l(i){e=k(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){We(e.src,t=n[68].gifUrl)||f(e,"src",t),f(e,"alt","GIF"),f(e,"class",s="gif "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(e,"data-spoiler",r=n[68].isSpoiler?"true":"false")},m(i,l){V(i,e,l)},p(i,l){l[0]&1&&!We(e.src,t=i[68].gifUrl)&&f(e,"src",t),l[0]&1&&s!==(s="gif "+(i[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(e,"class",s),l[0]&1&&r!==(r=i[68].isSpoiler?"true":"false")&&f(e,"data-spoiler",r)},d(i){i&&_(e)}}}function th(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Qr(a[68].fileName)),e?ih:(t==null&&(t=!!nc(a[68].fileName)),t?rh:sh)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Ne()},l(a){l.l(a),s=Ne()},m(a,o){l.m(a,o),V(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&_(s),l.d(a)}}}function nh(n){let e,t=Ye(n[68].files.slice(0,4)),s=[];for(let r=0;r<t.length;r+=1)s[r]=yl(gl(n,t,r));return{c(){e=w("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(_),this.h()},h(){f(e,"class","files-gallery svelte-zjz65z"),he(e,"has-more",n[68].files.length>4)},m(r,i){V(r,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(r,i){if(i[0]&1|i[1]&272){t=Ye(r[68].files.slice(0,4));let l;for(l=0;l<t.length;l+=1){const a=gl(r,t,l);s[l]?s[l].p(a,i):(s[l]=yl(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}i[0]&1&&he(e,"has-more",r[68].files.length>4)},d(r){r&&_(e),Rs(s,r)}}}function sh(n){let e,t,s=vn(n[68].fileName)+"",r,i,l,a,o=n[68].fileName+"",u,d,p,h=mn(n[68].fileSize)+"",b,g,y;return{c(){e=w("a"),t=w("span"),r=J(s),i=z(),l=w("div"),a=w("span"),u=J(o),d=z(),p=w("span"),b=J(h),this.h()},l(C){e=k(C,"A",{href:!0,download:!0,class:!0});var I=R(e);t=k(I,"SPAN",{class:!0});var m=R(t);r=Z(m,s),m.forEach(_),i=M(I),l=k(I,"DIV",{class:!0});var T=R(l);a=k(T,"SPAN",{class:!0});var v=R(a);u=Z(v,o),v.forEach(_),d=M(T),p=k(T,"SPAN",{class:!0});var A=R(p);b=Z(A,h),A.forEach(_),T.forEach(_),I.forEach(_),this.h()},h(){f(t,"class","file-icon svelte-zjz65z"),f(a,"class","file-name svelte-zjz65z"),f(p,"class","file-size svelte-zjz65z"),f(l,"class","file-info svelte-zjz65z"),f(e,"href",g=lt(n[68].fileUrl)),f(e,"download",y=n[68].fileName),f(e,"class","file-attachment svelte-zjz65z")},m(C,I){V(C,e,I),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,b)},p(C,I){I[0]&1&&s!==(s=vn(C[68].fileName)+"")&&ie(r,s),I[0]&1&&o!==(o=C[68].fileName+"")&&ie(u,o),I[0]&1&&h!==(h=mn(C[68].fileSize)+"")&&ie(b,h),I[0]&1&&g!==(g=lt(C[68].fileUrl))&&f(e,"href",g),I[0]&1&&y!==(y=C[68].fileName)&&f(e,"download",y)},d(C){C&&_(e)}}}function rh(n){let e,t,s,r,i,l,a,o,u,d,p,h=vn(n[68].fileName)+"",b,g,y=n[68].fileName+"",C,I,m,T,v=mn(n[68].fileSize)+"",A,S,E,N,D,B;function O(...L){return n[53](n[68],...L)}function F(...L){return n[54](n[68],...L)}return{c(){e=w("div"),t=w("video"),s=w("source"),l=J(`\r
									Your browser does not support the video tag.`),u=z(),d=w("a"),p=w("span"),b=J(h),g=z(),C=J(y),I=z(),m=w("span"),T=J("("),A=J(v),S=J(")"),this.h()},l(L){e=k(L,"DIV",{class:!0});var U=R(e);t=k(U,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var P=R(t);s=k(P,"SOURCE",{src:!0,type:!0}),l=Z(P,`\r
									Your browser does not support the video tag.`),P.forEach(_),u=M(U),d=k(U,"A",{href:!0,download:!0,class:!0});var q=R(d);p=k(q,"SPAN",{class:!0});var Y=R(p);b=Z(Y,h),Y.forEach(_),g=M(q),C=Z(q,y),I=M(q),m=k(q,"SPAN",{class:!0});var x=R(m);T=Z(x,"("),A=Z(x,v),S=Z(x,")"),x.forEach(_),q.forEach(_),U.forEach(_),this.h()},h(){We(s.src,r=lt(n[68].fileUrl))||f(s,"src",r),f(s,"type",i="video/"+n[68].fileName?.split(".").pop()),t.controls=!0,f(t,"class",a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",o=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(p,"class","file-icon svelte-zjz65z"),f(m,"class","file-size svelte-zjz65z"),f(d,"href",E=lt(n[68].fileUrl)),f(d,"download",N=n[68].fileName),f(d,"class","video-download-link svelte-zjz65z"),f(e,"class","video-container svelte-zjz65z")},m(L,U){V(L,e,U),c(e,t),c(t,s),c(t,l),c(e,u),c(e,d),c(d,p),c(p,b),c(d,g),c(d,C),c(d,I),c(d,m),c(m,T),c(m,A),c(m,S),D||(B=[G(t,"click",O),G(t,"contextmenu",F)],D=!0)},p(L,U){n=L,U[0]&1&&!We(s.src,r=lt(n[68].fileUrl))&&f(s,"src",r),U[0]&1&&i!==(i="video/"+n[68].fileName?.split(".").pop())&&f(s,"type",i),U[0]&1&&a!==(a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",a),U[0]&1&&o!==(o=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",o),U[0]&1&&h!==(h=vn(n[68].fileName)+"")&&ie(b,h),U[0]&1&&y!==(y=n[68].fileName+"")&&ie(C,y),U[0]&1&&v!==(v=mn(n[68].fileSize)+"")&&ie(A,v),U[0]&1&&E!==(E=lt(n[68].fileUrl))&&f(d,"href",E),U[0]&1&&N!==(N=n[68].fileName)&&f(d,"download",N)},d(L){L&&_(e),D=!1,Ie(B)}}}function ih(n){let e,t,s,r,i,l,a,o,u,d=vn(n[68].fileName)+"",p,h,b=n[68].fileName+"",g,y,C,I,m=mn(n[68].fileSize)+"",T,v,A,S,E,N;function D(...O){return n[51](n[68],...O)}function B(...O){return n[52](n[68],...O)}return{c(){e=w("div"),t=w("img"),a=z(),o=w("a"),u=w("span"),p=J(d),h=z(),g=J(b),y=z(),C=w("span"),I=J("("),T=J(m),v=J(")"),this.h()},l(O){e=k(O,"DIV",{class:!0});var F=R(e);t=k(F,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(F),o=k(F,"A",{href:!0,download:!0,class:!0});var L=R(o);u=k(L,"SPAN",{class:!0});var U=R(u);p=Z(U,d),U.forEach(_),h=M(L),g=Z(L,b),y=M(L),C=k(L,"SPAN",{class:!0});var P=R(C);I=Z(P,"("),T=Z(P,m),v=Z(P,")"),P.forEach(_),L.forEach(_),F.forEach(_),this.h()},h(){We(t.src,s=lt(n[68].fileUrl))||f(t,"src",s),f(t,"alt",r=n[68].fileName),f(t,"class",i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(u,"class","file-icon svelte-zjz65z"),f(C,"class","file-size svelte-zjz65z"),f(o,"href",A=lt(n[68].fileUrl)),f(o,"download",S=n[68].fileName),f(o,"class","image-download-link svelte-zjz65z"),f(e,"class","image-container svelte-zjz65z")},m(O,F){V(O,e,F),c(e,t),c(e,a),c(e,o),c(o,u),c(u,p),c(o,h),c(o,g),c(o,y),c(o,C),c(C,I),c(C,T),c(C,v),E||(N=[G(t,"click",D),G(t,"contextmenu",B)],E=!0)},p(O,F){n=O,F[0]&1&&!We(t.src,s=lt(n[68].fileUrl))&&f(t,"src",s),F[0]&1&&r!==(r=n[68].fileName)&&f(t,"alt",r),F[0]&1&&i!==(i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),F[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),F[0]&1&&d!==(d=vn(n[68].fileName)+"")&&ie(p,d),F[0]&1&&b!==(b=n[68].fileName+"")&&ie(g,b),F[0]&1&&m!==(m=mn(n[68].fileSize)+"")&&ie(T,m),F[0]&1&&A!==(A=lt(n[68].fileUrl))&&f(o,"href",A),F[0]&1&&S!==(S=n[68].fileName)&&f(o,"download",S)},d(O){O&&_(e),E=!1,Ie(N)}}}function lh(n){let e,t,s=vn(n[73].fileName)+"",r,i,l,a,o=n[73].fileName+"",u,d,p,h,b=mn(n[73].fileSize)+"",g,y,C,I,m;return{c(){e=w("a"),t=w("div"),r=J(s),i=z(),l=w("div"),a=w("span"),u=J(o),d=z(),p=w("span"),h=J("("),g=J(b),y=J(")"),C=z(),this.h()},l(T){e=k(T,"A",{href:!0,download:!0,class:!0});var v=R(e);t=k(v,"DIV",{class:!0});var A=R(t);r=Z(A,s),A.forEach(_),i=M(v),l=k(v,"DIV",{class:!0});var S=R(l);a=k(S,"SPAN",{class:!0});var E=R(a);u=Z(E,o),E.forEach(_),d=M(S),p=k(S,"SPAN",{class:!0});var N=R(p);h=Z(N,"("),g=Z(N,b),y=Z(N,")"),N.forEach(_),S.forEach(_),C=M(v),v.forEach(_),this.h()},h(){f(t,"class","gallery-file-icon-large svelte-zjz65z"),f(a,"class","file-name-truncate svelte-zjz65z"),f(p,"class","file-size-small svelte-zjz65z"),f(l,"class","gallery-file-overlay svelte-zjz65z"),f(e,"href",I=lt(n[73].fileUrl)),f(e,"download",m=n[73].fileName),f(e,"class","gallery-file-item file-link svelte-zjz65z")},m(T,v){V(T,e,v),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,h),c(p,g),c(p,y),c(e,C)},p(T,v){v[0]&1&&s!==(s=vn(T[73].fileName)+"")&&ie(r,s),v[0]&1&&o!==(o=T[73].fileName+"")&&ie(u,o),v[0]&1&&b!==(b=mn(T[73].fileSize)+"")&&ie(g,b),v[0]&1&&I!==(I=lt(T[73].fileUrl))&&f(e,"href",I),v[0]&1&&m!==(m=T[73].fileName)&&f(e,"download",m)},d(T){T&&_(e)}}}function ah(n){let e,t,s,r,i,l,a,o,u,d;function p(...b){return n[50](n[73],...b)}let h=n[75]===3&&n[68].files.length>4&&kl(n);return{c(){e=w("div"),t=w("video"),s=w("source"),a=z(),h&&h.c(),o=z(),this.h()},l(b){e=k(b,"DIV",{class:!0});var g=R(e);t=k(g,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var y=R(t);s=k(y,"SOURCE",{src:!0}),y.forEach(_),a=M(g),h&&h.l(g),o=M(g),g.forEach(_),this.h()},h(){We(s.src,r=lt(n[73].fileUrl))||f(s,"src",r),f(t,"class",i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(b,g){V(b,e,g),c(e,t),c(t,s),c(e,a),h&&h.m(e,null),c(e,o),u||(d=G(t,"click",p),u=!0)},p(b,g){n=b,g[0]&1&&!We(s.src,r=lt(n[73].fileUrl))&&f(s,"src",r),g[0]&1&&i!==(i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=kl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(b){b&&_(e),h&&h.d(),u=!1,d()}}}function oh(n){let e,t,s,r,i,l,a,o,u,d;function p(...b){return n[49](n[68],n[73],...b)}let h=n[75]===3&&n[68].files.length>4&&wl(n);return{c(){e=w("div"),t=w("img"),a=z(),h&&h.c(),o=z(),this.h()},l(b){e=k(b,"DIV",{class:!0});var g=R(e);t=k(g,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(g),h&&h.l(g),o=M(g),g.forEach(_),this.h()},h(){We(t.src,s=lt(n[73].fileUrl))||f(t,"src",s),f(t,"alt",r=n[73].fileName),f(t,"class",i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(b,g){V(b,e,g),c(e,t),c(e,a),h&&h.m(e,null),c(e,o),u||(d=G(t,"click",p),u=!0)},p(b,g){n=b,g[0]&1&&!We(t.src,s=lt(n[73].fileUrl))&&f(t,"src",s),g[0]&1&&r!==(r=n[73].fileName)&&f(t,"alt",r),g[0]&1&&i!==(i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=wl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(b){b&&_(e),h&&h.d(),u=!1,d()}}}function kl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=w("div"),t=w("span"),s=J("+"),i=J(r),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"SPAN",{class:!0});var o=R(t);s=Z(o,"+"),i=Z(o,r),o.forEach(_),a.forEach(_),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){V(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&ie(i,r)},d(l){l&&_(e)}}}function wl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=w("div"),t=w("span"),s=J("+"),i=J(r),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"SPAN",{class:!0});var o=R(t);s=Z(o,"+"),i=Z(o,r),o.forEach(_),a.forEach(_),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){V(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&ie(i,r)},d(l){l&&_(e)}}}function yl(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Qr(a[73].fileName)),e?oh:(t==null&&(t=!!nc(a[73].fileName)),t?ah:lh)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Ne()},l(a){l.l(a),s=Ne()},m(a,o){l.m(a,o),V(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&_(s),l.d(a)}}}function El(n){let e,t,s=Is(n[68].text)+"";return{c(){e=w("div"),t=new po(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);t=ho(i,!1),i.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){V(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Is(r[68].text)+"")&&t.p(s)},d(r){r&&_(e)}}}function Tl(n,e){let t,s,r,i,l,a,o,u,d,p,h,b,g=Dl(e[68].timestamp)+"",y,C,I,m,T,v,A,S=e[1]===e[68].id&&ml();function E(H,W){return H[69]?.profilePicture?Yd:Wd}let N=E(e),D=N(e);function B(H,W){return H[69]?Xd:Kd}let O=B(e),F=O(e),L=e[68].isPinned&&vl(),U=e[68].isEdited&&_l(),P=e[70]&&bl(e);function q(H,W){return H[9]===H[68].id?Jd:Zd}let Y=q(e),x=Y(e);function K(...H){return e[55](e[68],...H)}return{key:n,first:null,c(){t=Ne(),S&&S.c(),s=z(),r=w("div"),i=w("div"),D.c(),l=z(),a=w("div"),o=w("div"),u=w("div"),F.c(),d=z(),L&&L.c(),p=z(),U&&U.c(),h=z(),b=w("span"),y=J(g),C=z(),P&&P.c(),I=z(),x.c(),this.h()},l(H){t=Ne(),S&&S.l(H),s=M(H),r=k(H,"DIV",{id:!0,class:!0});var W=R(r);i=k(W,"DIV",{class:!0});var $=R(i);D.l($),$.forEach(_),l=M(W),a=k(W,"DIV",{class:!0});var ne=R(a);o=k(ne,"DIV",{class:!0});var le=R(o);u=k(le,"DIV",{class:!0});var se=R(u);F.l(se),d=M(se),L&&L.l(se),p=M(se),U&&U.l(se),se.forEach(_),h=M(le),b=k(le,"SPAN",{class:!0});var de=R(b);y=Z(de,g),de.forEach(_),le.forEach(_),C=M(ne),P&&P.l(ne),I=M(ne),x.l(ne),ne.forEach(_),W.forEach(_),this.h()},h(){f(i,"class","message-avatar svelte-zjz65z"),f(u,"class","header-left svelte-zjz65z"),f(b,"class","timestamp svelte-zjz65z"),f(o,"class","message-header svelte-zjz65z"),f(a,"class","message-body svelte-zjz65z"),f(r,"id",m="message-"+e[68].id),f(r,"class",T="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z"),this.first=t},m(H,W){V(H,t,W),S&&S.m(H,W),V(H,s,W),V(H,r,W),c(r,i),D.m(i,null),c(r,l),c(r,a),c(a,o),c(o,u),F.m(u,null),c(u,d),L&&L.m(u,null),c(u,p),U&&U.m(u,null),c(o,h),c(o,b),c(b,y),c(a,C),P&&P.m(a,null),c(a,I),x.m(a,null),v||(A=G(r,"contextmenu",K),v=!0)},p(H,W){e=H,e[1]===e[68].id?S||(S=ml(),S.c(),S.m(s.parentNode,s)):S&&(S.d(1),S=null),N===(N=E(e))&&D?D.p(e,W):(D.d(1),D=N(e),D&&(D.c(),D.m(i,null))),O===(O=B(e))&&F?F.p(e,W):(F.d(1),F=O(e),F&&(F.c(),F.m(u,d))),e[68].isPinned?L||(L=vl(),L.c(),L.m(u,p)):L&&(L.d(1),L=null),e[68].isEdited?U||(U=_l(),U.c(),U.m(u,null)):U&&(U.d(1),U=null),W[0]&1&&g!==(g=Dl(e[68].timestamp)+"")&&ie(y,g),e[70]?P?P.p(e,W):(P=bl(e),P.c(),P.m(a,I)):P&&(P.d(1),P=null),Y===(Y=q(e))&&x?x.p(e,W):(x.d(1),x=Y(e),x&&(x.c(),x.m(a,null))),W[0]&1&&m!==(m="message-"+e[68].id)&&f(r,"id",m),W[0]&16385&&T!==(T="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z")&&f(r,"class",T)},d(H){H&&(_(t),_(s),_(r)),S&&S.d(H),D.d(),F.d(),L&&L.d(),U&&U.d(),P&&P.d(),x.d(),v=!1,A()}}}function Al(n){let e,t,s;function r(l){n[58](l)}let i={message:n[8],x:n[6],y:n[7],onEdit:n[23],onDelete:n[26],onPin:n[28],onReply:n[29],onDownload:n[30],onForward:n[31]};return n[5]!==void 0&&(i.visible=n[5]),e=new Bd({props:i}),tt.push(()=>zt(e,"visible",r)),{c(){Je(e.$$.fragment)},l(l){Ze(e.$$.fragment,l)},m(l,a){Xe(e,l,a),s=!0},p(l,a){const o={};a[0]&256&&(o.message=l[8]),a[0]&64&&(o.x=l[6]),a[0]&128&&(o.y=l[7]),!t&&a[0]&32&&(t=!0,o.visible=l[5],Mt(()=>t=!1)),e.$set(o)},i(l){s||(Ae(e.$$.fragment,l),s=!0)},o(l){Me(e.$$.fragment,l),s=!1},d(l){Ke(e,l)}}}function Cl(n){let e,t,s,r,i,l,a="âœ•",o,u,d,p,h,b=n[17].length>1&&Sl(n);return{c(){e=w("div"),t=w("img"),r=z(),b&&b.c(),i=z(),l=w("button"),l.textContent=a,o=z(),u=w("a"),d=J("Open in new tab"),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"IMG",{src:!0,alt:!0,class:!0}),r=M(y),b&&b.l(y),i=M(y),l=k(y,"BUTTON",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-cyanf1"&&(l.textContent=a),o=M(y),u=k(y,"A",{href:!0,target:!0,rel:!0,class:!0});var C=R(u);d=Z(C,"Open in new tab"),C.forEach(_),y.forEach(_),this.h()},h(){We(t.src,s=n[15])||f(t,"src",s),f(t,"alt","Enlarged"),f(t,"class","enlarged-image svelte-zjz65z"),f(l,"class","close-modal svelte-zjz65z"),f(u,"href",n[15]),f(u,"target","_blank"),f(u,"rel","noopener noreferrer"),f(u,"class","open-new-tab svelte-zjz65z"),f(e,"class","image-modal svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),c(e,r),b&&b.m(e,null),c(e,i),c(e,l),c(e,o),c(e,u),c(u,d),p||(h=[G(t,"click",nt(n[43])),G(l,"click",n[36]),G(e,"click",n[36])],p=!0)},p(g,y){y[0]&32768&&!We(t.src,s=g[15])&&f(t,"src",s),g[17].length>1?b?b.p(g,y):(b=Sl(g),b.c(),b.m(e,i)):b&&(b.d(1),b=null),y[0]&32768&&f(u,"href",g[15])},d(g){g&&_(e),b&&b.d(),p=!1,Ie(h)}}}function Sl(n){let e,t="â€¹",s,r,i="â€º",l,a,o=n[18]+1+"",u,d,p=n[17].length+"",h,b,g;return{c(){e=w("button"),e.textContent=t,s=z(),r=w("button"),r.textContent=i,l=z(),a=w("div"),u=J(o),d=J(" / "),h=J(p),this.h()},l(y){e=k(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-c4iawu"&&(e.textContent=t),s=M(y),r=k(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(r)!=="svelte-1gn22tr"&&(r.textContent=i),l=M(y),a=k(y,"DIV",{class:!0});var C=R(a);u=Z(C,o),d=Z(C," / "),h=Z(C,p),C.forEach(_),this.h()},h(){f(e,"class","nav-arrow nav-prev svelte-zjz65z"),f(e,"title","Previous (â†)"),f(r,"class","nav-arrow nav-next svelte-zjz65z"),f(r,"title","Next (â†’)"),f(a,"class","image-counter svelte-zjz65z")},m(y,C){V(y,e,C),V(y,s,C),V(y,r,C),V(y,l,C),V(y,a,C),c(a,u),c(a,d),c(a,h),b||(g=[G(e,"click",nt(n[62])),G(r,"click",nt(n[63]))],b=!0)},p(y,C){C[0]&262144&&o!==(o=y[18]+1+"")&&ie(u,o),C[0]&131072&&p!==(p=y[17].length+"")&&ie(h,p)},d(y){y&&(_(e),_(s),_(r),_(l),_(a)),b=!1,Ie(g)}}}function Il(n){let e,t,s,r,i,l,a,o="âœ•",u,d,p,h,b;return{c(){e=w("div"),t=w("video"),s=w("source"),i=J(`\r
			Your browser does not support the video tag.`),l=z(),a=w("button"),a.textContent=o,u=z(),d=w("a"),p=J("Open in new tab"),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"VIDEO",{class:!0});var C=R(t);s=k(C,"SOURCE",{src:!0}),i=Z(C,`\r
			Your browser does not support the video tag.`),C.forEach(_),l=M(y),a=k(y,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-yc21b"&&(a.textContent=o),u=M(y),d=k(y,"A",{href:!0,target:!0,rel:!0,class:!0});var I=R(d);p=Z(I,"Open in new tab"),I.forEach(_),y.forEach(_),this.h()},h(){We(s.src,r=n[16])||f(s,"src",r),t.controls=!0,t.autoplay=!0,f(t,"class","enlarged-video svelte-zjz65z"),f(a,"class","close-modal svelte-zjz65z"),f(d,"href",n[16]),f(d,"target","_blank"),f(d,"rel","noopener noreferrer"),f(d,"class","open-new-tab svelte-zjz65z"),f(e,"class","video-modal svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),c(t,s),c(t,i),c(e,l),c(e,a),c(e,u),c(e,d),c(d,p),h||(b=[G(t,"click",nt(n[42])),G(a,"click",n[40]),G(e,"click",n[40])],h=!0)},p(g,y){y[0]&65536&&!We(s.src,r=g[16])&&f(s,"src",r),y[0]&65536&&f(d,"href",g[16])},d(g){g&&_(e),h=!1,Ie(b)}}}function ch(n){let e=[],t=new Map,s,r,i,l,a,o,u,d,p,h,b,g,y,C,I,m,T,v=Ye(n[0]);const A=P=>P[68].id;for(let P=0;P<v.length;P+=1){let q=pl(n,v,P),Y=A(q);t.set(Y,e[P]=Tl(Y,q))}function S(P){n[56](P)}function E(P){n[57](P)}let N={isOwnProfile:n[4]};n[2]!==void 0&&(N.isOpen=n[2]),n[3]!==void 0&&(N.user=n[3]),r=new Jr({props:N}),tt.push(()=>zt(r,"isOpen",S)),tt.push(()=>zt(r,"user",E));let D=n[8]&&Al(n);function B(P){n[59](P)}function O(P){n[60](P)}let F={};n[12]!==void 0&&(F.visible=n[12]),n[13]!==void 0&&(F.message=n[13]),u=new jd({props:F}),tt.push(()=>zt(u,"visible",B)),tt.push(()=>zt(u,"message",O)),b=new Sn({props:{isOpen:n[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:n[27],onCancel:n[61]}});let L=n[15]&&Cl(n),U=n[16]&&Il(n);return{c(){for(let P=0;P<e.length;P+=1)e[P].c();s=z(),Je(r.$$.fragment),a=z(),D&&D.c(),o=z(),Je(u.$$.fragment),h=z(),Je(b.$$.fragment),g=z(),L&&L.c(),y=z(),U&&U.c(),C=Ne()},l(P){for(let q=0;q<e.length;q+=1)e[q].l(P);s=M(P),Ze(r.$$.fragment,P),a=M(P),D&&D.l(P),o=M(P),Ze(u.$$.fragment,P),h=M(P),Ze(b.$$.fragment,P),g=M(P),L&&L.l(P),y=M(P),U&&U.l(P),C=Ne()},m(P,q){for(let Y=0;Y<e.length;Y+=1)e[Y]&&e[Y].m(P,q);V(P,s,q),Xe(r,P,q),V(P,a,q),D&&D.m(P,q),V(P,o,q),Xe(u,P,q),V(P,h,q),Xe(b,P,q),V(P,g,q),L&&L.m(P,q),V(P,y,q),U&&U.m(P,q),V(P,C,q),I=!0,m||(T=G(Gd,"keydown",n[38]),m=!0)},p(P,q){q[0]&58213891|q[1]&286&&(v=Ye(P[0]),e=Qt(e,q,A,1,P,v,t,s.parentNode,Jt,Tl,s,pl));const Y={};q[0]&16&&(Y.isOwnProfile=P[4]),!i&&q[0]&4&&(i=!0,Y.isOpen=P[2],Mt(()=>i=!1)),!l&&q[0]&8&&(l=!0,Y.user=P[3],Mt(()=>l=!1)),r.$set(Y),P[8]?D?(D.p(P,q),q[0]&256&&Ae(D,1)):(D=Al(P),D.c(),Ae(D,1),D.m(o.parentNode,o)):D&&(qn(),Me(D,1,1,()=>{D=null}),xn());const x={};!d&&q[0]&4096&&(d=!0,x.visible=P[12],Mt(()=>d=!1)),!p&&q[0]&8192&&(p=!0,x.message=P[13],Mt(()=>p=!1)),u.$set(x);const K={};q[0]&2048&&(K.isOpen=P[11]),q[0]&2048&&(K.onCancel=P[61]),b.$set(K),P[15]?L?L.p(P,q):(L=Cl(P),L.c(),L.m(y.parentNode,y)):L&&(L.d(1),L=null),P[16]?U?U.p(P,q):(U=Il(P),U.c(),U.m(C.parentNode,C)):U&&(U.d(1),U=null)},i(P){I||(Ae(r.$$.fragment,P),Ae(D),Ae(u.$$.fragment,P),Ae(b.$$.fragment,P),I=!0)},o(P){Me(r.$$.fragment,P),Me(D),Me(u.$$.fragment,P),Me(b.$$.fragment,P),I=!1},d(P){P&&(_(s),_(a),_(o),_(h),_(g),_(y),_(C));for(let q=0;q<e.length;q+=1)e[q].d(P);Ke(r,P),D&&D.d(P),Ke(u,P),Ke(b,P),L&&L.d(P),U&&U.d(P),m=!1,T()}}}function Dl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function mn(n){return n?n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB":""}function lt(n){return n?n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:")?n:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${n}`:""}function vn(n){if(!n)return"ðŸ“Ž";const e=n.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function Qr(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function nc(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function uh(n,e,t){let s,r,i;Le(n,Nn,te=>t(65,s=te)),Le(n,an,te=>t(66,r=te)),Le(n,xt,te=>t(67,i=te));let{messages:l}=e,{onReply:a=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,d=null,p=!1,h=!1,b=0,g=0,y=null,C=null,I="",m=!1,T=null;function v(te){return i.find(ye=>ye.username===te)}function A(te){return v(te)?.color||"var(--status-offline)"}function S(te){t(3,d=te),t(4,p=te.id===r?.id),t(2,u=!0)}function E(te,ye){te.preventDefault(),t(8,y=ye),t(6,b=te.clientX),t(7,g=te.clientY),t(5,h=!0)}function N(){y&&(t(9,C=y.id),t(10,I=y.text),t(5,h=!1))}function D(te){I.trim()&&Zo(s,te,I.trim()),t(9,C=null),t(10,I="")}function B(){t(9,C=null),t(10,I="")}function O(){y&&(T=y,t(11,m=!0),t(5,h=!1))}function F(){T&&Bf(s,T.id),t(11,m=!1)}function L(){y&&(Zr(s,y.id),t(5,h=!1))}function U(){y&&(a(y),t(5,h=!1))}async function P(){if(!(!y?.fileUrl||!y?.fileName)){try{const te=lt(y.fileUrl),kt=await(await fetch(te)).blob(),pt=window.URL.createObjectURL(kt),$e=document.createElement("a");$e.href=pt,$e.download=y.fileName,document.body.appendChild($e),$e.click(),document.body.removeChild($e),window.URL.revokeObjectURL(pt)}catch(te){console.error("Download failed:",te)}t(5,h=!1)}}let q=!1,Y=null;function x(){y&&(t(13,Y=y),t(12,q=!0),t(5,h=!1))}function K(te,ye){te.preventDefault(),t(8,y=ye),t(6,b=te.clientX),t(7,g=te.clientY),t(5,h=!0)}function H(te){if(te)return l.find(ye=>ye.id===te)}let W=null;function $(te){const ye=document.getElementById(`message-${te}`);ye&&(ye.scrollIntoView({behavior:"smooth",block:"center"}),t(14,W=te),setTimeout(()=>{t(14,W=null)},2e3))}let ne=null,le=null,se=[],de=0;function re(te,ye=[]){t(15,ne=te),t(17,se=ye.length>0?ye:[te]),t(18,de=se.indexOf(te))}function ee(){t(15,ne=null),t(17,se=[]),t(18,de=0)}function oe(te){se.length!==0&&(te==="prev"?t(18,de=(de-1+se.length)%se.length):t(18,de=(de+1)%se.length),t(15,ne=se[de]))}function ke(te){ne&&(te.key==="ArrowLeft"?(te.preventDefault(),oe("prev")):te.key==="ArrowRight"?(te.preventDefault(),oe("next")):te.key==="Escape"&&(te.preventDefault(),ee()))}function Te(te){t(16,le=te)}function Ue(){t(16,le=null)}function _e(te){Vt.call(this,n,te)}function ae(te){Vt.call(this,n,te)}const be=te=>S(te),ve=te=>$(te.id);function pe(){I=this.value,t(10,I)}const Q=(te,ye)=>{ye.key==="Enter"&&!ye.shiftKey?(ye.preventDefault(),D(te.id)):ye.key==="Escape"&&(ye.preventDefault(),B())},ue=te=>D(te.id),Ee=(te,ye,kt)=>{if(kt.button===0){const pt=te.files.filter($e=>Qr($e.fileName)).map($e=>lt($e.fileUrl));re(lt(ye.fileUrl),pt)}},qe=(te,ye)=>ye.button===0&&Te(lt(te.fileUrl)),Re=(te,ye)=>ye.button===0&&te.fileUrl&&re(lt(te.fileUrl)),Ce=(te,ye)=>K(ye,te),xe=(te,ye)=>{ye.button===0&&te.fileUrl&&Te(lt(te.fileUrl))},Oe=(te,ye)=>K(ye,te),ot=(te,ye)=>E(ye,te);function st(te){u=te,t(2,u)}function mt(te){d=te,t(3,d)}function Dt(te){h=te,t(5,h)}function fe(te){q=te,t(12,q)}function we(te){Y=te,t(13,Y)}const Fe=()=>t(11,m=!1),Nt=()=>oe("prev"),Ft=()=>oe("next");return n.$$set=te=>{"messages"in te&&t(0,l=te.messages),"onReply"in te&&t(41,a=te.onReply),"firstUnreadMessageId"in te&&t(1,o=te.firstUnreadMessageId)},[l,o,u,d,p,h,b,g,y,C,I,m,q,Y,W,ne,le,se,de,v,A,S,E,N,D,B,O,F,L,U,P,x,K,H,$,re,ee,oe,ke,Te,Ue,a,_e,ae,be,ve,pe,Q,ue,Ee,qe,Re,Ce,xe,Oe,ot,st,mt,Dt,fe,we,Fe,Nt,Ft]}class fh extends dt{constructor(e){super(),ht(this,e,uh,ch,ft,{messages:0,onReply:41,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Nl(n,e,t){const s=n.slice();return s[6]=e[t],s}function Rl(n){let e,t,s,r="ðŸ“Œ",i,l,a="Pinned Messages",o,u,d,p=n[0].length+"",h,b,g,y,C=[],I=new Map,m=Ye(n[0]);const T=v=>v[6].id;for(let v=0;v<m.length;v+=1){let A=Nl(n,m,v),S=T(A);I.set(S,C[v]=Pl(S,A))}return{c(){e=w("div"),t=w("div"),s=w("span"),s.textContent=r,i=z(),l=w("span"),l.textContent=a,o=z(),u=w("span"),d=J("("),h=J(p),b=J(")"),g=z(),y=w("div");for(let v=0;v<C.length;v+=1)C[v].c();this.h()},l(v){e=k(v,"DIV",{class:!0});var A=R(e);t=k(A,"DIV",{class:!0});var S=R(t);s=k(S,"SPAN",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-73xtmc"&&(s.textContent=r),i=M(S),l=k(S,"SPAN",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-123zvdk"&&(l.textContent=a),o=M(S),u=k(S,"SPAN",{class:!0});var E=R(u);d=Z(E,"("),h=Z(E,p),b=Z(E,")"),E.forEach(_),S.forEach(_),g=M(A),y=k(A,"DIV",{class:!0});var N=R(y);for(let D=0;D<C.length;D+=1)C[D].l(N);N.forEach(_),A.forEach(_),this.h()},h(){f(s,"class","pinned-icon svelte-d1025n"),f(l,"class","pinned-title svelte-d1025n"),f(u,"class","pinned-count svelte-d1025n"),f(t,"class","pinned-header svelte-d1025n"),f(y,"class","pinned-messages svelte-d1025n"),f(e,"class","pinned-container svelte-d1025n")},m(v,A){V(v,e,A),c(e,t),c(t,s),c(t,i),c(t,l),c(t,o),c(t,u),c(u,d),c(u,h),c(u,b),c(e,g),c(e,y);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(y,null)},p(v,A){A&1&&p!==(p=v[0].length+"")&&ie(h,p),A&7&&(m=Ye(v[0]),C=Qt(C,A,T,1,v,m,I,y,Jt,Pl,null,Nl))},d(v){v&&_(e);for(let A=0;A<C.length;A+=1)C[A].d()}}}function Pl(n,e){let t,s,r,i=e[6].user+"",l,a,o,u=e[6].text.substring(0,100)+"",d,p=e[6].text.length>100?"...":"",h,b,g,y=Ol(e[6].timestamp)+"",C,I,m,T="Ã—",v,A,S;function E(){return e[3](e[6])}return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("span"),l=J(i),a=z(),o=w("span"),d=J(u),h=J(p),b=z(),g=w("span"),C=J(y),I=z(),m=w("button"),m.textContent=T,v=z(),this.h()},l(N){t=k(N,"DIV",{class:!0});var D=R(t);s=k(D,"DIV",{class:!0});var B=R(s);r=k(B,"SPAN",{class:!0,style:!0});var O=R(r);l=Z(O,i),O.forEach(_),a=M(B),o=k(B,"SPAN",{class:!0});var F=R(o);d=Z(F,u),h=Z(F,p),F.forEach(_),b=M(B),g=k(B,"SPAN",{class:!0});var L=R(g);C=Z(L,y),L.forEach(_),B.forEach(_),I=M(D),m=k(D,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(m)!=="svelte-87szfn"&&(m.textContent=T),v=M(D),D.forEach(_),this.h()},h(){f(r,"class","pinned-user svelte-d1025n"),De(r,"color",e[1](e[6].user)),f(o,"class","pinned-text svelte-d1025n"),f(g,"class","pinned-time svelte-d1025n"),f(s,"class","pinned-message-content svelte-d1025n"),f(m,"class","unpin-btn svelte-d1025n"),f(m,"title","Unpin message"),f(t,"class","pinned-message svelte-d1025n"),this.first=t},m(N,D){V(N,t,D),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,h),c(s,b),c(s,g),c(g,C),c(t,I),c(t,m),c(t,v),A||(S=G(m,"click",E),A=!0)},p(N,D){e=N,D&1&&i!==(i=e[6].user+"")&&ie(l,i),D&1&&De(r,"color",e[1](e[6].user)),D&1&&u!==(u=e[6].text.substring(0,100)+"")&&ie(d,u),D&1&&p!==(p=e[6].text.length>100?"...":"")&&ie(h,p),D&1&&y!==(y=Ol(e[6].timestamp)+"")&&ie(C,y)},d(N){N&&_(t),A=!1,S()}}}function dh(n){let e,t=n[0].length>0&&Rl(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0].length>0?t?t.p(s,r):(t=Rl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function Ol(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function hh(n,e,t){let s;Le(n,xt,u=>t(4,s=u));let{pinnedMessages:r}=e;function i(u){return s.find(d=>d.username===u)}function l(u){return i(u)?.color||"var(--status-offline)"}function a(u){Zr(u)}const o=u=>a(u.id);return n.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,l,a,o]}class ph extends dt{constructor(e){super(),ht(this,e,hh,dh,ft,{pinnedMessages:0})}}function Ml(n,e,t){const s=n.slice();return s[47]=e[t].file,s[48]=e[t].preview,s[50]=t,s}function zl(n){let e,t='<div class="drag-overlay-content svelte-1mvqxem"><div class="drag-icon svelte-1mvqxem">ðŸ“</div> <div class="drag-text svelte-1mvqxem">Drop files here to upload</div></div>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){f(e,"class","drag-overlay svelte-1mvqxem")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function Fl(n){let e,t,s,r,i=n[16].join(", ")+"",l,a,o=n[16].length===1?"is":"are",u,d;return{c(){e=w("div"),t=w("span"),s=z(),r=w("span"),l=J(i),a=z(),u=J(o),d=J(" typing..."),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"SPAN",{class:!0}),R(t).forEach(_),s=M(h),r=k(h,"SPAN",{});var b=R(r);l=Z(b,i),a=M(b),u=Z(b,o),d=Z(b," typing..."),b.forEach(_),h.forEach(_),this.h()},h(){f(t,"class","typing-dots svelte-1mvqxem"),f(e,"class","typing-indicator svelte-1mvqxem")},m(p,h){V(p,e,h),c(e,t),c(e,s),c(e,r),c(r,l),c(r,a),c(r,u),c(r,d)},p(p,h){h[0]&65536&&i!==(i=p[16].join(", ")+"")&&ie(l,i),h[0]&65536&&o!==(o=p[16].length===1?"is":"are")&&ie(u,o)},d(p){p&&_(e)}}}function Bl(n){let e,t;return e=new Ad({}),e.$on("select",n[21]),e.$on("close",n[33]),{c(){Je(e.$$.fragment)},l(s){Ze(e.$$.fragment,s)},m(s,r){Xe(e,s,r),t=!0},p:ze,i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){Ke(e,s)}}}function gh(n){let e,t,s,r,i=n[5].user+"",l,a,o,u,d=n[5].text.substring(0,50)+"",p,h=n[5].text.length>50?"...":"",b,g,y,C="âœ•",I,m;return{c(){e=w("div"),t=w("div"),s=w("span"),r=J("Replying to "),l=J(i),a=J(":"),o=z(),u=w("span"),p=J(d),b=J(h),g=z(),y=w("button"),y.textContent=C,this.h()},l(T){e=k(T,"DIV",{class:!0});var v=R(e);t=k(v,"DIV",{class:!0});var A=R(t);s=k(A,"SPAN",{class:!0});var S=R(s);r=Z(S,"Replying to "),l=Z(S,i),a=Z(S,":"),S.forEach(_),o=M(A),u=k(A,"SPAN",{class:!0});var E=R(u);p=Z(E,d),b=Z(E,h),E.forEach(_),A.forEach(_),g=M(v),y=k(v,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-1av190j"&&(y.textContent=C),v.forEach(_),this.h()},h(){f(s,"class","reply-label svelte-1mvqxem"),f(u,"class","reply-preview svelte-1mvqxem"),f(t,"class","reply-info svelte-1mvqxem"),f(y,"class","cancel-reply svelte-1mvqxem"),f(e,"class","reply-bar svelte-1mvqxem")},m(T,v){V(T,e,v),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(u,p),c(u,b),c(e,g),c(e,y),I||(m=G(y,"click",n[23]),I=!0)},p(T,v){v[0]&32&&i!==(i=T[5].user+"")&&ie(l,i),v[0]&32&&d!==(d=T[5].text.substring(0,50)+"")&&ie(p,d),v[0]&32&&h!==(h=T[5].text.length>50?"...":"")&&ie(b,h)},d(T){T&&_(e),I=!1,m()}}}function mh(n){let e,t,s='<span class="edit-label svelte-1mvqxem">Editing message</span> <span class="edit-hint svelte-1mvqxem">Press Escape to cancel</span>',r,i,l="âœ•",a,o;return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1kwfa7y"&&(t.innerHTML=s),r=M(d),i=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1anw7a5"&&(i.textContent=l),d.forEach(_),this.h()},h(){f(t,"class","edit-info svelte-1mvqxem"),f(i,"class","cancel-edit svelte-1mvqxem"),f(e,"class","edit-bar svelte-1mvqxem")},m(u,d){V(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=G(i,"click",n[20]),a=!0)},p:ze,d(u){u&&_(e),a=!1,o()}}}function Ll(n){let e,t,s,r=n[10].length+"",i,l,a=n[10].length>1?"s":"",o,u,d,p,h="âœ•",b,g,y,C,I,m,T,v,A="Mark as spoiler",S,E,N="âš ï¸",D,B,O,F=n[10].length+"",L,U,P=n[10].length>1?"s":"",q,Y,x,K=Ye(n[10]),H=[];for(let W=0;W<K.length;W+=1)H[W]=Ul(Ml(n,K,W));return{c(){e=w("div"),t=w("div"),s=w("span"),i=J(r),l=J(" file"),o=J(a),u=J(" selected"),d=z(),p=w("button"),p.textContent=h,b=z(),g=w("div");for(let W=0;W<H.length;W+=1)H[W].c();y=z(),C=w("div"),I=w("label"),m=w("input"),T=z(),v=w("span"),v.textContent=A,S=z(),E=w("span"),E.textContent=N,D=z(),B=w("button"),O=J("Upload "),L=J(F),U=J(" file"),q=J(P),this.h()},l(W){e=k(W,"DIV",{class:!0});var $=R(e);t=k($,"DIV",{class:!0});var ne=R(t);s=k(ne,"SPAN",{});var le=R(s);i=Z(le,r),l=Z(le," file"),o=Z(le,a),u=Z(le," selected"),le.forEach(_),d=M(ne),p=k(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-pcsk7y"&&(p.textContent=h),ne.forEach(_),b=M($),g=k($,"DIV",{class:!0});var se=R(g);for(let oe=0;oe<H.length;oe+=1)H[oe].l(se);se.forEach(_),y=M($),C=k($,"DIV",{class:!0});var de=R(C);I=k(de,"LABEL",{class:!0});var re=R(I);m=k(re,"INPUT",{type:!0,class:!0}),T=M(re),v=k(re,"SPAN",{"data-svelte-h":!0}),X(v)!=="svelte-6s6emx"&&(v.textContent=A),re.forEach(_),S=M(de),E=k(de,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(E)!=="svelte-6jzi8y"&&(E.textContent=N),de.forEach(_),D=M($),B=k($,"BUTTON",{class:!0});var ee=R(B);O=Z(ee,"Upload "),L=Z(ee,F),U=Z(ee," file"),q=Z(ee,P),ee.forEach(_),$.forEach(_),this.h()},h(){f(p,"class","cancel-gallery svelte-1mvqxem"),f(t,"class","gallery-header svelte-1mvqxem"),f(g,"class","gallery-grid svelte-1mvqxem"),f(m,"type","checkbox"),f(m,"class","spoiler-checkbox svelte-1mvqxem"),f(I,"class","spoiler-checkbox-label svelte-1mvqxem"),f(E,"class","spoiler-hint svelte-1mvqxem"),f(E,"title","Sensitive content will be hidden until clicked"),f(C,"class","spoiler-checkbox-container svelte-1mvqxem"),f(B,"class","upload-files-btn svelte-1mvqxem"),f(e,"class","file-gallery svelte-1mvqxem")},m(W,$){V(W,e,$),c(e,t),c(t,s),c(s,i),c(s,l),c(s,o),c(s,u),c(t,d),c(t,p),c(e,b),c(e,g);for(let ne=0;ne<H.length;ne+=1)H[ne]&&H[ne].m(g,null);c(e,y),c(e,C),c(C,I),c(I,m),m.checked=n[11],c(I,T),c(I,v),c(C,S),c(C,E),c(e,D),c(e,B),c(B,O),c(B,L),c(B,U),c(B,q),Y||(x=[G(p,"click",n[26]),G(m,"change",n[35]),G(B,"click",n[30])],Y=!0)},p(W,$){if($[0]&1024&&r!==(r=W[10].length+"")&&ie(i,r),$[0]&1024&&a!==(a=W[10].length>1?"s":"")&&ie(o,a),$[0]&33555456){K=Ye(W[10]);let ne;for(ne=0;ne<K.length;ne+=1){const le=Ml(W,K,ne);H[ne]?H[ne].p(le,$):(H[ne]=Ul(le),H[ne].c(),H[ne].m(g,null))}for(;ne<H.length;ne+=1)H[ne].d(1);H.length=K.length}$[0]&2048&&(m.checked=W[11]),$[0]&1024&&F!==(F=W[10].length+"")&&ie(L,F),$[0]&1024&&P!==(P=W[10].length>1?"s":"")&&ie(q,P)},d(W){W&&_(e),Rs(H,W),Y=!1,Ie(x)}}}function vh(n){let e,t,s;function r(a,o){return o[0]&1024&&(t=null),o[0]&1024&&(s=null),t==null&&(t=!!a[47].type.startsWith("video/")),t?wh:(s==null&&(s=!!a[47].type.startsWith("audio/")),s?kh:bh)}let i=r(n,[-1,-1]),l=i(n);return{c(){e=w("div"),l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var o=R(e);l.l(o),o.forEach(_),this.h()},h(){f(e,"class","gallery-file-icon svelte-1mvqxem")},m(a,o){V(a,e,o),l.m(e,null)},p(a,o){i!==(i=r(a,o))&&(l.d(1),l=i(a),l&&(l.c(),l.m(e,null)))},d(a){a&&_(e),l.d()}}}function _h(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[48])||f(e,"src",t),f(e,"alt",s=n[47].name),f(e,"class","gallery-preview svelte-1mvqxem")},m(r,i){V(r,e,i)},p(r,i){i[0]&1024&&!We(e.src,t=r[48])&&f(e,"src",t),i[0]&1024&&s!==(s=r[47].name)&&f(e,"alt",s)},d(r){r&&_(e)}}}function bh(n){let e;return{c(){e=J("ðŸ“„")},l(t){e=Z(t,"ðŸ“„")},m(t,s){V(t,e,s)},d(t){t&&_(e)}}}function kh(n){let e;return{c(){e=J("ðŸŽµ")},l(t){e=Z(t,"ðŸŽµ")},m(t,s){V(t,e,s)},d(t){t&&_(e)}}}function wh(n){let e;return{c(){e=J("ðŸŽ¬")},l(t){e=Z(t,"ðŸŽ¬")},m(t,s){V(t,e,s)},d(t){t&&_(e)}}}function Ul(n){let e,t,s,r,i=n[47].name+"",l,a,o,u=(n[47].size/1024/1024).toFixed(2)+"",d,p,h,b,g="âœ•",y,C,I;function m(S,E){return S[48]?_h:vh}let T=m(n),v=T(n);function A(){return n[34](n[50])}return{c(){e=w("div"),v.c(),t=z(),s=w("div"),r=w("div"),l=J(i),a=z(),o=w("div"),d=J(u),p=J(" MB"),h=z(),b=w("button"),b.textContent=g,y=z(),this.h()},l(S){e=k(S,"DIV",{class:!0});var E=R(e);v.l(E),t=M(E),s=k(E,"DIV",{class:!0});var N=R(s);r=k(N,"DIV",{class:!0});var D=R(r);l=Z(D,i),D.forEach(_),a=M(N),o=k(N,"DIV",{class:!0});var B=R(o);d=Z(B,u),p=Z(B," MB"),B.forEach(_),N.forEach(_),h=M(E),b=k(E,"BUTTON",{class:!0,"data-svelte-h":!0}),X(b)!=="svelte-17gof1i"&&(b.textContent=g),y=M(E),E.forEach(_),this.h()},h(){f(r,"class","gallery-file-name svelte-1mvqxem"),f(o,"class","gallery-file-size svelte-1mvqxem"),f(s,"class","gallery-file-info svelte-1mvqxem"),f(b,"class","remove-file svelte-1mvqxem"),f(e,"class","gallery-item svelte-1mvqxem")},m(S,E){V(S,e,E),v.m(e,null),c(e,t),c(e,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,p),c(e,h),c(e,b),c(e,y),C||(I=G(b,"click",A),C=!0)},p(S,E){n=S,T===(T=m(n))&&v?v.p(n,E):(v.d(1),v=T(n),v&&(v.c(),v.m(e,t))),E[0]&1024&&i!==(i=n[47].name+"")&&ie(l,i),E[0]&1024&&u!==(u=(n[47].size/1024/1024).toFixed(2)+"")&&ie(d,u)},d(S){S&&_(e),v.d(),C=!1,I()}}}function ql(n){let e,t,s,r="Uploading files...",i,l,a,o,u,d,p;return{c(){e=w("div"),t=w("div"),s=w("span"),s.textContent=r,i=z(),l=w("span"),a=J(n[8]),o=J("%"),u=z(),d=w("div"),p=w("div"),this.h()},l(h){e=k(h,"DIV",{class:!0});var b=R(e);t=k(b,"DIV",{class:!0});var g=R(t);s=k(g,"SPAN",{"data-svelte-h":!0}),X(s)!=="svelte-10wvq4k"&&(s.textContent=r),i=M(g),l=k(g,"SPAN",{});var y=R(l);a=Z(y,n[8]),o=Z(y,"%"),y.forEach(_),g.forEach(_),u=M(b),d=k(b,"DIV",{class:!0});var C=R(d);p=k(C,"DIV",{class:!0,style:!0}),R(p).forEach(_),C.forEach(_),b.forEach(_),this.h()},h(){f(t,"class","upload-progress-info svelte-1mvqxem"),f(p,"class","progress-fill svelte-1mvqxem"),De(p,"width",n[8]+"%"),f(d,"class","progress-bar svelte-1mvqxem"),f(e,"class","upload-progress-bar svelte-1mvqxem")},m(h,b){V(h,e,b),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),c(l,o),c(e,u),c(e,d),c(d,p)},p(h,b){b[0]&256&&ie(a,h[8]),b[0]&256&&De(p,"width",h[8]+"%")},d(h){h&&_(e)}}}function yh(n){let e,t,s,r,i,l,a,o,u,d,p,h,b,g,y,C,I,m,T,v,A,S,E="ðŸ“Ž",N,D,B,O,F="GIF",L,U,P,q,Y,x,K,H=n[12]&&zl();o=new ph({props:{pinnedMessages:n[14]}}),d=new fh({props:{messages:n[0],onReply:n[22],firstUnreadMessageId:n[15]}});let W=n[16].length>0&&Fl(n),$=n[4]&&Bl(n);function ne(ee,oe){if(ee[7])return mh;if(ee[5])return gh}let le=ne(n),se=le&&le(n),de=n[10].length>0&&!n[9]&&Ll(n),re=n[9]&&ql(n);return{c(){e=w("div"),H&&H.c(),t=z(),s=w("div"),r=w("h2"),i=J(n[1]),l=z(),a=w("div"),Je(o.$$.fragment),u=z(),Je(d.$$.fragment),p=z(),W&&W.c(),h=z(),$&&$.c(),b=z(),se&&se.c(),g=z(),y=w("div"),de&&de.c(),C=z(),re&&re.c(),I=z(),m=w("input"),T=z(),v=w("div"),A=w("div"),S=w("button"),S.textContent=E,N=z(),D=w("textarea"),B=z(),O=w("button"),O.textContent=F,L=z(),U=w("button"),P=J("Send"),this.h()},l(ee){e=k(ee,"DIV",{class:!0});var oe=R(e);H&&H.l(oe),t=M(oe),s=k(oe,"DIV",{class:!0});var ke=R(s);r=k(ke,"H2",{class:!0});var Te=R(r);i=Z(Te,n[1]),Te.forEach(_),ke.forEach(_),l=M(oe),a=k(oe,"DIV",{class:!0});var Ue=R(a);Ze(o.$$.fragment,Ue),u=M(Ue),Ze(d.$$.fragment,Ue),p=M(Ue),W&&W.l(Ue),Ue.forEach(_),h=M(oe),$&&$.l(oe),b=M(oe),se&&se.l(oe),g=M(oe),y=k(oe,"DIV",{class:!0});var _e=R(y);de&&de.l(_e),C=M(_e),re&&re.l(_e),I=M(_e),m=k(_e,"INPUT",{type:!0,style:!0}),T=M(_e),v=k(_e,"DIV",{class:!0});var ae=R(v);A=k(ae,"DIV",{class:!0});var be=R(A);S=k(be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(S)!=="svelte-1fiys3t"&&(S.textContent=E),be.forEach(_),N=M(ae),D=k(ae,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),R(D).forEach(_),B=M(ae),O=k(ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(O)!=="svelte-1ty10q8"&&(O.textContent=F),L=M(ae),U=k(ae,"BUTTON",{class:!0});var ve=R(U);P=Z(ve,"Send"),ve.forEach(_),ae.forEach(_),_e.forEach(_),oe.forEach(_),this.h()},h(){f(r,"class","svelte-1mvqxem"),f(s,"class","chat-header svelte-1mvqxem"),f(a,"class","messages svelte-1mvqxem"),f(m,"type","file"),m.multiple=!0,De(m,"display","none"),f(S,"class","input-icon-button svelte-1mvqxem"),f(S,"title","Attach file"),f(A,"class","input-buttons-left svelte-1mvqxem"),f(D,"placeholder","Type a message... (Shift+Enter for new line)"),f(D,"maxlength","2000"),f(D,"rows","1"),f(D,"class","svelte-1mvqxem"),f(O,"class","input-icon-button svelte-1mvqxem"),f(O,"title","Add GIF"),f(U,"class","send-button svelte-1mvqxem"),U.disabled=q=!n[2].trim(),f(v,"class","input-container svelte-1mvqxem"),f(y,"class","input-wrapper svelte-1mvqxem"),f(e,"class","chat-container svelte-1mvqxem")},m(ee,oe){V(ee,e,oe),H&&H.m(e,null),c(e,t),c(e,s),c(s,r),c(r,i),c(e,l),c(e,a),Xe(o,a,null),c(a,u),Xe(d,a,null),c(a,p),W&&W.m(a,null),n[32](a),c(e,h),$&&$.m(e,null),c(e,b),se&&se.m(e,null),c(e,g),c(e,y),de&&de.m(y,null),c(y,C),re&&re.m(y,null),c(y,I),c(y,m),n[36](m),c(y,T),c(y,v),c(v,A),c(A,S),c(v,N),c(v,D),n[38](D),it(D,n[2]),c(v,B),c(v,O),c(v,L),c(v,U),c(U,P),Y=!0,x||(K=[G(m,"change",n[24]),G(S,"click",n[37]),G(D,"input",n[39]),G(D,"input",n[17]),G(D,"keydown",n[18]),G(O,"click",n[40]),G(U,"click",n[19]),G(e,"dragenter",n[27]),G(e,"dragleave",n[28]),G(e,"dragover",Eh),G(e,"drop",n[29])],x=!0)},p(ee,oe){ee[12]?H||(H=zl(),H.c(),H.m(e,t)):H&&(H.d(1),H=null),(!Y||oe[0]&2)&&ie(i,ee[1]);const ke={};oe[0]&16384&&(ke.pinnedMessages=ee[14]),o.$set(ke);const Te={};oe[0]&1&&(Te.messages=ee[0]),oe[0]&32768&&(Te.firstUnreadMessageId=ee[15]),d.$set(Te),ee[16].length>0?W?W.p(ee,oe):(W=Fl(ee),W.c(),W.m(a,null)):W&&(W.d(1),W=null),ee[4]?$?($.p(ee,oe),oe[0]&16&&Ae($,1)):($=Bl(ee),$.c(),Ae($,1),$.m(e,b)):$&&(qn(),Me($,1,1,()=>{$=null}),xn()),le===(le=ne(ee))&&se?se.p(ee,oe):(se&&se.d(1),se=le&&le(ee),se&&(se.c(),se.m(e,g))),ee[10].length>0&&!ee[9]?de?de.p(ee,oe):(de=Ll(ee),de.c(),de.m(y,C)):de&&(de.d(1),de=null),ee[9]?re?re.p(ee,oe):(re=ql(ee),re.c(),re.m(y,I)):re&&(re.d(1),re=null),oe[0]&4&&it(D,ee[2]),(!Y||oe[0]&4&&q!==(q=!ee[2].trim()))&&(U.disabled=q)},i(ee){Y||(Ae(o.$$.fragment,ee),Ae(d.$$.fragment,ee),Ae($),Y=!0)},o(ee){Me(o.$$.fragment,ee),Me(d.$$.fragment,ee),Me($),Y=!1},d(ee){ee&&_(e),H&&H.d(),Ke(o),Ke(d),W&&W.d(),n[32](null),$&&$.d(),se&&se.d(),de&&de.d(),re&&re.d(),n[36](null),n[38](null),x=!1,Ie(K)}}}function Eh(n){n.preventDefault(),n.stopPropagation()}function Th(n,e,t){let s,r,i,l,a,o,u;Le(n,Nn,ae=>t(1,i=ae)),Le(n,an,ae=>t(44,l=ae)),Le(n,At,ae=>t(31,a=ae)),Le(n,Xr,ae=>t(15,o=ae)),Le(n,Ko,ae=>t(16,u=ae));let d="",p,h,b=!1,g=null,y,C=null,I=0,m=!1,T=[],v=[],A=!1,S=!1,E=0,N;async function D(){await cc(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function B(){if(!N)return;t(13,N.style.height="auto",N);const ae=Math.min(N.scrollHeight,120);t(13,N.style.height=`${ae}px`,N)}function O(){B(),Xs(!0),h&&clearTimeout(h),h=setTimeout(()=>{Xs(!1)},1e3)}function F(ae){if(ae.key==="ArrowUp"&&!d.trim()&&!C){ae.preventDefault();const be=s.filter(ve=>ve.userId===l?.id);if(be.length>0){const ve=be[be.length-1];t(7,C=ve),t(2,d=ve.text)}}else ae.key==="Escape"&&C?(ae.preventDefault(),U()):ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),L())}function L(){d.trim()&&(C?(Zo(i,C.id,d.trim()),t(7,C=null)):(ms(i,d.trim(),"text",{replyTo:g?.id,isSpoiler:A}),t(5,g=null)),t(2,d=""),Xs(!1),h&&clearTimeout(h),N&&t(13,N.style.height="auto",N))}function U(){t(7,C=null),t(2,d=""),N&&t(13,N.style.height="auto",N)}function P(ae){ms(i,"","gif",{gifUrl:ae.detail,replyTo:g?.id,isSpoiler:A}),t(5,g=null),t(4,b=!1)}function q(ae){t(5,g=ae),document.querySelector('input[type="text"]')?.focus()}function Y(){t(5,g=null)}async function x(ae){const be=ae.target,ve=Array.from(be.files||[]);if(ve.length===0){console.log("No files selected");return}console.log("Files selected:",ve.length);const pe=1024*1024*1024;for(const Q of ve)if(Q.size>pe){alert(`File too large! Maximum size is 1GB per file. "${Q.name}" is ${(Q.size/1024/1024).toFixed(2)}MB`),be.value="";return}T=ve,t(10,v=await Promise.all(ve.map(async Q=>{if(Q.type.startsWith("image/")){const ue=await new Promise(Ee=>{const qe=new FileReader;qe.onload=Re=>Ee(Re.target?.result),qe.readAsDataURL(Q)});return{file:Q,preview:ue}}return{file:Q}}))),be.value=""}function K(ae){T=T.filter((be,ve)=>ve!==ae),t(10,v=v.filter((be,ve)=>ve!==ae))}function H(){T=[],t(10,v=[])}function W(ae){ae.preventDefault(),ae.stopPropagation(),E++,ae.dataTransfer?.types.includes("Files")&&t(12,S=!0)}function $(ae){ae.preventDefault(),ae.stopPropagation(),E--,E===0&&t(12,S=!1)}async function ne(ae){ae.preventDefault(),ae.stopPropagation(),t(12,S=!1),E=0;const be=Array.from(ae.dataTransfer?.files||[]);if(be.length===0)return;const ve=1024*1024*1024;for(const pe of be)if(pe.size>ve){alert(`File too large! Maximum size is 1GB per file. "${pe.name}" is ${(pe.size/1024/1024).toFixed(2)}MB`);return}T=be,t(10,v=await Promise.all(be.map(async pe=>{if(pe.type.startsWith("image/")){const Q=await new Promise(ue=>{const Ee=new FileReader;Ee.onload=qe=>ue(qe.target?.result),Ee.readAsDataURL(pe)});return{file:pe,preview:Q}}return{file:pe}})))}async function le(){if(T.length===0)return;t(9,m=!0);const ae=T.length;let be=0;try{const ve=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,pe=[];for(const Q of T){const ue=await new Promise((Ee,qe)=>{const Re=new FormData;Re.append("file",Q),Re.append("channelId",i);const Ce=new XMLHttpRequest;Ce.upload.addEventListener("progress",xe=>{if(xe.lengthComputable){const Oe=xe.loaded/xe.total*100,ot=(be+Oe/100)/ae*100;t(8,I=Math.round(ot))}}),Ce.addEventListener("load",()=>{if(Ce.status===200){const xe=JSON.parse(Ce.responseText);be++,Ee({fileUrl:xe.fileUrl,fileName:Q.name,fileSize:Q.size})}else qe(new Error("Upload failed"))}),Ce.addEventListener("error",()=>{qe(new Error("Upload failed"))}),Ce.open("POST",`${ve}/api/upload`),Ce.send(Re)});pe.push(ue)}pe.length===1?ms(i,d.trim()||`Shared: ${pe[0].fileName}`,"file",{fileUrl:pe[0].fileUrl,fileName:pe[0].fileName,fileSize:pe[0].fileSize,replyTo:g?.id,isSpoiler:A}):ms(i,d.trim()||`Shared ${pe.length} files`,"file",{files:pe,replyTo:g?.id,isSpoiler:A}),console.log("All files uploaded"),t(2,d=""),t(5,g=null),T=[],t(10,v=[]),t(9,m=!1),t(8,I=0)}catch(ve){console.error("Upload error:",ve),alert("Failed to upload files. Please try again."),t(9,m=!1),t(8,I=0)}}function se(ae){tt[ae?"unshift":"push"](()=>{p=ae,t(3,p)})}const de=()=>t(4,b=!1),re=ae=>K(ae);function ee(){A=this.checked,t(11,A)}function oe(ae){tt[ae?"unshift":"push"](()=>{y=ae,t(6,y)})}const ke=()=>y?.click();function Te(ae){tt[ae?"unshift":"push"](()=>{N=ae,t(13,N)})}function Ue(){d=this.value,t(2,d)}const _e=()=>t(4,b=!b);return n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1&&t(0,s=a[i]||[]),n.$$.dirty[0]&1&&t(14,r=s.filter(ae=>ae.isPinned)),n.$$.dirty[0]&1&&s.length&&D()},[s,i,d,p,b,g,y,C,I,m,v,A,S,N,r,o,u,O,F,L,U,P,q,Y,x,K,H,W,$,ne,le,a,se,de,re,ee,oe,ke,Te,Ue,_e]}class Ah extends dt{constructor(e){super(),ht(this,e,Th,yh,ft,{},null,[-1,-1])}}var Ln={},Qs,xl;function Ch(){return xl||(xl=1,Qs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Qs}var $s={},pn={},jl;function Pn(){if(jl)return pn;jl=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return pn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},pn.getSymbolTotalCodewords=function(s){return e[s]},pn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s},pn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');n=s},pn.isKanjiModeEnabled=function(){return typeof n<"u"},pn.toSJIS=function(s){return n(s)},pn}var er={},Vl;function $r(){return Vl||(Vl=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,r){if(n.isValid(s))return s;try{return e(s)}catch{return r}}})(er)),er}var tr,Hl;function Sh(){if(Hl)return tr;Hl=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},tr=n,tr}var nr,Gl;function Ih(){if(Gl)return nr;Gl=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,s,r){const i=e*this.size+t;this.data[i]=s,r&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},nr=n,nr}var sr={},Wl;function Dh(){return Wl||(Wl=1,(function(n){const e=Pn().getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,i=e(s),l=i===145?26:Math.ceil((i-13)/(2*r-2))*2,a=[i-7];for(let o=1;o<r-1;o++)a[o]=a[o-1]-l;return a.push(6),a.reverse()},n.getPositions=function(s){const r=[],i=n.getRowColCoords(s),l=i.length;for(let a=0;a<l;a++)for(let o=0;o<l;o++)a===0&&o===0||a===0&&o===l-1||a===l-1&&o===0||r.push([i[a],i[o]]);return r}})(sr)),sr}var rr={},Yl;function Nh(){if(Yl)return rr;Yl=1;const n=Pn().getSymbolSize,e=7;return rr.getPositions=function(s){const r=n(s);return[[0,0],[r-e,0],[0,r-e]]},rr}var ir={},Kl;function Rh(){return Kl||(Kl=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const i=r.size;let l=0,a=0,o=0,u=null,d=null;for(let p=0;p<i;p++){a=o=0,u=d=null;for(let h=0;h<i;h++){let b=r.get(p,h);b===u?a++:(a>=5&&(l+=e.N1+(a-5)),u=b,a=1),b=r.get(h,p),b===d?o++:(o>=5&&(l+=e.N1+(o-5)),d=b,o=1)}a>=5&&(l+=e.N1+(a-5)),o>=5&&(l+=e.N1+(o-5))}return l},n.getPenaltyN2=function(r){const i=r.size;let l=0;for(let a=0;a<i-1;a++)for(let o=0;o<i-1;o++){const u=r.get(a,o)+r.get(a,o+1)+r.get(a+1,o)+r.get(a+1,o+1);(u===4||u===0)&&l++}return l*e.N2},n.getPenaltyN3=function(r){const i=r.size;let l=0,a=0,o=0;for(let u=0;u<i;u++){a=o=0;for(let d=0;d<i;d++)a=a<<1&2047|r.get(u,d),d>=10&&(a===1488||a===93)&&l++,o=o<<1&2047|r.get(d,u),d>=10&&(o===1488||o===93)&&l++}return l*e.N3},n.getPenaltyN4=function(r){let i=0;const l=r.data.length;for(let o=0;o<l;o++)i+=r.data[o];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function t(s,r,i){switch(s){case n.Patterns.PATTERN000:return(r+i)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(r+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return r*i%2+r*i%3===0;case n.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case n.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(r,i){const l=i.size;for(let a=0;a<l;a++)for(let o=0;o<l;o++)i.isReserved(o,a)||i.xor(o,a,t(r,o,a))},n.getBestMask=function(r,i){const l=Object.keys(n.Patterns).length;let a=0,o=1/0;for(let u=0;u<l;u++){i(u),n.applyMask(u,r);const d=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(u,r),d<o&&(o=d,a=u)}return a}})(ir)),ir}var bs={},Xl;function sc(){if(Xl)return bs;Xl=1;const n=$r(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return bs.getBlocksCount=function(r,i){switch(i){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},bs.getTotalCodewordsCount=function(r,i){switch(i){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},bs}var lr={},es={},Zl;function Ph(){if(Zl)return es;Zl=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let s=1;for(let r=0;r<255;r++)n[r]=s,e[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),es.log=function(s){if(s<1)throw new Error("log("+s+")");return e[s]},es.exp=function(s){return n[s]},es.mul=function(s,r){return s===0||r===0?0:n[e[s]+e[r]]},es}var Jl;function Oh(){return Jl||(Jl=1,(function(n){const e=Ph();n.mul=function(s,r){const i=new Uint8Array(s.length+r.length-1);for(let l=0;l<s.length;l++)for(let a=0;a<r.length;a++)i[l+a]^=e.mul(s[l],r[a]);return i},n.mod=function(s,r){let i=new Uint8Array(s);for(;i.length-r.length>=0;){const l=i[0];for(let o=0;o<r.length;o++)i[o]^=e.mul(r[o],l);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let i=0;i<s;i++)r=n.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(lr)),lr}var ar,Ql;function Mh(){if(Ql)return ar;Ql=1;const n=Oh();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(s){this.degree=s,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const i=n.mod(r,this.genPoly),l=this.degree-i.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(i,l),a}return i},ar=e,ar}var or={},cr={},ur={},$l;function rc(){return $l||($l=1,ur.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ur}var tn={},ea;function ic(){if(ea)return tn;ea=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;tn.KANJI=new RegExp(t,"g"),tn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),tn.BYTE=new RegExp(s,"g"),tn.NUMERIC=new RegExp(n,"g"),tn.ALPHANUMERIC=new RegExp(e,"g");const r=new RegExp("^"+t+"$"),i=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return tn.testKanji=function(o){return r.test(o)},tn.testNumeric=function(o){return i.test(o)},tn.testAlphanumeric=function(o){return l.test(o)},tn}var ta;function On(){return ta||(ta=1,(function(n){const e=rc(),t=ic();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(i,l){if(n.isValid(i))return i;try{return s(i)}catch{return l}}})(cr)),cr}var na;function zh(){return na||(na=1,(function(n){const e=Pn(),t=sc(),s=$r(),r=On(),i=rc(),l=7973,a=e.getBCHDigit(l);function o(h,b,g){for(let y=1;y<=40;y++)if(b<=n.getCapacity(y,g,h))return y}function u(h,b){return r.getCharCountIndicator(h,b)+4}function d(h,b){let g=0;return h.forEach(function(y){const C=u(y.mode,b);g+=C+y.getBitsLength()}),g}function p(h,b){for(let g=1;g<=40;g++)if(d(h,g)<=n.getCapacity(g,b,r.MIXED))return g}n.from=function(b,g){return i.isValid(b)?parseInt(b,10):g},n.getCapacity=function(b,g,y){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=r.BYTE);const C=e.getSymbolTotalCodewords(b),I=t.getTotalCodewordsCount(b,g),m=(C-I)*8;if(y===r.MIXED)return m;const T=m-u(y,b);switch(y){case r.NUMERIC:return Math.floor(T/10*3);case r.ALPHANUMERIC:return Math.floor(T/11*2);case r.KANJI:return Math.floor(T/13);case r.BYTE:default:return Math.floor(T/8)}},n.getBestVersionForData=function(b,g){let y;const C=s.from(g,s.M);if(Array.isArray(b)){if(b.length>1)return p(b,C);if(b.length===0)return 1;y=b[0]}else y=b;return o(y.mode,y.getLength(),C)},n.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let g=b<<12;for(;e.getBCHDigit(g)-a>=0;)g^=l<<e.getBCHDigit(g)-a;return b<<12|g}})(or)),or}var fr={},sa;function Fh(){if(sa)return fr;sa=1;const n=Pn(),e=1335,t=21522,s=n.getBCHDigit(e);return fr.getEncodedBits=function(i,l){const a=i.bit<<3|l;let o=a<<10;for(;n.getBCHDigit(o)-s>=0;)o^=e<<n.getBCHDigit(o)-s;return(a<<10|o)^t},fr}var dr={},hr,ra;function Bh(){if(ra)return hr;ra=1;const n=On();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let r,i,l;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),l=parseInt(i,10),s.put(l,10);const a=this.data.length-r;a>0&&(i=this.data.substr(r),l=parseInt(i,10),s.put(l,a*3+1))},hr=e,hr}var pr,ia;function Lh(){if(ia)return pr;ia=1;const n=On(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(s){this.mode=n.ALPHANUMERIC,this.data=s}return t.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i+2<=this.data.length;i+=2){let l=e.indexOf(this.data[i])*45;l+=e.indexOf(this.data[i+1]),r.put(l,11)}this.data.length%2&&r.put(e.indexOf(this.data[i]),6)},pr=t,pr}var gr,la;function Uh(){if(la)return gr;la=1;const n=On();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(s){return s*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)},gr=e,gr}var mr,aa;function qh(){if(aa)return mr;aa=1;const n=On(),e=Pn();function t(s){this.mode=n.KANJI,this.data=s}return t.getBitsLength=function(r){return r*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let r;for(r=0;r<this.data.length;r++){let i=e.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),s.put(i,13)}},mr=t,mr}var vr={exports:{}},oa;function xh(){return oa||(oa=1,(function(n){var e={single_source_shortest_paths:function(t,s,r){var i={},l={};l[s]=0;var a=e.PriorityQueue.make();a.push(s,0);for(var o,u,d,p,h,b,g,y,C;!a.empty();){o=a.pop(),u=o.value,p=o.cost,h=t[u]||{};for(d in h)h.hasOwnProperty(d)&&(b=h[d],g=p+b,y=l[d],C=typeof l[d]>"u",(C||y>g)&&(l[d]=g,a.push(d,g),i[d]=u))}if(typeof r<"u"&&typeof l[r]>"u"){var I=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(I)}return i},extract_shortest_path_from_predecessor_list:function(t,s){for(var r=[],i=s;i;)r.push(i),t[i],i=t[i];return r.reverse(),r},find_path:function(t,s,r){var i=e.single_source_shortest_paths(t,s,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var s=e.PriorityQueue,r={},i;t=t||{};for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);return r.queue=[],r.sorter=t.sorter||s.default_sorter,r},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var r={value:t,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(vr)),vr.exports}var ca;function jh(){return ca||(ca=1,(function(n){const e=On(),t=Bh(),s=Lh(),r=Uh(),i=qh(),l=ic(),a=Pn(),o=xh();function u(I){return unescape(encodeURIComponent(I)).length}function d(I,m,T){const v=[];let A;for(;(A=I.exec(T))!==null;)v.push({data:A[0],index:A.index,mode:m,length:A[0].length});return v}function p(I){const m=d(l.NUMERIC,e.NUMERIC,I),T=d(l.ALPHANUMERIC,e.ALPHANUMERIC,I);let v,A;return a.isKanjiModeEnabled()?(v=d(l.BYTE,e.BYTE,I),A=d(l.KANJI,e.KANJI,I)):(v=d(l.BYTE_KANJI,e.BYTE,I),A=[]),m.concat(T,v,A).sort(function(E,N){return E.index-N.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function h(I,m){switch(m){case e.NUMERIC:return t.getBitsLength(I);case e.ALPHANUMERIC:return s.getBitsLength(I);case e.KANJI:return i.getBitsLength(I);case e.BYTE:return r.getBitsLength(I)}}function b(I){return I.reduce(function(m,T){const v=m.length-1>=0?m[m.length-1]:null;return v&&v.mode===T.mode?(m[m.length-1].data+=T.data,m):(m.push(T),m)},[])}function g(I){const m=[];for(let T=0;T<I.length;T++){const v=I[T];switch(v.mode){case e.NUMERIC:m.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:m.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:m.push([v,{data:v.data,mode:e.BYTE,length:u(v.data)}]);break;case e.BYTE:m.push([{data:v.data,mode:e.BYTE,length:u(v.data)}])}}return m}function y(I,m){const T={},v={start:{}};let A=["start"];for(let S=0;S<I.length;S++){const E=I[S],N=[];for(let D=0;D<E.length;D++){const B=E[D],O=""+S+D;N.push(O),T[O]={node:B,lastCount:0},v[O]={};for(let F=0;F<A.length;F++){const L=A[F];T[L]&&T[L].node.mode===B.mode?(v[L][O]=h(T[L].lastCount+B.length,B.mode)-h(T[L].lastCount,B.mode),T[L].lastCount+=B.length):(T[L]&&(T[L].lastCount=B.length),v[L][O]=h(B.length,B.mode)+4+e.getCharCountIndicator(B.mode,m))}}A=N}for(let S=0;S<A.length;S++)v[A[S]].end=0;return{map:v,table:T}}function C(I,m){let T;const v=e.getBestModeForData(I);if(T=e.from(m,v),T!==e.BYTE&&T.bit<v.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(v));switch(T===e.KANJI&&!a.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(I);case e.ALPHANUMERIC:return new s(I);case e.KANJI:return new i(I);case e.BYTE:return new r(I)}}n.fromArray=function(m){return m.reduce(function(T,v){return typeof v=="string"?T.push(C(v,null)):v.data&&T.push(C(v.data,v.mode)),T},[])},n.fromString=function(m,T){const v=p(m,a.isKanjiModeEnabled()),A=g(v),S=y(A,T),E=o.find_path(S.map,"start","end"),N=[];for(let D=1;D<E.length-1;D++)N.push(S.table[E[D]].node);return n.fromArray(b(N))},n.rawSplit=function(m){return n.fromArray(p(m,a.isKanjiModeEnabled()))}})(dr)),dr}var ua;function Vh(){if(ua)return $s;ua=1;const n=Pn(),e=$r(),t=Sh(),s=Ih(),r=Dh(),i=Nh(),l=Rh(),a=sc(),o=Mh(),u=zh(),d=Fh(),p=On(),h=jh();function b(S,E){const N=S.size,D=i.getPositions(E);for(let B=0;B<D.length;B++){const O=D[B][0],F=D[B][1];for(let L=-1;L<=7;L++)if(!(O+L<=-1||N<=O+L))for(let U=-1;U<=7;U++)F+U<=-1||N<=F+U||(L>=0&&L<=6&&(U===0||U===6)||U>=0&&U<=6&&(L===0||L===6)||L>=2&&L<=4&&U>=2&&U<=4?S.set(O+L,F+U,!0,!0):S.set(O+L,F+U,!1,!0))}}function g(S){const E=S.size;for(let N=8;N<E-8;N++){const D=N%2===0;S.set(N,6,D,!0),S.set(6,N,D,!0)}}function y(S,E){const N=r.getPositions(E);for(let D=0;D<N.length;D++){const B=N[D][0],O=N[D][1];for(let F=-2;F<=2;F++)for(let L=-2;L<=2;L++)F===-2||F===2||L===-2||L===2||F===0&&L===0?S.set(B+F,O+L,!0,!0):S.set(B+F,O+L,!1,!0)}}function C(S,E){const N=S.size,D=u.getEncodedBits(E);let B,O,F;for(let L=0;L<18;L++)B=Math.floor(L/3),O=L%3+N-8-3,F=(D>>L&1)===1,S.set(B,O,F,!0),S.set(O,B,F,!0)}function I(S,E,N){const D=S.size,B=d.getEncodedBits(E,N);let O,F;for(O=0;O<15;O++)F=(B>>O&1)===1,O<6?S.set(O,8,F,!0):O<8?S.set(O+1,8,F,!0):S.set(D-15+O,8,F,!0),O<8?S.set(8,D-O-1,F,!0):O<9?S.set(8,15-O-1+1,F,!0):S.set(8,15-O-1,F,!0);S.set(D-8,8,1,!0)}function m(S,E){const N=S.size;let D=-1,B=N-1,O=7,F=0;for(let L=N-1;L>0;L-=2)for(L===6&&L--;;){for(let U=0;U<2;U++)if(!S.isReserved(B,L-U)){let P=!1;F<E.length&&(P=(E[F]>>>O&1)===1),S.set(B,L-U,P),O--,O===-1&&(F++,O=7)}if(B+=D,B<0||N<=B){B-=D,D=-D;break}}}function T(S,E,N){const D=new t;N.forEach(function(U){D.put(U.mode.bit,4),D.put(U.getLength(),p.getCharCountIndicator(U.mode,S)),U.write(D)});const B=n.getSymbolTotalCodewords(S),O=a.getTotalCodewordsCount(S,E),F=(B-O)*8;for(D.getLengthInBits()+4<=F&&D.put(0,4);D.getLengthInBits()%8!==0;)D.putBit(0);const L=(F-D.getLengthInBits())/8;for(let U=0;U<L;U++)D.put(U%2?17:236,8);return v(D,S,E)}function v(S,E,N){const D=n.getSymbolTotalCodewords(E),B=a.getTotalCodewordsCount(E,N),O=D-B,F=a.getBlocksCount(E,N),L=D%F,U=F-L,P=Math.floor(D/F),q=Math.floor(O/F),Y=q+1,x=P-q,K=new o(x);let H=0;const W=new Array(F),$=new Array(F);let ne=0;const le=new Uint8Array(S.buffer);for(let oe=0;oe<F;oe++){const ke=oe<U?q:Y;W[oe]=le.slice(H,H+ke),$[oe]=K.encode(W[oe]),H+=ke,ne=Math.max(ne,ke)}const se=new Uint8Array(D);let de=0,re,ee;for(re=0;re<ne;re++)for(ee=0;ee<F;ee++)re<W[ee].length&&(se[de++]=W[ee][re]);for(re=0;re<x;re++)for(ee=0;ee<F;ee++)se[de++]=$[ee][re];return se}function A(S,E,N,D){let B;if(Array.isArray(S))B=h.fromArray(S);else if(typeof S=="string"){let P=E;if(!P){const q=h.rawSplit(S);P=u.getBestVersionForData(q,N)}B=h.fromString(S,P||40)}else throw new Error("Invalid data");const O=u.getBestVersionForData(B,N);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=O;else if(E<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const F=T(E,N,B),L=n.getSymbolSize(E),U=new s(L);return b(U,E),g(U),y(U,E),I(U,N,0),E>=7&&C(U,E),m(U,F),isNaN(D)&&(D=l.getBestMask(U,I.bind(null,U,N))),l.applyMask(D,U),I(U,N,D),{modules:U,version:E,errorCorrectionLevel:N,maskPattern:D,segments:B}}return $s.create=function(E,N){if(typeof E>"u"||E==="")throw new Error("No input text");let D=e.M,B,O;return typeof N<"u"&&(D=e.from(N.errorCorrectionLevel,e.M),B=u.from(N.version),O=l.from(N.maskPattern),N.toSJISFunc&&n.setToSJISFunction(N.toSJISFunc)),A(E,B,D,O)},$s}var _r={},br={},fa;function lc(){return fa||(fa=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(i){return[i,i]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,i=s.width&&s.width>=21?s.width:void 0,l=s.scale||4;return{width:i,scale:i?4:l,margin:r,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},n.getImageWidth=function(s,r){const i=n.getScale(s,r);return Math.floor((s+r.margin*2)*i)},n.qrToImageData=function(s,r,i){const l=r.modules.size,a=r.modules.data,o=n.getScale(l,i),u=Math.floor((l+i.margin*2)*o),d=i.margin*o,p=[i.color.light,i.color.dark];for(let h=0;h<u;h++)for(let b=0;b<u;b++){let g=(h*u+b)*4,y=i.color.light;if(h>=d&&b>=d&&h<u-d&&b<u-d){const C=Math.floor((h-d)/o),I=Math.floor((b-d)/o);y=p[a[C*l+I]?1:0]}s[g++]=y.r,s[g++]=y.g,s[g++]=y.b,s[g]=y.a}}})(br)),br}var da;function Hh(){return da||(da=1,(function(n){const e=lc();function t(r,i,l){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,l,a){let o=a,u=l;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),l||(u=s()),o=e.getOptions(o);const d=e.getImageWidth(i.modules.size,o),p=u.getContext("2d"),h=p.createImageData(d,d);return e.qrToImageData(h.data,i,o),t(p,u,d),p.putImageData(h,0,0),u},n.renderToDataURL=function(i,l,a){let o=a;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),o||(o={});const u=n.render(i,l,o),d=o.type||"image/png",p=o.rendererOpts||{};return u.toDataURL(d,p.quality)}})(_r)),_r}var kr={},ha;function Gh(){if(ha)return kr;ha=1;const n=lc();function e(r,i){const l=r.a/255,a=i+'="'+r.hex+'"';return l<1?a+" "+i+'-opacity="'+l.toFixed(2).slice(1)+'"':a}function t(r,i,l){let a=r+i;return typeof l<"u"&&(a+=" "+l),a}function s(r,i,l){let a="",o=0,u=!1,d=0;for(let p=0;p<r.length;p++){const h=Math.floor(p%i),b=Math.floor(p/i);!h&&!u&&(u=!0),r[p]?(d++,p>0&&h>0&&r[p-1]||(a+=u?t("M",h+l,.5+b+l):t("m",o,0),o=0,u=!1),h+1<i&&r[p+1]||(a+=t("h",d),d=0)):o++}return a}return kr.render=function(i,l,a){const o=n.getOptions(l),u=i.modules.size,d=i.modules.data,p=u+o.margin*2,h=o.color.light.a?"<path "+e(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",b="<path "+e(o.color.dark,"stroke")+' d="'+s(d,u,o.margin)+'"/>',g='viewBox="0 0 '+p+" "+p+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+g+' shape-rendering="crispEdges">'+h+b+`</svg>
`;return typeof a=="function"&&a(null,C),C},kr}var pa;function Wh(){if(pa)return Ln;pa=1;const n=Ch(),e=Vh(),t=Hh(),s=Gh();function r(i,l,a,o,u){const d=[].slice.call(arguments,1),p=d.length,h=typeof d[p-1]=="function";if(!h&&!n())throw new Error("Callback required as last argument");if(h){if(p<2)throw new Error("Too few arguments provided");p===2?(u=a,a=l,l=o=void 0):p===3&&(l.getContext&&typeof u>"u"?(u=o,o=void 0):(u=o,o=a,a=l,l=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(a=l,l=o=void 0):p===2&&!l.getContext&&(o=a,a=l,l=void 0),new Promise(function(b,g){try{const y=e.create(a,o);b(i(y,l,o))}catch(y){g(y)}})}try{const b=e.create(a,o);u(null,i(b,l,o))}catch(b){u(b)}}return Ln.create=e.create,Ln.toCanvas=r.bind(null,t.render),Ln.toDataURL=r.bind(null,t.renderToDataURL),Ln.toString=r.bind(null,function(i,l,a){return s.render(i,a)}),Ln}var Yh=Wh();const Kh=Vo(Yh);function ga(n){let e,t,s,r="Join This Wabi House",i,l,a,o,u,d,p,h,b,g,y,C="Regenerate",I,m,T="Close",v,A;return{c(){e=w("div"),t=w("div"),s=w("h2"),s.textContent=r,i=z(),l=w("canvas"),a=z(),o=w("p"),u=J(n[4]),d=z(),p=w("div"),h=w("input"),b=z(),g=w("div"),y=w("button"),y.textContent=C,I=z(),m=w("button"),m.textContent=T,this.h()},l(S){e=k(S,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var E=R(e);t=k(E,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var N=R(t);s=k(N,"H2",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-147mrlj"&&(s.textContent=r),i=M(N),l=k(N,"CANVAS",{}),R(l).forEach(_),a=M(N),o=k(N,"P",{class:!0});var D=R(o);u=Z(D,n[4]),D.forEach(_),d=M(N),p=k(N,"DIV",{class:!0});var B=R(p);h=k(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(_),b=M(N),g=k(N,"DIV",{class:!0});var O=R(g);y=k(O,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-10gzc5i"&&(y.textContent=C),I=M(O),m=k(O,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-1muw4mw"&&(m.textContent=T),O.forEach(_),N.forEach(_),E.forEach(_),this.h()},h(){f(s,"class","svelte-13o88on"),f(o,"class","url svelte-13o88on"),f(h,"type","text"),f(h,"placeholder","Optional room name (e.g. kitchen)"),f(h,"class","svelte-13o88on"),f(p,"class","room-input svelte-13o88on"),f(y,"class","svelte-13o88on"),f(m,"class","svelte-13o88on"),f(g,"class","qr-actions svelte-13o88on"),f(t,"class","qr-modal svelte-13o88on"),f(t,"role","dialog"),f(t,"aria-modal","true"),f(t,"aria-label","QR code to join this Wabi house"),f(e,"class","qr-overlay svelte-13o88on"),f(e,"role","button"),f(e,"tabindex","0"),f(e,"aria-label","Close QR code modal")},m(S,E){V(S,e,E),c(e,t),c(t,s),c(t,i),c(t,l),n[10](l),c(t,a),c(t,o),c(o,u),c(t,d),c(t,p),c(p,h),it(h,n[3]),c(t,b),c(t,g),c(g,y),c(g,I),c(g,m),v||(A=[G(h,"input",n[11]),G(h,"input",n[12]),G(y,"click",n[6]),G(m,"click",n[13]),G(t,"click",nt(n[7])),G(t,"keydown",nt(n[8])),G(e,"click",n[14]),G(e,"keydown",n[15])],v=!0)},p(S,E){E&16&&ie(u,S[4]),E&8&&h.value!==S[3]&&it(h,S[3])},d(S){S&&_(e),n[10](null),v=!1,Ie(A)}}}function Xh(n){let e,t,s,r,i,l,a,o,u,d="Join the Fridge",p,h,b="Scan to Join This House",g,y,C,I=n[2]&&ga(n);return{c(){e=w("div"),t=w("div"),s=w("img"),i=z(),l=w("form"),a=w("input"),o=z(),u=w("button"),u.textContent=d,p=z(),h=w("button"),h.textContent=b,g=z(),I&&I.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var T=R(e);t=k(T,"DIV",{class:!0});var v=R(t);s=k(v,"IMG",{src:!0,alt:!0,class:!0}),i=M(v),l=k(v,"FORM",{});var A=R(l);a=k(A,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=M(A),u=k(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(u)!=="svelte-1jmevab"&&(u.textContent=d),A.forEach(_),p=M(v),h=k(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(h)!=="svelte-yn4djj"&&(h.textContent=b),v.forEach(_),g=M(T),I&&I.l(T),T.forEach(_),this.h()},h(){We(s.src,r="/wabi-logo.png")||f(s,"src",r),f(s,"alt","Wabi"),f(s,"class","logo svelte-13o88on"),f(a,"type","text"),f(a,"placeholder","Enter your name"),f(a,"maxlength","20"),a.required=!0,a.autofocus=!0,f(a,"class","svelte-13o88on"),f(u,"type","submit"),f(u,"class","join-btn svelte-13o88on"),f(h,"type","button"),f(h,"class","qr-btn svelte-13o88on"),f(t,"class","login-box svelte-13o88on"),f(e,"class","login-container svelte-13o88on")},m(m,T){V(m,e,T),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),it(a,n[0]),c(l,o),c(l,u),c(t,p),c(t,h),c(e,g),I&&I.m(e,null),a.focus(),y||(C=[G(a,"input",n[9]),G(l,"submit",uc(n[5])),G(h,"click",n[6])],y=!0)},p(m,[T]){T&1&&a.value!==m[0]&&it(a,m[0]),m[2]?I?I.p(m,T):(I=ga(m),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i:ze,o:ze,d(m){m&&_(e),I&&I.d(),y=!1,Ie(C)}}}function Zh(n,e,t){let s;const r=Or();let i="",l,a=!1,o="";function u(){i.trim()&&(localStorage.setItem("wabi-username",i.trim()),r("login",i.trim()))}function d(){t(2,a=!0),setTimeout(()=>{const v=o.trim()?`${s}?room=${encodeURIComponent(o.trim())}`:s;Kh.toCanvas(l,v,{width:300,margin:2,color:{dark:"#ffffff",light:"#00000000"}})},50)}function p(v){Vt.call(this,n,v)}function h(v){Vt.call(this,n,v)}function b(){i=this.value,t(0,i)}function g(v){tt[v?"unshift":"push"](()=>{l=v,t(1,l)})}function y(){o=this.value,t(3,o)}const C=()=>setTimeout(d,300),I=()=>t(2,a=!1),m=()=>t(2,a=!1),T=v=>(v.key==="Escape"||v.key===" ")&&t(2,a=!1);return t(4,s=typeof window<"u"?`${window.location.origin}./`:""),[i,l,a,o,s,u,d,p,h,b,g,y,C,I,m,T]}class Jh extends dt{constructor(e){super(),ht(this,e,Zh,Xh,ft,{})}}function ma(n,e,t){const s=n.slice();return s[27]=e[t],s}function va(n){let e,t,s,r="Total Messages",i,l,a=n[3].totalMessages.toLocaleString()+"",o,u,d,p,h="Storage Used",b,g,y=Ds(n[3].totalSize)+"",C,I,m,T,v="Archives",A,S,E=n[3].archives.length+"",N,D,B,O,F,L="Rotation Period",U,P,q,Y="Weekly",x,K="Monthly",H,W="Every 6 Months",$,ne="Yearly",le,se,de="How often to create a new archive file (like changing batteries)",re,ee,oe,ke,Te="Keep Last",Ue,_e,ae,be,ve,pe="archives",Q,ue,Ee="Older archives are automatically deleted to save space",qe,Re,Ce,xe,Oe="ðŸ—‘ï¸ Clear All History",ot,st;function mt(we,Fe){return we[3].archives.length>0?$h:Qh}let Dt=mt(n),fe=Dt(n);return{c(){e=w("div"),t=w("div"),s=w("div"),s.textContent=r,i=z(),l=w("div"),o=J(a),u=z(),d=w("div"),p=w("div"),p.textContent=h,b=z(),g=w("div"),C=J(y),I=z(),m=w("div"),T=w("div"),T.textContent=v,A=z(),S=w("div"),N=J(E),D=z(),B=w("div"),O=w("label"),F=w("span"),F.textContent=L,U=z(),P=w("select"),q=w("option"),q.textContent=Y,x=w("option"),x.textContent=K,H=w("option"),H.textContent=W,$=w("option"),$.textContent=ne,le=z(),se=w("p"),se.textContent=de,re=z(),ee=w("div"),oe=w("label"),ke=w("span"),ke.textContent=Te,Ue=z(),_e=w("div"),ae=w("input"),be=z(),ve=w("span"),ve.textContent=pe,Q=z(),ue=w("p"),ue.textContent=Ee,qe=z(),fe.c(),Re=z(),Ce=w("div"),xe=w("button"),xe.textContent=Oe,this.h()},l(we){e=k(we,"DIV",{class:!0});var Fe=R(e);t=k(Fe,"DIV",{class:!0});var Nt=R(t);s=k(Nt,"DIV",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-akn32o"&&(s.textContent=r),i=M(Nt),l=k(Nt,"DIV",{class:!0});var Ft=R(l);o=Z(Ft,a),Ft.forEach(_),Nt.forEach(_),u=M(Fe),d=k(Fe,"DIV",{class:!0});var te=R(d);p=k(te,"DIV",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-5vlbe4"&&(p.textContent=h),b=M(te),g=k(te,"DIV",{class:!0});var ye=R(g);C=Z(ye,y),ye.forEach(_),te.forEach(_),I=M(Fe),m=k(Fe,"DIV",{class:!0});var kt=R(m);T=k(kt,"DIV",{class:!0,"data-svelte-h":!0}),X(T)!=="svelte-1e1df45"&&(T.textContent=v),A=M(kt),S=k(kt,"DIV",{class:!0});var pt=R(S);N=Z(pt,E),pt.forEach(_),kt.forEach(_),Fe.forEach(_),D=M(we),B=k(we,"DIV",{class:!0});var $e=R(B);O=k($e,"LABEL",{class:!0});var Bt=R(O);F=k(Bt,"SPAN",{class:!0,"data-svelte-h":!0}),X(F)!=="svelte-608xyy"&&(F.textContent=L),U=M(Bt),P=k(Bt,"SELECT",{class:!0});var gt=R(P);q=k(gt,"OPTION",{"data-svelte-h":!0}),X(q)!=="svelte-crm6lv"&&(q.textContent=Y),x=k(gt,"OPTION",{"data-svelte-h":!0}),X(x)!=="svelte-hva46z"&&(x.textContent=K),H=k(gt,"OPTION",{"data-svelte-h":!0}),X(H)!=="svelte-1s0lvql"&&(H.textContent=W),$=k(gt,"OPTION",{"data-svelte-h":!0}),X($)!=="svelte-jp5v27"&&($.textContent=ne),gt.forEach(_),Bt.forEach(_),le=M($e),se=k($e,"P",{class:!0,"data-svelte-h":!0}),X(se)!=="svelte-qu5pay"&&(se.textContent=de),$e.forEach(_),re=M(we),ee=k(we,"DIV",{class:!0});var on=R(ee);oe=k(on,"LABEL",{class:!0});var Qe=R(oe);ke=k(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),X(ke)!=="svelte-1im50qe"&&(ke.textContent=Te),Ue=M(Qe),_e=k(Qe,"DIV",{class:!0});var $t=R(_e);ae=k($t,"INPUT",{type:!0,min:!0,max:!0,class:!0}),be=M($t),ve=k($t,"SPAN",{class:!0,"data-svelte-h":!0}),X(ve)!=="svelte-nj3imy"&&(ve.textContent=pe),$t.forEach(_),Qe.forEach(_),Q=M(on),ue=k(on,"P",{class:!0,"data-svelte-h":!0}),X(ue)!=="svelte-he359b"&&(ue.textContent=Ee),on.forEach(_),qe=M(we),fe.l(we),Re=M(we),Ce=k(we,"DIV",{class:!0});var _n=R(Ce);xe=k(_n,"BUTTON",{class:!0,"data-svelte-h":!0}),X(xe)!=="svelte-1u0bcm7"&&(xe.textContent=Oe),_n.forEach(_),this.h()},h(){f(s,"class","stat-label svelte-1jfalu6"),f(l,"class","stat-value svelte-1jfalu6"),f(t,"class","stat svelte-1jfalu6"),f(p,"class","stat-label svelte-1jfalu6"),f(g,"class","stat-value svelte-1jfalu6"),f(d,"class","stat svelte-1jfalu6"),f(T,"class","stat-label svelte-1jfalu6"),f(S,"class","stat-value svelte-1jfalu6"),f(m,"class","stat svelte-1jfalu6"),f(e,"class","stats-panel svelte-1jfalu6"),f(F,"class","label svelte-1jfalu6"),q.__value="week",it(q,q.__value),x.__value="month",it(x,x.__value),H.__value="half-year",it(H,H.__value),$.__value="year",it($,$.__value),f(P,"class","svelte-1jfalu6"),n[1]===void 0&&fc(()=>n[20].call(P)),f(O,"class","svelte-1jfalu6"),f(se,"class","hint svelte-1jfalu6"),f(B,"class","setting-group svelte-1jfalu6"),f(ke,"class","label svelte-1jfalu6"),f(ae,"type","number"),f(ae,"min","1"),f(ae,"max","52"),f(ae,"class","svelte-1jfalu6"),f(ve,"class","unit svelte-1jfalu6"),f(_e,"class","number-input-group svelte-1jfalu6"),f(oe,"class","svelte-1jfalu6"),f(ue,"class","hint svelte-1jfalu6"),f(ee,"class","setting-group svelte-1jfalu6"),f(xe,"class","btn-danger svelte-1jfalu6"),f(Ce,"class","actions svelte-1jfalu6")},m(we,Fe){V(we,e,Fe),c(e,t),c(t,s),c(t,i),c(t,l),c(l,o),c(e,u),c(e,d),c(d,p),c(d,b),c(d,g),c(g,C),c(e,I),c(e,m),c(m,T),c(m,A),c(m,S),c(S,N),V(we,D,Fe),V(we,B,Fe),c(B,O),c(O,F),c(O,U),c(O,P),c(P,q),c(P,x),c(P,H),c(P,$),ri(P,n[1],!0),c(B,le),c(B,se),V(we,re,Fe),V(we,ee,Fe),c(ee,oe),c(oe,ke),c(oe,Ue),c(oe,_e),c(_e,ae),it(ae,n[2]),c(_e,be),c(_e,ve),c(ee,Q),c(ee,ue),V(we,qe,Fe),fe.m(we,Fe),V(we,Re,Fe),V(we,Ce,Fe),c(Ce,xe),ot||(st=[G(P,"change",n[20]),G(P,"change",n[11]),G(ae,"input",n[21]),G(ae,"change",n[12]),G(xe,"click",n[17])],ot=!0)},p(we,Fe){Fe&8&&a!==(a=we[3].totalMessages.toLocaleString()+"")&&ie(o,a),Fe&8&&y!==(y=Ds(we[3].totalSize)+"")&&ie(C,y),Fe&8&&E!==(E=we[3].archives.length+"")&&ie(N,E),Fe&2&&ri(P,we[1]),Fe&4&&go(ae.value)!==we[2]&&it(ae,we[2]),Dt===(Dt=mt(we))&&fe?fe.p(we,Fe):(fe.d(1),fe=Dt(we),fe&&(fe.c(),fe.m(Re.parentNode,Re)))},d(we){we&&(_(e),_(D),_(B),_(re),_(ee),_(qe),_(Re),_(Ce)),fe.d(we),ot=!1,Ie(st)}}}function Qh(n){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1jfalu6")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function $h(n){let e,t,s,r="Archive History",i,l,a="ðŸ“¦ Export All",o,u,d,p,h=Ye(n[3].archives),b=[];for(let g=0;g<h.length;g+=1)b[g]=_a(ma(n,h,g));return{c(){e=w("div"),t=w("div"),s=w("h4"),s.textContent=r,i=z(),l=w("button"),l.textContent=a,o=z(),u=w("div");for(let g=0;g<b.length;g+=1)b[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"DIV",{class:!0});var C=R(t);s=k(C,"H4",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1i91zrs"&&(s.textContent=r),i=M(C),l=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-197zvis"&&(l.textContent=a),C.forEach(_),o=M(y),u=k(y,"DIV",{class:!0});var I=R(u);for(let m=0;m<b.length;m+=1)b[m].l(I);I.forEach(_),y.forEach(_),this.h()},h(){f(s,"class","svelte-1jfalu6"),f(l,"class","btn-small svelte-1jfalu6"),f(t,"class","section-header svelte-1jfalu6"),f(u,"class","archive-list svelte-1jfalu6"),f(e,"class","archives-section svelte-1jfalu6")},m(g,y){V(g,e,y),c(e,t),c(t,s),c(t,i),c(t,l),c(e,o),c(e,u);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(u,null);d||(p=G(l,"click",n[16]),d=!0)},p(g,y){if(y&40968){h=Ye(g[3].archives);let C;for(C=0;C<h.length;C+=1){const I=ma(g,h,C);b[C]?b[C].p(I,y):(b[C]=_a(I),b[C].c(),b[C].m(u,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=h.length}},d(g){g&&_(e),Rs(b,g),d=!1,p()}}}function _a(n){let e,t,s,r=Ns(n[27].period)+"",i,l,a,o=Ds(n[27].size)+"",u,d,p=n[27].messageCount.toLocaleString()+"",h,b,g,y,C,I="ðŸ’¾",m,T,v="ðŸ—‘ï¸",A,S,E;function N(){return n[22](n[27])}function D(){return n[23](n[27])}return{c(){e=w("div"),t=w("div"),s=w("span"),i=J(r),l=z(),a=w("span"),u=J(o),d=J(" â€¢ "),h=J(p),b=J(" messages"),g=z(),y=w("div"),C=w("button"),C.textContent=I,m=z(),T=w("button"),T.textContent=v,A=z(),this.h()},l(B){e=k(B,"DIV",{class:!0});var O=R(e);t=k(O,"DIV",{class:!0});var F=R(t);s=k(F,"SPAN",{class:!0});var L=R(s);i=Z(L,r),L.forEach(_),l=M(F),a=k(F,"SPAN",{class:!0});var U=R(a);u=Z(U,o),d=Z(U," â€¢ "),h=Z(U,p),b=Z(U," messages"),U.forEach(_),F.forEach(_),g=M(O),y=k(O,"DIV",{class:!0});var P=R(y);C=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(C)!=="svelte-13e8aja"&&(C.textContent=I),m=M(P),T=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(T)!=="svelte-1br206h"&&(T.textContent=v),P.forEach(_),A=M(O),O.forEach(_),this.h()},h(){f(s,"class","archive-period svelte-1jfalu6"),f(a,"class","archive-meta svelte-1jfalu6"),f(t,"class","archive-info svelte-1jfalu6"),f(C,"class","btn-icon svelte-1jfalu6"),f(C,"title","Export"),f(T,"class","btn-icon danger svelte-1jfalu6"),f(T,"title","Delete"),f(y,"class","archive-actions svelte-1jfalu6"),f(e,"class","archive-item svelte-1jfalu6")},m(B,O){V(B,e,O),c(e,t),c(t,s),c(s,i),c(t,l),c(t,a),c(a,u),c(a,d),c(a,h),c(a,b),c(e,g),c(e,y),c(y,C),c(y,m),c(y,T),c(e,A),S||(E=[G(C,"click",N),G(T,"click",D)],S=!0)},p(B,O){n=B,O&8&&r!==(r=Ns(n[27].period)+"")&&ie(i,r),O&8&&o!==(o=Ds(n[27].size)+"")&&ie(u,o),O&8&&p!==(p=n[27].messageCount.toLocaleString()+"")&&ie(h,p)},d(B){B&&_(e),S=!1,Ie(E)}}}function ep(n){let e,t,s='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,l,a,o,u,d="Save chat history locally",p,h,b="When enabled, messages are stored in your browser. You control your data.",g,y,C,I,m,T,v,A,S,E,N=n[0]&&va(n);return C=new Sn({props:{isOpen:n[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:n[9],onCancel:n[10]}}),m=new Sn({props:{isOpen:n[5],title:"Delete Archive",message:`Delete archive "${Ns(n[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:n[14],onCancel:n[24]}}),v=new Sn({props:{isOpen:n[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[18],onCancel:n[25]}}),{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("div"),l=w("label"),a=w("input"),o=z(),u=w("span"),u.textContent=d,p=z(),h=w("p"),h.textContent=b,g=z(),N&&N.c(),y=z(),Je(C.$$.fragment),I=z(),Je(m.$$.fragment),T=z(),Je(v.$$.fragment),this.h()},l(D){e=k(D,"DIV",{class:!0});var B=R(e);t=k(B,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-s9o5r3"&&(t.innerHTML=s),r=M(B),i=k(B,"DIV",{class:!0});var O=R(i);l=k(O,"LABEL",{class:!0});var F=R(l);a=k(F,"INPUT",{type:!0,class:!0}),o=M(F),u=k(F,"SPAN",{class:!0,"data-svelte-h":!0}),X(u)!=="svelte-1ssgcs1"&&(u.textContent=d),F.forEach(_),p=M(O),h=k(O,"P",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1hbmqvb"&&(h.textContent=b),O.forEach(_),g=M(B),N&&N.l(B),B.forEach(_),y=M(D),Ze(C.$$.fragment,D),I=M(D),Ze(m.$$.fragment,D),T=M(D),Ze(v.$$.fragment,D),this.h()},h(){f(t,"class","header svelte-1jfalu6"),f(a,"type","checkbox"),f(a,"class","svelte-1jfalu6"),f(u,"class","toggle-label"),f(l,"class","toggle-setting svelte-1jfalu6"),f(h,"class","hint svelte-1jfalu6"),f(i,"class","setting-group svelte-1jfalu6"),f(e,"class","storage-settings svelte-1jfalu6")},m(D,B){V(D,e,B),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),a.checked=n[0],c(l,o),c(l,u),c(i,p),c(i,h),c(e,g),N&&N.m(e,null),V(D,y,B),Xe(C,D,B),V(D,I,B),Xe(m,D,B),V(D,T,B),Xe(v,D,B),A=!0,S||(E=[G(a,"change",n[19]),G(a,"change",n[8])],S=!0)},p(D,[B]){B&1&&(a.checked=D[0]),D[0]?N?N.p(D,B):(N=va(D),N.c(),N.m(e,null)):N&&(N.d(1),N=null);const O={};B&16&&(O.isOpen=D[4]),C.$set(O);const F={};B&32&&(F.isOpen=D[5]),B&64&&(F.message=`Delete archive "${Ns(D[6])}"?`),B&32&&(F.onCancel=D[24]),m.$set(F);const L={};B&128&&(L.isOpen=D[7]),B&128&&(L.onCancel=D[25]),v.$set(L)},i(D){A||(Ae(C.$$.fragment,D),Ae(m.$$.fragment,D),Ae(v.$$.fragment,D),A=!0)},o(D){Me(C.$$.fragment,D),Me(m.$$.fragment,D),Me(v.$$.fragment,D),A=!1},d(D){D&&(_(e),_(y),_(I),_(T)),N&&N.d(),Ke(C,D),Ke(m,D),Ke(v,D),S=!1,Ie(E)}}}function Ds(n){if(n===0)return"0 B";const e=n/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}function Ns(n){if(n.includes("-W")){const[e,t]=n.split("-W");return`Week ${t}, ${e}`}else if(n.includes("-H")){const[e,t]=n.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(n.match(/^\d{4}-\d{2}$/)){const[e,t]=n.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${n}`}function tp(n,e,t){let s=!1,r=Lt.getRotationPeriod(),i=Lt.getMaxArchives(),l={archives:[],totalSize:0,totalMessages:0},a=!1,o=!1,u="",d=!1;async function p(){t(0,s=!s),await Lt.setEnabled(s),s?await S():t(4,a=!0)}async function h(){t(4,a=!1),await S()}function b(){t(0,s=!0),Lt.setEnabled(!0),t(4,a=!1)}async function g(){await Lt.setRotationPeriod(r),await S()}async function y(){await Lt.setMaxArchives(i),await S()}async function C(U){t(6,u=U),t(5,o=!0)}async function I(){await Lt.deleteArchive(u),await S(),t(5,o=!1)}async function m(U){await Lt.exportArchive(U)}async function T(){await Lt.exportArchives()}async function v(){t(7,d=!0)}async function A(){await Lt.clearAllHistory(),await S(),t(7,d=!1)}async function S(){t(3,l=await Lt.getStats())}function E(){s=this.checked,t(0,s)}function N(){r=dc(this),t(1,r)}function D(){i=go(this.value),t(2,i)}return[s,r,i,l,a,o,u,d,p,h,b,g,y,C,I,m,T,v,A,E,N,D,U=>m(U.period),U=>C(U.period),()=>t(5,o=!1),()=>t(7,d=!1)]}class np extends dt{constructor(e){super(),ht(this,e,tp,ep,ft,{})}}function ba(n){let e,t,s,r,i="âš™ï¸ Settings",l,a,o="âœ•",u,d,p,h,b="ðŸŽ¤ Audio & Video",g,y,C,I='<span class="setting-label svelte-1l9ajc2">Sound Effects</span> <span class="setting-description svelte-1l9ajc2">Play sounds for messages and notifications</span>',m,T,v=n[1]?"ðŸ”Š":"ðŸ”‡",A,S,E,N,D='<span class="setting-label svelte-1l9ajc2">Microphone</span> <span class="setting-description svelte-1l9ajc2">Enable microphone for voice calls</span>',B,O,F=n[3]?"ðŸŽ¤":"ðŸ”‡",L,U,P,q,Y='<span class="setting-label svelte-1l9ajc2">Camera</span> <span class="setting-description svelte-1l9ajc2">Enable camera for video calls</span>',x,K,H=n[4]?"ðŸ“¹":"ðŸ“·",W,$,ne,le,se="ðŸ”” Notifications",de,re,ee,oe='<span class="setting-label svelte-1l9ajc2">Desktop Notifications</span> <span class="setting-description svelte-1l9ajc2">Get notified when you receive new messages</span>',ke,Te,Ue=n[2]?"âœ… Enabled":"ðŸ”” Enable",_e,ae,be,ve,pe="ðŸŽ¨ Appearance",Q,ue,Ee,qe='<span class="setting-label svelte-1l9ajc2">Theme</span> <span class="setting-description svelte-1l9ajc2">Switch between light and dark mode</span>',Re,Ce,xe=n[5]==="dark"?"ðŸŒ™":"â˜€ï¸",Oe,ot,st,mt,Dt="ðŸ–¥ï¸ Server Management",fe,we,Fe,Nt='<span class="setting-label svelte-1l9ajc2">Clear All Server Messages</span> <span class="setting-description svelte-1l9ajc2">Delete all messages from the server for all users (cannot be undone)</span>',Ft,te,ye="ðŸ—‘ï¸ Clear Server",kt,pt,$e,Bt,gt,on='<h3 class="svelte-1l9ajc2">â„¹ï¸ About</h3> <div class="about-info svelte-1l9ajc2"><p class="svelte-1l9ajc2"><strong class="svelte-1l9ajc2">Wabi Chat</strong></p> <p class="svelte-1l9ajc2">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-1l9ajc2">Server stores nothing permanently. You control your data.</p> <p class="version svelte-1l9ajc2">Version 1.0.0</p></div>',Qe,$t,_n;return $e=new np({}),{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("div"),h=w("h3"),h.textContent=b,g=z(),y=w("div"),C=w("div"),C.innerHTML=I,m=z(),T=w("button"),A=J(v),S=z(),E=w("div"),N=w("div"),N.innerHTML=D,B=z(),O=w("button"),L=J(F),U=z(),P=w("div"),q=w("div"),q.innerHTML=Y,x=z(),K=w("button"),W=J(H),$=z(),ne=w("div"),le=w("h3"),le.textContent=se,de=z(),re=w("div"),ee=w("div"),ee.innerHTML=oe,ke=z(),Te=w("button"),_e=J(Ue),ae=z(),be=w("div"),ve=w("h3"),ve.textContent=pe,Q=z(),ue=w("div"),Ee=w("div"),Ee.innerHTML=qe,Re=z(),Ce=w("button"),Oe=J(xe),ot=z(),st=w("div"),mt=w("h3"),mt.textContent=Dt,fe=z(),we=w("div"),Fe=w("div"),Fe.innerHTML=Nt,Ft=z(),te=w("button"),te.textContent=ye,kt=z(),pt=w("div"),Je($e.$$.fragment),Bt=z(),gt=w("div"),gt.innerHTML=on,this.h()},l(Pe){e=k(Pe,"DIV",{class:!0});var rt=R(e);t=k(rt,"DIV",{class:!0});var Mn=R(t);s=k(Mn,"DIV",{class:!0});var bn=R(s);r=k(bn,"H2",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-15bbpfh"&&(r.textContent=i),l=M(bn),a=k(bn,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-3o141q"&&(a.textContent=o),bn.forEach(_),u=M(Mn),d=k(Mn,"DIV",{class:!0});var wt=R(d);p=k(wt,"DIV",{class:!0});var Gt=R(p);h=k(Gt,"H3",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1tdb4hv"&&(h.textContent=b),g=M(Gt),y=k(Gt,"DIV",{class:!0});var kn=R(y);C=k(kn,"DIV",{class:!0,"data-svelte-h":!0}),X(C)!=="svelte-5e193f"&&(C.innerHTML=I),m=M(kn),T=k(kn,"BUTTON",{class:!0});var us=R(T);A=Z(us,v),us.forEach(_),kn.forEach(_),S=M(Gt),E=k(Gt,"DIV",{class:!0});var Et=R(E);N=k(Et,"DIV",{class:!0,"data-svelte-h":!0}),X(N)!=="svelte-ql0oob"&&(N.innerHTML=D),B=M(Et),O=k(Et,"BUTTON",{class:!0});var en=R(O);L=Z(en,F),en.forEach(_),Et.forEach(_),U=M(Gt),P=k(Gt,"DIV",{class:!0});var wn=R(P);q=k(wn,"DIV",{class:!0,"data-svelte-h":!0}),X(q)!=="svelte-fu2kxq"&&(q.innerHTML=Y),x=M(wn),K=k(wn,"BUTTON",{class:!0});var Hn=R(K);W=Z(Hn,H),Hn.forEach(_),wn.forEach(_),Gt.forEach(_),$=M(wt),ne=k(wt,"DIV",{class:!0});var hn=R(ne);le=k(hn,"H3",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-yb4801"&&(le.textContent=se),de=M(hn),re=k(hn,"DIV",{class:!0});var yn=R(re);ee=k(yn,"DIV",{class:!0,"data-svelte-h":!0}),X(ee)!=="svelte-11j8eba"&&(ee.innerHTML=oe),ke=M(yn),Te=k(yn,"BUTTON",{class:!0});var Ut=R(Te);_e=Z(Ut,Ue),Ut.forEach(_),yn.forEach(_),hn.forEach(_),ae=M(wt),be=k(wt,"DIV",{class:!0});var En=R(be);ve=k(En,"H3",{class:!0,"data-svelte-h":!0}),X(ve)!=="svelte-bdq4j0"&&(ve.textContent=pe),Q=M(En),ue=k(En,"DIV",{class:!0});var Tn=R(ue);Ee=k(Tn,"DIV",{class:!0,"data-svelte-h":!0}),X(Ee)!=="svelte-1expsbb"&&(Ee.innerHTML=qe),Re=M(Tn),Ce=k(Tn,"BUTTON",{class:!0});var Gn=R(Ce);Oe=Z(Gn,xe),Gn.forEach(_),Tn.forEach(_),En.forEach(_),ot=M(wt),st=k(wt,"DIV",{class:!0});var An=R(st);mt=k(An,"H3",{class:!0,"data-svelte-h":!0}),X(mt)!=="svelte-13bxj89"&&(mt.textContent=Dt),fe=M(An),we=k(An,"DIV",{class:!0});var zn=R(we);Fe=k(zn,"DIV",{class:!0,"data-svelte-h":!0}),X(Fe)!=="svelte-1kywvm7"&&(Fe.innerHTML=Nt),Ft=M(zn),te=k(zn,"BUTTON",{class:!0,"data-svelte-h":!0}),X(te)!=="svelte-uzfcg3"&&(te.textContent=ye),zn.forEach(_),An.forEach(_),kt=M(wt),pt=k(wt,"DIV",{class:!0});var me=R(pt);Ze($e.$$.fragment,me),me.forEach(_),Bt=M(wt),gt=k(wt,"DIV",{class:!0,"data-svelte-h":!0}),X(gt)!=="svelte-137zy12"&&(gt.innerHTML=on),wt.forEach(_),Mn.forEach(_),rt.forEach(_),this.h()},h(){f(r,"class","svelte-1l9ajc2"),f(a,"class","close-btn svelte-1l9ajc2"),f(s,"class","modal-header svelte-1l9ajc2"),f(h,"class","svelte-1l9ajc2"),f(C,"class","setting-info svelte-1l9ajc2"),f(T,"class","toggle-btn svelte-1l9ajc2"),he(T,"active",n[1]),f(y,"class","setting-item svelte-1l9ajc2"),f(N,"class","setting-info svelte-1l9ajc2"),f(O,"class","toggle-btn svelte-1l9ajc2"),he(O,"active",n[3]),f(E,"class","setting-item svelte-1l9ajc2"),f(q,"class","setting-info svelte-1l9ajc2"),f(K,"class","toggle-btn svelte-1l9ajc2"),he(K,"active",n[4]),f(P,"class","setting-item svelte-1l9ajc2"),f(p,"class","settings-section svelte-1l9ajc2"),f(le,"class","svelte-1l9ajc2"),f(ee,"class","setting-info svelte-1l9ajc2"),f(Te,"class","action-btn svelte-1l9ajc2"),he(Te,"active",n[2]),f(re,"class","setting-item svelte-1l9ajc2"),f(ne,"class","settings-section svelte-1l9ajc2"),f(ve,"class","svelte-1l9ajc2"),f(Ee,"class","setting-info svelte-1l9ajc2"),f(Ce,"class","toggle-btn svelte-1l9ajc2"),he(Ce,"active",n[5]==="light"),f(ue,"class","setting-item svelte-1l9ajc2"),f(be,"class","settings-section svelte-1l9ajc2"),f(mt,"class","svelte-1l9ajc2"),f(Fe,"class","setting-info svelte-1l9ajc2"),f(te,"class","action-btn danger svelte-1l9ajc2"),f(we,"class","setting-item svelte-1l9ajc2"),f(st,"class","settings-section svelte-1l9ajc2"),f(pt,"class","settings-section svelte-1l9ajc2"),f(gt,"class","settings-section svelte-1l9ajc2"),f(d,"class","settings-sections svelte-1l9ajc2"),f(t,"class","modal-content svelte-1l9ajc2"),f(e,"class","modal-overlay svelte-1l9ajc2")},m(Pe,rt){V(Pe,e,rt),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(p,g),c(p,y),c(y,C),c(y,m),c(y,T),c(T,A),c(p,S),c(p,E),c(E,N),c(E,B),c(E,O),c(O,L),c(p,U),c(p,P),c(P,q),c(P,x),c(P,K),c(K,W),c(d,$),c(d,ne),c(ne,le),c(ne,de),c(ne,re),c(re,ee),c(re,ke),c(re,Te),c(Te,_e),c(d,ae),c(d,be),c(be,ve),c(be,Q),c(be,ue),c(ue,Ee),c(ue,Re),c(ue,Ce),c(Ce,Oe),c(d,ot),c(d,st),c(st,mt),c(st,fe),c(st,we),c(we,Fe),c(we,Ft),c(we,te),c(d,kt),c(d,pt),Xe($e,pt,null),c(d,Bt),c(d,gt),Qe=!0,$t||(_n=[G(a,"click",n[16]),G(T,"click",n[8]),G(O,"click",n[9]),G(K,"click",n[10]),G(Te,"click",n[12]),G(Ce,"click",n[11]),G(te,"click",n[14]),G(t,"click",nt(n[17])),G(e,"click",n[16])],$t=!0)},p(Pe,rt){(!Qe||rt&2)&&v!==(v=Pe[1]?"ðŸ”Š":"ðŸ”‡")&&ie(A,v),(!Qe||rt&2)&&he(T,"active",Pe[1]),(!Qe||rt&8)&&F!==(F=Pe[3]?"ðŸŽ¤":"ðŸ”‡")&&ie(L,F),(!Qe||rt&8)&&he(O,"active",Pe[3]),(!Qe||rt&16)&&H!==(H=Pe[4]?"ðŸ“¹":"ðŸ“·")&&ie(W,H),(!Qe||rt&16)&&he(K,"active",Pe[4]),(!Qe||rt&4)&&Ue!==(Ue=Pe[2]?"âœ… Enabled":"ðŸ”” Enable")&&ie(_e,Ue),(!Qe||rt&4)&&he(Te,"active",Pe[2]),(!Qe||rt&32)&&xe!==(xe=Pe[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&ie(Oe,xe),(!Qe||rt&32)&&he(Ce,"active",Pe[5]==="light")},i(Pe){Qe||(Ae($e.$$.fragment,Pe),Qe=!0)},o(Pe){Me($e.$$.fragment,Pe),Qe=!1},d(Pe){Pe&&_(e),Ke($e),$t=!1,Ie(_n)}}}function sp(n){let e,t,s,r,i,l=n[0]&&ba(n);return t=new Sn({props:{isOpen:n[6],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:n[13],onCancel:n[18]}}),r=new Sn({props:{isOpen:n[7],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[15],onCancel:n[19]}}),{c(){l&&l.c(),e=z(),Je(t.$$.fragment),s=z(),Je(r.$$.fragment)},l(a){l&&l.l(a),e=M(a),Ze(t.$$.fragment,a),s=M(a),Ze(r.$$.fragment,a)},m(a,o){l&&l.m(a,o),V(a,e,o),Xe(t,a,o),V(a,s,o),Xe(r,a,o),i=!0},p(a,[o]){a[0]?l?(l.p(a,o),o&1&&Ae(l,1)):(l=ba(a),l.c(),Ae(l,1),l.m(e.parentNode,e)):l&&(qn(),Me(l,1,1,()=>{l=null}),xn());const u={};o&64&&(u.isOpen=a[6]),o&64&&(u.onCancel=a[18]),t.$set(u);const d={};o&128&&(d.isOpen=a[7]),o&128&&(d.onCancel=a[19]),r.$set(d)},i(a){i||(Ae(l),Ae(t.$$.fragment,a),Ae(r.$$.fragment,a),i=!0)},o(a){Me(l),Me(t.$$.fragment,a),Me(r.$$.fragment,a),i=!1},d(a){a&&(_(e),_(s)),l&&l.d(a),Ke(t,a),Ke(r,a)}}}function rp(n,e,t){Le(n,an,E=>t(20,E)),Le(n,xt,E=>t(21,E)),Le(n,At,E=>t(22,E));let{isOpen:s=!1}=e,r=!0,i=!0,l=!0,a=!0,o="dark",u=!1,d=!1;function p(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function h(){t(3,l=!l),localStorage.setItem("micEnabled",l.toString())}function b(){t(4,a=!a),localStorage.setItem("cameraEnabled",a.toString())}function g(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}async function y(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}function C(){At.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(6,u=!1)}async function I(){t(7,d=!0)}async function m(){try{const E=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,D=await(await fetch(`${E}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();D.success?(At.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(D.error||"Unknown error"))}catch(E){console.error("Error clearing server messages:",E),alert("Failed to clear server messages. Check console for details.")}t(7,d=!1)}function T(){t(0,s=!1)}function v(E){Vt.call(this,n,E)}const A=()=>t(6,u=!1),S=()=>t(7,d=!1);return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen)},[s,r,i,l,a,o,u,d,p,h,b,g,y,C,I,m,T,v,A,S]}class ip extends dt{constructor(e){super(),ht(this,e,rp,sp,ft,{isOpen:0})}}function ka(n,e,t){const s=n.slice();return s[16]=e[t],s}function wa(n){let e,t,s,r,i,l,a,o,u="Ã—",d,p,h,b;function g(I,m){return I[2].length===0?ap:lp}let y=g(n),C=y(n);return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),i=J("ðŸ“Œ Pinned Messages in #"),l=J(n[1]),a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),C.c(),this.h()},l(I){e=k(I,"DIV",{class:!0});var m=R(e);t=k(m,"DIV",{class:!0});var T=R(t);s=k(T,"DIV",{class:!0});var v=R(s);r=k(v,"H2",{class:!0});var A=R(r);i=Z(A,"ðŸ“Œ Pinned Messages in #"),l=Z(A,n[1]),A.forEach(_),a=M(v),o=k(v,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-12zniqk"&&(o.textContent=u),v.forEach(_),d=M(T),p=k(T,"DIV",{class:!0});var S=R(p);C.l(S),S.forEach(_),T.forEach(_),m.forEach(_),this.h()},h(){f(r,"class","svelte-178cyr5"),f(o,"class","close-btn svelte-178cyr5"),f(s,"class","modal-header svelte-178cyr5"),f(p,"class","modal-body svelte-178cyr5"),f(t,"class","modal-content svelte-178cyr5"),f(e,"class","modal-overlay svelte-178cyr5")},m(I,m){V(I,e,m),c(e,t),c(t,s),c(s,r),c(r,i),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),C.m(p,null),h||(b=[G(o,"click",n[3]),G(t,"click",nt(n[10])),G(e,"click",n[3])],h=!0)},p(I,m){m&2&&ie(l,I[1]),y===(y=g(I))&&C?C.p(I,m):(C.d(1),C=y(I),C&&(C.c(),C.m(p,null)))},d(I){I&&_(e),C.d(),h=!1,Ie(b)}}}function lp(n){let e,t=[],s=new Map,r=Ye(n[2]);const i=l=>l[16].id;for(let l=0;l<r.length;l+=1){let a=ka(n,r,l),o=i(a);s.set(o,t[l]=ya(o,a))}return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(_),this.h()},h(){f(e,"class","pinned-messages-list svelte-178cyr5")},m(l,a){V(l,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,a){a&116&&(r=Ye(l[2]),t=Qt(t,a,i,1,l,r,s,e,Jt,ya,null,ka))},d(l){l&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ap(n){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-178cyr5")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function ya(n,e){let t,s,r,i,l=e[16].user+"",a,o,u,d=Ea(e[16].timestamp)+"",p,h,b,g,y="Jump to",C,I,m="Unpin",T,v,A=e[16].text+"",S,E,N,D;function B(){return e[11](e[16])}function O(){return e[12](e[16])}return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("div"),i=w("span"),a=J(l),o=z(),u=w("span"),p=J(d),h=z(),b=w("div"),g=w("button"),g.textContent=y,C=z(),I=w("button"),I.textContent=m,T=z(),v=w("div"),S=J(A),E=z(),this.h()},l(F){t=k(F,"DIV",{class:!0});var L=R(t);s=k(L,"DIV",{class:!0});var U=R(s);r=k(U,"DIV",{class:!0});var P=R(r);i=k(P,"SPAN",{class:!0,style:!0});var q=R(i);a=Z(q,l),q.forEach(_),o=M(P),u=k(P,"SPAN",{class:!0});var Y=R(u);p=Z(Y,d),Y.forEach(_),P.forEach(_),h=M(U),b=k(U,"DIV",{class:!0});var x=R(b);g=k(x,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(g)!=="svelte-1nadwym"&&(g.textContent=y),C=M(x),I=k(x,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(I)!=="svelte-eqnabo"&&(I.textContent=m),x.forEach(_),U.forEach(_),T=M(L),v=k(L,"DIV",{class:!0});var K=R(v);S=Z(K,A),K.forEach(_),E=M(L),L.forEach(_),this.h()},h(){f(i,"class","username svelte-178cyr5"),De(i,"color",e[6](e[16].user)),f(u,"class","timestamp svelte-178cyr5"),f(r,"class","user-info svelte-178cyr5"),f(g,"class","jump-btn svelte-178cyr5"),f(g,"title","Jump to message"),f(I,"class","unpin-btn svelte-178cyr5"),f(I,"title","Unpin message"),f(b,"class","action-buttons svelte-178cyr5"),f(s,"class","message-header svelte-178cyr5"),f(v,"class","message-text svelte-178cyr5"),f(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(F,L){V(F,t,L),c(t,s),c(s,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(s,h),c(s,b),c(b,g),c(b,C),c(b,I),c(t,T),c(t,v),c(v,S),c(t,E),N||(D=[G(g,"click",B),G(I,"click",O)],N=!0)},p(F,L){e=F,L&4&&l!==(l=e[16].user+"")&&ie(a,l),L&4&&De(i,"color",e[6](e[16].user)),L&4&&d!==(d=Ea(e[16].timestamp)+"")&&ie(p,d),L&4&&A!==(A=e[16].text+"")&&ie(S,A)},d(F){F&&_(t),N=!1,Ie(D)}}}function op(n){let e,t=n[0]&&wa(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=wa(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function Ea(n){return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function cp(n,e,t){let s,r,i,l,a;Le(n,xt,m=>t(13,i=m)),Le(n,sn,m=>t(8,l=m)),Le(n,At,m=>t(9,a=m));let{isOpen:o=!1}=e,{channelId:u=""}=e;function d(){t(0,o=!1)}function p(m){Zr(u,m)}function h(m){d(),setTimeout(()=>{const T=document.getElementById(`message-${m}`);T&&(T.scrollIntoView({behavior:"smooth",block:"center"}),T.classList.add("highlighted"),setTimeout(()=>{T.classList.remove("highlighted")},2e3))},100)}function b(m){return i.find(T=>T.username===m)}function g(m){return b(m)?.color||"var(--status-offline)"}function y(m){Vt.call(this,n,m)}const C=m=>h(m.id),I=m=>p(m.id);return n.$$set=m=>{"isOpen"in m&&t(0,o=m.isOpen),"channelId"in m&&t(7,u=m.channelId)},n.$$.update=()=>{n.$$.dirty&640&&t(2,s=(a[u]||[]).filter(m=>m.isPinned)),n.$$.dirty&384&&t(1,r=l.find(m=>m.id===u)?.name||u)},[o,r,s,d,p,h,g,u,l,a,y,C,I]}class up extends dt{constructor(e){super(),ht(this,e,cp,op,ft,{isOpen:0,channelId:7})}}function Ta(n,e,t){const s=n.slice();return s[63]=e[t],s}function Aa(n,e,t){const s=n.slice();return s[63]=e[t],s}function Ca(n,e,t){const s=n.slice();return s[63]=e[t],s}function Sa(n){let e,t,s,r,i="Create",l,a;return{c(){e=w("div"),t=w("input"),s=z(),r=w("button"),r.textContent=i,this.h()},l(o){e=k(o,"DIV",{class:!0});var u=R(e);t=k(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=M(u),r=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(_),this.h()},h(){f(t,"type","text"),f(t,"placeholder","channel-name"),t.autofocus=!0,f(t,"class","svelte-1c11uqn"),f(r,"class","svelte-1c11uqn"),f(e,"class","create-channel svelte-1c11uqn")},m(o,u){V(o,e,u),c(e,t),it(t,n[1]),c(e,s),c(e,r),t.focus(),l||(a=[G(t,"input",n[30]),G(t,"keydown",n[31]),G(r,"click",n[19])],l=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&it(t,o[1])},d(o){o&&_(e),l=!1,Ie(a)}}}function Ia(n){let e,t,s;return{c(){e=w("span"),t=J("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=Z(i,"â±ï¸"),i.forEach(_),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&32768&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&_(e)}}}function Da(n){let e,t="Ã—",s,r;function i(){return n[35](n[63])}return{c(){e=w("button"),e.textContent=t,this.h()},l(l){e=k(l,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn svelte-1c11uqn")},m(l,a){V(l,e,a),s||(r=G(e,"click",nt(i)),s=!0)},p(l,a){n=l},d(l){l&&_(e),s=!1,r()}}}function Na(n,e){let t,s,r,i="#",l,a=e[63].name+"",o,u,d,p,h,b="âš™ï¸",g,y,C="ðŸ“Œ",I,m,T,v,A=e[63].autoDeleteAfter&&Ia(e);function S(){return e[32](e[63])}function E(){return e[33](e[63])}function N(){return e[34](e[63])}let D=e[63].id!=="general"&&Da(e);return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=J(a),u=z(),A&&A.c(),d=z(),p=w("div"),h=w("button"),h.textContent=b,g=z(),y=w("button"),y.textContent=C,I=z(),D&&D.c(),m=z(),this.h()},l(B){t=k(B,"DIV",{class:!0});var O=R(t);s=k(O,"BUTTON",{class:!0});var F=R(s);r=k(F,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-16vlh54"&&(r.textContent=i),l=M(F),o=Z(F,a),u=M(F),A&&A.l(F),F.forEach(_),d=M(O),p=k(O,"DIV",{class:!0});var L=R(p);h=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=b),g=M(L),y=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=C),I=M(L),D&&D.l(L),L.forEach(_),m=M(O),O.forEach(_),this.h()},h(){f(r,"class","hash svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(B,O){V(B,t,O),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),A&&A.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),D&&D.m(p,null),c(t,m),T||(v=[G(s,"click",S),G(h,"click",nt(E)),G(y,"click",nt(N))],T=!0)},p(B,O){e=B,O[0]&32768&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?A?A.p(e,O):(A=Ia(e),A.c(),A.m(s,null)):A&&(A.d(1),A=null),e[63].id!=="general"?D?D.p(e,O):(D=Da(e),D.c(),D.m(p,null)):D&&(D.d(1),D=null),O[0]&98304&&he(t,"active",e[16]===e[63].id)},d(B){B&&_(t),A&&A.d(),D&&D.d(),T=!1,Ie(v)}}}function Ra(n){let e,t="Direct Messages",s,r=[],i=new Map,l,a=Ye(n[14]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=Aa(n,a,u),p=o(d);i.set(p,r[u]=Oa(p,d))}return{c(){e=w("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Ne(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-r1afib"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Ne(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){V(u,e,d),V(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);V(u,l,d)},p(u,d){d[0]&13975552&&(a=Ye(u[14]),r=Qt(r,d,o,1,u,a,i,l.parentNode,Jt,Oa,l,Aa))},d(u){u&&(_(e),_(s),_(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function Pa(n){let e,t,s;return{c(){e=w("span"),t=J("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=Z(i,"â±ï¸"),i.forEach(_),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&16384&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&_(e)}}}function Oa(n,e){let t,s,r,i="ðŸ’¬",l,a=e[63].name+"",o,u,d,p,h,b="âš™ï¸",g,y,C="ðŸ“Œ",I,m,T="Ã—",v,A,S,E=e[63].autoDeleteAfter&&Pa(e);function N(){return e[36](e[63])}function D(){return e[37](e[63])}function B(){return e[38](e[63])}function O(){return e[39](e[63])}return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=J(a),u=z(),E&&E.c(),d=z(),p=w("div"),h=w("button"),h.textContent=b,g=z(),y=w("button"),y.textContent=C,I=z(),m=w("button"),m.textContent=T,v=z(),this.h()},l(F){t=k(F,"DIV",{class:!0});var L=R(t);s=k(L,"BUTTON",{class:!0});var U=R(s);r=k(U,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-q0xuov"&&(r.textContent=i),l=M(U),o=Z(U,a),u=M(U),E&&E.l(U),U.forEach(_),d=M(L),p=k(L,"DIV",{class:!0});var P=R(p);h=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=b),g=M(P),y=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=C),I=M(P),m=k(P,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-12rgdhl"&&(m.textContent=T),P.forEach(_),v=M(L),L.forEach(_),this.h()},h(){f(r,"class","dm-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(F,L){V(F,t,L),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),c(p,m),c(t,v),A||(S=[G(s,"click",N),G(h,"click",nt(D)),G(y,"click",nt(B)),G(m,"click",nt(O))],A=!0)},p(F,L){e=F,L[0]&16384&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?E?E.p(e,L):(E=Pa(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),L[0]&81920&&he(t,"active",e[16]===e[63].id)},d(F){F&&_(t),E&&E.d(),A=!1,Ie(S)}}}function Ma(n){let e,t="Group Chats",s,r=[],i=new Map,l,a=Ye(n[13]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=Ta(n,a,u),p=o(d);i.set(p,r[u]=Fa(p,d))}return{c(){e=w("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Ne(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1fof55m"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Ne(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){V(u,e,d),V(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);V(u,l,d)},p(u,d){d[0]&13967360&&(a=Ye(u[13]),r=Qt(r,d,o,1,u,a,i,l.parentNode,Jt,Fa,l,Ta))},d(u){u&&(_(e),_(s),_(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function za(n){let e,t,s;return{c(){e=w("span"),t=J("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=Z(i,"â±ï¸"),i.forEach(_),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&8192&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&_(e)}}}function Fa(n,e){let t,s,r,i="ðŸ‘¥",l,a=e[63].name+"",o,u,d,p,h,b="âš™ï¸",g,y,C="ðŸ“Œ",I,m,T="Ã—",v,A,S,E=e[63].autoDeleteAfter&&za(e);function N(){return e[40](e[63])}function D(){return e[41](e[63])}function B(){return e[42](e[63])}function O(){return e[43](e[63])}return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=J(a),u=z(),E&&E.c(),d=z(),p=w("div"),h=w("button"),h.textContent=b,g=z(),y=w("button"),y.textContent=C,I=z(),m=w("button"),m.textContent=T,v=z(),this.h()},l(F){t=k(F,"DIV",{class:!0});var L=R(t);s=k(L,"BUTTON",{class:!0});var U=R(s);r=k(U,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-4z5ugu"&&(r.textContent=i),l=M(U),o=Z(U,a),u=M(U),E&&E.l(U),U.forEach(_),d=M(L),p=k(L,"DIV",{class:!0});var P=R(p);h=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=b),g=M(P),y=k(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=C),I=M(P),m=k(P,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-12rgdhl"&&(m.textContent=T),P.forEach(_),v=M(L),L.forEach(_),this.h()},h(){f(r,"class","group-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(F,L){V(F,t,L),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),c(p,m),c(t,v),A||(S=[G(s,"click",N),G(h,"click",nt(D)),G(y,"click",nt(B)),G(m,"click",nt(O))],A=!0)},p(F,L){e=F,L[0]&8192&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?E?E.p(e,L):(E=za(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),L[0]&73728&&he(t,"active",e[16]===e[63].id)},d(F){F&&_(t),E&&E.d(),A=!1,Ie(S)}}}function Ba(n){let e,t,s,r,i,l,a,o,u=n[17].username+"",d,p,h,b,g=n[17].id.slice(0,4)+"",y,C,I,m,T=n[4]?"ðŸ”‡":"ðŸŽ¤",v,A,S,E,N=n[5]?"ðŸ”‡":"ðŸŽ§",D,B,O,F,L="âš™ï¸",U,P;function q(K,H){return K[17].profilePicture?dp:fp}let Y=q(n),x=Y(n);return{c(){e=w("div"),t=w("button"),s=w("div"),x.c(),r=z(),i=w("div"),l=z(),a=w("div"),o=w("div"),d=J(u),p=z(),h=w("div"),b=J("#"),y=J(g),C=z(),I=w("div"),m=w("button"),v=J(T),S=z(),E=w("button"),D=J(N),O=z(),F=w("button"),F.textContent=L,this.h()},l(K){e=k(K,"DIV",{class:!0});var H=R(e);t=k(H,"BUTTON",{class:!0});var W=R(t);s=k(W,"DIV",{class:!0});var $=R(s);x.l($),r=M($),i=k($,"DIV",{class:!0}),R(i).forEach(_),$.forEach(_),l=M(W),a=k(W,"DIV",{class:!0});var ne=R(a);o=k(ne,"DIV",{class:!0});var le=R(o);d=Z(le,u),le.forEach(_),p=M(ne),h=k(ne,"DIV",{class:!0});var se=R(h);b=Z(se,"#"),y=Z(se,g),se.forEach(_),ne.forEach(_),W.forEach(_),C=M(H),I=k(H,"DIV",{class:!0});var de=R(I);m=k(de,"BUTTON",{class:!0,title:!0});var re=R(m);v=Z(re,T),re.forEach(_),S=M(de),E=k(de,"BUTTON",{class:!0,title:!0});var ee=R(E);D=Z(ee,N),ee.forEach(_),O=M(de),F=k(de,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(F)!=="svelte-18txcln"&&(F.textContent=L),de.forEach(_),H.forEach(_),this.h()},h(){f(i,"class","status-indicator svelte-1c11uqn"),he(i,"online",n[17].status==="active"),he(i,"away",n[17].status==="away"),he(i,"busy",n[17].status==="busy"),f(s,"class","avatar-container svelte-1c11uqn"),f(o,"class","username svelte-1c11uqn"),f(h,"class","user-tag svelte-1c11uqn"),f(a,"class","user-details svelte-1c11uqn"),f(t,"class","profile-info svelte-1c11uqn"),f(m,"class","control-btn svelte-1c11uqn"),f(m,"title",A=n[4]?"Unmute":"Mute"),he(m,"active",n[4]),f(E,"class","control-btn svelte-1c11uqn"),f(E,"title",B=n[5]?"Undeafen":"Deafen"),he(E,"active",n[5]),f(F,"class","control-btn svelte-1c11uqn"),f(F,"title","User Settings"),f(I,"class","profile-controls svelte-1c11uqn"),f(e,"class","profile-card svelte-1c11uqn")},m(K,H){V(K,e,H),c(e,t),c(t,s),x.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,b),c(h,y),c(e,C),c(e,I),c(I,m),c(m,v),c(I,S),c(I,E),c(E,D),c(I,O),c(I,F),U||(P=[G(t,"click",n[25]),G(m,"click",n[44]),G(E,"click",n[45]),G(F,"click",n[46])],U=!0)},p(K,H){Y===(Y=q(K))&&x?x.p(K,H):(x.d(1),x=Y(K),x&&(x.c(),x.m(s,r))),H[0]&131072&&he(i,"online",K[17].status==="active"),H[0]&131072&&he(i,"away",K[17].status==="away"),H[0]&131072&&he(i,"busy",K[17].status==="busy"),H[0]&131072&&u!==(u=K[17].username+"")&&ie(d,u),H[0]&131072&&g!==(g=K[17].id.slice(0,4)+"")&&ie(y,g),H[0]&16&&T!==(T=K[4]?"ðŸ”‡":"ðŸŽ¤")&&ie(v,T),H[0]&16&&A!==(A=K[4]?"Unmute":"Mute")&&f(m,"title",A),H[0]&16&&he(m,"active",K[4]),H[0]&32&&N!==(N=K[5]?"ðŸ”‡":"ðŸŽ§")&&ie(D,N),H[0]&32&&B!==(B=K[5]?"Undeafen":"Deafen")&&f(E,"title",B),H[0]&32&&he(E,"active",K[5])},d(K){K&&_(e),x.d(),U=!1,Ie(P)}}}function fp(n){let e,t=n[17].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-1c11uqn"),De(e,"background-color",n[17].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&131072&&t!==(t=r[17].username.charAt(0).toUpperCase()+"")&&ie(s,t),i[0]&131072&&De(e,"background-color",r[17].color)},d(r){r&&_(e)}}}function dp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[17].profilePicture)||f(e,"src",t),f(e,"alt",s=n[17].username),f(e,"class","avatar svelte-1c11uqn")},m(r,i){V(r,e,i)},p(r,i){i[0]&131072&&!We(e.src,t=r[17].profilePicture)&&f(e,"src",t),i[0]&131072&&s!==(s=r[17].username)&&f(e,"alt",s)},d(r){r&&_(e)}}}function La(n){let e,t,s,r,i="âš™ï¸ Channel Settings",l,a,o="Ã—",u,d,p,h,b,g=n[12].name+"",y,C,I,m,T="Auto-Delete Messages",v,A,S="Automatically delete messages after a set period of time",E,N,D,B="Disabled",O,F,L="1 Hour",U,P,q="6 Hours",Y,x,K="12 Hours",H,W,$="1 Day",ne,le,se="3 Days",de,re,ee="7 Days",oe,ke,Te="14 Days",Ue,_e,ae="30 Days",be,ve;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("div"),h=w("h3"),b=J("Channel: #"),y=J(g),C=z(),I=w("div"),m=w("label"),m.textContent=T,v=z(),A=w("p"),A.textContent=S,E=z(),N=w("div"),D=w("button"),D.textContent=B,O=z(),F=w("button"),F.textContent=L,U=z(),P=w("button"),P.textContent=q,Y=z(),x=w("button"),x.textContent=K,H=z(),W=w("button"),W.textContent=$,ne=z(),le=w("button"),le.textContent=se,de=z(),re=w("button"),re.textContent=ee,oe=z(),ke=w("button"),ke.textContent=Te,Ue=z(),_e=w("button"),_e.textContent=ae,this.h()},l(pe){e=k(pe,"DIV",{class:!0});var Q=R(e);t=k(Q,"DIV",{class:!0});var ue=R(t);s=k(ue,"DIV",{class:!0});var Ee=R(s);r=k(Ee,"H2",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-gucqu6"&&(r.textContent=i),l=M(Ee),a=k(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1eq7ufx"&&(a.textContent=o),Ee.forEach(_),u=M(ue),d=k(ue,"DIV",{class:!0});var qe=R(d);p=k(qe,"DIV",{class:!0});var Re=R(p);h=k(Re,"H3",{class:!0});var Ce=R(h);b=Z(Ce,"Channel: #"),y=Z(Ce,g),Ce.forEach(_),C=M(Re),I=k(Re,"DIV",{class:!0});var xe=R(I);m=k(xe,"LABEL",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-ryy261"&&(m.textContent=T),v=M(xe),A=k(xe,"P",{class:!0,"data-svelte-h":!0}),X(A)!=="svelte-1tt2qq4"&&(A.textContent=S),E=M(xe),N=k(xe,"DIV",{class:!0});var Oe=R(N);D=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(D)!=="svelte-uqphio"&&(D.textContent=B),O=M(Oe),F=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(F)!=="svelte-1nt1au0"&&(F.textContent=L),U=M(Oe),P=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(P)!=="svelte-1gtmi8"&&(P.textContent=q),Y=M(Oe),x=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(x)!=="svelte-1notbsz"&&(x.textContent=K),H=M(Oe),W=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(W)!=="svelte-9g0opm"&&(W.textContent=$),ne=M(Oe),le=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-1lvi2x3"&&(le.textContent=se),de=M(Oe),re=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(re)!=="svelte-1rb14zv"&&(re.textContent=ee),oe=M(Oe),ke=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(ke)!=="svelte-1i8t5rl"&&(ke.textContent=Te),Ue=M(Oe),_e=k(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_e)!=="svelte-1snshdf"&&(_e.textContent=ae),Oe.forEach(_),xe.forEach(_),Re.forEach(_),qe.forEach(_),ue.forEach(_),Q.forEach(_),this.h()},h(){f(r,"class","svelte-1c11uqn"),f(a,"class","close-btn svelte-1c11uqn"),f(s,"class","modal-header svelte-1c11uqn"),f(h,"class","svelte-1c11uqn"),f(m,"class","svelte-1c11uqn"),f(A,"class","setting-description svelte-1c11uqn"),f(D,"class","auto-delete-btn svelte-1c11uqn"),he(D,"active",!n[12].autoDeleteAfter),f(F,"class","auto-delete-btn svelte-1c11uqn"),he(F,"active",n[12].autoDeleteAfter==="1h"),f(P,"class","auto-delete-btn svelte-1c11uqn"),he(P,"active",n[12].autoDeleteAfter==="6h"),f(x,"class","auto-delete-btn svelte-1c11uqn"),he(x,"active",n[12].autoDeleteAfter==="12h"),f(W,"class","auto-delete-btn svelte-1c11uqn"),he(W,"active",n[12].autoDeleteAfter==="24h"),f(le,"class","auto-delete-btn svelte-1c11uqn"),he(le,"active",n[12].autoDeleteAfter==="3d"),f(re,"class","auto-delete-btn svelte-1c11uqn"),he(re,"active",n[12].autoDeleteAfter==="7d"),f(ke,"class","auto-delete-btn svelte-1c11uqn"),he(ke,"active",n[12].autoDeleteAfter==="14d"),f(_e,"class","auto-delete-btn svelte-1c11uqn"),he(_e,"active",n[12].autoDeleteAfter==="30d"),f(N,"class","auto-delete-options svelte-1c11uqn"),f(I,"class","setting-group svelte-1c11uqn"),f(p,"class","setting-section svelte-1c11uqn"),f(d,"class","modal-body svelte-1c11uqn"),f(t,"class","modal-content svelte-1c11uqn"),f(e,"class","modal-overlay svelte-1c11uqn")},m(pe,Q){V(pe,e,Q),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(h,b),c(h,y),c(p,C),c(p,I),c(I,m),c(I,v),c(I,A),c(I,E),c(I,N),c(N,D),c(N,O),c(N,F),c(N,U),c(N,P),c(N,Y),c(N,x),c(N,H),c(N,W),c(N,ne),c(N,le),c(N,de),c(N,re),c(N,oe),c(N,ke),c(N,Ue),c(N,_e),be||(ve=[G(a,"click",n[52]),G(D,"click",n[53]),G(F,"click",n[54]),G(P,"click",n[55]),G(x,"click",n[56]),G(W,"click",n[57]),G(le,"click",n[58]),G(re,"click",n[59]),G(ke,"click",n[60]),G(_e,"click",n[61]),G(t,"click",nt(n[27])),G(e,"click",n[62])],be=!0)},p(pe,Q){Q[0]&4096&&g!==(g=pe[12].name+"")&&ie(y,g),Q[0]&4096&&he(D,"active",!pe[12].autoDeleteAfter),Q[0]&4096&&he(F,"active",pe[12].autoDeleteAfter==="1h"),Q[0]&4096&&he(P,"active",pe[12].autoDeleteAfter==="6h"),Q[0]&4096&&he(x,"active",pe[12].autoDeleteAfter==="12h"),Q[0]&4096&&he(W,"active",pe[12].autoDeleteAfter==="24h"),Q[0]&4096&&he(le,"active",pe[12].autoDeleteAfter==="3d"),Q[0]&4096&&he(re,"active",pe[12].autoDeleteAfter==="7d"),Q[0]&4096&&he(ke,"active",pe[12].autoDeleteAfter==="14d"),Q[0]&4096&&he(_e,"active",pe[12].autoDeleteAfter==="30d")},d(pe){pe&&_(e),be=!1,Ie(ve)}}}function hp(n){let e,t,s='<div class="logo svelte-1c11uqn"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-1c11uqn"/></div>',r,i,l,a="Text Channels",o,u,d,p="ðŸ“º",h,b,g="+",y,C,I,m=[],T=new Map,v,A,S,E,N,D,B,O,F,L,U,P,q,Y,x,K,H,W,$,ne,le=n[2]&&Sa(n),se=Ye(n[15]);const de=Q=>Q[63].id;for(let Q=0;Q<se.length;Q+=1){let ue=Ca(n,se,Q),Ee=de(ue);T.set(Ee,m[Q]=Na(Ee,ue))}let re=n[14].length>0&&Ra(n),ee=n[13].length>0&&Ma(n),oe=n[17]&&Ba(n);function ke(Q){n[47](Q)}let Te={};n[3]!==void 0&&(Te.isOpen=n[3]),N=new ip({props:Te}),tt.push(()=>zt(N,"isOpen",ke)),O=new Sn({props:{isOpen:n[6],title:"Delete Channel",message:"Delete channel #"+n[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:n[21],onCancel:n[48]}});function Ue(Q){n[49](Q)}let _e={channelId:n[9]};n[8]!==void 0&&(_e.isOpen=n[8]),L=new up({props:_e}),tt.push(()=>zt(L,"isOpen",Ue));function ae(Q){n[50](Q)}function be(Q){n[51](Q)}let ve={isOwnProfile:!0};n[10]!==void 0&&(ve.isOpen=n[10]),n[17]!==void 0&&(ve.user=n[17]),q=new Jr({props:ve}),tt.push(()=>zt(q,"isOpen",ae)),tt.push(()=>zt(q,"user",be));let pe=n[11]&&n[12]&&La(n);return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("div"),l=w("h3"),l.textContent=a,o=z(),u=w("div"),d=w("button"),d.textContent=p,h=z(),b=w("button"),b.textContent=g,y=z(),le&&le.c(),C=z(),I=w("div");for(let Q=0;Q<m.length;Q+=1)m[Q].c();v=z(),re&&re.c(),A=z(),ee&&ee.c(),S=z(),oe&&oe.c(),E=z(),Je(N.$$.fragment),B=z(),Je(O.$$.fragment),F=z(),Je(L.$$.fragment),P=z(),Je(q.$$.fragment),K=z(),pe&&pe.c(),H=Ne(),this.h()},l(Q){e=k(Q,"DIV",{class:!0});var ue=R(e);t=k(ue,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-18mdtge"&&(t.innerHTML=s),r=M(ue),i=k(ue,"DIV",{class:!0});var Ee=R(i);l=k(Ee,"H3",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-cahn79"&&(l.textContent=a),o=M(Ee),u=k(Ee,"DIV",{class:!0});var qe=R(u);d=k(qe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(d)!=="svelte-5el016"&&(d.textContent=p),h=M(qe),b=k(qe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(b)!=="svelte-ou792o"&&(b.textContent=g),qe.forEach(_),Ee.forEach(_),y=M(ue),le&&le.l(ue),C=M(ue),I=k(ue,"DIV",{class:!0});var Re=R(I);for(let Ce=0;Ce<m.length;Ce+=1)m[Ce].l(Re);v=M(Re),re&&re.l(Re),A=M(Re),ee&&ee.l(Re),Re.forEach(_),S=M(ue),oe&&oe.l(ue),ue.forEach(_),E=M(Q),Ze(N.$$.fragment,Q),B=M(Q),Ze(O.$$.fragment,Q),F=M(Q),Ze(L.$$.fragment,Q),P=M(Q),Ze(q.$$.fragment,Q),K=M(Q),pe&&pe.l(Q),H=Ne(),this.h()},h(){f(t,"class","top-section svelte-1c11uqn"),f(l,"class","svelte-1c11uqn"),f(d,"class","screen-share-icon-btn svelte-1c11uqn"),f(d,"title","Screen Share"),he(d,"active",n[0]==="screen"),f(b,"class","add-btn svelte-1c11uqn"),f(b,"title","Create channel"),f(u,"class","header-buttons svelte-1c11uqn"),f(i,"class","sidebar-header svelte-1c11uqn"),f(I,"class","channel-list svelte-1c11uqn"),f(e,"class","channel-sidebar svelte-1c11uqn")},m(Q,ue){V(Q,e,ue),c(e,t),c(e,r),c(e,i),c(i,l),c(i,o),c(i,u),c(u,d),c(u,h),c(u,b),c(e,y),le&&le.m(e,null),c(e,C),c(e,I);for(let Ee=0;Ee<m.length;Ee+=1)m[Ee]&&m[Ee].m(I,null);c(I,v),re&&re.m(I,null),c(I,A),ee&&ee.m(I,null),c(e,S),oe&&oe.m(e,null),V(Q,E,ue),Xe(N,Q,ue),V(Q,B,ue),Xe(O,Q,ue),V(Q,F,ue),Xe(L,Q,ue),V(Q,P,ue),Xe(q,Q,ue),V(Q,K,ue),pe&&pe.m(Q,ue),V(Q,H,ue),W=!0,$||(ne=[G(d,"click",n[28]),G(b,"click",n[29])],$=!0)},p(Q,ue){(!W||ue[0]&1)&&he(d,"active",Q[0]==="screen"),Q[2]?le?le.p(Q,ue):(le=Sa(Q),le.c(),le.m(e,C)):le&&(le.d(1),le=null),ue[0]&13991936&&(se=Ye(Q[15]),m=Qt(m,ue,de,1,Q,se,T,I,Jt,Na,v,Ca)),Q[14].length>0?re?re.p(Q,ue):(re=Ra(Q),re.c(),re.m(I,A)):re&&(re.d(1),re=null),Q[13].length>0?ee?ee.p(Q,ue):(ee=Ma(Q),ee.c(),ee.m(I,null)):ee&&(ee.d(1),ee=null),Q[17]?oe?oe.p(Q,ue):(oe=Ba(Q),oe.c(),oe.m(e,null)):oe&&(oe.d(1),oe=null);const Ee={};!D&&ue[0]&8&&(D=!0,Ee.isOpen=Q[3],Mt(()=>D=!1)),N.$set(Ee);const qe={};ue[0]&64&&(qe.isOpen=Q[6]),ue[0]&128&&(qe.message="Delete channel #"+Q[7]+"? This action cannot be undone."),ue[0]&64&&(qe.onCancel=Q[48]),O.$set(qe);const Re={};ue[0]&512&&(Re.channelId=Q[9]),!U&&ue[0]&256&&(U=!0,Re.isOpen=Q[8],Mt(()=>U=!1)),L.$set(Re);const Ce={};!Y&&ue[0]&1024&&(Y=!0,Ce.isOpen=Q[10],Mt(()=>Y=!1)),!x&&ue[0]&131072&&(x=!0,Ce.user=Q[17],Mt(()=>x=!1)),q.$set(Ce),Q[11]&&Q[12]?pe?pe.p(Q,ue):(pe=La(Q),pe.c(),pe.m(H.parentNode,H)):pe&&(pe.d(1),pe=null)},i(Q){W||(Ae(N.$$.fragment,Q),Ae(O.$$.fragment,Q),Ae(L.$$.fragment,Q),Ae(q.$$.fragment,Q),W=!0)},o(Q){Me(N.$$.fragment,Q),Me(O.$$.fragment,Q),Me(L.$$.fragment,Q),Me(q.$$.fragment,Q),W=!1},d(Q){Q&&(_(e),_(E),_(B),_(F),_(P),_(K),_(H)),le&&le.d();for(let ue=0;ue<m.length;ue+=1)m[ue].d();re&&re.d(),ee&&ee.d(),oe&&oe.d(),Ke(N,Q),Ke(O,Q),Ke(L,Q),Ke(q,Q),pe&&pe.d(Q),$=!1,Ie(ne)}}}function pp(n,e,t){let s,r,i,l,a,o;Le(n,sn,fe=>t(26,l=fe)),Le(n,Nn,fe=>t(16,a=fe)),Le(n,an,fe=>t(17,o=fe));let{activeView:u="chat"}=e,d="",p=!1,h=!1,b=!1,g=!1,y=!1,C="",I=!1,m="",T=!1,v=!1,A=null;function S(fe){Mf(fe)}function E(){d.trim()&&(zf(d.trim()),t(1,d=""),t(2,p=!1))}function N(fe){t(7,C=fe),t(6,y=!0)}function D(){Ff(C),t(6,y=!1)}function B(fe){t(9,m=fe),t(8,I=!0)}function O(fe){t(12,A=fe),t(11,v=!0)}function F(fe){A&&(qf(A.id,fe),t(11,v=!1))}function L(){t(10,T=!0)}function U(fe){Vt.call(this,n,fe)}const P=()=>t(0,u="screen"),q=()=>t(2,p=!p);function Y(){d=this.value,t(1,d)}const x=fe=>fe.key==="Enter"&&E(),K=fe=>S(fe.id),H=fe=>O(fe),W=fe=>B(fe.id),$=fe=>N(fe.id),ne=fe=>S(fe.id),le=fe=>O(fe),se=fe=>B(fe.id),de=fe=>N(fe.id),re=fe=>S(fe.id),ee=fe=>O(fe),oe=fe=>B(fe.id),ke=fe=>N(fe.id),Te=()=>t(4,b=!b),Ue=()=>t(5,g=!g),_e=()=>t(3,h=!0);function ae(fe){h=fe,t(3,h)}const be=()=>t(6,y=!1);function ve(fe){I=fe,t(8,I)}function pe(fe){T=fe,t(10,T)}function Q(fe){o=fe,an.set(o)}const ue=()=>t(11,v=!1),Ee=()=>F(null),qe=()=>F("1h"),Re=()=>F("6h"),Ce=()=>F("12h"),xe=()=>F("24h"),Oe=()=>F("3d"),ot=()=>F("7d"),st=()=>F("14d"),mt=()=>F("30d"),Dt=()=>t(11,v=!1);return n.$$set=fe=>{"activeView"in fe&&t(0,u=fe.activeView)},n.$$.update=()=>{n.$$.dirty[0]&67108864&&t(15,s=l.filter(fe=>!fe.type||fe.type==="public")),n.$$.dirty[0]&67108864&&t(14,r=l.filter(fe=>fe.type==="dm")),n.$$.dirty[0]&67108864&&t(13,i=l.filter(fe=>fe.type==="group")),n.$$.dirty[0]&1&&u==="chat"&&Uf()},[u,d,p,h,b,g,y,C,I,m,T,v,A,i,r,s,a,o,S,E,N,D,B,O,F,L,l,U,P,q,Y,x,K,H,W,$,ne,le,se,de,re,ee,oe,ke,Te,Ue,_e,ae,be,ve,pe,Q,ue,Ee,qe,Re,Ce,xe,Oe,ot,st,mt,Dt]}class gp extends dt{constructor(e){super(),ht(this,e,pp,hp,ft,{activeView:0},null,[-1,-1,-1])}}const ac=bt([]),ei=bt(null),Fs=bt(!1),os=bt(!1),cs=bt(!1),Ua=new Map;let jt=null;async function qa(n,e,t=!1){try{return jt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Fs.set(!0),os.set(!1),cs.set(!t),n.emit("call-initiate",{targetUserId:e,isVideoCall:t}),jt}catch(s){throw console.error("Error starting call:",s),s}}async function mp(n,e,t=!1){try{return jt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Fs.set(!0),os.set(!1),cs.set(!t),n.emit("call-answer",{callerId:e,isVideoCall:t}),ei.set(null),jt}catch(s){throw console.error("Error answering call:",s),s}}function vp(n,e){n.emit("call-reject",{callerId:e}),ei.set(null)}function _p(n){jt&&(jt.getTracks().forEach(e=>e.stop()),jt=null),Fs.set(!1),os.set(!1),cs.set(!1),n.emit("call-end"),Ua.forEach(e=>e.close()),Ua.clear(),ac.set([])}function bp(){if(jt){const n=jt.getAudioTracks()[0];n&&(n.enabled=!n.enabled,os.set(!n.enabled))}}function kp(){if(jt){const n=jt.getVideoTracks()[0];n&&(n.enabled=!n.enabled,cs.set(!n.enabled))}}function wp(){return jt}const{window:yp}=Mr;function Ep(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-1jgoxw0"),De(e,"background-color",n[0].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&1&&De(e,"background-color",r[0].color)},d(r){r&&_(e)}}}function Tp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","avatar svelte-1jgoxw0")},m(r,i){V(r,e,i)},p(r,i){i&1&&!We(e.src,t=r[0].profilePicture)&&f(e,"src",t),i&1&&s!==(s=r[0].username)&&f(e,"alt",s)},d(r){r&&_(e)}}}function xa(n){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',s,r,i='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',l,a,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,d,p,h;return{c(){e=w("button"),e.innerHTML=t,s=z(),r=w("button"),r.innerHTML=i,l=z(),a=w("button"),a.innerHTML=o,u=z(),d=w("div"),this.h()},l(b){e=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),s=M(b),r=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1om8irr"&&(r.innerHTML=i),l=M(b),a=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-124vjww"&&(a.innerHTML=o),u=M(b),d=k(b,"DIV",{class:!0}),R(d).forEach(_),this.h()},h(){f(e,"class","menu-item svelte-1jgoxw0"),f(r,"class","menu-item svelte-1jgoxw0"),f(a,"class","menu-item svelte-1jgoxw0"),f(d,"class","menu-divider svelte-1jgoxw0")},m(b,g){V(b,e,g),V(b,s,g),V(b,r,g),V(b,l,g),V(b,a,g),V(b,u,g),V(b,d,g),p||(h=[G(e,"click",n[8]),G(r,"click",n[6]),G(a,"click",n[7])],p=!0)},p:ze,d(b){b&&(_(e),_(s),_(r),_(l),_(a),_(u),_(d)),p=!1,Ie(h)}}}function Ap(n){let e,t,s,r,i,l=n[0].username+"",a,o,u,d,p,h,b='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',g,y;function C(v,A){return v[0].profilePicture?Tp:Ep}let I=C(n),m=I(n),T=!n[1]&&xa(n);return{c(){e=w("div"),t=w("div"),s=w("div"),m.c(),r=z(),i=w("span"),a=J(l),o=z(),u=w("div"),d=z(),T&&T.c(),p=z(),h=w("button"),h.innerHTML=b,this.h()},l(v){e=k(v,"DIV",{class:!0,style:!0});var A=R(e);t=k(A,"DIV",{class:!0});var S=R(t);s=k(S,"DIV",{class:!0});var E=R(s);m.l(E),r=M(E),i=k(E,"SPAN",{class:!0});var N=R(i);a=Z(N,l),N.forEach(_),E.forEach(_),S.forEach(_),o=M(A),u=k(A,"DIV",{class:!0}),R(u).forEach(_),d=M(A),T&&T.l(A),p=M(A),h=k(A,"BUTTON",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1rwejc6"&&(h.innerHTML=b),A.forEach(_),this.h()},h(){f(i,"class","username svelte-1jgoxw0"),f(s,"class","user-info svelte-1jgoxw0"),f(t,"class","menu-header svelte-1jgoxw0"),f(u,"class","menu-divider svelte-1jgoxw0"),f(h,"class","menu-item svelte-1jgoxw0"),f(e,"class","context-menu svelte-1jgoxw0"),De(e,"left",n[4]+"px"),De(e,"top",n[3]+"px")},m(v,A){V(v,e,A),c(e,t),c(t,s),m.m(s,null),c(s,r),c(s,i),c(i,a),c(e,o),c(e,u),c(e,d),T&&T.m(e,null),c(e,p),c(e,h),n[13](e),g||(y=[G(yp,"click",n[5]),G(h,"click",n[9]),G(e,"click",nt(n[12]))],g=!0)},p(v,[A]){I===(I=C(v))&&m?m.p(v,A):(m.d(1),m=I(v),m&&(m.c(),m.m(s,r))),A&1&&l!==(l=v[0].username+"")&&ie(a,l),v[1]?T&&(T.d(1),T=null):T?T.p(v,A):(T=xa(v),T.c(),T.m(e,p)),A&16&&De(e,"left",v[4]+"px"),A&8&&De(e,"top",v[3]+"px")},i:ze,o:ze,d(v){v&&_(e),m.d(),T&&T.d(),n[13](null),g=!1,Ie(y)}}}function Cp(n,e,t){let s,r,{user:i}=e,{x:l}=e,{y:a}=e,{isOwnProfile:o}=e;const u=Or();let d;function p(m){u("close")}function h(){u("voiceCall"),u("close")}function b(){u("videoCall"),u("close")}function g(){u("openDM"),u("close")}function y(){u("viewProfile"),u("close")}function C(m){Vt.call(this,n,m)}function I(m){tt[m?"unshift":"push"](()=>{d=m,t(2,d)})}return n.$$set=m=>{"user"in m&&t(0,i=m.user),"x"in m&&t(10,l=m.x),"y"in m&&t(11,a=m.y),"isOwnProfile"in m&&t(1,o=m.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&1028&&t(4,s=(()=>{if(!d)return l;const m=d.offsetWidth||200,T=window.innerWidth;return l+m>T?l-m:l})()),n.$$.dirty&2052&&t(3,r=(()=>{if(!d)return a;const m=d.offsetHeight||300,T=window.innerHeight;return a+m>T?a-m:a})())},[i,o,d,r,s,p,h,b,g,y,l,a,C,I]}class Sp extends dt{constructor(e){super(),ht(this,e,Cp,Ap,ft,{user:0,x:10,y:11,isOwnProfile:1})}}function ja(n,e,t){const s=n.slice();return s[9]=e[t],s}function Va(n){let e,t,s,r,i,l="Start a Direct Message",a,o,u="Ã—",d,p,h,b,g,y,C;function I(v,A){return v[2].length===0?Dp:Ip}let m=I(n),T=m(n);return{c(){e=w("div"),t=z(),s=w("div"),r=w("div"),i=w("h2"),i.textContent=l,a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),h=w("input"),b=z(),g=w("div"),T.c(),this.h()},l(v){e=k(v,"DIV",{class:!0}),R(e).forEach(_),t=M(v),s=k(v,"DIV",{class:!0});var A=R(s);r=k(A,"DIV",{class:!0});var S=R(r);i=k(S,"H2",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-14qt3ql"&&(i.textContent=l),a=M(S),o=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-mm165g"&&(o.textContent=u),S.forEach(_),d=M(A),p=k(A,"DIV",{class:!0});var E=R(p);h=k(E,"INPUT",{type:!0,placeholder:!0,class:!0}),E.forEach(_),b=M(A),g=k(A,"DIV",{class:!0});var N=R(g);T.l(N),N.forEach(_),A.forEach(_),this.h()},h(){f(e,"class","modal-overlay svelte-1wgtlqt"),f(i,"class","svelte-1wgtlqt"),f(o,"class","close-btn svelte-1wgtlqt"),f(r,"class","modal-header svelte-1wgtlqt"),f(h,"type","text"),f(h,"placeholder","Search users..."),h.autofocus=!0,f(h,"class","svelte-1wgtlqt"),f(p,"class","search-container svelte-1wgtlqt"),f(g,"class","user-list svelte-1wgtlqt"),f(s,"class","modal svelte-1wgtlqt")},m(v,A){V(v,e,A),V(v,t,A),V(v,s,A),c(s,r),c(r,i),c(r,a),c(r,o),c(s,d),c(s,p),c(p,h),it(h,n[1]),c(s,b),c(s,g),T.m(g,null),h.focus(),y||(C=[G(e,"click",n[4]),G(o,"click",n[4]),G(h,"input",n[7])],y=!0)},p(v,A){A&2&&h.value!==v[1]&&it(h,v[1]),m===(m=I(v))&&T?T.p(v,A):(T.d(1),T=m(v),T&&(T.c(),T.m(g,null)))},d(v){v&&(_(e),_(t),_(s)),T.d(),y=!1,Ie(C)}}}function Ip(n){let e=[],t=new Map,s,r=Ye(n[2]);const i=l=>l[9].id;for(let l=0;l<r.length;l+=1){let a=ja(n,r,l),o=i(a);t.set(o,e[l]=Ha(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Ne()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Ne()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);V(l,s,a)},p(l,a){a&12&&(r=Ye(l[2]),e=Qt(e,a,i,1,l,r,t,s.parentNode,Jt,Ha,s,ja))},d(l){l&&_(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function Dp(n){let e,t="No users found";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){f(e,"class","no-users svelte-1wgtlqt")},m(s,r){V(s,e,r)},p:ze,d(s){s&&_(e)}}}function Np(n){let e,t=n[9].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1wgtlqt"),De(e,"background-color",n[9].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&4&&t!==(t=r[9].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&4&&De(e,"background-color",r[9].color)},d(r){r&&_(e)}}}function Rp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[9].profilePicture)||f(e,"src",t),f(e,"alt",s=n[9].username),f(e,"class","user-avatar svelte-1wgtlqt")},m(r,i){V(r,e,i)},p(r,i){i&4&&!We(e.src,t=r[9].profilePicture)&&f(e,"src",t),i&4&&s!==(s=r[9].username)&&f(e,"alt",s)},d(r){r&&_(e)}}}function Ha(n,e){let t,s,r,i,l,a,o,u=e[9].username+"",d,p,h,b=e[9].status+"",g,y,C,I;function m(S,E){return S[9].profilePicture?Rp:Np}let T=m(e),v=T(e);function A(){return e[8](e[9])}return{key:n,first:null,c(){t=w("button"),s=w("div"),v.c(),r=z(),i=w("div"),l=z(),a=w("div"),o=w("div"),d=J(u),p=z(),h=w("div"),g=J(b),y=z(),this.h()},l(S){t=k(S,"BUTTON",{class:!0});var E=R(t);s=k(E,"DIV",{class:!0});var N=R(s);v.l(N),r=M(N),i=k(N,"DIV",{class:!0,style:!0}),R(i).forEach(_),N.forEach(_),l=M(E),a=k(E,"DIV",{class:!0});var D=R(a);o=k(D,"DIV",{class:!0});var B=R(o);d=Z(B,u),B.forEach(_),p=M(D),h=k(D,"DIV",{class:!0});var O=R(h);g=Z(O,b),O.forEach(_),D.forEach(_),y=M(E),E.forEach(_),this.h()},h(){f(i,"class","status-indicator svelte-1wgtlqt"),De(i,"background-color",Ga(e[9].status)),f(s,"class","user-avatar-container svelte-1wgtlqt"),f(o,"class","username svelte-1wgtlqt"),f(h,"class","status-text svelte-1wgtlqt"),f(a,"class","user-info svelte-1wgtlqt"),f(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(S,E){V(S,t,E),c(t,s),v.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,g),c(t,y),C||(I=G(t,"click",A),C=!0)},p(S,E){e=S,T===(T=m(e))&&v?v.p(e,E):(v.d(1),v=T(e),v&&(v.c(),v.m(s,r))),E&4&&De(i,"background-color",Ga(e[9].status)),E&4&&u!==(u=e[9].username+"")&&ie(d,u),E&4&&b!==(b=e[9].status+"")&&ie(g,b)},d(S){S&&_(t),v.d(),C=!1,I()}}}function Pp(n){let e,t=n[0]&&Va(n);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=Va(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ze,o:ze,d(s){s&&_(e),t&&t.d(s)}}}function Ga(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Op(n,e,t){let s,r,i;Le(n,an,h=>t(5,r=h)),Le(n,xt,h=>t(6,i=h));let{isOpen:l=!1}=e,a="";function o(h){Jo(h.id),u()}function u(){t(0,l=!1),t(1,a="")}function d(){a=this.value,t(1,a)}const p=h=>o(h);return n.$$set=h=>{"isOpen"in h&&t(0,l=h.isOpen)},n.$$.update=()=>{n.$$.dirty&98&&t(2,s=i.filter(h=>h.id===r?.id?!1:a?h.username.toLowerCase().includes(a.toLowerCase()):!0))},[l,a,s,o,u,r,i,d,p]}class Mp extends dt{constructor(e){super(),ht(this,e,Op,Pp,ft,{isOpen:0})}}function Wa(n,e,t){const s=n.slice();return s[28]=e[t],s}function zp(n){let e,t=n[28].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1dxxmv3"),De(e,"background-color",n[28].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&512&&t!==(t=r[28].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&512&&De(e,"background-color",r[28].color)},d(r){r&&_(e)}}}function Fp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){We(e.src,t=n[28].profilePicture)||f(e,"src",t),f(e,"alt",s=n[28].username),f(e,"class","user-avatar svelte-1dxxmv3")},m(r,i){V(r,e,i)},p(r,i){i&512&&!We(e.src,t=r[28].profilePicture)&&f(e,"src",t),i&512&&s!==(s=r[28].username)&&f(e,"alt",s)},d(r){r&&_(e)}}}function Ya(n){let e,t="(you)";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){f(e,"class","you-badge svelte-1dxxmv3")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function Ka(n){let e,t,s="ðŸ“ž",r,i,l="ðŸ“¹",a,o;function u(...p){return n[19](n[28],...p)}function d(...p){return n[20](n[28],...p)}return{c(){e=w("div"),t=w("button"),t.textContent=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(t)!=="svelte-jmuv4z"&&(t.textContent=s),r=M(h),i=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(i)!=="svelte-1whn4df"&&(i.textContent=l),h.forEach(_),this.h()},h(){f(t,"class","call-btn voice-call svelte-1dxxmv3"),f(t,"title","Voice call"),f(i,"class","call-btn video-call svelte-1dxxmv3"),f(i,"title","Video call"),f(e,"class","call-buttons svelte-1dxxmv3")},m(p,h){V(p,e,h),c(e,t),c(e,r),c(e,i),a||(o=[G(t,"click",u),G(i,"click",d)],a=!0)},p(p,h){n=p},d(p){p&&_(e),a=!1,Ie(o)}}}function Xa(n,e){let t,s,r,i,l,a=e[28].username+"",o,u,d,p,h,b,g,y=e[28].status+"",C,I,m,T,v;function A(F,L){return F[28].profilePicture?Fp:zp}let S=A(e),E=S(e),N=e[28].id===e[8]?.id&&Ya();function D(){return e[17](e[28])}function B(...F){return e[18](e[28],...F)}let O=e[28].id!==e[8]?.id&&Ka(e);return{key:n,first:null,c(){t=w("div"),s=w("button"),E.c(),r=z(),i=w("div"),l=w("span"),o=J(a),u=z(),N&&N.c(),d=z(),p=w("div"),h=w("span"),b=z(),g=w("span"),C=J(y),I=z(),O&&O.c(),m=z(),this.h()},l(F){t=k(F,"DIV",{class:!0});var L=R(t);s=k(L,"BUTTON",{class:!0});var U=R(s);E.l(U),r=M(U),i=k(U,"DIV",{class:!0});var P=R(i);l=k(P,"SPAN",{class:!0});var q=R(l);o=Z(q,a),u=M(q),N&&N.l(q),q.forEach(_),d=M(P),p=k(P,"DIV",{class:!0});var Y=R(p);h=k(Y,"SPAN",{class:!0,style:!0}),R(h).forEach(_),b=M(Y),g=k(Y,"SPAN",{class:!0});var x=R(g);C=Z(x,y),x.forEach(_),Y.forEach(_),P.forEach(_),U.forEach(_),I=M(L),O&&O.l(L),m=M(L),L.forEach(_),this.h()},h(){f(l,"class","user-name svelte-1dxxmv3"),f(h,"class","status-dot svelte-1dxxmv3"),De(h,"background-color",Ja(e[28].status)),f(g,"class","status-text svelte-1dxxmv3"),f(p,"class","user-status svelte-1dxxmv3"),f(i,"class","user-info svelte-1dxxmv3"),f(s,"class","user svelte-1dxxmv3"),f(t,"class","user-container svelte-1dxxmv3"),this.first=t},m(F,L){V(F,t,L),c(t,s),E.m(s,null),c(s,r),c(s,i),c(i,l),c(l,o),c(l,u),N&&N.m(l,null),c(i,d),c(i,p),c(p,h),c(p,b),c(p,g),c(g,C),c(t,I),O&&O.m(t,null),c(t,m),T||(v=[G(s,"click",D),G(s,"contextmenu",B)],T=!0)},p(F,L){e=F,S===(S=A(e))&&E?E.p(e,L):(E.d(1),E=S(e),E&&(E.c(),E.m(s,r))),L&512&&a!==(a=e[28].username+"")&&ie(o,a),e[28].id===e[8]?.id?N||(N=Ya(),N.c(),N.m(l,null)):N&&(N.d(1),N=null),L&512&&De(h,"background-color",Ja(e[28].status)),L&512&&y!==(y=e[28].status+"")&&ie(C,y),e[28].id!==e[8]?.id?O?O.p(e,L):(O=Ka(e),O.c(),O.m(t,m)):O&&(O.d(1),O=null)},d(F){F&&_(t),E.d(),N&&N.d(),O&&O.d(),T=!1,Ie(v)}}}function Za(n){let e,t;return e=new Sp({props:{user:n[5],x:n[6],y:n[7],isOwnProfile:n[5].id===n[8]?.id}}),e.$on("close",n[12]),e.$on("voiceCall",n[23]),e.$on("videoCall",n[24]),e.$on("openDM",n[13]),e.$on("viewProfile",n[25]),{c(){Je(e.$$.fragment)},l(s){Ze(e.$$.fragment,s)},m(s,r){Xe(e,s,r),t=!0},p(s,r){const i={};r&32&&(i.user=s[5]),r&64&&(i.x=s[6]),r&128&&(i.y=s[7]),r&288&&(i.isOwnProfile=s[5].id===s[8]?.id),e.$set(i)},i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){Ke(e,s)}}}function Bp(n){let e,t,s,r,i=n[9].length+"",l,a,o,u,d="ðŸ’¬",p,h,b=[],g=new Map,y,C,I,m,T,v,A,S,E,N,D,B=Ye(n[9]);const O=x=>x[28].id;for(let x=0;x<B.length;x+=1){let K=Wa(n,B,x),H=O(K);g.set(H,b[x]=Xa(H,K))}function F(x){n[21](x)}function L(x){n[22](x)}let U={isOwnProfile:n[2]};n[0]!==void 0&&(U.isOpen=n[0]),n[1]!==void 0&&(U.user=n[1]),C=new Jr({props:U}),tt.push(()=>zt(C,"isOpen",F)),tt.push(()=>zt(C,"user",L));let P=n[4]&&n[5]&&Za(n);function q(x){n[26](x)}let Y={};return n[3]!==void 0&&(Y.isOpen=n[3]),A=new Mp({props:Y}),tt.push(()=>zt(A,"isOpen",q)),{c(){e=w("aside"),t=w("div"),s=w("h3"),r=J("Online ("),l=J(i),a=J(")"),o=z(),u=w("button"),u.textContent=d,p=z(),h=w("div");for(let x=0;x<b.length;x+=1)b[x].c();y=z(),Je(C.$$.fragment),T=z(),P&&P.c(),v=z(),Je(A.$$.fragment),this.h()},l(x){e=k(x,"ASIDE",{class:!0});var K=R(e);t=k(K,"DIV",{class:!0});var H=R(t);s=k(H,"H3",{class:!0});var W=R(s);r=Z(W,"Online ("),l=Z(W,i),a=Z(W,")"),W.forEach(_),o=M(H),u=k(H,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(u)!=="svelte-1sotr3f"&&(u.textContent=d),H.forEach(_),p=M(K),h=k(K,"DIV",{class:!0});var $=R(h);for(let ne=0;ne<b.length;ne+=1)b[ne].l($);$.forEach(_),K.forEach(_),y=M(x),Ze(C.$$.fragment,x),T=M(x),P&&P.l(x),v=M(x),Ze(A.$$.fragment,x),this.h()},h(){f(s,"class","svelte-1dxxmv3"),f(u,"class","dm-btn svelte-1dxxmv3"),f(u,"title","Start a DM"),f(t,"class","panel-header svelte-1dxxmv3"),f(h,"class","user-list svelte-1dxxmv3"),f(e,"class","user-panel svelte-1dxxmv3")},m(x,K){V(x,e,K),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(e,p),c(e,h);for(let H=0;H<b.length;H+=1)b[H]&&b[H].m(h,null);V(x,y,K),Xe(C,x,K),V(x,T,K),P&&P.m(x,K),V(x,v,K),Xe(A,x,K),E=!0,N||(D=G(u,"click",n[14]),N=!0)},p(x,[K]){(!E||K&512)&&i!==(i=x[9].length+"")&&ie(l,i),K&102144&&(B=Ye(x[9]),b=Qt(b,K,O,1,x,B,g,h,Jt,Xa,null,Wa));const H={};K&4&&(H.isOwnProfile=x[2]),!I&&K&1&&(I=!0,H.isOpen=x[0],Mt(()=>I=!1)),!m&&K&2&&(m=!0,H.user=x[1],Mt(()=>m=!1)),C.$set(H),x[4]&&x[5]?P?(P.p(x,K),K&48&&Ae(P,1)):(P=Za(x),P.c(),Ae(P,1),P.m(v.parentNode,v)):P&&(qn(),Me(P,1,1,()=>{P=null}),xn());const W={};!S&&K&8&&(S=!0,W.isOpen=x[3],Mt(()=>S=!1)),A.$set(W)},i(x){E||(Ae(C.$$.fragment,x),Ae(P),Ae(A.$$.fragment,x),E=!0)},o(x){Me(C.$$.fragment,x),Me(P),Me(A.$$.fragment,x),E=!1},d(x){x&&(_(e),_(y),_(T),_(v));for(let K=0;K<b.length;K+=1)b[K].d();Ke(C,x),P&&P.d(x),Ke(A,x),N=!1,D()}}}function Ja(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Lp(n,e,t){let s,r,i;Le(n,Vn,P=>t(27,s=P)),Le(n,an,P=>t(8,r=P)),Le(n,xt,P=>t(9,i=P));let l=!1,a=null,o=!1,u=!1,d=!1,p=null,h=0,b=0;function g(P){t(1,a=P),t(2,o=P.id===r?.id),t(0,l=!0)}function y(P,q){P.preventDefault(),P.stopPropagation(),t(5,p=q),t(6,h=P.clientX),t(7,b=P.clientY),t(4,d=!0)}function C(){t(4,d=!1),t(5,p=null)}function I(){p&&Jo(p.id)}function m(){t(3,u=!0)}async function T(P,q){P&&P.stopPropagation();const Y=q||p;if(!(!s||!Y||Y.id===r?.id))try{await qa(s,Y.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function v(P,q){P&&P.stopPropagation();const Y=q||p;if(!(!s||!Y||Y.id===r?.id))try{await qa(s,Y.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const A=P=>g(P),S=(P,q)=>y(q,P),E=(P,q)=>T(q,P),N=(P,q)=>v(q,P);function D(P){l=P,t(0,l)}function B(P){a=P,t(1,a)}const O=()=>T(),F=()=>v(),L=()=>{p&&g(p)};function U(P){u=P,t(3,u)}return[l,a,o,u,d,p,h,b,r,i,g,y,C,I,m,T,v,A,S,E,N,D,B,O,F,L,U]}class Up extends dt{constructor(e){super(),ht(this,e,Lp,Bp,ft,{})}}const qp=bt([]),ti=bt(!1),Qa=new Map;let Un=null;async function xp(n){try{return Un=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),ti.set(!0),n.emit("start-screen-share"),Un.getVideoTracks()[0].onended=()=>{oc(n)},Un}catch(e){throw console.error("Error starting screen share:",e),e}}function oc(n){Un&&(Un.getTracks().forEach(e=>e.stop()),Un=null),ti.set(!1),n.emit("stop-screen-share"),Qa.forEach(e=>e.close()),Qa.clear()}function $a(n,e,t){const s=n.slice();return s[12]=e[t],s}function jp(n){let e,t="Start Sharing",s,r;return{c(){e=w("button"),e.textContent=t},l(i){e=k(i,"BUTTON",{"data-svelte-h":!0}),X(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,l){V(i,e,l),s||(r=G(e,"click",n[6]),s=!0)},p:ze,d(i){i&&_(e),s=!1,r()}}}function Vp(n){let e,t="Stop Sharing",s,r;return{c(){e=w("button"),e.textContent=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){f(e,"class","stop-btn svelte-1oqngqd")},m(i,l){V(i,e,l),s||(r=G(e,"click",n[7]),s=!0)},p:ze,d(i){i&&_(e),s=!1,r()}}}function eo(n){let e,t;return{c(){e=w("div"),t=J(n[2]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=R(e);t=Z(r,n[2]),r.forEach(_),this.h()},h(){f(e,"class","error svelte-1oqngqd")},m(s,r){V(s,e,r),c(e,t)},p(s,r){r&4&&ie(t,s[2])},d(s){s&&_(e)}}}function to(n){let e,t,s='<span class="badge svelte-1oqngqd">Your Screen</span>',r,i;return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("video"),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-16dlolc"&&(t.innerHTML=s),r=M(a),i=k(a,"VIDEO",{class:!0}),R(i).forEach(_),a.forEach(_),this.h()},h(){f(t,"class","screen-header svelte-1oqngqd"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,f(i,"class","svelte-1oqngqd"),f(e,"class","screen-item svelte-1oqngqd")},m(l,a){V(l,e,a),c(e,t),c(e,r),c(e,i),n[9](i)},p:ze,d(l){l&&_(e),n[9](null)}}}function no(n,e){let t,s,r,i=e[12].username+"",l,a,o,u,d,p,h;return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("span"),l=J(i),a=J("'s Screen"),o=z(),u=w("video"),this.h()},l(b){t=k(b,"DIV",{class:!0});var g=R(t);s=k(g,"DIV",{class:!0});var y=R(s);r=k(y,"SPAN",{class:!0});var C=R(r);l=Z(C,i),a=Z(C,"'s Screen"),C.forEach(_),y.forEach(_),o=M(g),u=k(g,"VIDEO",{class:!0}),R(u).forEach(_),g.forEach(_),this.h()},h(){f(r,"class","username svelte-1oqngqd"),f(s,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,f(u,"class","svelte-1oqngqd"),f(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(b,g){V(b,t,g),c(t,s),c(s,r),c(r,l),c(r,a),c(t,o),c(t,u),p||(h=hc(d=Gp.call(null,u,e[12].stream)),p=!0)},p(b,g){e=b,g&16&&i!==(i=e[12].username+"")&&ie(l,i),d&&In(d.update)&&g&16&&d.update.call(null,e[12].stream)},d(b){b&&_(t),p=!1,h()}}}function so(n){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1oqngqd")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function Hp(n){let e,t,s,r,i="â† Back",l,a,o="ðŸ–¥ï¸ Screen Sharing",u,d,p,h,b,g=[],y=new Map,C,I,m;function T(O,F){return O[3]?Vp:jp}let v=T(n),A=v(n),S=n[2]&&eo(n),E=n[3]&&n[0]&&to(n),N=Ye(n[4]);const D=O=>O[12].userId;for(let O=0;O<N.length;O+=1){let F=$a(n,N,O),L=D(F);y.set(L,g[O]=no(L,F))}let B=!n[3]&&n[4].length===0&&so();return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("button"),r.textContent=i,l=z(),a=w("h2"),a.textContent=o,u=z(),A.c(),d=z(),S&&S.c(),p=z(),h=w("div"),E&&E.c(),b=z();for(let O=0;O<g.length;O+=1)g[O].c();C=z(),B&&B.c(),this.h()},l(O){e=k(O,"DIV",{class:!0});var F=R(e);t=k(F,"DIV",{class:!0});var L=R(t);s=k(L,"DIV",{class:!0});var U=R(s);r=k(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(r)!=="svelte-ts724a"&&(r.textContent=i),l=M(U),a=k(U,"H2",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1el2fdv"&&(a.textContent=o),U.forEach(_),u=M(L),A.l(L),L.forEach(_),d=M(F),S&&S.l(F),p=M(F),h=k(F,"DIV",{class:!0});var P=R(h);E&&E.l(P),b=M(P);for(let q=0;q<g.length;q+=1)g[q].l(P);C=M(P),B&&B.l(P),P.forEach(_),F.forEach(_),this.h()},h(){f(r,"class","back-btn svelte-1oqngqd"),f(r,"title","Back to chat"),f(a,"class","svelte-1oqngqd"),f(s,"class","header-left svelte-1oqngqd"),f(t,"class","header svelte-1oqngqd"),f(h,"class","screens svelte-1oqngqd"),f(e,"class","screen-share-container svelte-1oqngqd")},m(O,F){V(O,e,F),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),A.m(t,null),c(e,d),S&&S.m(e,null),c(e,p),c(e,h),E&&E.m(h,null),c(h,b);for(let L=0;L<g.length;L+=1)g[L]&&g[L].m(h,null);c(h,C),B&&B.m(h,null),I||(m=G(r,"click",n[5]),I=!0)},p(O,[F]){v===(v=T(O))&&A?A.p(O,F):(A.d(1),A=v(O),A&&(A.c(),A.m(t,null))),O[2]?S?S.p(O,F):(S=eo(O),S.c(),S.m(e,p)):S&&(S.d(1),S=null),O[3]&&O[0]?E?E.p(O,F):(E=to(O),E.c(),E.m(h,b)):E&&(E.d(1),E=null),F&16&&(N=Ye(O[4]),g=Qt(g,F,D,1,O,N,y,h,Jt,no,C,$a)),!O[3]&&O[4].length===0?B||(B=so(),B.c(),B.m(h,null)):B&&(B.d(1),B=null)},i:ze,o:ze,d(O){O&&_(e),A.d(),S&&S.d(),E&&E.d();for(let F=0;F<g.length;F+=1)g[F].d();B&&B.d(),I=!1,m()}}}function Gp(n,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),n.srcObject=e,n.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),n.srcObject=t,n.play().catch(s=>console.error("Error playing updated remote video:",s))}}}function Wp(n,e,t){let s,r,i;Le(n,Vn,g=>t(10,s=g)),Le(n,ti,g=>t(3,r=g)),Le(n,xt,g=>t(11,g)),Le(n,qp,g=>t(4,i=g));let{activeView:l="screen"}=e,a=null,o="",u;function d(){t(8,l="chat")}async function p(){try{if(!s)return;t(0,a=await xp(s)),console.log("Screen share started, stream:",a),console.log("Stream tracks:",a?.getTracks()),console.log("Video tracks:",a?.getVideoTracks()),t(2,o="")}catch(g){t(2,o="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",g)}}function h(){s&&(oc(s),t(0,a=null))}function b(g){tt[g?"unshift":"push"](()=>{u=g,t(1,u),t(0,a)})}return n.$$set=g=>{"activeView"in g&&t(8,l=g.activeView)},n.$$.update=()=>{n.$$.dirty&3&&u&&a&&(console.log("Setting local video srcObject",a),t(1,u.srcObject=a,u),u.play().catch(g=>console.error("Error playing local video:",g)))},[a,u,o,r,i,d,p,h,l,b]}class Yp extends dt{constructor(e){super(),ht(this,e,Wp,Hp,ft,{activeView:8})}}function ro(n,e,t){const s=n.slice();return s[17]=e[t],s[18]=e,s[19]=t,s}function io(n){let e,t,s,r,i=n[2].username.charAt(0).toUpperCase()+"",l,a,o,u=n[2].username+"",d,p,h,b=n[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,y,C,I,m,T=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,v,A,S=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,E,N;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("div"),l=J(i),a=z(),o=w("h2"),d=J(u),p=z(),h=w("p"),g=J(b),y=J(" Call"),C=z(),I=w("div"),m=w("button"),m.innerHTML=T,v=z(),A=w("button"),A.innerHTML=S,this.h()},l(D){e=k(D,"DIV",{class:!0});var B=R(e);t=k(B,"DIV",{class:!0});var O=R(t);s=k(O,"DIV",{class:!0});var F=R(s);r=k(F,"DIV",{class:!0});var L=R(r);l=Z(L,i),L.forEach(_),a=M(F),o=k(F,"H2",{class:!0});var U=R(o);d=Z(U,u),U.forEach(_),p=M(F),h=k(F,"P",{class:!0});var P=R(h);g=Z(P,b),y=Z(P," Call"),P.forEach(_),F.forEach(_),C=M(O),I=k(O,"DIV",{class:!0});var q=R(I);m=k(q,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-u3s2jz"&&(m.innerHTML=T),v=M(q),A=k(q,"BUTTON",{class:!0,"data-svelte-h":!0}),X(A)!=="svelte-om1ns7"&&(A.innerHTML=S),q.forEach(_),O.forEach(_),B.forEach(_),this.h()},h(){f(r,"class","caller-avatar svelte-1mc89jk"),f(o,"class","svelte-1mc89jk"),f(h,"class","call-type svelte-1mc89jk"),f(s,"class","caller-info svelte-1mc89jk"),f(m,"class","answer-btn svelte-1mc89jk"),f(A,"class","reject-btn svelte-1mc89jk"),f(I,"class","call-actions svelte-1mc89jk"),f(t,"class","incoming-call-modal svelte-1mc89jk"),f(e,"class","call-modal-overlay svelte-1mc89jk")},m(D,B){V(D,e,B),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(s,p),c(s,h),c(h,g),c(h,y),c(t,C),c(t,I),c(I,m),c(I,v),c(I,A),E||(N=[G(m,"click",n[7]),G(A,"click",n[8])],E=!0)},p(D,B){B&4&&i!==(i=D[2].username.charAt(0).toUpperCase()+"")&&ie(l,i),B&4&&u!==(u=D[2].username+"")&&ie(d,u),B&4&&b!==(b=D[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&ie(g,b)},d(D){D&&_(e),E=!1,Ie(N)}}}function lo(n){let e,t,s,r,i,l,a,o="You",u,d=[],p=new Map,h,b,g,y,C=n[6]?"ðŸ”‡":"ðŸŽ¤",I,m,T,v,A,S=n[5]?"ðŸ“¹":"ðŸ“·",E,N,D,B,O='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',F,L,U=n[5]&&ao(),P=Ye(n[3]);const q=Y=>Y[17].userId;for(let Y=0;Y<P.length;Y+=1){let x=ro(n,P,Y),K=q(x);p.set(K,d[Y]=co(K,x))}return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("video"),i=z(),U&&U.c(),l=z(),a=w("div"),a.textContent=o,u=z();for(let Y=0;Y<d.length;Y+=1)d[Y].c();h=z(),b=w("div"),g=w("button"),y=w("span"),I=J(C),T=z(),v=w("button"),A=w("span"),E=J(S),D=z(),B=w("button"),B.innerHTML=O,this.h()},l(Y){e=k(Y,"DIV",{class:!0});var x=R(e);t=k(x,"DIV",{class:!0});var K=R(t);s=k(K,"DIV",{class:!0});var H=R(s);r=k(H,"VIDEO",{class:!0}),R(r).forEach(_),i=M(H),U&&U.l(H),l=M(H),a=k(H,"DIV",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1l6ztyc"&&(a.textContent=o),H.forEach(_),u=M(K);for(let de=0;de<d.length;de+=1)d[de].l(K);K.forEach(_),h=M(x),b=k(x,"DIV",{class:!0});var W=R(b);g=k(W,"BUTTON",{class:!0,title:!0});var $=R(g);y=k($,"SPAN",{class:!0});var ne=R(y);I=Z(ne,C),ne.forEach(_),$.forEach(_),T=M(W),v=k(W,"BUTTON",{class:!0,title:!0});var le=R(v);A=k(le,"SPAN",{class:!0});var se=R(A);E=Z(se,S),se.forEach(_),le.forEach(_),D=M(W),B=k(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(B)!=="svelte-1rszrze"&&(B.innerHTML=O),W.forEach(_),x.forEach(_),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,f(r,"class","video-element svelte-1mc89jk"),he(r,"video-hidden",n[5]),f(a,"class","video-label svelte-1mc89jk"),f(s,"class","video-wrapper local-video svelte-1mc89jk"),f(t,"class","video-grid svelte-1mc89jk"),f(y,"class","control-icon svelte-1mc89jk"),f(g,"class","control-btn svelte-1mc89jk"),f(g,"title",m=n[6]?"Unmute":"Mute"),he(g,"active",n[6]),f(A,"class","control-icon svelte-1mc89jk"),f(v,"class","control-btn svelte-1mc89jk"),f(v,"title",N=n[5]?"Turn on camera":"Turn off camera"),he(v,"active",n[5]),f(B,"class","control-btn end-call-btn svelte-1mc89jk"),f(B,"title","End call"),f(b,"class","call-controls svelte-1mc89jk"),f(e,"class","active-call-container svelte-1mc89jk")},m(Y,x){V(Y,e,x),c(e,t),c(t,s),c(s,r),n[13](r),c(s,i),U&&U.m(s,null),c(s,l),c(s,a),c(t,u);for(let K=0;K<d.length;K+=1)d[K]&&d[K].m(t,null);c(e,h),c(e,b),c(b,g),c(g,y),c(y,I),c(b,T),c(b,v),c(v,A),c(A,E),c(b,D),c(b,B),F||(L=[G(g,"click",n[10]),G(v,"click",n[11]),G(B,"click",n[9])],F=!0)},p(Y,x){x&32&&he(r,"video-hidden",Y[5]),Y[5]?U||(U=ao(),U.c(),U.m(s,l)):U&&(U.d(1),U=null),x&10&&(P=Ye(Y[3]),d=Qt(d,x,q,1,Y,P,p,t,Jt,co,null,ro)),x&64&&C!==(C=Y[6]?"ðŸ”‡":"ðŸŽ¤")&&ie(I,C),x&64&&m!==(m=Y[6]?"Unmute":"Mute")&&f(g,"title",m),x&64&&he(g,"active",Y[6]),x&32&&S!==(S=Y[5]?"ðŸ“¹":"ðŸ“·")&&ie(E,S),x&32&&N!==(N=Y[5]?"Turn on camera":"Turn off camera")&&f(v,"title",N),x&32&&he(v,"active",Y[5])},d(Y){Y&&_(e),n[13](null),U&&U.d();for(let x=0;x<d.length;x+=1)d[x].d();F=!1,Ie(L)}}}function ao(n){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){f(e,"class","video-placeholder svelte-1mc89jk")},m(s,r){V(s,e,r)},d(s){s&&_(e)}}}function oo(n){let e,t,s="ðŸ‘¤",r,i,l=(n[17].username||"User")+"",a;return{c(){e=w("div"),t=w("span"),t.textContent=s,r=z(),i=w("span"),a=J(l),this.h()},l(o){e=k(o,"DIV",{class:!0});var u=R(e);t=k(u,"SPAN",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-18bpbb5"&&(t.textContent=s),r=M(u),i=k(u,"SPAN",{});var d=R(i);a=Z(d,l),d.forEach(_),u.forEach(_),this.h()},h(){f(t,"class","placeholder-icon svelte-1mc89jk"),f(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){V(o,e,u),c(e,t),c(e,r),c(e,i),c(i,a)},p(o,u){u&8&&l!==(l=(o[17].username||"User")+"")&&ie(a,l)},d(o){o&&_(e)}}}function co(n,e){let t,s,r=e[17],i,l,a,o=(e[17].username||"User")+"",u,d;const p=()=>e[14](s,r),h=()=>e[14](null,r);let b=!e[17].isVideoEnabled&&oo(e);return{key:n,first:null,c(){t=w("div"),s=w("video"),i=z(),b&&b.c(),l=z(),a=w("div"),u=J(o),d=z(),this.h()},l(g){t=k(g,"DIV",{class:!0});var y=R(t);s=k(y,"VIDEO",{class:!0}),R(s).forEach(_),i=M(y),b&&b.l(y),l=M(y),a=k(y,"DIV",{class:!0});var C=R(a);u=Z(C,o),C.forEach(_),d=M(y),y.forEach(_),this.h()},h(){s.autoplay=!0,s.playsInline=!0,f(s,"class","video-element svelte-1mc89jk"),he(s,"video-hidden",!e[17].isVideoEnabled),f(a,"class","video-label svelte-1mc89jk"),f(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(g,y){V(g,t,y),c(t,s),p(),c(t,i),b&&b.m(t,null),c(t,l),c(t,a),c(a,u),c(t,d)},p(g,y){e=g,r!==e[17]&&(h(),r=e[17],p()),y&8&&he(s,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?b&&(b.d(1),b=null):b?b.p(e,y):(b=oo(e),b.c(),b.m(t,l)),y&8&&o!==(o=(e[17].username||"User")+"")&&ie(u,o)},d(g){g&&_(t),h(),b&&b.d()}}}function Kp(n){let e,t,s=n[2]&&io(n),r=n[4]&&lo(n);return{c(){s&&s.c(),e=z(),r&&r.c(),t=Ne()},l(i){s&&s.l(i),e=M(i),r&&r.l(i),t=Ne()},m(i,l){s&&s.m(i,l),V(i,e,l),r&&r.m(i,l),V(i,t,l)},p(i,[l]){i[2]?s?s.p(i,l):(s=io(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[4]?r?r.p(i,l):(r=lo(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:ze,o:ze,d(i){i&&(_(e),_(t)),s&&s.d(i),r&&r.d(i)}}}function Xp(n,e,t){let s,r,i,l,a,o;Le(n,Vn,v=>t(15,s=v)),Le(n,ei,v=>t(2,r=v)),Le(n,ac,v=>t(3,i=v)),Le(n,Fs,v=>t(4,l=v)),Le(n,cs,v=>t(5,a=v)),Le(n,os,v=>t(6,o=v));let u,d={},p=null;mo(()=>{s&&(s.off("call-incoming"),s.off("call-accepted"),s.off("call-rejected"),s.off("call-ended"),s.off("call-offer"),s.off("call-answer-sdp"),s.off("call-ice-candidate"))});function h(){Ro()}async function b(){!r||!s||await mp(s,r.userId,r.isVideoCall)}function g(){!r||!s||vp(s,r.userId)}function y(){s&&_p(s)}function C(){bp()}function I(){kp()}function m(v){tt[v?"unshift":"push"](()=>{u=v,t(0,u),t(4,l)})}function T(v,A){tt[v?"unshift":"push"](()=>{d[A.userId]=v,t(1,d)})}return n.$$.update=()=>{if(n.$$.dirty&4100&&(r?(h(),t(12,p=cu(r.username,r.isVideoCall,()=>b()))):p&&(p.close(),t(12,p=null))),n.$$.dirty&17&&l&&u){const v=wp();v&&t(0,u.srcObject=v,u)}n.$$.dirty&10&&i.length>0&&i.forEach(v=>{const A=d[v.userId];A&&v.stream&&(A.srcObject=v.stream)})},[u,d,r,i,l,a,o,b,g,y,C,I,p,m,T]}class Zp extends dt{constructor(e){super(),ht(this,e,Xp,Kp,ft,{})}}const{window:uo}=Mr;function Jp(n){let e,t,s,r,i,l,a,o,u,d,p,h,b,g,y,C,I,m=n[2]?"â†’":"â†",T,v,A,S,E,N,D,B;function O(q){n[13](q)}let F={};n[1]!==void 0&&(F.activeView=n[1]),s=new gp({props:F}),tt.push(()=>zt(s,"activeView",O)),d=new Ah({});function L(q){n[14](q)}let U={};n[1]!==void 0&&(U.activeView=n[1]),b=new Yp({props:U}),tt.push(()=>zt(b,"activeView",L));let P=n[2]&&fo(n);return E=new Zp({}),{c(){e=w("div"),t=w("div"),Je(s.$$.fragment),i=z(),l=w("div"),a=z(),o=w("div"),u=w("div"),Je(d.$$.fragment),p=z(),h=w("div"),Je(b.$$.fragment),y=z(),P&&P.c(),C=z(),I=w("button"),T=J(m),S=z(),Je(E.$$.fragment),this.h()},l(q){e=k(q,"DIV",{class:!0});var Y=R(e);t=k(Y,"DIV",{class:!0,style:!0});var x=R(t);Ze(s.$$.fragment,x),i=M(x),l=k(x,"DIV",{class:!0}),R(l).forEach(_),x.forEach(_),a=M(Y),o=k(Y,"DIV",{class:!0});var K=R(o);u=k(K,"DIV",{class:!0});var H=R(u);Ze(d.$$.fragment,H),H.forEach(_),p=M(K),h=k(K,"DIV",{class:!0});var W=R(h);Ze(b.$$.fragment,W),W.forEach(_),K.forEach(_),y=M(Y),P&&P.l(Y),C=M(Y),I=k(Y,"BUTTON",{class:!0,title:!0,style:!0});var $=R(I);T=Z($,m),$.forEach(_),Y.forEach(_),S=M(q),Ze(E.$$.fragment,q),this.h()},h(){f(l,"class","resize-handle resize-handle-channel svelte-10wao8h"),f(t,"class","channel-sidebar-container svelte-10wao8h"),De(t,"width",n[3]+"px"),f(u,"class","svelte-10wao8h"),he(u,"hidden",n[1]!=="chat"),f(h,"class","svelte-10wao8h"),he(h,"hidden",n[1]!=="screen"),f(o,"class","main-content svelte-10wao8h"),f(I,"class","user-panel-toggle svelte-10wao8h"),f(I,"title",v=n[2]?"Hide user panel":"Show user panel"),f(I,"style",A=n[2]?`right: ${n[4]}px`:"right: 0"),he(I,"open",n[2]),f(e,"class","app-container svelte-10wao8h"),he(e,"resizing",n[5]||n[6])},m(q,Y){V(q,e,Y),c(e,t),Xe(s,t,null),c(t,i),c(t,l),c(e,a),c(e,o),c(o,u),Xe(d,u,null),c(o,p),c(o,h),Xe(b,h,null),c(e,y),P&&P.m(e,null),c(e,C),c(e,I),c(I,T),V(q,S,Y),Xe(E,q,Y),N=!0,D||(B=[G(l,"mousedown",n[8]),G(I,"click",n[15])],D=!0)},p(q,Y){const x={};!r&&Y&2&&(r=!0,x.activeView=q[1],Mt(()=>r=!1)),s.$set(x),(!N||Y&8)&&De(t,"width",q[3]+"px"),(!N||Y&2)&&he(u,"hidden",q[1]!=="chat");const K={};!g&&Y&2&&(g=!0,K.activeView=q[1],Mt(()=>g=!1)),b.$set(K),(!N||Y&2)&&he(h,"hidden",q[1]!=="screen"),q[2]?P?(P.p(q,Y),Y&4&&Ae(P,1)):(P=fo(q),P.c(),Ae(P,1),P.m(e,C)):P&&(qn(),Me(P,1,1,()=>{P=null}),xn()),(!N||Y&4)&&m!==(m=q[2]?"â†’":"â†")&&ie(T,m),(!N||Y&4&&v!==(v=q[2]?"Hide user panel":"Show user panel"))&&f(I,"title",v),(!N||Y&20&&A!==(A=q[2]?`right: ${q[4]}px`:"right: 0"))&&f(I,"style",A),(!N||Y&4)&&he(I,"open",q[2]),(!N||Y&96)&&he(e,"resizing",q[5]||q[6])},i(q){N||(Ae(s.$$.fragment,q),Ae(d.$$.fragment,q),Ae(b.$$.fragment,q),Ae(P),Ae(E.$$.fragment,q),N=!0)},o(q){Me(s.$$.fragment,q),Me(d.$$.fragment,q),Me(b.$$.fragment,q),Me(P),Me(E.$$.fragment,q),N=!1},d(q){q&&(_(e),_(S)),Ke(s),Ke(d),Ke(b),P&&P.d(),Ke(E,q),D=!1,Ie(B)}}}function Qp(n){let e,t;return e=new Jh({}),e.$on("login",n[7]),{c(){Je(e.$$.fragment)},l(s){Ze(e.$$.fragment,s)},m(s,r){Xe(e,s,r),t=!0},p:ze,i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){Ke(e,s)}}}function fo(n){let e,t,s,r,i,l,a;return r=new Up({}),{c(){e=w("div"),t=w("div"),s=z(),Je(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var u=R(e);t=k(u,"DIV",{class:!0}),R(t).forEach(_),s=M(u),Ze(r.$$.fragment,u),u.forEach(_),this.h()},h(){f(t,"class","resize-handle resize-handle-user svelte-10wao8h"),f(e,"class","user-panel-container svelte-10wao8h"),De(e,"width",n[4]+"px")},m(o,u){V(o,e,u),c(e,t),c(e,s),Xe(r,e,null),i=!0,l||(a=G(t,"mousedown",n[9]),l=!0)},p(o,u){(!i||u&16)&&De(e,"width",o[4]+"px")},i(o){i||(Ae(r.$$.fragment,o),i=!0)},o(o){Me(r.$$.fragment,o),i=!1},d(o){o&&_(e),Ke(r),l=!1,a()}}}function $p(n){let e,t,s,r,i,l;const a=[Qp,Jp],o=[];function u(d,p){return d[0]?1:0}return e=u(n),t=o[e]=a[e](n),{c(){t.c(),s=Ne()},l(d){t.l(d),s=Ne()},m(d,p){o[e].m(d,p),V(d,s,p),r=!0,i||(l=[G(uo,"mousemove",n[10]),G(uo,"mouseup",n[11])],i=!0)},p(d,[p]){let h=e;e=u(d),e===h?o[e].p(d,p):(qn(),Me(o[h],1,1,()=>{o[h]=null}),xn(),t=o[e],t?t.p(d,p):(t=o[e]=a[e](d),t.c()),Ae(t,1),t.m(s.parentNode,s))},i(d){r||(Ae(t),r=!0)},o(d){Me(t),r=!1},d(d){d&&_(s),o[e].d(d),i=!1,Ie(l)}}}function eg(n,e,t){let{data:s}=e,r="",i=!1,l="chat",a=!1,o=240,u=250,d=!1,p=!1;function h(v){r=v.detail,Of(r),t(0,i=!0)}function b(v){t(5,d=!0),v.preventDefault()}function g(v){t(6,p=!0),v.preventDefault()}function y(v){if(d){const A=v.clientX;A>=180&&A<=400&&t(3,o=A)}else if(p){const A=window.innerWidth-v.clientX;A>=200&&A<=500&&t(4,u=A)}}function C(){t(5,d=!1),t(6,p=!1)}mo(()=>{Lf()});function I(v){l=v,t(1,l)}function m(v){l=v,t(1,l)}const T=()=>t(2,a=!a);return n.$$set=v=>{"data"in v&&t(12,s=v.data)},[i,l,a,o,u,d,p,h,b,g,y,C,s,I,m,T]}class ag extends dt{constructor(e){super(),ht(this,e,eg,$p,ft,{data:12})}}export{ag as component};
