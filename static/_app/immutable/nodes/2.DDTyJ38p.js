import{r as Ie,s as dt,n as Oe,d as v,N as nt,i as j,f as c,O as W,K as f,h as k,j as R,l as M,P as J,m as w,o as z,Q as Ws,H as Me,R as He,e as re,S as lt,k as X,t as Z,T as Wt,L as Te,p as Pe,q as yn,M as it,U as Ys,V as Lt,W as Ro,X as Po,Y as he,Z as Oo,_ as Ic,$ as wi,a0 as Yr,B as Dc,a1 as Nc,a2 as Rc,a3 as Mo}from"../chunks/scheduler.CyB6C0io.js";import{a as be,S as ht,i as pt,f as Ut,d as Je,t as Ce,g as En,c as Cn,m as Qe,e as $e,b as et}from"../chunks/index.CliTUOID.js";import{w as wt}from"../chunks/index.K3LgXoeh.js";import{b as Ge}from"../chunks/index.CHnl-KTq.js";/* empty css                            */const Kr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Xe(n){return n?.length!==void 0?n:Array.from(n)}function tn(n,e){n.d(1),e.delete(n.key)}function nn(n,e,t,s,r,i,l,a,o,u,d,p){let h=n.length,_=i.length,g=h;const y={};for(;g--;)y[n[g].key]=g;const T=[],D=new Map,m=new Map,C=[];for(g=_;g--;){const E=p(r,i,g),N=t(E);let S=l.get(N);S?C.push(()=>S.p(E,e)):(S=u(N,E),S.c()),D.set(N,T[g]=S),N in y&&m.set(N,Math.abs(g-y[N]))}const b=new Set,A=new Set;function I(E){be(E,1),E.m(a,d),l.set(E.key,E),d=E.first,_--}for(;h&&_;){const E=T[_-1],N=n[h-1],S=E.key,F=N.key;E===N?(d=E.first,h--,_--):D.has(F)?!l.has(S)||b.has(S)?I(E):A.has(F)?h--:m.get(S)>m.get(F)?(A.add(S),I(E)):(b.add(F),h--):(o(N,l),h--)}for(;h--;){const E=n[h];D.has(E.key)||o(E,l)}for(;_;)I(T[_-1]);return Ie(C),T}const fn=Object.create(null);fn.open="0";fn.close="1";fn.ping="2";fn.pong="3";fn.message="4";fn.upgrade="5";fn.noop="6";const zs=Object.create(null);Object.keys(fn).forEach(n=>{zs[fn[n]]=n});const zr={type:"error",data:"parser error"},zo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Fo=typeof ArrayBuffer=="function",Bo=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Xr=({type:n,data:e},t,s)=>zo&&e instanceof Blob?t?s(e):yi(e,s):Fo&&(e instanceof ArrayBuffer||Bo(e))?t?s(e):yi(new Blob([e]),s):s(fn[n]+(e||"")),yi=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function Ei(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let $s;function Pc(n,e){if(zo&&n.data instanceof Blob)return n.data.arrayBuffer().then(Ei).then(e);if(Fo&&(n.data instanceof ArrayBuffer||Bo(n.data)))return e(Ei(n.data));Xr(n,!1,t=>{$s||($s=new TextEncoder),e($s.encode(t))})}const Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",as=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Ci.length;n++)as[Ci.charCodeAt(n)]=n;const Oc=n=>{let e=n.length*.75,t=n.length,s,r=0,i,l,a,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(s=0;s<t;s+=4)i=as[n.charCodeAt(s)],l=as[n.charCodeAt(s+1)],a=as[n.charCodeAt(s+2)],o=as[n.charCodeAt(s+3)],d[r++]=i<<2|l>>4,d[r++]=(l&15)<<4|a>>2,d[r++]=(a&3)<<6|o&63;return u},Mc=typeof ArrayBuffer=="function",Zr=(n,e)=>{if(typeof n!="string")return{type:"message",data:Lo(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:zc(n.substring(1),e)}:zs[t]?n.length>1?{type:zs[t],data:n.substring(1)}:{type:zs[t]}:zr},zc=(n,e)=>{if(Mc){const t=Oc(n);return Lo(t,e)}else return{base64:!0,data:n}},Lo=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Uo="",Fc=(n,e)=>{const t=n.length,s=new Array(t);let r=0;n.forEach((i,l)=>{Xr(i,!1,a=>{s[l]=a,++r===t&&e(s.join(Uo))})})},Bc=(n,e)=>{const t=n.split(Uo),s=[];for(let r=0;r<t.length;r++){const i=Zr(t[r],e);if(s.push(i),i.type==="error")break}return s};function Lc(){return new TransformStream({transform(n,e){Pc(n,t=>{const s=t.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let er;function Ss(n){return n.reduce((e,t)=>e+t.length,0)}function Is(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)t[r]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function Uc(n,e){er||(er=new TextDecoder);const t=[];let s=0,r=-1,i=!1;return new TransformStream({transform(l,a){for(t.push(l);;){if(s===0){if(Ss(t)<1)break;const o=Is(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(Ss(t)<2)break;const o=Is(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),s=3}else if(s===2){if(Ss(t)<8)break;const o=Is(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(zr);break}r=d*Math.pow(2,32)+u.getUint32(4),s=3}else{if(Ss(t)<r)break;const o=Is(t,r);a.enqueue(Zr(i?o:er.decode(o),e)),s=0}if(r===0||r>n){a.enqueue(zr);break}}}})}const xo=4;function ft(n){if(n)return xc(n)}function xc(n){for(var e in ft.prototype)n[e]=ft.prototype[e];return n}ft.prototype.on=ft.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};ft.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};ft.prototype.off=ft.prototype.removeListener=ft.prototype.removeAllListeners=ft.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};ft.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};ft.prototype.emitReserved=ft.prototype.emit;ft.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};ft.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ks=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Vt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),qc="arraybuffer";function qo(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const jc=Vt.setTimeout,Vc=Vt.clearTimeout;function Xs(n,e){e.useNativeTimers?(n.setTimeoutFn=jc.bind(Vt),n.clearTimeoutFn=Vc.bind(Vt)):(n.setTimeoutFn=Vt.setTimeout.bind(Vt),n.clearTimeoutFn=Vt.clearTimeout.bind(Vt))}const Hc=1.33;function Gc(n){return typeof n=="string"?Wc(n):Math.ceil((n.byteLength||n.size)*Hc)}function Wc(n){let e=0,t=0;for(let s=0,r=n.length;s<r;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function jo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Yc(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Kc(n){let e={},t=n.split("&");for(let s=0,r=t.length;s<r;s++){let i=t[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Xc extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Jr extends ft{constructor(e){super(),this.writable=!1,Xs(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Xc(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Zr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Yc(e);return t.length?"?"+t:""}}class Zc extends Jr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Bc(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Fc(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=jo()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Vo=!1;try{Vo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Jc=Vo;function Qc(){}class $c extends Zc{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class un extends ft{constructor(e,t,s){super(),this.createRequest=e,Xs(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=qo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=un.requestsCount++,un.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Qc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete un.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}un.requestsCount=0;un.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ti);else if(typeof addEventListener=="function"){const n="onpagehide"in Vt?"pagehide":"unload";addEventListener(n,Ti,!1)}}function Ti(){for(let n in un.requests)un.requests.hasOwnProperty(n)&&un.requests[n].abort()}const eu=(function(){const n=Ho({xdomain:!1});return n&&n.responseType!==null})();class tu extends $c{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=eu&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new un(Ho,this.uri(),e)}}function Ho(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Jc))return new XMLHttpRequest}catch{}if(!e)try{return new Vt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Go=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nu extends Jr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Go?{}:qo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;Xr(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&Ks(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=jo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const tr=Vt.WebSocket||Vt.MozWebSocket;class su extends nu{createSocket(e,t,s){return Go?new tr(e,t,s):t?new tr(e,t):new tr(e)}doWrite(e,t){this.ws.send(t)}}class ru extends Jr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Uc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=Lc();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:a,value:o})=>{a||(this.onPacket(o),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&Ks(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const iu={websocket:su,webtransport:ru,polling:tu},lu=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,au=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let r=lu.exec(n||""),i={},l=14;for(;l--;)i[au[l]]=r[l]||"";return t!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ou(i,i.path),i.queryKey=cu(i,i.query),i}function ou(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function cu(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(t[r]=i)}),t}const Br=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fs=[];Br&&addEventListener("offline",()=>{Fs.forEach(n=>n())},!1);class wn extends ft{constructor(e,t){if(super(),this.binaryType=qc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=Fr(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Fr(t.host).host);Xs(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Kc(this.opts.query)),Br&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=xo,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&wn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",wn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(t+=Gc(r)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ks(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(wn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Br&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Fs.indexOf(this._offlineEventListener);s!==-1&&Fs.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}wn.protocol=xo;class uu extends wn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;wn.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wn.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,d(),t.close(),t=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function a(){l("transport closed")}function o(){l("socket closed")}function u(p){t&&p.name!==t.name&&i()}const d=()=>{t.removeListener("open",r),t.removeListener("error",l),t.removeListener("close",a),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",l),t.once("close",a),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let fu=class extends uu{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>iu[r]).filter(r=>!!r)),super(e,s)}};function du(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=Fr(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(t&&t.port===s.port?"":":"+s.port),s}const hu=typeof ArrayBuffer=="function",pu=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Wo=Object.prototype.toString,gu=typeof Blob=="function"||typeof Blob<"u"&&Wo.call(Blob)==="[object BlobConstructor]",mu=typeof File=="function"||typeof File<"u"&&Wo.call(File)==="[object FileConstructor]";function Qr(n){return hu&&(n instanceof ArrayBuffer||pu(n))||gu&&n instanceof Blob||mu&&n instanceof File}function Bs(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(Bs(n[t]))return!0;return!1}if(Qr(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Bs(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Bs(n[t]))return!0;return!1}function vu(n){const e=[],t=n.data,s=n;return s.data=Lr(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Lr(n,e){if(!n)return n;if(Qr(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Lr(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Lr(n[s],e));return t}return n}function _u(n,e){return n.data=Ur(n.data,e),delete n.attachments,n}function Ur(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Ur(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Ur(n[t],e));return n}const bu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ku=5;var qe;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(qe||(qe={}));class wu{constructor(e){this.replacer=e}encode(e){return(e.type===qe.EVENT||e.type===qe.ACK)&&Bs(e)?this.encodeAsBinary({type:e.type===qe.EVENT?qe.BINARY_EVENT:qe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===qe.BINARY_EVENT||e.type===qe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=vu(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function Ai(n){return Object.prototype.toString.call(n)==="[object Object]"}class $r extends ft{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===qe.BINARY_EVENT;s||t.type===qe.BINARY_ACK?(t.type=s?qe.EVENT:qe.ACK,this.reconstructor=new yu(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Qr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(qe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===qe.BINARY_EVENT||s.type===qe.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(i,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(i,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if($r.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case qe.CONNECT:return Ai(t);case qe.DISCONNECT:return t===void 0;case qe.CONNECT_ERROR:return typeof t=="string"||Ai(t);case qe.EVENT:case qe.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&bu.indexOf(t[0])===-1);case qe.ACK:case qe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class yu{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=_u(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Eu=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$r,Encoder:wu,get PacketType(){return qe},protocol:ku},Symbol.toStringTag,{value:"Module"}));function Jt(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const Cu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Yo extends ft{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Jt(e,"open",this.onopen.bind(this)),Jt(e,"packet",this.onpacket.bind(this)),Jt(e,"error",this.onerror.bind(this)),Jt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,i;if(Cu.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:qe.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,p=t.pop();this._registerAckCallback(d,p),l.id=d}const a=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(o?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r),l=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((s,r)=>{const i=(l,a)=>l?r(l):s(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qe.EVENT:case qe.BINARY_EVENT:this.onevent(e);break;case qe.ACK:case qe.BINARY_ACK:this.onack(e);break;case qe.DISCONNECT:this.ondisconnect();break;case qe.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:qe.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Yn(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Yn.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Yn.prototype.reset=function(){this.attempts=0};Yn.prototype.setMin=function(n){this.ms=n};Yn.prototype.setMax=function(n){this.max=n};Yn.prototype.setJitter=function(n){this.jitter=n};class xr extends ft{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Xs(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Yn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Eu;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new fu(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Jt(t,"open",function(){s.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},l=Jt(t,"error",i);if(this._timeout!==!1){const a=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Jt(e,"ping",this.onping.bind(this)),Jt(e,"data",this.ondata.bind(this)),Jt(e,"error",this.onerror.bind(this)),Jt(e,"close",this.onclose.bind(this)),Jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ks(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Yo(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Jn={};function Ls(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=du(n,e.path||"/socket.io"),s=t.source,r=t.id,i=t.path,l=Jn[r]&&i in Jn[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let o;return a?o=new xr(s,e):(Jn[r]||(Jn[r]=new xr(s,e)),o=Jn[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(Ls,{Manager:xr,Socket:Yo,io:Ls,connect:Ls});let Qn=null;function Tu(){return Ge&&localStorage.getItem("notificationSound")||"/sounds/ProjectSound.ogg"}function Au(){if(!Ge)return .5;const n=localStorage.getItem("notificationVolume");return n?parseFloat(n):.5}function Ko(){if(Ge)try{Qn||(Qn=new Audio),Qn.src=Tu(),Qn.volume=Au(),Qn.play().catch(n=>{console.error("Failed to play notification sound:",n)})}catch(n){console.error("Error setting up notification sound:",n)}}function Xo(){if(!Ge||(initAudio(),!audioContext))return;const n=()=>{const e=audioContext.createOscillator(),t=audioContext.createOscillator(),s=audioContext.createGain();e.connect(s),t.connect(s),s.connect(audioContext.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",s.gain.setValueAtTime(.15,audioContext.currentTime),s.gain.exponentialRampToValueAtTime(.01,audioContext.currentTime+.8),e.start(audioContext.currentTime),t.start(audioContext.currentTime),e.stop(audioContext.currentTime+.8),t.stop(audioContext.currentTime+.8)};n(),setTimeout(n,1e3)}function Su(n,e,t){if(!Ge||e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(Ko(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let r="",i="",l="/icon-192.png";const a=t?`${n.user} in #${t}`:n.user;switch(n.type){case"text":r=a,i=n.text;break;case"gif":r=a,i="ðŸŽ¬ Sent a GIF";break;case"file":r=a,i=`ðŸ“Ž Sent a file: ${n.fileName}`;break}const o=new Notification(r,{body:i,icon:l,badge:l,tag:`message-${n.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function Iu(n,e,t,s){if(!Ge)return null;if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;Xo();const i=`Incoming ${e?"Video":"Voice"} Call`,l=`${n} is calling...`,a="/icon-192.png",o=new Notification(i,{body:l,icon:a,badge:a,tag:`call-${n}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function ei(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Bn=ei();function Zo(n){Bn=n}var fs={exec:()=>null};function We(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(r,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(Dt.caret,"$1"),t=t.replace(r,l),s},getRegex:()=>new RegExp(t,e)};return s}var Du=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Dt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Nu=/^(?:[ \t]*(?:\n|$))+/,Ru=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Pu=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ps=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ou=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ti=/(?:[*+-]|\d{1,9}[.)])/,Jo=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Qo=We(Jo).replace(/bull/g,ti).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Mu=We(Jo).replace(/bull/g,ti).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ni=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,zu=/^[^\n]+/,si=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Fu=We(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",si).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Bu=We(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ti).getRegex(),Zs="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ri=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Lu=We("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ri).replace("tag",Zs).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$o=We(ni).replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex(),Uu=We(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$o).getRegex(),ii={blockquote:Uu,code:Ru,def:Fu,fences:Pu,heading:Ou,hr:ps,html:Lu,lheading:Qo,list:Bu,newline:Nu,paragraph:$o,table:fs,text:zu},Si=We("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex(),xu={...ii,lheading:Mu,table:Si,paragraph:We(ni).replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Si).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex()},qu={...ii,html:We(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ri).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:fs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:We(ni).replace("hr",ps).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Qo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ju=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Vu=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ec=/^( {2,}|\\)\n(?!\s*$)/,Hu=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Js=/[\p{P}\p{S}]/u,li=/[\s\p{P}\p{S}]/u,tc=/[^\s\p{P}\p{S}]/u,Gu=We(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,li).getRegex(),nc=/(?!~)[\p{P}\p{S}]/u,Wu=/(?!~)[\s\p{P}\p{S}]/u,Yu=/(?:[^\s\p{P}\p{S}]|~)/u,Ku=We(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Du?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),sc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Xu=We(sc,"u").replace(/punct/g,Js).getRegex(),Zu=We(sc,"u").replace(/punct/g,nc).getRegex(),rc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ju=We(rc,"gu").replace(/notPunctSpace/g,tc).replace(/punctSpace/g,li).replace(/punct/g,Js).getRegex(),Qu=We(rc,"gu").replace(/notPunctSpace/g,Yu).replace(/punctSpace/g,Wu).replace(/punct/g,nc).getRegex(),$u=We("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,tc).replace(/punctSpace/g,li).replace(/punct/g,Js).getRegex(),ef=We(/\\(punct)/,"gu").replace(/punct/g,Js).getRegex(),tf=We(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nf=We(ri).replace("(?:-->|$)","-->").getRegex(),sf=We("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nf).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xs=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,rf=We(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ic=We(/^!?\[(label)\]\[(ref)\]/).replace("label",xs).replace("ref",si).getRegex(),lc=We(/^!?\[(ref)\](?:\[\])?/).replace("ref",si).getRegex(),lf=We("reflink|nolink(?!\\()","g").replace("reflink",ic).replace("nolink",lc).getRegex(),Ii=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ai={_backpedal:fs,anyPunctuation:ef,autolink:tf,blockSkip:Ku,br:ec,code:Vu,del:fs,emStrongLDelim:Xu,emStrongRDelimAst:Ju,emStrongRDelimUnd:$u,escape:ju,link:rf,nolink:lc,punctuation:Gu,reflink:ic,reflinkSearch:lf,tag:sf,text:Hu,url:fs},af={...ai,link:We(/^!?\[(label)\]\((.*?)\)/).replace("label",xs).getRegex(),reflink:We(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xs).getRegex()},qr={...ai,emStrongRDelimAst:Qu,emStrongLDelim:Zu,url:We(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ii).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:We(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ii).getRegex()},of={...qr,br:We(ec).replace("{2,}","*").getRegex(),text:We(qr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ds={normal:ii,gfm:xu,pedantic:qu},$n={normal:ai,gfm:qr,breaks:of,pedantic:af},cf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Di=n=>cf[n];function mn(n,e){if(e){if(Dt.escapeTest.test(n))return n.replace(Dt.escapeReplace,Di)}else if(Dt.escapeTestNoEncode.test(n))return n.replace(Dt.escapeReplaceNoEncode,Di);return n}function Ni(n){try{n=encodeURI(n).replace(Dt.percentDecode,"%")}catch{return null}return n}function Ri(n,e){let t=n.replace(Dt.findPipe,(i,l,a)=>{let o=!1,u=l;for(;--u>=0&&a[u]==="\\";)o=!o;return o?"|":" |"}),s=t.split(Dt.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(Dt.slashPipe,"|");return s}function es(n,e,t){let s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function uf(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function Pi(n,e,t,s,r){let i=e.href,l=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:l,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}function ff(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let r=s[1];return e.split(`
`).map(i=>{let l=i.match(t.other.beginningSpace);if(l===null)return i;let[a]=l;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}var qs=class{options;rules;lexer;constructor(n){this.options=n||Bn}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:es(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=ff(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=es(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:es(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=es(e[0],`
`).split(`
`),s="",r="",i=[];for(;t.length>0;){let l=!1,a=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))a.push(t[o]),l=!0;else if(!l)a.push(t[o]);else break;t=t.slice(o);let u=a.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,r=r?`${r}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=p,t.length===0)break;let h=i.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let _=h,g=_.raw+`
`+t.join(`
`),y=this.blockquote(g);i[i.length-1]=y,s=s.substring(0,s.length-_.raw.length)+y.raw,r=r.substring(0,r.length-_.text.length)+y.text;break}else if(h?.type==="list"){let _=h,g=_.raw+`
`+t.join(`
`),y=this.list(g);i[i.length-1]=y,s=s.substring(0,s.length-h.raw.length)+y.raw,r=r.substring(0,r.length-_.raw.length)+y.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,r={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let i=this.rules.other.listItemRegex(t),l=!1;for(;n;){let o=!1,u="",d="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),h=n.split(`
`,1)[0],_=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):_?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=e[1].length),_&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,n=n.substring(h.length+1),o=!0),!o){let y=this.rules.other.nextBulletRegex(g),T=this.rules.other.hrRegex(g),D=this.rules.other.fencesBeginRegex(g),m=this.rules.other.headingBeginRegex(g),C=this.rules.other.htmlBeginRegex(g);for(;n;){let b=n.split(`
`,1)[0],A;if(h=b,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),A=h):A=h.replace(this.rules.other.tabCharGlobal,"    "),D.test(h)||m.test(h)||C.test(h)||y.test(h)||T.test(h))break;if(A.search(this.rules.other.nonSpaceChar)>=g||!h.trim())d+=`
`+A.slice(g);else{if(_||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||D.test(p)||m.test(p)||T.test(p))break;d+=`
`+h}!_&&!h.trim()&&(_=!0),u+=b+`
`,n=n.substring(b.length+1),p=A.slice(g)}}r.loose||(l?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0)),r.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),r.raw+=u}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let o of r.items){if(this.lexer.state.top=!1,o.tokens=this.lexer.blockTokens(o.text,[]),o.task){if(o.text=o.text.replace(this.rules.other.listReplaceTask,""),o.tokens[0]?.type==="text"||o.tokens[0]?.type==="paragraph"){o.tokens[0].raw=o.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),o.tokens[0].text=o.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(o.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};o.checked=d.checked,r.loose?o.tokens[0]&&["paragraph","text"].includes(o.tokens[0].type)&&"tokens"in o.tokens[0]&&o.tokens[0].tokens?(o.tokens[0].raw=d.raw+o.tokens[0].raw,o.tokens[0].text=d.raw+o.tokens[0].text,o.tokens[0].tokens.unshift(d)):o.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):o.tokens.unshift(d)}}if(!r.loose){let u=o.tokens.filter(p=>p.type==="space"),d=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=d}}if(r.loose)for(let o of r.items){o.loose=!0;for(let u of o.tokens)u.type==="text"&&(u.type="paragraph")}return r}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:r}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Ri(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(Ri(l,i.header.length).map((a,o)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[o]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=es(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=uf(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),Pi(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[s.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Pi(t,r,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...s[0]].length-1,i,l,a=r,o=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+r);(s=u.exec(e))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(l=[...i].length,s[3]||s[4]){a+=l;continue}else if((s[5]||s[6])&&r%3&&!((r+l)%3)){o+=l;continue}if(a-=l,a>0)continue;l=Math.min(l,l+a+o);let d=[...s[0]][0].length,p=n.slice(0,r+s.index+d+l);if(Math.min(r,l)%2){let _=p.slice(1,-1);return{type:"em",raw:p,text:_,tokens:this.lexer.inlineTokens(_)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},$t=class jr{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Bn,this.options.tokenizer=this.options.tokenizer||new qs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Dt,block:Ds.normal,inline:$n.normal};this.options.pedantic?(t.block=Ds.pedantic,t.inline=$n.pedantic):this.options.gfm&&(t.block=Ds.gfm,this.options.breaks?t.inline=$n.breaks:t.inline=$n.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ds,inline:$n}}static lex(e,t){return new jr(t).lex(e)}static lexInline(e,t){return new jr(t).inlineTokens(e)}lex(e){e=e.replace(Dt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(Dt.tabCharGlobal,"    ").replace(Dt.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let l=t.at(-1);r.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,a=e.slice(1),o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},a),typeof o=="number"&&o>=0&&(l=Math.min(l,o))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let l=t.at(-1);s&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r),s=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let l=!1,a="";for(;e;){l||(a=""),l=!1;let o;if(this.options.extensions?.inline?.some(d=>(o=d.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let d=t.at(-1);o.type==="text"&&d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,s,a)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let u=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),h;this.options.extensions.startInline.forEach(_=>{h=_.call({lexer:this},p),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(a=o.raw.slice(-1)),l=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},js=class{options;parser;constructor(n){this.options=n||Bn}space(n){return""}code({text:n,lang:e,escaped:t}){let s=(e||"").match(Dt.notSpaceStart)?.[0],r=n.replace(Dt.endingNewline,"")+`
`;return s?'<pre><code class="language-'+mn(s)+'">'+(t?r:mn(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:mn(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let l=0;l<n.items.length;l++){let a=n.items[l];s+=this.listitem(a)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+s+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let r=0;r<n.header.length;r++)t+=this.tablecell(n.header[r]);e+=this.tablerow({text:t});let s="";for(let r=0;r<n.rows.length;r++){let i=n.rows[r];t="";for(let l=0;l<i.length;l++)t+=this.tablecell(i[l]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${mn(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),r=Ni(n);if(r===null)return s;n=r;let i='<a href="'+n+'"';return e&&(i+=' title="'+mn(e)+'"'),i+=">"+s+"</a>",i}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let r=Ni(n);if(r===null)return mn(t);n=r;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${mn(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:mn(n.text)}},oi=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},en=class Vr{options;renderer;textRenderer;constructor(e){this.options=e||Bn,this.options.renderer=this.options.renderer||new js,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new oi}static parse(e,t){return new Vr(t).parse(e)}static parseInline(e,t){return new Vr(t).parseInline(e)}parse(e){let t="";for(let s=0;s<e.length;s++){let r=e[s];if(this.options.extensions?.renderers?.[r.type]){let l=r,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){t+=a||"";continue}}let i=r;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}parseInline(e,t=this.renderer){let s="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=a||"";continue}}let l=i;switch(l.type){case"escape":{s+=t.text(l);break}case"html":{s+=t.html(l);break}case"link":{s+=t.link(l);break}case"image":{s+=t.image(l);break}case"checkbox":{s+=t.checkbox(l);break}case"strong":{s+=t.strong(l);break}case"em":{s+=t.em(l);break}case"codespan":{s+=t.codespan(l);break}case"br":{s+=t.br(l);break}case"del":{s+=t.del(l);break}case"text":{s+=t.text(l);break}default:{let a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}},os=class{options;block;constructor(n){this.options=n||Bn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?$t.lex:$t.lexInline}provideParser(){return this.block?en.parse:en.parseInline}},df=class{defaults=ei();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=en;Renderer=js;TextRenderer=oi;Lexer=$t;Tokenizer=qs;Hooks=os;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let s of n)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let r=s;for(let i of r.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of r.rows)for(let l of i)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let r=s;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let l=r[i].flat(1/0);t=t.concat(this.walkTokens(l,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...l){let a=r.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),t.renderer){let r=this.defaults.renderer||new js(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,a=t.renderer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d||""}}s.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new qs(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,a=t.tokenizer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new os;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,a=t.hooks[l],o=r[l];os.passThroughHooks.has(i)?r[l]=u=>{if(this.defaults.async&&os.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await a.call(r,u);return o.call(r,p)})();let d=a.call(r,u);return o.call(r,d)}:r[l]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;s.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),r&&(a=a.concat(r.call(this,l))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return $t.lex(n,e??this.defaults)}parser(n,e){return en.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let l=r.hooks?await r.hooks.preprocess(e):e,a=await(r.hooks?await r.hooks.provideLexer():n?$t.lex:$t.lexInline)(l,r),o=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():n?en.parse:en.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let l=(r.hooks?r.hooks.provideLexer():n?$t.lex:$t.lexInline)(e,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():n?en.parse:en.parseInline)(l,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(l){return i(l)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+mn(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},zn=new df;function Ke(n,e){return zn.parse(n,e)}Ke.options=Ke.setOptions=function(n){return zn.setOptions(n),Ke.defaults=zn.defaults,Zo(Ke.defaults),Ke};Ke.getDefaults=ei;Ke.defaults=Bn;Ke.use=function(...n){return zn.use(...n),Ke.defaults=zn.defaults,Zo(Ke.defaults),Ke};Ke.walkTokens=function(n,e){return zn.walkTokens(n,e)};Ke.parseInline=zn.parseInline;Ke.Parser=en;Ke.parser=en.parse;Ke.Renderer=js;Ke.TextRenderer=oi;Ke.Lexer=$t;Ke.lexer=$t.lex;Ke.Tokenizer=qs;Ke.Hooks=os;Ke.parse=Ke;Ke.options;Ke.setOptions;Ke.use;Ke.walkTokens;Ke.parseInline;en.parse;$t.lex;var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ac(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nr={exports:{}},Mi;function hf(){return Mi||(Mi=1,(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var t=(function(s){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function m(C){return C instanceof o?new o(C.type,m(C.content),C.alias):Array.isArray(C)?C.map(m):C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++i}),m.__id},clone:function m(C,b){b=b||{};var A,I;switch(a.util.type(C)){case"Object":if(I=a.util.objId(C),b[I])return b[I];A={},b[I]=A;for(var E in C)C.hasOwnProperty(E)&&(A[E]=m(C[E],b));return A;case"Array":return I=a.util.objId(C),b[I]?b[I]:(A=[],b[I]=A,C.forEach(function(N,S){A[S]=m(N,b)}),A);default:return C}},getLanguage:function(m){for(;m;){var C=r.exec(m.className);if(C)return C[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,C){m.className=m.className.replace(RegExp(r,"gi"),""),m.classList.add("language-"+C)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(m){var C=document.getElementsByTagName("script");for(var b in C)if(C[b].src==m)return C[b]}return null}},isActive:function(m,C,b){for(var A="no-"+C;m;){var I=m.classList;if(I.contains(C))return!0;if(I.contains(A))return!1;m=m.parentElement}return!!b}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(m,C){var b=a.util.clone(a.languages[m]);for(var A in C)b[A]=C[A];return b},insertBefore:function(m,C,b,A){A=A||a.languages;var I=A[m],E={};for(var N in I)if(I.hasOwnProperty(N)){if(N==C)for(var S in b)b.hasOwnProperty(S)&&(E[S]=b[S]);b.hasOwnProperty(N)||(E[N]=I[N])}var F=A[m];return A[m]=E,a.languages.DFS(a.languages,function(P,O){O===F&&P!=m&&(this[P]=E)}),E},DFS:function m(C,b,A,I){I=I||{};var E=a.util.objId;for(var N in C)if(C.hasOwnProperty(N)){b.call(C,N,C[N],A||N);var S=C[N],F=a.util.type(S);F==="Object"&&!I[E(S)]?(I[E(S)]=!0,m(S,b,null,I)):F==="Array"&&!I[E(S)]&&(I[E(S)]=!0,m(S,b,N,I))}}},plugins:{},highlightAll:function(m,C){a.highlightAllUnder(document,m,C)},highlightAllUnder:function(m,C,b){var A={callback:b,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),a.hooks.run("before-all-elements-highlight",A);for(var I=0,E;E=A.elements[I++];)a.highlightElement(E,C===!0,A.callback)},highlightElement:function(m,C,b){var A=a.util.getLanguage(m),I=a.languages[A];a.util.setLanguage(m,A);var E=m.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(E,A);var N=m.textContent,S={element:m,language:A,grammar:I,code:N};function F(O){S.highlightedCode=O,a.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,a.hooks.run("after-highlight",S),a.hooks.run("complete",S),b&&b.call(S.element)}if(a.hooks.run("before-sanity-check",S),E=S.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!S.code){a.hooks.run("complete",S),b&&b.call(S.element);return}if(a.hooks.run("before-highlight",S),!S.grammar){F(a.util.encode(S.code));return}if(C&&s.Worker){var P=new Worker(a.filename);P.onmessage=function(O){F(O.data)},P.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else F(a.highlight(S.code,S.grammar,S.language))},highlight:function(m,C,b){var A={code:m,grammar:C,language:b};if(a.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=a.tokenize(A.code,A.grammar),a.hooks.run("after-tokenize",A),o.stringify(a.util.encode(A.tokens),A.language)},tokenize:function(m,C){var b=C.rest;if(b){for(var A in b)C[A]=b[A];delete C.rest}var I=new p;return h(I,I.head,m),d(m,I,C,I.head,0),g(I)},hooks:{all:{},add:function(m,C){var b=a.hooks.all;b[m]=b[m]||[],b[m].push(C)},run:function(m,C){var b=a.hooks.all[m];if(!(!b||!b.length))for(var A=0,I;I=b[A++];)I(C)}},Token:o};s.Prism=a;function o(m,C,b,A){this.type=m,this.content=C,this.alias=b,this.length=(A||"").length|0}o.stringify=function m(C,b){if(typeof C=="string")return C;if(Array.isArray(C)){var A="";return C.forEach(function(F){A+=m(F,b)}),A}var I={type:C.type,content:m(C.content,b),tag:"span",classes:["token",C.type],attributes:{},language:b},E=C.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(I.classes,E):I.classes.push(E)),a.hooks.run("wrap",I);var N="";for(var S in I.attributes)N+=" "+S+'="'+(I.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+N+">"+I.content+"</"+I.tag+">"};function u(m,C,b,A){m.lastIndex=C;var I=m.exec(b);if(I&&A&&I[1]){var E=I[1].length;I.index+=E,I[0]=I[0].slice(E)}return I}function d(m,C,b,A,I,E){for(var N in b)if(!(!b.hasOwnProperty(N)||!b[N])){var S=b[N];S=Array.isArray(S)?S:[S];for(var F=0;F<S.length;++F){if(E&&E.cause==N+","+F)return;var P=S[F],O=P.inside,B=!!P.lookbehind,x=!!P.greedy,L=P.alias;if(x&&!P.pattern.global){var H=P.pattern.toString().match(/[imsuy]*$/)[0];P.pattern=RegExp(P.pattern.source,H+"g")}for(var V=P.pattern||P,U=A.next,G=I;U!==C.tail&&!(E&&G>=E.reach);G+=U.value.length,U=U.next){var Y=U.value;if(C.length>m.length)return;if(!(Y instanceof o)){var K=1,$;if(x){if($=u(V,G,m,B),!$||$.index>=m.length)break;var de=$.index,ee=$.index+$[0].length,ae=G;for(ae+=U.value.length;de>=ae;)U=U.next,ae+=U.value.length;if(ae-=U.value.length,G=ae,U.value instanceof o)continue;for(var ie=U;ie!==C.tail&&(ae<ee||typeof ie.value=="string");ie=ie.next)K++,ae+=ie.value.length;K--,Y=m.slice(G,ae),$.index-=G}else if($=u(V,0,Y,B),!$)continue;var de=$.index,le=$[0],te=Y.slice(0,de),ue=Y.slice(de+le.length),_e=G+Y.length;E&&_e>E.reach&&(E.reach=_e);var Ee=U.prev;te&&(Ee=h(C,Ee,te),G+=te.length),_(C,Ee,K);var Le=new o(N,O?a.tokenize(le,O):le,L,le);if(U=h(C,Ee,Le),ue&&h(C,U,ue),K>1){var ve={cause:N+","+F,reach:_e};d(m,C,b,U.prev,G,ve),E&&ve.reach>E.reach&&(E.reach=ve.reach)}}}}}}function p(){var m={value:null,prev:null,next:null},C={value:null,prev:m,next:null};m.next=C,this.head=m,this.tail=C,this.length=0}function h(m,C,b){var A=C.next,I={value:b,prev:C,next:A};return C.next=I,A.prev=I,m.length++,I}function _(m,C,b){for(var A=C.next,I=0;I<b&&A!==m.tail;I++)A=A.next;C.next=A,A.prev=C,m.length-=I}function g(m){for(var C=[],b=m.head.next;b!==m.tail;)C.push(b.value),b=b.next;return C}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(m){var C=JSON.parse(m.data),b=C.language,A=C.code,I=C.immediateClose;s.postMessage(a.highlight(A,a.languages[b],b)),I&&s.close()},!1)),a;var y=a.util.currentScript();y&&(a.filename=y.src,y.hasAttribute("data-manual")&&(a.manual=!0));function T(){a.manual||a.highlightAll()}if(!a.manual){var D=document.readyState;D==="loading"||D==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",T):window.requestAnimationFrame?window.requestAnimationFrame(T):window.setTimeout(T,16)}return a})(e);n.exports&&(n.exports=t),typeof Oi<"u"&&(Oi.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};a["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(s,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,(function(s){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var i=s.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))})(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,(function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",r=function(y,T){return"âœ– Error "+y+" while fetching file: "+T},i="âœ– Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",o="loading",u="loaded",d="failed",p="pre[data-src]:not(["+a+'="'+u+'"]):not(['+a+'="'+o+'"])';function h(y,T,D){var m=new XMLHttpRequest;m.open("GET",y,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?T(m.responseText):m.status>=400?D(r(m.status,m.statusText)):D(i))},m.send(null)}function _(y){var T=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(T){var D=Number(T[1]),m=T[2],C=T[3];return m?C?[D,Number(C)]:[D,void 0]:[D,D]}}t.hooks.add("before-highlightall",function(y){y.selector+=", "+p}),t.hooks.add("before-sanity-check",function(y){var T=y.element;if(T.matches(p)){y.code="",T.setAttribute(a,o);var D=T.appendChild(document.createElement("CODE"));D.textContent=s;var m=T.getAttribute("data-src"),C=y.language;if(C==="none"){var b=(/\.(\w+)$/.exec(m)||[,"none"])[1];C=l[b]||b}t.util.setLanguage(D,C),t.util.setLanguage(T,C);var A=t.plugins.autoloader;A&&A.loadLanguages(C),h(m,function(I){T.setAttribute(a,u);var E=_(T.getAttribute("data-range"));if(E){var N=I.split(/\r\n?|\n/g),S=E[0],F=E[1]==null?N.length:E[1];S<0&&(S+=N.length),S=Math.max(0,Math.min(S-1,N.length)),F<0&&(F+=N.length),F=Math.max(0,Math.min(F,N.length)),I=N.slice(S,F).join(`
`),T.hasAttribute("data-start")||T.setAttribute("data-start",String(S+1))}D.textContent=I,t.highlightElement(D)},function(I){T.setAttribute(a,d),D.textContent=I})}}),t.plugins.fileHighlight={highlight:function(T){for(var D=(T||document).querySelectorAll(p),m=0,C;C=D[m++];)t.highlightElement(C)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(nr)),nr.exports}var pf=hf();const sr=ac(pf);const{entries:oc,setPrototypeOf:zi,isFrozen:gf,getPrototypeOf:mf,getOwnPropertyDescriptor:vf}=Object;let{freeze:Nt,seal:Yt,create:Hr}=Object,{apply:Gr,construct:Wr}=typeof Reflect<"u"&&Reflect;Nt||(Nt=function(e){return e});Yt||(Yt=function(e){return e});Gr||(Gr=function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return e.apply(t,r)});Wr||(Wr=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new e(...s)});const Ns=Rt(Array.prototype.forEach),_f=Rt(Array.prototype.lastIndexOf),Fi=Rt(Array.prototype.pop),ts=Rt(Array.prototype.push),bf=Rt(Array.prototype.splice),Us=Rt(String.prototype.toLowerCase),rr=Rt(String.prototype.toString),ir=Rt(String.prototype.match),ns=Rt(String.prototype.replace),kf=Rt(String.prototype.indexOf),wf=Rt(String.prototype.trim),Zt=Rt(Object.prototype.hasOwnProperty),It=Rt(RegExp.prototype.test),ss=yf(TypeError);function Rt(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return Gr(n,e,s)}}function yf(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Wr(n,t)}}function Be(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Us;zi&&zi(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const i=t(r);i!==r&&(gf(e)||(e[s]=i),r=i)}n[r]=!0}return n}function Ef(n){for(let e=0;e<n.length;e++)Zt(n,e)||(n[e]=null);return n}function vn(n){const e=Hr(null);for(const[t,s]of oc(n))Zt(n,t)&&(Array.isArray(s)?e[t]=Ef(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=vn(s):e[t]=s);return e}function rs(n,e){for(;n!==null;){const s=vf(n,e);if(s){if(s.get)return Rt(s.get);if(typeof s.value=="function")return Rt(s.value)}n=mf(n)}function t(){return null}return t}const Bi=Nt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lr=Nt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ar=Nt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cf=Nt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),or=Nt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Tf=Nt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Li=Nt(["#text"]),Ui=Nt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cr=Nt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xi=Nt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Rs=Nt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Af=Yt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Sf=Yt(/<%[\w\W]*|[\w\W]*%>/gm),If=Yt(/\$\{[\w\W]*/gm),Df=Yt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Nf=Yt(/^aria-[\-\w]+$/),cc=Yt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Rf=Yt(/^(?:\w+script|data):/i),Pf=Yt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uc=Yt(/^html$/i),Of=Yt(/^[a-z][.\w]*(-[.\w]+)+$/i);var qi=Object.freeze({__proto__:null,ARIA_ATTR:Nf,ATTR_WHITESPACE:Pf,CUSTOM_ELEMENT:Of,DATA_ATTR:Df,DOCTYPE_NAME:uc,ERB_EXPR:Sf,IS_ALLOWED_URI:cc,IS_SCRIPT_OR_DATA:Rf,MUSTACHE_EXPR:Af,TMPLIT_EXPR:If});const is={element:1,text:3,progressingInstruction:7,comment:8,document:9},Mf=function(){return typeof window>"u"?null:window},zf=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},ji=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function fc(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mf();const e=me=>fc(me);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==is.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:a,Element:o,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:_}=n,g=o.prototype,y=rs(g,"cloneNode"),T=rs(g,"remove"),D=rs(g,"nextSibling"),m=rs(g,"childNodes"),C=rs(g,"parentNode");if(typeof l=="function"){const me=t.createElement("template");me.content&&me.content.ownerDocument&&(t=me.content.ownerDocument)}let b,A="";const{implementation:I,createNodeIterator:E,createDocumentFragment:N,getElementsByTagName:S}=t,{importNode:F}=s;let P=ji();e.isSupported=typeof oc=="function"&&typeof C=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:B,TMPLIT_EXPR:x,DATA_ATTR:L,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:G}=qi;let{IS_ALLOWED_URI:Y}=qi,K=null;const $=Be({},[...Bi,...lr,...ar,...or,...Li]);let ee=null;const ae=Be({},[...Ui,...cr,...xi,...Rs]);let ie=Object.seal(Hr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,le=null;const te=Object.seal(Hr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ue=!0,_e=!0,Ee=!1,Le=!0,ve=!1,De=!0,Fe=!1,Ue=!1,se=!1,Q=!1,oe=!1,ge=!1,Se=!0,ze=!1;const Ne="user-content-";let je=!0,Re=!1,Ye={},Ze=null;const gt=Be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yt=null;const fe=Be({},["audio","video","img","source","image","track"]);let ke=null;const Ve=Be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",Pt="http://www.w3.org/2000/svg",ne="http://www.w3.org/1999/xhtml";let we=ne,tt=!1,At=null;const st=Be({},[_t,Pt,ne],rr);let bt=Be({},["mi","mo","mn","ms","mtext"]),xt=Be({},["annotation-xml"]);const sn=Be({},["title","style","font","a","script"]);let mt=null;const Ot=["application/xhtml+xml","text/html"],Sn="text/html";let at=null,Et=null;const In=t.createElement("form"),Dn=function(q){return q instanceof RegExp||q instanceof Function},Nn=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Et&&Et===q)){if((!q||typeof q!="object")&&(q={}),q=vn(q),mt=Ot.indexOf(q.PARSER_MEDIA_TYPE)===-1?Sn:q.PARSER_MEDIA_TYPE,at=mt==="application/xhtml+xml"?rr:Us,K=Zt(q,"ALLOWED_TAGS")?Be({},q.ALLOWED_TAGS,at):$,ee=Zt(q,"ALLOWED_ATTR")?Be({},q.ALLOWED_ATTR,at):ae,At=Zt(q,"ALLOWED_NAMESPACES")?Be({},q.ALLOWED_NAMESPACES,rr):st,ke=Zt(q,"ADD_URI_SAFE_ATTR")?Be(vn(Ve),q.ADD_URI_SAFE_ATTR,at):Ve,yt=Zt(q,"ADD_DATA_URI_TAGS")?Be(vn(fe),q.ADD_DATA_URI_TAGS,at):fe,Ze=Zt(q,"FORBID_CONTENTS")?Be({},q.FORBID_CONTENTS,at):gt,de=Zt(q,"FORBID_TAGS")?Be({},q.FORBID_TAGS,at):vn({}),le=Zt(q,"FORBID_ATTR")?Be({},q.FORBID_ATTR,at):vn({}),Ye=Zt(q,"USE_PROFILES")?q.USE_PROFILES:!1,ue=q.ALLOW_ARIA_ATTR!==!1,_e=q.ALLOW_DATA_ATTR!==!1,Ee=q.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ve=q.SAFE_FOR_TEMPLATES||!1,De=q.SAFE_FOR_XML!==!1,Fe=q.WHOLE_DOCUMENT||!1,Q=q.RETURN_DOM||!1,oe=q.RETURN_DOM_FRAGMENT||!1,ge=q.RETURN_TRUSTED_TYPE||!1,se=q.FORCE_BODY||!1,Se=q.SANITIZE_DOM!==!1,ze=q.SANITIZE_NAMED_PROPS||!1,je=q.KEEP_CONTENT!==!1,Re=q.IN_PLACE||!1,Y=q.ALLOWED_URI_REGEXP||cc,we=q.NAMESPACE||ne,bt=q.MATHML_TEXT_INTEGRATION_POINTS||bt,xt=q.HTML_INTEGRATION_POINTS||xt,ie=q.CUSTOM_ELEMENT_HANDLING||{},q.CUSTOM_ELEMENT_HANDLING&&Dn(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&Dn(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ve&&(_e=!1),oe&&(Q=!0),Ye&&(K=Be({},Li),ee=[],Ye.html===!0&&(Be(K,Bi),Be(ee,Ui)),Ye.svg===!0&&(Be(K,lr),Be(ee,cr),Be(ee,Rs)),Ye.svgFilters===!0&&(Be(K,ar),Be(ee,cr),Be(ee,Rs)),Ye.mathMl===!0&&(Be(K,or),Be(ee,xi),Be(ee,Rs))),q.ADD_TAGS&&(typeof q.ADD_TAGS=="function"?te.tagCheck=q.ADD_TAGS:(K===$&&(K=vn(K)),Be(K,q.ADD_TAGS,at))),q.ADD_ATTR&&(typeof q.ADD_ATTR=="function"?te.attributeCheck=q.ADD_ATTR:(ee===ae&&(ee=vn(ee)),Be(ee,q.ADD_ATTR,at))),q.ADD_URI_SAFE_ATTR&&Be(ke,q.ADD_URI_SAFE_ATTR,at),q.FORBID_CONTENTS&&(Ze===gt&&(Ze=vn(Ze)),Be(Ze,q.FORBID_CONTENTS,at)),je&&(K["#text"]=!0),Fe&&Be(K,["html","head","body"]),K.table&&(Be(K,["tbody"]),delete de.tbody),q.TRUSTED_TYPES_POLICY){if(typeof q.TRUSTED_TYPES_POLICY.createHTML!="function")throw ss('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ss('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=q.TRUSTED_TYPES_POLICY,A=b.createHTML("")}else b===void 0&&(b=zf(_,r)),b!==null&&typeof A=="string"&&(A=b.createHTML(""));Nt&&Nt(q),Et=q}},Kt=Be({},[...lr,...ar,...Cf]),rn=Be({},[...or,...Tf]),vs=function(q){let ce=C(q);(!ce||!ce.tagName)&&(ce={namespaceURI:we,tagName:"template"});const pe=Us(q.tagName),ye=Us(ce.tagName);return At[q.namespaceURI]?q.namespaceURI===Pt?ce.namespaceURI===ne?pe==="svg":ce.namespaceURI===_t?pe==="svg"&&(ye==="annotation-xml"||bt[ye]):!!Kt[pe]:q.namespaceURI===_t?ce.namespaceURI===ne?pe==="math":ce.namespaceURI===Pt?pe==="math"&&xt[ye]:!!rn[pe]:q.namespaceURI===ne?ce.namespaceURI===Pt&&!xt[ye]||ce.namespaceURI===_t&&!bt[ye]?!1:!rn[pe]&&(sn[pe]||!Kt[pe]):!!(mt==="application/xhtml+xml"&&At[q.namespaceURI]):!1},Mt=function(q){ts(e.removed,{element:q});try{C(q).removeChild(q)}catch{T(q)}},Ct=function(q,ce){try{ts(e.removed,{attribute:ce.getAttributeNode(q),from:ce})}catch{ts(e.removed,{attribute:null,from:ce})}if(ce.removeAttribute(q),q==="is")if(Q||oe)try{Mt(ce)}catch{}else try{ce.setAttribute(q,"")}catch{}},ln=function(q){let ce=null,pe=null;if(se)q="<remove></remove>"+q;else{const rt=ir(q,/^[\r\n\t ]+/);pe=rt&&rt[0]}mt==="application/xhtml+xml"&&we===ne&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");const ye=b?b.createHTML(q):q;if(we===ne)try{ce=new h().parseFromString(ye,mt)}catch{}if(!ce||!ce.documentElement){ce=I.createDocument(we,"template",null);try{ce.documentElement.innerHTML=tt?A:ye}catch{}}const xe=ce.body||ce.documentElement;return q&&pe&&xe.insertBefore(t.createTextNode(pe),xe.childNodes[0]||null),we===ne?S.call(ce,Fe?"html":"body")[0]:Fe?ce.documentElement:xe},Xn=function(q){return E.call(q.ownerDocument||q,q,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Rn=function(q){return q instanceof p&&(typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof d)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function"||typeof q.hasChildNodes!="function")},Xt=function(q){return typeof a=="function"&&q instanceof a};function jt(me,q,ce){Ns(me,pe=>{pe.call(e,q,ce,Et)})}const xn=function(q){let ce=null;if(jt(P.beforeSanitizeElements,q,null),Rn(q))return Mt(q),!0;const pe=at(q.nodeName);if(jt(P.uponSanitizeElement,q,{tagName:pe,allowedTags:K}),De&&q.hasChildNodes()&&!Xt(q.firstElementChild)&&It(/<[/\w!]/g,q.innerHTML)&&It(/<[/\w!]/g,q.textContent)||q.nodeType===is.progressingInstruction||De&&q.nodeType===is.comment&&It(/<[/\w]/g,q.data))return Mt(q),!0;if(!(te.tagCheck instanceof Function&&te.tagCheck(pe))&&(!K[pe]||de[pe])){if(!de[pe]&&an(pe)&&(ie.tagNameCheck instanceof RegExp&&It(ie.tagNameCheck,pe)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(pe)))return!1;if(je&&!Ze[pe]){const ye=C(q)||q.parentNode,xe=m(q)||q.childNodes;if(xe&&ye){const rt=xe.length;for(let vt=rt-1;vt>=0;--vt){const ot=y(xe[vt],!0);ot.__removalCount=(q.__removalCount||0)+1,ye.insertBefore(ot,D(q))}}}return Mt(q),!0}return q instanceof o&&!vs(q)||(pe==="noscript"||pe==="noembed"||pe==="noframes")&&It(/<\/no(script|embed|frames)/i,q.innerHTML)?(Mt(q),!0):(ve&&q.nodeType===is.text&&(ce=q.textContent,Ns([O,B,x],ye=>{ce=ns(ce,ye," ")}),q.textContent!==ce&&(ts(e.removed,{element:q.cloneNode()}),q.textContent=ce)),jt(P.afterSanitizeElements,q,null),!1)},hn=function(q,ce,pe){if(Se&&(ce==="id"||ce==="name")&&(pe in t||pe in In))return!1;if(!(_e&&!le[ce]&&It(L,ce))){if(!(ue&&It(H,ce))){if(!(te.attributeCheck instanceof Function&&te.attributeCheck(ce,q))){if(!ee[ce]||le[ce]){if(!(an(q)&&(ie.tagNameCheck instanceof RegExp&&It(ie.tagNameCheck,q)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(q))&&(ie.attributeNameCheck instanceof RegExp&&It(ie.attributeNameCheck,ce)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(ce,q))||ce==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&It(ie.tagNameCheck,pe)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(pe))))return!1}else if(!ke[ce]){if(!It(Y,ns(pe,U,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&q!=="script"&&kf(pe,"data:")===0&&yt[q])){if(!(Ee&&!It(V,ns(pe,U,"")))){if(pe)return!1}}}}}}}return!0},an=function(q){return q!=="annotation-xml"&&ir(q,G)},qn=function(q){jt(P.beforeSanitizeAttributes,q,null);const{attributes:ce}=q;if(!ce||Rn(q))return;const pe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let ye=ce.length;for(;ye--;){const xe=ce[ye],{name:rt,namespaceURI:vt,value:ot}=xe,St=at(rt),_n=ot;let ut=rt==="value"?_n:wf(_n);if(pe.attrName=St,pe.attrValue=ut,pe.keepAttr=!0,pe.forceKeepAttr=void 0,jt(P.uponSanitizeAttribute,q,pe),ut=pe.attrValue,ze&&(St==="id"||St==="name")&&(Ct(rt,q),ut=Ne+ut),De&&It(/((--!?|])>)|<\/(style|title|textarea)/i,ut)){Ct(rt,q);continue}if(St==="attributename"&&ir(ut,"href")){Ct(rt,q);continue}if(pe.forceKeepAttr)continue;if(!pe.keepAttr){Ct(rt,q);continue}if(!Le&&It(/\/>/i,ut)){Ct(rt,q);continue}ve&&Ns([O,B,x],Zn=>{ut=ns(ut,Zn," ")});const Pn=at(q.nodeName);if(!hn(Pn,St,ut)){Ct(rt,q);continue}if(b&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!vt)switch(_.getAttributeType(Pn,St)){case"TrustedHTML":{ut=b.createHTML(ut);break}case"TrustedScriptURL":{ut=b.createScriptURL(ut);break}}if(ut!==_n)try{vt?q.setAttributeNS(vt,rt,ut):q.setAttribute(rt,ut),Rn(q)?Mt(q):Fi(e.removed)}catch{Ct(rt,q)}}jt(P.afterSanitizeAttributes,q,null)},pn=function me(q){let ce=null;const pe=Xn(q);for(jt(P.beforeSanitizeShadowDOM,q,null);ce=pe.nextNode();)jt(P.uponSanitizeShadowNode,ce,null),xn(ce),qn(ce),ce.content instanceof i&&me(ce.content);jt(P.afterSanitizeShadowDOM,q,null)};return e.sanitize=function(me){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=null,pe=null,ye=null,xe=null;if(tt=!me,tt&&(me="<!-->"),typeof me!="string"&&!Xt(me))if(typeof me.toString=="function"){if(me=me.toString(),typeof me!="string")throw ss("dirty is not a string, aborting")}else throw ss("toString is not a function");if(!e.isSupported)return me;if(Ue||Nn(q),e.removed=[],typeof me=="string"&&(Re=!1),Re){if(me.nodeName){const ot=at(me.nodeName);if(!K[ot]||de[ot])throw ss("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof a)ce=ln("<!---->"),pe=ce.ownerDocument.importNode(me,!0),pe.nodeType===is.element&&pe.nodeName==="BODY"||pe.nodeName==="HTML"?ce=pe:ce.appendChild(pe);else{if(!Q&&!ve&&!Fe&&me.indexOf("<")===-1)return b&&ge?b.createHTML(me):me;if(ce=ln(me),!ce)return Q?null:ge?A:""}ce&&se&&Mt(ce.firstChild);const rt=Xn(Re?me:ce);for(;ye=rt.nextNode();)xn(ye),qn(ye),ye.content instanceof i&&pn(ye.content);if(Re)return me;if(Q){if(oe)for(xe=N.call(ce.ownerDocument);ce.firstChild;)xe.appendChild(ce.firstChild);else xe=ce;return(ee.shadowroot||ee.shadowrootmode)&&(xe=F.call(s,xe,!0)),xe}let vt=Fe?ce.outerHTML:ce.innerHTML;return Fe&&K["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&It(uc,ce.ownerDocument.doctype.name)&&(vt="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+vt),ve&&Ns([O,B,x],ot=>{vt=ns(vt,ot," ")}),b&&ge?b.createHTML(vt):vt},e.setConfig=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nn(me),Ue=!0},e.clearConfig=function(){Et=null,Ue=!1},e.isValidAttribute=function(me,q,ce){Et||Nn({});const pe=at(me),ye=at(q);return hn(pe,ye,ce)},e.addHook=function(me,q){typeof q=="function"&&ts(P[me],q)},e.removeHook=function(me,q){if(q!==void 0){const ce=_f(P[me],q);return ce===-1?void 0:bf(P[me],ce,1)[0]}return Fi(P[me])},e.removeHooks=function(me){P[me]=[]},e.removeAllHooks=function(){P=ji()},e}var Ff=fc();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var Vi={},Hi;function Bf(){return Hi||(Hi=1,(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var e=n.languages.extend("typescript",{});delete e["class-name"],n.languages.typescript["class-name"].inside=e,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),n.languages.ts=n.languages.typescript})(Prism)),Vi}Bf();var Gi={},Wi;function Lf(){return Wi||(Wi=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Gi}Lf();var Yi={},Ki;function Uf(){return Ki||(Ki=1,(function(n){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,s={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[s,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:s.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:s.inside}],keyword:e,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":s,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:s.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:s.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),Yi}Uf();Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;var Xi={},Zi;function xf(){return Zi||(Zi=1,(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism)),Xi}xf();var Ji={},Qi;function qf(){return Qi||(Qi=1,(function(n){function e(G,Y){return G.replace(/<<(\d+)>>/g,function(K,$){return"(?:"+Y[+$]+")"})}function t(G,Y,K){return RegExp(e(G,Y),"")}function s(G,Y){for(var K=0;K<Y;K++)G=G.replace(/<<self>>/g,function(){return"(?:"+G+")"});return G.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(G){return"\\b(?:"+G.trim().replace(/ /g,"|")+")\\b"}var l=i(r.typeDeclaration),a=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),d=s(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=s(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,_=e(/<<0>>(?:\s*<<1>>)?/.source,[h,d]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,_]),y=/\[\s*(?:,\s*)*\]/.source,T=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,y]),D=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,p,y]),m=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[D]),C=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[m,g,y]),b={keyword:a,punctuation:/[<>()?,.:[\]]/},A=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,I=/"(?:\\.|[^\\"\r\n])*"/.source,E=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[I]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:b},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,C]),lookbehind:!0,inside:b},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[l,_]),lookbehind:!0,inside:b},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:b},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[T]),lookbehind:!0,inside:b},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[C,u,h]),inside:b}],keyword:a,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:b},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[C,g]),inside:b,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[C]),lookbehind:!0,inside:b,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,d]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(d),alias:"class-name",inside:b}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[l,_,h,C,a.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[_,p]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:a,"class-name":{pattern:RegExp(C),greedy:!0,inside:b},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var N=I+"|"+A,S=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[N]),F=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[S]),2),P=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,O=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,F]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[P,O]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[P]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[F]),inside:n.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var B=/:[^}\r\n]+/.source,x=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[S]),2),L=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[x,B]),H=s(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[N]),2),V=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[H,B]);function U(G,Y){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[G]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Y,B]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[L]),lookbehind:!0,greedy:!0,inside:U(L,x)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[V]),lookbehind:!0,greedy:!0,inside:U(V,H)}],char:{pattern:RegExp(A),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(Prism)),Ji}qf();Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];var $i={},el;function jf(){return el||(el=1,(function(n){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism)),$i}jf();var tl={},nl;function Vf(){return nl||(nl=1,(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",s=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+s),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+s+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism)),tl}Vf();(function(n){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},s={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:s},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:s},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:s.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:s.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=n.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=s.variable[1].inside,l=0;l<r.length;l++)i[r[l]]=n.languages.bash[r[l]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var t=n.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const hs=new Map;Ke.setOptions({breaks:!0,gfm:!0});const sl={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},Hf={code(n){const e=n.text;let t=n.lang;if(t&&sl[t.toLowerCase()]&&(t=sl[t.toLowerCase()]),t&&sr.languages[t])try{const r=sr.highlight(e,sr.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Ke.use({renderer:Hf});function Vs(n){n=n.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),n=n.replace(/```(\w+)\n([\s\S]*?)```/g,(s,r,i)=>i.endsWith(`
`)?s:"```"+r+`
`+i+"\n```");let e;try{const s=Ke.parse(n,{async:!1});e=typeof s=="string"?s:String(s)}catch(s){console.error("Markdown parse error:",s),e=n}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(s,r)=>{const i=hs.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:s}),Ff.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Gf(n){hs.set(n.name,n)}function Wf(n){hs.delete(n)}function Yf(n){hs.clear(),n.forEach(e=>{hs.set(e.name,e)})}const Kf="wabi-chat-db",Xf=1,zt="messages",Vn="settings";class Zf{db=null;initPromise=null;async init(){if(Ge&&!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Kf,Xf);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(zt)||i.createObjectStore(zt,{keyPath:"period"}),i.objectStoreNames.contains(Vn)||i.createObjectStore(Vn,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return!Ge||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Vn],"readonly").objectStore(Vn).get(e);l.onsuccess=()=>t(l.result?.value),l.onerror=()=>s(l.error)})}async setSetting(e,t){if(!(!Ge||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Vn],"readwrite").objectStore(Vn).put({key:e,value:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async getArchive(e){return!Ge||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([zt],"readonly").objectStore(zt).get(e);l.onsuccess=()=>t(l.result?.data),l.onerror=()=>s(l.error)})}async setArchive(e,t){if(!(!Ge||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([zt],"readwrite").objectStore(zt).put({period:e,data:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async deleteArchive(e){if(!(!Ge||!this.db))return new Promise((t,s)=>{const l=this.db.transaction([zt],"readwrite").objectStore(zt).delete(e);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}async getAllArchiveKeys(){return!Ge||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([zt],"readonly").objectStore(zt).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async getAllArchives(){return!Ge||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([zt],"readonly").objectStore(zt).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async clearAllArchives(){if(!(!Ge||!this.db))return new Promise((e,t)=>{const i=this.db.transaction([zt],"readwrite").objectStore(zt).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Jf{rotationPeriod="month";maxArchives=4;db;initPromise=null;constructor(){this.db=new Zf,Ge&&(this.initPromise=this.init())}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){if(!Ge)return;const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){Ge&&(await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e))}async setMaxArchives(e){Ge&&(await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives())}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const s=this.getWeekNumber(e);return`${t}-W${String(s).padStart(2,"0")}`}case"month":{const s=e.getMonth()+1;return`${t}-${String(s).padStart(2,"0")}`}case"half-year":{const s=e.getMonth()<6?"H1":"H2";return`${t}-${s}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-t.getTime())/(1440*60*1e3));return Math.ceil((s+t.getDay()+1)/7)}async isEnabled(){if(!Ge)return!1;await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){Ge&&(await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString()))}async saveMessage(e,t){if(!Ge||(await this.ensureInit(),!await this.isEnabled()))return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(l){console.error("Failed to save message to IndexedDB:",l),await this.rotateArchives()}}async rotateArchives(){if(!Ge)return;await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const s of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${s}`),await this.db.deleteArchive(s)}}async loadAllMessages(){if(!Ge)return{};if(await this.ensureInit(),!await this.isEnabled())return{};const t={},s=await this.db.getAllArchives();for(const r of s){const i=r.data||{};Object.entries(i).forEach(([l,a])=>{t[l]||(t[l]=[]),t[l].push(...a)})}return Object.keys(t).forEach(r=>{t[r].sort((i,l)=>i.timestamp-l.timestamp)}),t}async deleteArchive(e){Ge&&(await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`))}async clearAllHistory(){Ge&&(await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history"))}async exportArchives(){if(!Ge)return;await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const s=JSON.stringify(t.data),r=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`wabi-chat-${t.period}.json`,l.click(),URL.revokeObjectURL(i)})}async exportArchive(e){if(!Ge)return;await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const s=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){if(!Ge)return{archives:[],totalSize:0,totalMessages:0};await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const l=JSON.stringify(i.data),a=new Blob([l]).size,o=i.data,u=Object.values(o).reduce((d,p)=>d+p.length,0);return{period:i.period,size:a,messageCount:u}}).sort((i,l)=>l.period.localeCompare(i.period)),s=t.reduce((i,l)=>i+l.size,0),r=t.reduce((i,l)=>i+l.messageCount,0);return{archives:t,totalSize:s,totalMessages:r}}}const qt=new Jf,Kn=wt(null),Bt=wt([]),Fn=wt("general"),Tt=wt({general:[]}),Ht=wt([]),dc=wt([]),dn=wt(null),rl=wt(!1),hc=wt(0),ci=wt(null);let Ae=null;function Qf(n){if(!Ge)return;let e="http://localhost:3000";if(typeof window<"u"){const t=window.location.origin;t.includes(":5173")||(e=t)}return Ae=Ls(e),Kn.set(Ae),qt.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const s={};for(const[r,i]of Object.entries(t)){const l=new Set;s[r]=i.filter(a=>l.has(a.id)?!1:(l.add(a.id),!0))}Tt.set(s)}}),Ae.on("connect",()=>{console.log("Connected to server"),rl.set(!0),Ae?.emit("join",n)}),Ae.on("disconnect",()=>{console.log("Disconnected from server"),rl.set(!1)}),Ae.on("init",t=>{Ht.set(t.users);const s=t.channels.map(i=>{if(i.type==="dm"&&i.members){const l=i.members.find(o=>o!==Ae?.id),a=t.users.find(o=>o.id===l);if(a)return{...i,name:a.username,otherUser:a}}return i});Bt.set(s),t.emotes&&Yf(t.emotes);const r=t.users.find(i=>i.id===Ae?.id);r&&dn.set(r),Ae?.emit("join-channel","general")}),Ae.on("channel-messages",t=>{Tt.update(s=>{const r=s[t.channelId]||[],i=new Set(r.map(a=>a.id)),l=t.messages.filter(a=>!i.has(a.id));return{...s,[t.channelId]:[...r,...l]}})}),Ae.on("message",t=>{Tt.update(i=>{const l=i[t.channelId]||[];return l.some(a=>a.id===t.message.id)?i:{...i,[t.channelId]:[...l,t.message]}}),qt.saveMessage(t.channelId,t.message);const s=t.message.userId===Ae?.id;let r;Bt.subscribe(i=>{r=i.find(a=>a.id===t.channelId)?.name})(),Su(t.message,s,r),!s&&document.hidden&&hc.update(i=>(i===0&&ci.set(t.message.id),i+1))}),Ae.on("user-joined",t=>{Ht.update(s=>[...s,t])}),Ae.on("user-left",t=>{Ht.update(s=>s.filter(r=>r.id!==t.id))}),Ae.on("typing",t=>{dc.set(t)}),Ae.on("profile-updated",t=>{Ht.update(s=>s.map(r=>r.id===t.id?t:r)),dn.update(s=>s&&s.id===t.id?t:s)}),Ae.on("message-edited",t=>{Tt.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),Ae.on("message-deleted",t=>{Tt.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),Ae.on("message-pin-toggled",t=>{Tt.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),Ae.on("channel-created",t=>{let s=t;t.type==="dm"&&t.members&&Ht.subscribe(r=>{const i=t.members.find(a=>a!==Ae?.id),l=r.find(a=>a.id===i);l&&(s={...t,name:l.username,otherUser:l})})(),Bt.update(r=>[...r,s]),Tt.update(r=>({...r,[s.id]:[]}))}),Ae.on("channel-deleted",t=>{Bt.update(s=>s.filter(r=>r.id!==t)),Tt.update(s=>{const r={...s};return delete r[t],r}),Fn.update(s=>s===t?"general":s)}),Ae.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),Ae.on("dm-created",t=>{const s={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};Bt.update(r=>r.some(i=>i.id===t.channelId)?r:[...r,s]),Tt.update(r=>({...r,[t.channelId]:r[t.channelId]||[]})),Fn.set(t.channelId)}),Ae.on("group-created",t=>{Bt.update(s=>s.some(r=>r.id===t.id)?s:[...s,t]),Tt.update(s=>({...s,[t.id]:s[t.id]||[]}))}),Ae.on("emote-added",t=>{Gf(t)}),Ae.on("emote-deleted",t=>{Wf(t)}),Ae.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),Ae.on("channel-settings-updated",t=>{Bt.update(s=>s.map(r=>r.id===t.channelId?{...r,autoDeleteAfter:t.autoDeleteAfter}:r))}),Ae}function $f(n){Ae?.emit("join-channel",n),Fn.set(n)}function ed(n){Ae?.emit("create-channel",n)}function td(n){Ae?.emit("delete-channel",n)}function cs(n,e,t="text",s){Ae?.emit("message",{channelId:n,text:e,type:t,...s})}function pc(n,e,t){Ae?.emit("edit-message",{channelId:n,messageId:e,newText:t})}function nd(n,e){Ae?.emit("delete-message",{channelId:n,messageId:e})}function ui(n,e){Ae?.emit("toggle-pin-message",{channelId:n,messageId:e})}function Gn(n){Ae?.emit("typing",n)}function il(n,e){Ae?.emit("update-profile",{status:n,profilePicture:e})}function sd(){Ae?.disconnect(),Kn.set(null),Ae=null}function rd(){hc.set(0),ci.set(null)}function gc(n){Ae?.emit("create-dm",{targetUserId:n})}function id(n,e){Ae?.emit("update-channel-settings",{channelId:n,autoDeleteAfter:e})}let Ps;const ld=new Uint8Array(16);function ad(){if(!Ps&&(Ps=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ps))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(ld)}const kt=[];for(let n=0;n<256;++n)kt.push((n+256).toString(16).slice(1));function od(n,e=0){return kt[n[e+0]]+kt[n[e+1]]+kt[n[e+2]]+kt[n[e+3]]+"-"+kt[n[e+4]]+kt[n[e+5]]+"-"+kt[n[e+6]]+kt[n[e+7]]+"-"+kt[n[e+8]]+kt[n[e+9]]+"-"+kt[n[e+10]]+kt[n[e+11]]+kt[n[e+12]]+kt[n[e+13]]+kt[n[e+14]]+kt[n[e+15]]}const cd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ll={randomUUID:cd};function ud(n,e,t){if(ll.randomUUID&&!n)return ll.randomUUID();n=n||{};const s=n.random||(n.rng||ad)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,od(s)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var On="",mc=16,fd=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let s=0;s<mc;s++)n+=e.charAt(Math.floor(Math.random()*t));return n},dd=()=>{if(!On){try{On=sessionStorage.getItem("giphyPingbackId")}catch{}if(!On){const n=new Date().getTime().toString(16);try{On=`${n}${ud().replace(/-/g,"")}`.substring(0,mc)}catch{On=fd()}try{sessionStorage.setItem("giphyPingbackId",On)}catch{}}}return On},hd=dd,Os=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{Os=!0,n(Os)},e.onerror=()=>{Os=!1,n(Os)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var us=(typeof window<"u"?window:global)||{};us._GIPHY_SDK_HEADERS_=us._GIPHY_SDK_HEADERS_||(us.Headers?new us.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var vc=()=>us._GIPHY_SDK_HEADERS_,al=(n,e)=>{var t;return(t=vc())==null?void 0:t.set(n,e)},pd=Object.defineProperty,gd=Object.defineProperties,md=Object.getOwnPropertyDescriptors,vd=Object.getOwnPropertyNames,ol=Object.getOwnPropertySymbols,_d=Object.prototype.hasOwnProperty,bd=Object.prototype.propertyIsEnumerable,cl=(n,e,t)=>e in n?pd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cn=(n,e)=>{for(var t in e||(e={}))_d.call(e,t)&&cl(n,t,e[t]);if(ol)for(var t of ol(e))bd.call(e,t)&&cl(n,t,e[t]);return n},ur=(n,e)=>gd(n,md(e)),kd=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),wd=(n,e)=>function(){return e||(0,n[vd(n)[0]])((e={exports:{}}).exports,e),e.exports},yd=(n,e,t)=>new Promise((s,r)=>{var i=o=>{try{a(t.next(o))}catch(u){r(u)}},l=o=>{try{a(t.throw(o))}catch(u){r(u)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,l);a((t=t.apply(n,e)).next())}),Ed=wd({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),Cd=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],Td=["suppress_chrome","is_public","is_verified"],ul=n=>e=>n[e]=!!n[e],Ad=n=>typeof n=="string"?n:n.text,_c=(n,e="")=>{const t=cn({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(Ad),t.bottle_data||(t.bottle_data={}),t.response_id=e,Cd.forEach(ul(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:s}=t;if(s){const r=cn({},s);Td.forEach(ul(r)),t.user=r}return t},fl=n=>{const{response_id:e}=n.meta;return n.data=_c(n.data,e),n},gn=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>_c(t,e)),n},Sd=(typeof window<"u"?window:global)||{},Id=Sd.GIPHY_API_URL||"https://api.giphy.com/v1/",bc=class extends Error{constructor(n,e,t=0,s=""){super(n),this.url=e,this.status=t,this.statusText=s}},Dd=class extends bc{},dl=bc,Nd="@giphy/js-fetch-api: ",Rd="Error fetching",Pd=n=>n,Qt={},Od=6e4,Md=6e3,zd=()=>{const n=Date.now();Object.keys(Qt).forEach(e=>{const t=Qt[e].isError?Md:Od;n-Qt[e].ts>=t&&delete Qt[e]})};function Fd(n,e={}){const{apiVersion:t=1,noCache:s=!1,normalizer:r=Pd}=e,i=Id.replace(/\/v\d+\/$/,`/v${t}/`);if(zd(),!Qt[n]||s){const l=`${i}${n}`,a=()=>yd(this,null,function*(){var o,u;let d;try{const p=yield fetch(l,{method:"get"});if(p.ok){const h=yield p.json();if((o=h.meta)!=null&&o.response_id)return r(h);throw{message:"synthetic response"}}else{let h=Rd;try{const g=yield p.json();g.message&&(h=g.message),(u=g.meta)!=null&&u.msg&&(h=g.meta.msg)}catch{}Qt[n]&&(Qt[n].isError=!0);let _=dl;h==="This content is not available in your location"&&(_=Dd),d=new _(`${Nd}${h}`,l,p.status,p.statusText)}}catch(p){d=new dl(p.message,l),Qt[n]&&(Qt[n].isError=!0)}throw d});Qt[n]={request:a(),ts:Date.now()}}return Qt[n].request}var Ft=Fd,fr=n=>n&&n.type?n.type:"gifs",Bd=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(cn(ur(cn({},t),{api_key:this.apiKey,pingback_id:hd()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return Ft(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return Ft(`${t}gifs/${n}?${this.getQS()}`,{normalizer:fl})}gifs(n,e){return Array.isArray(n)?Ft(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:gn}):Ft(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:gn})}emoji(n){return Ft(`emoji?${this.getQS(n)}`,{normalizer:gn})}emojiDefaultVariations(n){return Ft(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:gn})}emojiVariations(n){return Ft(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:gn})}animate(n,e={}){const t=this.getQS(ur(cn({},e),{m:n}));return Ft(`text/animate?${t}`,{normalizer:gn})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let s;e.type==="text"&&(s=!0);const r=this.getQS(ur(cn({rating:"pg-13"},e),{q:t,excludeDynamicResults:s}));return Ft(`${fr(e)}/search?${r}`,{normalizer:gn})}subcategories(n,e){return Ft(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return Ft(`${fr(n)}/trending?${this.getQS(cn({rating:"pg-13"},n))}`,{normalizer:gn})}random(n){return Ft(`${fr(n)}/random?${this.getQS(cn({rating:"pg-13"},n))}`,{noCache:!0,normalizer:fl})}related(n,e={}){const{type:t="gifs"}=e;return Ft(`${t}/related?${this.getQS(cn({gif_id:n,rating:"pg-13"},e))}`,{normalizer:gn})}channels(n,e={}){return Ft(`channels/search?${this.getQS(cn({q:n,rating:"pg-13"},e))}`)}},Ld=Bd,hl;if(typeof kd<"u"){const{version:n}=Ed();(hl=vc())!=null&&hl.get("X-GIPHY-SDK-NAME")||(al("X-GIPHY-SDK-NAME","FetchAPI"),al("X-GIPHY-SDK-VERSION",n))}function pl(n,e,t){const s=n.slice();return s[11]=e[t],s}function Ud(n){let e=[],t=new Map,s,r=Xe(n[1]);const i=l=>l[11].id;for(let l=0;l<r.length;l+=1){let a=pl(n,r,l),o=i(a);t.set(o,e[l]=gl(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Me()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Me()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);j(l,s,a)},p(l,a){a&34&&(r=Xe(l[1]),e=nn(e,a,i,1,l,r,t,s.parentNode,tn,gl,s,pl))},d(l){l&&v(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function xd(n){let e,t="No GIFs found";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){f(e,"class","no-results svelte-x54k5n")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function qd(n){let e,t="Loading...";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-x54k5n")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function gl(n,e){let t,s,r,i,l,a,o;function u(){return e[8](e[11])}return{key:n,first:null,c(){t=w("button"),s=w("img"),l=z(),this.h()},l(d){t=k(d,"BUTTON",{class:!0});var p=R(t);s=k(p,"IMG",{src:!0,alt:!0,class:!0}),l=M(p),p.forEach(v),this.h()},h(){He(s.src,r=e[11].images.fixed_height_small.url)||f(s,"src",r),f(s,"alt",i=e[11].title),f(s,"class","svelte-x54k5n"),f(t,"class","gif-item svelte-x54k5n"),this.first=t},m(d,p){j(d,t,p),c(t,s),c(t,l),a||(o=W(t,"click",u),a=!0)},p(d,p){e=d,p&2&&!He(s.src,r=e[11].images.fixed_height_small.url)&&f(s,"src",r),p&2&&i!==(i=e[11].title)&&f(s,"alt",i)},d(d){d&&v(t),a=!1,o()}}}function jd(n){let e,t,s,r,i,l="âœ•",a,o,u,d;function p(g,y){return g[2]?qd:g[1].length===0?xd:Ud}let h=p(n),_=h(n);return{c(){e=w("div"),t=w("div"),s=w("input"),r=z(),i=w("button"),i.textContent=l,a=z(),o=w("div"),_.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"DIV",{class:!0});var T=R(t);s=k(T,"INPUT",{type:!0,placeholder:!0,class:!0}),r=M(T),i=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-xkwxcu"&&(i.textContent=l),T.forEach(v),a=M(y),o=k(y,"DIV",{class:!0});var D=R(o);_.l(D),D.forEach(v),y.forEach(v),this.h()},h(){f(s,"type","text"),f(s,"placeholder","Search GIFs..."),f(s,"class","svelte-x54k5n"),f(i,"class","close-btn svelte-x54k5n"),f(t,"class","giphy-header svelte-x54k5n"),f(o,"class","gif-grid svelte-x54k5n"),f(e,"class","giphy-picker svelte-x54k5n")},m(g,y){j(g,e,y),c(e,t),c(t,s),nt(s,n[0]),c(t,r),c(t,i),c(e,a),c(e,o),_.m(o,null),u||(d=[W(s,"input",n[6]),W(s,"input",n[4]),W(i,"click",n[7])],u=!0)},p(g,[y]){y&1&&s.value!==g[0]&&nt(s,g[0]),h===(h=p(g))&&_?_.p(g,y):(_.d(1),_=h(g),_&&(_.c(),_.m(o,null)))},i:Oe,o:Oe,d(g){g&&v(e),_.d(),u=!1,Ie(d)}}}function Vd(n,e,t){const s=Ws();let r="",i=[],l=!1;const a=new Ld("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,l=!0);try{const{data:g}=await a.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,l=!1)}async function u(){t(2,l=!0);try{const{data:g}=await a.trending({limit:20});t(1,i=g),console.log("Loaded GIFs:",i.length,i)}catch(g){console.error("Error fetching trending GIFs:",g),t(1,i=[])}t(2,l=!1)}function d(g){s("select",g.images.fixed_height.url)}function p(){r=this.value,t(0,r)}return[r,i,l,s,o,d,p,()=>s("close"),g=>d(g)]}class Hd extends ht{constructor(e){super(),pt(this,e,Vd,jd,dt,{})}}function ml(n){let e,t,s,r,i=(n[2]?"Your Profile":n[1].username)+"",l,a,o,u="Ã—",d,p,h,_,g,y,T,D,m,C="Username:",b,A,I=n[1].username+"",E,N,S,F,P,O;function B($,ee){return $[4]||$[1].profilePicture?Wd:Gd}let x=B(n),L=x(n),H=n[2]&&vl(n),V=!n[2]&&_l(n);function U($,ee){return $[2]?Jd:Zd}let G=U(n),Y=G(n),K=n[2]&&kl(n);return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),l=Z(i),a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),h=w("div"),_=w("div"),L.c(),g=z(),H&&H.c(),y=z(),T=w("div"),D=w("div"),m=w("span"),m.textContent=C,b=z(),A=w("span"),E=Z(I),N=z(),V&&V.c(),S=z(),Y.c(),F=z(),K&&K.c(),this.h()},l($){e=k($,"DIV",{class:!0});var ee=R(e);t=k(ee,"DIV",{class:!0});var ae=R(t);s=k(ae,"DIV",{class:!0});var ie=R(s);r=k(ie,"H2",{class:!0});var de=R(r);l=X(de,i),de.forEach(v),a=M(ie),o=k(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-12zniqk"&&(o.textContent=u),ie.forEach(v),d=M(ae),p=k(ae,"DIV",{class:!0});var le=R(p);h=k(le,"DIV",{class:!0});var te=R(h);_=k(te,"DIV",{class:!0});var ue=R(_);L.l(ue),ue.forEach(v),g=M(te),H&&H.l(te),te.forEach(v),y=M(le),T=k(le,"DIV",{class:!0});var _e=R(T);D=k(_e,"DIV",{class:!0});var Ee=R(D);m=k(Ee,"SPAN",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-1fffgfa"&&(m.textContent=C),b=M(Ee),A=k(Ee,"SPAN",{class:!0});var Le=R(A);E=X(Le,I),Le.forEach(v),Ee.forEach(v),_e.forEach(v),N=M(le),V&&V.l(le),S=M(le),Y.l(le),le.forEach(v),F=M(ae),K&&K.l(ae),ae.forEach(v),ee.forEach(v),this.h()},h(){f(r,"class","svelte-mn2c16"),f(o,"class","close-btn svelte-mn2c16"),f(s,"class","modal-header svelte-mn2c16"),f(_,"class","profile-picture-container svelte-mn2c16"),f(h,"class","profile-picture-section svelte-mn2c16"),f(m,"class","info-label svelte-mn2c16"),f(A,"class","info-value svelte-mn2c16"),f(D,"class","info-row svelte-mn2c16"),f(T,"class","user-info svelte-mn2c16"),f(p,"class","modal-body svelte-mn2c16"),f(t,"class","modal-content svelte-mn2c16"),f(e,"class","modal-overlay svelte-mn2c16")},m($,ee){j($,e,ee),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),c(p,h),c(h,_),L.m(_,null),c(h,g),H&&H.m(h,null),c(p,y),c(p,T),c(T,D),c(D,m),c(D,b),c(D,A),c(A,E),c(p,N),V&&V.m(p,null),c(p,S),Y.m(p,null),c(t,F),K&&K.m(t,null),P||(O=[W(o,"click",n[9]),W(t,"click",lt(n[12])),W(e,"click",n[9])],P=!0)},p($,ee){ee&6&&i!==(i=($[2]?"Your Profile":$[1].username)+"")&&re(l,i),x===(x=B($))&&L?L.p($,ee):(L.d(1),L=x($),L&&(L.c(),L.m(_,null))),$[2]?H?H.p($,ee):(H=vl($),H.c(),H.m(h,null)):H&&(H.d(1),H=null),ee&2&&I!==(I=$[1].username+"")&&re(E,I),$[2]?V&&(V.d(1),V=null):V?V.p($,ee):(V=_l($),V.c(),V.m(p,S)),G===(G=U($))&&Y?Y.p($,ee):(Y.d(1),Y=G($),Y&&(Y.c(),Y.m(p,null))),$[2]?K?K.p($,ee):(K=kl($),K.c(),K.m(t,null)):K&&(K.d(1),K=null)},d($){$&&v(e),L.d(),H&&H.d(),V&&V.d(),Y.d(),K&&K.d(),P=!1,Ie(O)}}}function Gd(n){let e,t=n[1].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","profile-picture-placeholder svelte-mn2c16"),Te(e,"background-color",n[1].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&re(s,t),i&2&&Te(e,"background-color",r[1].color)},d(r){r&&v(e)}}}function Wd(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[4]||n[1].profilePicture)||f(e,"src",t),f(e,"alt",s=n[1].username),f(e,"class","profile-picture svelte-mn2c16")},m(r,i){j(r,e,i)},p(r,i){i&18&&!He(e.src,t=r[4]||r[1].profilePicture)&&f(e,"src",t),i&2&&s!==(s=r[1].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function vl(n){let e,t,s=n[4]||n[1].profilePicture?"Change Picture":"Upload Picture",r,i,l,a,o;return{c(){e=w("div"),t=w("label"),r=Z(s),i=z(),l=w("input"),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"LABEL",{for:!0,class:!0});var p=R(t);r=X(p,s),p.forEach(v),i=M(d),l=k(d,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),d.forEach(v),this.h()},h(){f(t,"for","profile-picture"),f(t,"class","upload-label svelte-mn2c16"),f(l,"id","profile-picture"),f(l,"type","file"),f(l,"accept","image/*"),f(l,"class","file-input svelte-mn2c16"),f(e,"class","upload-section svelte-mn2c16")},m(u,d){j(u,e,d),c(e,t),c(t,r),c(e,i),c(e,l),a||(o=W(l,"change",n[10]),a=!0)},p(u,d){d&18&&s!==(s=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&re(r,s)},d(u){u&&v(e),a=!1,o()}}}function _l(n){let e,t,s,r="Personal Notes:",i,l,a=!n[6]&&bl(n);function o(p,h){return p[6]?Xd:p[5]?Kd:Yd}let u=o(n),d=u(n);return{c(){e=w("div"),t=w("div"),s=w("label"),s.textContent=r,i=z(),a&&a.c(),l=z(),d.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"DIV",{class:!0});var _=R(t);s=k(_,"LABEL",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1vz1uda"&&(s.textContent=r),i=M(_),a&&a.l(_),_.forEach(v),l=M(h),d.l(h),h.forEach(v),this.h()},h(){f(s,"class","notes-label svelte-mn2c16"),f(t,"class","notes-header svelte-mn2c16"),f(e,"class","notes-section svelte-mn2c16")},m(p,h){j(p,e,h),c(e,t),c(t,s),c(t,i),a&&a.m(t,null),c(e,l),d.m(e,null)},p(p,h){p[6]?a&&(a.d(1),a=null):a?a.p(p,h):(a=bl(p),a.c(),a.m(t,null)),u===(u=o(p))&&d?d.p(p,h):(d.d(1),d=u(p),d&&(d.c(),d.m(e,null)))},d(p){p&&v(e),a&&a.d(),d.d()}}}function bl(n){let e,t=n[5]?"Edit":"Add Note",s,r,i;return{c(){e=w("button"),s=Z(t),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=R(e);s=X(a,t),a.forEach(v),this.h()},h(){f(e,"class","edit-note-btn svelte-mn2c16")},m(l,a){j(l,e,a),c(e,s),r||(i=W(e,"click",n[13]),r=!0)},p(l,a){a&32&&t!==(t=l[5]?"Edit":"Add Note")&&re(s,t)},d(l){l&&v(e),r=!1,i()}}}function Yd(n){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){f(e,"class","note-placeholder svelte-mn2c16")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function Kd(n){let e,t;return{c(){e=w("div"),t=Z(n[5]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=R(e);t=X(r,n[5]),r.forEach(v),this.h()},h(){f(e,"class","note-display svelte-mn2c16")},m(s,r){j(s,e,r),c(e,t)},p(s,r){r&32&&re(t,s[5])},d(s){s&&v(e)}}}function Xd(n){let e,t,s,r,i="Cancel",l,a,o="Save Note",u,d;return{c(){e=w("textarea"),t=z(),s=w("div"),r=w("button"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,this.h()},l(p){e=k(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),R(e).forEach(v),t=M(p),s=k(p,"DIV",{class:!0});var h=R(s);r=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-hulrz8"&&(r.textContent=i),l=M(h),a=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-9d2dbm"&&(a.textContent=o),h.forEach(v),this.h()},h(){f(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),f(e,"class","note-textarea svelte-mn2c16"),f(e,"rows","3"),f(r,"class","cancel-note-btn svelte-mn2c16"),f(a,"class","save-note-btn svelte-mn2c16"),f(s,"class","note-actions svelte-mn2c16")},m(p,h){j(p,e,h),nt(e,n[5]),j(p,t,h),j(p,s,h),c(s,r),c(s,l),c(s,a),u||(d=[W(e,"input",n[14]),W(r,"click",n[15]),W(a,"click",n[8])],u=!0)},p(p,h){h&32&&nt(e,p[5])},d(p){p&&(v(e),v(t),v(s)),u=!1,Ie(d)}}}function Zd(n){let e,t,s,r,i=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1)+"",l;return{c(){e=w("div"),t=w("span"),s=z(),r=w("span"),l=Z(i),this.h()},l(a){e=k(a,"DIV",{class:!0});var o=R(e);t=k(o,"SPAN",{class:!0,style:!0}),R(t).forEach(v),s=M(o),r=k(o,"SPAN",{class:!0});var u=R(r);l=X(u,i),u.forEach(v),o.forEach(v),this.h()},h(){f(t,"class","status-dot svelte-mn2c16"),Te(t,"background-color",ds(n[1].status)),f(r,"class","status-text svelte-mn2c16"),f(e,"class","status-display svelte-mn2c16")},m(a,o){j(a,e,o),c(e,t),c(e,s),c(e,r),c(r,l)},p(a,o){o&2&&Te(t,"background-color",ds(a[1].status)),o&2&&i!==(i=a[1].status.charAt(0).toUpperCase()+a[1].status.slice(1)+"")&&re(l,i)},d(a){a&&v(e)}}}function Jd(n){let e,t,s="Status:",r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b,A;return{c(){e=w("div"),t=w("label"),t.textContent=s,r=z(),i=w("div"),l=w("button"),a=w("span"),o=Z(`\r
								Active`),d=z(),p=w("button"),h=w("span"),_=Z(`\r
								Away`),y=z(),T=w("button"),D=w("span"),m=Z(`\r
								Busy`),this.h()},l(I){e=k(I,"DIV",{class:!0});var E=R(e);t=k(E,"LABEL",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-138t5u0"&&(t.textContent=s),r=M(E),i=k(E,"DIV",{class:!0});var N=R(i);l=k(N,"BUTTON",{class:!0});var S=R(l);a=k(S,"SPAN",{class:!0,style:!0}),R(a).forEach(v),o=X(S,`\r
								Active`),S.forEach(v),d=M(N),p=k(N,"BUTTON",{class:!0});var F=R(p);h=k(F,"SPAN",{class:!0,style:!0}),R(h).forEach(v),_=X(F,`\r
								Away`),F.forEach(v),y=M(N),T=k(N,"BUTTON",{class:!0});var P=R(T);D=k(P,"SPAN",{class:!0,style:!0}),R(D).forEach(v),m=X(P,`\r
								Busy`),P.forEach(v),N.forEach(v),E.forEach(v),this.h()},h(){f(t,"class","status-label svelte-mn2c16"),f(a,"class","status-dot svelte-mn2c16"),Te(a,"background-color",ds("active")),f(l,"class",u="status-btn "+(n[3]==="active"?"selected":"")+" svelte-mn2c16"),f(h,"class","status-dot svelte-mn2c16"),Te(h,"background-color",ds("away")),f(p,"class",g="status-btn "+(n[3]==="away"?"selected":"")+" svelte-mn2c16"),f(D,"class","status-dot svelte-mn2c16"),Te(D,"background-color",ds("busy")),f(T,"class",C="status-btn "+(n[3]==="busy"?"selected":"")+" svelte-mn2c16"),f(i,"class","status-options svelte-mn2c16"),f(e,"class","status-section svelte-mn2c16")},m(I,E){j(I,e,E),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),c(l,o),c(i,d),c(i,p),c(p,h),c(p,_),c(i,y),c(i,T),c(T,D),c(T,m),b||(A=[W(l,"click",n[16]),W(p,"click",n[17]),W(T,"click",n[18])],b=!0)},p(I,E){E&8&&u!==(u="status-btn "+(I[3]==="active"?"selected":"")+" svelte-mn2c16")&&f(l,"class",u),E&8&&g!==(g="status-btn "+(I[3]==="away"?"selected":"")+" svelte-mn2c16")&&f(p,"class",g),E&8&&C!==(C="status-btn "+(I[3]==="busy"?"selected":"")+" svelte-mn2c16")&&f(T,"class",C)},d(I){I&&v(e),b=!1,Ie(A)}}}function kl(n){let e,t,s="Cancel",r,i,l="Save Changes",a,o;return{c(){e=w("div"),t=w("button"),t.textContent=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-2pqgi7"&&(t.textContent=s),r=M(d),i=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-2yi6cr"&&(i.textContent=l),d.forEach(v),this.h()},h(){f(t,"class","cancel-btn svelte-mn2c16"),f(i,"class","save-btn svelte-mn2c16"),f(e,"class","modal-footer svelte-mn2c16")},m(u,d){j(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=[W(t,"click",n[9]),W(i,"click",n[11])],a=!0)},p:Oe,d(u){u&&v(e),a=!1,Ie(o)}}}function Qd(n){let e,t=n[0]&&n[1]&&ml(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=ml(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function ds(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function $d(n,e,t){let{isOpen:s=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,l=r?.status||"active";r?.profilePicture;let a=null,o=null,u="",d=!1;function p(){if(!Ge||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=E[r.id]||"")}function h(){if(!Ge||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?E[r.id]=u:delete E[r.id],localStorage.setItem("userNotes",JSON.stringify(E)),t(6,d=!1)}function _(){t(0,s=!1),a=null,t(4,o=null),t(6,d=!1)}function g(E){const S=E.target.files?.[0];if(S&&S.type.startsWith("image/")){a=S;const F=new FileReader;F.onload=P=>{t(4,o=P.target?.result)},F.readAsDataURL(S)}}function y(){i&&(a&&o?il(l,o):l!==r?.status&&il(l,void 0),_())}function T(E){Wt.call(this,n,E)}const D=()=>t(6,d=!0);function m(){u=this.value,t(5,u)}const C=()=>{t(6,d=!1),p()},b=()=>t(3,l="active"),A=()=>t(3,l="away"),I=()=>t(3,l="busy");return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"user"in E&&t(1,r=E.user),"isOwnProfile"in E&&t(2,i=E.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&2&&r&&(t(3,l=r.status),r.profilePicture,p())},[s,r,i,l,o,u,d,p,h,_,g,y,T,D,m,C,b,A,I]}class fi extends ht{constructor(e){super(),pt(this,e,$d,Qd,dt,{isOpen:0,user:1,isOwnProfile:2})}}function wl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,i,l,a,o,u,d,p=n[1].isPinned?"ðŸ“Œ":"ðŸ“",h,_,g=n[1].isPinned?"Unpin":"Pin",y,T,D,m,C=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,b,A,I,E=n[11]&&n[6]&&yl(n),N=n[7]&&El(n),S=n[12]&&Cl(n),F=n[12]&&Tl(n);return{c(){e=w("div"),t=w("div"),s=w("button"),s.innerHTML=r,i=z(),E&&E.c(),l=z(),N&&N.c(),a=z(),S&&S.c(),o=z(),u=w("button"),d=w("span"),h=Z(p),_=z(),y=Z(g),T=Z(" Message"),D=z(),m=w("button"),m.innerHTML=C,b=z(),F&&F.c(),this.h()},l(P){e=k(P,"DIV",{class:!0});var O=R(e);t=k(O,"DIV",{class:!0,style:!0});var B=R(t);s=k(B,"BUTTON",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1bhlhgs"&&(s.innerHTML=r),i=M(B),E&&E.l(B),l=M(B),N&&N.l(B),a=M(B),S&&S.l(B),o=M(B),u=k(B,"BUTTON",{class:!0});var x=R(u);d=k(x,"SPAN",{class:!0});var L=R(d);h=X(L,p),L.forEach(v),_=M(x),y=X(x,g),T=X(x," Message"),x.forEach(v),D=M(B),m=k(B,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-pkfnng"&&(m.innerHTML=C),b=M(B),F&&F.l(B),B.forEach(v),O.forEach(v),this.h()},h(){f(s,"class","menu-item svelte-5kwx2s"),f(d,"class","menu-icon svelte-5kwx2s"),f(u,"class","menu-item svelte-5kwx2s"),f(m,"class","menu-item copy svelte-5kwx2s"),f(t,"class","context-menu svelte-5kwx2s"),Te(t,"top",n[9]+"px"),Te(t,"left",n[10]+"px"),f(e,"class","context-menu-overlay svelte-5kwx2s")},m(P,O){j(P,e,O),c(e,t),c(t,s),c(t,i),E&&E.m(t,null),c(t,l),N&&N.m(t,null),c(t,a),S&&S.m(t,null),c(t,o),c(t,u),c(u,d),c(d,h),c(u,_),c(u,y),c(u,T),c(t,D),c(t,m),c(t,b),F&&F.m(t,null),n[18](t),A||(I=[W(s,"click",function(){yn(n[5])&&n[5].apply(this,arguments)}),W(u,"click",function(){yn(n[4])&&n[4].apply(this,arguments)}),W(m,"click",n[17]),W(t,"click",lt(n[16])),W(e,"click",n[19])],A=!0)},p(P,O){n=P,n[11]&&n[6]?E?E.p(n,O):(E=yl(n),E.c(),E.m(t,l)):E&&(E.d(1),E=null),n[7]?N?N.p(n,O):(N=El(n),N.c(),N.m(t,a)):N&&(N.d(1),N=null),n[12]?S?S.p(n,O):(S=Cl(n),S.c(),S.m(t,o)):S&&(S.d(1),S=null),O&2&&p!==(p=n[1].isPinned?"ðŸ“Œ":"ðŸ“")&&re(h,p),O&2&&g!==(g=n[1].isPinned?"Unpin":"Pin")&&re(y,g),n[12]?F?F.p(n,O):(F=Tl(n),F.c(),F.m(t,null)):F&&(F.d(1),F=null),O&512&&Te(t,"top",n[9]+"px"),O&1024&&Te(t,"left",n[10]+"px")},d(P){P&&v(e),E&&E.d(),N&&N.d(),S&&S.d(),F&&F.d(),n[18](null),A=!1,Ie(I)}}}function yl(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){j(i,e,l),s||(r=W(e,"click",function(){yn(n[6])&&n[6].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function El(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){j(i,e,l),s||(r=W(e,"click",function(){yn(n[7])&&n[7].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function Cl(n){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,s,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){j(i,e,l),s||(r=W(e,"click",function(){yn(n[2])&&n[2].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function Tl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,i,l;return{c(){e=w("div"),t=z(),s=w("button"),s.innerHTML=r,this.h()},l(a){e=k(a,"DIV",{class:!0}),R(e).forEach(v),t=M(a),s=k(a,"BUTTON",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-g8outl"&&(s.innerHTML=r),this.h()},h(){f(e,"class","menu-divider svelte-5kwx2s"),f(s,"class","menu-item delete svelte-5kwx2s")},m(a,o){j(a,e,o),j(a,t,o),j(a,s,o),i||(l=W(s,"click",function(){yn(n[3])&&n[3].apply(this,arguments)}),i=!0)},p(a,o){n=a},d(a){a&&(v(e),v(t),v(s)),i=!1,l()}}}function eh(n){let e,t=n[0]&&wl(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=wl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function th(n,e,t){let s,r,i,l,a;Pe(n,dn,E=>t(15,a=E));let{message:o}=e,{x:u=0}=e,{y:d=0}=e,{visible:p=!1}=e,{onEdit:h}=e,{onDelete:_}=e,{onPin:g}=e,{onReply:y}=e,{onDownload:T=void 0}=e,{onForward:D=void 0}=e,m;function C(E){Wt.call(this,n,E)}const b=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function A(E){it[E?"unshift":"push"](()=>{m=E,t(8,m)})}const I=()=>t(0,p=!1);return n.$$set=E=>{"message"in E&&t(1,o=E.message),"x"in E&&t(13,u=E.x),"y"in E&&t(14,d=E.y),"visible"in E&&t(0,p=E.visible),"onEdit"in E&&t(2,h=E.onEdit),"onDelete"in E&&t(3,_=E.onDelete),"onPin"in E&&t(4,g=E.onPin),"onReply"in E&&t(5,y=E.onReply),"onDownload"in E&&t(6,T=E.onDownload),"onForward"in E&&t(7,D=E.onForward)},n.$$.update=()=>{n.$$.dirty&32770&&t(12,s=o.userId===a?.id),n.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),n.$$.dirty&8448&&t(10,i=(()=>{if(!m)return u;const E=m.offsetWidth||200,N=window.innerWidth;return u+E>N?u-E:u})()),n.$$.dirty&16640&&t(9,l=(()=>{if(!m)return d;const E=m.offsetHeight||300,N=window.innerHeight;return d+E>N?d-E:d})())},[p,o,h,_,g,y,T,D,m,l,i,r,s,u,d,a,C,b,A,I]}class nh extends ht{constructor(e){super(),pt(this,e,th,eh,dt,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function Al(n,e,t){const s=n.slice();return s[9]=e[t],s}function Sl(n){let e,t,s,r,i="Forward Message",l,a,o="âœ•",u,d,p,h="Choose a channel to forward this message to:",_,g,y,T,D=Xe(n[2]),m=[];for(let C=0;C<D.length;C+=1)m[C]=Dl(Al(n,D,C));return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h3"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("p"),p.textContent=h,_=z(),g=w("div");for(let C=0;C<m.length;C+=1)m[C].c();this.h()},l(C){e=k(C,"DIV",{class:!0});var b=R(e);t=k(b,"DIV",{class:!0});var A=R(t);s=k(A,"DIV",{class:!0});var I=R(s);r=k(I,"H3",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-1xq5ns4"&&(r.textContent=i),l=M(I),a=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-19jqbg1"&&(a.textContent=o),I.forEach(v),u=M(A),d=k(A,"DIV",{class:!0});var E=R(d);p=k(E,"P",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-alvqmp"&&(p.textContent=h),_=M(E),g=k(E,"DIV",{class:!0});var N=R(g);for(let S=0;S<m.length;S+=1)m[S].l(N);N.forEach(v),E.forEach(v),A.forEach(v),b.forEach(v),this.h()},h(){f(r,"class","svelte-70r9o1"),f(a,"class","close-button svelte-70r9o1"),f(s,"class","dialog-header svelte-70r9o1"),f(p,"class","dialog-description svelte-70r9o1"),f(g,"class","channel-list svelte-70r9o1"),f(d,"class","dialog-content svelte-70r9o1"),f(t,"class","dialog svelte-70r9o1"),f(e,"class","dialog-overlay svelte-70r9o1")},m(C,b){j(C,e,b),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(d,_),c(d,g);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(g,null);y||(T=[W(a,"click",n[5]),W(t,"click",lt(n[6])),W(e,"click",n[5])],y=!0)},p(C,b){if(b&28){D=Xe(C[2]);let A;for(A=0;A<D.length;A+=1){const I=Al(C,D,A);m[A]?m[A].p(I,b):(m[A]=Dl(I),m[A].c(),m[A].m(g,null))}for(;A<m.length;A+=1)m[A].d(1);m.length=D.length}},d(C){C&&v(e),Ys(m,C),y=!1,Ie(T)}}}function Il(n){let e,t,s,r,i=n[9].name+"",l,a,o,u;function d(g,y){return g[9].type==="dm"?rh:sh}let p=d(n),h=p(n);function _(){return n[7](n[9])}return{c(){e=w("button"),t=w("span"),h.c(),s=z(),r=w("span"),l=Z(i),a=z(),this.h()},l(g){e=k(g,"BUTTON",{class:!0});var y=R(e);t=k(y,"SPAN",{class:!0});var T=R(t);h.l(T),T.forEach(v),s=M(y),r=k(y,"SPAN",{class:!0});var D=R(r);l=X(D,i),D.forEach(v),a=M(y),y.forEach(v),this.h()},h(){f(t,"class","channel-icon svelte-70r9o1"),f(r,"class","channel-name svelte-70r9o1"),f(e,"class","channel-item svelte-70r9o1")},m(g,y){j(g,e,y),c(e,t),h.m(t,null),c(e,s),c(e,r),c(r,l),c(e,a),o||(u=W(e,"click",_),o=!0)},p(g,y){n=g,p!==(p=d(n))&&(h.d(1),h=p(n),h&&(h.c(),h.m(t,null))),y&4&&i!==(i=n[9].name+"")&&re(l,i)},d(g){g&&v(e),h.d(),o=!1,u()}}}function sh(n){let e;return{c(){e=Z("#")},l(t){e=X(t,"#")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function rh(n){let e;return{c(){e=Z("ðŸ’¬")},l(t){e=X(t,"ðŸ’¬")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function Dl(n){let e,t=n[9].id!==n[3]&&Il(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,r){s[9].id!==s[3]?t?t.p(s,r):(t=Il(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&v(e),t&&t.d(s)}}}function ih(n){let e,t=n[0]&&n[1]&&Sl(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=Sl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function lh(n,e,t){let s,r,i;Pe(n,Kn,h=>t(8,s=h)),Pe(n,Bt,h=>t(2,r=h)),Pe(n,Fn,h=>t(3,i=h));let{visible:l=!1}=e,{message:a=null}=e;function o(h){!a||!s||(s.emit("message",{channelId:h,text:a.text,type:a.type,gifUrl:a.gifUrl,fileUrl:a.fileUrl,fileName:a.fileName,fileSize:a.fileSize,files:a.files}),t(0,l=!1))}function u(){t(0,l=!1)}function d(h){Wt.call(this,n,h)}const p=h=>o(h.id);return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"message"in h&&t(1,a=h.message)},[l,a,r,i,o,u,d,p]}class ah extends ht{constructor(e){super(),pt(this,e,lh,ih,dt,{visible:0,message:1})}}function Nl(n){let e,t,s,r,i,l,a,o="Ã—",u,d,p,h,_,g,y,T,D,m,C,b,A,I;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),i=Z(n[1]),l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("p"),h=Z(n[2]),_=z(),g=w("div"),y=w("button"),T=Z(n[4]),D=z(),m=w("button"),C=Z(n[3]),this.h()},l(E){e=k(E,"DIV",{class:!0});var N=R(e);t=k(N,"DIV",{class:!0});var S=R(t);s=k(S,"DIV",{class:!0});var F=R(s);r=k(F,"H2",{class:!0});var P=R(r);i=X(P,n[1]),P.forEach(v),l=M(F),a=k(F,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-y9ayml"&&(a.textContent=o),F.forEach(v),u=M(S),d=k(S,"DIV",{class:!0});var O=R(d);p=k(O,"P",{class:!0});var B=R(p);h=X(B,n[2]),B.forEach(v),O.forEach(v),_=M(S),g=k(S,"DIV",{class:!0});var x=R(g);y=k(x,"BUTTON",{class:!0});var L=R(y);T=X(L,n[4]),L.forEach(v),D=M(x),m=k(x,"BUTTON",{class:!0});var H=R(m);C=X(H,n[3]),H.forEach(v),x.forEach(v),S.forEach(v),N.forEach(v),this.h()},h(){f(r,"class","svelte-1myntg4"),f(a,"class","close-btn svelte-1myntg4"),f(s,"class","modal-header svelte-1myntg4"),f(p,"class","svelte-1myntg4"),f(d,"class","modal-body svelte-1myntg4"),f(y,"class","cancel-btn svelte-1myntg4"),f(m,"class",b="confirm-btn "+n[5]+" svelte-1myntg4"),f(g,"class","modal-footer svelte-1myntg4"),f(t,"class","modal-content svelte-1myntg4"),f(e,"class","modal-overlay svelte-1myntg4")},m(E,N){j(E,e,N),c(e,t),c(t,s),c(s,r),c(r,i),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(t,_),c(t,g),c(g,y),c(y,T),c(g,D),c(g,m),c(m,C),A||(I=[W(a,"click",n[7]),W(y,"click",n[7]),W(m,"click",n[6]),W(t,"click",lt(n[10])),W(e,"click",n[7])],A=!0)},p(E,N){N&2&&re(i,E[1]),N&4&&re(h,E[2]),N&16&&re(T,E[4]),N&8&&re(C,E[3]),N&32&&b!==(b="confirm-btn "+E[5]+" svelte-1myntg4")&&f(m,"class",b)},d(E){E&&v(e),A=!1,Ie(I)}}}function oh(n){let e,t=n[0]&&Nl(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=Nl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function ch(n,e,t){let{isOpen:s=!1}=e,{title:r="Confirm Action"}=e,{message:i="Are you sure you want to proceed?"}=e,{confirmText:l="Confirm"}=e,{cancelText:a="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:d=()=>{}}=e;function p(){u()}function h(){d()}function _(g){Wt.call(this,n,g)}return n.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"title"in g&&t(1,r=g.title),"message"in g&&t(2,i=g.message),"confirmText"in g&&t(3,l=g.confirmText),"cancelText"in g&&t(4,a=g.cancelText),"variant"in g&&t(5,o=g.variant),"onConfirm"in g&&t(8,u=g.onConfirm),"onCancel"in g&&t(9,d=g.onCancel)},[s,r,i,l,a,o,p,h,u,d,_]}class Mn extends ht{constructor(e){super(),pt(this,e,ch,oh,dt,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:uh}=Kr;function Rl(n,e,t){const s=n.slice();s[68]=e[t];const r=s[19](s[68].user);s[69]=r;const i=s[33](s[68].replyTo);return s[70]=i,s}function Pl(n,e,t){const s=n.slice();return s[73]=e[t],s[75]=t,s}function Ol(n){let e,t="<span>New Messages</span>";return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){f(e,"class","new-messages-divider svelte-zjz65z")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function fh(n){let e,t=n[68].user.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-zjz65z"),Te(e,"background-color",n[20](n[68].user))},m(r,i){j(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user.charAt(0).toUpperCase()+"")&&re(s,t),i[0]&1&&Te(e,"background-color",r[20](r[68].user))},d(r){r&&v(e)}}}function dh(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[69].profilePicture)||f(e,"src",t),f(e,"alt",s=n[68].user),f(e,"class","avatar svelte-zjz65z")},m(r,i){j(r,e,i)},p(r,i){i[0]&1&&!He(e.src,t=r[69].profilePicture)&&f(e,"src",t),i[0]&1&&s!==(s=r[68].user)&&f(e,"alt",s)},d(r){r&&v(e)}}}function hh(n){let e,t=n[68].user+"",s;return{c(){e=w("span"),s=Z(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(r,i){j(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user+"")&&re(s,t)},d(r){r&&v(e)}}}function ph(n){let e,t=n[68].user+"",s,r,i;function l(){return n[44](n[69])}return{c(){e=w("button"),s=Z(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var o=R(e);s=X(o,t),o.forEach(v),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(a,o){j(a,e,o),c(e,s),r||(i=W(e,"click",l),r=!0)},p(a,o){n=a,o[0]&1&&t!==(t=n[68].user+"")&&re(s,t)},d(a){a&&v(e),r=!1,i()}}}function Ml(n){let e,t="ðŸ“Œ";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){f(e,"class","pin-badge svelte-zjz65z"),f(e,"title","Pinned message")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function zl(n){let e,t="(edited)";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){f(e,"class","edited-badge svelte-zjz65z"),f(e,"title","Edited")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function Fl(n){let e,t,s,r,i,l=n[70].user+"",a,o,u,d=n[70].text.substring(0,100)+"",p,h=n[70].text.length>100?"...":"",_,g,y;function T(){return n[45](n[70])}return{c(){e=w("div"),t=w("div"),s=z(),r=w("div"),i=w("span"),a=Z(l),o=z(),u=w("span"),p=Z(d),_=Z(h),this.h()},l(D){e=k(D,"DIV",{class:!0});var m=R(e);t=k(m,"DIV",{class:!0}),R(t).forEach(v),s=M(m),r=k(m,"DIV",{class:!0});var C=R(r);i=k(C,"SPAN",{class:!0});var b=R(i);a=X(b,l),b.forEach(v),o=M(C),u=k(C,"SPAN",{class:!0});var A=R(u);p=X(A,d),_=X(A,h),A.forEach(v),C.forEach(v),m.forEach(v),this.h()},h(){f(t,"class","reply-line svelte-zjz65z"),f(i,"class","reply-username svelte-zjz65z"),f(u,"class","reply-text svelte-zjz65z"),f(r,"class","reply-content svelte-zjz65z"),f(e,"class","reply-preview svelte-zjz65z")},m(D,m){j(D,e,m),c(e,t),c(e,s),c(e,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(u,_),g||(y=W(e,"click",T),g=!0)},p(D,m){n=D,m[0]&1&&l!==(l=n[70].user+"")&&re(a,l),m[0]&1&&d!==(d=n[70].text.substring(0,100)+"")&&re(p,d),m[0]&1&&h!==(h=n[70].text.length>100?"...":"")&&re(_,h)},d(D){D&&v(e),g=!1,y()}}}function gh(n){let e;function t(i,l){return i[68].type==="gif"&&i[68].gifUrl?bh:i[68].type==="file"&&(i[68].fileUrl||i[68].files)?_h:vh}let s=t(n),r=s(n);return{c(){e=w("div"),r.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=R(e);r.l(l),l.forEach(v),this.h()},h(){f(e,"class","message-content")},m(i,l){j(i,e,l),r.m(e,null)},p(i,l){s===(s=t(i))&&r?r.p(i,l):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&v(e),r.d()}}}function mh(n){let e,t,s,r,i,l="Cancel",a,o,u="Save",d,p;function h(...g){return n[47](n[68],...g)}function _(){return n[48](n[68])}return{c(){e=w("div"),t=w("textarea"),s=z(),r=w("div"),i=w("button"),i.textContent=l,a=z(),o=w("button"),o.textContent=u,this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"TEXTAREA",{class:!0,rows:!0}),R(t).forEach(v),s=M(y),r=k(y,"DIV",{class:!0});var T=R(r);i=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1czerce"&&(i.textContent=l),a=M(T),o=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-w3glyi"&&(o.textContent=u),T.forEach(v),y.forEach(v),this.h()},h(){f(t,"class","edit-textarea svelte-zjz65z"),f(t,"rows","3"),f(i,"class","edit-cancel svelte-zjz65z"),f(o,"class","edit-save svelte-zjz65z"),f(r,"class","edit-actions svelte-zjz65z"),f(e,"class","edit-mode svelte-zjz65z")},m(g,y){j(g,e,y),c(e,t),nt(t,n[10]),c(e,s),c(e,r),c(r,i),c(r,a),c(r,o),d||(p=[W(t,"input",n[46]),W(t,"keydown",h),W(i,"click",n[25]),W(o,"click",_)],d=!0)},p(g,y){n=g,y[0]&1024&&nt(t,n[10])},d(g){g&&v(e),d=!1,Ie(p)}}}function vh(n){let e,t,s=Vs(n[68].text)+"";return{c(){e=w("div"),t=new Po(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);t=Ro(i,!1),i.forEach(v),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){j(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Vs(r[68].text)+"")&&t.p(s)},d(r){r&&v(e)}}}function _h(n){let e,t;function s(a,o){if(a[68].files&&a[68].files.length>1)return wh;if(a[68].fileUrl)return kh}let r=s(n),i=r&&r(n),l=n[68].text&&(n[68].files?n[68].text!==`Shared ${n[68].files.length} files`:n[68].text!==`Shared: ${n[68].fileName}`)&&xl(n);return{c(){i&&i.c(),e=z(),l&&l.c(),t=Me()},l(a){i&&i.l(a),e=M(a),l&&l.l(a),t=Me()},m(a,o){i&&i.m(a,o),j(a,e,o),l&&l.m(a,o),j(a,t,o)},p(a,o){r===(r=s(a))&&i?i.p(a,o):(i&&i.d(1),i=r&&r(a),i&&(i.c(),i.m(e.parentNode,e))),a[68].text&&(a[68].files?a[68].text!==`Shared ${a[68].files.length} files`:a[68].text!==`Shared: ${a[68].fileName}`)?l?l.p(a,o):(l=xl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){a&&(v(e),v(t)),i&&i.d(a),l&&l.d(a)}}}function bh(n){let e,t,s,r;return{c(){e=w("img"),this.h()},l(i){e=k(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){He(e.src,t=n[68].gifUrl)||f(e,"src",t),f(e,"alt","GIF"),f(e,"class",s="gif "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(e,"data-spoiler",r=n[68].isSpoiler?"true":"false")},m(i,l){j(i,e,l)},p(i,l){l[0]&1&&!He(e.src,t=i[68].gifUrl)&&f(e,"src",t),l[0]&1&&s!==(s="gif "+(i[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(e,"class",s),l[0]&1&&r!==(r=i[68].isSpoiler?"true":"false")&&f(e,"data-spoiler",r)},d(i){i&&v(e)}}}function kh(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!di(a[68].fileName)),e?Ch:(t==null&&(t=!!kc(a[68].fileName)),t?Eh:yh)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Me()},l(a){l.l(a),s=Me()},m(a,o){l.m(a,o),j(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&v(s),l.d(a)}}}function wh(n){let e,t=Xe(n[68].files.slice(0,4)),s=[];for(let r=0;r<t.length;r+=1)s[r]=Ul(Pl(n,t,r));return{c(){e=w("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(v),this.h()},h(){f(e,"class","files-gallery svelte-zjz65z"),he(e,"has-more",n[68].files.length>4)},m(r,i){j(r,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(r,i){if(i[0]&1|i[1]&272){t=Xe(r[68].files.slice(0,4));let l;for(l=0;l<t.length;l+=1){const a=Pl(r,t,l);s[l]?s[l].p(a,i):(s[l]=Ul(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}i[0]&1&&he(e,"has-more",r[68].files.length>4)},d(r){r&&v(e),Ys(s,r)}}}function yh(n){let e,t,s=An(n[68].fileName)+"",r,i,l,a,o=n[68].fileName+"",u,d,p,h=Tn(n[68].fileSize)+"",_,g,y;return{c(){e=w("a"),t=w("span"),r=Z(s),i=z(),l=w("div"),a=w("span"),u=Z(o),d=z(),p=w("span"),_=Z(h),this.h()},l(T){e=k(T,"A",{href:!0,download:!0,class:!0});var D=R(e);t=k(D,"SPAN",{class:!0});var m=R(t);r=X(m,s),m.forEach(v),i=M(D),l=k(D,"DIV",{class:!0});var C=R(l);a=k(C,"SPAN",{class:!0});var b=R(a);u=X(b,o),b.forEach(v),d=M(C),p=k(C,"SPAN",{class:!0});var A=R(p);_=X(A,h),A.forEach(v),C.forEach(v),D.forEach(v),this.h()},h(){f(t,"class","file-icon svelte-zjz65z"),f(a,"class","file-name svelte-zjz65z"),f(p,"class","file-size svelte-zjz65z"),f(l,"class","file-info svelte-zjz65z"),f(e,"href",g=ct(n[68].fileUrl)),f(e,"download",y=n[68].fileName),f(e,"class","file-attachment svelte-zjz65z")},m(T,D){j(T,e,D),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,_)},p(T,D){D[0]&1&&s!==(s=An(T[68].fileName)+"")&&re(r,s),D[0]&1&&o!==(o=T[68].fileName+"")&&re(u,o),D[0]&1&&h!==(h=Tn(T[68].fileSize)+"")&&re(_,h),D[0]&1&&g!==(g=ct(T[68].fileUrl))&&f(e,"href",g),D[0]&1&&y!==(y=T[68].fileName)&&f(e,"download",y)},d(T){T&&v(e)}}}function Eh(n){let e,t,s,r,i,l,a,o,u,d,p,h=An(n[68].fileName)+"",_,g,y=n[68].fileName+"",T,D,m,C,b=Tn(n[68].fileSize)+"",A,I,E,N,S,F;function P(...B){return n[53](n[68],...B)}function O(...B){return n[54](n[68],...B)}return{c(){e=w("div"),t=w("video"),s=w("source"),l=Z(`\r
									Your browser does not support the video tag.`),u=z(),d=w("a"),p=w("span"),_=Z(h),g=z(),T=Z(y),D=z(),m=w("span"),C=Z("("),A=Z(b),I=Z(")"),this.h()},l(B){e=k(B,"DIV",{class:!0});var x=R(e);t=k(x,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var L=R(t);s=k(L,"SOURCE",{src:!0,type:!0}),l=X(L,`\r
									Your browser does not support the video tag.`),L.forEach(v),u=M(x),d=k(x,"A",{href:!0,download:!0,class:!0});var H=R(d);p=k(H,"SPAN",{class:!0});var V=R(p);_=X(V,h),V.forEach(v),g=M(H),T=X(H,y),D=M(H),m=k(H,"SPAN",{class:!0});var U=R(m);C=X(U,"("),A=X(U,b),I=X(U,")"),U.forEach(v),H.forEach(v),x.forEach(v),this.h()},h(){He(s.src,r=ct(n[68].fileUrl))||f(s,"src",r),f(s,"type",i="video/"+n[68].fileName?.split(".").pop()),t.controls=!0,f(t,"class",a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",o=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(p,"class","file-icon svelte-zjz65z"),f(m,"class","file-size svelte-zjz65z"),f(d,"href",E=ct(n[68].fileUrl)),f(d,"download",N=n[68].fileName),f(d,"class","video-download-link svelte-zjz65z"),f(e,"class","video-container svelte-zjz65z")},m(B,x){j(B,e,x),c(e,t),c(t,s),c(t,l),c(e,u),c(e,d),c(d,p),c(p,_),c(d,g),c(d,T),c(d,D),c(d,m),c(m,C),c(m,A),c(m,I),S||(F=[W(t,"click",P),W(t,"contextmenu",O)],S=!0)},p(B,x){n=B,x[0]&1&&!He(s.src,r=ct(n[68].fileUrl))&&f(s,"src",r),x[0]&1&&i!==(i="video/"+n[68].fileName?.split(".").pop())&&f(s,"type",i),x[0]&1&&a!==(a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",a),x[0]&1&&o!==(o=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",o),x[0]&1&&h!==(h=An(n[68].fileName)+"")&&re(_,h),x[0]&1&&y!==(y=n[68].fileName+"")&&re(T,y),x[0]&1&&b!==(b=Tn(n[68].fileSize)+"")&&re(A,b),x[0]&1&&E!==(E=ct(n[68].fileUrl))&&f(d,"href",E),x[0]&1&&N!==(N=n[68].fileName)&&f(d,"download",N)},d(B){B&&v(e),S=!1,Ie(F)}}}function Ch(n){let e,t,s,r,i,l,a,o,u,d=An(n[68].fileName)+"",p,h,_=n[68].fileName+"",g,y,T,D,m=Tn(n[68].fileSize)+"",C,b,A,I,E,N;function S(...P){return n[51](n[68],...P)}function F(...P){return n[52](n[68],...P)}return{c(){e=w("div"),t=w("img"),a=z(),o=w("a"),u=w("span"),p=Z(d),h=z(),g=Z(_),y=z(),T=w("span"),D=Z("("),C=Z(m),b=Z(")"),this.h()},l(P){e=k(P,"DIV",{class:!0});var O=R(e);t=k(O,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(O),o=k(O,"A",{href:!0,download:!0,class:!0});var B=R(o);u=k(B,"SPAN",{class:!0});var x=R(u);p=X(x,d),x.forEach(v),h=M(B),g=X(B,_),y=M(B),T=k(B,"SPAN",{class:!0});var L=R(T);D=X(L,"("),C=X(L,m),b=X(L,")"),L.forEach(v),B.forEach(v),O.forEach(v),this.h()},h(){He(t.src,s=ct(n[68].fileUrl))||f(t,"src",s),f(t,"alt",r=n[68].fileName),f(t,"class",i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(u,"class","file-icon svelte-zjz65z"),f(T,"class","file-size svelte-zjz65z"),f(o,"href",A=ct(n[68].fileUrl)),f(o,"download",I=n[68].fileName),f(o,"class","image-download-link svelte-zjz65z"),f(e,"class","image-container svelte-zjz65z")},m(P,O){j(P,e,O),c(e,t),c(e,a),c(e,o),c(o,u),c(u,p),c(o,h),c(o,g),c(o,y),c(o,T),c(T,D),c(T,C),c(T,b),E||(N=[W(t,"click",S),W(t,"contextmenu",F)],E=!0)},p(P,O){n=P,O[0]&1&&!He(t.src,s=ct(n[68].fileUrl))&&f(t,"src",s),O[0]&1&&r!==(r=n[68].fileName)&&f(t,"alt",r),O[0]&1&&i!==(i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),O[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),O[0]&1&&d!==(d=An(n[68].fileName)+"")&&re(p,d),O[0]&1&&_!==(_=n[68].fileName+"")&&re(g,_),O[0]&1&&m!==(m=Tn(n[68].fileSize)+"")&&re(C,m),O[0]&1&&A!==(A=ct(n[68].fileUrl))&&f(o,"href",A),O[0]&1&&I!==(I=n[68].fileName)&&f(o,"download",I)},d(P){P&&v(e),E=!1,Ie(N)}}}function Th(n){let e,t,s=An(n[73].fileName)+"",r,i,l,a,o=n[73].fileName+"",u,d,p,h,_=Tn(n[73].fileSize)+"",g,y,T,D,m;return{c(){e=w("a"),t=w("div"),r=Z(s),i=z(),l=w("div"),a=w("span"),u=Z(o),d=z(),p=w("span"),h=Z("("),g=Z(_),y=Z(")"),T=z(),this.h()},l(C){e=k(C,"A",{href:!0,download:!0,class:!0});var b=R(e);t=k(b,"DIV",{class:!0});var A=R(t);r=X(A,s),A.forEach(v),i=M(b),l=k(b,"DIV",{class:!0});var I=R(l);a=k(I,"SPAN",{class:!0});var E=R(a);u=X(E,o),E.forEach(v),d=M(I),p=k(I,"SPAN",{class:!0});var N=R(p);h=X(N,"("),g=X(N,_),y=X(N,")"),N.forEach(v),I.forEach(v),T=M(b),b.forEach(v),this.h()},h(){f(t,"class","gallery-file-icon-large svelte-zjz65z"),f(a,"class","file-name-truncate svelte-zjz65z"),f(p,"class","file-size-small svelte-zjz65z"),f(l,"class","gallery-file-overlay svelte-zjz65z"),f(e,"href",D=ct(n[73].fileUrl)),f(e,"download",m=n[73].fileName),f(e,"class","gallery-file-item file-link svelte-zjz65z")},m(C,b){j(C,e,b),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,h),c(p,g),c(p,y),c(e,T)},p(C,b){b[0]&1&&s!==(s=An(C[73].fileName)+"")&&re(r,s),b[0]&1&&o!==(o=C[73].fileName+"")&&re(u,o),b[0]&1&&_!==(_=Tn(C[73].fileSize)+"")&&re(g,_),b[0]&1&&D!==(D=ct(C[73].fileUrl))&&f(e,"href",D),b[0]&1&&m!==(m=C[73].fileName)&&f(e,"download",m)},d(C){C&&v(e)}}}function Ah(n){let e,t,s,r,i,l,a,o,u,d;function p(..._){return n[50](n[73],..._)}let h=n[75]===3&&n[68].files.length>4&&Bl(n);return{c(){e=w("div"),t=w("video"),s=w("source"),a=z(),h&&h.c(),o=z(),this.h()},l(_){e=k(_,"DIV",{class:!0});var g=R(e);t=k(g,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var y=R(t);s=k(y,"SOURCE",{src:!0}),y.forEach(v),a=M(g),h&&h.l(g),o=M(g),g.forEach(v),this.h()},h(){He(s.src,r=ct(n[73].fileUrl))||f(s,"src",r),f(t,"class",i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(_,g){j(_,e,g),c(e,t),c(t,s),c(e,a),h&&h.m(e,null),c(e,o),u||(d=W(t,"click",p),u=!0)},p(_,g){n=_,g[0]&1&&!He(s.src,r=ct(n[73].fileUrl))&&f(s,"src",r),g[0]&1&&i!==(i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=Bl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(_){_&&v(e),h&&h.d(),u=!1,d()}}}function Sh(n){let e,t,s,r,i,l,a,o,u,d;function p(..._){return n[49](n[68],n[73],..._)}let h=n[75]===3&&n[68].files.length>4&&Ll(n);return{c(){e=w("div"),t=w("img"),a=z(),h&&h.c(),o=z(),this.h()},l(_){e=k(_,"DIV",{class:!0});var g=R(e);t=k(g,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(g),h&&h.l(g),o=M(g),g.forEach(v),this.h()},h(){He(t.src,s=ct(n[73].fileUrl))||f(t,"src",s),f(t,"alt",r=n[73].fileName),f(t,"class",i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(_,g){j(_,e,g),c(e,t),c(e,a),h&&h.m(e,null),c(e,o),u||(d=W(t,"click",p),u=!0)},p(_,g){n=_,g[0]&1&&!He(t.src,s=ct(n[73].fileUrl))&&f(t,"src",s),g[0]&1&&r!==(r=n[73].fileName)&&f(t,"alt",r),g[0]&1&&i!==(i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=Ll(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(_){_&&v(e),h&&h.d(),u=!1,d()}}}function Bl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=w("div"),t=w("span"),s=Z("+"),i=Z(r),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"SPAN",{class:!0});var o=R(t);s=X(o,"+"),i=X(o,r),o.forEach(v),a.forEach(v),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){j(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&re(i,r)},d(l){l&&v(e)}}}function Ll(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=w("div"),t=w("span"),s=Z("+"),i=Z(r),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"SPAN",{class:!0});var o=R(t);s=X(o,"+"),i=X(o,r),o.forEach(v),a.forEach(v),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){j(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&re(i,r)},d(l){l&&v(e)}}}function Ul(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!di(a[73].fileName)),e?Sh:(t==null&&(t=!!kc(a[73].fileName)),t?Ah:Th)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Me()},l(a){l.l(a),s=Me()},m(a,o){l.m(a,o),j(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&v(s),l.d(a)}}}function xl(n){let e,t,s=Vs(n[68].text)+"";return{c(){e=w("div"),t=new Po(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=R(e);t=Ro(i,!1),i.forEach(v),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){j(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Vs(r[68].text)+"")&&t.p(s)},d(r){r&&v(e)}}}function ql(n,e){let t,s,r,i,l,a,o,u,d,p,h,_,g=Wl(e[68].timestamp)+"",y,T,D,m,C,b,A,I=e[1]===e[68].id&&Ol();function E(Y,K){return Y[69]?.profilePicture?dh:fh}let N=E(e),S=N(e);function F(Y,K){return Y[69]?ph:hh}let P=F(e),O=P(e),B=e[68].isPinned&&Ml(),x=e[68].isEdited&&zl(),L=e[70]&&Fl(e);function H(Y,K){return Y[9]===Y[68].id?mh:gh}let V=H(e),U=V(e);function G(...Y){return e[55](e[68],...Y)}return{key:n,first:null,c(){t=Me(),I&&I.c(),s=z(),r=w("div"),i=w("div"),S.c(),l=z(),a=w("div"),o=w("div"),u=w("div"),O.c(),d=z(),B&&B.c(),p=z(),x&&x.c(),h=z(),_=w("span"),y=Z(g),T=z(),L&&L.c(),D=z(),U.c(),this.h()},l(Y){t=Me(),I&&I.l(Y),s=M(Y),r=k(Y,"DIV",{id:!0,class:!0});var K=R(r);i=k(K,"DIV",{class:!0});var $=R(i);S.l($),$.forEach(v),l=M(K),a=k(K,"DIV",{class:!0});var ee=R(a);o=k(ee,"DIV",{class:!0});var ae=R(o);u=k(ae,"DIV",{class:!0});var ie=R(u);O.l(ie),d=M(ie),B&&B.l(ie),p=M(ie),x&&x.l(ie),ie.forEach(v),h=M(ae),_=k(ae,"SPAN",{class:!0});var de=R(_);y=X(de,g),de.forEach(v),ae.forEach(v),T=M(ee),L&&L.l(ee),D=M(ee),U.l(ee),ee.forEach(v),K.forEach(v),this.h()},h(){f(i,"class","message-avatar svelte-zjz65z"),f(u,"class","header-left svelte-zjz65z"),f(_,"class","timestamp svelte-zjz65z"),f(o,"class","message-header svelte-zjz65z"),f(a,"class","message-body svelte-zjz65z"),f(r,"id",m="message-"+e[68].id),f(r,"class",C="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z"),this.first=t},m(Y,K){j(Y,t,K),I&&I.m(Y,K),j(Y,s,K),j(Y,r,K),c(r,i),S.m(i,null),c(r,l),c(r,a),c(a,o),c(o,u),O.m(u,null),c(u,d),B&&B.m(u,null),c(u,p),x&&x.m(u,null),c(o,h),c(o,_),c(_,y),c(a,T),L&&L.m(a,null),c(a,D),U.m(a,null),b||(A=W(r,"contextmenu",G),b=!0)},p(Y,K){e=Y,e[1]===e[68].id?I||(I=Ol(),I.c(),I.m(s.parentNode,s)):I&&(I.d(1),I=null),N===(N=E(e))&&S?S.p(e,K):(S.d(1),S=N(e),S&&(S.c(),S.m(i,null))),P===(P=F(e))&&O?O.p(e,K):(O.d(1),O=P(e),O&&(O.c(),O.m(u,d))),e[68].isPinned?B||(B=Ml(),B.c(),B.m(u,p)):B&&(B.d(1),B=null),e[68].isEdited?x||(x=zl(),x.c(),x.m(u,null)):x&&(x.d(1),x=null),K[0]&1&&g!==(g=Wl(e[68].timestamp)+"")&&re(y,g),e[70]?L?L.p(e,K):(L=Fl(e),L.c(),L.m(a,D)):L&&(L.d(1),L=null),V===(V=H(e))&&U?U.p(e,K):(U.d(1),U=V(e),U&&(U.c(),U.m(a,null))),K[0]&1&&m!==(m="message-"+e[68].id)&&f(r,"id",m),K[0]&16385&&C!==(C="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z")&&f(r,"class",C)},d(Y){Y&&(v(t),v(s),v(r)),I&&I.d(Y),S.d(),O.d(),B&&B.d(),x&&x.d(),L&&L.d(),U.d(),b=!1,A()}}}function jl(n){let e,t,s;function r(l){n[58](l)}let i={message:n[8],x:n[6],y:n[7],onEdit:n[23],onDelete:n[26],onPin:n[28],onReply:n[29],onDownload:n[30],onForward:n[31]};return n[5]!==void 0&&(i.visible=n[5]),e=new nh({props:i}),it.push(()=>Ut(e,"visible",r)),{c(){et(e.$$.fragment)},l(l){$e(e.$$.fragment,l)},m(l,a){Qe(e,l,a),s=!0},p(l,a){const o={};a[0]&256&&(o.message=l[8]),a[0]&64&&(o.x=l[6]),a[0]&128&&(o.y=l[7]),!t&&a[0]&32&&(t=!0,o.visible=l[5],Lt(()=>t=!1)),e.$set(o)},i(l){s||(be(e.$$.fragment,l),s=!0)},o(l){Ce(e.$$.fragment,l),s=!1},d(l){Je(e,l)}}}function Vl(n){let e,t,s,r,i,l,a="âœ•",o,u,d,p,h,_=n[17].length>1&&Hl(n);return{c(){e=w("div"),t=w("img"),r=z(),_&&_.c(),i=z(),l=w("button"),l.textContent=a,o=z(),u=w("a"),d=Z("Open in new tab"),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"IMG",{src:!0,alt:!0,class:!0}),r=M(y),_&&_.l(y),i=M(y),l=k(y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-cyanf1"&&(l.textContent=a),o=M(y),u=k(y,"A",{href:!0,target:!0,rel:!0,class:!0});var T=R(u);d=X(T,"Open in new tab"),T.forEach(v),y.forEach(v),this.h()},h(){He(t.src,s=n[15])||f(t,"src",s),f(t,"alt","Enlarged"),f(t,"class","enlarged-image svelte-zjz65z"),f(l,"class","close-modal svelte-zjz65z"),f(u,"href",n[15]),f(u,"target","_blank"),f(u,"rel","noopener noreferrer"),f(u,"class","open-new-tab svelte-zjz65z"),f(e,"class","image-modal svelte-zjz65z")},m(g,y){j(g,e,y),c(e,t),c(e,r),_&&_.m(e,null),c(e,i),c(e,l),c(e,o),c(e,u),c(u,d),p||(h=[W(t,"click",lt(n[43])),W(l,"click",n[36]),W(e,"click",n[36])],p=!0)},p(g,y){y[0]&32768&&!He(t.src,s=g[15])&&f(t,"src",s),g[17].length>1?_?_.p(g,y):(_=Hl(g),_.c(),_.m(e,i)):_&&(_.d(1),_=null),y[0]&32768&&f(u,"href",g[15])},d(g){g&&v(e),_&&_.d(),p=!1,Ie(h)}}}function Hl(n){let e,t="â€¹",s,r,i="â€º",l,a,o=n[18]+1+"",u,d,p=n[17].length+"",h,_,g;return{c(){e=w("button"),e.textContent=t,s=z(),r=w("button"),r.textContent=i,l=z(),a=w("div"),u=Z(o),d=Z(" / "),h=Z(p),this.h()},l(y){e=k(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-c4iawu"&&(e.textContent=t),s=M(y),r=k(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(r)!=="svelte-1gn22tr"&&(r.textContent=i),l=M(y),a=k(y,"DIV",{class:!0});var T=R(a);u=X(T,o),d=X(T," / "),h=X(T,p),T.forEach(v),this.h()},h(){f(e,"class","nav-arrow nav-prev svelte-zjz65z"),f(e,"title","Previous (â†)"),f(r,"class","nav-arrow nav-next svelte-zjz65z"),f(r,"title","Next (â†’)"),f(a,"class","image-counter svelte-zjz65z")},m(y,T){j(y,e,T),j(y,s,T),j(y,r,T),j(y,l,T),j(y,a,T),c(a,u),c(a,d),c(a,h),_||(g=[W(e,"click",lt(n[62])),W(r,"click",lt(n[63]))],_=!0)},p(y,T){T[0]&262144&&o!==(o=y[18]+1+"")&&re(u,o),T[0]&131072&&p!==(p=y[17].length+"")&&re(h,p)},d(y){y&&(v(e),v(s),v(r),v(l),v(a)),_=!1,Ie(g)}}}function Gl(n){let e,t,s,r,i,l,a,o="âœ•",u,d,p,h,_;return{c(){e=w("div"),t=w("video"),s=w("source"),i=Z(`\r
			Your browser does not support the video tag.`),l=z(),a=w("button"),a.textContent=o,u=z(),d=w("a"),p=Z("Open in new tab"),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"VIDEO",{class:!0});var T=R(t);s=k(T,"SOURCE",{src:!0}),i=X(T,`\r
			Your browser does not support the video tag.`),T.forEach(v),l=M(y),a=k(y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-yc21b"&&(a.textContent=o),u=M(y),d=k(y,"A",{href:!0,target:!0,rel:!0,class:!0});var D=R(d);p=X(D,"Open in new tab"),D.forEach(v),y.forEach(v),this.h()},h(){He(s.src,r=n[16])||f(s,"src",r),t.controls=!0,t.autoplay=!0,f(t,"class","enlarged-video svelte-zjz65z"),f(a,"class","close-modal svelte-zjz65z"),f(d,"href",n[16]),f(d,"target","_blank"),f(d,"rel","noopener noreferrer"),f(d,"class","open-new-tab svelte-zjz65z"),f(e,"class","video-modal svelte-zjz65z")},m(g,y){j(g,e,y),c(e,t),c(t,s),c(t,i),c(e,l),c(e,a),c(e,u),c(e,d),c(d,p),h||(_=[W(t,"click",lt(n[42])),W(a,"click",n[40]),W(e,"click",n[40])],h=!0)},p(g,y){y[0]&65536&&!He(s.src,r=g[16])&&f(s,"src",r),y[0]&65536&&f(d,"href",g[16])},d(g){g&&v(e),h=!1,Ie(_)}}}function Ih(n){let e=[],t=new Map,s,r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b=Xe(n[0]);const A=L=>L[68].id;for(let L=0;L<b.length;L+=1){let H=Rl(n,b,L),V=A(H);t.set(V,e[L]=ql(V,H))}function I(L){n[56](L)}function E(L){n[57](L)}let N={isOwnProfile:n[4]};n[2]!==void 0&&(N.isOpen=n[2]),n[3]!==void 0&&(N.user=n[3]),r=new fi({props:N}),it.push(()=>Ut(r,"isOpen",I)),it.push(()=>Ut(r,"user",E));let S=n[8]&&jl(n);function F(L){n[59](L)}function P(L){n[60](L)}let O={};n[12]!==void 0&&(O.visible=n[12]),n[13]!==void 0&&(O.message=n[13]),u=new ah({props:O}),it.push(()=>Ut(u,"visible",F)),it.push(()=>Ut(u,"message",P)),_=new Mn({props:{isOpen:n[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:n[27],onCancel:n[61]}});let B=n[15]&&Vl(n),x=n[16]&&Gl(n);return{c(){for(let L=0;L<e.length;L+=1)e[L].c();s=z(),et(r.$$.fragment),a=z(),S&&S.c(),o=z(),et(u.$$.fragment),h=z(),et(_.$$.fragment),g=z(),B&&B.c(),y=z(),x&&x.c(),T=Me()},l(L){for(let H=0;H<e.length;H+=1)e[H].l(L);s=M(L),$e(r.$$.fragment,L),a=M(L),S&&S.l(L),o=M(L),$e(u.$$.fragment,L),h=M(L),$e(_.$$.fragment,L),g=M(L),B&&B.l(L),y=M(L),x&&x.l(L),T=Me()},m(L,H){for(let V=0;V<e.length;V+=1)e[V]&&e[V].m(L,H);j(L,s,H),Qe(r,L,H),j(L,a,H),S&&S.m(L,H),j(L,o,H),Qe(u,L,H),j(L,h,H),Qe(_,L,H),j(L,g,H),B&&B.m(L,H),j(L,y,H),x&&x.m(L,H),j(L,T,H),D=!0,m||(C=W(uh,"keydown",n[38]),m=!0)},p(L,H){H[0]&58213891|H[1]&286&&(b=Xe(L[0]),e=nn(e,H,A,1,L,b,t,s.parentNode,tn,ql,s,Rl));const V={};H[0]&16&&(V.isOwnProfile=L[4]),!i&&H[0]&4&&(i=!0,V.isOpen=L[2],Lt(()=>i=!1)),!l&&H[0]&8&&(l=!0,V.user=L[3],Lt(()=>l=!1)),r.$set(V),L[8]?S?(S.p(L,H),H[0]&256&&be(S,1)):(S=jl(L),S.c(),be(S,1),S.m(o.parentNode,o)):S&&(En(),Ce(S,1,1,()=>{S=null}),Cn());const U={};!d&&H[0]&4096&&(d=!0,U.visible=L[12],Lt(()=>d=!1)),!p&&H[0]&8192&&(p=!0,U.message=L[13],Lt(()=>p=!1)),u.$set(U);const G={};H[0]&2048&&(G.isOpen=L[11]),H[0]&2048&&(G.onCancel=L[61]),_.$set(G),L[15]?B?B.p(L,H):(B=Vl(L),B.c(),B.m(y.parentNode,y)):B&&(B.d(1),B=null),L[16]?x?x.p(L,H):(x=Gl(L),x.c(),x.m(T.parentNode,T)):x&&(x.d(1),x=null)},i(L){D||(be(r.$$.fragment,L),be(S),be(u.$$.fragment,L),be(_.$$.fragment,L),D=!0)},o(L){Ce(r.$$.fragment,L),Ce(S),Ce(u.$$.fragment,L),Ce(_.$$.fragment,L),D=!1},d(L){L&&(v(s),v(a),v(o),v(h),v(g),v(y),v(T));for(let H=0;H<e.length;H+=1)e[H].d(L);Je(r,L),S&&S.d(L),Je(u,L),Je(_,L),B&&B.d(L),x&&x.d(L),m=!1,C()}}}function Wl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function Tn(n){return n?n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB":""}function ct(n){return n?n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:")?n:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${n}`:""}function An(n){if(!n)return"ðŸ“Ž";const e=n.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function di(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function kc(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function Dh(n,e,t){let s,r,i;Pe(n,Fn,ne=>t(65,s=ne)),Pe(n,dn,ne=>t(66,r=ne)),Pe(n,Ht,ne=>t(67,i=ne));let{messages:l}=e,{onReply:a=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,d=null,p=!1,h=!1,_=0,g=0,y=null,T=null,D="",m=!1,C=null;function b(ne){return i.find(we=>we.username===ne)}function A(ne){return b(ne)?.color||"var(--status-offline)"}function I(ne){t(3,d=ne),t(4,p=ne.id===r?.id),t(2,u=!0)}function E(ne,we){ne.preventDefault(),t(8,y=we),t(6,_=ne.clientX),t(7,g=ne.clientY),t(5,h=!0)}function N(){y&&(t(9,T=y.id),t(10,D=y.text),t(5,h=!1))}function S(ne){D.trim()&&pc(s,ne,D.trim()),t(9,T=null),t(10,D="")}function F(){t(9,T=null),t(10,D="")}function P(){y&&(C=y,t(11,m=!0),t(5,h=!1))}function O(){C&&nd(s,C.id),t(11,m=!1)}function B(){y&&(ui(s,y.id),t(5,h=!1))}function x(){y&&(a(y),t(5,h=!1))}async function L(){if(!(!y?.fileUrl||!y?.fileName)){try{const ne=ct(y.fileUrl),tt=await(await fetch(ne)).blob(),At=window.URL.createObjectURL(tt),st=document.createElement("a");st.href=At,st.download=y.fileName,document.body.appendChild(st),st.click(),document.body.removeChild(st),window.URL.revokeObjectURL(At)}catch(ne){console.error("Download failed:",ne)}t(5,h=!1)}}let H=!1,V=null;function U(){y&&(t(13,V=y),t(12,H=!0),t(5,h=!1))}function G(ne,we){ne.preventDefault(),t(8,y=we),t(6,_=ne.clientX),t(7,g=ne.clientY),t(5,h=!0)}function Y(ne){if(ne)return l.find(we=>we.id===ne)}let K=null;function $(ne){const we=document.getElementById(`message-${ne}`);we&&(we.scrollIntoView({behavior:"smooth",block:"center"}),t(14,K=ne),setTimeout(()=>{t(14,K=null)},2e3))}let ee=null,ae=null,ie=[],de=0;function le(ne,we=[]){t(15,ee=ne),t(17,ie=we.length>0?we:[ne]),t(18,de=ie.indexOf(ne))}function te(){t(15,ee=null),t(17,ie=[]),t(18,de=0)}function ue(ne){ie.length!==0&&(ne==="prev"?t(18,de=(de-1+ie.length)%ie.length):t(18,de=(de+1)%ie.length),t(15,ee=ie[de]))}function _e(ne){ee&&(ne.key==="ArrowLeft"?(ne.preventDefault(),ue("prev")):ne.key==="ArrowRight"?(ne.preventDefault(),ue("next")):ne.key==="Escape"&&(ne.preventDefault(),te()))}function Ee(ne){t(16,ae=ne)}function Le(){t(16,ae=null)}function ve(ne){Wt.call(this,n,ne)}function De(ne){Wt.call(this,n,ne)}const Fe=ne=>I(ne),Ue=ne=>$(ne.id);function se(){D=this.value,t(10,D)}const Q=(ne,we)=>{we.key==="Enter"&&!we.shiftKey?(we.preventDefault(),S(ne.id)):we.key==="Escape"&&(we.preventDefault(),F())},oe=ne=>S(ne.id),ge=(ne,we,tt)=>{if(tt.button===0){const At=ne.files.filter(st=>di(st.fileName)).map(st=>ct(st.fileUrl));le(ct(we.fileUrl),At)}},Se=(ne,we)=>we.button===0&&Ee(ct(ne.fileUrl)),ze=(ne,we)=>we.button===0&&ne.fileUrl&&le(ct(ne.fileUrl)),Ne=(ne,we)=>G(we,ne),je=(ne,we)=>{we.button===0&&ne.fileUrl&&Ee(ct(ne.fileUrl))},Re=(ne,we)=>G(we,ne),Ye=(ne,we)=>E(we,ne);function Ze(ne){u=ne,t(2,u)}function gt(ne){d=ne,t(3,d)}function yt(ne){h=ne,t(5,h)}function fe(ne){H=ne,t(12,H)}function ke(ne){V=ne,t(13,V)}const Ve=()=>t(11,m=!1),_t=()=>ue("prev"),Pt=()=>ue("next");return n.$$set=ne=>{"messages"in ne&&t(0,l=ne.messages),"onReply"in ne&&t(41,a=ne.onReply),"firstUnreadMessageId"in ne&&t(1,o=ne.firstUnreadMessageId)},[l,o,u,d,p,h,_,g,y,T,D,m,H,V,K,ee,ae,ie,de,b,A,I,E,N,S,F,P,O,B,x,L,U,G,Y,$,le,te,ue,_e,Ee,Le,a,ve,De,Fe,Ue,se,Q,oe,ge,Se,ze,Ne,je,Re,Ye,Ze,gt,yt,fe,ke,Ve,_t,Pt]}class wc extends ht{constructor(e){super(),pt(this,e,Dh,Ih,dt,{messages:0,onReply:41,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Yl(n,e,t){const s=n.slice();return s[6]=e[t],s}function Kl(n){let e,t,s,r="ðŸ“Œ",i,l,a="Pinned Messages",o,u,d,p=n[0].length+"",h,_,g,y,T=[],D=new Map,m=Xe(n[0]);const C=b=>b[6].id;for(let b=0;b<m.length;b+=1){let A=Yl(n,m,b),I=C(A);D.set(I,T[b]=Xl(I,A))}return{c(){e=w("div"),t=w("div"),s=w("span"),s.textContent=r,i=z(),l=w("span"),l.textContent=a,o=z(),u=w("span"),d=Z("("),h=Z(p),_=Z(")"),g=z(),y=w("div");for(let b=0;b<T.length;b+=1)T[b].c();this.h()},l(b){e=k(b,"DIV",{class:!0});var A=R(e);t=k(A,"DIV",{class:!0});var I=R(t);s=k(I,"SPAN",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-73xtmc"&&(s.textContent=r),i=M(I),l=k(I,"SPAN",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-123zvdk"&&(l.textContent=a),o=M(I),u=k(I,"SPAN",{class:!0});var E=R(u);d=X(E,"("),h=X(E,p),_=X(E,")"),E.forEach(v),I.forEach(v),g=M(A),y=k(A,"DIV",{class:!0});var N=R(y);for(let S=0;S<T.length;S+=1)T[S].l(N);N.forEach(v),A.forEach(v),this.h()},h(){f(s,"class","pinned-icon svelte-d1025n"),f(l,"class","pinned-title svelte-d1025n"),f(u,"class","pinned-count svelte-d1025n"),f(t,"class","pinned-header svelte-d1025n"),f(y,"class","pinned-messages svelte-d1025n"),f(e,"class","pinned-container svelte-d1025n")},m(b,A){j(b,e,A),c(e,t),c(t,s),c(t,i),c(t,l),c(t,o),c(t,u),c(u,d),c(u,h),c(u,_),c(e,g),c(e,y);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(y,null)},p(b,A){A&1&&p!==(p=b[0].length+"")&&re(h,p),A&7&&(m=Xe(b[0]),T=nn(T,A,C,1,b,m,D,y,tn,Xl,null,Yl))},d(b){b&&v(e);for(let A=0;A<T.length;A+=1)T[A].d()}}}function Xl(n,e){let t,s,r,i=e[6].user+"",l,a,o,u=e[6].text.substring(0,100)+"",d,p=e[6].text.length>100?"...":"",h,_,g,y=Zl(e[6].timestamp)+"",T,D,m,C="Ã—",b,A,I;function E(){return e[3](e[6])}return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("span"),l=Z(i),a=z(),o=w("span"),d=Z(u),h=Z(p),_=z(),g=w("span"),T=Z(y),D=z(),m=w("button"),m.textContent=C,b=z(),this.h()},l(N){t=k(N,"DIV",{class:!0});var S=R(t);s=k(S,"DIV",{class:!0});var F=R(s);r=k(F,"SPAN",{class:!0,style:!0});var P=R(r);l=X(P,i),P.forEach(v),a=M(F),o=k(F,"SPAN",{class:!0});var O=R(o);d=X(O,u),h=X(O,p),O.forEach(v),_=M(F),g=k(F,"SPAN",{class:!0});var B=R(g);T=X(B,y),B.forEach(v),F.forEach(v),D=M(S),m=k(S,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(m)!=="svelte-87szfn"&&(m.textContent=C),b=M(S),S.forEach(v),this.h()},h(){f(r,"class","pinned-user svelte-d1025n"),Te(r,"color",e[1](e[6].user)),f(o,"class","pinned-text svelte-d1025n"),f(g,"class","pinned-time svelte-d1025n"),f(s,"class","pinned-message-content svelte-d1025n"),f(m,"class","unpin-btn svelte-d1025n"),f(m,"title","Unpin message"),f(t,"class","pinned-message svelte-d1025n"),this.first=t},m(N,S){j(N,t,S),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,h),c(s,_),c(s,g),c(g,T),c(t,D),c(t,m),c(t,b),A||(I=W(m,"click",E),A=!0)},p(N,S){e=N,S&1&&i!==(i=e[6].user+"")&&re(l,i),S&1&&Te(r,"color",e[1](e[6].user)),S&1&&u!==(u=e[6].text.substring(0,100)+"")&&re(d,u),S&1&&p!==(p=e[6].text.length>100?"...":"")&&re(h,p),S&1&&y!==(y=Zl(e[6].timestamp)+"")&&re(T,y)},d(N){N&&v(t),A=!1,I()}}}function Nh(n){let e,t=n[0].length>0&&Kl(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0].length>0?t?t.p(s,r):(t=Kl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function Zl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function Rh(n,e,t){let s;Pe(n,Ht,u=>t(4,s=u));let{pinnedMessages:r}=e;function i(u){return s.find(d=>d.username===u)}function l(u){return i(u)?.color||"var(--status-offline)"}function a(u){ui(u)}const o=u=>a(u.id);return n.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,l,a,o]}class Ph extends ht{constructor(e){super(),pt(this,e,Rh,Nh,dt,{pinnedMessages:0})}}function Jl(n,e,t){const s=n.slice();return s[50]=e[t].file,s[51]=e[t].preview,s[53]=t,s}function Ql(n){let e,t='<div class="drag-overlay-content svelte-1mvqxem"><div class="drag-icon svelte-1mvqxem">ðŸ“</div> <div class="drag-text svelte-1mvqxem">Drop files here to upload</div></div>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){f(e,"class","drag-overlay svelte-1mvqxem")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function $l(n){let e,t,s,r,i=n[16].join(", ")+"",l,a,o=n[16].length===1?"is":"are",u,d;return{c(){e=w("div"),t=w("span"),s=z(),r=w("span"),l=Z(i),a=z(),u=Z(o),d=Z(" typing..."),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"SPAN",{class:!0}),R(t).forEach(v),s=M(h),r=k(h,"SPAN",{});var _=R(r);l=X(_,i),a=M(_),u=X(_,o),d=X(_," typing..."),_.forEach(v),h.forEach(v),this.h()},h(){f(t,"class","typing-dots svelte-1mvqxem"),f(e,"class","typing-indicator svelte-1mvqxem")},m(p,h){j(p,e,h),c(e,t),c(e,s),c(e,r),c(r,l),c(r,a),c(r,u),c(r,d)},p(p,h){h[0]&65536&&i!==(i=p[16].join(", ")+"")&&re(l,i),h[0]&65536&&o!==(o=p[16].length===1?"is":"are")&&re(u,o)},d(p){p&&v(e)}}}function ea(n){let e,t;return e=new Hd({}),e.$on("select",n[21]),e.$on("close",n[36]),{c(){et(e.$$.fragment)},l(s){$e(e.$$.fragment,s)},m(s,r){Qe(e,s,r),t=!0},p:Oe,i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ce(e.$$.fragment,s),t=!1},d(s){Je(e,s)}}}function Oh(n){let e,t,s,r,i=n[4].user+"",l,a,o,u,d=n[4].text.substring(0,50)+"",p,h=n[4].text.length>50?"...":"",_,g,y,T="âœ•",D,m;return{c(){e=w("div"),t=w("div"),s=w("span"),r=Z("Replying to "),l=Z(i),a=Z(":"),o=z(),u=w("span"),p=Z(d),_=Z(h),g=z(),y=w("button"),y.textContent=T,this.h()},l(C){e=k(C,"DIV",{class:!0});var b=R(e);t=k(b,"DIV",{class:!0});var A=R(t);s=k(A,"SPAN",{class:!0});var I=R(s);r=X(I,"Replying to "),l=X(I,i),a=X(I,":"),I.forEach(v),o=M(A),u=k(A,"SPAN",{class:!0});var E=R(u);p=X(E,d),_=X(E,h),E.forEach(v),A.forEach(v),g=M(b),y=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),J(y)!=="svelte-1av190j"&&(y.textContent=T),b.forEach(v),this.h()},h(){f(s,"class","reply-label svelte-1mvqxem"),f(u,"class","reply-preview svelte-1mvqxem"),f(t,"class","reply-info svelte-1mvqxem"),f(y,"class","cancel-reply svelte-1mvqxem"),f(e,"class","reply-bar svelte-1mvqxem")},m(C,b){j(C,e,b),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(u,p),c(u,_),c(e,g),c(e,y),D||(m=W(y,"click",n[23]),D=!0)},p(C,b){b[0]&16&&i!==(i=C[4].user+"")&&re(l,i),b[0]&16&&d!==(d=C[4].text.substring(0,50)+"")&&re(p,d),b[0]&16&&h!==(h=C[4].text.length>50?"...":"")&&re(_,h)},d(C){C&&v(e),D=!1,m()}}}function Mh(n){let e,t,s='<span class="edit-label svelte-1mvqxem">Editing message</span> <span class="edit-hint svelte-1mvqxem">Press Escape to cancel</span>',r,i,l="âœ•",a,o;return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(u){e=k(u,"DIV",{class:!0});var d=R(e);t=k(d,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1kwfa7y"&&(t.innerHTML=s),r=M(d),i=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1anw7a5"&&(i.textContent=l),d.forEach(v),this.h()},h(){f(t,"class","edit-info svelte-1mvqxem"),f(i,"class","cancel-edit svelte-1mvqxem"),f(e,"class","edit-bar svelte-1mvqxem")},m(u,d){j(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=W(i,"click",n[20]),a=!0)},p:Oe,d(u){u&&v(e),a=!1,o()}}}function ta(n){let e,t,s,r=n[9].length+"",i,l,a=n[9].length>1?"s":"",o,u,d,p,h="âœ•",_,g,y,T,D,m,C,b,A="Mark as spoiler",I,E,N="âš ï¸",S,F,P,O=n[9].length+"",B,x,L=n[9].length>1?"s":"",H,V,U,G=Xe(n[9]),Y=[];for(let K=0;K<G.length;K+=1)Y[K]=na(Jl(n,G,K));return{c(){e=w("div"),t=w("div"),s=w("span"),i=Z(r),l=Z(" file"),o=Z(a),u=Z(" selected"),d=z(),p=w("button"),p.textContent=h,_=z(),g=w("div");for(let K=0;K<Y.length;K+=1)Y[K].c();y=z(),T=w("div"),D=w("label"),m=w("input"),C=z(),b=w("span"),b.textContent=A,I=z(),E=w("span"),E.textContent=N,S=z(),F=w("button"),P=Z("Upload "),B=Z(O),x=Z(" file"),H=Z(L),this.h()},l(K){e=k(K,"DIV",{class:!0});var $=R(e);t=k($,"DIV",{class:!0});var ee=R(t);s=k(ee,"SPAN",{});var ae=R(s);i=X(ae,r),l=X(ae," file"),o=X(ae,a),u=X(ae," selected"),ae.forEach(v),d=M(ee),p=k(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-pcsk7y"&&(p.textContent=h),ee.forEach(v),_=M($),g=k($,"DIV",{class:!0});var ie=R(g);for(let ue=0;ue<Y.length;ue+=1)Y[ue].l(ie);ie.forEach(v),y=M($),T=k($,"DIV",{class:!0});var de=R(T);D=k(de,"LABEL",{class:!0});var le=R(D);m=k(le,"INPUT",{type:!0,class:!0}),C=M(le),b=k(le,"SPAN",{"data-svelte-h":!0}),J(b)!=="svelte-6s6emx"&&(b.textContent=A),le.forEach(v),I=M(de),E=k(de,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(E)!=="svelte-6jzi8y"&&(E.textContent=N),de.forEach(v),S=M($),F=k($,"BUTTON",{class:!0});var te=R(F);P=X(te,"Upload "),B=X(te,O),x=X(te," file"),H=X(te,L),te.forEach(v),$.forEach(v),this.h()},h(){f(p,"class","cancel-gallery svelte-1mvqxem"),f(t,"class","gallery-header svelte-1mvqxem"),f(g,"class","gallery-grid svelte-1mvqxem"),f(m,"type","checkbox"),f(m,"class","spoiler-checkbox svelte-1mvqxem"),f(D,"class","spoiler-checkbox-label svelte-1mvqxem"),f(E,"class","spoiler-hint svelte-1mvqxem"),f(E,"title","Sensitive content will be hidden until clicked"),f(T,"class","spoiler-checkbox-container svelte-1mvqxem"),f(F,"class","upload-files-btn svelte-1mvqxem"),f(e,"class","file-gallery svelte-1mvqxem")},m(K,$){j(K,e,$),c(e,t),c(t,s),c(s,i),c(s,l),c(s,o),c(s,u),c(t,d),c(t,p),c(e,_),c(e,g);for(let ee=0;ee<Y.length;ee+=1)Y[ee]&&Y[ee].m(g,null);c(e,y),c(e,T),c(T,D),c(D,m),m.checked=n[10],c(D,C),c(D,b),c(T,I),c(T,E),c(e,S),c(e,F),c(F,P),c(F,B),c(F,x),c(F,H),V||(U=[W(p,"click",n[26]),W(m,"change",n[38]),W(F,"click",n[30])],V=!0)},p(K,$){if($[0]&512&&r!==(r=K[9].length+"")&&re(i,r),$[0]&512&&a!==(a=K[9].length>1?"s":"")&&re(o,a),$[0]&33554944){G=Xe(K[9]);let ee;for(ee=0;ee<G.length;ee+=1){const ae=Jl(K,G,ee);Y[ee]?Y[ee].p(ae,$):(Y[ee]=na(ae),Y[ee].c(),Y[ee].m(g,null))}for(;ee<Y.length;ee+=1)Y[ee].d(1);Y.length=G.length}$[0]&1024&&(m.checked=K[10]),$[0]&512&&O!==(O=K[9].length+"")&&re(B,O),$[0]&512&&L!==(L=K[9].length>1?"s":"")&&re(H,L)},d(K){K&&v(e),Ys(Y,K),V=!1,Ie(U)}}}function zh(n){let e,t,s;function r(a,o){return o[0]&512&&(t=null),o[0]&512&&(s=null),t==null&&(t=!!a[50].type.startsWith("video/")),t?Uh:(s==null&&(s=!!a[50].type.startsWith("audio/")),s?Lh:Bh)}let i=r(n,[-1,-1]),l=i(n);return{c(){e=w("div"),l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var o=R(e);l.l(o),o.forEach(v),this.h()},h(){f(e,"class","gallery-file-icon svelte-1mvqxem")},m(a,o){j(a,e,o),l.m(e,null)},p(a,o){i!==(i=r(a,o))&&(l.d(1),l=i(a),l&&(l.c(),l.m(e,null)))},d(a){a&&v(e),l.d()}}}function Fh(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[51])||f(e,"src",t),f(e,"alt",s=n[50].name),f(e,"class","gallery-preview svelte-1mvqxem")},m(r,i){j(r,e,i)},p(r,i){i[0]&512&&!He(e.src,t=r[51])&&f(e,"src",t),i[0]&512&&s!==(s=r[50].name)&&f(e,"alt",s)},d(r){r&&v(e)}}}function Bh(n){let e;return{c(){e=Z("ðŸ“„")},l(t){e=X(t,"ðŸ“„")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function Lh(n){let e;return{c(){e=Z("ðŸŽµ")},l(t){e=X(t,"ðŸŽµ")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function Uh(n){let e;return{c(){e=Z("ðŸŽ¬")},l(t){e=X(t,"ðŸŽ¬")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function na(n){let e,t,s,r,i=n[50].name+"",l,a,o,u=(n[50].size/1024/1024).toFixed(2)+"",d,p,h,_,g="âœ•",y,T,D;function m(I,E){return I[51]?Fh:zh}let C=m(n),b=C(n);function A(){return n[37](n[53])}return{c(){e=w("div"),b.c(),t=z(),s=w("div"),r=w("div"),l=Z(i),a=z(),o=w("div"),d=Z(u),p=Z(" MB"),h=z(),_=w("button"),_.textContent=g,y=z(),this.h()},l(I){e=k(I,"DIV",{class:!0});var E=R(e);b.l(E),t=M(E),s=k(E,"DIV",{class:!0});var N=R(s);r=k(N,"DIV",{class:!0});var S=R(r);l=X(S,i),S.forEach(v),a=M(N),o=k(N,"DIV",{class:!0});var F=R(o);d=X(F,u),p=X(F," MB"),F.forEach(v),N.forEach(v),h=M(E),_=k(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(_)!=="svelte-17gof1i"&&(_.textContent=g),y=M(E),E.forEach(v),this.h()},h(){f(r,"class","gallery-file-name svelte-1mvqxem"),f(o,"class","gallery-file-size svelte-1mvqxem"),f(s,"class","gallery-file-info svelte-1mvqxem"),f(_,"class","remove-file svelte-1mvqxem"),f(e,"class","gallery-item svelte-1mvqxem")},m(I,E){j(I,e,E),b.m(e,null),c(e,t),c(e,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,p),c(e,h),c(e,_),c(e,y),T||(D=W(_,"click",A),T=!0)},p(I,E){n=I,C===(C=m(n))&&b?b.p(n,E):(b.d(1),b=C(n),b&&(b.c(),b.m(e,t))),E[0]&512&&i!==(i=n[50].name+"")&&re(l,i),E[0]&512&&u!==(u=(n[50].size/1024/1024).toFixed(2)+"")&&re(d,u)},d(I){I&&v(e),b.d(),T=!1,D()}}}function sa(n){let e,t,s,r="Uploading files...",i,l,a,o,u,d,p;return{c(){e=w("div"),t=w("div"),s=w("span"),s.textContent=r,i=z(),l=w("span"),a=Z(n[7]),o=Z("%"),u=z(),d=w("div"),p=w("div"),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=R(e);t=k(_,"DIV",{class:!0});var g=R(t);s=k(g,"SPAN",{"data-svelte-h":!0}),J(s)!=="svelte-10wvq4k"&&(s.textContent=r),i=M(g),l=k(g,"SPAN",{});var y=R(l);a=X(y,n[7]),o=X(y,"%"),y.forEach(v),g.forEach(v),u=M(_),d=k(_,"DIV",{class:!0});var T=R(d);p=k(T,"DIV",{class:!0,style:!0}),R(p).forEach(v),T.forEach(v),_.forEach(v),this.h()},h(){f(t,"class","upload-progress-info svelte-1mvqxem"),f(p,"class","progress-fill svelte-1mvqxem"),Te(p,"width",n[7]+"%"),f(d,"class","progress-bar svelte-1mvqxem"),f(e,"class","upload-progress-bar svelte-1mvqxem")},m(h,_){j(h,e,_),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),c(l,o),c(e,u),c(e,d),c(d,p)},p(h,_){_[0]&128&&re(a,h[7]),_[0]&128&&Te(p,"width",h[7]+"%")},d(h){h&&v(e)}}}function xh(n){let e,t,s,r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b,A,I,E="ðŸ“Ž",N,S,F,P,O="GIF",B,x,L,H,V,U,G,Y=n[11]&&Ql();o=new Ph({props:{pinnedMessages:n[14]}}),d=new wc({props:{messages:n[0],onReply:n[22],firstUnreadMessageId:n[15]}});let K=n[16].length>0&&$l(n),$=n[3]&&ea(n);function ee(te,ue){if(te[6])return Mh;if(te[4])return Oh}let ae=ee(n),ie=ae&&ae(n),de=n[9].length>0&&!n[8]&&ta(n),le=n[8]&&sa(n);return{c(){e=w("div"),Y&&Y.c(),t=z(),s=w("div"),r=w("h2"),i=Z(n[13]),l=z(),a=w("div"),et(o.$$.fragment),u=z(),et(d.$$.fragment),p=z(),K&&K.c(),h=z(),$&&$.c(),_=z(),ie&&ie.c(),g=z(),y=w("div"),de&&de.c(),T=z(),le&&le.c(),D=z(),m=w("input"),C=z(),b=w("div"),A=w("div"),I=w("button"),I.textContent=E,N=z(),S=w("textarea"),F=z(),P=w("button"),P.textContent=O,B=z(),x=w("button"),L=Z("Send"),this.h()},l(te){e=k(te,"DIV",{class:!0});var ue=R(e);Y&&Y.l(ue),t=M(ue),s=k(ue,"DIV",{class:!0});var _e=R(s);r=k(_e,"H2",{class:!0});var Ee=R(r);i=X(Ee,n[13]),Ee.forEach(v),_e.forEach(v),l=M(ue),a=k(ue,"DIV",{class:!0});var Le=R(a);$e(o.$$.fragment,Le),u=M(Le),$e(d.$$.fragment,Le),p=M(Le),K&&K.l(Le),Le.forEach(v),h=M(ue),$&&$.l(ue),_=M(ue),ie&&ie.l(ue),g=M(ue),y=k(ue,"DIV",{class:!0});var ve=R(y);de&&de.l(ve),T=M(ve),le&&le.l(ve),D=M(ve),m=k(ve,"INPUT",{type:!0,style:!0}),C=M(ve),b=k(ve,"DIV",{class:!0});var De=R(b);A=k(De,"DIV",{class:!0});var Fe=R(A);I=k(Fe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(I)!=="svelte-1fiys3t"&&(I.textContent=E),Fe.forEach(v),N=M(De),S=k(De,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),R(S).forEach(v),F=M(De),P=k(De,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(P)!=="svelte-1ty10q8"&&(P.textContent=O),B=M(De),x=k(De,"BUTTON",{class:!0});var Ue=R(x);L=X(Ue,"Send"),Ue.forEach(v),De.forEach(v),ve.forEach(v),ue.forEach(v),this.h()},h(){f(r,"class","svelte-1mvqxem"),f(s,"class","chat-header svelte-1mvqxem"),f(a,"class","messages svelte-1mvqxem"),f(m,"type","file"),m.multiple=!0,Te(m,"display","none"),f(I,"class","input-icon-button svelte-1mvqxem"),f(I,"title","Attach file"),f(A,"class","input-buttons-left svelte-1mvqxem"),f(S,"placeholder","Type a message... (Shift+Enter for new line)"),f(S,"maxlength","2000"),f(S,"rows","1"),f(S,"class","svelte-1mvqxem"),f(P,"class","input-icon-button svelte-1mvqxem"),f(P,"title","Add GIF"),f(x,"class","send-button svelte-1mvqxem"),x.disabled=H=!n[1].trim(),f(b,"class","input-container svelte-1mvqxem"),f(y,"class","input-wrapper svelte-1mvqxem"),f(e,"class","chat-container svelte-1mvqxem")},m(te,ue){j(te,e,ue),Y&&Y.m(e,null),c(e,t),c(e,s),c(s,r),c(r,i),c(e,l),c(e,a),Qe(o,a,null),c(a,u),Qe(d,a,null),c(a,p),K&&K.m(a,null),n[35](a),c(e,h),$&&$.m(e,null),c(e,_),ie&&ie.m(e,null),c(e,g),c(e,y),de&&de.m(y,null),c(y,T),le&&le.m(y,null),c(y,D),c(y,m),n[39](m),c(y,C),c(y,b),c(b,A),c(A,I),c(b,N),c(b,S),n[41](S),nt(S,n[1]),c(b,F),c(b,P),c(b,B),c(b,x),c(x,L),V=!0,U||(G=[W(m,"change",n[24]),W(I,"click",n[40]),W(S,"input",n[42]),W(S,"input",n[17]),W(S,"keydown",n[18]),W(P,"click",n[43]),W(x,"click",n[19]),W(e,"dragenter",n[27]),W(e,"dragleave",n[28]),W(e,"dragover",qh),W(e,"drop",n[29])],U=!0)},p(te,ue){te[11]?Y||(Y=Ql(),Y.c(),Y.m(e,t)):Y&&(Y.d(1),Y=null),(!V||ue[0]&8192)&&re(i,te[13]);const _e={};ue[0]&16384&&(_e.pinnedMessages=te[14]),o.$set(_e);const Ee={};ue[0]&1&&(Ee.messages=te[0]),ue[0]&32768&&(Ee.firstUnreadMessageId=te[15]),d.$set(Ee),te[16].length>0?K?K.p(te,ue):(K=$l(te),K.c(),K.m(a,null)):K&&(K.d(1),K=null),te[3]?$?($.p(te,ue),ue[0]&8&&be($,1)):($=ea(te),$.c(),be($,1),$.m(e,_)):$&&(En(),Ce($,1,1,()=>{$=null}),Cn()),ae===(ae=ee(te))&&ie?ie.p(te,ue):(ie&&ie.d(1),ie=ae&&ae(te),ie&&(ie.c(),ie.m(e,g))),te[9].length>0&&!te[8]?de?de.p(te,ue):(de=ta(te),de.c(),de.m(y,T)):de&&(de.d(1),de=null),te[8]?le?le.p(te,ue):(le=sa(te),le.c(),le.m(y,D)):le&&(le.d(1),le=null),ue[0]&2&&nt(S,te[1]),(!V||ue[0]&2&&H!==(H=!te[1].trim()))&&(x.disabled=H)},i(te){V||(be(o.$$.fragment,te),be(d.$$.fragment,te),be($),V=!0)},o(te){Ce(o.$$.fragment,te),Ce(d.$$.fragment,te),Ce($),V=!1},d(te){te&&v(e),Y&&Y.d(),Je(o),Je(d),K&&K.d(),n[35](null),$&&$.d(),ie&&ie.d(),de&&de.d(),le&&le.d(),n[39](null),n[41](null),U=!1,Ie(G)}}}function qh(n){n.preventDefault(),n.stopPropagation()}function jh(n,e,t){let s,r,i,l,a,o,u,d,p,h;Pe(n,Fn,se=>t(32,a=se)),Pe(n,dn,se=>t(47,o=se)),Pe(n,Bt,se=>t(33,u=se)),Pe(n,Tt,se=>t(34,d=se)),Pe(n,ci,se=>t(15,p=se)),Pe(n,dc,se=>t(16,h=se));let _="",g,y,T=!1,D=null,m,C=null,b=0,A=!1,I=[],E=[],N=!1,S=!1,F=0,P;async function O(){await Oo(),g&&t(2,g.scrollTop=g.scrollHeight,g)}function B(){if(!P)return;t(12,P.style.height="auto",P);const se=Math.min(P.scrollHeight,120);t(12,P.style.height=`${se}px`,P)}function x(){B(),Gn(!0),y&&clearTimeout(y),y=setTimeout(()=>{Gn(!1)},1e3)}function L(se){if(se.key==="ArrowUp"&&!_.trim()&&!C){se.preventDefault();const Q=s.filter(oe=>oe.userId===o?.id);if(Q.length>0){const oe=Q[Q.length-1];t(6,C=oe),t(1,_=oe.text)}}else se.key==="Escape"&&C?(se.preventDefault(),V()):se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),H())}function H(){_.trim()&&(C?(pc(a,C.id,_.trim()),t(6,C=null)):(cs(a,_.trim(),"text",{replyTo:D?.id,isSpoiler:N}),t(4,D=null)),t(1,_=""),Gn(!1),y&&clearTimeout(y),P&&t(12,P.style.height="auto",P))}function V(){t(6,C=null),t(1,_=""),P&&t(12,P.style.height="auto",P)}function U(se){cs(a,"","gif",{gifUrl:se.detail,replyTo:D?.id,isSpoiler:N}),t(4,D=null),t(3,T=!1)}function G(se){t(4,D=se),document.querySelector('input[type="text"]')?.focus()}function Y(){t(4,D=null)}async function K(se){const Q=se.target,oe=Array.from(Q.files||[]);if(oe.length===0){console.log("No files selected");return}console.log("Files selected:",oe.length);const ge=1024*1024*1024;for(const Se of oe)if(Se.size>ge){alert(`File too large! Maximum size is 1GB per file. "${Se.name}" is ${(Se.size/1024/1024).toFixed(2)}MB`),Q.value="";return}I=oe,t(9,E=await Promise.all(oe.map(async Se=>{if(Se.type.startsWith("image/")){const ze=await new Promise(Ne=>{const je=new FileReader;je.onload=Re=>Ne(Re.target?.result),je.readAsDataURL(Se)});return{file:Se,preview:ze}}return{file:Se}}))),Q.value=""}function $(se){I=I.filter((Q,oe)=>oe!==se),t(9,E=E.filter((Q,oe)=>oe!==se))}function ee(){I=[],t(9,E=[])}function ae(se){se.preventDefault(),se.stopPropagation(),F++,se.dataTransfer?.types.includes("Files")&&t(11,S=!0)}function ie(se){se.preventDefault(),se.stopPropagation(),F--,F===0&&t(11,S=!1)}async function de(se){se.preventDefault(),se.stopPropagation(),t(11,S=!1),F=0;const Q=Array.from(se.dataTransfer?.files||[]);if(Q.length===0)return;const oe=1024*1024*1024;for(const ge of Q)if(ge.size>oe){alert(`File too large! Maximum size is 1GB per file. "${ge.name}" is ${(ge.size/1024/1024).toFixed(2)}MB`);return}I=Q,t(9,E=await Promise.all(Q.map(async ge=>{if(ge.type.startsWith("image/")){const Se=await new Promise(ze=>{const Ne=new FileReader;Ne.onload=je=>ze(je.target?.result),Ne.readAsDataURL(ge)});return{file:ge,preview:Se}}return{file:ge}})))}async function le(){if(I.length===0)return;t(8,A=!0);const se=I.length;let Q=0;try{const oe=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,ge=[];for(const Se of I){const ze=await new Promise((Ne,je)=>{const Re=new FormData;Re.append("file",Se),Re.append("channelId",a);const Ye=new XMLHttpRequest;Ye.upload.addEventListener("progress",Ze=>{if(Ze.lengthComputable){const gt=Ze.loaded/Ze.total*100,yt=(Q+gt/100)/se*100;t(7,b=Math.round(yt))}}),Ye.addEventListener("load",()=>{if(Ye.status===200){const Ze=JSON.parse(Ye.responseText);Q++,Ne({fileUrl:Ze.fileUrl,fileName:Se.name,fileSize:Se.size})}else je(new Error("Upload failed"))}),Ye.addEventListener("error",()=>{je(new Error("Upload failed"))}),Ye.open("POST",`${oe}/api/upload`),Ye.send(Re)});ge.push(ze)}ge.length===1?cs(a,_.trim()||`Shared: ${ge[0].fileName}`,"file",{fileUrl:ge[0].fileUrl,fileName:ge[0].fileName,fileSize:ge[0].fileSize,replyTo:D?.id,isSpoiler:N}):cs(a,_.trim()||`Shared ${ge.length} files`,"file",{files:ge,replyTo:D?.id,isSpoiler:N}),console.log("All files uploaded"),t(1,_=""),t(4,D=null),I=[],t(9,E=[]),t(8,A=!1),t(7,b=0)}catch(oe){console.error("Upload error:",oe),alert("Failed to upload files. Please try again."),t(8,A=!1),t(7,b=0)}}function te(se){it[se?"unshift":"push"](()=>{g=se,t(2,g)})}const ue=()=>t(3,T=!1),_e=se=>$(se);function Ee(){N=this.checked,t(10,N)}function Le(se){it[se?"unshift":"push"](()=>{m=se,t(5,m)})}const ve=()=>m?.click();function De(se){it[se?"unshift":"push"](()=>{P=se,t(12,P)})}function Fe(){_=this.value,t(1,_)}const Ue=()=>t(3,T=!T);return n.$$.update=()=>{n.$$.dirty[1]&10&&t(0,s=d[a]||[]),n.$$.dirty[0]&1&&t(14,r=s.filter(se=>se.isPinned)),n.$$.dirty[1]&6&&t(31,i=u.find(se=>se.id===a)),n.$$.dirty[1]&3&&t(13,l=i?.name||a),n.$$.dirty[0]&1&&s.length&&O()},[s,_,g,T,D,m,C,b,A,E,N,S,P,l,r,p,h,x,L,H,V,U,G,Y,K,$,ee,ae,ie,de,le,i,a,u,d,te,ue,_e,Ee,Le,ve,De,Fe,Ue]}class Vh extends ht{constructor(e){super(),pt(this,e,jh,xh,dt,{},null,[-1,-1])}}var Hn={},dr,ra;function Hh(){return ra||(ra=1,dr=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),dr}var hr={},kn={},ia;function Ln(){if(ia)return kn;ia=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return kn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},kn.getSymbolTotalCodewords=function(s){return e[s]},kn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s},kn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');n=s},kn.isKanjiModeEnabled=function(){return typeof n<"u"},kn.toSJIS=function(s){return n(s)},kn}var pr={},la;function hi(){return la||(la=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,r){if(n.isValid(s))return s;try{return e(s)}catch{return r}}})(pr)),pr}var gr,aa;function Gh(){if(aa)return gr;aa=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},gr=n,gr}var mr,oa;function Wh(){if(oa)return mr;oa=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,s,r){const i=e*this.size+t;this.data[i]=s,r&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},mr=n,mr}var vr={},ca;function Yh(){return ca||(ca=1,(function(n){const e=Ln().getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,i=e(s),l=i===145?26:Math.ceil((i-13)/(2*r-2))*2,a=[i-7];for(let o=1;o<r-1;o++)a[o]=a[o-1]-l;return a.push(6),a.reverse()},n.getPositions=function(s){const r=[],i=n.getRowColCoords(s),l=i.length;for(let a=0;a<l;a++)for(let o=0;o<l;o++)a===0&&o===0||a===0&&o===l-1||a===l-1&&o===0||r.push([i[a],i[o]]);return r}})(vr)),vr}var _r={},ua;function Kh(){if(ua)return _r;ua=1;const n=Ln().getSymbolSize,e=7;return _r.getPositions=function(s){const r=n(s);return[[0,0],[r-e,0],[0,r-e]]},_r}var br={},fa;function Xh(){return fa||(fa=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const i=r.size;let l=0,a=0,o=0,u=null,d=null;for(let p=0;p<i;p++){a=o=0,u=d=null;for(let h=0;h<i;h++){let _=r.get(p,h);_===u?a++:(a>=5&&(l+=e.N1+(a-5)),u=_,a=1),_=r.get(h,p),_===d?o++:(o>=5&&(l+=e.N1+(o-5)),d=_,o=1)}a>=5&&(l+=e.N1+(a-5)),o>=5&&(l+=e.N1+(o-5))}return l},n.getPenaltyN2=function(r){const i=r.size;let l=0;for(let a=0;a<i-1;a++)for(let o=0;o<i-1;o++){const u=r.get(a,o)+r.get(a,o+1)+r.get(a+1,o)+r.get(a+1,o+1);(u===4||u===0)&&l++}return l*e.N2},n.getPenaltyN3=function(r){const i=r.size;let l=0,a=0,o=0;for(let u=0;u<i;u++){a=o=0;for(let d=0;d<i;d++)a=a<<1&2047|r.get(u,d),d>=10&&(a===1488||a===93)&&l++,o=o<<1&2047|r.get(d,u),d>=10&&(o===1488||o===93)&&l++}return l*e.N3},n.getPenaltyN4=function(r){let i=0;const l=r.data.length;for(let o=0;o<l;o++)i+=r.data[o];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function t(s,r,i){switch(s){case n.Patterns.PATTERN000:return(r+i)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(r+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return r*i%2+r*i%3===0;case n.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case n.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(r,i){const l=i.size;for(let a=0;a<l;a++)for(let o=0;o<l;o++)i.isReserved(o,a)||i.xor(o,a,t(r,o,a))},n.getBestMask=function(r,i){const l=Object.keys(n.Patterns).length;let a=0,o=1/0;for(let u=0;u<l;u++){i(u),n.applyMask(u,r);const d=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(u,r),d<o&&(o=d,a=u)}return a}})(br)),br}var Ms={},da;function yc(){if(da)return Ms;da=1;const n=hi(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ms.getBlocksCount=function(r,i){switch(i){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},Ms.getTotalCodewordsCount=function(r,i){switch(i){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},Ms}var kr={},ls={},ha;function Zh(){if(ha)return ls;ha=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let s=1;for(let r=0;r<255;r++)n[r]=s,e[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),ls.log=function(s){if(s<1)throw new Error("log("+s+")");return e[s]},ls.exp=function(s){return n[s]},ls.mul=function(s,r){return s===0||r===0?0:n[e[s]+e[r]]},ls}var pa;function Jh(){return pa||(pa=1,(function(n){const e=Zh();n.mul=function(s,r){const i=new Uint8Array(s.length+r.length-1);for(let l=0;l<s.length;l++)for(let a=0;a<r.length;a++)i[l+a]^=e.mul(s[l],r[a]);return i},n.mod=function(s,r){let i=new Uint8Array(s);for(;i.length-r.length>=0;){const l=i[0];for(let o=0;o<r.length;o++)i[o]^=e.mul(r[o],l);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let i=0;i<s;i++)r=n.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(kr)),kr}var wr,ga;function Qh(){if(ga)return wr;ga=1;const n=Jh();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(s){this.degree=s,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const i=n.mod(r,this.genPoly),l=this.degree-i.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(i,l),a}return i},wr=e,wr}var yr={},Er={},Cr={},ma;function Ec(){return ma||(ma=1,Cr.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Cr}var on={},va;function Cc(){if(va)return on;va=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;on.KANJI=new RegExp(t,"g"),on.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),on.BYTE=new RegExp(s,"g"),on.NUMERIC=new RegExp(n,"g"),on.ALPHANUMERIC=new RegExp(e,"g");const r=new RegExp("^"+t+"$"),i=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return on.testKanji=function(o){return r.test(o)},on.testNumeric=function(o){return i.test(o)},on.testAlphanumeric=function(o){return l.test(o)},on}var _a;function Un(){return _a||(_a=1,(function(n){const e=Ec(),t=Cc();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(i,l){if(n.isValid(i))return i;try{return s(i)}catch{return l}}})(Er)),Er}var ba;function $h(){return ba||(ba=1,(function(n){const e=Ln(),t=yc(),s=hi(),r=Un(),i=Ec(),l=7973,a=e.getBCHDigit(l);function o(h,_,g){for(let y=1;y<=40;y++)if(_<=n.getCapacity(y,g,h))return y}function u(h,_){return r.getCharCountIndicator(h,_)+4}function d(h,_){let g=0;return h.forEach(function(y){const T=u(y.mode,_);g+=T+y.getBitsLength()}),g}function p(h,_){for(let g=1;g<=40;g++)if(d(h,g)<=n.getCapacity(g,_,r.MIXED))return g}n.from=function(_,g){return i.isValid(_)?parseInt(_,10):g},n.getCapacity=function(_,g,y){if(!i.isValid(_))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=r.BYTE);const T=e.getSymbolTotalCodewords(_),D=t.getTotalCodewordsCount(_,g),m=(T-D)*8;if(y===r.MIXED)return m;const C=m-u(y,_);switch(y){case r.NUMERIC:return Math.floor(C/10*3);case r.ALPHANUMERIC:return Math.floor(C/11*2);case r.KANJI:return Math.floor(C/13);case r.BYTE:default:return Math.floor(C/8)}},n.getBestVersionForData=function(_,g){let y;const T=s.from(g,s.M);if(Array.isArray(_)){if(_.length>1)return p(_,T);if(_.length===0)return 1;y=_[0]}else y=_;return o(y.mode,y.getLength(),T)},n.getEncodedBits=function(_){if(!i.isValid(_)||_<7)throw new Error("Invalid QR Code version");let g=_<<12;for(;e.getBCHDigit(g)-a>=0;)g^=l<<e.getBCHDigit(g)-a;return _<<12|g}})(yr)),yr}var Tr={},ka;function ep(){if(ka)return Tr;ka=1;const n=Ln(),e=1335,t=21522,s=n.getBCHDigit(e);return Tr.getEncodedBits=function(i,l){const a=i.bit<<3|l;let o=a<<10;for(;n.getBCHDigit(o)-s>=0;)o^=e<<n.getBCHDigit(o)-s;return(a<<10|o)^t},Tr}var Ar={},Sr,wa;function tp(){if(wa)return Sr;wa=1;const n=Un();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let r,i,l;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),l=parseInt(i,10),s.put(l,10);const a=this.data.length-r;a>0&&(i=this.data.substr(r),l=parseInt(i,10),s.put(l,a*3+1))},Sr=e,Sr}var Ir,ya;function np(){if(ya)return Ir;ya=1;const n=Un(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(s){this.mode=n.ALPHANUMERIC,this.data=s}return t.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i+2<=this.data.length;i+=2){let l=e.indexOf(this.data[i])*45;l+=e.indexOf(this.data[i+1]),r.put(l,11)}this.data.length%2&&r.put(e.indexOf(this.data[i]),6)},Ir=t,Ir}var Dr,Ea;function sp(){if(Ea)return Dr;Ea=1;const n=Un();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(s){return s*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)},Dr=e,Dr}var Nr,Ca;function rp(){if(Ca)return Nr;Ca=1;const n=Un(),e=Ln();function t(s){this.mode=n.KANJI,this.data=s}return t.getBitsLength=function(r){return r*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let r;for(r=0;r<this.data.length;r++){let i=e.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),s.put(i,13)}},Nr=t,Nr}var Rr={exports:{}},Ta;function ip(){return Ta||(Ta=1,(function(n){var e={single_source_shortest_paths:function(t,s,r){var i={},l={};l[s]=0;var a=e.PriorityQueue.make();a.push(s,0);for(var o,u,d,p,h,_,g,y,T;!a.empty();){o=a.pop(),u=o.value,p=o.cost,h=t[u]||{};for(d in h)h.hasOwnProperty(d)&&(_=h[d],g=p+_,y=l[d],T=typeof l[d]>"u",(T||y>g)&&(l[d]=g,a.push(d,g),i[d]=u))}if(typeof r<"u"&&typeof l[r]>"u"){var D=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(D)}return i},extract_shortest_path_from_predecessor_list:function(t,s){for(var r=[],i=s;i;)r.push(i),t[i],i=t[i];return r.reverse(),r},find_path:function(t,s,r){var i=e.single_source_shortest_paths(t,s,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var s=e.PriorityQueue,r={},i;t=t||{};for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);return r.queue=[],r.sorter=t.sorter||s.default_sorter,r},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var r={value:t,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(Rr)),Rr.exports}var Aa;function lp(){return Aa||(Aa=1,(function(n){const e=Un(),t=tp(),s=np(),r=sp(),i=rp(),l=Cc(),a=Ln(),o=ip();function u(D){return unescape(encodeURIComponent(D)).length}function d(D,m,C){const b=[];let A;for(;(A=D.exec(C))!==null;)b.push({data:A[0],index:A.index,mode:m,length:A[0].length});return b}function p(D){const m=d(l.NUMERIC,e.NUMERIC,D),C=d(l.ALPHANUMERIC,e.ALPHANUMERIC,D);let b,A;return a.isKanjiModeEnabled()?(b=d(l.BYTE,e.BYTE,D),A=d(l.KANJI,e.KANJI,D)):(b=d(l.BYTE_KANJI,e.BYTE,D),A=[]),m.concat(C,b,A).sort(function(E,N){return E.index-N.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function h(D,m){switch(m){case e.NUMERIC:return t.getBitsLength(D);case e.ALPHANUMERIC:return s.getBitsLength(D);case e.KANJI:return i.getBitsLength(D);case e.BYTE:return r.getBitsLength(D)}}function _(D){return D.reduce(function(m,C){const b=m.length-1>=0?m[m.length-1]:null;return b&&b.mode===C.mode?(m[m.length-1].data+=C.data,m):(m.push(C),m)},[])}function g(D){const m=[];for(let C=0;C<D.length;C++){const b=D[C];switch(b.mode){case e.NUMERIC:m.push([b,{data:b.data,mode:e.ALPHANUMERIC,length:b.length},{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.ALPHANUMERIC:m.push([b,{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.KANJI:m.push([b,{data:b.data,mode:e.BYTE,length:u(b.data)}]);break;case e.BYTE:m.push([{data:b.data,mode:e.BYTE,length:u(b.data)}])}}return m}function y(D,m){const C={},b={start:{}};let A=["start"];for(let I=0;I<D.length;I++){const E=D[I],N=[];for(let S=0;S<E.length;S++){const F=E[S],P=""+I+S;N.push(P),C[P]={node:F,lastCount:0},b[P]={};for(let O=0;O<A.length;O++){const B=A[O];C[B]&&C[B].node.mode===F.mode?(b[B][P]=h(C[B].lastCount+F.length,F.mode)-h(C[B].lastCount,F.mode),C[B].lastCount+=F.length):(C[B]&&(C[B].lastCount=F.length),b[B][P]=h(F.length,F.mode)+4+e.getCharCountIndicator(F.mode,m))}}A=N}for(let I=0;I<A.length;I++)b[A[I]].end=0;return{map:b,table:C}}function T(D,m){let C;const b=e.getBestModeForData(D);if(C=e.from(m,b),C!==e.BYTE&&C.bit<b.bit)throw new Error('"'+D+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(b));switch(C===e.KANJI&&!a.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new t(D);case e.ALPHANUMERIC:return new s(D);case e.KANJI:return new i(D);case e.BYTE:return new r(D)}}n.fromArray=function(m){return m.reduce(function(C,b){return typeof b=="string"?C.push(T(b,null)):b.data&&C.push(T(b.data,b.mode)),C},[])},n.fromString=function(m,C){const b=p(m,a.isKanjiModeEnabled()),A=g(b),I=y(A,C),E=o.find_path(I.map,"start","end"),N=[];for(let S=1;S<E.length-1;S++)N.push(I.table[E[S]].node);return n.fromArray(_(N))},n.rawSplit=function(m){return n.fromArray(p(m,a.isKanjiModeEnabled()))}})(Ar)),Ar}var Sa;function ap(){if(Sa)return hr;Sa=1;const n=Ln(),e=hi(),t=Gh(),s=Wh(),r=Yh(),i=Kh(),l=Xh(),a=yc(),o=Qh(),u=$h(),d=ep(),p=Un(),h=lp();function _(I,E){const N=I.size,S=i.getPositions(E);for(let F=0;F<S.length;F++){const P=S[F][0],O=S[F][1];for(let B=-1;B<=7;B++)if(!(P+B<=-1||N<=P+B))for(let x=-1;x<=7;x++)O+x<=-1||N<=O+x||(B>=0&&B<=6&&(x===0||x===6)||x>=0&&x<=6&&(B===0||B===6)||B>=2&&B<=4&&x>=2&&x<=4?I.set(P+B,O+x,!0,!0):I.set(P+B,O+x,!1,!0))}}function g(I){const E=I.size;for(let N=8;N<E-8;N++){const S=N%2===0;I.set(N,6,S,!0),I.set(6,N,S,!0)}}function y(I,E){const N=r.getPositions(E);for(let S=0;S<N.length;S++){const F=N[S][0],P=N[S][1];for(let O=-2;O<=2;O++)for(let B=-2;B<=2;B++)O===-2||O===2||B===-2||B===2||O===0&&B===0?I.set(F+O,P+B,!0,!0):I.set(F+O,P+B,!1,!0)}}function T(I,E){const N=I.size,S=u.getEncodedBits(E);let F,P,O;for(let B=0;B<18;B++)F=Math.floor(B/3),P=B%3+N-8-3,O=(S>>B&1)===1,I.set(F,P,O,!0),I.set(P,F,O,!0)}function D(I,E,N){const S=I.size,F=d.getEncodedBits(E,N);let P,O;for(P=0;P<15;P++)O=(F>>P&1)===1,P<6?I.set(P,8,O,!0):P<8?I.set(P+1,8,O,!0):I.set(S-15+P,8,O,!0),P<8?I.set(8,S-P-1,O,!0):P<9?I.set(8,15-P-1+1,O,!0):I.set(8,15-P-1,O,!0);I.set(S-8,8,1,!0)}function m(I,E){const N=I.size;let S=-1,F=N-1,P=7,O=0;for(let B=N-1;B>0;B-=2)for(B===6&&B--;;){for(let x=0;x<2;x++)if(!I.isReserved(F,B-x)){let L=!1;O<E.length&&(L=(E[O]>>>P&1)===1),I.set(F,B-x,L),P--,P===-1&&(O++,P=7)}if(F+=S,F<0||N<=F){F-=S,S=-S;break}}}function C(I,E,N){const S=new t;N.forEach(function(x){S.put(x.mode.bit,4),S.put(x.getLength(),p.getCharCountIndicator(x.mode,I)),x.write(S)});const F=n.getSymbolTotalCodewords(I),P=a.getTotalCodewordsCount(I,E),O=(F-P)*8;for(S.getLengthInBits()+4<=O&&S.put(0,4);S.getLengthInBits()%8!==0;)S.putBit(0);const B=(O-S.getLengthInBits())/8;for(let x=0;x<B;x++)S.put(x%2?17:236,8);return b(S,I,E)}function b(I,E,N){const S=n.getSymbolTotalCodewords(E),F=a.getTotalCodewordsCount(E,N),P=S-F,O=a.getBlocksCount(E,N),B=S%O,x=O-B,L=Math.floor(S/O),H=Math.floor(P/O),V=H+1,U=L-H,G=new o(U);let Y=0;const K=new Array(O),$=new Array(O);let ee=0;const ae=new Uint8Array(I.buffer);for(let ue=0;ue<O;ue++){const _e=ue<x?H:V;K[ue]=ae.slice(Y,Y+_e),$[ue]=G.encode(K[ue]),Y+=_e,ee=Math.max(ee,_e)}const ie=new Uint8Array(S);let de=0,le,te;for(le=0;le<ee;le++)for(te=0;te<O;te++)le<K[te].length&&(ie[de++]=K[te][le]);for(le=0;le<U;le++)for(te=0;te<O;te++)ie[de++]=$[te][le];return ie}function A(I,E,N,S){let F;if(Array.isArray(I))F=h.fromArray(I);else if(typeof I=="string"){let L=E;if(!L){const H=h.rawSplit(I);L=u.getBestVersionForData(H,N)}F=h.fromString(I,L||40)}else throw new Error("Invalid data");const P=u.getBestVersionForData(F,N);if(!P)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=P;else if(E<P)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+P+`.
`);const O=C(E,N,F),B=n.getSymbolSize(E),x=new s(B);return _(x,E),g(x),y(x,E),D(x,N,0),E>=7&&T(x,E),m(x,O),isNaN(S)&&(S=l.getBestMask(x,D.bind(null,x,N))),l.applyMask(S,x),D(x,N,S),{modules:x,version:E,errorCorrectionLevel:N,maskPattern:S,segments:F}}return hr.create=function(E,N){if(typeof E>"u"||E==="")throw new Error("No input text");let S=e.M,F,P;return typeof N<"u"&&(S=e.from(N.errorCorrectionLevel,e.M),F=u.from(N.version),P=l.from(N.maskPattern),N.toSJISFunc&&n.setToSJISFunction(N.toSJISFunc)),A(E,F,S,P)},hr}var Pr={},Or={},Ia;function Tc(){return Ia||(Ia=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(i){return[i,i]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,i=s.width&&s.width>=21?s.width:void 0,l=s.scale||4;return{width:i,scale:i?4:l,margin:r,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},n.getImageWidth=function(s,r){const i=n.getScale(s,r);return Math.floor((s+r.margin*2)*i)},n.qrToImageData=function(s,r,i){const l=r.modules.size,a=r.modules.data,o=n.getScale(l,i),u=Math.floor((l+i.margin*2)*o),d=i.margin*o,p=[i.color.light,i.color.dark];for(let h=0;h<u;h++)for(let _=0;_<u;_++){let g=(h*u+_)*4,y=i.color.light;if(h>=d&&_>=d&&h<u-d&&_<u-d){const T=Math.floor((h-d)/o),D=Math.floor((_-d)/o);y=p[a[T*l+D]?1:0]}s[g++]=y.r,s[g++]=y.g,s[g++]=y.b,s[g]=y.a}}})(Or)),Or}var Da;function op(){return Da||(Da=1,(function(n){const e=Tc();function t(r,i,l){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,l,a){let o=a,u=l;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),l||(u=s()),o=e.getOptions(o);const d=e.getImageWidth(i.modules.size,o),p=u.getContext("2d"),h=p.createImageData(d,d);return e.qrToImageData(h.data,i,o),t(p,u,d),p.putImageData(h,0,0),u},n.renderToDataURL=function(i,l,a){let o=a;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),o||(o={});const u=n.render(i,l,o),d=o.type||"image/png",p=o.rendererOpts||{};return u.toDataURL(d,p.quality)}})(Pr)),Pr}var Mr={},Na;function cp(){if(Na)return Mr;Na=1;const n=Tc();function e(r,i){const l=r.a/255,a=i+'="'+r.hex+'"';return l<1?a+" "+i+'-opacity="'+l.toFixed(2).slice(1)+'"':a}function t(r,i,l){let a=r+i;return typeof l<"u"&&(a+=" "+l),a}function s(r,i,l){let a="",o=0,u=!1,d=0;for(let p=0;p<r.length;p++){const h=Math.floor(p%i),_=Math.floor(p/i);!h&&!u&&(u=!0),r[p]?(d++,p>0&&h>0&&r[p-1]||(a+=u?t("M",h+l,.5+_+l):t("m",o,0),o=0,u=!1),h+1<i&&r[p+1]||(a+=t("h",d),d=0)):o++}return a}return Mr.render=function(i,l,a){const o=n.getOptions(l),u=i.modules.size,d=i.modules.data,p=u+o.margin*2,h=o.color.light.a?"<path "+e(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",_="<path "+e(o.color.dark,"stroke")+' d="'+s(d,u,o.margin)+'"/>',g='viewBox="0 0 '+p+" "+p+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+g+' shape-rendering="crispEdges">'+h+_+`</svg>
`;return typeof a=="function"&&a(null,T),T},Mr}var Ra;function up(){if(Ra)return Hn;Ra=1;const n=Hh(),e=ap(),t=op(),s=cp();function r(i,l,a,o,u){const d=[].slice.call(arguments,1),p=d.length,h=typeof d[p-1]=="function";if(!h&&!n())throw new Error("Callback required as last argument");if(h){if(p<2)throw new Error("Too few arguments provided");p===2?(u=a,a=l,l=o=void 0):p===3&&(l.getContext&&typeof u>"u"?(u=o,o=void 0):(u=o,o=a,a=l,l=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(a=l,l=o=void 0):p===2&&!l.getContext&&(o=a,a=l,l=void 0),new Promise(function(_,g){try{const y=e.create(a,o);_(i(y,l,o))}catch(y){g(y)}})}try{const _=e.create(a,o);u(null,i(_,l,o))}catch(_){u(_)}}return Hn.create=e.create,Hn.toCanvas=r.bind(null,t.render),Hn.toDataURL=r.bind(null,t.renderToDataURL),Hn.toString=r.bind(null,function(i,l,a){return s.render(i,a)}),Hn}var fp=up();const dp=ac(fp);function Pa(n){let e,t,s,r="Join This Wabi House",i,l,a,o,u,d,p,h,_,g,y,T="Regenerate",D,m,C="Close",b,A;return{c(){e=w("div"),t=w("div"),s=w("h2"),s.textContent=r,i=z(),l=w("canvas"),a=z(),o=w("p"),u=Z(n[4]),d=z(),p=w("div"),h=w("input"),_=z(),g=w("div"),y=w("button"),y.textContent=T,D=z(),m=w("button"),m.textContent=C,this.h()},l(I){e=k(I,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var E=R(e);t=k(E,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var N=R(t);s=k(N,"H2",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-147mrlj"&&(s.textContent=r),i=M(N),l=k(N,"CANVAS",{}),R(l).forEach(v),a=M(N),o=k(N,"P",{class:!0});var S=R(o);u=X(S,n[4]),S.forEach(v),d=M(N),p=k(N,"DIV",{class:!0});var F=R(p);h=k(F,"INPUT",{type:!0,placeholder:!0,class:!0}),F.forEach(v),_=M(N),g=k(N,"DIV",{class:!0});var P=R(g);y=k(P,"BUTTON",{class:!0,"data-svelte-h":!0}),J(y)!=="svelte-10gzc5i"&&(y.textContent=T),D=M(P),m=k(P,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-1muw4mw"&&(m.textContent=C),P.forEach(v),N.forEach(v),E.forEach(v),this.h()},h(){f(s,"class","svelte-13o88on"),f(o,"class","url svelte-13o88on"),f(h,"type","text"),f(h,"placeholder","Optional room name (e.g. kitchen)"),f(h,"class","svelte-13o88on"),f(p,"class","room-input svelte-13o88on"),f(y,"class","svelte-13o88on"),f(m,"class","svelte-13o88on"),f(g,"class","qr-actions svelte-13o88on"),f(t,"class","qr-modal svelte-13o88on"),f(t,"role","dialog"),f(t,"aria-modal","true"),f(t,"aria-label","QR code to join this Wabi house"),f(e,"class","qr-overlay svelte-13o88on"),f(e,"role","button"),f(e,"tabindex","0"),f(e,"aria-label","Close QR code modal")},m(I,E){j(I,e,E),c(e,t),c(t,s),c(t,i),c(t,l),n[10](l),c(t,a),c(t,o),c(o,u),c(t,d),c(t,p),c(p,h),nt(h,n[3]),c(t,_),c(t,g),c(g,y),c(g,D),c(g,m),b||(A=[W(h,"input",n[11]),W(h,"input",n[12]),W(y,"click",n[6]),W(m,"click",n[13]),W(t,"click",lt(n[7])),W(t,"keydown",lt(n[8])),W(e,"click",n[14]),W(e,"keydown",n[15])],b=!0)},p(I,E){E&16&&re(u,I[4]),E&8&&h.value!==I[3]&&nt(h,I[3])},d(I){I&&v(e),n[10](null),b=!1,Ie(A)}}}function hp(n){let e,t,s,r,i,l,a,o,u,d="Join the Fridge",p,h,_="Scan to Join This House",g,y,T,D=n[2]&&Pa(n);return{c(){e=w("div"),t=w("div"),s=w("img"),i=z(),l=w("form"),a=w("input"),o=z(),u=w("button"),u.textContent=d,p=z(),h=w("button"),h.textContent=_,g=z(),D&&D.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var C=R(e);t=k(C,"DIV",{class:!0});var b=R(t);s=k(b,"IMG",{src:!0,alt:!0,class:!0}),i=M(b),l=k(b,"FORM",{});var A=R(l);a=k(A,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=M(A),u=k(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(u)!=="svelte-1jmevab"&&(u.textContent=d),A.forEach(v),p=M(b),h=k(b,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(h)!=="svelte-yn4djj"&&(h.textContent=_),b.forEach(v),g=M(C),D&&D.l(C),C.forEach(v),this.h()},h(){He(s.src,r="/wabi-logo.png")||f(s,"src",r),f(s,"alt","Wabi"),f(s,"class","logo svelte-13o88on"),f(a,"type","text"),f(a,"placeholder","Enter your name"),f(a,"maxlength","20"),a.required=!0,a.autofocus=!0,f(a,"class","svelte-13o88on"),f(u,"type","submit"),f(u,"class","join-btn svelte-13o88on"),f(h,"type","button"),f(h,"class","qr-btn svelte-13o88on"),f(t,"class","login-box svelte-13o88on"),f(e,"class","login-container svelte-13o88on")},m(m,C){j(m,e,C),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),nt(a,n[0]),c(l,o),c(l,u),c(t,p),c(t,h),c(e,g),D&&D.m(e,null),a.focus(),y||(T=[W(a,"input",n[9]),W(l,"submit",Ic(n[5])),W(h,"click",n[6])],y=!0)},p(m,[C]){C&1&&a.value!==m[0]&&nt(a,m[0]),m[2]?D?D.p(m,C):(D=Pa(m),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},i:Oe,o:Oe,d(m){m&&v(e),D&&D.d(),y=!1,Ie(T)}}}function pp(n,e,t){let s;const r=Ws();let i="",l,a=!1,o="";function u(){i.trim()&&(localStorage.setItem("wabi-username",i.trim()),r("login",i.trim()))}function d(){t(2,a=!0),setTimeout(()=>{const b=o.trim()?`${s}?room=${encodeURIComponent(o.trim())}`:s;dp.toCanvas(l,b,{width:300,margin:2,color:{dark:"#ffffff",light:"#00000000"}})},50)}function p(b){Wt.call(this,n,b)}function h(b){Wt.call(this,n,b)}function _(){i=this.value,t(0,i)}function g(b){it[b?"unshift":"push"](()=>{l=b,t(1,l)})}function y(){o=this.value,t(3,o)}const T=()=>setTimeout(d,300),D=()=>t(2,a=!1),m=()=>t(2,a=!1),C=b=>(b.key==="Escape"||b.key===" ")&&t(2,a=!1);return t(4,s=typeof window<"u"?`${window.location.origin}./`:""),[i,l,a,o,s,u,d,p,h,_,g,y,T,D,m,C]}class gp extends ht{constructor(e){super(),pt(this,e,pp,hp,dt,{})}}function Oa(n,e,t){const s=n.slice();return s[27]=e[t],s}function Ma(n){let e,t,s,r="Total Messages",i,l,a=n[3].totalMessages.toLocaleString()+"",o,u,d,p,h="Storage Used",_,g,y=Hs(n[3].totalSize)+"",T,D,m,C,b="Archives",A,I,E=n[3].archives.length+"",N,S,F,P,O,B="Rotation Period",x,L,H,V="Weekly",U,G="Monthly",Y,K="Every 6 Months",$,ee="Yearly",ae,ie,de="How often to create a new archive file (like changing batteries)",le,te,ue,_e,Ee="Keep Last",Le,ve,De,Fe,Ue,se="archives",Q,oe,ge="Older archives are automatically deleted to save space",Se,ze,Ne,je,Re="ðŸ—‘ï¸ Clear All History",Ye,Ze;function gt(ke,Ve){return ke[3].archives.length>0?vp:mp}let yt=gt(n),fe=yt(n);return{c(){e=w("div"),t=w("div"),s=w("div"),s.textContent=r,i=z(),l=w("div"),o=Z(a),u=z(),d=w("div"),p=w("div"),p.textContent=h,_=z(),g=w("div"),T=Z(y),D=z(),m=w("div"),C=w("div"),C.textContent=b,A=z(),I=w("div"),N=Z(E),S=z(),F=w("div"),P=w("label"),O=w("span"),O.textContent=B,x=z(),L=w("select"),H=w("option"),H.textContent=V,U=w("option"),U.textContent=G,Y=w("option"),Y.textContent=K,$=w("option"),$.textContent=ee,ae=z(),ie=w("p"),ie.textContent=de,le=z(),te=w("div"),ue=w("label"),_e=w("span"),_e.textContent=Ee,Le=z(),ve=w("div"),De=w("input"),Fe=z(),Ue=w("span"),Ue.textContent=se,Q=z(),oe=w("p"),oe.textContent=ge,Se=z(),fe.c(),ze=z(),Ne=w("div"),je=w("button"),je.textContent=Re,this.h()},l(ke){e=k(ke,"DIV",{class:!0});var Ve=R(e);t=k(Ve,"DIV",{class:!0});var _t=R(t);s=k(_t,"DIV",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-akn32o"&&(s.textContent=r),i=M(_t),l=k(_t,"DIV",{class:!0});var Pt=R(l);o=X(Pt,a),Pt.forEach(v),_t.forEach(v),u=M(Ve),d=k(Ve,"DIV",{class:!0});var ne=R(d);p=k(ne,"DIV",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-5vlbe4"&&(p.textContent=h),_=M(ne),g=k(ne,"DIV",{class:!0});var we=R(g);T=X(we,y),we.forEach(v),ne.forEach(v),D=M(Ve),m=k(Ve,"DIV",{class:!0});var tt=R(m);C=k(tt,"DIV",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-1e1df45"&&(C.textContent=b),A=M(tt),I=k(tt,"DIV",{class:!0});var At=R(I);N=X(At,E),At.forEach(v),tt.forEach(v),Ve.forEach(v),S=M(ke),F=k(ke,"DIV",{class:!0});var st=R(F);P=k(st,"LABEL",{class:!0});var bt=R(P);O=k(bt,"SPAN",{class:!0,"data-svelte-h":!0}),J(O)!=="svelte-608xyy"&&(O.textContent=B),x=M(bt),L=k(bt,"SELECT",{class:!0});var xt=R(L);H=k(xt,"OPTION",{"data-svelte-h":!0}),J(H)!=="svelte-crm6lv"&&(H.textContent=V),U=k(xt,"OPTION",{"data-svelte-h":!0}),J(U)!=="svelte-hva46z"&&(U.textContent=G),Y=k(xt,"OPTION",{"data-svelte-h":!0}),J(Y)!=="svelte-1s0lvql"&&(Y.textContent=K),$=k(xt,"OPTION",{"data-svelte-h":!0}),J($)!=="svelte-jp5v27"&&($.textContent=ee),xt.forEach(v),bt.forEach(v),ae=M(st),ie=k(st,"P",{class:!0,"data-svelte-h":!0}),J(ie)!=="svelte-qu5pay"&&(ie.textContent=de),st.forEach(v),le=M(ke),te=k(ke,"DIV",{class:!0});var sn=R(te);ue=k(sn,"LABEL",{class:!0});var mt=R(ue);_e=k(mt,"SPAN",{class:!0,"data-svelte-h":!0}),J(_e)!=="svelte-1im50qe"&&(_e.textContent=Ee),Le=M(mt),ve=k(mt,"DIV",{class:!0});var Ot=R(ve);De=k(Ot,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Fe=M(Ot),Ue=k(Ot,"SPAN",{class:!0,"data-svelte-h":!0}),J(Ue)!=="svelte-nj3imy"&&(Ue.textContent=se),Ot.forEach(v),mt.forEach(v),Q=M(sn),oe=k(sn,"P",{class:!0,"data-svelte-h":!0}),J(oe)!=="svelte-he359b"&&(oe.textContent=ge),sn.forEach(v),Se=M(ke),fe.l(ke),ze=M(ke),Ne=k(ke,"DIV",{class:!0});var Sn=R(Ne);je=k(Sn,"BUTTON",{class:!0,"data-svelte-h":!0}),J(je)!=="svelte-1u0bcm7"&&(je.textContent=Re),Sn.forEach(v),this.h()},h(){f(s,"class","stat-label svelte-1jfalu6"),f(l,"class","stat-value svelte-1jfalu6"),f(t,"class","stat svelte-1jfalu6"),f(p,"class","stat-label svelte-1jfalu6"),f(g,"class","stat-value svelte-1jfalu6"),f(d,"class","stat svelte-1jfalu6"),f(C,"class","stat-label svelte-1jfalu6"),f(I,"class","stat-value svelte-1jfalu6"),f(m,"class","stat svelte-1jfalu6"),f(e,"class","stats-panel svelte-1jfalu6"),f(O,"class","label svelte-1jfalu6"),H.__value="week",nt(H,H.__value),U.__value="month",nt(U,U.__value),Y.__value="half-year",nt(Y,Y.__value),$.__value="year",nt($,$.__value),f(L,"class","svelte-1jfalu6"),n[1]===void 0&&Dc(()=>n[20].call(L)),f(P,"class","svelte-1jfalu6"),f(ie,"class","hint svelte-1jfalu6"),f(F,"class","setting-group svelte-1jfalu6"),f(_e,"class","label svelte-1jfalu6"),f(De,"type","number"),f(De,"min","1"),f(De,"max","52"),f(De,"class","svelte-1jfalu6"),f(Ue,"class","unit svelte-1jfalu6"),f(ve,"class","number-input-group svelte-1jfalu6"),f(ue,"class","svelte-1jfalu6"),f(oe,"class","hint svelte-1jfalu6"),f(te,"class","setting-group svelte-1jfalu6"),f(je,"class","btn-danger svelte-1jfalu6"),f(Ne,"class","actions svelte-1jfalu6")},m(ke,Ve){j(ke,e,Ve),c(e,t),c(t,s),c(t,i),c(t,l),c(l,o),c(e,u),c(e,d),c(d,p),c(d,_),c(d,g),c(g,T),c(e,D),c(e,m),c(m,C),c(m,A),c(m,I),c(I,N),j(ke,S,Ve),j(ke,F,Ve),c(F,P),c(P,O),c(P,x),c(P,L),c(L,H),c(L,U),c(L,Y),c(L,$),wi(L,n[1],!0),c(F,ae),c(F,ie),j(ke,le,Ve),j(ke,te,Ve),c(te,ue),c(ue,_e),c(ue,Le),c(ue,ve),c(ve,De),nt(De,n[2]),c(ve,Fe),c(ve,Ue),c(te,Q),c(te,oe),j(ke,Se,Ve),fe.m(ke,Ve),j(ke,ze,Ve),j(ke,Ne,Ve),c(Ne,je),Ye||(Ze=[W(L,"change",n[20]),W(L,"change",n[11]),W(De,"input",n[21]),W(De,"change",n[12]),W(je,"click",n[17])],Ye=!0)},p(ke,Ve){Ve&8&&a!==(a=ke[3].totalMessages.toLocaleString()+"")&&re(o,a),Ve&8&&y!==(y=Hs(ke[3].totalSize)+"")&&re(T,y),Ve&8&&E!==(E=ke[3].archives.length+"")&&re(N,E),Ve&2&&wi(L,ke[1]),Ve&4&&Yr(De.value)!==ke[2]&&nt(De,ke[2]),yt===(yt=gt(ke))&&fe?fe.p(ke,Ve):(fe.d(1),fe=yt(ke),fe&&(fe.c(),fe.m(ze.parentNode,ze)))},d(ke){ke&&(v(e),v(S),v(F),v(le),v(te),v(Se),v(ze),v(Ne)),fe.d(ke),Ye=!1,Ie(Ze)}}}function mp(n){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1jfalu6")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function vp(n){let e,t,s,r="Archive History",i,l,a="ðŸ“¦ Export All",o,u,d,p,h=Xe(n[3].archives),_=[];for(let g=0;g<h.length;g+=1)_[g]=za(Oa(n,h,g));return{c(){e=w("div"),t=w("div"),s=w("h4"),s.textContent=r,i=z(),l=w("button"),l.textContent=a,o=z(),u=w("div");for(let g=0;g<_.length;g+=1)_[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);t=k(y,"DIV",{class:!0});var T=R(t);s=k(T,"H4",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1i91zrs"&&(s.textContent=r),i=M(T),l=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-197zvis"&&(l.textContent=a),T.forEach(v),o=M(y),u=k(y,"DIV",{class:!0});var D=R(u);for(let m=0;m<_.length;m+=1)_[m].l(D);D.forEach(v),y.forEach(v),this.h()},h(){f(s,"class","svelte-1jfalu6"),f(l,"class","btn-small svelte-1jfalu6"),f(t,"class","section-header svelte-1jfalu6"),f(u,"class","archive-list svelte-1jfalu6"),f(e,"class","archives-section svelte-1jfalu6")},m(g,y){j(g,e,y),c(e,t),c(t,s),c(t,i),c(t,l),c(e,o),c(e,u);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(u,null);d||(p=W(l,"click",n[16]),d=!0)},p(g,y){if(y&40968){h=Xe(g[3].archives);let T;for(T=0;T<h.length;T+=1){const D=Oa(g,h,T);_[T]?_[T].p(D,y):(_[T]=za(D),_[T].c(),_[T].m(u,null))}for(;T<_.length;T+=1)_[T].d(1);_.length=h.length}},d(g){g&&v(e),Ys(_,g),d=!1,p()}}}function za(n){let e,t,s,r=Gs(n[27].period)+"",i,l,a,o=Hs(n[27].size)+"",u,d,p=n[27].messageCount.toLocaleString()+"",h,_,g,y,T,D="ðŸ’¾",m,C,b="ðŸ—‘ï¸",A,I,E;function N(){return n[22](n[27])}function S(){return n[23](n[27])}return{c(){e=w("div"),t=w("div"),s=w("span"),i=Z(r),l=z(),a=w("span"),u=Z(o),d=Z(" â€¢ "),h=Z(p),_=Z(" messages"),g=z(),y=w("div"),T=w("button"),T.textContent=D,m=z(),C=w("button"),C.textContent=b,A=z(),this.h()},l(F){e=k(F,"DIV",{class:!0});var P=R(e);t=k(P,"DIV",{class:!0});var O=R(t);s=k(O,"SPAN",{class:!0});var B=R(s);i=X(B,r),B.forEach(v),l=M(O),a=k(O,"SPAN",{class:!0});var x=R(a);u=X(x,o),d=X(x," â€¢ "),h=X(x,p),_=X(x," messages"),x.forEach(v),O.forEach(v),g=M(P),y=k(P,"DIV",{class:!0});var L=R(y);T=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(T)!=="svelte-13e8aja"&&(T.textContent=D),m=M(L),C=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(C)!=="svelte-1br206h"&&(C.textContent=b),L.forEach(v),A=M(P),P.forEach(v),this.h()},h(){f(s,"class","archive-period svelte-1jfalu6"),f(a,"class","archive-meta svelte-1jfalu6"),f(t,"class","archive-info svelte-1jfalu6"),f(T,"class","btn-icon svelte-1jfalu6"),f(T,"title","Export"),f(C,"class","btn-icon danger svelte-1jfalu6"),f(C,"title","Delete"),f(y,"class","archive-actions svelte-1jfalu6"),f(e,"class","archive-item svelte-1jfalu6")},m(F,P){j(F,e,P),c(e,t),c(t,s),c(s,i),c(t,l),c(t,a),c(a,u),c(a,d),c(a,h),c(a,_),c(e,g),c(e,y),c(y,T),c(y,m),c(y,C),c(e,A),I||(E=[W(T,"click",N),W(C,"click",S)],I=!0)},p(F,P){n=F,P&8&&r!==(r=Gs(n[27].period)+"")&&re(i,r),P&8&&o!==(o=Hs(n[27].size)+"")&&re(u,o),P&8&&p!==(p=n[27].messageCount.toLocaleString()+"")&&re(h,p)},d(F){F&&v(e),I=!1,Ie(E)}}}function _p(n){let e,t,s='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,l,a,o,u,d="Save chat history locally",p,h,_="When enabled, messages are stored in your browser. You control your data.",g,y,T,D,m,C,b,A,I,E,N=n[0]&&Ma(n);return T=new Mn({props:{isOpen:n[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:n[9],onCancel:n[10]}}),m=new Mn({props:{isOpen:n[5],title:"Delete Archive",message:`Delete archive "${Gs(n[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:n[14],onCancel:n[24]}}),b=new Mn({props:{isOpen:n[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[18],onCancel:n[25]}}),{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("div"),l=w("label"),a=w("input"),o=z(),u=w("span"),u.textContent=d,p=z(),h=w("p"),h.textContent=_,g=z(),N&&N.c(),y=z(),et(T.$$.fragment),D=z(),et(m.$$.fragment),C=z(),et(b.$$.fragment),this.h()},l(S){e=k(S,"DIV",{class:!0});var F=R(e);t=k(F,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-s9o5r3"&&(t.innerHTML=s),r=M(F),i=k(F,"DIV",{class:!0});var P=R(i);l=k(P,"LABEL",{class:!0});var O=R(l);a=k(O,"INPUT",{type:!0,class:!0}),o=M(O),u=k(O,"SPAN",{class:!0,"data-svelte-h":!0}),J(u)!=="svelte-1ssgcs1"&&(u.textContent=d),O.forEach(v),p=M(P),h=k(P,"P",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1hbmqvb"&&(h.textContent=_),P.forEach(v),g=M(F),N&&N.l(F),F.forEach(v),y=M(S),$e(T.$$.fragment,S),D=M(S),$e(m.$$.fragment,S),C=M(S),$e(b.$$.fragment,S),this.h()},h(){f(t,"class","header svelte-1jfalu6"),f(a,"type","checkbox"),f(a,"class","svelte-1jfalu6"),f(u,"class","toggle-label"),f(l,"class","toggle-setting svelte-1jfalu6"),f(h,"class","hint svelte-1jfalu6"),f(i,"class","setting-group svelte-1jfalu6"),f(e,"class","storage-settings svelte-1jfalu6")},m(S,F){j(S,e,F),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),a.checked=n[0],c(l,o),c(l,u),c(i,p),c(i,h),c(e,g),N&&N.m(e,null),j(S,y,F),Qe(T,S,F),j(S,D,F),Qe(m,S,F),j(S,C,F),Qe(b,S,F),A=!0,I||(E=[W(a,"change",n[19]),W(a,"change",n[8])],I=!0)},p(S,[F]){F&1&&(a.checked=S[0]),S[0]?N?N.p(S,F):(N=Ma(S),N.c(),N.m(e,null)):N&&(N.d(1),N=null);const P={};F&16&&(P.isOpen=S[4]),T.$set(P);const O={};F&32&&(O.isOpen=S[5]),F&64&&(O.message=`Delete archive "${Gs(S[6])}"?`),F&32&&(O.onCancel=S[24]),m.$set(O);const B={};F&128&&(B.isOpen=S[7]),F&128&&(B.onCancel=S[25]),b.$set(B)},i(S){A||(be(T.$$.fragment,S),be(m.$$.fragment,S),be(b.$$.fragment,S),A=!0)},o(S){Ce(T.$$.fragment,S),Ce(m.$$.fragment,S),Ce(b.$$.fragment,S),A=!1},d(S){S&&(v(e),v(y),v(D),v(C)),N&&N.d(),Je(T,S),Je(m,S),Je(b,S),I=!1,Ie(E)}}}function Hs(n){if(n===0)return"0 B";const e=n/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}function Gs(n){if(n.includes("-W")){const[e,t]=n.split("-W");return`Week ${t}, ${e}`}else if(n.includes("-H")){const[e,t]=n.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(n.match(/^\d{4}-\d{2}$/)){const[e,t]=n.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${n}`}function bp(n,e,t){let s=!1,r=qt.getRotationPeriod(),i=qt.getMaxArchives(),l={archives:[],totalSize:0,totalMessages:0},a=!1,o=!1,u="",d=!1;async function p(){t(0,s=!s),await qt.setEnabled(s),s?await I():t(4,a=!0)}async function h(){t(4,a=!1),await I()}function _(){t(0,s=!0),qt.setEnabled(!0),t(4,a=!1)}async function g(){await qt.setRotationPeriod(r),await I()}async function y(){await qt.setMaxArchives(i),await I()}async function T(x){t(6,u=x),t(5,o=!0)}async function D(){await qt.deleteArchive(u),await I(),t(5,o=!1)}async function m(x){await qt.exportArchive(x)}async function C(){await qt.exportArchives()}async function b(){t(7,d=!0)}async function A(){await qt.clearAllHistory(),await I(),t(7,d=!1)}async function I(){t(3,l=await qt.getStats())}function E(){s=this.checked,t(0,s)}function N(){r=Nc(this),t(1,r)}function S(){i=Yr(this.value),t(2,i)}return[s,r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b,A,E,N,S,x=>m(x.period),x=>T(x.period),()=>t(5,o=!1),()=>t(7,d=!1)]}class kp extends ht{constructor(e){super(),pt(this,e,bp,_p,dt,{})}}function Fa(n){let e,t,s,r,i="âš™ï¸ Settings",l,a,o="âœ•",u,d,p,h,_="ðŸŽ¤ Audio & Video",g,y,T,D='<span class="setting-label svelte-xjesm1">Sound Effects</span> <span class="setting-description svelte-xjesm1">Play sounds for messages and notifications</span>',m,C,b=n[1]?"ðŸ”Š":"ðŸ”‡",A,I,E,N,S='<span class="setting-label svelte-xjesm1">Microphone</span> <span class="setting-description svelte-xjesm1">Enable microphone for voice calls</span>',F,P,O=n[3]?"ðŸŽ¤":"ðŸ”‡",B,x,L,H,V='<span class="setting-label svelte-xjesm1">Camera</span> <span class="setting-description svelte-xjesm1">Enable camera for video calls</span>',U,G,Y=n[4]?"ðŸ“¹":"ðŸ“·",K,$,ee,ae,ie="ðŸ”” Notifications",de,le,te,ue='<span class="setting-label svelte-xjesm1">Desktop Notifications</span> <span class="setting-description svelte-xjesm1">Get notified when you receive new messages</span>',_e,Ee,Le=n[2]?"âœ… Enabled":"ðŸ”” Enable",ve,De,Fe,Ue,se='<span class="setting-label svelte-xjesm1">ðŸ”Š Notification Sound</span> <span class="setting-description svelte-xjesm1">Choose which sound to play for notifications</span>',Q,oe,ge,Se="ProjectSound.ogg",ze,Ne,je="ðŸŽµ Test Sound",Re,Ye,Ze,gt,yt="ðŸ”‰ Notification Volume",fe,ke,Ve,_t=Math.round(n[7]*100)+"",Pt,ne,we,tt,At,st,bt,xt="ðŸŽ¨ Appearance",sn,mt,Ot,Sn='<span class="setting-label svelte-xjesm1">Theme</span> <span class="setting-description svelte-xjesm1">Switch between light and dark mode</span>',at,Et,In=n[5]==="dark"?"ðŸŒ™":"â˜€ï¸",Dn,Nn,Kt,rn,vs="ðŸ–¥ï¸ Server Management",Mt,Ct,ln,Xn='<span class="setting-label svelte-xjesm1">Clear All Server Messages</span> <span class="setting-description svelte-xjesm1">Delete all messages from the server for all users (cannot be undone)</span>',Rn,Xt,jt="ðŸ—‘ï¸ Clear Server",xn,hn,an,qn,pn,me='<h3 class="svelte-xjesm1">â„¹ï¸ About</h3> <div class="about-info svelte-xjesm1"><p class="svelte-xjesm1"><strong class="svelte-xjesm1">Wabi Chat</strong></p> <p class="svelte-xjesm1">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-xjesm1">Server stores nothing permanently. You control your data.</p> <p class="version svelte-xjesm1">Version 1.0.0</p></div>',q,ce,pe;return an=new kp({}),{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("div"),h=w("h3"),h.textContent=_,g=z(),y=w("div"),T=w("div"),T.innerHTML=D,m=z(),C=w("button"),A=Z(b),I=z(),E=w("div"),N=w("div"),N.innerHTML=S,F=z(),P=w("button"),B=Z(O),x=z(),L=w("div"),H=w("div"),H.innerHTML=V,U=z(),G=w("button"),K=Z(Y),$=z(),ee=w("div"),ae=w("h3"),ae.textContent=ie,de=z(),le=w("div"),te=w("div"),te.innerHTML=ue,_e=z(),Ee=w("button"),ve=Z(Le),De=z(),Fe=w("div"),Ue=w("div"),Ue.innerHTML=se,Q=z(),oe=w("div"),ge=w("button"),ge.textContent=Se,ze=z(),Ne=w("button"),Ne.textContent=je,Re=z(),Ye=w("div"),Ze=w("div"),gt=w("span"),gt.textContent=yt,fe=z(),ke=w("span"),Ve=Z("Adjust the volume of notification sounds ("),Pt=Z(_t),ne=Z("%)"),we=z(),tt=w("input"),At=z(),st=w("div"),bt=w("h3"),bt.textContent=xt,sn=z(),mt=w("div"),Ot=w("div"),Ot.innerHTML=Sn,at=z(),Et=w("button"),Dn=Z(In),Nn=z(),Kt=w("div"),rn=w("h3"),rn.textContent=vs,Mt=z(),Ct=w("div"),ln=w("div"),ln.innerHTML=Xn,Rn=z(),Xt=w("button"),Xt.textContent=jt,xn=z(),hn=w("div"),et(an.$$.fragment),qn=z(),pn=w("div"),pn.innerHTML=me,this.h()},l(ye){e=k(ye,"DIV",{class:!0});var xe=R(e);t=k(xe,"DIV",{class:!0});var rt=R(t);s=k(rt,"DIV",{class:!0});var vt=R(s);r=k(vt,"H2",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-15bbpfh"&&(r.textContent=i),l=M(vt),a=k(vt,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-3o141q"&&(a.textContent=o),vt.forEach(v),u=M(rt),d=k(rt,"DIV",{class:!0});var ot=R(d);p=k(ot,"DIV",{class:!0});var St=R(p);h=k(St,"H3",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1tdb4hv"&&(h.textContent=_),g=M(St),y=k(St,"DIV",{class:!0});var _n=R(y);T=k(_n,"DIV",{class:!0,"data-svelte-h":!0}),J(T)!=="svelte-5e193f"&&(T.innerHTML=D),m=M(_n),C=k(_n,"BUTTON",{class:!0});var ut=R(C);A=X(ut,b),ut.forEach(v),_n.forEach(v),I=M(St),E=k(St,"DIV",{class:!0});var Pn=R(E);N=k(Pn,"DIV",{class:!0,"data-svelte-h":!0}),J(N)!=="svelte-ql0oob"&&(N.innerHTML=S),F=M(Pn),P=k(Pn,"BUTTON",{class:!0});var Zn=R(P);B=X(Zn,O),Zn.forEach(v),Pn.forEach(v),x=M(St),L=k(St,"DIV",{class:!0});var _s=R(L);H=k(_s,"DIV",{class:!0,"data-svelte-h":!0}),J(H)!=="svelte-fu2kxq"&&(H.innerHTML=V),U=M(_s),G=k(_s,"BUTTON",{class:!0});var mi=R(G);K=X(mi,Y),mi.forEach(v),_s.forEach(v),St.forEach(v),$=M(ot),ee=k(ot,"DIV",{class:!0});var bn=R(ee);ae=k(bn,"H3",{class:!0,"data-svelte-h":!0}),J(ae)!=="svelte-yb4801"&&(ae.textContent=ie),de=M(bn),le=k(bn,"DIV",{class:!0});var bs=R(le);te=k(bs,"DIV",{class:!0,"data-svelte-h":!0}),J(te)!=="svelte-11j8eba"&&(te.innerHTML=ue),_e=M(bs),Ee=k(bs,"BUTTON",{class:!0});var vi=R(Ee);ve=X(vi,Le),vi.forEach(v),bs.forEach(v),De=M(bn),Fe=k(bn,"DIV",{class:!0});var jn=R(Fe);Ue=k(jn,"DIV",{class:!0,"data-svelte-h":!0}),J(Ue)!=="svelte-1xiuakk"&&(Ue.innerHTML=se),Q=M(jn),oe=k(jn,"DIV",{class:!0});var _i=R(oe);ge=k(_i,"BUTTON",{class:!0,"data-svelte-h":!0}),J(ge)!=="svelte-uo9hxj"&&(ge.textContent=Se),_i.forEach(v),ze=M(jn),Ne=k(jn,"BUTTON",{class:!0,"data-svelte-h":!0}),J(Ne)!=="svelte-1g396qj"&&(Ne.textContent=je),jn.forEach(v),Re=M(bn),Ye=k(bn,"DIV",{class:!0});var ks=R(Ye);Ze=k(ks,"DIV",{class:!0});var ws=R(Ze);gt=k(ws,"SPAN",{class:!0,"data-svelte-h":!0}),J(gt)!=="svelte-wf5473"&&(gt.textContent=yt),fe=M(ws),ke=k(ws,"SPAN",{class:!0});var ys=R(ke);Ve=X(ys,"Adjust the volume of notification sounds ("),Pt=X(ys,_t),ne=X(ys,"%)"),ys.forEach(v),ws.forEach(v),we=M(ks),tt=k(ks,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ks.forEach(v),bn.forEach(v),At=M(ot),st=k(ot,"DIV",{class:!0});var Es=R(st);bt=k(Es,"H3",{class:!0,"data-svelte-h":!0}),J(bt)!=="svelte-bdq4j0"&&(bt.textContent=xt),sn=M(Es),mt=k(Es,"DIV",{class:!0});var Cs=R(mt);Ot=k(Cs,"DIV",{class:!0,"data-svelte-h":!0}),J(Ot)!=="svelte-1expsbb"&&(Ot.innerHTML=Sn),at=M(Cs),Et=k(Cs,"BUTTON",{class:!0});var bi=R(Et);Dn=X(bi,In),bi.forEach(v),Cs.forEach(v),Es.forEach(v),Nn=M(ot),Kt=k(ot,"DIV",{class:!0});var Ts=R(Kt);rn=k(Ts,"H3",{class:!0,"data-svelte-h":!0}),J(rn)!=="svelte-13bxj89"&&(rn.textContent=vs),Mt=M(Ts),Ct=k(Ts,"DIV",{class:!0});var As=R(Ct);ln=k(As,"DIV",{class:!0,"data-svelte-h":!0}),J(ln)!=="svelte-1kywvm7"&&(ln.innerHTML=Xn),Rn=M(As),Xt=k(As,"BUTTON",{class:!0,"data-svelte-h":!0}),J(Xt)!=="svelte-uzfcg3"&&(Xt.textContent=jt),As.forEach(v),Ts.forEach(v),xn=M(ot),hn=k(ot,"DIV",{class:!0});var ki=R(hn);$e(an.$$.fragment,ki),ki.forEach(v),qn=M(ot),pn=k(ot,"DIV",{class:!0,"data-svelte-h":!0}),J(pn)!=="svelte-137zy12"&&(pn.innerHTML=me),ot.forEach(v),rt.forEach(v),xe.forEach(v),this.h()},h(){f(r,"class","svelte-xjesm1"),f(a,"class","close-btn svelte-xjesm1"),f(s,"class","modal-header svelte-xjesm1"),f(h,"class","svelte-xjesm1"),f(T,"class","setting-info svelte-xjesm1"),f(C,"class","toggle-btn svelte-xjesm1"),he(C,"active",n[1]),f(y,"class","setting-item svelte-xjesm1"),f(N,"class","setting-info svelte-xjesm1"),f(P,"class","toggle-btn svelte-xjesm1"),he(P,"active",n[3]),f(E,"class","setting-item svelte-xjesm1"),f(H,"class","setting-info svelte-xjesm1"),f(G,"class","toggle-btn svelte-xjesm1"),he(G,"active",n[4]),f(L,"class","setting-item svelte-xjesm1"),f(p,"class","settings-section svelte-xjesm1"),f(ae,"class","svelte-xjesm1"),f(te,"class","setting-info svelte-xjesm1"),f(Ee,"class","action-btn svelte-xjesm1"),he(Ee,"active",n[2]),f(le,"class","setting-item svelte-xjesm1"),f(Ue,"class","setting-info svelte-xjesm1"),f(ge,"class","sound-option svelte-xjesm1"),he(ge,"active",n[6]==="/sounds/ProjectSound.ogg"),f(oe,"class","sound-options svelte-xjesm1"),f(Ne,"class","test-sound-btn svelte-xjesm1"),f(Fe,"class","setting-item-full svelte-xjesm1"),f(gt,"class","setting-label svelte-xjesm1"),f(ke,"class","setting-description svelte-xjesm1"),f(Ze,"class","setting-info svelte-xjesm1"),f(tt,"type","range"),f(tt,"min","0"),f(tt,"max","1"),f(tt,"step","0.05"),f(tt,"class","volume-slider svelte-xjesm1"),f(Ye,"class","setting-item-full svelte-xjesm1"),f(ee,"class","settings-section svelte-xjesm1"),f(bt,"class","svelte-xjesm1"),f(Ot,"class","setting-info svelte-xjesm1"),f(Et,"class","toggle-btn svelte-xjesm1"),he(Et,"active",n[5]==="light"),f(mt,"class","setting-item svelte-xjesm1"),f(st,"class","settings-section svelte-xjesm1"),f(rn,"class","svelte-xjesm1"),f(ln,"class","setting-info svelte-xjesm1"),f(Xt,"class","action-btn danger svelte-xjesm1"),f(Ct,"class","setting-item svelte-xjesm1"),f(Kt,"class","settings-section svelte-xjesm1"),f(hn,"class","settings-section svelte-xjesm1"),f(pn,"class","settings-section svelte-xjesm1"),f(d,"class","settings-sections svelte-xjesm1"),f(t,"class","modal-content svelte-xjesm1"),f(e,"class","modal-overlay svelte-xjesm1")},m(ye,xe){j(ye,e,xe),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(p,g),c(p,y),c(y,T),c(y,m),c(y,C),c(C,A),c(p,I),c(p,E),c(E,N),c(E,F),c(E,P),c(P,B),c(p,x),c(p,L),c(L,H),c(L,U),c(L,G),c(G,K),c(d,$),c(d,ee),c(ee,ae),c(ee,de),c(ee,le),c(le,te),c(le,_e),c(le,Ee),c(Ee,ve),c(ee,De),c(ee,Fe),c(Fe,Ue),c(Fe,Q),c(Fe,oe),c(oe,ge),c(Fe,ze),c(Fe,Ne),c(ee,Re),c(ee,Ye),c(Ye,Ze),c(Ze,gt),c(Ze,fe),c(Ze,ke),c(ke,Ve),c(ke,Pt),c(ke,ne),c(Ye,we),c(Ye,tt),nt(tt,n[7]),c(d,At),c(d,st),c(st,bt),c(st,sn),c(st,mt),c(mt,Ot),c(mt,at),c(mt,Et),c(Et,Dn),c(d,Nn),c(d,Kt),c(Kt,rn),c(Kt,Mt),c(Kt,Ct),c(Ct,ln),c(Ct,Rn),c(Ct,Xt),c(d,xn),c(d,hn),Qe(an,hn,null),c(d,qn),c(d,pn),q=!0,ce||(pe=[W(a,"click",n[21]),W(C,"click",n[10]),W(P,"click",n[11]),W(G,"click",n[12]),W(Ee,"click",n[17]),W(ge,"click",n[23]),W(Ne,"click",n[16]),W(tt,"change",n[24]),W(tt,"input",n[24]),W(tt,"input",n[25]),W(Et,"click",n[13]),W(Xt,"click",n[19]),W(t,"click",lt(n[22])),W(e,"click",n[21])],ce=!0)},p(ye,xe){(!q||xe[0]&2)&&b!==(b=ye[1]?"ðŸ”Š":"ðŸ”‡")&&re(A,b),(!q||xe[0]&2)&&he(C,"active",ye[1]),(!q||xe[0]&8)&&O!==(O=ye[3]?"ðŸŽ¤":"ðŸ”‡")&&re(B,O),(!q||xe[0]&8)&&he(P,"active",ye[3]),(!q||xe[0]&16)&&Y!==(Y=ye[4]?"ðŸ“¹":"ðŸ“·")&&re(K,Y),(!q||xe[0]&16)&&he(G,"active",ye[4]),(!q||xe[0]&4)&&Le!==(Le=ye[2]?"âœ… Enabled":"ðŸ”” Enable")&&re(ve,Le),(!q||xe[0]&4)&&he(Ee,"active",ye[2]),(!q||xe[0]&64)&&he(ge,"active",ye[6]==="/sounds/ProjectSound.ogg"),(!q||xe[0]&128)&&_t!==(_t=Math.round(ye[7]*100)+"")&&re(Pt,_t),xe[0]&128&&nt(tt,ye[7]),(!q||xe[0]&32)&&In!==(In=ye[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&re(Dn,In),(!q||xe[0]&32)&&he(Et,"active",ye[5]==="light")},i(ye){q||(be(an.$$.fragment,ye),q=!0)},o(ye){Ce(an.$$.fragment,ye),q=!1},d(ye){ye&&v(e),Je(an),ce=!1,Ie(pe)}}}function wp(n){let e,t,s,r,i,l=n[0]&&Fa(n);return t=new Mn({props:{isOpen:n[8],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:n[18],onCancel:n[26]}}),r=new Mn({props:{isOpen:n[9],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[20],onCancel:n[27]}}),{c(){l&&l.c(),e=z(),et(t.$$.fragment),s=z(),et(r.$$.fragment)},l(a){l&&l.l(a),e=M(a),$e(t.$$.fragment,a),s=M(a),$e(r.$$.fragment,a)},m(a,o){l&&l.m(a,o),j(a,e,o),Qe(t,a,o),j(a,s,o),Qe(r,a,o),i=!0},p(a,o){a[0]?l?(l.p(a,o),o[0]&1&&be(l,1)):(l=Fa(a),l.c(),be(l,1),l.m(e.parentNode,e)):l&&(En(),Ce(l,1,1,()=>{l=null}),Cn());const u={};o[0]&256&&(u.isOpen=a[8]),o[0]&256&&(u.onCancel=a[26]),t.$set(u);const d={};o[0]&512&&(d.isOpen=a[9]),o[0]&512&&(d.onCancel=a[27]),r.$set(d)},i(a){i||(be(l),be(t.$$.fragment,a),be(r.$$.fragment,a),i=!0)},o(a){Ce(l),Ce(t.$$.fragment,a),Ce(r.$$.fragment,a),i=!1},d(a){a&&(v(e),v(s)),l&&l.d(a),Je(t,a),Je(r,a)}}}function yp(n,e,t){Pe(n,dn,L=>t(28,L)),Pe(n,Ht,L=>t(29,L)),Pe(n,Tt,L=>t(30,L));let{isOpen:s=!1}=e,r=!0,i=!0,l=!0,a=!0,o="dark",u="/sounds/ProjectSound.ogg",d=.5,p=!1,h=!1;function _(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function g(){t(3,l=!l),localStorage.setItem("micEnabled",l.toString())}function y(){t(4,a=!a),localStorage.setItem("cameraEnabled",a.toString())}function T(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}function D(L){t(6,u=L),localStorage.setItem("notificationSound",L)}function m(L){t(7,d=L),localStorage.setItem("notificationVolume",L.toString())}function C(){Ko()}async function b(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}function A(){Tt.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(8,p=!1)}async function I(){t(9,h=!0)}async function E(){try{const L=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,V=await(await fetch(`${L}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();V.success?(Tt.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(V.error||"Unknown error"))}catch(L){console.error("Error clearing server messages:",L),alert("Failed to clear server messages. Check console for details.")}t(9,h=!1)}function N(){t(0,s=!1)}function S(L){Wt.call(this,n,L)}const F=()=>D("/sounds/ProjectSound.ogg");function P(){d=Yr(this.value),t(7,d)}const O=L=>m(parseFloat(L.currentTarget.value)),B=()=>t(8,p=!1),x=()=>t(9,h=!1);return n.$$set=L=>{"isOpen"in L&&t(0,s=L.isOpen)},[s,r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b,A,I,E,N,S,F,P,O,B,x]}class Ep extends ht{constructor(e){super(),pt(this,e,yp,wp,dt,{isOpen:0},null,[-1,-1])}}function Ba(n,e,t){const s=n.slice();return s[16]=e[t],s}function La(n){let e,t,s,r,i,l,a,o,u="Ã—",d,p,h,_;function g(D,m){return D[2].length===0?Tp:Cp}let y=g(n),T=y(n);return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),i=Z("ðŸ“Œ Pinned Messages in #"),l=Z(n[1]),a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),T.c(),this.h()},l(D){e=k(D,"DIV",{class:!0});var m=R(e);t=k(m,"DIV",{class:!0});var C=R(t);s=k(C,"DIV",{class:!0});var b=R(s);r=k(b,"H2",{class:!0});var A=R(r);i=X(A,"ðŸ“Œ Pinned Messages in #"),l=X(A,n[1]),A.forEach(v),a=M(b),o=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-12zniqk"&&(o.textContent=u),b.forEach(v),d=M(C),p=k(C,"DIV",{class:!0});var I=R(p);T.l(I),I.forEach(v),C.forEach(v),m.forEach(v),this.h()},h(){f(r,"class","svelte-178cyr5"),f(o,"class","close-btn svelte-178cyr5"),f(s,"class","modal-header svelte-178cyr5"),f(p,"class","modal-body svelte-178cyr5"),f(t,"class","modal-content svelte-178cyr5"),f(e,"class","modal-overlay svelte-178cyr5")},m(D,m){j(D,e,m),c(e,t),c(t,s),c(s,r),c(r,i),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),T.m(p,null),h||(_=[W(o,"click",n[3]),W(t,"click",lt(n[10])),W(e,"click",n[3])],h=!0)},p(D,m){m&2&&re(l,D[1]),y===(y=g(D))&&T?T.p(D,m):(T.d(1),T=y(D),T&&(T.c(),T.m(p,null)))},d(D){D&&v(e),T.d(),h=!1,Ie(_)}}}function Cp(n){let e,t=[],s=new Map,r=Xe(n[2]);const i=l=>l[16].id;for(let l=0;l<r.length;l+=1){let a=Ba(n,r,l),o=i(a);s.set(o,t[l]=Ua(o,a))}return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(v),this.h()},h(){f(e,"class","pinned-messages-list svelte-178cyr5")},m(l,a){j(l,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,a){a&116&&(r=Xe(l[2]),t=nn(t,a,i,1,l,r,s,e,tn,Ua,null,Ba))},d(l){l&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Tp(n){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-178cyr5")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function Ua(n,e){let t,s,r,i,l=e[16].user+"",a,o,u,d=xa(e[16].timestamp)+"",p,h,_,g,y="Jump to",T,D,m="Unpin",C,b,A=e[16].text+"",I,E,N,S;function F(){return e[11](e[16])}function P(){return e[12](e[16])}return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("div"),i=w("span"),a=Z(l),o=z(),u=w("span"),p=Z(d),h=z(),_=w("div"),g=w("button"),g.textContent=y,T=z(),D=w("button"),D.textContent=m,C=z(),b=w("div"),I=Z(A),E=z(),this.h()},l(O){t=k(O,"DIV",{class:!0});var B=R(t);s=k(B,"DIV",{class:!0});var x=R(s);r=k(x,"DIV",{class:!0});var L=R(r);i=k(L,"SPAN",{class:!0,style:!0});var H=R(i);a=X(H,l),H.forEach(v),o=M(L),u=k(L,"SPAN",{class:!0});var V=R(u);p=X(V,d),V.forEach(v),L.forEach(v),h=M(x),_=k(x,"DIV",{class:!0});var U=R(_);g=k(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(g)!=="svelte-1nadwym"&&(g.textContent=y),T=M(U),D=k(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(D)!=="svelte-eqnabo"&&(D.textContent=m),U.forEach(v),x.forEach(v),C=M(B),b=k(B,"DIV",{class:!0});var G=R(b);I=X(G,A),G.forEach(v),E=M(B),B.forEach(v),this.h()},h(){f(i,"class","username svelte-178cyr5"),Te(i,"color",e[6](e[16].user)),f(u,"class","timestamp svelte-178cyr5"),f(r,"class","user-info svelte-178cyr5"),f(g,"class","jump-btn svelte-178cyr5"),f(g,"title","Jump to message"),f(D,"class","unpin-btn svelte-178cyr5"),f(D,"title","Unpin message"),f(_,"class","action-buttons svelte-178cyr5"),f(s,"class","message-header svelte-178cyr5"),f(b,"class","message-text svelte-178cyr5"),f(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(O,B){j(O,t,B),c(t,s),c(s,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(s,h),c(s,_),c(_,g),c(_,T),c(_,D),c(t,C),c(t,b),c(b,I),c(t,E),N||(S=[W(g,"click",F),W(D,"click",P)],N=!0)},p(O,B){e=O,B&4&&l!==(l=e[16].user+"")&&re(a,l),B&4&&Te(i,"color",e[6](e[16].user)),B&4&&d!==(d=xa(e[16].timestamp)+"")&&re(p,d),B&4&&A!==(A=e[16].text+"")&&re(I,A)},d(O){O&&v(t),N=!1,Ie(S)}}}function Ap(n){let e,t=n[0]&&La(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=La(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function xa(n){return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Sp(n,e,t){let s,r,i,l,a;Pe(n,Ht,m=>t(13,i=m)),Pe(n,Bt,m=>t(8,l=m)),Pe(n,Tt,m=>t(9,a=m));let{isOpen:o=!1}=e,{channelId:u=""}=e;function d(){t(0,o=!1)}function p(m){ui(u,m)}function h(m){d(),setTimeout(()=>{const C=document.getElementById(`message-${m}`);C&&(C.scrollIntoView({behavior:"smooth",block:"center"}),C.classList.add("highlighted"),setTimeout(()=>{C.classList.remove("highlighted")},2e3))},100)}function _(m){return i.find(C=>C.username===m)}function g(m){return _(m)?.color||"var(--status-offline)"}function y(m){Wt.call(this,n,m)}const T=m=>h(m.id),D=m=>p(m.id);return n.$$set=m=>{"isOpen"in m&&t(0,o=m.isOpen),"channelId"in m&&t(7,u=m.channelId)},n.$$.update=()=>{n.$$.dirty&640&&t(2,s=(a[u]||[]).filter(m=>m.isPinned)),n.$$.dirty&384&&t(1,r=l.find(m=>m.id===u)?.name||u)},[o,r,s,d,p,h,g,u,l,a,y,T,D]}class Ip extends ht{constructor(e){super(),pt(this,e,Sp,Ap,dt,{isOpen:0,channelId:7})}}function qa(n,e,t){const s=n.slice();return s[63]=e[t],s}function ja(n,e,t){const s=n.slice();return s[63]=e[t],s}function Va(n,e,t){const s=n.slice();return s[63]=e[t],s}function Ha(n){let e,t,s,r,i="Create",l,a;return{c(){e=w("div"),t=w("input"),s=z(),r=w("button"),r.textContent=i,this.h()},l(o){e=k(o,"DIV",{class:!0});var u=R(e);t=k(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=M(u),r=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(v),this.h()},h(){f(t,"type","text"),f(t,"placeholder","channel-name"),t.autofocus=!0,f(t,"class","svelte-1c11uqn"),f(r,"class","svelte-1c11uqn"),f(e,"class","create-channel svelte-1c11uqn")},m(o,u){j(o,e,u),c(e,t),nt(t,n[1]),c(e,s),c(e,r),t.focus(),l||(a=[W(t,"input",n[30]),W(t,"keydown",n[31]),W(r,"click",n[19])],l=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&nt(t,o[1])},d(o){o&&v(e),l=!1,Ie(a)}}}function Ga(n){let e,t,s;return{c(){e=w("span"),t=Z("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=X(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){j(r,e,i),c(e,t)},p(r,i){i[0]&32768&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function Wa(n){let e,t="Ã—",s,r;function i(){return n[35](n[63])}return{c(){e=w("button"),e.textContent=t,this.h()},l(l){e=k(l,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn svelte-1c11uqn")},m(l,a){j(l,e,a),s||(r=W(e,"click",lt(i)),s=!0)},p(l,a){n=l},d(l){l&&v(e),s=!1,r()}}}function Ya(n,e){let t,s,r,i="#",l,a=e[63].name+"",o,u,d,p,h,_="âš™ï¸",g,y,T="ðŸ“Œ",D,m,C,b,A=e[63].autoDeleteAfter&&Ga(e);function I(){return e[32](e[63])}function E(){return e[33](e[63])}function N(){return e[34](e[63])}let S=e[63].id!=="general"&&Wa(e);return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=Z(a),u=z(),A&&A.c(),d=z(),p=w("div"),h=w("button"),h.textContent=_,g=z(),y=w("button"),y.textContent=T,D=z(),S&&S.c(),m=z(),this.h()},l(F){t=k(F,"DIV",{class:!0});var P=R(t);s=k(P,"BUTTON",{class:!0});var O=R(s);r=k(O,"SPAN",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-16vlh54"&&(r.textContent=i),l=M(O),o=X(O,a),u=M(O),A&&A.l(O),O.forEach(v),d=M(P),p=k(P,"DIV",{class:!0});var B=R(p);h=k(B,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(h)!=="svelte-17mbiia"&&(h.textContent=_),g=M(B),y=k(B,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(y)!=="svelte-18aqzoy"&&(y.textContent=T),D=M(B),S&&S.l(B),B.forEach(v),m=M(P),P.forEach(v),this.h()},h(){f(r,"class","hash svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(F,P){j(F,t,P),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),A&&A.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,D),S&&S.m(p,null),c(t,m),C||(b=[W(s,"click",I),W(h,"click",lt(E)),W(y,"click",lt(N))],C=!0)},p(F,P){e=F,P[0]&32768&&a!==(a=e[63].name+"")&&re(o,a),e[63].autoDeleteAfter?A?A.p(e,P):(A=Ga(e),A.c(),A.m(s,null)):A&&(A.d(1),A=null),e[63].id!=="general"?S?S.p(e,P):(S=Wa(e),S.c(),S.m(p,null)):S&&(S.d(1),S=null),P[0]&98304&&he(t,"active",e[16]===e[63].id)},d(F){F&&v(t),A&&A.d(),S&&S.d(),C=!1,Ie(b)}}}function Ka(n){let e,t="Direct Messages",s,r=[],i=new Map,l,a=Xe(n[14]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=ja(n,a,u),p=o(d);i.set(p,r[u]=Za(p,d))}return{c(){e=w("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Me(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-r1afib"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Me(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){j(u,e,d),j(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);j(u,l,d)},p(u,d){d[0]&13975552&&(a=Xe(u[14]),r=nn(r,d,o,1,u,a,i,l.parentNode,tn,Za,l,ja))},d(u){u&&(v(e),v(s),v(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function Xa(n){let e,t,s;return{c(){e=w("span"),t=Z("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=X(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){j(r,e,i),c(e,t)},p(r,i){i[0]&16384&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function Za(n,e){let t,s,r,i="ðŸ’¬",l,a=e[63].name+"",o,u,d,p,h,_="âš™ï¸",g,y,T="ðŸ“Œ",D,m,C="Ã—",b,A,I,E=e[63].autoDeleteAfter&&Xa(e);function N(){return e[36](e[63])}function S(){return e[37](e[63])}function F(){return e[38](e[63])}function P(){return e[39](e[63])}return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=Z(a),u=z(),E&&E.c(),d=z(),p=w("div"),h=w("button"),h.textContent=_,g=z(),y=w("button"),y.textContent=T,D=z(),m=w("button"),m.textContent=C,b=z(),this.h()},l(O){t=k(O,"DIV",{class:!0});var B=R(t);s=k(B,"BUTTON",{class:!0});var x=R(s);r=k(x,"SPAN",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-q0xuov"&&(r.textContent=i),l=M(x),o=X(x,a),u=M(x),E&&E.l(x),x.forEach(v),d=M(B),p=k(B,"DIV",{class:!0});var L=R(p);h=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(h)!=="svelte-17mbiia"&&(h.textContent=_),g=M(L),y=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(y)!=="svelte-18aqzoy"&&(y.textContent=T),D=M(L),m=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-12rgdhl"&&(m.textContent=C),L.forEach(v),b=M(B),B.forEach(v),this.h()},h(){f(r,"class","dm-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(O,B){j(O,t,B),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,D),c(p,m),c(t,b),A||(I=[W(s,"click",N),W(h,"click",lt(S)),W(y,"click",lt(F)),W(m,"click",lt(P))],A=!0)},p(O,B){e=O,B[0]&16384&&a!==(a=e[63].name+"")&&re(o,a),e[63].autoDeleteAfter?E?E.p(e,B):(E=Xa(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),B[0]&81920&&he(t,"active",e[16]===e[63].id)},d(O){O&&v(t),E&&E.d(),A=!1,Ie(I)}}}function Ja(n){let e,t="Group Chats",s,r=[],i=new Map,l,a=Xe(n[13]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=qa(n,a,u),p=o(d);i.set(p,r[u]=$a(p,d))}return{c(){e=w("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Me(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1fof55m"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Me(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){j(u,e,d),j(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);j(u,l,d)},p(u,d){d[0]&13967360&&(a=Xe(u[13]),r=nn(r,d,o,1,u,a,i,l.parentNode,tn,$a,l,qa))},d(u){u&&(v(e),v(s),v(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function Qa(n){let e,t,s;return{c(){e=w("span"),t=Z("â±ï¸"),this.h()},l(r){e=k(r,"SPAN",{class:!0,title:!0});var i=R(e);t=X(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){j(r,e,i),c(e,t)},p(r,i){i[0]&8192&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function $a(n,e){let t,s,r,i="ðŸ‘¥",l,a=e[63].name+"",o,u,d,p,h,_="âš™ï¸",g,y,T="ðŸ“Œ",D,m,C="Ã—",b,A,I,E=e[63].autoDeleteAfter&&Qa(e);function N(){return e[40](e[63])}function S(){return e[41](e[63])}function F(){return e[42](e[63])}function P(){return e[43](e[63])}return{key:n,first:null,c(){t=w("div"),s=w("button"),r=w("span"),r.textContent=i,l=z(),o=Z(a),u=z(),E&&E.c(),d=z(),p=w("div"),h=w("button"),h.textContent=_,g=z(),y=w("button"),y.textContent=T,D=z(),m=w("button"),m.textContent=C,b=z(),this.h()},l(O){t=k(O,"DIV",{class:!0});var B=R(t);s=k(B,"BUTTON",{class:!0});var x=R(s);r=k(x,"SPAN",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-4z5ugu"&&(r.textContent=i),l=M(x),o=X(x,a),u=M(x),E&&E.l(x),x.forEach(v),d=M(B),p=k(B,"DIV",{class:!0});var L=R(p);h=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(h)!=="svelte-17mbiia"&&(h.textContent=_),g=M(L),y=k(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(y)!=="svelte-18aqzoy"&&(y.textContent=T),D=M(L),m=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-12rgdhl"&&(m.textContent=C),L.forEach(v),b=M(B),B.forEach(v),this.h()},h(){f(r,"class","group-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(O,B){j(O,t,B),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,D),c(p,m),c(t,b),A||(I=[W(s,"click",N),W(h,"click",lt(S)),W(y,"click",lt(F)),W(m,"click",lt(P))],A=!0)},p(O,B){e=O,B[0]&8192&&a!==(a=e[63].name+"")&&re(o,a),e[63].autoDeleteAfter?E?E.p(e,B):(E=Qa(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),B[0]&73728&&he(t,"active",e[16]===e[63].id)},d(O){O&&v(t),E&&E.d(),A=!1,Ie(I)}}}function eo(n){let e,t,s,r,i,l,a,o,u=n[17].username+"",d,p,h,_,g=n[17].id.slice(0,4)+"",y,T,D,m,C=n[4]?"ðŸ”‡":"ðŸŽ¤",b,A,I,E,N=n[5]?"ðŸ”‡":"ðŸŽ§",S,F,P,O,B="âš™ï¸",x,L;function H(G,Y){return G[17].profilePicture?Np:Dp}let V=H(n),U=V(n);return{c(){e=w("div"),t=w("button"),s=w("div"),U.c(),r=z(),i=w("div"),l=z(),a=w("div"),o=w("div"),d=Z(u),p=z(),h=w("div"),_=Z("#"),y=Z(g),T=z(),D=w("div"),m=w("button"),b=Z(C),I=z(),E=w("button"),S=Z(N),P=z(),O=w("button"),O.textContent=B,this.h()},l(G){e=k(G,"DIV",{class:!0});var Y=R(e);t=k(Y,"BUTTON",{class:!0});var K=R(t);s=k(K,"DIV",{class:!0});var $=R(s);U.l($),r=M($),i=k($,"DIV",{class:!0}),R(i).forEach(v),$.forEach(v),l=M(K),a=k(K,"DIV",{class:!0});var ee=R(a);o=k(ee,"DIV",{class:!0});var ae=R(o);d=X(ae,u),ae.forEach(v),p=M(ee),h=k(ee,"DIV",{class:!0});var ie=R(h);_=X(ie,"#"),y=X(ie,g),ie.forEach(v),ee.forEach(v),K.forEach(v),T=M(Y),D=k(Y,"DIV",{class:!0});var de=R(D);m=k(de,"BUTTON",{class:!0,title:!0});var le=R(m);b=X(le,C),le.forEach(v),I=M(de),E=k(de,"BUTTON",{class:!0,title:!0});var te=R(E);S=X(te,N),te.forEach(v),P=M(de),O=k(de,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(O)!=="svelte-18txcln"&&(O.textContent=B),de.forEach(v),Y.forEach(v),this.h()},h(){f(i,"class","status-indicator svelte-1c11uqn"),he(i,"online",n[17].status==="active"),he(i,"away",n[17].status==="away"),he(i,"busy",n[17].status==="busy"),f(s,"class","avatar-container svelte-1c11uqn"),f(o,"class","username svelte-1c11uqn"),f(h,"class","user-tag svelte-1c11uqn"),f(a,"class","user-details svelte-1c11uqn"),f(t,"class","profile-info svelte-1c11uqn"),f(m,"class","control-btn svelte-1c11uqn"),f(m,"title",A=n[4]?"Unmute":"Mute"),he(m,"active",n[4]),f(E,"class","control-btn svelte-1c11uqn"),f(E,"title",F=n[5]?"Undeafen":"Deafen"),he(E,"active",n[5]),f(O,"class","control-btn svelte-1c11uqn"),f(O,"title","User Settings"),f(D,"class","profile-controls svelte-1c11uqn"),f(e,"class","profile-card svelte-1c11uqn")},m(G,Y){j(G,e,Y),c(e,t),c(t,s),U.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,_),c(h,y),c(e,T),c(e,D),c(D,m),c(m,b),c(D,I),c(D,E),c(E,S),c(D,P),c(D,O),x||(L=[W(t,"click",n[25]),W(m,"click",n[44]),W(E,"click",n[45]),W(O,"click",n[46])],x=!0)},p(G,Y){V===(V=H(G))&&U?U.p(G,Y):(U.d(1),U=V(G),U&&(U.c(),U.m(s,r))),Y[0]&131072&&he(i,"online",G[17].status==="active"),Y[0]&131072&&he(i,"away",G[17].status==="away"),Y[0]&131072&&he(i,"busy",G[17].status==="busy"),Y[0]&131072&&u!==(u=G[17].username+"")&&re(d,u),Y[0]&131072&&g!==(g=G[17].id.slice(0,4)+"")&&re(y,g),Y[0]&16&&C!==(C=G[4]?"ðŸ”‡":"ðŸŽ¤")&&re(b,C),Y[0]&16&&A!==(A=G[4]?"Unmute":"Mute")&&f(m,"title",A),Y[0]&16&&he(m,"active",G[4]),Y[0]&32&&N!==(N=G[5]?"ðŸ”‡":"ðŸŽ§")&&re(S,N),Y[0]&32&&F!==(F=G[5]?"Undeafen":"Deafen")&&f(E,"title",F),Y[0]&32&&he(E,"active",G[5])},d(G){G&&v(e),U.d(),x=!1,Ie(L)}}}function Dp(n){let e,t=n[17].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-1c11uqn"),Te(e,"background-color",n[17].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i[0]&131072&&t!==(t=r[17].username.charAt(0).toUpperCase()+"")&&re(s,t),i[0]&131072&&Te(e,"background-color",r[17].color)},d(r){r&&v(e)}}}function Np(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[17].profilePicture)||f(e,"src",t),f(e,"alt",s=n[17].username),f(e,"class","avatar svelte-1c11uqn")},m(r,i){j(r,e,i)},p(r,i){i[0]&131072&&!He(e.src,t=r[17].profilePicture)&&f(e,"src",t),i[0]&131072&&s!==(s=r[17].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function to(n){let e,t,s,r,i="âš™ï¸ Channel Settings",l,a,o="Ã—",u,d,p,h,_,g=n[12].name+"",y,T,D,m,C="Auto-Delete Messages",b,A,I="Automatically delete messages after a set period of time",E,N,S,F="Disabled",P,O,B="1 Hour",x,L,H="6 Hours",V,U,G="12 Hours",Y,K,$="1 Day",ee,ae,ie="3 Days",de,le,te="7 Days",ue,_e,Ee="14 Days",Le,ve,De="30 Days",Fe,Ue;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),r.textContent=i,l=z(),a=w("button"),a.textContent=o,u=z(),d=w("div"),p=w("div"),h=w("h3"),_=Z("Channel: #"),y=Z(g),T=z(),D=w("div"),m=w("label"),m.textContent=C,b=z(),A=w("p"),A.textContent=I,E=z(),N=w("div"),S=w("button"),S.textContent=F,P=z(),O=w("button"),O.textContent=B,x=z(),L=w("button"),L.textContent=H,V=z(),U=w("button"),U.textContent=G,Y=z(),K=w("button"),K.textContent=$,ee=z(),ae=w("button"),ae.textContent=ie,de=z(),le=w("button"),le.textContent=te,ue=z(),_e=w("button"),_e.textContent=Ee,Le=z(),ve=w("button"),ve.textContent=De,this.h()},l(se){e=k(se,"DIV",{class:!0});var Q=R(e);t=k(Q,"DIV",{class:!0});var oe=R(t);s=k(oe,"DIV",{class:!0});var ge=R(s);r=k(ge,"H2",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-gucqu6"&&(r.textContent=i),l=M(ge),a=k(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-1eq7ufx"&&(a.textContent=o),ge.forEach(v),u=M(oe),d=k(oe,"DIV",{class:!0});var Se=R(d);p=k(Se,"DIV",{class:!0});var ze=R(p);h=k(ze,"H3",{class:!0});var Ne=R(h);_=X(Ne,"Channel: #"),y=X(Ne,g),Ne.forEach(v),T=M(ze),D=k(ze,"DIV",{class:!0});var je=R(D);m=k(je,"LABEL",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-ryy261"&&(m.textContent=C),b=M(je),A=k(je,"P",{class:!0,"data-svelte-h":!0}),J(A)!=="svelte-1tt2qq4"&&(A.textContent=I),E=M(je),N=k(je,"DIV",{class:!0});var Re=R(N);S=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(S)!=="svelte-uqphio"&&(S.textContent=F),P=M(Re),O=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(O)!=="svelte-1nt1au0"&&(O.textContent=B),x=M(Re),L=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(L)!=="svelte-1gtmi8"&&(L.textContent=H),V=M(Re),U=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(U)!=="svelte-1notbsz"&&(U.textContent=G),Y=M(Re),K=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(K)!=="svelte-9g0opm"&&(K.textContent=$),ee=M(Re),ae=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(ae)!=="svelte-1lvi2x3"&&(ae.textContent=ie),de=M(Re),le=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(le)!=="svelte-1rb14zv"&&(le.textContent=te),ue=M(Re),_e=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(_e)!=="svelte-1i8t5rl"&&(_e.textContent=Ee),Le=M(Re),ve=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),J(ve)!=="svelte-1snshdf"&&(ve.textContent=De),Re.forEach(v),je.forEach(v),ze.forEach(v),Se.forEach(v),oe.forEach(v),Q.forEach(v),this.h()},h(){f(r,"class","svelte-1c11uqn"),f(a,"class","close-btn svelte-1c11uqn"),f(s,"class","modal-header svelte-1c11uqn"),f(h,"class","svelte-1c11uqn"),f(m,"class","svelte-1c11uqn"),f(A,"class","setting-description svelte-1c11uqn"),f(S,"class","auto-delete-btn svelte-1c11uqn"),he(S,"active",!n[12].autoDeleteAfter),f(O,"class","auto-delete-btn svelte-1c11uqn"),he(O,"active",n[12].autoDeleteAfter==="1h"),f(L,"class","auto-delete-btn svelte-1c11uqn"),he(L,"active",n[12].autoDeleteAfter==="6h"),f(U,"class","auto-delete-btn svelte-1c11uqn"),he(U,"active",n[12].autoDeleteAfter==="12h"),f(K,"class","auto-delete-btn svelte-1c11uqn"),he(K,"active",n[12].autoDeleteAfter==="24h"),f(ae,"class","auto-delete-btn svelte-1c11uqn"),he(ae,"active",n[12].autoDeleteAfter==="3d"),f(le,"class","auto-delete-btn svelte-1c11uqn"),he(le,"active",n[12].autoDeleteAfter==="7d"),f(_e,"class","auto-delete-btn svelte-1c11uqn"),he(_e,"active",n[12].autoDeleteAfter==="14d"),f(ve,"class","auto-delete-btn svelte-1c11uqn"),he(ve,"active",n[12].autoDeleteAfter==="30d"),f(N,"class","auto-delete-options svelte-1c11uqn"),f(D,"class","setting-group svelte-1c11uqn"),f(p,"class","setting-section svelte-1c11uqn"),f(d,"class","modal-body svelte-1c11uqn"),f(t,"class","modal-content svelte-1c11uqn"),f(e,"class","modal-overlay svelte-1c11uqn")},m(se,Q){j(se,e,Q),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(h,_),c(h,y),c(p,T),c(p,D),c(D,m),c(D,b),c(D,A),c(D,E),c(D,N),c(N,S),c(N,P),c(N,O),c(N,x),c(N,L),c(N,V),c(N,U),c(N,Y),c(N,K),c(N,ee),c(N,ae),c(N,de),c(N,le),c(N,ue),c(N,_e),c(N,Le),c(N,ve),Fe||(Ue=[W(a,"click",n[52]),W(S,"click",n[53]),W(O,"click",n[54]),W(L,"click",n[55]),W(U,"click",n[56]),W(K,"click",n[57]),W(ae,"click",n[58]),W(le,"click",n[59]),W(_e,"click",n[60]),W(ve,"click",n[61]),W(t,"click",lt(n[27])),W(e,"click",n[62])],Fe=!0)},p(se,Q){Q[0]&4096&&g!==(g=se[12].name+"")&&re(y,g),Q[0]&4096&&he(S,"active",!se[12].autoDeleteAfter),Q[0]&4096&&he(O,"active",se[12].autoDeleteAfter==="1h"),Q[0]&4096&&he(L,"active",se[12].autoDeleteAfter==="6h"),Q[0]&4096&&he(U,"active",se[12].autoDeleteAfter==="12h"),Q[0]&4096&&he(K,"active",se[12].autoDeleteAfter==="24h"),Q[0]&4096&&he(ae,"active",se[12].autoDeleteAfter==="3d"),Q[0]&4096&&he(le,"active",se[12].autoDeleteAfter==="7d"),Q[0]&4096&&he(_e,"active",se[12].autoDeleteAfter==="14d"),Q[0]&4096&&he(ve,"active",se[12].autoDeleteAfter==="30d")},d(se){se&&v(e),Fe=!1,Ie(Ue)}}}function Rp(n){let e,t,s='<div class="logo svelte-1c11uqn"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-1c11uqn"/></div>',r,i,l,a="Text Channels",o,u,d,p="ðŸ“º",h,_,g="+",y,T,D,m=[],C=new Map,b,A,I,E,N,S,F,P,O,B,x,L,H,V,U,G,Y,K,$,ee,ae=n[2]&&Ha(n),ie=Xe(n[15]);const de=Q=>Q[63].id;for(let Q=0;Q<ie.length;Q+=1){let oe=Va(n,ie,Q),ge=de(oe);C.set(ge,m[Q]=Ya(ge,oe))}let le=n[14].length>0&&Ka(n),te=n[13].length>0&&Ja(n),ue=n[17]&&eo(n);function _e(Q){n[47](Q)}let Ee={};n[3]!==void 0&&(Ee.isOpen=n[3]),N=new Ep({props:Ee}),it.push(()=>Ut(N,"isOpen",_e)),P=new Mn({props:{isOpen:n[6],title:"Delete Channel",message:"Delete channel #"+n[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:n[21],onCancel:n[48]}});function Le(Q){n[49](Q)}let ve={channelId:n[9]};n[8]!==void 0&&(ve.isOpen=n[8]),B=new Ip({props:ve}),it.push(()=>Ut(B,"isOpen",Le));function De(Q){n[50](Q)}function Fe(Q){n[51](Q)}let Ue={isOwnProfile:!0};n[10]!==void 0&&(Ue.isOpen=n[10]),n[17]!==void 0&&(Ue.user=n[17]),H=new fi({props:Ue}),it.push(()=>Ut(H,"isOpen",De)),it.push(()=>Ut(H,"user",Fe));let se=n[11]&&n[12]&&to(n);return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("div"),l=w("h3"),l.textContent=a,o=z(),u=w("div"),d=w("button"),d.textContent=p,h=z(),_=w("button"),_.textContent=g,y=z(),ae&&ae.c(),T=z(),D=w("div");for(let Q=0;Q<m.length;Q+=1)m[Q].c();b=z(),le&&le.c(),A=z(),te&&te.c(),I=z(),ue&&ue.c(),E=z(),et(N.$$.fragment),F=z(),et(P.$$.fragment),O=z(),et(B.$$.fragment),L=z(),et(H.$$.fragment),G=z(),se&&se.c(),Y=Me(),this.h()},l(Q){e=k(Q,"DIV",{class:!0});var oe=R(e);t=k(oe,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-18mdtge"&&(t.innerHTML=s),r=M(oe),i=k(oe,"DIV",{class:!0});var ge=R(i);l=k(ge,"H3",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-cahn79"&&(l.textContent=a),o=M(ge),u=k(ge,"DIV",{class:!0});var Se=R(u);d=k(Se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(d)!=="svelte-5el016"&&(d.textContent=p),h=M(Se),_=k(Se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(_)!=="svelte-ou792o"&&(_.textContent=g),Se.forEach(v),ge.forEach(v),y=M(oe),ae&&ae.l(oe),T=M(oe),D=k(oe,"DIV",{class:!0});var ze=R(D);for(let Ne=0;Ne<m.length;Ne+=1)m[Ne].l(ze);b=M(ze),le&&le.l(ze),A=M(ze),te&&te.l(ze),ze.forEach(v),I=M(oe),ue&&ue.l(oe),oe.forEach(v),E=M(Q),$e(N.$$.fragment,Q),F=M(Q),$e(P.$$.fragment,Q),O=M(Q),$e(B.$$.fragment,Q),L=M(Q),$e(H.$$.fragment,Q),G=M(Q),se&&se.l(Q),Y=Me(),this.h()},h(){f(t,"class","top-section svelte-1c11uqn"),f(l,"class","svelte-1c11uqn"),f(d,"class","screen-share-icon-btn svelte-1c11uqn"),f(d,"title","Screen Share"),he(d,"active",n[0]==="screen"),f(_,"class","add-btn svelte-1c11uqn"),f(_,"title","Create channel"),f(u,"class","header-buttons svelte-1c11uqn"),f(i,"class","sidebar-header svelte-1c11uqn"),f(D,"class","channel-list svelte-1c11uqn"),f(e,"class","channel-sidebar svelte-1c11uqn")},m(Q,oe){j(Q,e,oe),c(e,t),c(e,r),c(e,i),c(i,l),c(i,o),c(i,u),c(u,d),c(u,h),c(u,_),c(e,y),ae&&ae.m(e,null),c(e,T),c(e,D);for(let ge=0;ge<m.length;ge+=1)m[ge]&&m[ge].m(D,null);c(D,b),le&&le.m(D,null),c(D,A),te&&te.m(D,null),c(e,I),ue&&ue.m(e,null),j(Q,E,oe),Qe(N,Q,oe),j(Q,F,oe),Qe(P,Q,oe),j(Q,O,oe),Qe(B,Q,oe),j(Q,L,oe),Qe(H,Q,oe),j(Q,G,oe),se&&se.m(Q,oe),j(Q,Y,oe),K=!0,$||(ee=[W(d,"click",n[28]),W(_,"click",n[29])],$=!0)},p(Q,oe){(!K||oe[0]&1)&&he(d,"active",Q[0]==="screen"),Q[2]?ae?ae.p(Q,oe):(ae=Ha(Q),ae.c(),ae.m(e,T)):ae&&(ae.d(1),ae=null),oe[0]&13991936&&(ie=Xe(Q[15]),m=nn(m,oe,de,1,Q,ie,C,D,tn,Ya,b,Va)),Q[14].length>0?le?le.p(Q,oe):(le=Ka(Q),le.c(),le.m(D,A)):le&&(le.d(1),le=null),Q[13].length>0?te?te.p(Q,oe):(te=Ja(Q),te.c(),te.m(D,null)):te&&(te.d(1),te=null),Q[17]?ue?ue.p(Q,oe):(ue=eo(Q),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null);const ge={};!S&&oe[0]&8&&(S=!0,ge.isOpen=Q[3],Lt(()=>S=!1)),N.$set(ge);const Se={};oe[0]&64&&(Se.isOpen=Q[6]),oe[0]&128&&(Se.message="Delete channel #"+Q[7]+"? This action cannot be undone."),oe[0]&64&&(Se.onCancel=Q[48]),P.$set(Se);const ze={};oe[0]&512&&(ze.channelId=Q[9]),!x&&oe[0]&256&&(x=!0,ze.isOpen=Q[8],Lt(()=>x=!1)),B.$set(ze);const Ne={};!V&&oe[0]&1024&&(V=!0,Ne.isOpen=Q[10],Lt(()=>V=!1)),!U&&oe[0]&131072&&(U=!0,Ne.user=Q[17],Lt(()=>U=!1)),H.$set(Ne),Q[11]&&Q[12]?se?se.p(Q,oe):(se=to(Q),se.c(),se.m(Y.parentNode,Y)):se&&(se.d(1),se=null)},i(Q){K||(be(N.$$.fragment,Q),be(P.$$.fragment,Q),be(B.$$.fragment,Q),be(H.$$.fragment,Q),K=!0)},o(Q){Ce(N.$$.fragment,Q),Ce(P.$$.fragment,Q),Ce(B.$$.fragment,Q),Ce(H.$$.fragment,Q),K=!1},d(Q){Q&&(v(e),v(E),v(F),v(O),v(L),v(G),v(Y)),ae&&ae.d();for(let oe=0;oe<m.length;oe+=1)m[oe].d();le&&le.d(),te&&te.d(),ue&&ue.d(),Je(N,Q),Je(P,Q),Je(B,Q),Je(H,Q),se&&se.d(Q),$=!1,Ie(ee)}}}function Pp(n,e,t){let s,r,i,l,a,o;Pe(n,Bt,fe=>t(26,l=fe)),Pe(n,Fn,fe=>t(16,a=fe)),Pe(n,dn,fe=>t(17,o=fe));let{activeView:u="chat"}=e,d="",p=!1,h=!1,_=!1,g=!1,y=!1,T="",D=!1,m="",C=!1,b=!1,A=null;function I(fe){$f(fe)}function E(){d.trim()&&(ed(d.trim()),t(1,d=""),t(2,p=!1))}function N(fe){t(7,T=fe),t(6,y=!0)}function S(){td(T),t(6,y=!1)}function F(fe){t(9,m=fe),t(8,D=!0)}function P(fe){t(12,A=fe),t(11,b=!0)}function O(fe){A&&(id(A.id,fe),t(11,b=!1))}function B(){t(10,C=!0)}function x(fe){Wt.call(this,n,fe)}const L=()=>t(0,u="screen"),H=()=>t(2,p=!p);function V(){d=this.value,t(1,d)}const U=fe=>fe.key==="Enter"&&E(),G=fe=>I(fe.id),Y=fe=>P(fe),K=fe=>F(fe.id),$=fe=>N(fe.id),ee=fe=>I(fe.id),ae=fe=>P(fe),ie=fe=>F(fe.id),de=fe=>N(fe.id),le=fe=>I(fe.id),te=fe=>P(fe),ue=fe=>F(fe.id),_e=fe=>N(fe.id),Ee=()=>t(4,_=!_),Le=()=>t(5,g=!g),ve=()=>t(3,h=!0);function De(fe){h=fe,t(3,h)}const Fe=()=>t(6,y=!1);function Ue(fe){D=fe,t(8,D)}function se(fe){C=fe,t(10,C)}function Q(fe){o=fe,dn.set(o)}const oe=()=>t(11,b=!1),ge=()=>O(null),Se=()=>O("1h"),ze=()=>O("6h"),Ne=()=>O("12h"),je=()=>O("24h"),Re=()=>O("3d"),Ye=()=>O("7d"),Ze=()=>O("14d"),gt=()=>O("30d"),yt=()=>t(11,b=!1);return n.$$set=fe=>{"activeView"in fe&&t(0,u=fe.activeView)},n.$$.update=()=>{n.$$.dirty[0]&67108864&&t(15,s=l.filter(fe=>!fe.type||fe.type==="public")),n.$$.dirty[0]&67108864&&t(14,r=l.filter(fe=>fe.type==="dm")),n.$$.dirty[0]&67108864&&t(13,i=l.filter(fe=>fe.type==="group")),n.$$.dirty[0]&1&&u==="chat"&&rd()},[u,d,p,h,_,g,y,T,D,m,C,b,A,i,r,s,a,o,I,E,N,S,F,P,O,B,l,x,L,H,V,U,G,Y,K,$,ee,ae,ie,de,le,te,ue,_e,Ee,Le,ve,De,Fe,Ue,se,Q,oe,ge,Se,ze,Ne,je,Re,Ye,Ze,gt,yt]}class Op extends ht{constructor(e){super(),pt(this,e,Pp,Rp,dt,{activeView:0},null,[-1,-1,-1])}}const Ac=wt([]),pi=wt(null),Qs=wt(!1),gs=wt(!1),ms=wt(!1),no=new Map;let Gt=null;async function so(n,e,t=!1){try{return Gt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Qs.set(!0),gs.set(!1),ms.set(!t),n.emit("call-initiate",{targetUserId:e,isVideoCall:t}),Gt}catch(s){throw console.error("Error starting call:",s),s}}async function Mp(n,e,t=!1){try{return Gt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Qs.set(!0),gs.set(!1),ms.set(!t),n.emit("call-answer",{callerId:e,isVideoCall:t}),pi.set(null),Gt}catch(s){throw console.error("Error answering call:",s),s}}function zp(n,e){n.emit("call-reject",{callerId:e}),pi.set(null)}function Fp(n){Gt&&(Gt.getTracks().forEach(e=>e.stop()),Gt=null),Qs.set(!1),gs.set(!1),ms.set(!1),n.emit("call-end"),no.forEach(e=>e.close()),no.clear(),Ac.set([])}function Bp(){if(Gt){const n=Gt.getAudioTracks()[0];n&&(n.enabled=!n.enabled,gs.set(!n.enabled))}}function Lp(){if(Gt){const n=Gt.getVideoTracks()[0];n&&(n.enabled=!n.enabled,ms.set(!n.enabled))}}function Up(){return Gt}const{window:xp}=Kr;function qp(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-1jgoxw0"),Te(e,"background-color",n[0].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&re(s,t),i&1&&Te(e,"background-color",r[0].color)},d(r){r&&v(e)}}}function jp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","avatar svelte-1jgoxw0")},m(r,i){j(r,e,i)},p(r,i){i&1&&!He(e.src,t=r[0].profilePicture)&&f(e,"src",t),i&1&&s!==(s=r[0].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function ro(n){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',s,r,i='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',l,a,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,d,p,h;return{c(){e=w("button"),e.innerHTML=t,s=z(),r=w("button"),r.innerHTML=i,l=z(),a=w("button"),a.innerHTML=o,u=z(),d=w("div"),this.h()},l(_){e=k(_,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),s=M(_),r=k(_,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-1om8irr"&&(r.innerHTML=i),l=M(_),a=k(_,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-124vjww"&&(a.innerHTML=o),u=M(_),d=k(_,"DIV",{class:!0}),R(d).forEach(v),this.h()},h(){f(e,"class","menu-item svelte-1jgoxw0"),f(r,"class","menu-item svelte-1jgoxw0"),f(a,"class","menu-item svelte-1jgoxw0"),f(d,"class","menu-divider svelte-1jgoxw0")},m(_,g){j(_,e,g),j(_,s,g),j(_,r,g),j(_,l,g),j(_,a,g),j(_,u,g),j(_,d,g),p||(h=[W(e,"click",n[8]),W(r,"click",n[6]),W(a,"click",n[7])],p=!0)},p:Oe,d(_){_&&(v(e),v(s),v(r),v(l),v(a),v(u),v(d)),p=!1,Ie(h)}}}function Vp(n){let e,t,s,r,i,l=n[0].username+"",a,o,u,d,p,h,_='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',g,y;function T(b,A){return b[0].profilePicture?jp:qp}let D=T(n),m=D(n),C=!n[1]&&ro(n);return{c(){e=w("div"),t=w("div"),s=w("div"),m.c(),r=z(),i=w("span"),a=Z(l),o=z(),u=w("div"),d=z(),C&&C.c(),p=z(),h=w("button"),h.innerHTML=_,this.h()},l(b){e=k(b,"DIV",{class:!0,style:!0});var A=R(e);t=k(A,"DIV",{class:!0});var I=R(t);s=k(I,"DIV",{class:!0});var E=R(s);m.l(E),r=M(E),i=k(E,"SPAN",{class:!0});var N=R(i);a=X(N,l),N.forEach(v),E.forEach(v),I.forEach(v),o=M(A),u=k(A,"DIV",{class:!0}),R(u).forEach(v),d=M(A),C&&C.l(A),p=M(A),h=k(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1rwejc6"&&(h.innerHTML=_),A.forEach(v),this.h()},h(){f(i,"class","username svelte-1jgoxw0"),f(s,"class","user-info svelte-1jgoxw0"),f(t,"class","menu-header svelte-1jgoxw0"),f(u,"class","menu-divider svelte-1jgoxw0"),f(h,"class","menu-item svelte-1jgoxw0"),f(e,"class","context-menu svelte-1jgoxw0"),Te(e,"left",n[4]+"px"),Te(e,"top",n[3]+"px")},m(b,A){j(b,e,A),c(e,t),c(t,s),m.m(s,null),c(s,r),c(s,i),c(i,a),c(e,o),c(e,u),c(e,d),C&&C.m(e,null),c(e,p),c(e,h),n[13](e),g||(y=[W(xp,"click",n[5]),W(h,"click",n[9]),W(e,"click",lt(n[12]))],g=!0)},p(b,[A]){D===(D=T(b))&&m?m.p(b,A):(m.d(1),m=D(b),m&&(m.c(),m.m(s,r))),A&1&&l!==(l=b[0].username+"")&&re(a,l),b[1]?C&&(C.d(1),C=null):C?C.p(b,A):(C=ro(b),C.c(),C.m(e,p)),A&16&&Te(e,"left",b[4]+"px"),A&8&&Te(e,"top",b[3]+"px")},i:Oe,o:Oe,d(b){b&&v(e),m.d(),C&&C.d(),n[13](null),g=!1,Ie(y)}}}function Hp(n,e,t){let s,r,{user:i}=e,{x:l}=e,{y:a}=e,{isOwnProfile:o}=e;const u=Ws();let d;function p(m){u("close")}function h(){u("voiceCall"),u("close")}function _(){u("videoCall"),u("close")}function g(){u("openDM"),u("close")}function y(){u("viewProfile"),u("close")}function T(m){Wt.call(this,n,m)}function D(m){it[m?"unshift":"push"](()=>{d=m,t(2,d)})}return n.$$set=m=>{"user"in m&&t(0,i=m.user),"x"in m&&t(10,l=m.x),"y"in m&&t(11,a=m.y),"isOwnProfile"in m&&t(1,o=m.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&1028&&t(4,s=(()=>{if(!d)return l;const m=d.offsetWidth||200,C=window.innerWidth;return l+m>C?l-m:l})()),n.$$.dirty&2052&&t(3,r=(()=>{if(!d)return a;const m=d.offsetHeight||300,C=window.innerHeight;return a+m>C?a-m:a})())},[i,o,d,r,s,p,h,_,g,y,l,a,T,D]}class Gp extends ht{constructor(e){super(),pt(this,e,Hp,Vp,dt,{user:0,x:10,y:11,isOwnProfile:1})}}function io(n,e,t){const s=n.slice();return s[9]=e[t],s}function lo(n){let e,t,s,r,i,l="Start a Direct Message",a,o,u="Ã—",d,p,h,_,g,y,T;function D(b,A){return b[2].length===0?Yp:Wp}let m=D(n),C=m(n);return{c(){e=w("div"),t=z(),s=w("div"),r=w("div"),i=w("h2"),i.textContent=l,a=z(),o=w("button"),o.textContent=u,d=z(),p=w("div"),h=w("input"),_=z(),g=w("div"),C.c(),this.h()},l(b){e=k(b,"DIV",{class:!0}),R(e).forEach(v),t=M(b),s=k(b,"DIV",{class:!0});var A=R(s);r=k(A,"DIV",{class:!0});var I=R(r);i=k(I,"H2",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-14qt3ql"&&(i.textContent=l),a=M(I),o=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-mm165g"&&(o.textContent=u),I.forEach(v),d=M(A),p=k(A,"DIV",{class:!0});var E=R(p);h=k(E,"INPUT",{type:!0,placeholder:!0,class:!0}),E.forEach(v),_=M(A),g=k(A,"DIV",{class:!0});var N=R(g);C.l(N),N.forEach(v),A.forEach(v),this.h()},h(){f(e,"class","modal-overlay svelte-1wgtlqt"),f(i,"class","svelte-1wgtlqt"),f(o,"class","close-btn svelte-1wgtlqt"),f(r,"class","modal-header svelte-1wgtlqt"),f(h,"type","text"),f(h,"placeholder","Search users..."),h.autofocus=!0,f(h,"class","svelte-1wgtlqt"),f(p,"class","search-container svelte-1wgtlqt"),f(g,"class","user-list svelte-1wgtlqt"),f(s,"class","modal svelte-1wgtlqt")},m(b,A){j(b,e,A),j(b,t,A),j(b,s,A),c(s,r),c(r,i),c(r,a),c(r,o),c(s,d),c(s,p),c(p,h),nt(h,n[1]),c(s,_),c(s,g),C.m(g,null),h.focus(),y||(T=[W(e,"click",n[4]),W(o,"click",n[4]),W(h,"input",n[7])],y=!0)},p(b,A){A&2&&h.value!==b[1]&&nt(h,b[1]),m===(m=D(b))&&C?C.p(b,A):(C.d(1),C=m(b),C&&(C.c(),C.m(g,null)))},d(b){b&&(v(e),v(t),v(s)),C.d(),y=!1,Ie(T)}}}function Wp(n){let e=[],t=new Map,s,r=Xe(n[2]);const i=l=>l[9].id;for(let l=0;l<r.length;l+=1){let a=io(n,r,l),o=i(a);t.set(o,e[l]=ao(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Me()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Me()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);j(l,s,a)},p(l,a){a&12&&(r=Xe(l[2]),e=nn(e,a,i,1,l,r,t,s.parentNode,tn,ao,s,io))},d(l){l&&v(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function Yp(n){let e,t="No users found";return{c(){e=w("div"),e.textContent=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){f(e,"class","no-users svelte-1wgtlqt")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function Kp(n){let e,t=n[9].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1wgtlqt"),Te(e,"background-color",n[9].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i&4&&t!==(t=r[9].username.charAt(0).toUpperCase()+"")&&re(s,t),i&4&&Te(e,"background-color",r[9].color)},d(r){r&&v(e)}}}function Xp(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[9].profilePicture)||f(e,"src",t),f(e,"alt",s=n[9].username),f(e,"class","user-avatar svelte-1wgtlqt")},m(r,i){j(r,e,i)},p(r,i){i&4&&!He(e.src,t=r[9].profilePicture)&&f(e,"src",t),i&4&&s!==(s=r[9].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function ao(n,e){let t,s,r,i,l,a,o,u=e[9].username+"",d,p,h,_=e[9].status+"",g,y,T,D;function m(I,E){return I[9].profilePicture?Xp:Kp}let C=m(e),b=C(e);function A(){return e[8](e[9])}return{key:n,first:null,c(){t=w("button"),s=w("div"),b.c(),r=z(),i=w("div"),l=z(),a=w("div"),o=w("div"),d=Z(u),p=z(),h=w("div"),g=Z(_),y=z(),this.h()},l(I){t=k(I,"BUTTON",{class:!0});var E=R(t);s=k(E,"DIV",{class:!0});var N=R(s);b.l(N),r=M(N),i=k(N,"DIV",{class:!0,style:!0}),R(i).forEach(v),N.forEach(v),l=M(E),a=k(E,"DIV",{class:!0});var S=R(a);o=k(S,"DIV",{class:!0});var F=R(o);d=X(F,u),F.forEach(v),p=M(S),h=k(S,"DIV",{class:!0});var P=R(h);g=X(P,_),P.forEach(v),S.forEach(v),y=M(E),E.forEach(v),this.h()},h(){f(i,"class","status-indicator svelte-1wgtlqt"),Te(i,"background-color",oo(e[9].status)),f(s,"class","user-avatar-container svelte-1wgtlqt"),f(o,"class","username svelte-1wgtlqt"),f(h,"class","status-text svelte-1wgtlqt"),f(a,"class","user-info svelte-1wgtlqt"),f(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(I,E){j(I,t,E),c(t,s),b.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,g),c(t,y),T||(D=W(t,"click",A),T=!0)},p(I,E){e=I,C===(C=m(e))&&b?b.p(e,E):(b.d(1),b=C(e),b&&(b.c(),b.m(s,r))),E&4&&Te(i,"background-color",oo(e[9].status)),E&4&&u!==(u=e[9].username+"")&&re(d,u),E&4&&_!==(_=e[9].status+"")&&re(g,_)},d(I){I&&v(t),b.d(),T=!1,D()}}}function Zp(n){let e,t=n[0]&&lo(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,r){t&&t.m(s,r),j(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=lo(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Oe,o:Oe,d(s){s&&v(e),t&&t.d(s)}}}function oo(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Jp(n,e,t){let s,r,i;Pe(n,dn,h=>t(5,r=h)),Pe(n,Ht,h=>t(6,i=h));let{isOpen:l=!1}=e,a="";function o(h){gc(h.id),u()}function u(){t(0,l=!1),t(1,a="")}function d(){a=this.value,t(1,a)}const p=h=>o(h);return n.$$set=h=>{"isOpen"in h&&t(0,l=h.isOpen)},n.$$.update=()=>{n.$$.dirty&98&&t(2,s=i.filter(h=>h.id===r?.id?!1:a?h.username.toLowerCase().includes(a.toLowerCase()):!0))},[l,a,s,o,u,r,i,d,p]}class Qp extends ht{constructor(e){super(),pt(this,e,Jp,Zp,dt,{isOpen:0})}}function co(n,e,t){const s=n.slice();return s[30]=e[t],s}function $p(n){let e,t=n[30].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1dxxmv3"),Te(e,"background-color",n[30].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i[0]&512&&t!==(t=r[30].username.charAt(0).toUpperCase()+"")&&re(s,t),i[0]&512&&Te(e,"background-color",r[30].color)},d(r){r&&v(e)}}}function eg(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[30].profilePicture)||f(e,"src",t),f(e,"alt",s=n[30].username),f(e,"class","user-avatar svelte-1dxxmv3")},m(r,i){j(r,e,i)},p(r,i){i[0]&512&&!He(e.src,t=r[30].profilePicture)&&f(e,"src",t),i[0]&512&&s!==(s=r[30].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function uo(n){let e,t="(you)";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){f(e,"class","you-badge svelte-1dxxmv3")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function fo(n){let e,t,s="ðŸ“ž",r,i,l="ðŸ“¹",a,o;function u(...p){return n[19](n[30],...p)}function d(...p){return n[20](n[30],...p)}return{c(){e=w("div"),t=w("button"),t.textContent=s,r=z(),i=w("button"),i.textContent=l,this.h()},l(p){e=k(p,"DIV",{class:!0});var h=R(e);t=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(t)!=="svelte-jmuv4z"&&(t.textContent=s),r=M(h),i=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(i)!=="svelte-1whn4df"&&(i.textContent=l),h.forEach(v),this.h()},h(){f(t,"class","call-btn voice-call svelte-1dxxmv3"),f(t,"title","Voice call"),f(i,"class","call-btn video-call svelte-1dxxmv3"),f(i,"title","Video call"),f(e,"class","call-buttons svelte-1dxxmv3")},m(p,h){j(p,e,h),c(e,t),c(e,r),c(e,i),a||(o=[W(t,"click",u),W(i,"click",d)],a=!0)},p(p,h){n=p},d(p){p&&v(e),a=!1,Ie(o)}}}function ho(n,e){let t,s,r,i,l,a=e[30].username+"",o,u,d,p,h,_,g,y=e[30].status+"",T,D,m,C,b;function A(O,B){return O[30].profilePicture?eg:$p}let I=A(e),E=I(e),N=e[30].id===e[8]?.id&&uo();function S(){return e[17](e[30])}function F(...O){return e[18](e[30],...O)}let P=e[30].id!==e[8]?.id&&fo(e);return{key:n,first:null,c(){t=w("div"),s=w("button"),E.c(),r=z(),i=w("div"),l=w("span"),o=Z(a),u=z(),N&&N.c(),d=z(),p=w("div"),h=w("span"),_=z(),g=w("span"),T=Z(y),D=z(),P&&P.c(),m=z(),this.h()},l(O){t=k(O,"DIV",{class:!0});var B=R(t);s=k(B,"BUTTON",{class:!0});var x=R(s);E.l(x),r=M(x),i=k(x,"DIV",{class:!0});var L=R(i);l=k(L,"SPAN",{class:!0});var H=R(l);o=X(H,a),u=M(H),N&&N.l(H),H.forEach(v),d=M(L),p=k(L,"DIV",{class:!0});var V=R(p);h=k(V,"SPAN",{class:!0,style:!0}),R(h).forEach(v),_=M(V),g=k(V,"SPAN",{class:!0});var U=R(g);T=X(U,y),U.forEach(v),V.forEach(v),L.forEach(v),x.forEach(v),D=M(B),P&&P.l(B),m=M(B),B.forEach(v),this.h()},h(){f(l,"class","user-name svelte-1dxxmv3"),f(h,"class","status-dot svelte-1dxxmv3"),Te(h,"background-color",go(e[30].status)),f(g,"class","status-text svelte-1dxxmv3"),f(p,"class","user-status svelte-1dxxmv3"),f(i,"class","user-info svelte-1dxxmv3"),f(s,"class","user svelte-1dxxmv3"),f(t,"class","user-container svelte-1dxxmv3"),this.first=t},m(O,B){j(O,t,B),c(t,s),E.m(s,null),c(s,r),c(s,i),c(i,l),c(l,o),c(l,u),N&&N.m(l,null),c(i,d),c(i,p),c(p,h),c(p,_),c(p,g),c(g,T),c(t,D),P&&P.m(t,null),c(t,m),C||(b=[W(s,"click",S),W(s,"contextmenu",F)],C=!0)},p(O,B){e=O,I===(I=A(e))&&E?E.p(e,B):(E.d(1),E=I(e),E&&(E.c(),E.m(s,r))),B[0]&512&&a!==(a=e[30].username+"")&&re(o,a),e[30].id===e[8]?.id?N||(N=uo(),N.c(),N.m(l,null)):N&&(N.d(1),N=null),B[0]&512&&Te(h,"background-color",go(e[30].status)),B[0]&512&&y!==(y=e[30].status+"")&&re(T,y),e[30].id!==e[8]?.id?P?P.p(e,B):(P=fo(e),P.c(),P.m(t,m)):P&&(P.d(1),P=null)},d(O){O&&v(t),E.d(),N&&N.d(),P&&P.d(),C=!1,Ie(b)}}}function po(n){let e,t;return e=new Gp({props:{user:n[5],x:n[6],y:n[7],isOwnProfile:n[5].id===n[8]?.id}}),e.$on("close",n[12]),e.$on("voiceCall",n[23]),e.$on("videoCall",n[24]),e.$on("openDM",n[13]),e.$on("viewProfile",n[25]),{c(){et(e.$$.fragment)},l(s){$e(e.$$.fragment,s)},m(s,r){Qe(e,s,r),t=!0},p(s,r){const i={};r[0]&32&&(i.user=s[5]),r[0]&64&&(i.x=s[6]),r[0]&128&&(i.y=s[7]),r[0]&288&&(i.isOwnProfile=s[5].id===s[8]?.id),e.$set(i)},i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ce(e.$$.fragment,s),t=!1},d(s){Je(e,s)}}}function tg(n){let e,t,s,r,i=n[9].length+"",l,a,o,u,d="ðŸ’¬",p,h,_=[],g=new Map,y,T,D,m,C,b,A,I,E,N,S,F=Xe(n[9]);const P=U=>U[30].id;for(let U=0;U<F.length;U+=1){let G=co(n,F,U),Y=P(G);g.set(Y,_[U]=ho(Y,G))}function O(U){n[21](U)}function B(U){n[22](U)}let x={isOwnProfile:n[2]};n[0]!==void 0&&(x.isOpen=n[0]),n[1]!==void 0&&(x.user=n[1]),T=new fi({props:x}),it.push(()=>Ut(T,"isOpen",O)),it.push(()=>Ut(T,"user",B));let L=n[4]&&n[5]&&po(n);function H(U){n[26](U)}let V={};return n[3]!==void 0&&(V.isOpen=n[3]),A=new Qp({props:V}),it.push(()=>Ut(A,"isOpen",H)),{c(){e=w("aside"),t=w("div"),s=w("h3"),r=Z("Online ("),l=Z(i),a=Z(")"),o=z(),u=w("button"),u.textContent=d,p=z(),h=w("div");for(let U=0;U<_.length;U+=1)_[U].c();y=z(),et(T.$$.fragment),C=z(),L&&L.c(),b=z(),et(A.$$.fragment),this.h()},l(U){e=k(U,"ASIDE",{class:!0});var G=R(e);t=k(G,"DIV",{class:!0});var Y=R(t);s=k(Y,"H3",{class:!0});var K=R(s);r=X(K,"Online ("),l=X(K,i),a=X(K,")"),K.forEach(v),o=M(Y),u=k(Y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(u)!=="svelte-1sotr3f"&&(u.textContent=d),Y.forEach(v),p=M(G),h=k(G,"DIV",{class:!0});var $=R(h);for(let ee=0;ee<_.length;ee+=1)_[ee].l($);$.forEach(v),G.forEach(v),y=M(U),$e(T.$$.fragment,U),C=M(U),L&&L.l(U),b=M(U),$e(A.$$.fragment,U),this.h()},h(){f(s,"class","svelte-1dxxmv3"),f(u,"class","dm-btn svelte-1dxxmv3"),f(u,"title","Start a DM"),f(t,"class","panel-header svelte-1dxxmv3"),f(h,"class","user-list svelte-1dxxmv3"),f(e,"class","user-panel svelte-1dxxmv3")},m(U,G){j(U,e,G),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(e,p),c(e,h);for(let Y=0;Y<_.length;Y+=1)_[Y]&&_[Y].m(h,null);j(U,y,G),Qe(T,U,G),j(U,C,G),L&&L.m(U,G),j(U,b,G),Qe(A,U,G),E=!0,N||(S=W(u,"click",n[14]),N=!0)},p(U,G){(!E||G[0]&512)&&i!==(i=U[9].length+"")&&re(l,i),G[0]&102144&&(F=Xe(U[9]),_=nn(_,G,P,1,U,F,g,h,tn,ho,null,co));const Y={};G[0]&4&&(Y.isOwnProfile=U[2]),!D&&G[0]&1&&(D=!0,Y.isOpen=U[0],Lt(()=>D=!1)),!m&&G[0]&2&&(m=!0,Y.user=U[1],Lt(()=>m=!1)),T.$set(Y),U[4]&&U[5]?L?(L.p(U,G),G[0]&48&&be(L,1)):(L=po(U),L.c(),be(L,1),L.m(b.parentNode,b)):L&&(En(),Ce(L,1,1,()=>{L=null}),Cn());const K={};!I&&G[0]&8&&(I=!0,K.isOpen=U[3],Lt(()=>I=!1)),A.$set(K)},i(U){E||(be(T.$$.fragment,U),be(L),be(A.$$.fragment,U),E=!0)},o(U){Ce(T.$$.fragment,U),Ce(L),Ce(A.$$.fragment,U),E=!1},d(U){U&&(v(e),v(y),v(C),v(b));for(let G=0;G<_.length;G+=1)_[G].d();Je(T,U),L&&L.d(U),Je(A,U),N=!1,S()}}}function go(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function ng(n,e,t){let s,r,i,l;Pe(n,Kn,V=>t(27,s=V)),Pe(n,dn,V=>t(8,r=V)),Pe(n,Bt,V=>t(28,i=V)),Pe(n,Ht,V=>t(9,l=V));const a=Ws();let o=!1,u=null,d=!1,p=!1,h=!1,_=null,g=0,y=0;function T(V){t(1,u=V),t(2,d=V.id===r?.id),t(0,o=!0)}function D(V,U){V.preventDefault(),V.stopPropagation(),t(5,_=U),t(6,g=V.clientX),t(7,y=V.clientY),t(4,h=!0)}function m(){t(4,h=!1),t(5,_=null)}function C(){if(!_)return;const V=_,G=`dm-${[r?.id,V.id].sort().join("-")}`;if(i.find(K=>K.id===G))a("openDM",{channelId:G,otherUser:V});else{gc(V.id);const K=Bt.subscribe($=>{$.find(ae=>ae.id===G)&&(a("openDM",{channelId:G,otherUser:V}),K())})}}function b(){t(3,p=!0)}async function A(V,U){V&&V.stopPropagation();const G=U||_;if(!(!s||!G||G.id===r?.id))try{await so(s,G.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function I(V,U){V&&V.stopPropagation();const G=U||_;if(!(!s||!G||G.id===r?.id))try{await so(s,G.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const E=V=>T(V),N=(V,U)=>D(U,V),S=(V,U)=>A(U,V),F=(V,U)=>I(U,V);function P(V){o=V,t(0,o)}function O(V){u=V,t(1,u)}const B=()=>A(),x=()=>I(),L=()=>{_&&T(_)};function H(V){p=V,t(3,p)}return[o,u,d,p,h,_,g,y,r,l,T,D,m,C,b,A,I,E,N,S,F,P,O,B,x,L,H]}class sg extends ht{constructor(e){super(),pt(this,e,ng,tg,dt,{},null,[-1,-1])}}const rg=wt([]),gi=wt(!1),mo=new Map;let Wn=null;async function ig(n){try{return Wn=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),gi.set(!0),n.emit("start-screen-share"),Wn.getVideoTracks()[0].onended=()=>{Sc(n)},Wn}catch(e){throw console.error("Error starting screen share:",e),e}}function Sc(n){Wn&&(Wn.getTracks().forEach(e=>e.stop()),Wn=null),gi.set(!1),n.emit("stop-screen-share"),mo.forEach(e=>e.close()),mo.clear()}function vo(n,e,t){const s=n.slice();return s[12]=e[t],s}function lg(n){let e,t="Start Sharing",s,r;return{c(){e=w("button"),e.textContent=t},l(i){e=k(i,"BUTTON",{"data-svelte-h":!0}),J(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,l){j(i,e,l),s||(r=W(e,"click",n[6]),s=!0)},p:Oe,d(i){i&&v(e),s=!1,r()}}}function ag(n){let e,t="Stop Sharing",s,r;return{c(){e=w("button"),e.textContent=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){f(e,"class","stop-btn svelte-1oqngqd")},m(i,l){j(i,e,l),s||(r=W(e,"click",n[7]),s=!0)},p:Oe,d(i){i&&v(e),s=!1,r()}}}function _o(n){let e,t;return{c(){e=w("div"),t=Z(n[2]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=R(e);t=X(r,n[2]),r.forEach(v),this.h()},h(){f(e,"class","error svelte-1oqngqd")},m(s,r){j(s,e,r),c(e,t)},p(s,r){r&4&&re(t,s[2])},d(s){s&&v(e)}}}function bo(n){let e,t,s='<span class="badge svelte-1oqngqd">Your Screen</span>',r,i;return{c(){e=w("div"),t=w("div"),t.innerHTML=s,r=z(),i=w("video"),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=R(e);t=k(a,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-16dlolc"&&(t.innerHTML=s),r=M(a),i=k(a,"VIDEO",{class:!0}),R(i).forEach(v),a.forEach(v),this.h()},h(){f(t,"class","screen-header svelte-1oqngqd"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,f(i,"class","svelte-1oqngqd"),f(e,"class","screen-item svelte-1oqngqd")},m(l,a){j(l,e,a),c(e,t),c(e,r),c(e,i),n[9](i)},p:Oe,d(l){l&&v(e),n[9](null)}}}function ko(n,e){let t,s,r,i=e[12].username+"",l,a,o,u,d,p,h;return{key:n,first:null,c(){t=w("div"),s=w("div"),r=w("span"),l=Z(i),a=Z("'s Screen"),o=z(),u=w("video"),this.h()},l(_){t=k(_,"DIV",{class:!0});var g=R(t);s=k(g,"DIV",{class:!0});var y=R(s);r=k(y,"SPAN",{class:!0});var T=R(r);l=X(T,i),a=X(T,"'s Screen"),T.forEach(v),y.forEach(v),o=M(g),u=k(g,"VIDEO",{class:!0}),R(u).forEach(v),g.forEach(v),this.h()},h(){f(r,"class","username svelte-1oqngqd"),f(s,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,f(u,"class","svelte-1oqngqd"),f(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(_,g){j(_,t,g),c(t,s),c(s,r),c(r,l),c(r,a),c(t,o),c(t,u),p||(h=Rc(d=cg.call(null,u,e[12].stream)),p=!0)},p(_,g){e=_,g&16&&i!==(i=e[12].username+"")&&re(l,i),d&&yn(d.update)&&g&16&&d.update.call(null,e[12].stream)},d(_){_&&v(t),p=!1,h()}}}function wo(n){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1oqngqd")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function og(n){let e,t,s,r,i="â† Back",l,a,o="ðŸ–¥ï¸ Screen Sharing",u,d,p,h,_,g=[],y=new Map,T,D,m;function C(P,O){return P[3]?ag:lg}let b=C(n),A=b(n),I=n[2]&&_o(n),E=n[3]&&n[0]&&bo(n),N=Xe(n[4]);const S=P=>P[12].userId;for(let P=0;P<N.length;P+=1){let O=vo(n,N,P),B=S(O);y.set(B,g[P]=ko(B,O))}let F=!n[3]&&n[4].length===0&&wo();return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("button"),r.textContent=i,l=z(),a=w("h2"),a.textContent=o,u=z(),A.c(),d=z(),I&&I.c(),p=z(),h=w("div"),E&&E.c(),_=z();for(let P=0;P<g.length;P+=1)g[P].c();T=z(),F&&F.c(),this.h()},l(P){e=k(P,"DIV",{class:!0});var O=R(e);t=k(O,"DIV",{class:!0});var B=R(t);s=k(B,"DIV",{class:!0});var x=R(s);r=k(x,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(r)!=="svelte-ts724a"&&(r.textContent=i),l=M(x),a=k(x,"H2",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-1el2fdv"&&(a.textContent=o),x.forEach(v),u=M(B),A.l(B),B.forEach(v),d=M(O),I&&I.l(O),p=M(O),h=k(O,"DIV",{class:!0});var L=R(h);E&&E.l(L),_=M(L);for(let H=0;H<g.length;H+=1)g[H].l(L);T=M(L),F&&F.l(L),L.forEach(v),O.forEach(v),this.h()},h(){f(r,"class","back-btn svelte-1oqngqd"),f(r,"title","Back to chat"),f(a,"class","svelte-1oqngqd"),f(s,"class","header-left svelte-1oqngqd"),f(t,"class","header svelte-1oqngqd"),f(h,"class","screens svelte-1oqngqd"),f(e,"class","screen-share-container svelte-1oqngqd")},m(P,O){j(P,e,O),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),A.m(t,null),c(e,d),I&&I.m(e,null),c(e,p),c(e,h),E&&E.m(h,null),c(h,_);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(h,null);c(h,T),F&&F.m(h,null),D||(m=W(r,"click",n[5]),D=!0)},p(P,[O]){b===(b=C(P))&&A?A.p(P,O):(A.d(1),A=b(P),A&&(A.c(),A.m(t,null))),P[2]?I?I.p(P,O):(I=_o(P),I.c(),I.m(e,p)):I&&(I.d(1),I=null),P[3]&&P[0]?E?E.p(P,O):(E=bo(P),E.c(),E.m(h,_)):E&&(E.d(1),E=null),O&16&&(N=Xe(P[4]),g=nn(g,O,S,1,P,N,y,h,tn,ko,T,vo)),!P[3]&&P[4].length===0?F||(F=wo(),F.c(),F.m(h,null)):F&&(F.d(1),F=null)},i:Oe,o:Oe,d(P){P&&v(e),A.d(),I&&I.d(),E&&E.d();for(let O=0;O<g.length;O+=1)g[O].d();F&&F.d(),D=!1,m()}}}function cg(n,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),n.srcObject=e,n.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),n.srcObject=t,n.play().catch(s=>console.error("Error playing updated remote video:",s))}}}function ug(n,e,t){let s,r,i;Pe(n,Kn,g=>t(10,s=g)),Pe(n,gi,g=>t(3,r=g)),Pe(n,Ht,g=>t(11,g)),Pe(n,rg,g=>t(4,i=g));let{activeView:l="screen"}=e,a=null,o="",u;function d(){t(8,l="chat")}async function p(){try{if(!s)return;t(0,a=await ig(s)),console.log("Screen share started, stream:",a),console.log("Stream tracks:",a?.getTracks()),console.log("Video tracks:",a?.getVideoTracks()),t(2,o="")}catch(g){t(2,o="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",g)}}function h(){s&&(Sc(s),t(0,a=null))}function _(g){it[g?"unshift":"push"](()=>{u=g,t(1,u),t(0,a)})}return n.$$set=g=>{"activeView"in g&&t(8,l=g.activeView)},n.$$.update=()=>{n.$$.dirty&3&&u&&a&&(console.log("Setting local video srcObject",a),t(1,u.srcObject=a,u),u.play().catch(g=>console.error("Error playing local video:",g)))},[a,u,o,r,i,d,p,h,l,_]}class fg extends ht{constructor(e){super(),pt(this,e,ug,og,dt,{activeView:8})}}function yo(n,e,t){const s=n.slice();return s[17]=e[t],s[18]=e,s[19]=t,s}function Eo(n){let e,t,s,r,i=n[2].username.charAt(0).toUpperCase()+"",l,a,o,u=n[2].username+"",d,p,h,_=n[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,y,T,D,m,C=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,b,A,I=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,E,N;return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("div"),l=Z(i),a=z(),o=w("h2"),d=Z(u),p=z(),h=w("p"),g=Z(_),y=Z(" Call"),T=z(),D=w("div"),m=w("button"),m.innerHTML=C,b=z(),A=w("button"),A.innerHTML=I,this.h()},l(S){e=k(S,"DIV",{class:!0});var F=R(e);t=k(F,"DIV",{class:!0});var P=R(t);s=k(P,"DIV",{class:!0});var O=R(s);r=k(O,"DIV",{class:!0});var B=R(r);l=X(B,i),B.forEach(v),a=M(O),o=k(O,"H2",{class:!0});var x=R(o);d=X(x,u),x.forEach(v),p=M(O),h=k(O,"P",{class:!0});var L=R(h);g=X(L,_),y=X(L," Call"),L.forEach(v),O.forEach(v),T=M(P),D=k(P,"DIV",{class:!0});var H=R(D);m=k(H,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-u3s2jz"&&(m.innerHTML=C),b=M(H),A=k(H,"BUTTON",{class:!0,"data-svelte-h":!0}),J(A)!=="svelte-om1ns7"&&(A.innerHTML=I),H.forEach(v),P.forEach(v),F.forEach(v),this.h()},h(){f(r,"class","caller-avatar svelte-1mc89jk"),f(o,"class","svelte-1mc89jk"),f(h,"class","call-type svelte-1mc89jk"),f(s,"class","caller-info svelte-1mc89jk"),f(m,"class","answer-btn svelte-1mc89jk"),f(A,"class","reject-btn svelte-1mc89jk"),f(D,"class","call-actions svelte-1mc89jk"),f(t,"class","incoming-call-modal svelte-1mc89jk"),f(e,"class","call-modal-overlay svelte-1mc89jk")},m(S,F){j(S,e,F),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(s,p),c(s,h),c(h,g),c(h,y),c(t,T),c(t,D),c(D,m),c(D,b),c(D,A),E||(N=[W(m,"click",n[7]),W(A,"click",n[8])],E=!0)},p(S,F){F&4&&i!==(i=S[2].username.charAt(0).toUpperCase()+"")&&re(l,i),F&4&&u!==(u=S[2].username+"")&&re(d,u),F&4&&_!==(_=S[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&re(g,_)},d(S){S&&v(e),E=!1,Ie(N)}}}function Co(n){let e,t,s,r,i,l,a,o="You",u,d=[],p=new Map,h,_,g,y,T=n[6]?"ðŸ”‡":"ðŸŽ¤",D,m,C,b,A,I=n[5]?"ðŸ“¹":"ðŸ“·",E,N,S,F,P='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',O,B,x=n[5]&&To(),L=Xe(n[3]);const H=V=>V[17].userId;for(let V=0;V<L.length;V+=1){let U=yo(n,L,V),G=H(U);p.set(G,d[V]=So(G,U))}return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("video"),i=z(),x&&x.c(),l=z(),a=w("div"),a.textContent=o,u=z();for(let V=0;V<d.length;V+=1)d[V].c();h=z(),_=w("div"),g=w("button"),y=w("span"),D=Z(T),C=z(),b=w("button"),A=w("span"),E=Z(I),S=z(),F=w("button"),F.innerHTML=P,this.h()},l(V){e=k(V,"DIV",{class:!0});var U=R(e);t=k(U,"DIV",{class:!0});var G=R(t);s=k(G,"DIV",{class:!0});var Y=R(s);r=k(Y,"VIDEO",{class:!0}),R(r).forEach(v),i=M(Y),x&&x.l(Y),l=M(Y),a=k(Y,"DIV",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-1l6ztyc"&&(a.textContent=o),Y.forEach(v),u=M(G);for(let de=0;de<d.length;de+=1)d[de].l(G);G.forEach(v),h=M(U),_=k(U,"DIV",{class:!0});var K=R(_);g=k(K,"BUTTON",{class:!0,title:!0});var $=R(g);y=k($,"SPAN",{class:!0});var ee=R(y);D=X(ee,T),ee.forEach(v),$.forEach(v),C=M(K),b=k(K,"BUTTON",{class:!0,title:!0});var ae=R(b);A=k(ae,"SPAN",{class:!0});var ie=R(A);E=X(ie,I),ie.forEach(v),ae.forEach(v),S=M(K),F=k(K,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(F)!=="svelte-1rszrze"&&(F.innerHTML=P),K.forEach(v),U.forEach(v),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,f(r,"class","video-element svelte-1mc89jk"),he(r,"video-hidden",n[5]),f(a,"class","video-label svelte-1mc89jk"),f(s,"class","video-wrapper local-video svelte-1mc89jk"),f(t,"class","video-grid svelte-1mc89jk"),f(y,"class","control-icon svelte-1mc89jk"),f(g,"class","control-btn svelte-1mc89jk"),f(g,"title",m=n[6]?"Unmute":"Mute"),he(g,"active",n[6]),f(A,"class","control-icon svelte-1mc89jk"),f(b,"class","control-btn svelte-1mc89jk"),f(b,"title",N=n[5]?"Turn on camera":"Turn off camera"),he(b,"active",n[5]),f(F,"class","control-btn end-call-btn svelte-1mc89jk"),f(F,"title","End call"),f(_,"class","call-controls svelte-1mc89jk"),f(e,"class","active-call-container svelte-1mc89jk")},m(V,U){j(V,e,U),c(e,t),c(t,s),c(s,r),n[13](r),c(s,i),x&&x.m(s,null),c(s,l),c(s,a),c(t,u);for(let G=0;G<d.length;G+=1)d[G]&&d[G].m(t,null);c(e,h),c(e,_),c(_,g),c(g,y),c(y,D),c(_,C),c(_,b),c(b,A),c(A,E),c(_,S),c(_,F),O||(B=[W(g,"click",n[10]),W(b,"click",n[11]),W(F,"click",n[9])],O=!0)},p(V,U){U&32&&he(r,"video-hidden",V[5]),V[5]?x||(x=To(),x.c(),x.m(s,l)):x&&(x.d(1),x=null),U&10&&(L=Xe(V[3]),d=nn(d,U,H,1,V,L,p,t,tn,So,null,yo)),U&64&&T!==(T=V[6]?"ðŸ”‡":"ðŸŽ¤")&&re(D,T),U&64&&m!==(m=V[6]?"Unmute":"Mute")&&f(g,"title",m),U&64&&he(g,"active",V[6]),U&32&&I!==(I=V[5]?"ðŸ“¹":"ðŸ“·")&&re(E,I),U&32&&N!==(N=V[5]?"Turn on camera":"Turn off camera")&&f(b,"title",N),U&32&&he(b,"active",V[5])},d(V){V&&v(e),n[13](null),x&&x.d();for(let U=0;U<d.length;U+=1)d[U].d();O=!1,Ie(B)}}}function To(n){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){f(e,"class","video-placeholder svelte-1mc89jk")},m(s,r){j(s,e,r)},d(s){s&&v(e)}}}function Ao(n){let e,t,s="ðŸ‘¤",r,i,l=(n[17].username||"User")+"",a;return{c(){e=w("div"),t=w("span"),t.textContent=s,r=z(),i=w("span"),a=Z(l),this.h()},l(o){e=k(o,"DIV",{class:!0});var u=R(e);t=k(u,"SPAN",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-18bpbb5"&&(t.textContent=s),r=M(u),i=k(u,"SPAN",{});var d=R(i);a=X(d,l),d.forEach(v),u.forEach(v),this.h()},h(){f(t,"class","placeholder-icon svelte-1mc89jk"),f(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){j(o,e,u),c(e,t),c(e,r),c(e,i),c(i,a)},p(o,u){u&8&&l!==(l=(o[17].username||"User")+"")&&re(a,l)},d(o){o&&v(e)}}}function So(n,e){let t,s,r=e[17],i,l,a,o=(e[17].username||"User")+"",u,d;const p=()=>e[14](s,r),h=()=>e[14](null,r);let _=!e[17].isVideoEnabled&&Ao(e);return{key:n,first:null,c(){t=w("div"),s=w("video"),i=z(),_&&_.c(),l=z(),a=w("div"),u=Z(o),d=z(),this.h()},l(g){t=k(g,"DIV",{class:!0});var y=R(t);s=k(y,"VIDEO",{class:!0}),R(s).forEach(v),i=M(y),_&&_.l(y),l=M(y),a=k(y,"DIV",{class:!0});var T=R(a);u=X(T,o),T.forEach(v),d=M(y),y.forEach(v),this.h()},h(){s.autoplay=!0,s.playsInline=!0,f(s,"class","video-element svelte-1mc89jk"),he(s,"video-hidden",!e[17].isVideoEnabled),f(a,"class","video-label svelte-1mc89jk"),f(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(g,y){j(g,t,y),c(t,s),p(),c(t,i),_&&_.m(t,null),c(t,l),c(t,a),c(a,u),c(t,d)},p(g,y){e=g,r!==e[17]&&(h(),r=e[17],p()),y&8&&he(s,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?_&&(_.d(1),_=null):_?_.p(e,y):(_=Ao(e),_.c(),_.m(t,l)),y&8&&o!==(o=(e[17].username||"User")+"")&&re(u,o)},d(g){g&&v(t),h(),_&&_.d()}}}function dg(n){let e,t,s=n[2]&&Eo(n),r=n[4]&&Co(n);return{c(){s&&s.c(),e=z(),r&&r.c(),t=Me()},l(i){s&&s.l(i),e=M(i),r&&r.l(i),t=Me()},m(i,l){s&&s.m(i,l),j(i,e,l),r&&r.m(i,l),j(i,t,l)},p(i,[l]){i[2]?s?s.p(i,l):(s=Eo(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[4]?r?r.p(i,l):(r=Co(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Oe,o:Oe,d(i){i&&(v(e),v(t)),s&&s.d(i),r&&r.d(i)}}}function hg(n,e,t){let s,r,i,l,a,o;Pe(n,Kn,b=>t(15,s=b)),Pe(n,pi,b=>t(2,r=b)),Pe(n,Ac,b=>t(3,i=b)),Pe(n,Qs,b=>t(4,l=b)),Pe(n,ms,b=>t(5,a=b)),Pe(n,gs,b=>t(6,o=b));let u,d={},p=null;Mo(()=>{s&&(s.off("call-incoming"),s.off("call-accepted"),s.off("call-rejected"),s.off("call-ended"),s.off("call-offer"),s.off("call-answer-sdp"),s.off("call-ice-candidate"))});function h(){Xo()}async function _(){!r||!s||await Mp(s,r.userId,r.isVideoCall)}function g(){!r||!s||zp(s,r.userId)}function y(){s&&Fp(s)}function T(){Bp()}function D(){Lp()}function m(b){it[b?"unshift":"push"](()=>{u=b,t(0,u),t(4,l)})}function C(b,A){it[b?"unshift":"push"](()=>{d[A.userId]=b,t(1,d)})}return n.$$.update=()=>{if(n.$$.dirty&4100&&(r?(h(),t(12,p=Iu(r.username,r.isVideoCall,()=>_()))):p&&(p.close(),t(12,p=null))),n.$$.dirty&17&&l&&u){const b=Up();b&&t(0,u.srcObject=b,u)}n.$$.dirty&10&&i.length>0&&i.forEach(b=>{const A=d[b.userId];A&&b.stream&&(A.srcObject=b.stream)})},[u,d,r,i,l,a,o,_,g,y,T,D,p,m,C]}class pg extends ht{constructor(e){super(),pt(this,e,hg,dg,dt,{})}}function gg(n){let e,t="Direct Message";return{c(){e=w("span"),e.textContent=t,this.h()},l(s){e=k(s,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1fqbvfr"&&(e.textContent=t),this.h()},h(){f(e,"class","dm-title svelte-13lnlb2")},m(s,r){j(s,e,r)},p:Oe,d(s){s&&v(e)}}}function mg(n){let e,t,s,r,i=n[0].username+"",l,a,o,u=(n[0].status||"active")+"",d;function p(g,y){return g[0].profilePicture?_g:vg}let h=p(n),_=h(n);return{c(){e=w("div"),_.c(),t=z(),s=w("div"),r=w("span"),l=Z(i),a=z(),o=w("span"),d=Z(u),this.h()},l(g){e=k(g,"DIV",{class:!0});var y=R(e);_.l(y),t=M(y),s=k(y,"DIV",{class:!0});var T=R(s);r=k(T,"SPAN",{class:!0});var D=R(r);l=X(D,i),D.forEach(v),a=M(T),o=k(T,"SPAN",{class:!0});var m=R(o);d=X(m,u),m.forEach(v),T.forEach(v),y.forEach(v),this.h()},h(){f(r,"class","dm-username svelte-13lnlb2"),f(o,"class","dm-status svelte-13lnlb2"),f(s,"class","dm-user-details svelte-13lnlb2"),f(e,"class","dm-user-info svelte-13lnlb2")},m(g,y){j(g,e,y),_.m(e,null),c(e,t),c(e,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d)},p(g,y){h===(h=p(g))&&_?_.p(g,y):(_.d(1),_=h(g),_&&(_.c(),_.m(e,t))),y&1&&i!==(i=g[0].username+"")&&re(l,i),y&1&&u!==(u=(g[0].status||"active")+"")&&re(d,u)},d(g){g&&v(e),_.d()}}}function vg(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=w("div"),s=Z(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=R(e);s=X(i,t),i.forEach(v),this.h()},h(){f(e,"class","dm-avatar-placeholder svelte-13lnlb2"),Te(e,"background-color",n[0].color)},m(r,i){j(r,e,i),c(e,s)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&re(s,t),i&1&&Te(e,"background-color",r[0].color)},d(r){r&&v(e)}}}function _g(n){let e,t,s;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){He(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","dm-avatar svelte-13lnlb2")},m(r,i){j(r,e,i)},p(r,i){i&1&&!He(e.src,t=r[0].profilePicture)&&f(e,"src",t),i&1&&s!==(s=r[0].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function bg(n){let e,t;return e=new wc({props:{messages:n[2],onReply:yg,firstUnreadMessageId:null}}),{c(){et(e.$$.fragment)},l(s){$e(e.$$.fragment,s)},m(s,r){Qe(e,s,r),t=!0},p(s,r){const i={};r&4&&(i.messages=s[2]),e.$set(i)},i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ce(e.$$.fragment,s),t=!1},d(s){Je(e,s)}}}function kg(n){let e,t,s,r=(n[0]?.username||"this user")+"",i,l;return{c(){e=w("div"),t=w("p"),s=Z("Start a conversation with "),i=Z(r),l=Z("!"),this.h()},l(a){e=k(a,"DIV",{class:!0});var o=R(e);t=k(o,"P",{});var u=R(t);s=X(u,"Start a conversation with "),i=X(u,r),l=X(u,"!"),u.forEach(v),o.forEach(v),this.h()},h(){f(e,"class","dm-empty svelte-13lnlb2")},m(a,o){j(a,e,o),c(e,t),c(t,s),c(t,i),c(t,l)},p(a,o){o&1&&r!==(r=(a[0]?.username||"this user")+"")&&re(i,r)},i:Oe,o:Oe,d(a){a&&v(e)}}}function wg(n){let e,t,s,r,i="âœ•",l,a,o,u,d,p,h,_,g,y,T,D="âž¤",m,C,b,A;function I(O,B){return O[0]?mg:gg}let E=I(n),N=E(n);const S=[kg,bg],F=[];function P(O,B){return O[2].length===0?0:1}return o=P(n),u=F[o]=S[o](n),{c(){e=w("div"),t=w("div"),N.c(),s=z(),r=w("button"),r.textContent=i,l=z(),a=w("div"),u.c(),d=z(),p=w("form"),h=w("textarea"),g=z(),y=w("button"),T=w("span"),T.textContent=D,this.h()},l(O){e=k(O,"DIV",{class:!0});var B=R(e);t=k(B,"DIV",{class:!0});var x=R(t);N.l(x),s=M(x),r=k(x,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(r)!=="svelte-1ahzpng"&&(r.textContent=i),x.forEach(v),l=M(B),a=k(B,"DIV",{class:!0});var L=R(a);u.l(L),L.forEach(v),d=M(B),p=k(B,"FORM",{class:!0});var H=R(p);h=k(H,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),R(h).forEach(v),g=M(H),y=k(H,"BUTTON",{type:!0,class:!0});var V=R(y);T=k(V,"SPAN",{class:!0,"data-svelte-h":!0}),J(T)!=="svelte-o5j1g1"&&(T.textContent=D),V.forEach(v),H.forEach(v),B.forEach(v),this.h()},h(){f(r,"class","dm-close-btn svelte-13lnlb2"),f(r,"title","Close DM"),f(t,"class","dm-header svelte-13lnlb2"),f(a,"class","dm-messages svelte-13lnlb2"),f(h,"placeholder",_=n[0]?`Message ${n[0].username}...`:"Type a message..."),f(h,"rows","1"),f(h,"class","dm-input svelte-13lnlb2"),f(T,"class","send-icon svelte-13lnlb2"),f(y,"type","submit"),f(y,"class","dm-send-btn svelte-13lnlb2"),y.disabled=m=!n[3].trim(),f(p,"class","dm-input-container svelte-13lnlb2"),f(e,"class","dm-panel svelte-13lnlb2")},m(O,B){j(O,e,B),c(e,t),N.m(t,null),c(t,s),c(t,r),c(e,l),c(e,a),F[o].m(a,null),n[12](a),c(e,d),c(e,p),c(p,h),n[13](h),nt(h,n[3]),c(p,g),c(p,y),c(y,T),C=!0,b||(A=[W(r,"click",function(){yn(n[1])&&n[1].apply(this,arguments)}),W(h,"input",n[14]),W(h,"input",n[6]),W(h,"keydown",n[8]),W(p,"submit",n[7])],b=!0)},p(O,[B]){n=O,E===(E=I(n))&&N?N.p(n,B):(N.d(1),N=E(n),N&&(N.c(),N.m(t,s)));let x=o;o=P(n),o===x?F[o].p(n,B):(En(),Ce(F[x],1,1,()=>{F[x]=null}),Cn(),u=F[o],u?u.p(n,B):(u=F[o]=S[o](n),u.c()),be(u,1),u.m(a,null)),(!C||B&1&&_!==(_=n[0]?`Message ${n[0].username}...`:"Type a message..."))&&f(h,"placeholder",_),B&8&&nt(h,n[3]),(!C||B&8&&m!==(m=!n[3].trim()))&&(y.disabled=m)},i(O){C||(be(u),C=!0)},o(O){Ce(u),C=!1},d(O){O&&v(e),N.d(),F[o].d(),n[12](null),n[13](null),b=!1,Ie(A)}}}function yg(n){}function Eg(n,e,t){let s,r,i;Pe(n,Bt,b=>t(10,r=b)),Pe(n,Tt,b=>t(11,i=b));let{dmChannelId:l=null}=e,{otherUser:a=null}=e,{onClose:o}=e,u="",d,p,h;async function _(){await Oo(),d&&t(4,d.scrollTop=d.scrollHeight,d)}function g(){h&&(t(5,h.style.height="auto",h),t(5,h.style.height=h.scrollHeight+"px",h)),clearTimeout(p),Gn(!0),p=setTimeout(()=>{Gn(!1)},2e3)}function y(b){b.preventDefault(),!(!u.trim()||!l)&&(cs(l,u.trim(),"text"),t(3,u=""),h&&t(5,h.style.height="auto",h),Gn(!1),clearTimeout(p))}function T(b){b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),y(b))}function D(b){it[b?"unshift":"push"](()=>{d=b,t(4,d)})}function m(b){it[b?"unshift":"push"](()=>{h=b,t(5,h)})}function C(){u=this.value,t(3,u)}return n.$$set=b=>{"dmChannelId"in b&&t(9,l=b.dmChannelId),"otherUser"in b&&t(0,a=b.otherUser),"onClose"in b&&t(1,o=b.onClose)},n.$$.update=()=>{n.$$.dirty&2560&&t(2,s=l?i[l]||[]:[]),n.$$.dirty&1536&&l&&r.find(b=>b.id===l),n.$$.dirty&4&&s.length>0&&_()},[a,o,s,u,d,h,g,y,T,l,r,i,D,m,C]}class Cg extends ht{constructor(e){super(),pt(this,e,Eg,wg,dt,{dmChannelId:9,otherUser:0,onClose:1})}}const{window:Io}=Kr;function Tg(n){let e,t,s,r,i,l,a,o,u,d,p,h,_,g,y,T,D,m,C=n[2]?"â†’":"â†",b,A,I,E,N,S,F,P;function O(U){n[21](U)}let B={};n[1]!==void 0&&(B.activeView=n[1]),s=new Op({props:B}),it.push(()=>Ut(s,"activeView",O)),d=new Vh({});function x(U){n[22](U)}let L={};n[1]!==void 0&&(L.activeView=n[1]),_=new fg({props:L}),it.push(()=>Ut(_,"activeView",x));let H=n[2]&&Do(n),V=n[3]&&No(n);return N=new pg({}),{c(){e=w("div"),t=w("div"),et(s.$$.fragment),i=z(),l=w("div"),a=z(),o=w("div"),u=w("div"),et(d.$$.fragment),p=z(),h=w("div"),et(_.$$.fragment),y=z(),H&&H.c(),T=z(),V&&V.c(),D=z(),m=w("button"),b=Z(C),E=z(),et(N.$$.fragment),this.h()},l(U){e=k(U,"DIV",{class:!0});var G=R(e);t=k(G,"DIV",{class:!0,style:!0});var Y=R(t);$e(s.$$.fragment,Y),i=M(Y),l=k(Y,"DIV",{class:!0}),R(l).forEach(v),Y.forEach(v),a=M(G),o=k(G,"DIV",{class:!0});var K=R(o);u=k(K,"DIV",{class:!0});var $=R(u);$e(d.$$.fragment,$),$.forEach(v),p=M(K),h=k(K,"DIV",{class:!0});var ee=R(h);$e(_.$$.fragment,ee),ee.forEach(v),K.forEach(v),y=M(G),H&&H.l(G),T=M(G),V&&V.l(G),D=M(G),m=k(G,"BUTTON",{class:!0,title:!0,style:!0});var ae=R(m);b=X(ae,C),ae.forEach(v),G.forEach(v),E=M(U),$e(N.$$.fragment,U),this.h()},h(){f(l,"class","resize-handle resize-handle-channel svelte-1ffig2h"),f(t,"class","channel-sidebar-container svelte-1ffig2h"),Te(t,"width",n[6]+"px"),f(u,"class","svelte-1ffig2h"),he(u,"hidden",n[1]!=="chat"),f(h,"class","svelte-1ffig2h"),he(h,"hidden",n[1]!=="screen"),f(o,"class","main-content svelte-1ffig2h"),f(m,"class","user-panel-toggle svelte-1ffig2h"),f(m,"title",A=n[2]?"Hide user panel":"Show user panel"),f(m,"style",I=n[2]?`right: ${n[7]+(n[3]?n[8]:0)}px`:n[3]?`right: ${n[8]}px`:"right: 0"),he(m,"open",n[2]),f(e,"class","app-container svelte-1ffig2h"),he(e,"resizing",n[9]||n[10]||n[11])},m(U,G){j(U,e,G),c(e,t),Qe(s,t,null),c(t,i),c(t,l),c(e,a),c(e,o),c(o,u),Qe(d,u,null),c(o,p),c(o,h),Qe(_,h,null),c(e,y),H&&H.m(e,null),c(e,T),V&&V.m(e,null),c(e,D),c(e,m),c(m,b),j(U,E,G),Qe(N,U,G),S=!0,F||(P=[W(l,"mousedown",n[13]),W(m,"click",n[23])],F=!0)},p(U,G){const Y={};!r&&G&2&&(r=!0,Y.activeView=U[1],Lt(()=>r=!1)),s.$set(Y),(!S||G&64)&&Te(t,"width",U[6]+"px"),(!S||G&2)&&he(u,"hidden",U[1]!=="chat");const K={};!g&&G&2&&(g=!0,K.activeView=U[1],Lt(()=>g=!1)),_.$set(K),(!S||G&2)&&he(h,"hidden",U[1]!=="screen"),U[2]?H?(H.p(U,G),G&4&&be(H,1)):(H=Do(U),H.c(),be(H,1),H.m(e,T)):H&&(En(),Ce(H,1,1,()=>{H=null}),Cn()),U[3]?V?(V.p(U,G),G&8&&be(V,1)):(V=No(U),V.c(),be(V,1),V.m(e,D)):V&&(En(),Ce(V,1,1,()=>{V=null}),Cn()),(!S||G&4)&&C!==(C=U[2]?"â†’":"â†")&&re(b,C),(!S||G&4&&A!==(A=U[2]?"Hide user panel":"Show user panel"))&&f(m,"title",A),(!S||G&396&&I!==(I=U[2]?`right: ${U[7]+(U[3]?U[8]:0)}px`:U[3]?`right: ${U[8]}px`:"right: 0"))&&f(m,"style",I),(!S||G&4)&&he(m,"open",U[2]),(!S||G&3584)&&he(e,"resizing",U[9]||U[10]||U[11])},i(U){S||(be(s.$$.fragment,U),be(d.$$.fragment,U),be(_.$$.fragment,U),be(H),be(V),be(N.$$.fragment,U),S=!0)},o(U){Ce(s.$$.fragment,U),Ce(d.$$.fragment,U),Ce(_.$$.fragment,U),Ce(H),Ce(V),Ce(N.$$.fragment,U),S=!1},d(U){U&&(v(e),v(E)),Je(s),Je(d),Je(_),H&&H.d(),V&&V.d(),Je(N,U),F=!1,Ie(P)}}}function Ag(n){let e,t;return e=new gp({}),e.$on("login",n[12]),{c(){et(e.$$.fragment)},l(s){$e(e.$$.fragment,s)},m(s,r){Qe(e,s,r),t=!0},p:Oe,i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ce(e.$$.fragment,s),t=!1},d(s){Je(e,s)}}}function Do(n){let e,t,s,r,i,l,a;return r=new sg({}),r.$on("openDM",n[18]),{c(){e=w("div"),t=w("div"),s=z(),et(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var u=R(e);t=k(u,"DIV",{class:!0}),R(t).forEach(v),s=M(u),$e(r.$$.fragment,u),u.forEach(v),this.h()},h(){f(t,"class","resize-handle resize-handle-user svelte-1ffig2h"),f(e,"class","user-panel-container svelte-1ffig2h"),Te(e,"width",n[7]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,s),Qe(r,e,null),i=!0,l||(a=W(t,"mousedown",n[14]),l=!0)},p(o,u){(!i||u&128)&&Te(e,"width",o[7]+"px")},i(o){i||(be(r.$$.fragment,o),i=!0)},o(o){Ce(r.$$.fragment,o),i=!1},d(o){o&&v(e),Je(r),l=!1,a()}}}function No(n){let e,t,s,r,i,l,a;return r=new Cg({props:{dmChannelId:n[4],otherUser:n[5],onClose:n[19]}}),{c(){e=w("div"),t=w("div"),s=z(),et(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var u=R(e);t=k(u,"DIV",{class:!0}),R(t).forEach(v),s=M(u),$e(r.$$.fragment,u),u.forEach(v),this.h()},h(){f(t,"class","resize-handle resize-handle-dm svelte-1ffig2h"),f(e,"class","dm-panel-container svelte-1ffig2h"),Te(e,"width",n[8]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,s),Qe(r,e,null),i=!0,l||(a=W(t,"mousedown",n[15]),l=!0)},p(o,u){const d={};u&16&&(d.dmChannelId=o[4]),u&32&&(d.otherUser=o[5]),r.$set(d),(!i||u&256)&&Te(e,"width",o[8]+"px")},i(o){i||(be(r.$$.fragment,o),i=!0)},o(o){Ce(r.$$.fragment,o),i=!1},d(o){o&&v(e),Je(r),l=!1,a()}}}function Sg(n){let e,t,s,r,i,l;const a=[Ag,Tg],o=[];function u(d,p){return d[0]?1:0}return e=u(n),t=o[e]=a[e](n),{c(){t.c(),s=Me()},l(d){t.l(d),s=Me()},m(d,p){o[e].m(d,p),j(d,s,p),r=!0,i||(l=[W(Io,"mousemove",n[16]),W(Io,"mouseup",n[17])],i=!0)},p(d,[p]){let h=e;e=u(d),e===h?o[e].p(d,p):(En(),Ce(o[h],1,1,()=>{o[h]=null}),Cn(),t=o[e],t?t.p(d,p):(t=o[e]=a[e](d),t.c()),be(t,1),t.m(s.parentNode,s))},i(d){r||(be(t),r=!0)},o(d){Ce(t),r=!1},d(d){d&&v(s),o[e].d(d),i=!1,Ie(l)}}}function Ig(n,e,t){let{data:s}=e,r="",i=!1,l="chat",a=!1,o=!1,u=null,d=null,p=240,h=250,_=350,g=!1,y=!1,T=!1;function D(O){r=O.detail,Qf(r),t(0,i=!0)}function m(O){t(9,g=!0),O.preventDefault()}function C(O){t(10,y=!0),O.preventDefault()}function b(O){t(11,T=!0),O.preventDefault()}function A(O){if(g){const B=O.clientX;B>=180&&B<=400&&t(6,p=B)}else if(y){const B=window.innerWidth-O.clientX;B>=200&&B<=500&&t(7,h=B)}else if(T){const B=window.innerWidth-O.clientX;B>=300&&B<=600&&t(8,_=B)}}function I(){t(9,g=!1),t(10,y=!1),t(11,T=!1)}function E(O){t(4,u=O.detail.channelId),t(5,d=O.detail.otherUser),t(3,o=!0)}function N(){t(3,o=!1),t(4,u=null),t(5,d=null)}Mo(()=>{sd()});function S(O){l=O,t(1,l)}function F(O){l=O,t(1,l)}const P=()=>t(2,a=!a);return n.$$set=O=>{"data"in O&&t(20,s=O.data)},[i,l,a,o,u,d,p,h,_,g,y,T,D,m,C,b,A,I,E,N,s,S,F,P]}class zg extends ht{constructor(e){super(),pt(this,e,Ig,Sg,dt,{data:20})}}export{zg as component};
