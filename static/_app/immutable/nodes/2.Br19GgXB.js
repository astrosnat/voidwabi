import{z as Ae,s as ct,n as De,d as b,N as $e,i as q,f as c,O as G,w as d,h as y,j as N,l as M,P as Q,m as k,o as z,Q as Or,q as Re,R as Ue,e as re,S as ot,k as Z,t as J,T as Zt,x as Te,p as Oe,A as In,y as Je,U as Ns,V as Ot,W as oo,X as co,Y as ge,Z as ic,_ as lc,$ as ri,a0 as uo,H as ac,a1 as oc,a2 as cc,a3 as fo}from"../chunks/DtNMkya2.js";import{a as be,S as ut,i as ft,f as Mt,d as He,t as Ie,g as xn,c as jn,m as Ge,e as We,b as Ye}from"../chunks/CiatsH2b.js";import{w as _t}from"../chunks/Cid0SPyj.js";import{b as Le}from"../chunks/z6mVhR0x.js";/* empty css                */const Mr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function je(n){return n?.length!==void 0?n:Array.from(n)}function Jt(n,e){n.d(1),e.delete(n.key)}function Qt(n,e,t,s,r,i,l,a,o,u,f,p){let h=n.length,_=i.length,g=h;const T={};for(;g--;)T[n[g].key]=g;const C=[],I=new Map,v=new Map,w=[];for(g=_;g--;){const E=p(r,i,g),R=t(E);let D=l.get(R);D?w.push(()=>D.p(E,e)):(D=u(R,E),D.c()),I.set(R,C[g]=D),R in T&&v.set(R,Math.abs(g-T[R]))}const m=new Set,S=new Set;function A(E){be(E,1),E.m(a,f),l.set(E.key,E),f=E.first,_--}for(;h&&_;){const E=C[_-1],R=n[h-1],D=E.key,F=R.key;E===R?(f=E.first,h--,_--):I.has(F)?!l.has(D)||m.has(D)?A(E):S.has(F)?h--:v.get(D)>v.get(F)?(S.add(D),A(E)):(m.add(F),h--):(o(R,l),h--)}for(;h--;){const E=n[h];I.has(E.key)||o(E,l)}for(;_;)A(C[_-1]);return Ae(w),C}const rn=Object.create(null);rn.open="0";rn.close="1";rn.ping="2";rn.pong="3";rn.message="4";rn.upgrade="5";rn.noop="6";const ys=Object.create(null);Object.keys(rn).forEach(n=>{ys[rn[n]]=n});const kr={type:"error",data:"parser error"},ho=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",po=typeof ArrayBuffer=="function",go=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,zr=({type:n,data:e},t,s)=>ho&&e instanceof Blob?t?s(e):ii(e,s):po&&(e instanceof ArrayBuffer||go(e))?t?s(e):ii(new Blob([e]),s):s(rn[n]+(e||"")),ii=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function li(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Bs;function uc(n,e){if(ho&&n.data instanceof Blob)return n.data.arrayBuffer().then(li).then(e);if(po&&(n.data instanceof ArrayBuffer||go(n.data)))return e(li(n.data));zr(n,!1,t=>{Bs||(Bs=new TextEncoder),e(Bs.encode(t))})}const ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ts=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ai.length;n++)ts[ai.charCodeAt(n)]=n;const fc=n=>{let e=n.length*.75,t=n.length,s,r=0,i,l,a,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(s=0;s<t;s+=4)i=ts[n.charCodeAt(s)],l=ts[n.charCodeAt(s+1)],a=ts[n.charCodeAt(s+2)],o=ts[n.charCodeAt(s+3)],f[r++]=i<<2|l>>4,f[r++]=(l&15)<<4|a>>2,f[r++]=(a&3)<<6|o&63;return u},dc=typeof ArrayBuffer=="function",Fr=(n,e)=>{if(typeof n!="string")return{type:"message",data:mo(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:hc(n.substring(1),e)}:ys[t]?n.length>1?{type:ys[t],data:n.substring(1)}:{type:ys[t]}:kr},hc=(n,e)=>{if(dc){const t=fc(n);return mo(t,e)}else return{base64:!0,data:n}},mo=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},vo="",pc=(n,e)=>{const t=n.length,s=new Array(t);let r=0;n.forEach((i,l)=>{zr(i,!1,a=>{s[l]=a,++r===t&&e(s.join(vo))})})},gc=(n,e)=>{const t=n.split(vo),s=[];for(let r=0;r<t.length;r++){const i=Fr(t[r],e);if(s.push(i),i.type==="error")break}return s};function mc(){return new TransformStream({transform(n,e){uc(n,t=>{const s=t.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Us;function fs(n){return n.reduce((e,t)=>e+t.length,0)}function ds(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)t[r]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function vc(n,e){Us||(Us=new TextDecoder);const t=[];let s=0,r=-1,i=!1;return new TransformStream({transform(l,a){for(t.push(l);;){if(s===0){if(fs(t)<1)break;const o=ds(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(fs(t)<2)break;const o=ds(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),s=3}else if(s===2){if(fs(t)<8)break;const o=ds(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){a.enqueue(kr);break}r=f*Math.pow(2,32)+u.getUint32(4),s=3}else{if(fs(t)<r)break;const o=ds(t,r);a.enqueue(Fr(i?o:Us.decode(o),e)),s=0}if(r===0||r>n){a.enqueue(kr);break}}}})}const _o=4;function at(n){if(n)return _c(n)}function _c(n){for(var e in at.prototype)n[e]=at.prototype[e];return n}at.prototype.on=at.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};at.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};at.prototype.off=at.prototype.removeListener=at.prototype.removeAllListeners=at.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};at.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};at.prototype.emitReserved=at.prototype.emit;at.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};at.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ps=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),xt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),bc="arraybuffer";function bo(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const yc=xt.setTimeout,kc=xt.clearTimeout;function Os(n,e){e.useNativeTimers?(n.setTimeoutFn=yc.bind(xt),n.clearTimeoutFn=kc.bind(xt)):(n.setTimeoutFn=xt.setTimeout.bind(xt),n.clearTimeoutFn=xt.clearTimeout.bind(xt))}const wc=1.33;function Ec(n){return typeof n=="string"?Tc(n):Math.ceil((n.byteLength||n.size)*wc)}function Tc(n){let e=0,t=0;for(let s=0,r=n.length;s<r;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function yo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ac(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Sc(n){let e={},t=n.split("&");for(let s=0,r=t.length;s<r;s++){let i=t[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Cc extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Lr extends at{constructor(e){super(),this.writable=!1,Os(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Cc(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Fr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ac(e);return t.length?"?"+t:""}}class Ic extends Lr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};gc(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,pc(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=yo()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let ko=!1;try{ko=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Dc=ko;function Rc(){}class Nc extends Ic{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class sn extends at{constructor(e,t,s){super(),this.createRequest=e,Os(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=bo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=sn.requestsCount++,sn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Rc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete sn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}sn.requestsCount=0;sn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",oi);else if(typeof addEventListener=="function"){const n="onpagehide"in xt?"pagehide":"unload";addEventListener(n,oi,!1)}}function oi(){for(let n in sn.requests)sn.requests.hasOwnProperty(n)&&sn.requests[n].abort()}const Pc=(function(){const n=wo({xdomain:!1});return n&&n.responseType!==null})();class Oc extends Nc{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Pc&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new sn(wo,this.uri(),e)}}function wo(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Dc))return new XMLHttpRequest}catch{}if(!e)try{return new xt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Eo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Mc extends Lr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Eo?{}:bo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;zr(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&Ps(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=yo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const xs=xt.WebSocket||xt.MozWebSocket;class zc extends Mc{createSocket(e,t,s){return Eo?new xs(e,t,s):t?new xs(e,t):new xs(e)}doWrite(e,t){this.ws.send(t)}}class Fc extends Lr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=vc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=mc();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:a,value:o})=>{a||(this.onPacket(o),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&Ps(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Lc={websocket:zc,webtransport:Fc,polling:Oc},Bc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Uc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function wr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let r=Bc.exec(n||""),i={},l=14;for(;l--;)i[Uc[l]]=r[l]||"";return t!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=xc(i,i.path),i.queryKey=jc(i,i.query),i}function xc(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function jc(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(t[r]=i)}),t}const Er=typeof addEventListener=="function"&&typeof removeEventListener=="function",ks=[];Er&&addEventListener("offline",()=>{ks.forEach(n=>n())},!1);class gn extends at{constructor(e,t){if(super(),this.binaryType=bc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=wr(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=wr(t.host).host);Os(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Sc(this.opts.query)),Er&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ks.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=_o,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(t+=Ec(r)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ps(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Er&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=ks.indexOf(this._offlineEventListener);s!==-1&&ks.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}gn.protocol=_o;class Vc extends gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;gn.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;gn.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,f(),t.close(),t=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function a(){l("transport closed")}function o(){l("socket closed")}function u(p){t&&p.name!==t.name&&i()}const f=()=>{t.removeListener("open",r),t.removeListener("error",l),t.removeListener("close",a),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",l),t.once("close",a),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let qc=class extends Vc{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>Lc[r]).filter(r=>!!r)),super(e,s)}};function Hc(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=wr(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(t&&t.port===s.port?"":":"+s.port),s}const Gc=typeof ArrayBuffer=="function",Wc=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,To=Object.prototype.toString,Yc=typeof Blob=="function"||typeof Blob<"u"&&To.call(Blob)==="[object BlobConstructor]",Kc=typeof File=="function"||typeof File<"u"&&To.call(File)==="[object FileConstructor]";function Br(n){return Gc&&(n instanceof ArrayBuffer||Wc(n))||Yc&&n instanceof Blob||Kc&&n instanceof File}function ws(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(ws(n[t]))return!0;return!1}if(Br(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return ws(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ws(n[t]))return!0;return!1}function Xc(n){const e=[],t=n.data,s=n;return s.data=Tr(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Tr(n,e){if(!n)return n;if(Br(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Tr(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Tr(n[s],e));return t}return n}function Zc(n,e){return n.data=Ar(n.data,e),delete n.attachments,n}function Ar(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Ar(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Ar(n[t],e));return n}const Jc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Qc=5;var Me;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(Me||(Me={}));class $c{constructor(e){this.replacer=e}encode(e){return(e.type===Me.EVENT||e.type===Me.ACK)&&ws(e)?this.encodeAsBinary({type:e.type===Me.EVENT?Me.BINARY_EVENT:Me.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Me.BINARY_EVENT||e.type===Me.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Xc(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function ci(n){return Object.prototype.toString.call(n)==="[object Object]"}class Ur extends at{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===Me.BINARY_EVENT;s||t.type===Me.BINARY_ACK?(t.type=s?Me.EVENT:Me.ACK,this.reconstructor=new eu(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Br(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(Me[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Me.BINARY_EVENT||s.type===Me.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(i,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(i,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(Ur.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Me.CONNECT:return ci(t);case Me.DISCONNECT:return t===void 0;case Me.CONNECT_ERROR:return typeof t=="string"||ci(t);case Me.EVENT:case Me.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Jc.indexOf(t[0])===-1);case Me.ACK:case Me.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class eu{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Zc(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const tu=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ur,Encoder:$c,get PacketType(){return Me},protocol:Qc},Symbol.toStringTag,{value:"Module"}));function Wt(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const nu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ao extends at{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wt(e,"open",this.onopen.bind(this)),Wt(e,"packet",this.onpacket.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,i;if(nu.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:Me.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),l.id=f}const a=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(o?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r),l=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((s,r)=>{const i=(l,a)=>l?r(l):s(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Me.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Me.EVENT:case Me.BINARY_EVENT:this.onevent(e);break;case Me.ACK:case Me.BINARY_ACK:this.onack(e);break;case Me.DISCONNECT:this.ondisconnect();break;case Me.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:Me.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Vn(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Vn.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Vn.prototype.reset=function(){this.attempts=0};Vn.prototype.setMin=function(n){this.ms=n};Vn.prototype.setMax=function(n){this.max=n};Vn.prototype.setJitter=function(n){this.jitter=n};class Sr extends at{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Os(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Vn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||tu;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new qc(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Wt(t,"open",function(){s.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},l=Wt(t,"error",i);if(this._timeout!==!1){const a=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wt(e,"ping",this.onping.bind(this)),Wt(e,"data",this.ondata.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this)),Wt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ps(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ao(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Wn={};function Es(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=Hc(n,e.path||"/socket.io"),s=t.source,r=t.id,i=t.path,l=Wn[r]&&i in Wn[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let o;return a?o=new Sr(s,e):(Wn[r]||(Wn[r]=new Sr(s,e)),o=Wn[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(Es,{Manager:Sr,Socket:Ao,io:Es,connect:Es});let nt=null;function So(){Le&&(nt||(nt=new(window.AudioContext||window.webkitAudioContext)))}function su(){if(!Le||(So(),!nt))return;const n=nt.createOscillator(),e=nt.createGain();n.connect(e),e.connect(nt.destination),n.frequency.value=800,n.type="sine",e.gain.setValueAtTime(.1,nt.currentTime),e.gain.exponentialRampToValueAtTime(.01,nt.currentTime+.1),n.start(nt.currentTime),n.stop(nt.currentTime+.1)}function Co(){if(!Le||(So(),!nt))return;const n=()=>{const e=nt.createOscillator(),t=nt.createOscillator(),s=nt.createGain();e.connect(s),t.connect(s),s.connect(nt.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",s.gain.setValueAtTime(.15,nt.currentTime),s.gain.exponentialRampToValueAtTime(.01,nt.currentTime+.8),e.start(nt.currentTime),t.start(nt.currentTime),e.stop(nt.currentTime+.8),t.stop(nt.currentTime+.8)};n(),setTimeout(n,1e3)}function ru(n,e,t){if(!Le||e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(su(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let r="",i="",l="/icon-192.png";const a=t?`${n.user} in #${t}`:n.user;switch(n.type){case"text":r=a,i=n.text;break;case"gif":r=a,i="ðŸŽ¬ Sent a GIF";break;case"file":r=a,i=`ðŸ“Ž Sent a file: ${n.fileName}`;break}const o=new Notification(r,{body:i,icon:l,badge:l,tag:`message-${n.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function iu(n,e,t,s){if(!Le)return null;if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;Co();const i=`Incoming ${e?"Video":"Voice"} Call`,l=`${n} is calling...`,a="/icon-192.png",o=new Notification(i,{body:l,icon:a,badge:a,tag:`call-${n}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function xr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Nn=xr();function Io(n){Nn=n}var rs={exec:()=>null};function Fe(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(r,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(St.caret,"$1"),t=t.replace(r,l),s},getRegex:()=>new RegExp(t,e)};return s}var lu=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),St={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},au=/^(?:[ \t]*(?:\n|$))+/,ou=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cu=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,as=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,uu=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,jr=/(?:[*+-]|\d{1,9}[.)])/,Do=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ro=Fe(Do).replace(/bull/g,jr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),fu=Fe(Do).replace(/bull/g,jr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Vr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,du=/^[^\n]+/,qr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,hu=Fe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",qr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),pu=Fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,jr).getRegex(),Ms="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Hr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,gu=Fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Hr).replace("tag",Ms).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),No=Fe(Vr).replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex(),mu=Fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",No).getRegex(),Gr={blockquote:mu,code:ou,def:hu,fences:cu,heading:uu,hr:as,html:gu,lheading:Ro,list:pu,newline:au,paragraph:No,table:rs,text:du},ui=Fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex(),vu={...Gr,lheading:fu,table:ui,paragraph:Fe(Vr).replace("hr",as).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ui).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ms).getRegex()},_u={...Gr,html:Fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Hr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Fe(Vr).replace("hr",as).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ro).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bu=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yu=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Po=/^( {2,}|\\)\n(?!\s*$)/,ku=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,zs=/[\p{P}\p{S}]/u,Wr=/[\s\p{P}\p{S}]/u,Oo=/[^\s\p{P}\p{S}]/u,wu=Fe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Wr).getRegex(),Mo=/(?!~)[\p{P}\p{S}]/u,Eu=/(?!~)[\s\p{P}\p{S}]/u,Tu=/(?:[^\s\p{P}\p{S}]|~)/u,Au=Fe(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",lu?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),zo=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Su=Fe(zo,"u").replace(/punct/g,zs).getRegex(),Cu=Fe(zo,"u").replace(/punct/g,Mo).getRegex(),Fo="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Iu=Fe(Fo,"gu").replace(/notPunctSpace/g,Oo).replace(/punctSpace/g,Wr).replace(/punct/g,zs).getRegex(),Du=Fe(Fo,"gu").replace(/notPunctSpace/g,Tu).replace(/punctSpace/g,Eu).replace(/punct/g,Mo).getRegex(),Ru=Fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Oo).replace(/punctSpace/g,Wr).replace(/punct/g,zs).getRegex(),Nu=Fe(/\\(punct)/,"gu").replace(/punct/g,zs).getRegex(),Pu=Fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ou=Fe(Hr).replace("(?:-->|$)","-->").getRegex(),Mu=Fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ou).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),As=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,zu=Fe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",As).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Lo=Fe(/^!?\[(label)\]\[(ref)\]/).replace("label",As).replace("ref",qr).getRegex(),Bo=Fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",qr).getRegex(),Fu=Fe("reflink|nolink(?!\\()","g").replace("reflink",Lo).replace("nolink",Bo).getRegex(),fi=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Yr={_backpedal:rs,anyPunctuation:Nu,autolink:Pu,blockSkip:Au,br:Po,code:yu,del:rs,emStrongLDelim:Su,emStrongRDelimAst:Iu,emStrongRDelimUnd:Ru,escape:bu,link:zu,nolink:Bo,punctuation:wu,reflink:Lo,reflinkSearch:Fu,tag:Mu,text:ku,url:rs},Lu={...Yr,link:Fe(/^!?\[(label)\]\((.*?)\)/).replace("label",As).getRegex(),reflink:Fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",As).getRegex()},Cr={...Yr,emStrongRDelimAst:Du,emStrongLDelim:Cu,url:Fe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",fi).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Fe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",fi).getRegex()},Bu={...Cr,br:Fe(Po).replace("{2,}","*").getRegex(),text:Fe(Cr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},hs={normal:Gr,gfm:vu,pedantic:_u},Yn={normal:Yr,gfm:Cr,breaks:Bu,pedantic:Lu},Uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},di=n=>Uu[n];function un(n,e){if(e){if(St.escapeTest.test(n))return n.replace(St.escapeReplace,di)}else if(St.escapeTestNoEncode.test(n))return n.replace(St.escapeReplaceNoEncode,di);return n}function hi(n){try{n=encodeURI(n).replace(St.percentDecode,"%")}catch{return null}return n}function pi(n,e){let t=n.replace(St.findPipe,(i,l,a)=>{let o=!1,u=l;for(;--u>=0&&a[u]==="\\";)o=!o;return o?"|":" |"}),s=t.split(St.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(St.slashPipe,"|");return s}function Kn(n,e,t){let s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function xu(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function gi(n,e,t,s,r){let i=e.href,l=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:l,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}function ju(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let r=s[1];return e.split(`
`).map(i=>{let l=i.match(t.other.beginningSpace);if(l===null)return i;let[a]=l;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}var Ss=class{options;rules;lexer;constructor(n){this.options=n||Nn}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Kn(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=ju(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=Kn(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Kn(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Kn(e[0],`
`).split(`
`),s="",r="",i=[];for(;t.length>0;){let l=!1,a=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))a.push(t[o]),l=!0;else if(!l)a.push(t[o]);else break;t=t.slice(o);let u=a.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,t.length===0)break;let h=i.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let _=h,g=_.raw+`
`+t.join(`
`),T=this.blockquote(g);i[i.length-1]=T,s=s.substring(0,s.length-_.raw.length)+T.raw,r=r.substring(0,r.length-_.text.length)+T.text;break}else if(h?.type==="list"){let _=h,g=_.raw+`
`+t.join(`
`),T=this.list(g);i[i.length-1]=T,s=s.substring(0,s.length-h.raw.length)+T.raw,r=r.substring(0,r.length-_.raw.length)+T.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,r={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let i=this.rules.other.listItemRegex(t),l=!1;for(;n;){let o=!1,u="",f="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),h=n.split(`
`,1)[0],_=!p.trim(),g=0;if(this.options.pedantic?(g=2,f=p.trimStart()):_?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,f=p.slice(g),g+=e[1].length),_&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,n=n.substring(h.length+1),o=!0),!o){let T=this.rules.other.nextBulletRegex(g),C=this.rules.other.hrRegex(g),I=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),w=this.rules.other.htmlBeginRegex(g);for(;n;){let m=n.split(`
`,1)[0],S;if(h=m,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),S=h):S=h.replace(this.rules.other.tabCharGlobal,"    "),I.test(h)||v.test(h)||w.test(h)||T.test(h)||C.test(h))break;if(S.search(this.rules.other.nonSpaceChar)>=g||!h.trim())f+=`
`+S.slice(g);else{if(_||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(p)||v.test(p)||C.test(p))break;f+=`
`+h}!_&&!h.trim()&&(_=!0),u+=m+`
`,n=n.substring(m.length+1),p=S.slice(g)}}r.loose||(l?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0)),r.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(f),loose:!1,text:f,tokens:[]}),r.raw+=u}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let o of r.items){if(this.lexer.state.top=!1,o.tokens=this.lexer.blockTokens(o.text,[]),o.task){if(o.text=o.text.replace(this.rules.other.listReplaceTask,""),o.tokens[0]?.type==="text"||o.tokens[0]?.type==="paragraph"){o.tokens[0].raw=o.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),o.tokens[0].text=o.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let f=this.lexer.inlineQueue.length-1;f>=0;f--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[f].src)){this.lexer.inlineQueue[f].src=this.lexer.inlineQueue[f].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(o.raw);if(u){let f={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};o.checked=f.checked,r.loose?o.tokens[0]&&["paragraph","text"].includes(o.tokens[0].type)&&"tokens"in o.tokens[0]&&o.tokens[0].tokens?(o.tokens[0].raw=f.raw+o.tokens[0].raw,o.tokens[0].text=f.raw+o.tokens[0].text,o.tokens[0].tokens.unshift(f)):o.tokens.unshift({type:"paragraph",raw:f.raw,text:f.raw,tokens:[f]}):o.tokens.unshift(f)}}if(!r.loose){let u=o.tokens.filter(p=>p.type==="space"),f=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=f}}if(r.loose)for(let o of r.items){o.loose=!0;for(let u of o.tokens)u.type==="text"&&(u.type="paragraph")}return r}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:r}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=pi(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(pi(l,i.header.length).map((a,o)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[o]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=Kn(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=xu(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),gi(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[s.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return gi(t,r,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...s[0]].length-1,i,l,a=r,o=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+r);(s=u.exec(e))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(l=[...i].length,s[3]||s[4]){a+=l;continue}else if((s[5]||s[6])&&r%3&&!((r+l)%3)){o+=l;continue}if(a-=l,a>0)continue;l=Math.min(l,l+a+o);let f=[...s[0]][0].length,p=n.slice(0,r+s.index+f+l);if(Math.min(r,l)%2){let _=p.slice(1,-1);return{type:"em",raw:p,text:_,tokens:this.lexer.inlineTokens(_)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Kt=class Ir{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nn,this.options.tokenizer=this.options.tokenizer||new Ss,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:St,block:hs.normal,inline:Yn.normal};this.options.pedantic?(t.block=hs.pedantic,t.inline=Yn.pedantic):this.options.gfm&&(t.block=hs.gfm,this.options.breaks?t.inline=Yn.breaks:t.inline=Yn.gfm),this.tokenizer.rules=t}static get rules(){return{block:hs,inline:Yn}}static lex(e,t){return new Ir(t).lex(e)}static lexInline(e,t){return new Ir(t).inlineTokens(e)}lex(e){e=e.replace(St.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(St.tabCharGlobal,"    ").replace(St.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let l=t.at(-1);r.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,a=e.slice(1),o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},a),typeof o=="number"&&o>=0&&(l=Math.min(l,o))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let l=t.at(-1);s&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r),s=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let l=!1,a="";for(;e;){l||(a=""),l=!1;let o;if(this.options.extensions?.inline?.some(f=>(o=f.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let f=t.at(-1);o.type==="text"&&f?.type==="text"?(f.raw+=o.raw,f.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,s,a)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let u=e;if(this.options.extensions?.startInline){let f=1/0,p=e.slice(1),h;this.options.extensions.startInline.forEach(_=>{h=_.call({lexer:this},p),typeof h=="number"&&h>=0&&(f=Math.min(f,h))}),f<1/0&&f>=0&&(u=e.substring(0,f+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(a=o.raw.slice(-1)),l=!0;let f=t.at(-1);f?.type==="text"?(f.raw+=o.raw,f.text+=o.text):t.push(o);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}},Cs=class{options;parser;constructor(n){this.options=n||Nn}space(n){return""}code({text:n,lang:e,escaped:t}){let s=(e||"").match(St.notSpaceStart)?.[0],r=n.replace(St.endingNewline,"")+`
`;return s?'<pre><code class="language-'+un(s)+'">'+(t?r:un(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:un(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let l=0;l<n.items.length;l++){let a=n.items[l];s+=this.listitem(a)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+s+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let r=0;r<n.header.length;r++)t+=this.tablecell(n.header[r]);e+=this.tablerow({text:t});let s="";for(let r=0;r<n.rows.length;r++){let i=n.rows[r];t="";for(let l=0;l<i.length;l++)t+=this.tablecell(i[l]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${un(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),r=hi(n);if(r===null)return s;n=r;let i='<a href="'+n+'"';return e&&(i+=' title="'+un(e)+'"'),i+=">"+s+"</a>",i}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let r=hi(n);if(r===null)return un(t);n=r;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${un(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:un(n.text)}},Kr=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},Xt=class Dr{options;renderer;textRenderer;constructor(e){this.options=e||Nn,this.options.renderer=this.options.renderer||new Cs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Kr}static parse(e,t){return new Dr(t).parse(e)}static parseInline(e,t){return new Dr(t).parseInline(e)}parse(e){let t="";for(let s=0;s<e.length;s++){let r=e[s];if(this.options.extensions?.renderers?.[r.type]){let l=r,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){t+=a||"";continue}}let i=r;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}parseInline(e,t=this.renderer){let s="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=a||"";continue}}let l=i;switch(l.type){case"escape":{s+=t.text(l);break}case"html":{s+=t.html(l);break}case"link":{s+=t.link(l);break}case"image":{s+=t.image(l);break}case"checkbox":{s+=t.checkbox(l);break}case"strong":{s+=t.strong(l);break}case"em":{s+=t.em(l);break}case"codespan":{s+=t.codespan(l);break}case"br":{s+=t.br(l);break}case"del":{s+=t.del(l);break}case"text":{s+=t.text(l);break}default:{let a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}},ns=class{options;block;constructor(n){this.options=n||Nn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Kt.lex:Kt.lexInline}provideParser(){return this.block?Xt.parse:Xt.parseInline}},Vu=class{defaults=xr();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Xt;Renderer=Cs;TextRenderer=Kr;Lexer=Kt;Tokenizer=Ss;Hooks=ns;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let s of n)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let r=s;for(let i of r.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of r.rows)for(let l of i)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let r=s;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let l=r[i].flat(1/0);t=t.concat(this.walkTokens(l,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...l){let a=r.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),t.renderer){let r=this.defaults.renderer||new Cs(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,a=t.renderer[l],o=r[l];r[l]=(...u)=>{let f=a.apply(r,u);return f===!1&&(f=o.apply(r,u)),f||""}}s.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new Ss(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,a=t.tokenizer[l],o=r[l];r[l]=(...u)=>{let f=a.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}s.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new ns;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,a=t.hooks[l],o=r[l];ns.passThroughHooks.has(i)?r[l]=u=>{if(this.defaults.async&&ns.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await a.call(r,u);return o.call(r,p)})();let f=a.call(r,u);return o.call(r,f)}:r[l]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let f=a.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}s.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;s.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),r&&(a=a.concat(r.call(this,l))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Kt.lex(n,e??this.defaults)}parser(n,e){return Xt.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let l=r.hooks?await r.hooks.preprocess(e):e,a=await(r.hooks?await r.hooks.provideLexer():n?Kt.lex:Kt.lexInline)(l,r),o=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():n?Xt.parse:Xt.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let l=(r.hooks?r.hooks.provideLexer():n?Kt.lex:Kt.lexInline)(e,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():n?Xt.parse:Xt.parseInline)(l,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(l){return i(l)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+un(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},Dn=new Vu;function Be(n,e){return Dn.parse(n,e)}Be.options=Be.setOptions=function(n){return Dn.setOptions(n),Be.defaults=Dn.defaults,Io(Be.defaults),Be};Be.getDefaults=xr;Be.defaults=Nn;Be.use=function(...n){return Dn.use(...n),Be.defaults=Dn.defaults,Io(Be.defaults),Be};Be.walkTokens=function(n,e){return Dn.walkTokens(n,e)};Be.parseInline=Dn.parseInline;Be.Parser=Xt;Be.parser=Xt.parse;Be.Renderer=Cs;Be.TextRenderer=Kr;Be.Lexer=Kt;Be.lexer=Kt.lex;Be.Tokenizer=Ss;Be.Hooks=ns;Be.parse=Be;Be.options;Be.setOptions;Be.use;Be.walkTokens;Be.parseInline;Xt.parse;Kt.lex;var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var js={exports:{}},vi;function qu(){return vi||(vi=1,(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var t=(function(s){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function v(w){return w instanceof o?new o(w.type,v(w.content),w.alias):Array.isArray(w)?w.map(v):w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(v){return Object.prototype.toString.call(v).slice(8,-1)},objId:function(v){return v.__id||Object.defineProperty(v,"__id",{value:++i}),v.__id},clone:function v(w,m){m=m||{};var S,A;switch(a.util.type(w)){case"Object":if(A=a.util.objId(w),m[A])return m[A];S={},m[A]=S;for(var E in w)w.hasOwnProperty(E)&&(S[E]=v(w[E],m));return S;case"Array":return A=a.util.objId(w),m[A]?m[A]:(S=[],m[A]=S,w.forEach(function(R,D){S[D]=v(R,m)}),S);default:return w}},getLanguage:function(v){for(;v;){var w=r.exec(v.className);if(w)return w[1].toLowerCase();v=v.parentElement}return"none"},setLanguage:function(v,w){v.className=v.className.replace(RegExp(r,"gi"),""),v.classList.add("language-"+w)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(S){var v=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(S.stack)||[])[1];if(v){var w=document.getElementsByTagName("script");for(var m in w)if(w[m].src==v)return w[m]}return null}},isActive:function(v,w,m){for(var S="no-"+w;v;){var A=v.classList;if(A.contains(w))return!0;if(A.contains(S))return!1;v=v.parentElement}return!!m}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(v,w){var m=a.util.clone(a.languages[v]);for(var S in w)m[S]=w[S];return m},insertBefore:function(v,w,m,S){S=S||a.languages;var A=S[v],E={};for(var R in A)if(A.hasOwnProperty(R)){if(R==w)for(var D in m)m.hasOwnProperty(D)&&(E[D]=m[D]);m.hasOwnProperty(R)||(E[R]=A[R])}var F=S[v];return S[v]=E,a.languages.DFS(a.languages,function(O,L){L===F&&O!=v&&(this[O]=E)}),E},DFS:function v(w,m,S,A){A=A||{};var E=a.util.objId;for(var R in w)if(w.hasOwnProperty(R)){m.call(w,R,w[R],S||R);var D=w[R],F=a.util.type(D);F==="Object"&&!A[E(D)]?(A[E(D)]=!0,v(D,m,null,A)):F==="Array"&&!A[E(D)]&&(A[E(D)]=!0,v(D,m,R,A))}}},plugins:{},highlightAll:function(v,w){a.highlightAllUnder(document,v,w)},highlightAllUnder:function(v,w,m){var S={callback:m,container:v,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",S),S.elements=Array.prototype.slice.apply(S.container.querySelectorAll(S.selector)),a.hooks.run("before-all-elements-highlight",S);for(var A=0,E;E=S.elements[A++];)a.highlightElement(E,w===!0,S.callback)},highlightElement:function(v,w,m){var S=a.util.getLanguage(v),A=a.languages[S];a.util.setLanguage(v,S);var E=v.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(E,S);var R=v.textContent,D={element:v,language:S,grammar:A,code:R};function F(L){D.highlightedCode=L,a.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,a.hooks.run("after-highlight",D),a.hooks.run("complete",D),m&&m.call(D.element)}if(a.hooks.run("before-sanity-check",D),E=D.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!D.code){a.hooks.run("complete",D),m&&m.call(D.element);return}if(a.hooks.run("before-highlight",D),!D.grammar){F(a.util.encode(D.code));return}if(w&&s.Worker){var O=new Worker(a.filename);O.onmessage=function(L){F(L.data)},O.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else F(a.highlight(D.code,D.grammar,D.language))},highlight:function(v,w,m){var S={code:v,grammar:w,language:m};if(a.hooks.run("before-tokenize",S),!S.grammar)throw new Error('The language "'+S.language+'" has no grammar.');return S.tokens=a.tokenize(S.code,S.grammar),a.hooks.run("after-tokenize",S),o.stringify(a.util.encode(S.tokens),S.language)},tokenize:function(v,w){var m=w.rest;if(m){for(var S in m)w[S]=m[S];delete w.rest}var A=new p;return h(A,A.head,v),f(v,A,w,A.head,0),g(A)},hooks:{all:{},add:function(v,w){var m=a.hooks.all;m[v]=m[v]||[],m[v].push(w)},run:function(v,w){var m=a.hooks.all[v];if(!(!m||!m.length))for(var S=0,A;A=m[S++];)A(w)}},Token:o};s.Prism=a;function o(v,w,m,S){this.type=v,this.content=w,this.alias=m,this.length=(S||"").length|0}o.stringify=function v(w,m){if(typeof w=="string")return w;if(Array.isArray(w)){var S="";return w.forEach(function(F){S+=v(F,m)}),S}var A={type:w.type,content:v(w.content,m),tag:"span",classes:["token",w.type],attributes:{},language:m},E=w.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(A.classes,E):A.classes.push(E)),a.hooks.run("wrap",A);var R="";for(var D in A.attributes)R+=" "+D+'="'+(A.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+R+">"+A.content+"</"+A.tag+">"};function u(v,w,m,S){v.lastIndex=w;var A=v.exec(m);if(A&&S&&A[1]){var E=A[1].length;A.index+=E,A[0]=A[0].slice(E)}return A}function f(v,w,m,S,A,E){for(var R in m)if(!(!m.hasOwnProperty(R)||!m[R])){var D=m[R];D=Array.isArray(D)?D:[D];for(var F=0;F<D.length;++F){if(E&&E.cause==R+","+F)return;var O=D[F],L=O.inside,B=!!O.lookbehind,U=!!O.greedy,P=O.alias;if(U&&!O.pattern.global){var x=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,x+"g")}for(var W=O.pattern||O,V=S.next,K=A;V!==w.tail&&!(E&&K>=E.reach);K+=V.value.length,V=V.next){var H=V.value;if(w.length>v.length)return;if(!(H instanceof o)){var Y=1,X;if(U){if(X=u(W,K,v,B),!X||X.index>=v.length)break;var ce=X.index,ne=X.index+X[0].length,de=K;for(de+=V.value.length;ce>=de;)V=V.next,de+=V.value.length;if(de-=V.value.length,K=de,V.value instanceof o)continue;for(var te=V;te!==w.tail&&(de<ne||typeof te.value=="string");te=te.next)Y++,de+=te.value.length;Y--,H=v.slice(K,de),X.index-=K}else if(X=u(W,0,H,B),!X)continue;var ce=X.index,ie=X[0],se=H.slice(0,ce),fe=H.slice(ce+ie.length),we=K+H.length;E&&we>E.reach&&(E.reach=we);var le=V.prev;se&&(le=h(w,le,se),K+=se.length),_(w,le,Y);var xe=new o(R,L?a.tokenize(ie,L):ie,P,ie);if(V=h(w,le,xe),fe&&h(w,V,fe),Y>1){var Se={cause:R+","+F,reach:we};f(v,w,m,V.prev,K,Se),E&&Se.reach>E.reach&&(E.reach=Se.reach)}}}}}}function p(){var v={value:null,prev:null,next:null},w={value:null,prev:v,next:null};v.next=w,this.head=v,this.tail=w,this.length=0}function h(v,w,m){var S=w.next,A={value:m,prev:w,next:S};return w.next=A,S.prev=A,v.length++,A}function _(v,w,m){for(var S=w.next,A=0;A<m&&S!==v.tail;A++)S=S.next;w.next=S,S.prev=w,v.length-=A}function g(v){for(var w=[],m=v.head.next;m!==v.tail;)w.push(m.value),m=m.next;return w}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(v){var w=JSON.parse(v.data),m=w.language,S=w.code,A=w.immediateClose;s.postMessage(a.highlight(S,a.languages[m],m)),A&&s.close()},!1)),a;var T=a.util.currentScript();T&&(a.filename=T.src,T.hasAttribute("data-manual")&&(a.manual=!0));function C(){a.manual||a.highlightAll()}if(!a.manual){var I=document.readyState;I==="loading"||I==="interactive"&&T&&T.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return a})(e);n.exports&&(n.exports=t),typeof mi<"u"&&(mi.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};a["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(s,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,(function(s){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var i=s.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))})(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,(function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",r=function(T,C){return"âœ– Error "+T+" while fetching file: "+C},i="âœ– Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+a+'="'+u+'"]):not(['+a+'="'+o+'"])';function h(T,C,I){var v=new XMLHttpRequest;v.open("GET",T,!0),v.onreadystatechange=function(){v.readyState==4&&(v.status<400&&v.responseText?C(v.responseText):v.status>=400?I(r(v.status,v.statusText)):I(i))},v.send(null)}function _(T){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(T||"");if(C){var I=Number(C[1]),v=C[2],w=C[3];return v?w?[I,Number(w)]:[I,void 0]:[I,I]}}t.hooks.add("before-highlightall",function(T){T.selector+=", "+p}),t.hooks.add("before-sanity-check",function(T){var C=T.element;if(C.matches(p)){T.code="",C.setAttribute(a,o);var I=C.appendChild(document.createElement("CODE"));I.textContent=s;var v=C.getAttribute("data-src"),w=T.language;if(w==="none"){var m=(/\.(\w+)$/.exec(v)||[,"none"])[1];w=l[m]||m}t.util.setLanguage(I,w),t.util.setLanguage(C,w);var S=t.plugins.autoloader;S&&S.loadLanguages(w),h(v,function(A){C.setAttribute(a,u);var E=_(C.getAttribute("data-range"));if(E){var R=A.split(/\r\n?|\n/g),D=E[0],F=E[1]==null?R.length:E[1];D<0&&(D+=R.length),D=Math.max(0,Math.min(D-1,R.length)),F<0&&(F+=R.length),F=Math.max(0,Math.min(F,R.length)),A=R.slice(D,F).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(D+1))}I.textContent=A,t.highlightElement(I)},function(A){C.setAttribute(a,f),I.textContent=A})}}),t.plugins.fileHighlight={highlight:function(C){for(var I=(C||document).querySelectorAll(p),v=0,w;w=I[v++];)t.highlightElement(w)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(js)),js.exports}var Hu=qu();const Vs=Uo(Hu);const{entries:xo,setPrototypeOf:_i,isFrozen:Gu,getPrototypeOf:Wu,getOwnPropertyDescriptor:Yu}=Object;let{freeze:Ct,seal:qt,create:Rr}=Object,{apply:Nr,construct:Pr}=typeof Reflect<"u"&&Reflect;Ct||(Ct=function(e){return e});qt||(qt=function(e){return e});Nr||(Nr=function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return e.apply(t,r)});Pr||(Pr=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new e(...s)});const ps=It(Array.prototype.forEach),Ku=It(Array.prototype.lastIndexOf),bi=It(Array.prototype.pop),Xn=It(Array.prototype.push),Xu=It(Array.prototype.splice),Ts=It(String.prototype.toLowerCase),qs=It(String.prototype.toString),Hs=It(String.prototype.match),Zn=It(String.prototype.replace),Zu=It(String.prototype.indexOf),Ju=It(String.prototype.trim),Gt=It(Object.prototype.hasOwnProperty),Tt=It(RegExp.prototype.test),Jn=Qu(TypeError);function It(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return Nr(n,e,s)}}function Qu(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Pr(n,t)}}function Pe(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ts;_i&&_i(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const i=t(r);i!==r&&(Gu(e)||(e[s]=i),r=i)}n[r]=!0}return n}function $u(n){for(let e=0;e<n.length;e++)Gt(n,e)||(n[e]=null);return n}function fn(n){const e=Rr(null);for(const[t,s]of xo(n))Gt(n,t)&&(Array.isArray(s)?e[t]=$u(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=fn(s):e[t]=s);return e}function Qn(n,e){for(;n!==null;){const s=Yu(n,e);if(s){if(s.get)return It(s.get);if(typeof s.value=="function")return It(s.value)}n=Wu(n)}function t(){return null}return t}const yi=Ct(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gs=Ct(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ws=Ct(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ef=Ct(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ys=Ct(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),tf=Ct(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ki=Ct(["#text"]),wi=Ct(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ks=Ct(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ei=Ct(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gs=Ct(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nf=qt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sf=qt(/<%[\w\W]*|[\w\W]*%>/gm),rf=qt(/\$\{[\w\W]*/gm),lf=qt(/^data-[\-\w.\u00B7-\uFFFF]+$/),af=qt(/^aria-[\-\w]+$/),jo=qt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),of=qt(/^(?:\w+script|data):/i),cf=qt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Vo=qt(/^html$/i),uf=qt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ti=Object.freeze({__proto__:null,ARIA_ATTR:af,ATTR_WHITESPACE:cf,CUSTOM_ELEMENT:uf,DATA_ATTR:lf,DOCTYPE_NAME:Vo,ERB_EXPR:sf,IS_ALLOWED_URI:jo,IS_SCRIPT_OR_DATA:of,MUSTACHE_EXPR:nf,TMPLIT_EXPR:rf});const $n={element:1,text:3,progressingInstruction:7,comment:8,document:9},ff=function(){return typeof window>"u"?null:window},df=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Ai=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function qo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ff();const e=pe=>qo(pe);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==$n.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:a,Element:o,NodeFilter:u,NamedNodeMap:f=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:_}=n,g=o.prototype,T=Qn(g,"cloneNode"),C=Qn(g,"remove"),I=Qn(g,"nextSibling"),v=Qn(g,"childNodes"),w=Qn(g,"parentNode");if(typeof l=="function"){const pe=t.createElement("template");pe.content&&pe.content.ownerDocument&&(t=pe.content.ownerDocument)}let m,S="";const{implementation:A,createNodeIterator:E,createDocumentFragment:R,getElementsByTagName:D}=t,{importNode:F}=s;let O=Ai();e.isSupported=typeof xo=="function"&&typeof w=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:L,ERB_EXPR:B,TMPLIT_EXPR:U,DATA_ATTR:P,ARIA_ATTR:x,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:K}=Ti;let{IS_ALLOWED_URI:H}=Ti,Y=null;const X=Pe({},[...yi,...Gs,...Ws,...Ys,...ki]);let ne=null;const de=Pe({},[...wi,...Ks,...Ei,...gs]);let te=Object.seal(Rr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,ie=null;const se=Object.seal(Rr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let fe=!0,we=!0,le=!1,xe=!0,Se=!1,ae=!0,$=!1,ue=!1,_e=!1,ye=!1,Ee=!1,ze=!1,st=!0,tt=!1;const Ve="user-content-";let qe=!0,gt=!1,dt={},rt=null;const wt=Pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const it=Pe({},["audio","video","img","source","image","track"]);let me=null;const Ne=Pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",ee="http://www.w3.org/1999/xhtml";let ve=ee,bt=!1,ht=null;const Xe=Pe({},[Dt,zt,ee],qs);let Ft=Pe({},["mi","mo","mn","ms","mtext"]),pt=Pe({},["annotation-xml"]);const an=Pe({},["title","style","font","a","script"]);let Ke=null;const $t=["application/xhtml+xml","text/html"],_n="text/html";let Ce=null,Qe=null;const Mn=t.createElement("form"),bn=function(j){return j instanceof RegExp||j instanceof Function},yt=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qe&&Qe===j)){if((!j||typeof j!="object")&&(j={}),j=fn(j),Ke=$t.indexOf(j.PARSER_MEDIA_TYPE)===-1?_n:j.PARSER_MEDIA_TYPE,Ce=Ke==="application/xhtml+xml"?qs:Ts,Y=Gt(j,"ALLOWED_TAGS")?Pe({},j.ALLOWED_TAGS,Ce):X,ne=Gt(j,"ALLOWED_ATTR")?Pe({},j.ALLOWED_ATTR,Ce):de,ht=Gt(j,"ALLOWED_NAMESPACES")?Pe({},j.ALLOWED_NAMESPACES,qs):Xe,me=Gt(j,"ADD_URI_SAFE_ATTR")?Pe(fn(Ne),j.ADD_URI_SAFE_ATTR,Ce):Ne,Bt=Gt(j,"ADD_DATA_URI_TAGS")?Pe(fn(it),j.ADD_DATA_URI_TAGS,Ce):it,rt=Gt(j,"FORBID_CONTENTS")?Pe({},j.FORBID_CONTENTS,Ce):wt,ce=Gt(j,"FORBID_TAGS")?Pe({},j.FORBID_TAGS,Ce):fn({}),ie=Gt(j,"FORBID_ATTR")?Pe({},j.FORBID_ATTR,Ce):fn({}),dt=Gt(j,"USE_PROFILES")?j.USE_PROFILES:!1,fe=j.ALLOW_ARIA_ATTR!==!1,we=j.ALLOW_DATA_ATTR!==!1,le=j.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=j.SAFE_FOR_TEMPLATES||!1,ae=j.SAFE_FOR_XML!==!1,$=j.WHOLE_DOCUMENT||!1,ye=j.RETURN_DOM||!1,Ee=j.RETURN_DOM_FRAGMENT||!1,ze=j.RETURN_TRUSTED_TYPE||!1,_e=j.FORCE_BODY||!1,st=j.SANITIZE_DOM!==!1,tt=j.SANITIZE_NAMED_PROPS||!1,qe=j.KEEP_CONTENT!==!1,gt=j.IN_PLACE||!1,H=j.ALLOWED_URI_REGEXP||jo,ve=j.NAMESPACE||ee,Ft=j.MATHML_TEXT_INTEGRATION_POINTS||Ft,pt=j.HTML_INTEGRATION_POINTS||pt,te=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&bn(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&bn(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(we=!1),Ee&&(ye=!0),dt&&(Y=Pe({},ki),ne=[],dt.html===!0&&(Pe(Y,yi),Pe(ne,wi)),dt.svg===!0&&(Pe(Y,Gs),Pe(ne,Ks),Pe(ne,gs)),dt.svgFilters===!0&&(Pe(Y,Ws),Pe(ne,Ks),Pe(ne,gs)),dt.mathMl===!0&&(Pe(Y,Ys),Pe(ne,Ei),Pe(ne,gs))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?se.tagCheck=j.ADD_TAGS:(Y===X&&(Y=fn(Y)),Pe(Y,j.ADD_TAGS,Ce))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?se.attributeCheck=j.ADD_ATTR:(ne===de&&(ne=fn(ne)),Pe(ne,j.ADD_ATTR,Ce))),j.ADD_URI_SAFE_ATTR&&Pe(me,j.ADD_URI_SAFE_ATTR,Ce),j.FORBID_CONTENTS&&(rt===wt&&(rt=fn(rt)),Pe(rt,j.FORBID_CONTENTS,Ce)),qe&&(Y["#text"]=!0),$&&Pe(Y,["html","head","body"]),Y.table&&(Pe(Y,["tbody"]),delete ce.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw Jn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Jn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=j.TRUSTED_TYPES_POLICY,S=m.createHTML("")}else m===void 0&&(m=df(_,r)),m!==null&&typeof S=="string"&&(S=m.createHTML(""));Ct&&Ct(j),Qe=j}},Ht=Pe({},[...Gs,...Ws,...ef]),yn=Pe({},[...Ys,...tf]),us=function(j){let oe=w(j);(!oe||!oe.tagName)&&(oe={namespaceURI:ve,tagName:"template"});const he=Ts(j.tagName),Ze=Ts(oe.tagName);return ht[j.namespaceURI]?j.namespaceURI===zt?oe.namespaceURI===ee?he==="svg":oe.namespaceURI===Dt?he==="svg"&&(Ze==="annotation-xml"||Ft[Ze]):!!Ht[he]:j.namespaceURI===Dt?oe.namespaceURI===ee?he==="math":oe.namespaceURI===zt?he==="math"&&pt[Ze]:!!yn[he]:j.namespaceURI===ee?oe.namespaceURI===zt&&!pt[Ze]||oe.namespaceURI===Dt&&!Ft[Ze]?!1:!yn[he]&&(an[he]||!Ht[he]):!!(Ke==="application/xhtml+xml"&&ht[j.namespaceURI]):!1},Et=function(j){Xn(e.removed,{element:j});try{w(j).removeChild(j)}catch{C(j)}},en=function(j,oe){try{Xn(e.removed,{attribute:oe.getAttributeNode(j),from:oe})}catch{Xn(e.removed,{attribute:null,from:oe})}if(oe.removeAttribute(j),j==="is")if(ye||Ee)try{Et(oe)}catch{}else try{oe.setAttribute(j,"")}catch{}},kn=function(j){let oe=null,he=null;if(_e)j="<remove></remove>"+j;else{const lt=Hs(j,/^[\r\n\t ]+/);he=lt&&lt[0]}Ke==="application/xhtml+xml"&&ve===ee&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const Ze=m?m.createHTML(j):j;if(ve===ee)try{oe=new h().parseFromString(Ze,Ke)}catch{}if(!oe||!oe.documentElement){oe=A.createDocument(ve,"template",null);try{oe.documentElement.innerHTML=bt?S:Ze}catch{}}const kt=oe.body||oe.documentElement;return j&&he&&kt.insertBefore(t.createTextNode(he),kt.childNodes[0]||null),ve===ee?D.call(oe,$?"html":"body")[0]:$?oe.documentElement:kt},Hn=function(j){return E.call(j.ownerDocument||j,j,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},hn=function(j){return j instanceof p&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof f)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},wn=function(j){return typeof a=="function"&&j instanceof a};function Ut(pe,j,oe){ps(pe,he=>{he.call(e,j,oe,Qe)})}const En=function(j){let oe=null;if(Ut(O.beforeSanitizeElements,j,null),hn(j))return Et(j),!0;const he=Ce(j.nodeName);if(Ut(O.uponSanitizeElement,j,{tagName:he,allowedTags:Y}),ae&&j.hasChildNodes()&&!wn(j.firstElementChild)&&Tt(/<[/\w!]/g,j.innerHTML)&&Tt(/<[/\w!]/g,j.textContent)||j.nodeType===$n.progressingInstruction||ae&&j.nodeType===$n.comment&&Tt(/<[/\w]/g,j.data))return Et(j),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(he))&&(!Y[he]||ce[he])){if(!ce[he]&&Gn(he)&&(te.tagNameCheck instanceof RegExp&&Tt(te.tagNameCheck,he)||te.tagNameCheck instanceof Function&&te.tagNameCheck(he)))return!1;if(qe&&!rt[he]){const Ze=w(j)||j.parentNode,kt=v(j)||j.childNodes;if(kt&&Ze){const lt=kt.length;for(let Rt=lt-1;Rt>=0;--Rt){const on=T(kt[Rt],!0);on.__removalCount=(j.__removalCount||0)+1,Ze.insertBefore(on,I(j))}}}return Et(j),!0}return j instanceof o&&!us(j)||(he==="noscript"||he==="noembed"||he==="noframes")&&Tt(/<\/no(script|embed|frames)/i,j.innerHTML)?(Et(j),!0):(Se&&j.nodeType===$n.text&&(oe=j.textContent,ps([L,B,U],Ze=>{oe=Zn(oe,Ze," ")}),j.textContent!==oe&&(Xn(e.removed,{element:j.cloneNode()}),j.textContent=oe)),Ut(O.afterSanitizeElements,j,null),!1)},Tn=function(j,oe,he){if(st&&(oe==="id"||oe==="name")&&(he in t||he in Mn))return!1;if(!(we&&!ie[oe]&&Tt(P,oe))){if(!(fe&&Tt(x,oe))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(oe,j))){if(!ne[oe]||ie[oe]){if(!(Gn(j)&&(te.tagNameCheck instanceof RegExp&&Tt(te.tagNameCheck,j)||te.tagNameCheck instanceof Function&&te.tagNameCheck(j))&&(te.attributeNameCheck instanceof RegExp&&Tt(te.attributeNameCheck,oe)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(oe,j))||oe==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&Tt(te.tagNameCheck,he)||te.tagNameCheck instanceof Function&&te.tagNameCheck(he))))return!1}else if(!me[oe]){if(!Tt(H,Zn(he,V,""))){if(!((oe==="src"||oe==="xlink:href"||oe==="href")&&j!=="script"&&Zu(he,"data:")===0&&Bt[j])){if(!(le&&!Tt(W,Zn(he,V,"")))){if(he)return!1}}}}}}}return!0},Gn=function(j){return j!=="annotation-xml"&&Hs(j,K)},An=function(j){Ut(O.beforeSanitizeAttributes,j,null);const{attributes:oe}=j;if(!oe||hn(j))return;const he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne,forceKeepAttr:void 0};let Ze=oe.length;for(;Ze--;){const kt=oe[Ze],{name:lt,namespaceURI:Rt,value:on}=kt,Fn=Ce(lt),Ls=on;let mt=lt==="value"?Ls:Ju(Ls);if(he.attrName=Fn,he.attrValue=mt,he.keepAttr=!0,he.forceKeepAttr=void 0,Ut(O.uponSanitizeAttribute,j,he),mt=he.attrValue,tt&&(Fn==="id"||Fn==="name")&&(en(lt,j),mt=Ve+mt),ae&&Tt(/((--!?|])>)|<\/(style|title|textarea)/i,mt)){en(lt,j);continue}if(Fn==="attributename"&&Hs(mt,"href")){en(lt,j);continue}if(he.forceKeepAttr)continue;if(!he.keepAttr){en(lt,j);continue}if(!xe&&Tt(/\/>/i,mt)){en(lt,j);continue}Se&&ps([L,B,U],si=>{mt=Zn(mt,si," ")});const ni=Ce(j.nodeName);if(!Tn(ni,Fn,mt)){en(lt,j);continue}if(m&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!Rt)switch(_.getAttributeType(ni,Fn)){case"TrustedHTML":{mt=m.createHTML(mt);break}case"TrustedScriptURL":{mt=m.createScriptURL(mt);break}}if(mt!==Ls)try{Rt?j.setAttributeNS(Rt,lt,mt):j.setAttribute(lt,mt),hn(j)?Et(j):bi(e.removed)}catch{en(lt,j)}}Ut(O.afterSanitizeAttributes,j,null)},zn=function pe(j){let oe=null;const he=Hn(j);for(Ut(O.beforeSanitizeShadowDOM,j,null);oe=he.nextNode();)Ut(O.uponSanitizeShadowNode,oe,null),En(oe),An(oe),oe.content instanceof i&&pe(oe.content);Ut(O.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(pe){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=null,he=null,Ze=null,kt=null;if(bt=!pe,bt&&(pe="<!-->"),typeof pe!="string"&&!wn(pe))if(typeof pe.toString=="function"){if(pe=pe.toString(),typeof pe!="string")throw Jn("dirty is not a string, aborting")}else throw Jn("toString is not a function");if(!e.isSupported)return pe;if(ue||yt(j),e.removed=[],typeof pe=="string"&&(gt=!1),gt){if(pe.nodeName){const on=Ce(pe.nodeName);if(!Y[on]||ce[on])throw Jn("root node is forbidden and cannot be sanitized in-place")}}else if(pe instanceof a)oe=kn("<!---->"),he=oe.ownerDocument.importNode(pe,!0),he.nodeType===$n.element&&he.nodeName==="BODY"||he.nodeName==="HTML"?oe=he:oe.appendChild(he);else{if(!ye&&!Se&&!$&&pe.indexOf("<")===-1)return m&&ze?m.createHTML(pe):pe;if(oe=kn(pe),!oe)return ye?null:ze?S:""}oe&&_e&&Et(oe.firstChild);const lt=Hn(gt?pe:oe);for(;Ze=lt.nextNode();)En(Ze),An(Ze),Ze.content instanceof i&&zn(Ze.content);if(gt)return pe;if(ye){if(Ee)for(kt=R.call(oe.ownerDocument);oe.firstChild;)kt.appendChild(oe.firstChild);else kt=oe;return(ne.shadowroot||ne.shadowrootmode)&&(kt=F.call(s,kt,!0)),kt}let Rt=$?oe.outerHTML:oe.innerHTML;return $&&Y["!doctype"]&&oe.ownerDocument&&oe.ownerDocument.doctype&&oe.ownerDocument.doctype.name&&Tt(Vo,oe.ownerDocument.doctype.name)&&(Rt="<!DOCTYPE "+oe.ownerDocument.doctype.name+`>
`+Rt),Se&&ps([L,B,U],on=>{Rt=Zn(Rt,on," ")}),m&&ze?m.createHTML(Rt):Rt},e.setConfig=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt(pe),ue=!0},e.clearConfig=function(){Qe=null,ue=!1},e.isValidAttribute=function(pe,j,oe){Qe||yt({});const he=Ce(pe),Ze=Ce(j);return Tn(he,Ze,oe)},e.addHook=function(pe,j){typeof j=="function"&&Xn(O[pe],j)},e.removeHook=function(pe,j){if(j!==void 0){const oe=Ku(O[pe],j);return oe===-1?void 0:Xu(O[pe],oe,1)[0]}return bi(O[pe])},e.removeHooks=function(pe){O[pe]=[]},e.removeAllHooks=function(){O=Ai()},e}var hf=qo();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var Si={},Ci;function pf(){return Ci||(Ci=1,(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var e=n.languages.extend("typescript",{});delete e["class-name"],n.languages.typescript["class-name"].inside=e,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),n.languages.ts=n.languages.typescript})(Prism)),Si}pf();var Ii={},Di;function gf(){return Di||(Di=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Ii}gf();var Ri={},Ni;function mf(){return Ni||(Ni=1,(function(n){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,s={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[s,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:s.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:s.inside}],keyword:e,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":s,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:s.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:s.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),Ri}mf();Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;var Pi={},Oi;function vf(){return Oi||(Oi=1,(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism)),Pi}vf();var Mi={},zi;function _f(){return zi||(zi=1,(function(n){function e(K,H){return K.replace(/<<(\d+)>>/g,function(Y,X){return"(?:"+H[+X]+")"})}function t(K,H,Y){return RegExp(e(K,H),"")}function s(K,H){for(var Y=0;Y<H;Y++)K=K.replace(/<<self>>/g,function(){return"(?:"+K+")"});return K.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(K){return"\\b(?:"+K.trim().replace(/ /g,"|")+")\\b"}var l=i(r.typeDeclaration),a=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),f=s(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=s(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,_=e(/<<0>>(?:\s*<<1>>)?/.source,[h,f]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,_]),T=/\[\s*(?:,\s*)*\]/.source,C=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,T]),I=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[f,p,T]),v=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[I]),w=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[v,g,T]),m={keyword:a,punctuation:/[<>()?,.:[\]]/},S=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,A=/"(?:\\.|[^\\"\r\n])*"/.source,E=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[A]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:m},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,w]),lookbehind:!0,inside:m},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[l,_]),lookbehind:!0,inside:m},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:m},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[C]),lookbehind:!0,inside:m},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[w,u,h]),inside:m}],keyword:a,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:m},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[w,g]),inside:m,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[w]),lookbehind:!0,inside:m,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,f]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(f),alias:"class-name",inside:m}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[l,_,h,w,a.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[_,p]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:a,"class-name":{pattern:RegExp(w),greedy:!0,inside:m},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var R=A+"|"+S,D=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[R]),F=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),O=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,L=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,F]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[O,L]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[O]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[F]),inside:n.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var B=/:[^}\r\n]+/.source,U=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),P=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,B]),x=s(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[R]),2),W=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[x,B]);function V(K,H){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[K]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[H,B]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[P]),lookbehind:!0,greedy:!0,inside:V(P,U)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[W]),lookbehind:!0,greedy:!0,inside:V(W,x)}],char:{pattern:RegExp(S),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(Prism)),Mi}_f();Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];var Fi={},Li;function bf(){return Li||(Li=1,(function(n){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism)),Fi}bf();var Bi={},Ui;function yf(){return Ui||(Ui=1,(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",s=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+s),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+s+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism)),Bi}yf();(function(n){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},s={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:s},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:s},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:s.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:s.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=n.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=s.variable[1].inside,l=0;l<r.length;l++)i[r[l]]=n.languages.bash[r[l]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var t=n.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const ls=new Map;Be.setOptions({breaks:!0,gfm:!0});const xi={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},kf={code(n){const e=n.text;let t=n.lang;if(t&&xi[t.toLowerCase()]&&(t=xi[t.toLowerCase()]),t&&Vs.languages[t])try{const r=Vs.highlight(e,Vs.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Be.use({renderer:kf});function Is(n){n=n.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),n=n.replace(/```(\w+)\n([\s\S]*?)```/g,(s,r,i)=>i.endsWith(`
`)?s:"```"+r+`
`+i+"\n```");let e;try{const s=Be.parse(n,{async:!1});e=typeof s=="string"?s:String(s)}catch(s){console.error("Markdown parse error:",s),e=n}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(s,r)=>{const i=ls.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:s}),hf.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function wf(n){ls.set(n.name,n)}function Ef(n){ls.delete(n)}function Tf(n){ls.clear(),n.forEach(e=>{ls.set(e.name,e)})}const Af="wabi-chat-db",Sf=1,Nt="messages",Ln="settings";class Cf{db=null;initPromise=null;async init(){if(Le&&!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Af,Sf);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(Nt)||i.createObjectStore(Nt,{keyPath:"period"}),i.objectStoreNames.contains(Ln)||i.createObjectStore(Ln,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return!Le||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Ln],"readonly").objectStore(Ln).get(e);l.onsuccess=()=>t(l.result?.value),l.onerror=()=>s(l.error)})}async setSetting(e,t){if(!(!Le||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Ln],"readwrite").objectStore(Ln).put({key:e,value:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async getArchive(e){return!Le||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Nt],"readonly").objectStore(Nt).get(e);l.onsuccess=()=>t(l.result?.data),l.onerror=()=>s(l.error)})}async setArchive(e,t){if(!(!Le||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Nt],"readwrite").objectStore(Nt).put({period:e,data:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async deleteArchive(e){if(!(!Le||!this.db))return new Promise((t,s)=>{const l=this.db.transaction([Nt],"readwrite").objectStore(Nt).delete(e);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}async getAllArchiveKeys(){return!Le||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Nt],"readonly").objectStore(Nt).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async getAllArchives(){return!Le||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Nt],"readonly").objectStore(Nt).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async clearAllArchives(){if(!(!Le||!this.db))return new Promise((e,t)=>{const i=this.db.transaction([Nt],"readwrite").objectStore(Nt).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class If{rotationPeriod="month";maxArchives=4;db;initPromise=null;constructor(){this.db=new Cf,Le&&(this.initPromise=this.init())}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){if(!Le)return;const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){Le&&(await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e))}async setMaxArchives(e){Le&&(await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives())}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const s=this.getWeekNumber(e);return`${t}-W${String(s).padStart(2,"0")}`}case"month":{const s=e.getMonth()+1;return`${t}-${String(s).padStart(2,"0")}`}case"half-year":{const s=e.getMonth()<6?"H1":"H2";return`${t}-${s}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-t.getTime())/(1440*60*1e3));return Math.ceil((s+t.getDay()+1)/7)}async isEnabled(){if(!Le)return!1;await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){Le&&(await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString()))}async saveMessage(e,t){if(!Le||(await this.ensureInit(),!await this.isEnabled()))return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(l){console.error("Failed to save message to IndexedDB:",l),await this.rotateArchives()}}async rotateArchives(){if(!Le)return;await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const s of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${s}`),await this.db.deleteArchive(s)}}async loadAllMessages(){if(!Le)return{};if(await this.ensureInit(),!await this.isEnabled())return{};const t={},s=await this.db.getAllArchives();for(const r of s){const i=r.data||{};Object.entries(i).forEach(([l,a])=>{t[l]||(t[l]=[]),t[l].push(...a)})}return Object.keys(t).forEach(r=>{t[r].sort((i,l)=>i.timestamp-l.timestamp)}),t}async deleteArchive(e){Le&&(await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`))}async clearAllHistory(){Le&&(await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history"))}async exportArchives(){if(!Le)return;await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const s=JSON.stringify(t.data),r=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`wabi-chat-${t.period}.json`,l.click(),URL.revokeObjectURL(i)})}async exportArchive(e){if(!Le)return;await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const s=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){if(!Le)return{archives:[],totalSize:0,totalMessages:0};await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const l=JSON.stringify(i.data),a=new Blob([l]).size,o=i.data,u=Object.values(o).reduce((f,p)=>f+p.length,0);return{period:i.period,size:a,messageCount:u}}).sort((i,l)=>l.period.localeCompare(i.period)),s=t.reduce((i,l)=>i+l.size,0),r=t.reduce((i,l)=>i+l.messageCount,0);return{archives:t,totalSize:s,totalMessages:r}}}const Lt=new If,qn=_t(null),dn=_t([]),Rn=_t("general"),At=_t({general:[]}),jt=_t([]),Ho=_t([]),ln=_t(null),ji=_t(!1),Go=_t(0),Xr=_t(null);let ke=null;function Df(n){if(!Le)return;let e="http://localhost:3000";if(typeof window<"u"){const t=window.location.origin;t.includes(":5173")||(e=t)}return ke=Es(e),qn.set(ke),Lt.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const s={};for(const[r,i]of Object.entries(t)){const l=new Set;s[r]=i.filter(a=>l.has(a.id)?!1:(l.add(a.id),!0))}At.set(s)}}),ke.on("connect",()=>{console.log("Connected to server"),ji.set(!0),ke?.emit("join",n)}),ke.on("disconnect",()=>{console.log("Disconnected from server"),ji.set(!1)}),ke.on("init",t=>{jt.set(t.users);const s=t.channels.map(i=>{if(i.type==="dm"&&i.members){const l=i.members.find(o=>o!==ke?.id),a=t.users.find(o=>o.id===l);if(a)return{...i,name:a.username,otherUser:a}}return i});dn.set(s),t.emotes&&Tf(t.emotes);const r=t.users.find(i=>i.id===ke?.id);r&&ln.set(r),ke?.emit("join-channel","general")}),ke.on("channel-messages",t=>{At.update(s=>{const r=s[t.channelId]||[],i=new Set(r.map(a=>a.id)),l=t.messages.filter(a=>!i.has(a.id));return{...s,[t.channelId]:[...r,...l]}})}),ke.on("message",t=>{At.update(i=>{const l=i[t.channelId]||[];return l.some(a=>a.id===t.message.id)?i:{...i,[t.channelId]:[...l,t.message]}}),Lt.saveMessage(t.channelId,t.message);const s=t.message.userId===ke?.id;let r;dn.subscribe(i=>{r=i.find(a=>a.id===t.channelId)?.name})(),ru(t.message,s,r),!s&&document.hidden&&Go.update(i=>(i===0&&Xr.set(t.message.id),i+1))}),ke.on("user-joined",t=>{jt.update(s=>[...s,t])}),ke.on("user-left",t=>{jt.update(s=>s.filter(r=>r.id!==t.id))}),ke.on("typing",t=>{Ho.set(t)}),ke.on("profile-updated",t=>{jt.update(s=>s.map(r=>r.id===t.id?t:r)),ln.update(s=>s&&s.id===t.id?t:s)}),ke.on("message-edited",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),ke.on("message-deleted",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),ke.on("message-pin-toggled",t=>{At.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),ke.on("channel-created",t=>{let s=t;t.type==="dm"&&t.members&&jt.subscribe(r=>{const i=t.members.find(a=>a!==ke?.id),l=r.find(a=>a.id===i);l&&(s={...t,name:l.username,otherUser:l})})(),dn.update(r=>[...r,s]),At.update(r=>({...r,[s.id]:[]}))}),ke.on("channel-deleted",t=>{dn.update(s=>s.filter(r=>r.id!==t)),At.update(s=>{const r={...s};return delete r[t],r}),Rn.update(s=>s===t?"general":s)}),ke.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),ke.on("dm-created",t=>{const s={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};dn.update(r=>r.some(i=>i.id===t.channelId)?r:[...r,s]),At.update(r=>({...r,[t.channelId]:r[t.channelId]||[]})),Rn.set(t.channelId)}),ke.on("group-created",t=>{dn.update(s=>s.some(r=>r.id===t.id)?s:[...s,t]),At.update(s=>({...s,[t.id]:s[t.id]||[]}))}),ke.on("emote-added",t=>{wf(t)}),ke.on("emote-deleted",t=>{Ef(t)}),ke.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),ke}function Rf(n){ke?.emit("join-channel",n),Rn.set(n)}function Nf(n){ke?.emit("create-channel",n)}function Pf(n){ke?.emit("delete-channel",n)}function ms(n,e,t="text",s){ke?.emit("message",{channelId:n,text:e,type:t,...s})}function Wo(n,e,t){ke?.emit("edit-message",{channelId:n,messageId:e,newText:t})}function Of(n,e){ke?.emit("delete-message",{channelId:n,messageId:e})}function Zr(n,e){ke?.emit("toggle-pin-message",{channelId:n,messageId:e})}function Xs(n){ke?.emit("typing",n)}function Vi(n,e){ke?.emit("update-profile",{status:n,profilePicture:e})}function Mf(){ke?.disconnect(),qn.set(null),ke=null}function zf(){Go.set(0),Xr.set(null)}function Yo(n){ke?.emit("create-dm",{targetUserId:n})}let vs;const Ff=new Uint8Array(16);function Lf(){if(!vs&&(vs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vs(Ff)}const vt=[];for(let n=0;n<256;++n)vt.push((n+256).toString(16).slice(1));function Bf(n,e=0){return vt[n[e+0]]+vt[n[e+1]]+vt[n[e+2]]+vt[n[e+3]]+"-"+vt[n[e+4]]+vt[n[e+5]]+"-"+vt[n[e+6]]+vt[n[e+7]]+"-"+vt[n[e+8]]+vt[n[e+9]]+"-"+vt[n[e+10]]+vt[n[e+11]]+vt[n[e+12]]+vt[n[e+13]]+vt[n[e+14]]+vt[n[e+15]]}const Uf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qi={randomUUID:Uf};function xf(n,e,t){if(qi.randomUUID&&!n)return qi.randomUUID();n=n||{};const s=n.random||(n.rng||Lf)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Bf(s)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var Sn="",Ko=16,jf=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let s=0;s<Ko;s++)n+=e.charAt(Math.floor(Math.random()*t));return n},Vf=()=>{if(!Sn){try{Sn=sessionStorage.getItem("giphyPingbackId")}catch{}if(!Sn){const n=new Date().getTime().toString(16);try{Sn=`${n}${xf().replace(/-/g,"")}`.substring(0,Ko)}catch{Sn=jf()}try{sessionStorage.setItem("giphyPingbackId",Sn)}catch{}}}return Sn},qf=Vf,_s=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{_s=!0,n(_s)},e.onerror=()=>{_s=!1,n(_s)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var ss=(typeof window<"u"?window:global)||{};ss._GIPHY_SDK_HEADERS_=ss._GIPHY_SDK_HEADERS_||(ss.Headers?new ss.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var Xo=()=>ss._GIPHY_SDK_HEADERS_,Hi=(n,e)=>{var t;return(t=Xo())==null?void 0:t.set(n,e)},Hf=Object.defineProperty,Gf=Object.defineProperties,Wf=Object.getOwnPropertyDescriptors,Yf=Object.getOwnPropertyNames,Gi=Object.getOwnPropertySymbols,Kf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,Wi=(n,e,t)=>e in n?Hf(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,nn=(n,e)=>{for(var t in e||(e={}))Kf.call(e,t)&&Wi(n,t,e[t]);if(Gi)for(var t of Gi(e))Xf.call(e,t)&&Wi(n,t,e[t]);return n},Zs=(n,e)=>Gf(n,Wf(e)),Zf=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),Jf=(n,e)=>function(){return e||(0,n[Yf(n)[0]])((e={exports:{}}).exports,e),e.exports},Qf=(n,e,t)=>new Promise((s,r)=>{var i=o=>{try{a(t.next(o))}catch(u){r(u)}},l=o=>{try{a(t.throw(o))}catch(u){r(u)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,l);a((t=t.apply(n,e)).next())}),$f=Jf({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),ed=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],td=["suppress_chrome","is_public","is_verified"],Yi=n=>e=>n[e]=!!n[e],nd=n=>typeof n=="string"?n:n.text,Zo=(n,e="")=>{const t=nn({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(nd),t.bottle_data||(t.bottle_data={}),t.response_id=e,ed.forEach(Yi(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:s}=t;if(s){const r=nn({},s);td.forEach(Yi(r)),t.user=r}return t},Ki=n=>{const{response_id:e}=n.meta;return n.data=Zo(n.data,e),n},cn=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>Zo(t,e)),n},sd=(typeof window<"u"?window:global)||{},rd=sd.GIPHY_API_URL||"https://api.giphy.com/v1/",Jo=class extends Error{constructor(n,e,t=0,s=""){super(n),this.url=e,this.status=t,this.statusText=s}},id=class extends Jo{},Xi=Jo,ld="@giphy/js-fetch-api: ",ad="Error fetching",od=n=>n,Yt={},cd=6e4,ud=6e3,fd=()=>{const n=Date.now();Object.keys(Yt).forEach(e=>{const t=Yt[e].isError?ud:cd;n-Yt[e].ts>=t&&delete Yt[e]})};function dd(n,e={}){const{apiVersion:t=1,noCache:s=!1,normalizer:r=od}=e,i=rd.replace(/\/v\d+\/$/,`/v${t}/`);if(fd(),!Yt[n]||s){const l=`${i}${n}`,a=()=>Qf(this,null,function*(){var o,u;let f;try{const p=yield fetch(l,{method:"get"});if(p.ok){const h=yield p.json();if((o=h.meta)!=null&&o.response_id)return r(h);throw{message:"synthetic response"}}else{let h=ad;try{const g=yield p.json();g.message&&(h=g.message),(u=g.meta)!=null&&u.msg&&(h=g.meta.msg)}catch{}Yt[n]&&(Yt[n].isError=!0);let _=Xi;h==="This content is not available in your location"&&(_=id),f=new _(`${ld}${h}`,l,p.status,p.statusText)}}catch(p){f=new Xi(p.message,l),Yt[n]&&(Yt[n].isError=!0)}throw f});Yt[n]={request:a(),ts:Date.now()}}return Yt[n].request}var Pt=dd,Js=n=>n&&n.type?n.type:"gifs",hd=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(nn(Zs(nn({},t),{api_key:this.apiKey,pingback_id:qf()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return Pt(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return Pt(`${t}gifs/${n}?${this.getQS()}`,{normalizer:Ki})}gifs(n,e){return Array.isArray(n)?Pt(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:cn}):Pt(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:cn})}emoji(n){return Pt(`emoji?${this.getQS(n)}`,{normalizer:cn})}emojiDefaultVariations(n){return Pt(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:cn})}emojiVariations(n){return Pt(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:cn})}animate(n,e={}){const t=this.getQS(Zs(nn({},e),{m:n}));return Pt(`text/animate?${t}`,{normalizer:cn})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let s;e.type==="text"&&(s=!0);const r=this.getQS(Zs(nn({rating:"pg-13"},e),{q:t,excludeDynamicResults:s}));return Pt(`${Js(e)}/search?${r}`,{normalizer:cn})}subcategories(n,e){return Pt(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return Pt(`${Js(n)}/trending?${this.getQS(nn({rating:"pg-13"},n))}`,{normalizer:cn})}random(n){return Pt(`${Js(n)}/random?${this.getQS(nn({rating:"pg-13"},n))}`,{noCache:!0,normalizer:Ki})}related(n,e={}){const{type:t="gifs"}=e;return Pt(`${t}/related?${this.getQS(nn({gif_id:n,rating:"pg-13"},e))}`,{normalizer:cn})}channels(n,e={}){return Pt(`channels/search?${this.getQS(nn({q:n,rating:"pg-13"},e))}`)}},pd=hd,Zi;if(typeof Zf<"u"){const{version:n}=$f();(Zi=Xo())!=null&&Zi.get("X-GIPHY-SDK-NAME")||(Hi("X-GIPHY-SDK-NAME","FetchAPI"),Hi("X-GIPHY-SDK-VERSION",n))}function Ji(n,e,t){const s=n.slice();return s[11]=e[t],s}function gd(n){let e=[],t=new Map,s,r=je(n[1]);const i=l=>l[11].id;for(let l=0;l<r.length;l+=1){let a=Ji(n,r,l),o=i(a);t.set(o,e[l]=Qi(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Re()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Re()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);q(l,s,a)},p(l,a){a&34&&(r=je(l[1]),e=Qt(e,a,i,1,l,r,t,s.parentNode,Jt,Qi,s,Ji))},d(l){l&&b(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function md(n){let e,t="No GIFs found";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){d(e,"class","no-results svelte-x54k5n")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function vd(n){let e,t="Loading...";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){d(e,"class","loading svelte-x54k5n")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function Qi(n,e){let t,s,r,i,l,a,o;function u(){return e[8](e[11])}return{key:n,first:null,c(){t=k("button"),s=k("img"),l=z(),this.h()},l(f){t=y(f,"BUTTON",{class:!0});var p=N(t);s=y(p,"IMG",{src:!0,alt:!0,class:!0}),l=M(p),p.forEach(b),this.h()},h(){Ue(s.src,r=e[11].images.fixed_height_small.url)||d(s,"src",r),d(s,"alt",i=e[11].title),d(s,"class","svelte-x54k5n"),d(t,"class","gif-item svelte-x54k5n"),this.first=t},m(f,p){q(f,t,p),c(t,s),c(t,l),a||(o=G(t,"click",u),a=!0)},p(f,p){e=f,p&2&&!Ue(s.src,r=e[11].images.fixed_height_small.url)&&d(s,"src",r),p&2&&i!==(i=e[11].title)&&d(s,"alt",i)},d(f){f&&b(t),a=!1,o()}}}function _d(n){let e,t,s,r,i,l="âœ•",a,o,u,f;function p(g,T){return g[2]?vd:g[1].length===0?md:gd}let h=p(n),_=h(n);return{c(){e=k("div"),t=k("div"),s=k("input"),r=z(),i=k("button"),i.textContent=l,a=z(),o=k("div"),_.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var T=N(e);t=y(T,"DIV",{class:!0});var C=N(t);s=y(C,"INPUT",{type:!0,placeholder:!0,class:!0}),r=M(C),i=y(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-xkwxcu"&&(i.textContent=l),C.forEach(b),a=M(T),o=y(T,"DIV",{class:!0});var I=N(o);_.l(I),I.forEach(b),T.forEach(b),this.h()},h(){d(s,"type","text"),d(s,"placeholder","Search GIFs..."),d(s,"class","svelte-x54k5n"),d(i,"class","close-btn svelte-x54k5n"),d(t,"class","giphy-header svelte-x54k5n"),d(o,"class","gif-grid svelte-x54k5n"),d(e,"class","giphy-picker svelte-x54k5n")},m(g,T){q(g,e,T),c(e,t),c(t,s),$e(s,n[0]),c(t,r),c(t,i),c(e,a),c(e,o),_.m(o,null),u||(f=[G(s,"input",n[6]),G(s,"input",n[4]),G(i,"click",n[7])],u=!0)},p(g,[T]){T&1&&s.value!==g[0]&&$e(s,g[0]),h===(h=p(g))&&_?_.p(g,T):(_.d(1),_=h(g),_&&(_.c(),_.m(o,null)))},i:De,o:De,d(g){g&&b(e),_.d(),u=!1,Ae(f)}}}function bd(n,e,t){const s=Or();let r="",i=[],l=!1;const a=new pd("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,l=!0);try{const{data:g}=await a.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,l=!1)}async function u(){t(2,l=!0);try{const{data:g}=await a.trending({limit:20});t(1,i=g),console.log("Loaded GIFs:",i.length,i)}catch(g){console.error("Error fetching trending GIFs:",g),t(1,i=[])}t(2,l=!1)}function f(g){s("select",g.images.fixed_height.url)}function p(){r=this.value,t(0,r)}return[r,i,l,s,o,f,p,()=>s("close"),g=>f(g)]}class yd extends ut{constructor(e){super(),ft(this,e,bd,_d,ct,{})}}function $i(n){let e,t,s,r,i=(n[2]?"Your Profile":n[1].username)+"",l,a,o,u="Ã—",f,p,h,_,g,T,C,I,v,w="Username:",m,S,A=n[1].username+"",E,R,D,F,O,L;function B(X,ne){return X[4]||X[1].profilePicture?wd:kd}let U=B(n),P=U(n),x=n[2]&&el(n),W=!n[2]&&tl(n);function V(X,ne){return X[2]?Cd:Sd}let K=V(n),H=K(n),Y=n[2]&&sl(n);return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),l=J(i),a=z(),o=k("button"),o.textContent=u,f=z(),p=k("div"),h=k("div"),_=k("div"),P.c(),g=z(),x&&x.c(),T=z(),C=k("div"),I=k("div"),v=k("span"),v.textContent=w,m=z(),S=k("span"),E=J(A),R=z(),W&&W.c(),D=z(),H.c(),F=z(),Y&&Y.c(),this.h()},l(X){e=y(X,"DIV",{class:!0});var ne=N(e);t=y(ne,"DIV",{class:!0});var de=N(t);s=y(de,"DIV",{class:!0});var te=N(s);r=y(te,"H2",{class:!0});var ce=N(r);l=Z(ce,i),ce.forEach(b),a=M(te),o=y(te,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-12zniqk"&&(o.textContent=u),te.forEach(b),f=M(de),p=y(de,"DIV",{class:!0});var ie=N(p);h=y(ie,"DIV",{class:!0});var se=N(h);_=y(se,"DIV",{class:!0});var fe=N(_);P.l(fe),fe.forEach(b),g=M(se),x&&x.l(se),se.forEach(b),T=M(ie),C=y(ie,"DIV",{class:!0});var we=N(C);I=y(we,"DIV",{class:!0});var le=N(I);v=y(le,"SPAN",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-1fffgfa"&&(v.textContent=w),m=M(le),S=y(le,"SPAN",{class:!0});var xe=N(S);E=Z(xe,A),xe.forEach(b),le.forEach(b),we.forEach(b),R=M(ie),W&&W.l(ie),D=M(ie),H.l(ie),ie.forEach(b),F=M(de),Y&&Y.l(de),de.forEach(b),ne.forEach(b),this.h()},h(){d(r,"class","svelte-mn2c16"),d(o,"class","close-btn svelte-mn2c16"),d(s,"class","modal-header svelte-mn2c16"),d(_,"class","profile-picture-container svelte-mn2c16"),d(h,"class","profile-picture-section svelte-mn2c16"),d(v,"class","info-label svelte-mn2c16"),d(S,"class","info-value svelte-mn2c16"),d(I,"class","info-row svelte-mn2c16"),d(C,"class","user-info svelte-mn2c16"),d(p,"class","modal-body svelte-mn2c16"),d(t,"class","modal-content svelte-mn2c16"),d(e,"class","modal-overlay svelte-mn2c16")},m(X,ne){q(X,e,ne),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(t,f),c(t,p),c(p,h),c(h,_),P.m(_,null),c(h,g),x&&x.m(h,null),c(p,T),c(p,C),c(C,I),c(I,v),c(I,m),c(I,S),c(S,E),c(p,R),W&&W.m(p,null),c(p,D),H.m(p,null),c(t,F),Y&&Y.m(t,null),O||(L=[G(o,"click",n[9]),G(t,"click",ot(n[12])),G(e,"click",n[9])],O=!0)},p(X,ne){ne&6&&i!==(i=(X[2]?"Your Profile":X[1].username)+"")&&re(l,i),U===(U=B(X))&&P?P.p(X,ne):(P.d(1),P=U(X),P&&(P.c(),P.m(_,null))),X[2]?x?x.p(X,ne):(x=el(X),x.c(),x.m(h,null)):x&&(x.d(1),x=null),ne&2&&A!==(A=X[1].username+"")&&re(E,A),X[2]?W&&(W.d(1),W=null):W?W.p(X,ne):(W=tl(X),W.c(),W.m(p,D)),K===(K=V(X))&&H?H.p(X,ne):(H.d(1),H=K(X),H&&(H.c(),H.m(p,null))),X[2]?Y?Y.p(X,ne):(Y=sl(X),Y.c(),Y.m(t,null)):Y&&(Y.d(1),Y=null)},d(X){X&&b(e),P.d(),x&&x.d(),W&&W.d(),H.d(),Y&&Y.d(),O=!1,Ae(L)}}}function kd(n){let e,t=n[1].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","profile-picture-placeholder svelte-mn2c16"),Te(e,"background-color",n[1].color)},m(r,i){q(r,e,i),c(e,s)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&re(s,t),i&2&&Te(e,"background-color",r[1].color)},d(r){r&&b(e)}}}function wd(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[4]||n[1].profilePicture)||d(e,"src",t),d(e,"alt",s=n[1].username),d(e,"class","profile-picture svelte-mn2c16")},m(r,i){q(r,e,i)},p(r,i){i&18&&!Ue(e.src,t=r[4]||r[1].profilePicture)&&d(e,"src",t),i&2&&s!==(s=r[1].username)&&d(e,"alt",s)},d(r){r&&b(e)}}}function el(n){let e,t,s=n[4]||n[1].profilePicture?"Change Picture":"Upload Picture",r,i,l,a,o;return{c(){e=k("div"),t=k("label"),r=J(s),i=z(),l=k("input"),this.h()},l(u){e=y(u,"DIV",{class:!0});var f=N(e);t=y(f,"LABEL",{for:!0,class:!0});var p=N(t);r=Z(p,s),p.forEach(b),i=M(f),l=y(f,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),f.forEach(b),this.h()},h(){d(t,"for","profile-picture"),d(t,"class","upload-label svelte-mn2c16"),d(l,"id","profile-picture"),d(l,"type","file"),d(l,"accept","image/*"),d(l,"class","file-input svelte-mn2c16"),d(e,"class","upload-section svelte-mn2c16")},m(u,f){q(u,e,f),c(e,t),c(t,r),c(e,i),c(e,l),a||(o=G(l,"change",n[10]),a=!0)},p(u,f){f&18&&s!==(s=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&re(r,s)},d(u){u&&b(e),a=!1,o()}}}function tl(n){let e,t,s,r="Personal Notes:",i,l,a=!n[6]&&nl(n);function o(p,h){return p[6]?Ad:p[5]?Td:Ed}let u=o(n),f=u(n);return{c(){e=k("div"),t=k("div"),s=k("label"),s.textContent=r,i=z(),a&&a.c(),l=z(),f.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var h=N(e);t=y(h,"DIV",{class:!0});var _=N(t);s=y(_,"LABEL",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1vz1uda"&&(s.textContent=r),i=M(_),a&&a.l(_),_.forEach(b),l=M(h),f.l(h),h.forEach(b),this.h()},h(){d(s,"class","notes-label svelte-mn2c16"),d(t,"class","notes-header svelte-mn2c16"),d(e,"class","notes-section svelte-mn2c16")},m(p,h){q(p,e,h),c(e,t),c(t,s),c(t,i),a&&a.m(t,null),c(e,l),f.m(e,null)},p(p,h){p[6]?a&&(a.d(1),a=null):a?a.p(p,h):(a=nl(p),a.c(),a.m(t,null)),u===(u=o(p))&&f?f.p(p,h):(f.d(1),f=u(p),f&&(f.c(),f.m(e,null)))},d(p){p&&b(e),a&&a.d(),f.d()}}}function nl(n){let e,t=n[5]?"Edit":"Add Note",s,r,i;return{c(){e=k("button"),s=J(t),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var a=N(e);s=Z(a,t),a.forEach(b),this.h()},h(){d(e,"class","edit-note-btn svelte-mn2c16")},m(l,a){q(l,e,a),c(e,s),r||(i=G(e,"click",n[13]),r=!0)},p(l,a){a&32&&t!==(t=l[5]?"Edit":"Add Note")&&re(s,t)},d(l){l&&b(e),r=!1,i()}}}function Ed(n){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){d(e,"class","note-placeholder svelte-mn2c16")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function Td(n){let e,t;return{c(){e=k("div"),t=J(n[5]),this.h()},l(s){e=y(s,"DIV",{class:!0});var r=N(e);t=Z(r,n[5]),r.forEach(b),this.h()},h(){d(e,"class","note-display svelte-mn2c16")},m(s,r){q(s,e,r),c(e,t)},p(s,r){r&32&&re(t,s[5])},d(s){s&&b(e)}}}function Ad(n){let e,t,s,r,i="Cancel",l,a,o="Save Note",u,f;return{c(){e=k("textarea"),t=z(),s=k("div"),r=k("button"),r.textContent=i,l=z(),a=k("button"),a.textContent=o,this.h()},l(p){e=y(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),N(e).forEach(b),t=M(p),s=y(p,"DIV",{class:!0});var h=N(s);r=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-hulrz8"&&(r.textContent=i),l=M(h),a=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-9d2dbm"&&(a.textContent=o),h.forEach(b),this.h()},h(){d(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),d(e,"class","note-textarea svelte-mn2c16"),d(e,"rows","3"),d(r,"class","cancel-note-btn svelte-mn2c16"),d(a,"class","save-note-btn svelte-mn2c16"),d(s,"class","note-actions svelte-mn2c16")},m(p,h){q(p,e,h),$e(e,n[5]),q(p,t,h),q(p,s,h),c(s,r),c(s,l),c(s,a),u||(f=[G(e,"input",n[14]),G(r,"click",n[15]),G(a,"click",n[8])],u=!0)},p(p,h){h&32&&$e(e,p[5])},d(p){p&&(b(e),b(t),b(s)),u=!1,Ae(f)}}}function Sd(n){let e,t,s,r,i=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1)+"",l;return{c(){e=k("div"),t=k("span"),s=z(),r=k("span"),l=J(i),this.h()},l(a){e=y(a,"DIV",{class:!0});var o=N(e);t=y(o,"SPAN",{class:!0,style:!0}),N(t).forEach(b),s=M(o),r=y(o,"SPAN",{class:!0});var u=N(r);l=Z(u,i),u.forEach(b),o.forEach(b),this.h()},h(){d(t,"class","status-dot svelte-mn2c16"),Te(t,"background-color",is(n[1].status)),d(r,"class","status-text svelte-mn2c16"),d(e,"class","status-display svelte-mn2c16")},m(a,o){q(a,e,o),c(e,t),c(e,s),c(e,r),c(r,l)},p(a,o){o&2&&Te(t,"background-color",is(a[1].status)),o&2&&i!==(i=a[1].status.charAt(0).toUpperCase()+a[1].status.slice(1)+"")&&re(l,i)},d(a){a&&b(e)}}}function Cd(n){let e,t,s="Status:",r,i,l,a,o,u,f,p,h,_,g,T,C,I,v,w,m,S;return{c(){e=k("div"),t=k("label"),t.textContent=s,r=z(),i=k("div"),l=k("button"),a=k("span"),o=J(`\r
								Active`),f=z(),p=k("button"),h=k("span"),_=J(`\r
								Away`),T=z(),C=k("button"),I=k("span"),v=J(`\r
								Busy`),this.h()},l(A){e=y(A,"DIV",{class:!0});var E=N(e);t=y(E,"LABEL",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-138t5u0"&&(t.textContent=s),r=M(E),i=y(E,"DIV",{class:!0});var R=N(i);l=y(R,"BUTTON",{class:!0});var D=N(l);a=y(D,"SPAN",{class:!0,style:!0}),N(a).forEach(b),o=Z(D,`\r
								Active`),D.forEach(b),f=M(R),p=y(R,"BUTTON",{class:!0});var F=N(p);h=y(F,"SPAN",{class:!0,style:!0}),N(h).forEach(b),_=Z(F,`\r
								Away`),F.forEach(b),T=M(R),C=y(R,"BUTTON",{class:!0});var O=N(C);I=y(O,"SPAN",{class:!0,style:!0}),N(I).forEach(b),v=Z(O,`\r
								Busy`),O.forEach(b),R.forEach(b),E.forEach(b),this.h()},h(){d(t,"class","status-label svelte-mn2c16"),d(a,"class","status-dot svelte-mn2c16"),Te(a,"background-color",is("active")),d(l,"class",u="status-btn "+(n[3]==="active"?"selected":"")+" svelte-mn2c16"),d(h,"class","status-dot svelte-mn2c16"),Te(h,"background-color",is("away")),d(p,"class",g="status-btn "+(n[3]==="away"?"selected":"")+" svelte-mn2c16"),d(I,"class","status-dot svelte-mn2c16"),Te(I,"background-color",is("busy")),d(C,"class",w="status-btn "+(n[3]==="busy"?"selected":"")+" svelte-mn2c16"),d(i,"class","status-options svelte-mn2c16"),d(e,"class","status-section svelte-mn2c16")},m(A,E){q(A,e,E),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),c(l,o),c(i,f),c(i,p),c(p,h),c(p,_),c(i,T),c(i,C),c(C,I),c(C,v),m||(S=[G(l,"click",n[16]),G(p,"click",n[17]),G(C,"click",n[18])],m=!0)},p(A,E){E&8&&u!==(u="status-btn "+(A[3]==="active"?"selected":"")+" svelte-mn2c16")&&d(l,"class",u),E&8&&g!==(g="status-btn "+(A[3]==="away"?"selected":"")+" svelte-mn2c16")&&d(p,"class",g),E&8&&w!==(w="status-btn "+(A[3]==="busy"?"selected":"")+" svelte-mn2c16")&&d(C,"class",w)},d(A){A&&b(e),m=!1,Ae(S)}}}function sl(n){let e,t,s="Cancel",r,i,l="Save Changes",a,o;return{c(){e=k("div"),t=k("button"),t.textContent=s,r=z(),i=k("button"),i.textContent=l,this.h()},l(u){e=y(u,"DIV",{class:!0});var f=N(e);t=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-2pqgi7"&&(t.textContent=s),r=M(f),i=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-2yi6cr"&&(i.textContent=l),f.forEach(b),this.h()},h(){d(t,"class","cancel-btn svelte-mn2c16"),d(i,"class","save-btn svelte-mn2c16"),d(e,"class","modal-footer svelte-mn2c16")},m(u,f){q(u,e,f),c(e,t),c(e,r),c(e,i),a||(o=[G(t,"click",n[9]),G(i,"click",n[11])],a=!0)},p:De,d(u){u&&b(e),a=!1,Ae(o)}}}function Id(n){let e,t=n[0]&&n[1]&&$i(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=$i(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function is(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Dd(n,e,t){let{isOpen:s=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,l=r?.status||"active";r?.profilePicture;let a=null,o=null,u="",f=!1;function p(){if(!Le||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=E[r.id]||"")}function h(){if(!Le||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?E[r.id]=u:delete E[r.id],localStorage.setItem("userNotes",JSON.stringify(E)),t(6,f=!1)}function _(){t(0,s=!1),a=null,t(4,o=null),t(6,f=!1)}function g(E){const D=E.target.files?.[0];if(D&&D.type.startsWith("image/")){a=D;const F=new FileReader;F.onload=O=>{t(4,o=O.target?.result)},F.readAsDataURL(D)}}function T(){i&&(a&&o?Vi(l,o):l!==r?.status&&Vi(l,void 0),_())}function C(E){Zt.call(this,n,E)}const I=()=>t(6,f=!0);function v(){u=this.value,t(5,u)}const w=()=>{t(6,f=!1),p()},m=()=>t(3,l="active"),S=()=>t(3,l="away"),A=()=>t(3,l="busy");return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"user"in E&&t(1,r=E.user),"isOwnProfile"in E&&t(2,i=E.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&2&&r&&(t(3,l=r.status),r.profilePicture,p())},[s,r,i,l,o,u,f,p,h,_,g,T,C,I,v,w,m,S,A]}class Jr extends ut{constructor(e){super(),ft(this,e,Dd,Id,ct,{isOpen:0,user:1,isOwnProfile:2})}}function rl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,i,l,a,o,u,f,p=n[1].isPinned?"ðŸ“Œ":"ðŸ“",h,_,g=n[1].isPinned?"Unpin":"Pin",T,C,I,v,w=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,m,S,A,E=n[11]&&n[6]&&il(n),R=n[7]&&ll(n),D=n[12]&&al(n),F=n[12]&&ol(n);return{c(){e=k("div"),t=k("div"),s=k("button"),s.innerHTML=r,i=z(),E&&E.c(),l=z(),R&&R.c(),a=z(),D&&D.c(),o=z(),u=k("button"),f=k("span"),h=J(p),_=z(),T=J(g),C=J(" Message"),I=z(),v=k("button"),v.innerHTML=w,m=z(),F&&F.c(),this.h()},l(O){e=y(O,"DIV",{class:!0});var L=N(e);t=y(L,"DIV",{class:!0,style:!0});var B=N(t);s=y(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1bhlhgs"&&(s.innerHTML=r),i=M(B),E&&E.l(B),l=M(B),R&&R.l(B),a=M(B),D&&D.l(B),o=M(B),u=y(B,"BUTTON",{class:!0});var U=N(u);f=y(U,"SPAN",{class:!0});var P=N(f);h=Z(P,p),P.forEach(b),_=M(U),T=Z(U,g),C=Z(U," Message"),U.forEach(b),I=M(B),v=y(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-pkfnng"&&(v.innerHTML=w),m=M(B),F&&F.l(B),B.forEach(b),L.forEach(b),this.h()},h(){d(s,"class","menu-item svelte-5kwx2s"),d(f,"class","menu-icon svelte-5kwx2s"),d(u,"class","menu-item svelte-5kwx2s"),d(v,"class","menu-item copy svelte-5kwx2s"),d(t,"class","context-menu svelte-5kwx2s"),Te(t,"top",n[9]+"px"),Te(t,"left",n[10]+"px"),d(e,"class","context-menu-overlay svelte-5kwx2s")},m(O,L){q(O,e,L),c(e,t),c(t,s),c(t,i),E&&E.m(t,null),c(t,l),R&&R.m(t,null),c(t,a),D&&D.m(t,null),c(t,o),c(t,u),c(u,f),c(f,h),c(u,_),c(u,T),c(u,C),c(t,I),c(t,v),c(t,m),F&&F.m(t,null),n[18](t),S||(A=[G(s,"click",function(){In(n[5])&&n[5].apply(this,arguments)}),G(u,"click",function(){In(n[4])&&n[4].apply(this,arguments)}),G(v,"click",n[17]),G(t,"click",ot(n[16])),G(e,"click",n[19])],S=!0)},p(O,L){n=O,n[11]&&n[6]?E?E.p(n,L):(E=il(n),E.c(),E.m(t,l)):E&&(E.d(1),E=null),n[7]?R?R.p(n,L):(R=ll(n),R.c(),R.m(t,a)):R&&(R.d(1),R=null),n[12]?D?D.p(n,L):(D=al(n),D.c(),D.m(t,o)):D&&(D.d(1),D=null),L&2&&p!==(p=n[1].isPinned?"ðŸ“Œ":"ðŸ“")&&re(h,p),L&2&&g!==(g=n[1].isPinned?"Unpin":"Pin")&&re(T,g),n[12]?F?F.p(n,L):(F=ol(n),F.c(),F.m(t,null)):F&&(F.d(1),F=null),L&512&&Te(t,"top",n[9]+"px"),L&1024&&Te(t,"left",n[10]+"px")},d(O){O&&b(e),E&&E.d(),R&&R.d(),D&&D.d(),F&&F.d(),n[18](null),S=!1,Ae(A)}}}function il(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,l){q(i,e,l),s||(r=G(e,"click",function(){In(n[6])&&n[6].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&b(e),s=!1,r()}}}function ll(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,l){q(i,e,l),s||(r=G(e,"click",function(){In(n[7])&&n[7].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&b(e),s=!1,r()}}}function al(n){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,l){q(i,e,l),s||(r=G(e,"click",function(){In(n[2])&&n[2].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&b(e),s=!1,r()}}}function ol(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,i,l;return{c(){e=k("div"),t=z(),s=k("button"),s.innerHTML=r,this.h()},l(a){e=y(a,"DIV",{class:!0}),N(e).forEach(b),t=M(a),s=y(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-g8outl"&&(s.innerHTML=r),this.h()},h(){d(e,"class","menu-divider svelte-5kwx2s"),d(s,"class","menu-item delete svelte-5kwx2s")},m(a,o){q(a,e,o),q(a,t,o),q(a,s,o),i||(l=G(s,"click",function(){In(n[3])&&n[3].apply(this,arguments)}),i=!0)},p(a,o){n=a},d(a){a&&(b(e),b(t),b(s)),i=!1,l()}}}function Rd(n){let e,t=n[0]&&rl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=rl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function Nd(n,e,t){let s,r,i,l,a;Oe(n,ln,E=>t(15,a=E));let{message:o}=e,{x:u=0}=e,{y:f=0}=e,{visible:p=!1}=e,{onEdit:h}=e,{onDelete:_}=e,{onPin:g}=e,{onReply:T}=e,{onDownload:C=void 0}=e,{onForward:I=void 0}=e,v;function w(E){Zt.call(this,n,E)}const m=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function S(E){Je[E?"unshift":"push"](()=>{v=E,t(8,v)})}const A=()=>t(0,p=!1);return n.$$set=E=>{"message"in E&&t(1,o=E.message),"x"in E&&t(13,u=E.x),"y"in E&&t(14,f=E.y),"visible"in E&&t(0,p=E.visible),"onEdit"in E&&t(2,h=E.onEdit),"onDelete"in E&&t(3,_=E.onDelete),"onPin"in E&&t(4,g=E.onPin),"onReply"in E&&t(5,T=E.onReply),"onDownload"in E&&t(6,C=E.onDownload),"onForward"in E&&t(7,I=E.onForward)},n.$$.update=()=>{n.$$.dirty&32770&&t(12,s=o.userId===a?.id),n.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),n.$$.dirty&8448&&t(10,i=(()=>{if(!v)return u;const E=v.offsetWidth||200,R=window.innerWidth;return u+E>R?u-E:u})()),n.$$.dirty&16640&&t(9,l=(()=>{if(!v)return f;const E=v.offsetHeight||300,R=window.innerHeight;return f+E>R?f-E:f})())},[p,o,h,_,g,T,C,I,v,l,i,r,s,u,f,a,w,m,S,A]}class Pd extends ut{constructor(e){super(),ft(this,e,Nd,Rd,ct,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function cl(n,e,t){const s=n.slice();return s[9]=e[t],s}function ul(n){let e,t,s,r,i="Forward Message",l,a,o="âœ•",u,f,p,h="Choose a channel to forward this message to:",_,g,T,C,I=je(n[2]),v=[];for(let w=0;w<I.length;w+=1)v[w]=dl(cl(n,I,w));return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h3"),r.textContent=i,l=z(),a=k("button"),a.textContent=o,u=z(),f=k("div"),p=k("p"),p.textContent=h,_=z(),g=k("div");for(let w=0;w<v.length;w+=1)v[w].c();this.h()},l(w){e=y(w,"DIV",{class:!0});var m=N(e);t=y(m,"DIV",{class:!0});var S=N(t);s=y(S,"DIV",{class:!0});var A=N(s);r=y(A,"H3",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1xq5ns4"&&(r.textContent=i),l=M(A),a=y(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-19jqbg1"&&(a.textContent=o),A.forEach(b),u=M(S),f=y(S,"DIV",{class:!0});var E=N(f);p=y(E,"P",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-alvqmp"&&(p.textContent=h),_=M(E),g=y(E,"DIV",{class:!0});var R=N(g);for(let D=0;D<v.length;D+=1)v[D].l(R);R.forEach(b),E.forEach(b),S.forEach(b),m.forEach(b),this.h()},h(){d(r,"class","svelte-70r9o1"),d(a,"class","close-button svelte-70r9o1"),d(s,"class","dialog-header svelte-70r9o1"),d(p,"class","dialog-description svelte-70r9o1"),d(g,"class","channel-list svelte-70r9o1"),d(f,"class","dialog-content svelte-70r9o1"),d(t,"class","dialog svelte-70r9o1"),d(e,"class","dialog-overlay svelte-70r9o1")},m(w,m){q(w,e,m),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,f),c(f,p),c(f,_),c(f,g);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(g,null);T||(C=[G(a,"click",n[5]),G(t,"click",ot(n[6])),G(e,"click",n[5])],T=!0)},p(w,m){if(m&28){I=je(w[2]);let S;for(S=0;S<I.length;S+=1){const A=cl(w,I,S);v[S]?v[S].p(A,m):(v[S]=dl(A),v[S].c(),v[S].m(g,null))}for(;S<v.length;S+=1)v[S].d(1);v.length=I.length}},d(w){w&&b(e),Ns(v,w),T=!1,Ae(C)}}}function fl(n){let e,t,s,r,i=n[9].name+"",l,a,o,u;function f(g,T){return g[9].type==="dm"?Md:Od}let p=f(n),h=p(n);function _(){return n[7](n[9])}return{c(){e=k("button"),t=k("span"),h.c(),s=z(),r=k("span"),l=J(i),a=z(),this.h()},l(g){e=y(g,"BUTTON",{class:!0});var T=N(e);t=y(T,"SPAN",{class:!0});var C=N(t);h.l(C),C.forEach(b),s=M(T),r=y(T,"SPAN",{class:!0});var I=N(r);l=Z(I,i),I.forEach(b),a=M(T),T.forEach(b),this.h()},h(){d(t,"class","channel-icon svelte-70r9o1"),d(r,"class","channel-name svelte-70r9o1"),d(e,"class","channel-item svelte-70r9o1")},m(g,T){q(g,e,T),c(e,t),h.m(t,null),c(e,s),c(e,r),c(r,l),c(e,a),o||(u=G(e,"click",_),o=!0)},p(g,T){n=g,p!==(p=f(n))&&(h.d(1),h=p(n),h&&(h.c(),h.m(t,null))),T&4&&i!==(i=n[9].name+"")&&re(l,i)},d(g){g&&b(e),h.d(),o=!1,u()}}}function Od(n){let e;return{c(){e=J("#")},l(t){e=Z(t,"#")},m(t,s){q(t,e,s)},d(t){t&&b(e)}}}function Md(n){let e;return{c(){e=J("ðŸ’¬")},l(t){e=Z(t,"ðŸ’¬")},m(t,s){q(t,e,s)},d(t){t&&b(e)}}}function dl(n){let e,t=n[9].id!==n[3]&&fl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,r){s[9].id!==s[3]?t?t.p(s,r):(t=fl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&b(e),t&&t.d(s)}}}function zd(n){let e,t=n[0]&&n[1]&&ul(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=ul(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function Fd(n,e,t){let s,r,i;Oe(n,qn,h=>t(8,s=h)),Oe(n,dn,h=>t(2,r=h)),Oe(n,Rn,h=>t(3,i=h));let{visible:l=!1}=e,{message:a=null}=e;function o(h){!a||!s||(s.emit("message",{channelId:h,text:a.text,type:a.type,gifUrl:a.gifUrl,fileUrl:a.fileUrl,fileName:a.fileName,fileSize:a.fileSize,files:a.files}),t(0,l=!1))}function u(){t(0,l=!1)}function f(h){Zt.call(this,n,h)}const p=h=>o(h.id);return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"message"in h&&t(1,a=h.message)},[l,a,r,i,o,u,f,p]}class Ld extends ut{constructor(e){super(),ft(this,e,Fd,zd,ct,{visible:0,message:1})}}function hl(n){let e,t,s,r,i,l,a,o="Ã—",u,f,p,h,_,g,T,C,I,v,w,m,S,A;return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),i=J(n[1]),l=z(),a=k("button"),a.textContent=o,u=z(),f=k("div"),p=k("p"),h=J(n[2]),_=z(),g=k("div"),T=k("button"),C=J(n[4]),I=z(),v=k("button"),w=J(n[3]),this.h()},l(E){e=y(E,"DIV",{class:!0});var R=N(e);t=y(R,"DIV",{class:!0});var D=N(t);s=y(D,"DIV",{class:!0});var F=N(s);r=y(F,"H2",{class:!0});var O=N(r);i=Z(O,n[1]),O.forEach(b),l=M(F),a=y(F,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-y9ayml"&&(a.textContent=o),F.forEach(b),u=M(D),f=y(D,"DIV",{class:!0});var L=N(f);p=y(L,"P",{class:!0});var B=N(p);h=Z(B,n[2]),B.forEach(b),L.forEach(b),_=M(D),g=y(D,"DIV",{class:!0});var U=N(g);T=y(U,"BUTTON",{class:!0});var P=N(T);C=Z(P,n[4]),P.forEach(b),I=M(U),v=y(U,"BUTTON",{class:!0});var x=N(v);w=Z(x,n[3]),x.forEach(b),U.forEach(b),D.forEach(b),R.forEach(b),this.h()},h(){d(r,"class","svelte-1myntg4"),d(a,"class","close-btn svelte-1myntg4"),d(s,"class","modal-header svelte-1myntg4"),d(p,"class","svelte-1myntg4"),d(f,"class","modal-body svelte-1myntg4"),d(T,"class","cancel-btn svelte-1myntg4"),d(v,"class",m="confirm-btn "+n[5]+" svelte-1myntg4"),d(g,"class","modal-footer svelte-1myntg4"),d(t,"class","modal-content svelte-1myntg4"),d(e,"class","modal-overlay svelte-1myntg4")},m(E,R){q(E,e,R),c(e,t),c(t,s),c(s,r),c(r,i),c(s,l),c(s,a),c(t,u),c(t,f),c(f,p),c(p,h),c(t,_),c(t,g),c(g,T),c(T,C),c(g,I),c(g,v),c(v,w),S||(A=[G(a,"click",n[7]),G(T,"click",n[7]),G(v,"click",n[6]),G(t,"click",ot(n[10])),G(e,"click",n[7])],S=!0)},p(E,R){R&2&&re(i,E[1]),R&4&&re(h,E[2]),R&16&&re(C,E[4]),R&8&&re(w,E[3]),R&32&&m!==(m="confirm-btn "+E[5]+" svelte-1myntg4")&&d(v,"class",m)},d(E){E&&b(e),S=!1,Ae(A)}}}function Bd(n){let e,t=n[0]&&hl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=hl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function Ud(n,e,t){let{isOpen:s=!1}=e,{title:r="Confirm Action"}=e,{message:i="Are you sure you want to proceed?"}=e,{confirmText:l="Confirm"}=e,{cancelText:a="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:f=()=>{}}=e;function p(){u()}function h(){f()}function _(g){Zt.call(this,n,g)}return n.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"title"in g&&t(1,r=g.title),"message"in g&&t(2,i=g.message),"confirmText"in g&&t(3,l=g.confirmText),"cancelText"in g&&t(4,a=g.cancelText),"variant"in g&&t(5,o=g.variant),"onConfirm"in g&&t(8,u=g.onConfirm),"onCancel"in g&&t(9,f=g.onCancel)},[s,r,i,l,a,o,p,h,u,f,_]}class Cn extends ut{constructor(e){super(),ft(this,e,Ud,Bd,ct,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:xd}=Mr;function pl(n,e,t){const s=n.slice();s[68]=e[t];const r=s[19](s[68].user);s[69]=r;const i=s[33](s[68].replyTo);return s[70]=i,s}function gl(n,e,t){const s=n.slice();return s[73]=e[t],s[75]=t,s}function ml(n){let e,t="<span>New Messages</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){d(e,"class","new-messages-divider svelte-zjz65z")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function jd(n){let e,t=n[68].user.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","avatar-placeholder svelte-zjz65z"),Te(e,"background-color",n[20](n[68].user))},m(r,i){q(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user.charAt(0).toUpperCase()+"")&&re(s,t),i[0]&1&&Te(e,"background-color",r[20](r[68].user))},d(r){r&&b(e)}}}function Vd(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[69].profilePicture)||d(e,"src",t),d(e,"alt",s=n[68].user),d(e,"class","avatar svelte-zjz65z")},m(r,i){q(r,e,i)},p(r,i){i[0]&1&&!Ue(e.src,t=r[69].profilePicture)&&d(e,"src",t),i[0]&1&&s!==(s=r[68].user)&&d(e,"alt",s)},d(r){r&&b(e)}}}function qd(n){let e,t=n[68].user+"",s;return{c(){e=k("span"),s=J(t),this.h()},l(r){e=y(r,"SPAN",{class:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","username svelte-zjz65z")},m(r,i){q(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user+"")&&re(s,t)},d(r){r&&b(e)}}}function Hd(n){let e,t=n[68].user+"",s,r,i;function l(){return n[44](n[69])}return{c(){e=k("button"),s=J(t),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var o=N(e);s=Z(o,t),o.forEach(b),this.h()},h(){d(e,"class","username svelte-zjz65z")},m(a,o){q(a,e,o),c(e,s),r||(i=G(e,"click",l),r=!0)},p(a,o){n=a,o[0]&1&&t!==(t=n[68].user+"")&&re(s,t)},d(a){a&&b(e),r=!1,i()}}}function vl(n){let e,t="ðŸ“Œ";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=y(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){d(e,"class","pin-badge svelte-zjz65z"),d(e,"title","Pinned message")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function _l(n){let e,t="(edited)";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=y(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){d(e,"class","edited-badge svelte-zjz65z"),d(e,"title","Edited")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function bl(n){let e,t,s,r,i,l=n[70].user+"",a,o,u,f=n[70].text.substring(0,100)+"",p,h=n[70].text.length>100?"...":"",_,g,T;function C(){return n[45](n[70])}return{c(){e=k("div"),t=k("div"),s=z(),r=k("div"),i=k("span"),a=J(l),o=z(),u=k("span"),p=J(f),_=J(h),this.h()},l(I){e=y(I,"DIV",{class:!0});var v=N(e);t=y(v,"DIV",{class:!0}),N(t).forEach(b),s=M(v),r=y(v,"DIV",{class:!0});var w=N(r);i=y(w,"SPAN",{class:!0});var m=N(i);a=Z(m,l),m.forEach(b),o=M(w),u=y(w,"SPAN",{class:!0});var S=N(u);p=Z(S,f),_=Z(S,h),S.forEach(b),w.forEach(b),v.forEach(b),this.h()},h(){d(t,"class","reply-line svelte-zjz65z"),d(i,"class","reply-username svelte-zjz65z"),d(u,"class","reply-text svelte-zjz65z"),d(r,"class","reply-content svelte-zjz65z"),d(e,"class","reply-preview svelte-zjz65z")},m(I,v){q(I,e,v),c(e,t),c(e,s),c(e,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(u,_),g||(T=G(e,"click",C),g=!0)},p(I,v){n=I,v[0]&1&&l!==(l=n[70].user+"")&&re(a,l),v[0]&1&&f!==(f=n[70].text.substring(0,100)+"")&&re(p,f),v[0]&1&&h!==(h=n[70].text.length>100?"...":"")&&re(_,h)},d(I){I&&b(e),g=!1,T()}}}function Gd(n){let e;function t(i,l){return i[68].type==="gif"&&i[68].gifUrl?Xd:i[68].type==="file"&&(i[68].fileUrl||i[68].files)?Kd:Yd}let s=t(n),r=s(n);return{c(){e=k("div"),r.c(),this.h()},l(i){e=y(i,"DIV",{class:!0});var l=N(e);r.l(l),l.forEach(b),this.h()},h(){d(e,"class","message-content")},m(i,l){q(i,e,l),r.m(e,null)},p(i,l){s===(s=t(i))&&r?r.p(i,l):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&b(e),r.d()}}}function Wd(n){let e,t,s,r,i,l="Cancel",a,o,u="Save",f,p;function h(...g){return n[47](n[68],...g)}function _(){return n[48](n[68])}return{c(){e=k("div"),t=k("textarea"),s=z(),r=k("div"),i=k("button"),i.textContent=l,a=z(),o=k("button"),o.textContent=u,this.h()},l(g){e=y(g,"DIV",{class:!0});var T=N(e);t=y(T,"TEXTAREA",{class:!0,rows:!0}),N(t).forEach(b),s=M(T),r=y(T,"DIV",{class:!0});var C=N(r);i=y(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1czerce"&&(i.textContent=l),a=M(C),o=y(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-w3glyi"&&(o.textContent=u),C.forEach(b),T.forEach(b),this.h()},h(){d(t,"class","edit-textarea svelte-zjz65z"),d(t,"rows","3"),d(i,"class","edit-cancel svelte-zjz65z"),d(o,"class","edit-save svelte-zjz65z"),d(r,"class","edit-actions svelte-zjz65z"),d(e,"class","edit-mode svelte-zjz65z")},m(g,T){q(g,e,T),c(e,t),$e(t,n[10]),c(e,s),c(e,r),c(r,i),c(r,a),c(r,o),f||(p=[G(t,"input",n[46]),G(t,"keydown",h),G(i,"click",n[25]),G(o,"click",_)],f=!0)},p(g,T){n=g,T[0]&1024&&$e(t,n[10])},d(g){g&&b(e),f=!1,Ae(p)}}}function Yd(n){let e,t,s=Is(n[68].text)+"";return{c(){e=k("div"),t=new co(!1),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=N(e);t=oo(i,!1),i.forEach(b),this.h()},h(){t.a=null,d(e,"class","markdown-content svelte-zjz65z")},m(r,i){q(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Is(r[68].text)+"")&&t.p(s)},d(r){r&&b(e)}}}function Kd(n){let e,t;function s(a,o){if(a[68].files&&a[68].files.length>1)return Jd;if(a[68].fileUrl)return Zd}let r=s(n),i=r&&r(n),l=n[68].text&&(n[68].files?n[68].text!==`Shared ${n[68].files.length} files`:n[68].text!==`Shared: ${n[68].fileName}`)&&El(n);return{c(){i&&i.c(),e=z(),l&&l.c(),t=Re()},l(a){i&&i.l(a),e=M(a),l&&l.l(a),t=Re()},m(a,o){i&&i.m(a,o),q(a,e,o),l&&l.m(a,o),q(a,t,o)},p(a,o){r===(r=s(a))&&i?i.p(a,o):(i&&i.d(1),i=r&&r(a),i&&(i.c(),i.m(e.parentNode,e))),a[68].text&&(a[68].files?a[68].text!==`Shared ${a[68].files.length} files`:a[68].text!==`Shared: ${a[68].fileName}`)?l?l.p(a,o):(l=El(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){a&&(b(e),b(t)),i&&i.d(a),l&&l.d(a)}}}function Xd(n){let e,t,s,r;return{c(){e=k("img"),this.h()},l(i){e=y(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Ue(e.src,t=n[68].gifUrl)||d(e,"src",t),d(e,"alt","GIF"),d(e,"class",s="gif "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(e,"data-spoiler",r=n[68].isSpoiler?"true":"false")},m(i,l){q(i,e,l)},p(i,l){l[0]&1&&!Ue(e.src,t=i[68].gifUrl)&&d(e,"src",t),l[0]&1&&s!==(s="gif "+(i[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(e,"class",s),l[0]&1&&r!==(r=i[68].isSpoiler?"true":"false")&&d(e,"data-spoiler",r)},d(i){i&&b(e)}}}function Zd(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Qr(a[68].fileName)),e?eh:(t==null&&(t=!!Qo(a[68].fileName)),t?$d:Qd)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Re()},l(a){l.l(a),s=Re()},m(a,o){l.m(a,o),q(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&b(s),l.d(a)}}}function Jd(n){let e,t=je(n[68].files.slice(0,4)),s=[];for(let r=0;r<t.length;r+=1)s[r]=wl(gl(n,t,r));return{c(){e=k("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var i=N(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(b),this.h()},h(){d(e,"class","files-gallery svelte-zjz65z"),ge(e,"has-more",n[68].files.length>4)},m(r,i){q(r,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(r,i){if(i[0]&1|i[1]&272){t=je(r[68].files.slice(0,4));let l;for(l=0;l<t.length;l+=1){const a=gl(r,t,l);s[l]?s[l].p(a,i):(s[l]=wl(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}i[0]&1&&ge(e,"has-more",r[68].files.length>4)},d(r){r&&b(e),Ns(s,r)}}}function Qd(n){let e,t,s=vn(n[68].fileName)+"",r,i,l,a,o=n[68].fileName+"",u,f,p,h=mn(n[68].fileSize)+"",_,g,T;return{c(){e=k("a"),t=k("span"),r=J(s),i=z(),l=k("div"),a=k("span"),u=J(o),f=z(),p=k("span"),_=J(h),this.h()},l(C){e=y(C,"A",{href:!0,download:!0,class:!0});var I=N(e);t=y(I,"SPAN",{class:!0});var v=N(t);r=Z(v,s),v.forEach(b),i=M(I),l=y(I,"DIV",{class:!0});var w=N(l);a=y(w,"SPAN",{class:!0});var m=N(a);u=Z(m,o),m.forEach(b),f=M(w),p=y(w,"SPAN",{class:!0});var S=N(p);_=Z(S,h),S.forEach(b),w.forEach(b),I.forEach(b),this.h()},h(){d(t,"class","file-icon svelte-zjz65z"),d(a,"class","file-name svelte-zjz65z"),d(p,"class","file-size svelte-zjz65z"),d(l,"class","file-info svelte-zjz65z"),d(e,"href",g=et(n[68].fileUrl)),d(e,"download",T=n[68].fileName),d(e,"class","file-attachment svelte-zjz65z")},m(C,I){q(C,e,I),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,f),c(l,p),c(p,_)},p(C,I){I[0]&1&&s!==(s=vn(C[68].fileName)+"")&&re(r,s),I[0]&1&&o!==(o=C[68].fileName+"")&&re(u,o),I[0]&1&&h!==(h=mn(C[68].fileSize)+"")&&re(_,h),I[0]&1&&g!==(g=et(C[68].fileUrl))&&d(e,"href",g),I[0]&1&&T!==(T=C[68].fileName)&&d(e,"download",T)},d(C){C&&b(e)}}}function $d(n){let e,t,s,r,i,l,a,o,u,f,p,h=vn(n[68].fileName)+"",_,g,T=n[68].fileName+"",C,I,v,w,m=mn(n[68].fileSize)+"",S,A,E,R,D,F;function O(...B){return n[53](n[68],...B)}function L(...B){return n[54](n[68],...B)}return{c(){e=k("div"),t=k("video"),s=k("source"),l=J(`\r
									Your browser does not support the video tag.`),u=z(),f=k("a"),p=k("span"),_=J(h),g=z(),C=J(T),I=z(),v=k("span"),w=J("("),S=J(m),A=J(")"),this.h()},l(B){e=y(B,"DIV",{class:!0});var U=N(e);t=y(U,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var P=N(t);s=y(P,"SOURCE",{src:!0,type:!0}),l=Z(P,`\r
									Your browser does not support the video tag.`),P.forEach(b),u=M(U),f=y(U,"A",{href:!0,download:!0,class:!0});var x=N(f);p=y(x,"SPAN",{class:!0});var W=N(p);_=Z(W,h),W.forEach(b),g=M(x),C=Z(x,T),I=M(x),v=y(x,"SPAN",{class:!0});var V=N(v);w=Z(V,"("),S=Z(V,m),A=Z(V,")"),V.forEach(b),x.forEach(b),U.forEach(b),this.h()},h(){Ue(s.src,r=et(n[68].fileUrl))||d(s,"src",r),d(s,"type",i="video/"+n[68].fileName?.split(".").pop()),t.controls=!0,d(t,"class",a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",o=n[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge, right-click for options"),d(p,"class","file-icon svelte-zjz65z"),d(v,"class","file-size svelte-zjz65z"),d(f,"href",E=et(n[68].fileUrl)),d(f,"download",R=n[68].fileName),d(f,"class","video-download-link svelte-zjz65z"),d(e,"class","video-container svelte-zjz65z")},m(B,U){q(B,e,U),c(e,t),c(t,s),c(t,l),c(e,u),c(e,f),c(f,p),c(p,_),c(f,g),c(f,C),c(f,I),c(f,v),c(v,w),c(v,S),c(v,A),D||(F=[G(t,"click",O),G(t,"contextmenu",L)],D=!0)},p(B,U){n=B,U[0]&1&&!Ue(s.src,r=et(n[68].fileUrl))&&d(s,"src",r),U[0]&1&&i!==(i="video/"+n[68].fileName?.split(".").pop())&&d(s,"type",i),U[0]&1&&a!==(a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",a),U[0]&1&&o!==(o=n[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",o),U[0]&1&&h!==(h=vn(n[68].fileName)+"")&&re(_,h),U[0]&1&&T!==(T=n[68].fileName+"")&&re(C,T),U[0]&1&&m!==(m=mn(n[68].fileSize)+"")&&re(S,m),U[0]&1&&E!==(E=et(n[68].fileUrl))&&d(f,"href",E),U[0]&1&&R!==(R=n[68].fileName)&&d(f,"download",R)},d(B){B&&b(e),D=!1,Ae(F)}}}function eh(n){let e,t,s,r,i,l,a,o,u,f=vn(n[68].fileName)+"",p,h,_=n[68].fileName+"",g,T,C,I,v=mn(n[68].fileSize)+"",w,m,S,A,E,R;function D(...O){return n[51](n[68],...O)}function F(...O){return n[52](n[68],...O)}return{c(){e=k("div"),t=k("img"),a=z(),o=k("a"),u=k("span"),p=J(f),h=z(),g=J(_),T=z(),C=k("span"),I=J("("),w=J(v),m=J(")"),this.h()},l(O){e=y(O,"DIV",{class:!0});var L=N(e);t=y(L,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(L),o=y(L,"A",{href:!0,download:!0,class:!0});var B=N(o);u=y(B,"SPAN",{class:!0});var U=N(u);p=Z(U,f),U.forEach(b),h=M(B),g=Z(B,_),T=M(B),C=y(B,"SPAN",{class:!0});var P=N(C);I=Z(P,"("),w=Z(P,v),m=Z(P,")"),P.forEach(b),B.forEach(b),L.forEach(b),this.h()},h(){Ue(t.src,s=et(n[68].fileUrl))||d(t,"src",s),d(t,"alt",r=n[68].fileName),d(t,"class",i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge, right-click for options"),d(u,"class","file-icon svelte-zjz65z"),d(C,"class","file-size svelte-zjz65z"),d(o,"href",S=et(n[68].fileUrl)),d(o,"download",A=n[68].fileName),d(o,"class","image-download-link svelte-zjz65z"),d(e,"class","image-container svelte-zjz65z")},m(O,L){q(O,e,L),c(e,t),c(e,a),c(e,o),c(o,u),c(u,p),c(o,h),c(o,g),c(o,T),c(o,C),c(C,I),c(C,w),c(C,m),E||(R=[G(t,"click",D),G(t,"contextmenu",F)],E=!0)},p(O,L){n=O,L[0]&1&&!Ue(t.src,s=et(n[68].fileUrl))&&d(t,"src",s),L[0]&1&&r!==(r=n[68].fileName)&&d(t,"alt",r),L[0]&1&&i!==(i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),L[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",l),L[0]&1&&f!==(f=vn(n[68].fileName)+"")&&re(p,f),L[0]&1&&_!==(_=n[68].fileName+"")&&re(g,_),L[0]&1&&v!==(v=mn(n[68].fileSize)+"")&&re(w,v),L[0]&1&&S!==(S=et(n[68].fileUrl))&&d(o,"href",S),L[0]&1&&A!==(A=n[68].fileName)&&d(o,"download",A)},d(O){O&&b(e),E=!1,Ae(R)}}}function th(n){let e,t,s=vn(n[73].fileName)+"",r,i,l,a,o=n[73].fileName+"",u,f,p,h,_=mn(n[73].fileSize)+"",g,T,C,I,v;return{c(){e=k("a"),t=k("div"),r=J(s),i=z(),l=k("div"),a=k("span"),u=J(o),f=z(),p=k("span"),h=J("("),g=J(_),T=J(")"),C=z(),this.h()},l(w){e=y(w,"A",{href:!0,download:!0,class:!0});var m=N(e);t=y(m,"DIV",{class:!0});var S=N(t);r=Z(S,s),S.forEach(b),i=M(m),l=y(m,"DIV",{class:!0});var A=N(l);a=y(A,"SPAN",{class:!0});var E=N(a);u=Z(E,o),E.forEach(b),f=M(A),p=y(A,"SPAN",{class:!0});var R=N(p);h=Z(R,"("),g=Z(R,_),T=Z(R,")"),R.forEach(b),A.forEach(b),C=M(m),m.forEach(b),this.h()},h(){d(t,"class","gallery-file-icon-large svelte-zjz65z"),d(a,"class","file-name-truncate svelte-zjz65z"),d(p,"class","file-size-small svelte-zjz65z"),d(l,"class","gallery-file-overlay svelte-zjz65z"),d(e,"href",I=et(n[73].fileUrl)),d(e,"download",v=n[73].fileName),d(e,"class","gallery-file-item file-link svelte-zjz65z")},m(w,m){q(w,e,m),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,f),c(l,p),c(p,h),c(p,g),c(p,T),c(e,C)},p(w,m){m[0]&1&&s!==(s=vn(w[73].fileName)+"")&&re(r,s),m[0]&1&&o!==(o=w[73].fileName+"")&&re(u,o),m[0]&1&&_!==(_=mn(w[73].fileSize)+"")&&re(g,_),m[0]&1&&I!==(I=et(w[73].fileUrl))&&d(e,"href",I),m[0]&1&&v!==(v=w[73].fileName)&&d(e,"download",v)},d(w){w&&b(e)}}}function nh(n){let e,t,s,r,i,l,a,o,u,f;function p(..._){return n[50](n[73],..._)}let h=n[75]===3&&n[68].files.length>4&&yl(n);return{c(){e=k("div"),t=k("video"),s=k("source"),a=z(),h&&h.c(),o=z(),this.h()},l(_){e=y(_,"DIV",{class:!0});var g=N(e);t=y(g,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var T=N(t);s=y(T,"SOURCE",{src:!0}),T.forEach(b),a=M(g),h&&h.l(g),o=M(g),g.forEach(b),this.h()},h(){Ue(s.src,r=et(n[73].fileUrl))||d(s,"src",r),d(t,"class",i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge"),d(e,"class","gallery-file-item svelte-zjz65z"),ge(e,"last-item",n[75]===3&&n[68].files.length>4)},m(_,g){q(_,e,g),c(e,t),c(t,s),c(e,a),h&&h.m(e,null),c(e,o),u||(f=G(t,"click",p),u=!0)},p(_,g){n=_,g[0]&1&&!Ue(s.src,r=et(n[73].fileUrl))&&d(s,"src",r),g[0]&1&&i!==(i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=yl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&ge(e,"last-item",n[75]===3&&n[68].files.length>4)},d(_){_&&b(e),h&&h.d(),u=!1,f()}}}function sh(n){let e,t,s,r,i,l,a,o,u,f;function p(..._){return n[49](n[68],n[73],..._)}let h=n[75]===3&&n[68].files.length>4&&kl(n);return{c(){e=k("div"),t=k("img"),a=z(),h&&h.c(),o=z(),this.h()},l(_){e=y(_,"DIV",{class:!0});var g=N(e);t=y(g,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(g),h&&h.l(g),o=M(g),g.forEach(b),this.h()},h(){Ue(t.src,s=et(n[73].fileUrl))||d(t,"src",s),d(t,"alt",r=n[73].fileName),d(t,"class",i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge"),d(e,"class","gallery-file-item svelte-zjz65z"),ge(e,"last-item",n[75]===3&&n[68].files.length>4)},m(_,g){q(_,e,g),c(e,t),c(e,a),h&&h.m(e,null),c(e,o),u||(f=G(t,"click",p),u=!0)},p(_,g){n=_,g[0]&1&&!Ue(t.src,s=et(n[73].fileUrl))&&d(t,"src",s),g[0]&1&&r!==(r=n[73].fileName)&&d(t,"alt",r),g[0]&1&&i!==(i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=kl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&ge(e,"last-item",n[75]===3&&n[68].files.length>4)},d(_){_&&b(e),h&&h.d(),u=!1,f()}}}function yl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),s=J("+"),i=J(r),this.h()},l(l){e=y(l,"DIV",{class:!0});var a=N(e);t=y(a,"SPAN",{class:!0});var o=N(t);s=Z(o,"+"),i=Z(o,r),o.forEach(b),a.forEach(b),this.h()},h(){d(t,"class","more-count svelte-zjz65z"),d(e,"class","more-overlay svelte-zjz65z")},m(l,a){q(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&re(i,r)},d(l){l&&b(e)}}}function kl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),s=J("+"),i=J(r),this.h()},l(l){e=y(l,"DIV",{class:!0});var a=N(e);t=y(a,"SPAN",{class:!0});var o=N(t);s=Z(o,"+"),i=Z(o,r),o.forEach(b),a.forEach(b),this.h()},h(){d(t,"class","more-count svelte-zjz65z"),d(e,"class","more-overlay svelte-zjz65z")},m(l,a){q(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&re(i,r)},d(l){l&&b(e)}}}function wl(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Qr(a[73].fileName)),e?sh:(t==null&&(t=!!Qo(a[73].fileName)),t?nh:th)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Re()},l(a){l.l(a),s=Re()},m(a,o){l.m(a,o),q(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&b(s),l.d(a)}}}function El(n){let e,t,s=Is(n[68].text)+"";return{c(){e=k("div"),t=new co(!1),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=N(e);t=oo(i,!1),i.forEach(b),this.h()},h(){t.a=null,d(e,"class","markdown-content svelte-zjz65z")},m(r,i){q(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=Is(r[68].text)+"")&&t.p(s)},d(r){r&&b(e)}}}function Tl(n,e){let t,s,r,i,l,a,o,u,f,p,h,_,g=Dl(e[68].timestamp)+"",T,C,I,v,w,m,S,A=e[1]===e[68].id&&ml();function E(H,Y){return H[69]?.profilePicture?Vd:jd}let R=E(e),D=R(e);function F(H,Y){return H[69]?Hd:qd}let O=F(e),L=O(e),B=e[68].isPinned&&vl(),U=e[68].isEdited&&_l(),P=e[70]&&bl(e);function x(H,Y){return H[9]===H[68].id?Wd:Gd}let W=x(e),V=W(e);function K(...H){return e[55](e[68],...H)}return{key:n,first:null,c(){t=Re(),A&&A.c(),s=z(),r=k("div"),i=k("div"),D.c(),l=z(),a=k("div"),o=k("div"),u=k("div"),L.c(),f=z(),B&&B.c(),p=z(),U&&U.c(),h=z(),_=k("span"),T=J(g),C=z(),P&&P.c(),I=z(),V.c(),this.h()},l(H){t=Re(),A&&A.l(H),s=M(H),r=y(H,"DIV",{id:!0,class:!0});var Y=N(r);i=y(Y,"DIV",{class:!0});var X=N(i);D.l(X),X.forEach(b),l=M(Y),a=y(Y,"DIV",{class:!0});var ne=N(a);o=y(ne,"DIV",{class:!0});var de=N(o);u=y(de,"DIV",{class:!0});var te=N(u);L.l(te),f=M(te),B&&B.l(te),p=M(te),U&&U.l(te),te.forEach(b),h=M(de),_=y(de,"SPAN",{class:!0});var ce=N(_);T=Z(ce,g),ce.forEach(b),de.forEach(b),C=M(ne),P&&P.l(ne),I=M(ne),V.l(ne),ne.forEach(b),Y.forEach(b),this.h()},h(){d(i,"class","message-avatar svelte-zjz65z"),d(u,"class","header-left svelte-zjz65z"),d(_,"class","timestamp svelte-zjz65z"),d(o,"class","message-header svelte-zjz65z"),d(a,"class","message-body svelte-zjz65z"),d(r,"id",v="message-"+e[68].id),d(r,"class",w="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z"),this.first=t},m(H,Y){q(H,t,Y),A&&A.m(H,Y),q(H,s,Y),q(H,r,Y),c(r,i),D.m(i,null),c(r,l),c(r,a),c(a,o),c(o,u),L.m(u,null),c(u,f),B&&B.m(u,null),c(u,p),U&&U.m(u,null),c(o,h),c(o,_),c(_,T),c(a,C),P&&P.m(a,null),c(a,I),V.m(a,null),m||(S=G(r,"contextmenu",K),m=!0)},p(H,Y){e=H,e[1]===e[68].id?A||(A=ml(),A.c(),A.m(s.parentNode,s)):A&&(A.d(1),A=null),R===(R=E(e))&&D?D.p(e,Y):(D.d(1),D=R(e),D&&(D.c(),D.m(i,null))),O===(O=F(e))&&L?L.p(e,Y):(L.d(1),L=O(e),L&&(L.c(),L.m(u,f))),e[68].isPinned?B||(B=vl(),B.c(),B.m(u,p)):B&&(B.d(1),B=null),e[68].isEdited?U||(U=_l(),U.c(),U.m(u,null)):U&&(U.d(1),U=null),Y[0]&1&&g!==(g=Dl(e[68].timestamp)+"")&&re(T,g),e[70]?P?P.p(e,Y):(P=bl(e),P.c(),P.m(a,I)):P&&(P.d(1),P=null),W===(W=x(e))&&V?V.p(e,Y):(V.d(1),V=W(e),V&&(V.c(),V.m(a,null))),Y[0]&1&&v!==(v="message-"+e[68].id)&&d(r,"id",v),Y[0]&16385&&w!==(w="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z")&&d(r,"class",w)},d(H){H&&(b(t),b(s),b(r)),A&&A.d(H),D.d(),L.d(),B&&B.d(),U&&U.d(),P&&P.d(),V.d(),m=!1,S()}}}function Al(n){let e,t,s;function r(l){n[58](l)}let i={message:n[8],x:n[6],y:n[7],onEdit:n[23],onDelete:n[26],onPin:n[28],onReply:n[29],onDownload:n[30],onForward:n[31]};return n[5]!==void 0&&(i.visible=n[5]),e=new Pd({props:i}),Je.push(()=>Mt(e,"visible",r)),{c(){Ye(e.$$.fragment)},l(l){We(e.$$.fragment,l)},m(l,a){Ge(e,l,a),s=!0},p(l,a){const o={};a[0]&256&&(o.message=l[8]),a[0]&64&&(o.x=l[6]),a[0]&128&&(o.y=l[7]),!t&&a[0]&32&&(t=!0,o.visible=l[5],Ot(()=>t=!1)),e.$set(o)},i(l){s||(be(e.$$.fragment,l),s=!0)},o(l){Ie(e.$$.fragment,l),s=!1},d(l){He(e,l)}}}function Sl(n){let e,t,s,r,i,l,a="âœ•",o,u,f,p,h,_=n[17].length>1&&Cl(n);return{c(){e=k("div"),t=k("img"),r=z(),_&&_.c(),i=z(),l=k("button"),l.textContent=a,o=z(),u=k("a"),f=J("Open in new tab"),this.h()},l(g){e=y(g,"DIV",{class:!0});var T=N(e);t=y(T,"IMG",{src:!0,alt:!0,class:!0}),r=M(T),_&&_.l(T),i=M(T),l=y(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-cyanf1"&&(l.textContent=a),o=M(T),u=y(T,"A",{href:!0,target:!0,rel:!0,class:!0});var C=N(u);f=Z(C,"Open in new tab"),C.forEach(b),T.forEach(b),this.h()},h(){Ue(t.src,s=n[15])||d(t,"src",s),d(t,"alt","Enlarged"),d(t,"class","enlarged-image svelte-zjz65z"),d(l,"class","close-modal svelte-zjz65z"),d(u,"href",n[15]),d(u,"target","_blank"),d(u,"rel","noopener noreferrer"),d(u,"class","open-new-tab svelte-zjz65z"),d(e,"class","image-modal svelte-zjz65z")},m(g,T){q(g,e,T),c(e,t),c(e,r),_&&_.m(e,null),c(e,i),c(e,l),c(e,o),c(e,u),c(u,f),p||(h=[G(t,"click",ot(n[43])),G(l,"click",n[36]),G(e,"click",n[36])],p=!0)},p(g,T){T[0]&32768&&!Ue(t.src,s=g[15])&&d(t,"src",s),g[17].length>1?_?_.p(g,T):(_=Cl(g),_.c(),_.m(e,i)):_&&(_.d(1),_=null),T[0]&32768&&d(u,"href",g[15])},d(g){g&&b(e),_&&_.d(),p=!1,Ae(h)}}}function Cl(n){let e,t="â€¹",s,r,i="â€º",l,a,o=n[18]+1+"",u,f,p=n[17].length+"",h,_,g;return{c(){e=k("button"),e.textContent=t,s=z(),r=k("button"),r.textContent=i,l=z(),a=k("div"),u=J(o),f=J(" / "),h=J(p),this.h()},l(T){e=y(T,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-c4iawu"&&(e.textContent=t),s=M(T),r=y(T,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1gn22tr"&&(r.textContent=i),l=M(T),a=y(T,"DIV",{class:!0});var C=N(a);u=Z(C,o),f=Z(C," / "),h=Z(C,p),C.forEach(b),this.h()},h(){d(e,"class","nav-arrow nav-prev svelte-zjz65z"),d(e,"title","Previous (â†)"),d(r,"class","nav-arrow nav-next svelte-zjz65z"),d(r,"title","Next (â†’)"),d(a,"class","image-counter svelte-zjz65z")},m(T,C){q(T,e,C),q(T,s,C),q(T,r,C),q(T,l,C),q(T,a,C),c(a,u),c(a,f),c(a,h),_||(g=[G(e,"click",ot(n[62])),G(r,"click",ot(n[63]))],_=!0)},p(T,C){C[0]&262144&&o!==(o=T[18]+1+"")&&re(u,o),C[0]&131072&&p!==(p=T[17].length+"")&&re(h,p)},d(T){T&&(b(e),b(s),b(r),b(l),b(a)),_=!1,Ae(g)}}}function Il(n){let e,t,s,r,i,l,a,o="âœ•",u,f,p,h,_;return{c(){e=k("div"),t=k("video"),s=k("source"),i=J(`\r
			Your browser does not support the video tag.`),l=z(),a=k("button"),a.textContent=o,u=z(),f=k("a"),p=J("Open in new tab"),this.h()},l(g){e=y(g,"DIV",{class:!0});var T=N(e);t=y(T,"VIDEO",{class:!0});var C=N(t);s=y(C,"SOURCE",{src:!0}),i=Z(C,`\r
			Your browser does not support the video tag.`),C.forEach(b),l=M(T),a=y(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-yc21b"&&(a.textContent=o),u=M(T),f=y(T,"A",{href:!0,target:!0,rel:!0,class:!0});var I=N(f);p=Z(I,"Open in new tab"),I.forEach(b),T.forEach(b),this.h()},h(){Ue(s.src,r=n[16])||d(s,"src",r),t.controls=!0,t.autoplay=!0,d(t,"class","enlarged-video svelte-zjz65z"),d(a,"class","close-modal svelte-zjz65z"),d(f,"href",n[16]),d(f,"target","_blank"),d(f,"rel","noopener noreferrer"),d(f,"class","open-new-tab svelte-zjz65z"),d(e,"class","video-modal svelte-zjz65z")},m(g,T){q(g,e,T),c(e,t),c(t,s),c(t,i),c(e,l),c(e,a),c(e,u),c(e,f),c(f,p),h||(_=[G(t,"click",ot(n[42])),G(a,"click",n[40]),G(e,"click",n[40])],h=!0)},p(g,T){T[0]&65536&&!Ue(s.src,r=g[16])&&d(s,"src",r),T[0]&65536&&d(f,"href",g[16])},d(g){g&&b(e),h=!1,Ae(_)}}}function rh(n){let e=[],t=new Map,s,r,i,l,a,o,u,f,p,h,_,g,T,C,I,v,w,m=je(n[0]);const S=P=>P[68].id;for(let P=0;P<m.length;P+=1){let x=pl(n,m,P),W=S(x);t.set(W,e[P]=Tl(W,x))}function A(P){n[56](P)}function E(P){n[57](P)}let R={isOwnProfile:n[4]};n[2]!==void 0&&(R.isOpen=n[2]),n[3]!==void 0&&(R.user=n[3]),r=new Jr({props:R}),Je.push(()=>Mt(r,"isOpen",A)),Je.push(()=>Mt(r,"user",E));let D=n[8]&&Al(n);function F(P){n[59](P)}function O(P){n[60](P)}let L={};n[12]!==void 0&&(L.visible=n[12]),n[13]!==void 0&&(L.message=n[13]),u=new Ld({props:L}),Je.push(()=>Mt(u,"visible",F)),Je.push(()=>Mt(u,"message",O)),_=new Cn({props:{isOpen:n[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:n[27],onCancel:n[61]}});let B=n[15]&&Sl(n),U=n[16]&&Il(n);return{c(){for(let P=0;P<e.length;P+=1)e[P].c();s=z(),Ye(r.$$.fragment),a=z(),D&&D.c(),o=z(),Ye(u.$$.fragment),h=z(),Ye(_.$$.fragment),g=z(),B&&B.c(),T=z(),U&&U.c(),C=Re()},l(P){for(let x=0;x<e.length;x+=1)e[x].l(P);s=M(P),We(r.$$.fragment,P),a=M(P),D&&D.l(P),o=M(P),We(u.$$.fragment,P),h=M(P),We(_.$$.fragment,P),g=M(P),B&&B.l(P),T=M(P),U&&U.l(P),C=Re()},m(P,x){for(let W=0;W<e.length;W+=1)e[W]&&e[W].m(P,x);q(P,s,x),Ge(r,P,x),q(P,a,x),D&&D.m(P,x),q(P,o,x),Ge(u,P,x),q(P,h,x),Ge(_,P,x),q(P,g,x),B&&B.m(P,x),q(P,T,x),U&&U.m(P,x),q(P,C,x),I=!0,v||(w=G(xd,"keydown",n[38]),v=!0)},p(P,x){x[0]&58213891|x[1]&286&&(m=je(P[0]),e=Qt(e,x,S,1,P,m,t,s.parentNode,Jt,Tl,s,pl));const W={};x[0]&16&&(W.isOwnProfile=P[4]),!i&&x[0]&4&&(i=!0,W.isOpen=P[2],Ot(()=>i=!1)),!l&&x[0]&8&&(l=!0,W.user=P[3],Ot(()=>l=!1)),r.$set(W),P[8]?D?(D.p(P,x),x[0]&256&&be(D,1)):(D=Al(P),D.c(),be(D,1),D.m(o.parentNode,o)):D&&(xn(),Ie(D,1,1,()=>{D=null}),jn());const V={};!f&&x[0]&4096&&(f=!0,V.visible=P[12],Ot(()=>f=!1)),!p&&x[0]&8192&&(p=!0,V.message=P[13],Ot(()=>p=!1)),u.$set(V);const K={};x[0]&2048&&(K.isOpen=P[11]),x[0]&2048&&(K.onCancel=P[61]),_.$set(K),P[15]?B?B.p(P,x):(B=Sl(P),B.c(),B.m(T.parentNode,T)):B&&(B.d(1),B=null),P[16]?U?U.p(P,x):(U=Il(P),U.c(),U.m(C.parentNode,C)):U&&(U.d(1),U=null)},i(P){I||(be(r.$$.fragment,P),be(D),be(u.$$.fragment,P),be(_.$$.fragment,P),I=!0)},o(P){Ie(r.$$.fragment,P),Ie(D),Ie(u.$$.fragment,P),Ie(_.$$.fragment,P),I=!1},d(P){P&&(b(s),b(a),b(o),b(h),b(g),b(T),b(C));for(let x=0;x<e.length;x+=1)e[x].d(P);He(r,P),D&&D.d(P),He(u,P),He(_,P),B&&B.d(P),U&&U.d(P),v=!1,w()}}}function Dl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function mn(n){return n?n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB":""}function et(n){return n?n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:")?n:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${n}`:""}function vn(n){if(!n)return"ðŸ“Ž";const e=n.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function Qr(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function Qo(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function ih(n,e,t){let s,r,i;Oe(n,Rn,ee=>t(65,s=ee)),Oe(n,ln,ee=>t(66,r=ee)),Oe(n,jt,ee=>t(67,i=ee));let{messages:l}=e,{onReply:a=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,f=null,p=!1,h=!1,_=0,g=0,T=null,C=null,I="",v=!1,w=null;function m(ee){return i.find(ve=>ve.username===ee)}function S(ee){return m(ee)?.color||"var(--status-offline)"}function A(ee){t(3,f=ee),t(4,p=ee.id===r?.id),t(2,u=!0)}function E(ee,ve){ee.preventDefault(),t(8,T=ve),t(6,_=ee.clientX),t(7,g=ee.clientY),t(5,h=!0)}function R(){T&&(t(9,C=T.id),t(10,I=T.text),t(5,h=!1))}function D(ee){I.trim()&&Wo(s,ee,I.trim()),t(9,C=null),t(10,I="")}function F(){t(9,C=null),t(10,I="")}function O(){T&&(w=T,t(11,v=!0),t(5,h=!1))}function L(){w&&Of(s,w.id),t(11,v=!1)}function B(){T&&(Zr(s,T.id),t(5,h=!1))}function U(){T&&(a(T),t(5,h=!1))}async function P(){if(!(!T?.fileUrl||!T?.fileName)){try{const ee=et(T.fileUrl),bt=await(await fetch(ee)).blob(),ht=window.URL.createObjectURL(bt),Xe=document.createElement("a");Xe.href=ht,Xe.download=T.fileName,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),window.URL.revokeObjectURL(ht)}catch(ee){console.error("Download failed:",ee)}t(5,h=!1)}}let x=!1,W=null;function V(){T&&(t(13,W=T),t(12,x=!0),t(5,h=!1))}function K(ee,ve){ee.preventDefault(),t(8,T=ve),t(6,_=ee.clientX),t(7,g=ee.clientY),t(5,h=!0)}function H(ee){if(ee)return l.find(ve=>ve.id===ee)}let Y=null;function X(ee){const ve=document.getElementById(`message-${ee}`);ve&&(ve.scrollIntoView({behavior:"smooth",block:"center"}),t(14,Y=ee),setTimeout(()=>{t(14,Y=null)},2e3))}let ne=null,de=null,te=[],ce=0;function ie(ee,ve=[]){t(15,ne=ee),t(17,te=ve.length>0?ve:[ee]),t(18,ce=te.indexOf(ee))}function se(){t(15,ne=null),t(17,te=[]),t(18,ce=0)}function fe(ee){te.length!==0&&(ee==="prev"?t(18,ce=(ce-1+te.length)%te.length):t(18,ce=(ce+1)%te.length),t(15,ne=te[ce]))}function we(ee){ne&&(ee.key==="ArrowLeft"?(ee.preventDefault(),fe("prev")):ee.key==="ArrowRight"?(ee.preventDefault(),fe("next")):ee.key==="Escape"&&(ee.preventDefault(),se()))}function le(ee){t(16,de=ee)}function xe(){t(16,de=null)}function Se(ee){Zt.call(this,n,ee)}function ae(ee){Zt.call(this,n,ee)}const $=ee=>A(ee),ue=ee=>X(ee.id);function _e(){I=this.value,t(10,I)}const ye=(ee,ve)=>{ve.key==="Enter"&&!ve.shiftKey?(ve.preventDefault(),D(ee.id)):ve.key==="Escape"&&(ve.preventDefault(),F())},Ee=ee=>D(ee.id),ze=(ee,ve,bt)=>{if(bt.button===0){const ht=ee.files.filter(Xe=>Qr(Xe.fileName)).map(Xe=>et(Xe.fileUrl));ie(et(ve.fileUrl),ht)}},st=(ee,ve)=>ve.button===0&&le(et(ee.fileUrl)),tt=(ee,ve)=>ve.button===0&&ee.fileUrl&&ie(et(ee.fileUrl)),Ve=(ee,ve)=>K(ve,ee),qe=(ee,ve)=>{ve.button===0&&ee.fileUrl&&le(et(ee.fileUrl))},gt=(ee,ve)=>K(ve,ee),dt=(ee,ve)=>E(ve,ee);function rt(ee){u=ee,t(2,u)}function wt(ee){f=ee,t(3,f)}function Bt(ee){h=ee,t(5,h)}function it(ee){x=ee,t(12,x)}function me(ee){W=ee,t(13,W)}const Ne=()=>t(11,v=!1),Dt=()=>fe("prev"),zt=()=>fe("next");return n.$$set=ee=>{"messages"in ee&&t(0,l=ee.messages),"onReply"in ee&&t(41,a=ee.onReply),"firstUnreadMessageId"in ee&&t(1,o=ee.firstUnreadMessageId)},[l,o,u,f,p,h,_,g,T,C,I,v,x,W,Y,ne,de,te,ce,m,S,A,E,R,D,F,O,L,B,U,P,V,K,H,X,ie,se,fe,we,le,xe,a,Se,ae,$,ue,_e,ye,Ee,ze,st,tt,Ve,qe,gt,dt,rt,wt,Bt,it,me,Ne,Dt,zt]}class lh extends ut{constructor(e){super(),ft(this,e,ih,rh,ct,{messages:0,onReply:41,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Rl(n,e,t){const s=n.slice();return s[6]=e[t],s}function Nl(n){let e,t,s,r="ðŸ“Œ",i,l,a="Pinned Messages",o,u,f,p=n[0].length+"",h,_,g,T,C=[],I=new Map,v=je(n[0]);const w=m=>m[6].id;for(let m=0;m<v.length;m+=1){let S=Rl(n,v,m),A=w(S);I.set(A,C[m]=Pl(A,S))}return{c(){e=k("div"),t=k("div"),s=k("span"),s.textContent=r,i=z(),l=k("span"),l.textContent=a,o=z(),u=k("span"),f=J("("),h=J(p),_=J(")"),g=z(),T=k("div");for(let m=0;m<C.length;m+=1)C[m].c();this.h()},l(m){e=y(m,"DIV",{class:!0});var S=N(e);t=y(S,"DIV",{class:!0});var A=N(t);s=y(A,"SPAN",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-73xtmc"&&(s.textContent=r),i=M(A),l=y(A,"SPAN",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-123zvdk"&&(l.textContent=a),o=M(A),u=y(A,"SPAN",{class:!0});var E=N(u);f=Z(E,"("),h=Z(E,p),_=Z(E,")"),E.forEach(b),A.forEach(b),g=M(S),T=y(S,"DIV",{class:!0});var R=N(T);for(let D=0;D<C.length;D+=1)C[D].l(R);R.forEach(b),S.forEach(b),this.h()},h(){d(s,"class","pinned-icon svelte-d1025n"),d(l,"class","pinned-title svelte-d1025n"),d(u,"class","pinned-count svelte-d1025n"),d(t,"class","pinned-header svelte-d1025n"),d(T,"class","pinned-messages svelte-d1025n"),d(e,"class","pinned-container svelte-d1025n")},m(m,S){q(m,e,S),c(e,t),c(t,s),c(t,i),c(t,l),c(t,o),c(t,u),c(u,f),c(u,h),c(u,_),c(e,g),c(e,T);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(T,null)},p(m,S){S&1&&p!==(p=m[0].length+"")&&re(h,p),S&7&&(v=je(m[0]),C=Qt(C,S,w,1,m,v,I,T,Jt,Pl,null,Rl))},d(m){m&&b(e);for(let S=0;S<C.length;S+=1)C[S].d()}}}function Pl(n,e){let t,s,r,i=e[6].user+"",l,a,o,u=e[6].text.substring(0,100)+"",f,p=e[6].text.length>100?"...":"",h,_,g,T=Ol(e[6].timestamp)+"",C,I,v,w="Ã—",m,S,A;function E(){return e[3](e[6])}return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("span"),l=J(i),a=z(),o=k("span"),f=J(u),h=J(p),_=z(),g=k("span"),C=J(T),I=z(),v=k("button"),v.textContent=w,m=z(),this.h()},l(R){t=y(R,"DIV",{class:!0});var D=N(t);s=y(D,"DIV",{class:!0});var F=N(s);r=y(F,"SPAN",{class:!0,style:!0});var O=N(r);l=Z(O,i),O.forEach(b),a=M(F),o=y(F,"SPAN",{class:!0});var L=N(o);f=Z(L,u),h=Z(L,p),L.forEach(b),_=M(F),g=y(F,"SPAN",{class:!0});var B=N(g);C=Z(B,T),B.forEach(b),F.forEach(b),I=M(D),v=y(D,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(v)!=="svelte-87szfn"&&(v.textContent=w),m=M(D),D.forEach(b),this.h()},h(){d(r,"class","pinned-user svelte-d1025n"),Te(r,"color",e[1](e[6].user)),d(o,"class","pinned-text svelte-d1025n"),d(g,"class","pinned-time svelte-d1025n"),d(s,"class","pinned-message-content svelte-d1025n"),d(v,"class","unpin-btn svelte-d1025n"),d(v,"title","Unpin message"),d(t,"class","pinned-message svelte-d1025n"),this.first=t},m(R,D){q(R,t,D),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,f),c(o,h),c(s,_),c(s,g),c(g,C),c(t,I),c(t,v),c(t,m),S||(A=G(v,"click",E),S=!0)},p(R,D){e=R,D&1&&i!==(i=e[6].user+"")&&re(l,i),D&1&&Te(r,"color",e[1](e[6].user)),D&1&&u!==(u=e[6].text.substring(0,100)+"")&&re(f,u),D&1&&p!==(p=e[6].text.length>100?"...":"")&&re(h,p),D&1&&T!==(T=Ol(e[6].timestamp)+"")&&re(C,T)},d(R){R&&b(t),S=!1,A()}}}function ah(n){let e,t=n[0].length>0&&Nl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0].length>0?t?t.p(s,r):(t=Nl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function Ol(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function oh(n,e,t){let s;Oe(n,jt,u=>t(4,s=u));let{pinnedMessages:r}=e;function i(u){return s.find(f=>f.username===u)}function l(u){return i(u)?.color||"var(--status-offline)"}function a(u){Zr(u)}const o=u=>a(u.id);return n.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,l,a,o]}class ch extends ut{constructor(e){super(),ft(this,e,oh,ah,ct,{pinnedMessages:0})}}function Ml(n,e,t){const s=n.slice();return s[47]=e[t].file,s[48]=e[t].preview,s[50]=t,s}function zl(n){let e,t='<div class="drag-overlay-content svelte-1mvqxem"><div class="drag-icon svelte-1mvqxem">ðŸ“</div> <div class="drag-text svelte-1mvqxem">Drop files here to upload</div></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){d(e,"class","drag-overlay svelte-1mvqxem")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function Fl(n){let e,t,s,r,i=n[16].join(", ")+"",l,a,o=n[16].length===1?"is":"are",u,f;return{c(){e=k("div"),t=k("span"),s=z(),r=k("span"),l=J(i),a=z(),u=J(o),f=J(" typing..."),this.h()},l(p){e=y(p,"DIV",{class:!0});var h=N(e);t=y(h,"SPAN",{class:!0}),N(t).forEach(b),s=M(h),r=y(h,"SPAN",{});var _=N(r);l=Z(_,i),a=M(_),u=Z(_,o),f=Z(_," typing..."),_.forEach(b),h.forEach(b),this.h()},h(){d(t,"class","typing-dots svelte-1mvqxem"),d(e,"class","typing-indicator svelte-1mvqxem")},m(p,h){q(p,e,h),c(e,t),c(e,s),c(e,r),c(r,l),c(r,a),c(r,u),c(r,f)},p(p,h){h[0]&65536&&i!==(i=p[16].join(", ")+"")&&re(l,i),h[0]&65536&&o!==(o=p[16].length===1?"is":"are")&&re(u,o)},d(p){p&&b(e)}}}function Ll(n){let e,t;return e=new yd({}),e.$on("select",n[21]),e.$on("close",n[33]),{c(){Ye(e.$$.fragment)},l(s){We(e.$$.fragment,s)},m(s,r){Ge(e,s,r),t=!0},p:De,i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){He(e,s)}}}function uh(n){let e,t,s,r,i=n[5].user+"",l,a,o,u,f=n[5].text.substring(0,50)+"",p,h=n[5].text.length>50?"...":"",_,g,T,C="âœ•",I,v;return{c(){e=k("div"),t=k("div"),s=k("span"),r=J("Replying to "),l=J(i),a=J(":"),o=z(),u=k("span"),p=J(f),_=J(h),g=z(),T=k("button"),T.textContent=C,this.h()},l(w){e=y(w,"DIV",{class:!0});var m=N(e);t=y(m,"DIV",{class:!0});var S=N(t);s=y(S,"SPAN",{class:!0});var A=N(s);r=Z(A,"Replying to "),l=Z(A,i),a=Z(A,":"),A.forEach(b),o=M(S),u=y(S,"SPAN",{class:!0});var E=N(u);p=Z(E,f),_=Z(E,h),E.forEach(b),S.forEach(b),g=M(m),T=y(m,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-1av190j"&&(T.textContent=C),m.forEach(b),this.h()},h(){d(s,"class","reply-label svelte-1mvqxem"),d(u,"class","reply-preview svelte-1mvqxem"),d(t,"class","reply-info svelte-1mvqxem"),d(T,"class","cancel-reply svelte-1mvqxem"),d(e,"class","reply-bar svelte-1mvqxem")},m(w,m){q(w,e,m),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(u,p),c(u,_),c(e,g),c(e,T),I||(v=G(T,"click",n[23]),I=!0)},p(w,m){m[0]&32&&i!==(i=w[5].user+"")&&re(l,i),m[0]&32&&f!==(f=w[5].text.substring(0,50)+"")&&re(p,f),m[0]&32&&h!==(h=w[5].text.length>50?"...":"")&&re(_,h)},d(w){w&&b(e),I=!1,v()}}}function fh(n){let e,t,s='<span class="edit-label svelte-1mvqxem">Editing message</span> <span class="edit-hint svelte-1mvqxem">Press Escape to cancel</span>',r,i,l="âœ•",a,o;return{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=z(),i=k("button"),i.textContent=l,this.h()},l(u){e=y(u,"DIV",{class:!0});var f=N(e);t=y(f,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1kwfa7y"&&(t.innerHTML=s),r=M(f),i=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1anw7a5"&&(i.textContent=l),f.forEach(b),this.h()},h(){d(t,"class","edit-info svelte-1mvqxem"),d(i,"class","cancel-edit svelte-1mvqxem"),d(e,"class","edit-bar svelte-1mvqxem")},m(u,f){q(u,e,f),c(e,t),c(e,r),c(e,i),a||(o=G(i,"click",n[20]),a=!0)},p:De,d(u){u&&b(e),a=!1,o()}}}function Bl(n){let e,t,s,r=n[10].length+"",i,l,a=n[10].length>1?"s":"",o,u,f,p,h="âœ•",_,g,T,C,I,v,w,m,S="Mark as spoiler",A,E,R="âš ï¸",D,F,O,L=n[10].length+"",B,U,P=n[10].length>1?"s":"",x,W,V,K=je(n[10]),H=[];for(let Y=0;Y<K.length;Y+=1)H[Y]=Ul(Ml(n,K,Y));return{c(){e=k("div"),t=k("div"),s=k("span"),i=J(r),l=J(" file"),o=J(a),u=J(" selected"),f=z(),p=k("button"),p.textContent=h,_=z(),g=k("div");for(let Y=0;Y<H.length;Y+=1)H[Y].c();T=z(),C=k("div"),I=k("label"),v=k("input"),w=z(),m=k("span"),m.textContent=S,A=z(),E=k("span"),E.textContent=R,D=z(),F=k("button"),O=J("Upload "),B=J(L),U=J(" file"),x=J(P),this.h()},l(Y){e=y(Y,"DIV",{class:!0});var X=N(e);t=y(X,"DIV",{class:!0});var ne=N(t);s=y(ne,"SPAN",{});var de=N(s);i=Z(de,r),l=Z(de," file"),o=Z(de,a),u=Z(de," selected"),de.forEach(b),f=M(ne),p=y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-pcsk7y"&&(p.textContent=h),ne.forEach(b),_=M(X),g=y(X,"DIV",{class:!0});var te=N(g);for(let fe=0;fe<H.length;fe+=1)H[fe].l(te);te.forEach(b),T=M(X),C=y(X,"DIV",{class:!0});var ce=N(C);I=y(ce,"LABEL",{class:!0});var ie=N(I);v=y(ie,"INPUT",{type:!0,class:!0}),w=M(ie),m=y(ie,"SPAN",{"data-svelte-h":!0}),Q(m)!=="svelte-6s6emx"&&(m.textContent=S),ie.forEach(b),A=M(ce),E=y(ce,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(E)!=="svelte-6jzi8y"&&(E.textContent=R),ce.forEach(b),D=M(X),F=y(X,"BUTTON",{class:!0});var se=N(F);O=Z(se,"Upload "),B=Z(se,L),U=Z(se," file"),x=Z(se,P),se.forEach(b),X.forEach(b),this.h()},h(){d(p,"class","cancel-gallery svelte-1mvqxem"),d(t,"class","gallery-header svelte-1mvqxem"),d(g,"class","gallery-grid svelte-1mvqxem"),d(v,"type","checkbox"),d(v,"class","spoiler-checkbox svelte-1mvqxem"),d(I,"class","spoiler-checkbox-label svelte-1mvqxem"),d(E,"class","spoiler-hint svelte-1mvqxem"),d(E,"title","Sensitive content will be hidden until clicked"),d(C,"class","spoiler-checkbox-container svelte-1mvqxem"),d(F,"class","upload-files-btn svelte-1mvqxem"),d(e,"class","file-gallery svelte-1mvqxem")},m(Y,X){q(Y,e,X),c(e,t),c(t,s),c(s,i),c(s,l),c(s,o),c(s,u),c(t,f),c(t,p),c(e,_),c(e,g);for(let ne=0;ne<H.length;ne+=1)H[ne]&&H[ne].m(g,null);c(e,T),c(e,C),c(C,I),c(I,v),v.checked=n[11],c(I,w),c(I,m),c(C,A),c(C,E),c(e,D),c(e,F),c(F,O),c(F,B),c(F,U),c(F,x),W||(V=[G(p,"click",n[26]),G(v,"change",n[35]),G(F,"click",n[30])],W=!0)},p(Y,X){if(X[0]&1024&&r!==(r=Y[10].length+"")&&re(i,r),X[0]&1024&&a!==(a=Y[10].length>1?"s":"")&&re(o,a),X[0]&33555456){K=je(Y[10]);let ne;for(ne=0;ne<K.length;ne+=1){const de=Ml(Y,K,ne);H[ne]?H[ne].p(de,X):(H[ne]=Ul(de),H[ne].c(),H[ne].m(g,null))}for(;ne<H.length;ne+=1)H[ne].d(1);H.length=K.length}X[0]&2048&&(v.checked=Y[11]),X[0]&1024&&L!==(L=Y[10].length+"")&&re(B,L),X[0]&1024&&P!==(P=Y[10].length>1?"s":"")&&re(x,P)},d(Y){Y&&b(e),Ns(H,Y),W=!1,Ae(V)}}}function dh(n){let e,t,s;function r(a,o){return o[0]&1024&&(t=null),o[0]&1024&&(s=null),t==null&&(t=!!a[47].type.startsWith("video/")),t?mh:(s==null&&(s=!!a[47].type.startsWith("audio/")),s?gh:ph)}let i=r(n,[-1,-1]),l=i(n);return{c(){e=k("div"),l.c(),this.h()},l(a){e=y(a,"DIV",{class:!0});var o=N(e);l.l(o),o.forEach(b),this.h()},h(){d(e,"class","gallery-file-icon svelte-1mvqxem")},m(a,o){q(a,e,o),l.m(e,null)},p(a,o){i!==(i=r(a,o))&&(l.d(1),l=i(a),l&&(l.c(),l.m(e,null)))},d(a){a&&b(e),l.d()}}}function hh(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[48])||d(e,"src",t),d(e,"alt",s=n[47].name),d(e,"class","gallery-preview svelte-1mvqxem")},m(r,i){q(r,e,i)},p(r,i){i[0]&1024&&!Ue(e.src,t=r[48])&&d(e,"src",t),i[0]&1024&&s!==(s=r[47].name)&&d(e,"alt",s)},d(r){r&&b(e)}}}function ph(n){let e;return{c(){e=J("ðŸ“„")},l(t){e=Z(t,"ðŸ“„")},m(t,s){q(t,e,s)},d(t){t&&b(e)}}}function gh(n){let e;return{c(){e=J("ðŸŽµ")},l(t){e=Z(t,"ðŸŽµ")},m(t,s){q(t,e,s)},d(t){t&&b(e)}}}function mh(n){let e;return{c(){e=J("ðŸŽ¬")},l(t){e=Z(t,"ðŸŽ¬")},m(t,s){q(t,e,s)},d(t){t&&b(e)}}}function Ul(n){let e,t,s,r,i=n[47].name+"",l,a,o,u=(n[47].size/1024/1024).toFixed(2)+"",f,p,h,_,g="âœ•",T,C,I;function v(A,E){return A[48]?hh:dh}let w=v(n),m=w(n);function S(){return n[34](n[50])}return{c(){e=k("div"),m.c(),t=z(),s=k("div"),r=k("div"),l=J(i),a=z(),o=k("div"),f=J(u),p=J(" MB"),h=z(),_=k("button"),_.textContent=g,T=z(),this.h()},l(A){e=y(A,"DIV",{class:!0});var E=N(e);m.l(E),t=M(E),s=y(E,"DIV",{class:!0});var R=N(s);r=y(R,"DIV",{class:!0});var D=N(r);l=Z(D,i),D.forEach(b),a=M(R),o=y(R,"DIV",{class:!0});var F=N(o);f=Z(F,u),p=Z(F," MB"),F.forEach(b),R.forEach(b),h=M(E),_=y(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(_)!=="svelte-17gof1i"&&(_.textContent=g),T=M(E),E.forEach(b),this.h()},h(){d(r,"class","gallery-file-name svelte-1mvqxem"),d(o,"class","gallery-file-size svelte-1mvqxem"),d(s,"class","gallery-file-info svelte-1mvqxem"),d(_,"class","remove-file svelte-1mvqxem"),d(e,"class","gallery-item svelte-1mvqxem")},m(A,E){q(A,e,E),m.m(e,null),c(e,t),c(e,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,f),c(o,p),c(e,h),c(e,_),c(e,T),C||(I=G(_,"click",S),C=!0)},p(A,E){n=A,w===(w=v(n))&&m?m.p(n,E):(m.d(1),m=w(n),m&&(m.c(),m.m(e,t))),E[0]&1024&&i!==(i=n[47].name+"")&&re(l,i),E[0]&1024&&u!==(u=(n[47].size/1024/1024).toFixed(2)+"")&&re(f,u)},d(A){A&&b(e),m.d(),C=!1,I()}}}function xl(n){let e,t,s,r="Uploading files...",i,l,a,o,u,f,p;return{c(){e=k("div"),t=k("div"),s=k("span"),s.textContent=r,i=z(),l=k("span"),a=J(n[8]),o=J("%"),u=z(),f=k("div"),p=k("div"),this.h()},l(h){e=y(h,"DIV",{class:!0});var _=N(e);t=y(_,"DIV",{class:!0});var g=N(t);s=y(g,"SPAN",{"data-svelte-h":!0}),Q(s)!=="svelte-10wvq4k"&&(s.textContent=r),i=M(g),l=y(g,"SPAN",{});var T=N(l);a=Z(T,n[8]),o=Z(T,"%"),T.forEach(b),g.forEach(b),u=M(_),f=y(_,"DIV",{class:!0});var C=N(f);p=y(C,"DIV",{class:!0,style:!0}),N(p).forEach(b),C.forEach(b),_.forEach(b),this.h()},h(){d(t,"class","upload-progress-info svelte-1mvqxem"),d(p,"class","progress-fill svelte-1mvqxem"),Te(p,"width",n[8]+"%"),d(f,"class","progress-bar svelte-1mvqxem"),d(e,"class","upload-progress-bar svelte-1mvqxem")},m(h,_){q(h,e,_),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),c(l,o),c(e,u),c(e,f),c(f,p)},p(h,_){_[0]&256&&re(a,h[8]),_[0]&256&&Te(p,"width",h[8]+"%")},d(h){h&&b(e)}}}function vh(n){let e,t,s,r,i,l,a,o,u,f,p,h,_,g,T,C,I,v,w,m,S,A,E="ðŸ“Ž",R,D,F,O,L="GIF",B,U,P,x,W,V,K,H=n[12]&&zl();o=new ch({props:{pinnedMessages:n[14]}}),f=new lh({props:{messages:n[0],onReply:n[22],firstUnreadMessageId:n[15]}});let Y=n[16].length>0&&Fl(n),X=n[4]&&Ll(n);function ne(se,fe){if(se[7])return fh;if(se[5])return uh}let de=ne(n),te=de&&de(n),ce=n[10].length>0&&!n[9]&&Bl(n),ie=n[9]&&xl(n);return{c(){e=k("div"),H&&H.c(),t=z(),s=k("div"),r=k("h2"),i=J(n[1]),l=z(),a=k("div"),Ye(o.$$.fragment),u=z(),Ye(f.$$.fragment),p=z(),Y&&Y.c(),h=z(),X&&X.c(),_=z(),te&&te.c(),g=z(),T=k("div"),ce&&ce.c(),C=z(),ie&&ie.c(),I=z(),v=k("input"),w=z(),m=k("div"),S=k("div"),A=k("button"),A.textContent=E,R=z(),D=k("textarea"),F=z(),O=k("button"),O.textContent=L,B=z(),U=k("button"),P=J("Send"),this.h()},l(se){e=y(se,"DIV",{class:!0});var fe=N(e);H&&H.l(fe),t=M(fe),s=y(fe,"DIV",{class:!0});var we=N(s);r=y(we,"H2",{class:!0});var le=N(r);i=Z(le,n[1]),le.forEach(b),we.forEach(b),l=M(fe),a=y(fe,"DIV",{class:!0});var xe=N(a);We(o.$$.fragment,xe),u=M(xe),We(f.$$.fragment,xe),p=M(xe),Y&&Y.l(xe),xe.forEach(b),h=M(fe),X&&X.l(fe),_=M(fe),te&&te.l(fe),g=M(fe),T=y(fe,"DIV",{class:!0});var Se=N(T);ce&&ce.l(Se),C=M(Se),ie&&ie.l(Se),I=M(Se),v=y(Se,"INPUT",{type:!0,style:!0}),w=M(Se),m=y(Se,"DIV",{class:!0});var ae=N(m);S=y(ae,"DIV",{class:!0});var $=N(S);A=y($,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(A)!=="svelte-1fiys3t"&&(A.textContent=E),$.forEach(b),R=M(ae),D=y(ae,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),N(D).forEach(b),F=M(ae),O=y(ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(O)!=="svelte-1ty10q8"&&(O.textContent=L),B=M(ae),U=y(ae,"BUTTON",{class:!0});var ue=N(U);P=Z(ue,"Send"),ue.forEach(b),ae.forEach(b),Se.forEach(b),fe.forEach(b),this.h()},h(){d(r,"class","svelte-1mvqxem"),d(s,"class","chat-header svelte-1mvqxem"),d(a,"class","messages svelte-1mvqxem"),d(v,"type","file"),v.multiple=!0,Te(v,"display","none"),d(A,"class","input-icon-button svelte-1mvqxem"),d(A,"title","Attach file"),d(S,"class","input-buttons-left svelte-1mvqxem"),d(D,"placeholder","Type a message... (Shift+Enter for new line)"),d(D,"maxlength","2000"),d(D,"rows","1"),d(D,"class","svelte-1mvqxem"),d(O,"class","input-icon-button svelte-1mvqxem"),d(O,"title","Add GIF"),d(U,"class","send-button svelte-1mvqxem"),U.disabled=x=!n[2].trim(),d(m,"class","input-container svelte-1mvqxem"),d(T,"class","input-wrapper svelte-1mvqxem"),d(e,"class","chat-container svelte-1mvqxem")},m(se,fe){q(se,e,fe),H&&H.m(e,null),c(e,t),c(e,s),c(s,r),c(r,i),c(e,l),c(e,a),Ge(o,a,null),c(a,u),Ge(f,a,null),c(a,p),Y&&Y.m(a,null),n[32](a),c(e,h),X&&X.m(e,null),c(e,_),te&&te.m(e,null),c(e,g),c(e,T),ce&&ce.m(T,null),c(T,C),ie&&ie.m(T,null),c(T,I),c(T,v),n[36](v),c(T,w),c(T,m),c(m,S),c(S,A),c(m,R),c(m,D),n[38](D),$e(D,n[2]),c(m,F),c(m,O),c(m,B),c(m,U),c(U,P),W=!0,V||(K=[G(v,"change",n[24]),G(A,"click",n[37]),G(D,"input",n[39]),G(D,"input",n[17]),G(D,"keydown",n[18]),G(O,"click",n[40]),G(U,"click",n[19]),G(e,"dragenter",n[27]),G(e,"dragleave",n[28]),G(e,"dragover",_h),G(e,"drop",n[29])],V=!0)},p(se,fe){se[12]?H||(H=zl(),H.c(),H.m(e,t)):H&&(H.d(1),H=null),(!W||fe[0]&2)&&re(i,se[1]);const we={};fe[0]&16384&&(we.pinnedMessages=se[14]),o.$set(we);const le={};fe[0]&1&&(le.messages=se[0]),fe[0]&32768&&(le.firstUnreadMessageId=se[15]),f.$set(le),se[16].length>0?Y?Y.p(se,fe):(Y=Fl(se),Y.c(),Y.m(a,null)):Y&&(Y.d(1),Y=null),se[4]?X?(X.p(se,fe),fe[0]&16&&be(X,1)):(X=Ll(se),X.c(),be(X,1),X.m(e,_)):X&&(xn(),Ie(X,1,1,()=>{X=null}),jn()),de===(de=ne(se))&&te?te.p(se,fe):(te&&te.d(1),te=de&&de(se),te&&(te.c(),te.m(e,g))),se[10].length>0&&!se[9]?ce?ce.p(se,fe):(ce=Bl(se),ce.c(),ce.m(T,C)):ce&&(ce.d(1),ce=null),se[9]?ie?ie.p(se,fe):(ie=xl(se),ie.c(),ie.m(T,I)):ie&&(ie.d(1),ie=null),fe[0]&4&&$e(D,se[2]),(!W||fe[0]&4&&x!==(x=!se[2].trim()))&&(U.disabled=x)},i(se){W||(be(o.$$.fragment,se),be(f.$$.fragment,se),be(X),W=!0)},o(se){Ie(o.$$.fragment,se),Ie(f.$$.fragment,se),Ie(X),W=!1},d(se){se&&b(e),H&&H.d(),He(o),He(f),Y&&Y.d(),n[32](null),X&&X.d(),te&&te.d(),ce&&ce.d(),ie&&ie.d(),n[36](null),n[38](null),V=!1,Ae(K)}}}function _h(n){n.preventDefault(),n.stopPropagation()}function bh(n,e,t){let s,r,i,l,a,o,u;Oe(n,Rn,ae=>t(1,i=ae)),Oe(n,ln,ae=>t(44,l=ae)),Oe(n,At,ae=>t(31,a=ae)),Oe(n,Xr,ae=>t(15,o=ae)),Oe(n,Ho,ae=>t(16,u=ae));let f="",p,h,_=!1,g=null,T,C=null,I=0,v=!1,w=[],m=[],S=!1,A=!1,E=0,R;async function D(){await ic(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function F(){if(!R)return;t(13,R.style.height="auto",R);const ae=Math.min(R.scrollHeight,120);t(13,R.style.height=`${ae}px`,R)}function O(){F(),Xs(!0),h&&clearTimeout(h),h=setTimeout(()=>{Xs(!1)},1e3)}function L(ae){if(ae.key==="ArrowUp"&&!f.trim()&&!C){ae.preventDefault();const $=s.filter(ue=>ue.userId===l?.id);if($.length>0){const ue=$[$.length-1];t(7,C=ue),t(2,f=ue.text)}}else ae.key==="Escape"&&C?(ae.preventDefault(),U()):ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),B())}function B(){f.trim()&&(C?(Wo(i,C.id,f.trim()),t(7,C=null)):(ms(i,f.trim(),"text",{replyTo:g?.id,isSpoiler:S}),t(5,g=null)),t(2,f=""),Xs(!1),h&&clearTimeout(h),R&&t(13,R.style.height="auto",R))}function U(){t(7,C=null),t(2,f=""),R&&t(13,R.style.height="auto",R)}function P(ae){ms(i,"","gif",{gifUrl:ae.detail,replyTo:g?.id,isSpoiler:S}),t(5,g=null),t(4,_=!1)}function x(ae){t(5,g=ae),document.querySelector('input[type="text"]')?.focus()}function W(){t(5,g=null)}async function V(ae){const $=ae.target,ue=Array.from($.files||[]);if(ue.length===0){console.log("No files selected");return}console.log("Files selected:",ue.length);const _e=1024*1024*1024;for(const ye of ue)if(ye.size>_e){alert(`File too large! Maximum size is 1GB per file. "${ye.name}" is ${(ye.size/1024/1024).toFixed(2)}MB`),$.value="";return}w=ue,t(10,m=await Promise.all(ue.map(async ye=>{if(ye.type.startsWith("image/")){const Ee=await new Promise(ze=>{const st=new FileReader;st.onload=tt=>ze(tt.target?.result),st.readAsDataURL(ye)});return{file:ye,preview:Ee}}return{file:ye}}))),$.value=""}function K(ae){w=w.filter(($,ue)=>ue!==ae),t(10,m=m.filter(($,ue)=>ue!==ae))}function H(){w=[],t(10,m=[])}function Y(ae){ae.preventDefault(),ae.stopPropagation(),E++,ae.dataTransfer?.types.includes("Files")&&t(12,A=!0)}function X(ae){ae.preventDefault(),ae.stopPropagation(),E--,E===0&&t(12,A=!1)}async function ne(ae){ae.preventDefault(),ae.stopPropagation(),t(12,A=!1),E=0;const $=Array.from(ae.dataTransfer?.files||[]);if($.length===0)return;const ue=1024*1024*1024;for(const _e of $)if(_e.size>ue){alert(`File too large! Maximum size is 1GB per file. "${_e.name}" is ${(_e.size/1024/1024).toFixed(2)}MB`);return}w=$,t(10,m=await Promise.all($.map(async _e=>{if(_e.type.startsWith("image/")){const ye=await new Promise(Ee=>{const ze=new FileReader;ze.onload=st=>Ee(st.target?.result),ze.readAsDataURL(_e)});return{file:_e,preview:ye}}return{file:_e}})))}async function de(){if(w.length===0)return;t(9,v=!0);const ae=w.length;let $=0;try{const ue=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,_e=[];for(const ye of w){const Ee=await new Promise((ze,st)=>{const tt=new FormData;tt.append("file",ye),tt.append("channelId",i);const Ve=new XMLHttpRequest;Ve.upload.addEventListener("progress",qe=>{if(qe.lengthComputable){const gt=qe.loaded/qe.total*100,dt=($+gt/100)/ae*100;t(8,I=Math.round(dt))}}),Ve.addEventListener("load",()=>{if(Ve.status===200){const qe=JSON.parse(Ve.responseText);$++,ze({fileUrl:qe.fileUrl,fileName:ye.name,fileSize:ye.size})}else st(new Error("Upload failed"))}),Ve.addEventListener("error",()=>{st(new Error("Upload failed"))}),Ve.open("POST",`${ue}/api/upload`),Ve.send(tt)});_e.push(Ee)}_e.length===1?ms(i,f.trim()||`Shared: ${_e[0].fileName}`,"file",{fileUrl:_e[0].fileUrl,fileName:_e[0].fileName,fileSize:_e[0].fileSize,replyTo:g?.id,isSpoiler:S}):ms(i,f.trim()||`Shared ${_e.length} files`,"file",{files:_e,replyTo:g?.id,isSpoiler:S}),console.log("All files uploaded"),t(2,f=""),t(5,g=null),w=[],t(10,m=[]),t(9,v=!1),t(8,I=0)}catch(ue){console.error("Upload error:",ue),alert("Failed to upload files. Please try again."),t(9,v=!1),t(8,I=0)}}function te(ae){Je[ae?"unshift":"push"](()=>{p=ae,t(3,p)})}const ce=()=>t(4,_=!1),ie=ae=>K(ae);function se(){S=this.checked,t(11,S)}function fe(ae){Je[ae?"unshift":"push"](()=>{T=ae,t(6,T)})}const we=()=>T?.click();function le(ae){Je[ae?"unshift":"push"](()=>{R=ae,t(13,R)})}function xe(){f=this.value,t(2,f)}const Se=()=>t(4,_=!_);return n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1&&t(0,s=a[i]||[]),n.$$.dirty[0]&1&&t(14,r=s.filter(ae=>ae.isPinned)),n.$$.dirty[0]&1&&s.length&&D()},[s,i,f,p,_,g,T,C,I,v,m,S,A,R,r,o,u,O,L,B,U,P,x,W,V,K,H,Y,X,ne,de,a,te,ce,ie,se,fe,we,le,xe,Se]}class yh extends ut{constructor(e){super(),ft(this,e,bh,vh,ct,{},null,[-1,-1])}}var Bn={},Qs,jl;function kh(){return jl||(jl=1,Qs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Qs}var $s={},pn={},Vl;function Pn(){if(Vl)return pn;Vl=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return pn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},pn.getSymbolTotalCodewords=function(s){return e[s]},pn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s},pn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');n=s},pn.isKanjiModeEnabled=function(){return typeof n<"u"},pn.toSJIS=function(s){return n(s)},pn}var er={},ql;function $r(){return ql||(ql=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,r){if(n.isValid(s))return s;try{return e(s)}catch{return r}}})(er)),er}var tr,Hl;function wh(){if(Hl)return tr;Hl=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},tr=n,tr}var nr,Gl;function Eh(){if(Gl)return nr;Gl=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,s,r){const i=e*this.size+t;this.data[i]=s,r&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},nr=n,nr}var sr={},Wl;function Th(){return Wl||(Wl=1,(function(n){const e=Pn().getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,i=e(s),l=i===145?26:Math.ceil((i-13)/(2*r-2))*2,a=[i-7];for(let o=1;o<r-1;o++)a[o]=a[o-1]-l;return a.push(6),a.reverse()},n.getPositions=function(s){const r=[],i=n.getRowColCoords(s),l=i.length;for(let a=0;a<l;a++)for(let o=0;o<l;o++)a===0&&o===0||a===0&&o===l-1||a===l-1&&o===0||r.push([i[a],i[o]]);return r}})(sr)),sr}var rr={},Yl;function Ah(){if(Yl)return rr;Yl=1;const n=Pn().getSymbolSize,e=7;return rr.getPositions=function(s){const r=n(s);return[[0,0],[r-e,0],[0,r-e]]},rr}var ir={},Kl;function Sh(){return Kl||(Kl=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const i=r.size;let l=0,a=0,o=0,u=null,f=null;for(let p=0;p<i;p++){a=o=0,u=f=null;for(let h=0;h<i;h++){let _=r.get(p,h);_===u?a++:(a>=5&&(l+=e.N1+(a-5)),u=_,a=1),_=r.get(h,p),_===f?o++:(o>=5&&(l+=e.N1+(o-5)),f=_,o=1)}a>=5&&(l+=e.N1+(a-5)),o>=5&&(l+=e.N1+(o-5))}return l},n.getPenaltyN2=function(r){const i=r.size;let l=0;for(let a=0;a<i-1;a++)for(let o=0;o<i-1;o++){const u=r.get(a,o)+r.get(a,o+1)+r.get(a+1,o)+r.get(a+1,o+1);(u===4||u===0)&&l++}return l*e.N2},n.getPenaltyN3=function(r){const i=r.size;let l=0,a=0,o=0;for(let u=0;u<i;u++){a=o=0;for(let f=0;f<i;f++)a=a<<1&2047|r.get(u,f),f>=10&&(a===1488||a===93)&&l++,o=o<<1&2047|r.get(f,u),f>=10&&(o===1488||o===93)&&l++}return l*e.N3},n.getPenaltyN4=function(r){let i=0;const l=r.data.length;for(let o=0;o<l;o++)i+=r.data[o];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function t(s,r,i){switch(s){case n.Patterns.PATTERN000:return(r+i)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(r+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return r*i%2+r*i%3===0;case n.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case n.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(r,i){const l=i.size;for(let a=0;a<l;a++)for(let o=0;o<l;o++)i.isReserved(o,a)||i.xor(o,a,t(r,o,a))},n.getBestMask=function(r,i){const l=Object.keys(n.Patterns).length;let a=0,o=1/0;for(let u=0;u<l;u++){i(u),n.applyMask(u,r);const f=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(u,r),f<o&&(o=f,a=u)}return a}})(ir)),ir}var bs={},Xl;function $o(){if(Xl)return bs;Xl=1;const n=$r(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return bs.getBlocksCount=function(r,i){switch(i){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},bs.getTotalCodewordsCount=function(r,i){switch(i){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},bs}var lr={},es={},Zl;function Ch(){if(Zl)return es;Zl=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let s=1;for(let r=0;r<255;r++)n[r]=s,e[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),es.log=function(s){if(s<1)throw new Error("log("+s+")");return e[s]},es.exp=function(s){return n[s]},es.mul=function(s,r){return s===0||r===0?0:n[e[s]+e[r]]},es}var Jl;function Ih(){return Jl||(Jl=1,(function(n){const e=Ch();n.mul=function(s,r){const i=new Uint8Array(s.length+r.length-1);for(let l=0;l<s.length;l++)for(let a=0;a<r.length;a++)i[l+a]^=e.mul(s[l],r[a]);return i},n.mod=function(s,r){let i=new Uint8Array(s);for(;i.length-r.length>=0;){const l=i[0];for(let o=0;o<r.length;o++)i[o]^=e.mul(r[o],l);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let i=0;i<s;i++)r=n.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(lr)),lr}var ar,Ql;function Dh(){if(Ql)return ar;Ql=1;const n=Ih();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(s){this.degree=s,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const i=n.mod(r,this.genPoly),l=this.degree-i.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(i,l),a}return i},ar=e,ar}var or={},cr={},ur={},$l;function ec(){return $l||($l=1,ur.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ur}var tn={},ea;function tc(){if(ea)return tn;ea=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;tn.KANJI=new RegExp(t,"g"),tn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),tn.BYTE=new RegExp(s,"g"),tn.NUMERIC=new RegExp(n,"g"),tn.ALPHANUMERIC=new RegExp(e,"g");const r=new RegExp("^"+t+"$"),i=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return tn.testKanji=function(o){return r.test(o)},tn.testNumeric=function(o){return i.test(o)},tn.testAlphanumeric=function(o){return l.test(o)},tn}var ta;function On(){return ta||(ta=1,(function(n){const e=ec(),t=tc();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(i,l){if(n.isValid(i))return i;try{return s(i)}catch{return l}}})(cr)),cr}var na;function Rh(){return na||(na=1,(function(n){const e=Pn(),t=$o(),s=$r(),r=On(),i=ec(),l=7973,a=e.getBCHDigit(l);function o(h,_,g){for(let T=1;T<=40;T++)if(_<=n.getCapacity(T,g,h))return T}function u(h,_){return r.getCharCountIndicator(h,_)+4}function f(h,_){let g=0;return h.forEach(function(T){const C=u(T.mode,_);g+=C+T.getBitsLength()}),g}function p(h,_){for(let g=1;g<=40;g++)if(f(h,g)<=n.getCapacity(g,_,r.MIXED))return g}n.from=function(_,g){return i.isValid(_)?parseInt(_,10):g},n.getCapacity=function(_,g,T){if(!i.isValid(_))throw new Error("Invalid QR Code version");typeof T>"u"&&(T=r.BYTE);const C=e.getSymbolTotalCodewords(_),I=t.getTotalCodewordsCount(_,g),v=(C-I)*8;if(T===r.MIXED)return v;const w=v-u(T,_);switch(T){case r.NUMERIC:return Math.floor(w/10*3);case r.ALPHANUMERIC:return Math.floor(w/11*2);case r.KANJI:return Math.floor(w/13);case r.BYTE:default:return Math.floor(w/8)}},n.getBestVersionForData=function(_,g){let T;const C=s.from(g,s.M);if(Array.isArray(_)){if(_.length>1)return p(_,C);if(_.length===0)return 1;T=_[0]}else T=_;return o(T.mode,T.getLength(),C)},n.getEncodedBits=function(_){if(!i.isValid(_)||_<7)throw new Error("Invalid QR Code version");let g=_<<12;for(;e.getBCHDigit(g)-a>=0;)g^=l<<e.getBCHDigit(g)-a;return _<<12|g}})(or)),or}var fr={},sa;function Nh(){if(sa)return fr;sa=1;const n=Pn(),e=1335,t=21522,s=n.getBCHDigit(e);return fr.getEncodedBits=function(i,l){const a=i.bit<<3|l;let o=a<<10;for(;n.getBCHDigit(o)-s>=0;)o^=e<<n.getBCHDigit(o)-s;return(a<<10|o)^t},fr}var dr={},hr,ra;function Ph(){if(ra)return hr;ra=1;const n=On();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let r,i,l;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),l=parseInt(i,10),s.put(l,10);const a=this.data.length-r;a>0&&(i=this.data.substr(r),l=parseInt(i,10),s.put(l,a*3+1))},hr=e,hr}var pr,ia;function Oh(){if(ia)return pr;ia=1;const n=On(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(s){this.mode=n.ALPHANUMERIC,this.data=s}return t.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i+2<=this.data.length;i+=2){let l=e.indexOf(this.data[i])*45;l+=e.indexOf(this.data[i+1]),r.put(l,11)}this.data.length%2&&r.put(e.indexOf(this.data[i]),6)},pr=t,pr}var gr,la;function Mh(){if(la)return gr;la=1;const n=On();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(s){return s*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)},gr=e,gr}var mr,aa;function zh(){if(aa)return mr;aa=1;const n=On(),e=Pn();function t(s){this.mode=n.KANJI,this.data=s}return t.getBitsLength=function(r){return r*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let r;for(r=0;r<this.data.length;r++){let i=e.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),s.put(i,13)}},mr=t,mr}var vr={exports:{}},oa;function Fh(){return oa||(oa=1,(function(n){var e={single_source_shortest_paths:function(t,s,r){var i={},l={};l[s]=0;var a=e.PriorityQueue.make();a.push(s,0);for(var o,u,f,p,h,_,g,T,C;!a.empty();){o=a.pop(),u=o.value,p=o.cost,h=t[u]||{};for(f in h)h.hasOwnProperty(f)&&(_=h[f],g=p+_,T=l[f],C=typeof l[f]>"u",(C||T>g)&&(l[f]=g,a.push(f,g),i[f]=u))}if(typeof r<"u"&&typeof l[r]>"u"){var I=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(I)}return i},extract_shortest_path_from_predecessor_list:function(t,s){for(var r=[],i=s;i;)r.push(i),t[i],i=t[i];return r.reverse(),r},find_path:function(t,s,r){var i=e.single_source_shortest_paths(t,s,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var s=e.PriorityQueue,r={},i;t=t||{};for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);return r.queue=[],r.sorter=t.sorter||s.default_sorter,r},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var r={value:t,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(vr)),vr.exports}var ca;function Lh(){return ca||(ca=1,(function(n){const e=On(),t=Ph(),s=Oh(),r=Mh(),i=zh(),l=tc(),a=Pn(),o=Fh();function u(I){return unescape(encodeURIComponent(I)).length}function f(I,v,w){const m=[];let S;for(;(S=I.exec(w))!==null;)m.push({data:S[0],index:S.index,mode:v,length:S[0].length});return m}function p(I){const v=f(l.NUMERIC,e.NUMERIC,I),w=f(l.ALPHANUMERIC,e.ALPHANUMERIC,I);let m,S;return a.isKanjiModeEnabled()?(m=f(l.BYTE,e.BYTE,I),S=f(l.KANJI,e.KANJI,I)):(m=f(l.BYTE_KANJI,e.BYTE,I),S=[]),v.concat(w,m,S).sort(function(E,R){return E.index-R.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function h(I,v){switch(v){case e.NUMERIC:return t.getBitsLength(I);case e.ALPHANUMERIC:return s.getBitsLength(I);case e.KANJI:return i.getBitsLength(I);case e.BYTE:return r.getBitsLength(I)}}function _(I){return I.reduce(function(v,w){const m=v.length-1>=0?v[v.length-1]:null;return m&&m.mode===w.mode?(v[v.length-1].data+=w.data,v):(v.push(w),v)},[])}function g(I){const v=[];for(let w=0;w<I.length;w++){const m=I[w];switch(m.mode){case e.NUMERIC:v.push([m,{data:m.data,mode:e.ALPHANUMERIC,length:m.length},{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.ALPHANUMERIC:v.push([m,{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.KANJI:v.push([m,{data:m.data,mode:e.BYTE,length:u(m.data)}]);break;case e.BYTE:v.push([{data:m.data,mode:e.BYTE,length:u(m.data)}])}}return v}function T(I,v){const w={},m={start:{}};let S=["start"];for(let A=0;A<I.length;A++){const E=I[A],R=[];for(let D=0;D<E.length;D++){const F=E[D],O=""+A+D;R.push(O),w[O]={node:F,lastCount:0},m[O]={};for(let L=0;L<S.length;L++){const B=S[L];w[B]&&w[B].node.mode===F.mode?(m[B][O]=h(w[B].lastCount+F.length,F.mode)-h(w[B].lastCount,F.mode),w[B].lastCount+=F.length):(w[B]&&(w[B].lastCount=F.length),m[B][O]=h(F.length,F.mode)+4+e.getCharCountIndicator(F.mode,v))}}S=R}for(let A=0;A<S.length;A++)m[S[A]].end=0;return{map:m,table:w}}function C(I,v){let w;const m=e.getBestModeForData(I);if(w=e.from(v,m),w!==e.BYTE&&w.bit<m.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(m));switch(w===e.KANJI&&!a.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new t(I);case e.ALPHANUMERIC:return new s(I);case e.KANJI:return new i(I);case e.BYTE:return new r(I)}}n.fromArray=function(v){return v.reduce(function(w,m){return typeof m=="string"?w.push(C(m,null)):m.data&&w.push(C(m.data,m.mode)),w},[])},n.fromString=function(v,w){const m=p(v,a.isKanjiModeEnabled()),S=g(m),A=T(S,w),E=o.find_path(A.map,"start","end"),R=[];for(let D=1;D<E.length-1;D++)R.push(A.table[E[D]].node);return n.fromArray(_(R))},n.rawSplit=function(v){return n.fromArray(p(v,a.isKanjiModeEnabled()))}})(dr)),dr}var ua;function Bh(){if(ua)return $s;ua=1;const n=Pn(),e=$r(),t=wh(),s=Eh(),r=Th(),i=Ah(),l=Sh(),a=$o(),o=Dh(),u=Rh(),f=Nh(),p=On(),h=Lh();function _(A,E){const R=A.size,D=i.getPositions(E);for(let F=0;F<D.length;F++){const O=D[F][0],L=D[F][1];for(let B=-1;B<=7;B++)if(!(O+B<=-1||R<=O+B))for(let U=-1;U<=7;U++)L+U<=-1||R<=L+U||(B>=0&&B<=6&&(U===0||U===6)||U>=0&&U<=6&&(B===0||B===6)||B>=2&&B<=4&&U>=2&&U<=4?A.set(O+B,L+U,!0,!0):A.set(O+B,L+U,!1,!0))}}function g(A){const E=A.size;for(let R=8;R<E-8;R++){const D=R%2===0;A.set(R,6,D,!0),A.set(6,R,D,!0)}}function T(A,E){const R=r.getPositions(E);for(let D=0;D<R.length;D++){const F=R[D][0],O=R[D][1];for(let L=-2;L<=2;L++)for(let B=-2;B<=2;B++)L===-2||L===2||B===-2||B===2||L===0&&B===0?A.set(F+L,O+B,!0,!0):A.set(F+L,O+B,!1,!0)}}function C(A,E){const R=A.size,D=u.getEncodedBits(E);let F,O,L;for(let B=0;B<18;B++)F=Math.floor(B/3),O=B%3+R-8-3,L=(D>>B&1)===1,A.set(F,O,L,!0),A.set(O,F,L,!0)}function I(A,E,R){const D=A.size,F=f.getEncodedBits(E,R);let O,L;for(O=0;O<15;O++)L=(F>>O&1)===1,O<6?A.set(O,8,L,!0):O<8?A.set(O+1,8,L,!0):A.set(D-15+O,8,L,!0),O<8?A.set(8,D-O-1,L,!0):O<9?A.set(8,15-O-1+1,L,!0):A.set(8,15-O-1,L,!0);A.set(D-8,8,1,!0)}function v(A,E){const R=A.size;let D=-1,F=R-1,O=7,L=0;for(let B=R-1;B>0;B-=2)for(B===6&&B--;;){for(let U=0;U<2;U++)if(!A.isReserved(F,B-U)){let P=!1;L<E.length&&(P=(E[L]>>>O&1)===1),A.set(F,B-U,P),O--,O===-1&&(L++,O=7)}if(F+=D,F<0||R<=F){F-=D,D=-D;break}}}function w(A,E,R){const D=new t;R.forEach(function(U){D.put(U.mode.bit,4),D.put(U.getLength(),p.getCharCountIndicator(U.mode,A)),U.write(D)});const F=n.getSymbolTotalCodewords(A),O=a.getTotalCodewordsCount(A,E),L=(F-O)*8;for(D.getLengthInBits()+4<=L&&D.put(0,4);D.getLengthInBits()%8!==0;)D.putBit(0);const B=(L-D.getLengthInBits())/8;for(let U=0;U<B;U++)D.put(U%2?17:236,8);return m(D,A,E)}function m(A,E,R){const D=n.getSymbolTotalCodewords(E),F=a.getTotalCodewordsCount(E,R),O=D-F,L=a.getBlocksCount(E,R),B=D%L,U=L-B,P=Math.floor(D/L),x=Math.floor(O/L),W=x+1,V=P-x,K=new o(V);let H=0;const Y=new Array(L),X=new Array(L);let ne=0;const de=new Uint8Array(A.buffer);for(let fe=0;fe<L;fe++){const we=fe<U?x:W;Y[fe]=de.slice(H,H+we),X[fe]=K.encode(Y[fe]),H+=we,ne=Math.max(ne,we)}const te=new Uint8Array(D);let ce=0,ie,se;for(ie=0;ie<ne;ie++)for(se=0;se<L;se++)ie<Y[se].length&&(te[ce++]=Y[se][ie]);for(ie=0;ie<V;ie++)for(se=0;se<L;se++)te[ce++]=X[se][ie];return te}function S(A,E,R,D){let F;if(Array.isArray(A))F=h.fromArray(A);else if(typeof A=="string"){let P=E;if(!P){const x=h.rawSplit(A);P=u.getBestVersionForData(x,R)}F=h.fromString(A,P||40)}else throw new Error("Invalid data");const O=u.getBestVersionForData(F,R);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=O;else if(E<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const L=w(E,R,F),B=n.getSymbolSize(E),U=new s(B);return _(U,E),g(U),T(U,E),I(U,R,0),E>=7&&C(U,E),v(U,L),isNaN(D)&&(D=l.getBestMask(U,I.bind(null,U,R))),l.applyMask(D,U),I(U,R,D),{modules:U,version:E,errorCorrectionLevel:R,maskPattern:D,segments:F}}return $s.create=function(E,R){if(typeof E>"u"||E==="")throw new Error("No input text");let D=e.M,F,O;return typeof R<"u"&&(D=e.from(R.errorCorrectionLevel,e.M),F=u.from(R.version),O=l.from(R.maskPattern),R.toSJISFunc&&n.setToSJISFunction(R.toSJISFunc)),S(E,F,D,O)},$s}var _r={},br={},fa;function nc(){return fa||(fa=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(i){return[i,i]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,i=s.width&&s.width>=21?s.width:void 0,l=s.scale||4;return{width:i,scale:i?4:l,margin:r,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},n.getImageWidth=function(s,r){const i=n.getScale(s,r);return Math.floor((s+r.margin*2)*i)},n.qrToImageData=function(s,r,i){const l=r.modules.size,a=r.modules.data,o=n.getScale(l,i),u=Math.floor((l+i.margin*2)*o),f=i.margin*o,p=[i.color.light,i.color.dark];for(let h=0;h<u;h++)for(let _=0;_<u;_++){let g=(h*u+_)*4,T=i.color.light;if(h>=f&&_>=f&&h<u-f&&_<u-f){const C=Math.floor((h-f)/o),I=Math.floor((_-f)/o);T=p[a[C*l+I]?1:0]}s[g++]=T.r,s[g++]=T.g,s[g++]=T.b,s[g]=T.a}}})(br)),br}var da;function Uh(){return da||(da=1,(function(n){const e=nc();function t(r,i,l){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,l,a){let o=a,u=l;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),l||(u=s()),o=e.getOptions(o);const f=e.getImageWidth(i.modules.size,o),p=u.getContext("2d"),h=p.createImageData(f,f);return e.qrToImageData(h.data,i,o),t(p,u,f),p.putImageData(h,0,0),u},n.renderToDataURL=function(i,l,a){let o=a;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),o||(o={});const u=n.render(i,l,o),f=o.type||"image/png",p=o.rendererOpts||{};return u.toDataURL(f,p.quality)}})(_r)),_r}var yr={},ha;function xh(){if(ha)return yr;ha=1;const n=nc();function e(r,i){const l=r.a/255,a=i+'="'+r.hex+'"';return l<1?a+" "+i+'-opacity="'+l.toFixed(2).slice(1)+'"':a}function t(r,i,l){let a=r+i;return typeof l<"u"&&(a+=" "+l),a}function s(r,i,l){let a="",o=0,u=!1,f=0;for(let p=0;p<r.length;p++){const h=Math.floor(p%i),_=Math.floor(p/i);!h&&!u&&(u=!0),r[p]?(f++,p>0&&h>0&&r[p-1]||(a+=u?t("M",h+l,.5+_+l):t("m",o,0),o=0,u=!1),h+1<i&&r[p+1]||(a+=t("h",f),f=0)):o++}return a}return yr.render=function(i,l,a){const o=n.getOptions(l),u=i.modules.size,f=i.modules.data,p=u+o.margin*2,h=o.color.light.a?"<path "+e(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",_="<path "+e(o.color.dark,"stroke")+' d="'+s(f,u,o.margin)+'"/>',g='viewBox="0 0 '+p+" "+p+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+g+' shape-rendering="crispEdges">'+h+_+`</svg>
`;return typeof a=="function"&&a(null,C),C},yr}var pa;function jh(){if(pa)return Bn;pa=1;const n=kh(),e=Bh(),t=Uh(),s=xh();function r(i,l,a,o,u){const f=[].slice.call(arguments,1),p=f.length,h=typeof f[p-1]=="function";if(!h&&!n())throw new Error("Callback required as last argument");if(h){if(p<2)throw new Error("Too few arguments provided");p===2?(u=a,a=l,l=o=void 0):p===3&&(l.getContext&&typeof u>"u"?(u=o,o=void 0):(u=o,o=a,a=l,l=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(a=l,l=o=void 0):p===2&&!l.getContext&&(o=a,a=l,l=void 0),new Promise(function(_,g){try{const T=e.create(a,o);_(i(T,l,o))}catch(T){g(T)}})}try{const _=e.create(a,o);u(null,i(_,l,o))}catch(_){u(_)}}return Bn.create=e.create,Bn.toCanvas=r.bind(null,t.render),Bn.toDataURL=r.bind(null,t.renderToDataURL),Bn.toString=r.bind(null,function(i,l,a){return s.render(i,a)}),Bn}var Vh=jh();const qh=Uo(Vh);function ga(n){let e,t,s,r="Join This Wabi House",i,l,a,o,u,f,p,h,_,g,T,C="Regenerate",I,v,w="Close",m,S;return{c(){e=k("div"),t=k("div"),s=k("h2"),s.textContent=r,i=z(),l=k("canvas"),a=z(),o=k("p"),u=J(n[4]),f=z(),p=k("div"),h=k("input"),_=z(),g=k("div"),T=k("button"),T.textContent=C,I=z(),v=k("button"),v.textContent=w,this.h()},l(A){e=y(A,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var E=N(e);t=y(E,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var R=N(t);s=y(R,"H2",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-147mrlj"&&(s.textContent=r),i=M(R),l=y(R,"CANVAS",{}),N(l).forEach(b),a=M(R),o=y(R,"P",{class:!0});var D=N(o);u=Z(D,n[4]),D.forEach(b),f=M(R),p=y(R,"DIV",{class:!0});var F=N(p);h=y(F,"INPUT",{type:!0,placeholder:!0,class:!0}),F.forEach(b),_=M(R),g=y(R,"DIV",{class:!0});var O=N(g);T=y(O,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-10gzc5i"&&(T.textContent=C),I=M(O),v=y(O,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-1muw4mw"&&(v.textContent=w),O.forEach(b),R.forEach(b),E.forEach(b),this.h()},h(){d(s,"class","svelte-13o88on"),d(o,"class","url svelte-13o88on"),d(h,"type","text"),d(h,"placeholder","Optional room name (e.g. kitchen)"),d(h,"class","svelte-13o88on"),d(p,"class","room-input svelte-13o88on"),d(T,"class","svelte-13o88on"),d(v,"class","svelte-13o88on"),d(g,"class","qr-actions svelte-13o88on"),d(t,"class","qr-modal svelte-13o88on"),d(t,"role","dialog"),d(t,"aria-modal","true"),d(t,"aria-label","QR code to join this Wabi house"),d(e,"class","qr-overlay svelte-13o88on"),d(e,"role","button"),d(e,"tabindex","0"),d(e,"aria-label","Close QR code modal")},m(A,E){q(A,e,E),c(e,t),c(t,s),c(t,i),c(t,l),n[10](l),c(t,a),c(t,o),c(o,u),c(t,f),c(t,p),c(p,h),$e(h,n[3]),c(t,_),c(t,g),c(g,T),c(g,I),c(g,v),m||(S=[G(h,"input",n[11]),G(h,"input",n[12]),G(T,"click",n[6]),G(v,"click",n[13]),G(t,"click",ot(n[7])),G(t,"keydown",ot(n[8])),G(e,"click",n[14]),G(e,"keydown",n[15])],m=!0)},p(A,E){E&16&&re(u,A[4]),E&8&&h.value!==A[3]&&$e(h,A[3])},d(A){A&&b(e),n[10](null),m=!1,Ae(S)}}}function Hh(n){let e,t,s,r,i,l,a,o,u,f="Join the Fridge",p,h,_="Scan to Join This House",g,T,C,I=n[2]&&ga(n);return{c(){e=k("div"),t=k("div"),s=k("img"),i=z(),l=k("form"),a=k("input"),o=z(),u=k("button"),u.textContent=f,p=z(),h=k("button"),h.textContent=_,g=z(),I&&I.c(),this.h()},l(v){e=y(v,"DIV",{class:!0});var w=N(e);t=y(w,"DIV",{class:!0});var m=N(t);s=y(m,"IMG",{src:!0,alt:!0,class:!0}),i=M(m),l=y(m,"FORM",{});var S=N(l);a=y(S,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=M(S),u=y(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1jmevab"&&(u.textContent=f),S.forEach(b),p=M(m),h=y(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-yn4djj"&&(h.textContent=_),m.forEach(b),g=M(w),I&&I.l(w),w.forEach(b),this.h()},h(){Ue(s.src,r="/wabi-logo.png")||d(s,"src",r),d(s,"alt","Wabi"),d(s,"class","logo svelte-13o88on"),d(a,"type","text"),d(a,"placeholder","Enter your name"),d(a,"maxlength","20"),a.required=!0,a.autofocus=!0,d(a,"class","svelte-13o88on"),d(u,"type","submit"),d(u,"class","join-btn svelte-13o88on"),d(h,"type","button"),d(h,"class","qr-btn svelte-13o88on"),d(t,"class","login-box svelte-13o88on"),d(e,"class","login-container svelte-13o88on")},m(v,w){q(v,e,w),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),$e(a,n[0]),c(l,o),c(l,u),c(t,p),c(t,h),c(e,g),I&&I.m(e,null),a.focus(),T||(C=[G(a,"input",n[9]),G(l,"submit",lc(n[5])),G(h,"click",n[6])],T=!0)},p(v,[w]){w&1&&a.value!==v[0]&&$e(a,v[0]),v[2]?I?I.p(v,w):(I=ga(v),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i:De,o:De,d(v){v&&b(e),I&&I.d(),T=!1,Ae(C)}}}function Gh(n,e,t){let s;const r=Or();let i="",l,a=!1,o="";function u(){i.trim()&&(localStorage.setItem("wabi-username",i.trim()),r("login",i.trim()))}function f(){t(2,a=!0),setTimeout(()=>{const m=o.trim()?`${s}?room=${encodeURIComponent(o.trim())}`:s;qh.toCanvas(l,m,{width:300,margin:2,color:{dark:"#ffffff",light:"#00000000"}})},50)}function p(m){Zt.call(this,n,m)}function h(m){Zt.call(this,n,m)}function _(){i=this.value,t(0,i)}function g(m){Je[m?"unshift":"push"](()=>{l=m,t(1,l)})}function T(){o=this.value,t(3,o)}const C=()=>setTimeout(f,300),I=()=>t(2,a=!1),v=()=>t(2,a=!1),w=m=>(m.key==="Escape"||m.key===" ")&&t(2,a=!1);return t(4,s=typeof window<"u"?`${window.location.origin}./`:""),[i,l,a,o,s,u,f,p,h,_,g,T,C,I,v,w]}class Wh extends ut{constructor(e){super(),ft(this,e,Gh,Hh,ct,{})}}function ma(n,e,t){const s=n.slice();return s[27]=e[t],s}function va(n){let e,t,s,r="Total Messages",i,l,a=n[3].totalMessages.toLocaleString()+"",o,u,f,p,h="Storage Used",_,g,T=Ds(n[3].totalSize)+"",C,I,v,w,m="Archives",S,A,E=n[3].archives.length+"",R,D,F,O,L,B="Rotation Period",U,P,x,W="Weekly",V,K="Monthly",H,Y="Every 6 Months",X,ne="Yearly",de,te,ce="How often to create a new archive file (like changing batteries)",ie,se,fe,we,le="Keep Last",xe,Se,ae,$,ue,_e="archives",ye,Ee,ze="Older archives are automatically deleted to save space",st,tt,Ve,qe,gt="ðŸ—‘ï¸ Clear All History",dt,rt;function wt(me,Ne){return me[3].archives.length>0?Kh:Yh}let Bt=wt(n),it=Bt(n);return{c(){e=k("div"),t=k("div"),s=k("div"),s.textContent=r,i=z(),l=k("div"),o=J(a),u=z(),f=k("div"),p=k("div"),p.textContent=h,_=z(),g=k("div"),C=J(T),I=z(),v=k("div"),w=k("div"),w.textContent=m,S=z(),A=k("div"),R=J(E),D=z(),F=k("div"),O=k("label"),L=k("span"),L.textContent=B,U=z(),P=k("select"),x=k("option"),x.textContent=W,V=k("option"),V.textContent=K,H=k("option"),H.textContent=Y,X=k("option"),X.textContent=ne,de=z(),te=k("p"),te.textContent=ce,ie=z(),se=k("div"),fe=k("label"),we=k("span"),we.textContent=le,xe=z(),Se=k("div"),ae=k("input"),$=z(),ue=k("span"),ue.textContent=_e,ye=z(),Ee=k("p"),Ee.textContent=ze,st=z(),it.c(),tt=z(),Ve=k("div"),qe=k("button"),qe.textContent=gt,this.h()},l(me){e=y(me,"DIV",{class:!0});var Ne=N(e);t=y(Ne,"DIV",{class:!0});var Dt=N(t);s=y(Dt,"DIV",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-akn32o"&&(s.textContent=r),i=M(Dt),l=y(Dt,"DIV",{class:!0});var zt=N(l);o=Z(zt,a),zt.forEach(b),Dt.forEach(b),u=M(Ne),f=y(Ne,"DIV",{class:!0});var ee=N(f);p=y(ee,"DIV",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-5vlbe4"&&(p.textContent=h),_=M(ee),g=y(ee,"DIV",{class:!0});var ve=N(g);C=Z(ve,T),ve.forEach(b),ee.forEach(b),I=M(Ne),v=y(Ne,"DIV",{class:!0});var bt=N(v);w=y(bt,"DIV",{class:!0,"data-svelte-h":!0}),Q(w)!=="svelte-1e1df45"&&(w.textContent=m),S=M(bt),A=y(bt,"DIV",{class:!0});var ht=N(A);R=Z(ht,E),ht.forEach(b),bt.forEach(b),Ne.forEach(b),D=M(me),F=y(me,"DIV",{class:!0});var Xe=N(F);O=y(Xe,"LABEL",{class:!0});var Ft=N(O);L=y(Ft,"SPAN",{class:!0,"data-svelte-h":!0}),Q(L)!=="svelte-608xyy"&&(L.textContent=B),U=M(Ft),P=y(Ft,"SELECT",{class:!0});var pt=N(P);x=y(pt,"OPTION",{"data-svelte-h":!0}),Q(x)!=="svelte-crm6lv"&&(x.textContent=W),V=y(pt,"OPTION",{"data-svelte-h":!0}),Q(V)!=="svelte-hva46z"&&(V.textContent=K),H=y(pt,"OPTION",{"data-svelte-h":!0}),Q(H)!=="svelte-1s0lvql"&&(H.textContent=Y),X=y(pt,"OPTION",{"data-svelte-h":!0}),Q(X)!=="svelte-jp5v27"&&(X.textContent=ne),pt.forEach(b),Ft.forEach(b),de=M(Xe),te=y(Xe,"P",{class:!0,"data-svelte-h":!0}),Q(te)!=="svelte-qu5pay"&&(te.textContent=ce),Xe.forEach(b),ie=M(me),se=y(me,"DIV",{class:!0});var an=N(se);fe=y(an,"LABEL",{class:!0});var Ke=N(fe);we=y(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),Q(we)!=="svelte-1im50qe"&&(we.textContent=le),xe=M(Ke),Se=y(Ke,"DIV",{class:!0});var $t=N(Se);ae=y($t,"INPUT",{type:!0,min:!0,max:!0,class:!0}),$=M($t),ue=y($t,"SPAN",{class:!0,"data-svelte-h":!0}),Q(ue)!=="svelte-nj3imy"&&(ue.textContent=_e),$t.forEach(b),Ke.forEach(b),ye=M(an),Ee=y(an,"P",{class:!0,"data-svelte-h":!0}),Q(Ee)!=="svelte-he359b"&&(Ee.textContent=ze),an.forEach(b),st=M(me),it.l(me),tt=M(me),Ve=y(me,"DIV",{class:!0});var _n=N(Ve);qe=y(_n,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(qe)!=="svelte-1u0bcm7"&&(qe.textContent=gt),_n.forEach(b),this.h()},h(){d(s,"class","stat-label svelte-1jfalu6"),d(l,"class","stat-value svelte-1jfalu6"),d(t,"class","stat svelte-1jfalu6"),d(p,"class","stat-label svelte-1jfalu6"),d(g,"class","stat-value svelte-1jfalu6"),d(f,"class","stat svelte-1jfalu6"),d(w,"class","stat-label svelte-1jfalu6"),d(A,"class","stat-value svelte-1jfalu6"),d(v,"class","stat svelte-1jfalu6"),d(e,"class","stats-panel svelte-1jfalu6"),d(L,"class","label svelte-1jfalu6"),x.__value="week",$e(x,x.__value),V.__value="month",$e(V,V.__value),H.__value="half-year",$e(H,H.__value),X.__value="year",$e(X,X.__value),d(P,"class","svelte-1jfalu6"),n[1]===void 0&&ac(()=>n[20].call(P)),d(O,"class","svelte-1jfalu6"),d(te,"class","hint svelte-1jfalu6"),d(F,"class","setting-group svelte-1jfalu6"),d(we,"class","label svelte-1jfalu6"),d(ae,"type","number"),d(ae,"min","1"),d(ae,"max","52"),d(ae,"class","svelte-1jfalu6"),d(ue,"class","unit svelte-1jfalu6"),d(Se,"class","number-input-group svelte-1jfalu6"),d(fe,"class","svelte-1jfalu6"),d(Ee,"class","hint svelte-1jfalu6"),d(se,"class","setting-group svelte-1jfalu6"),d(qe,"class","btn-danger svelte-1jfalu6"),d(Ve,"class","actions svelte-1jfalu6")},m(me,Ne){q(me,e,Ne),c(e,t),c(t,s),c(t,i),c(t,l),c(l,o),c(e,u),c(e,f),c(f,p),c(f,_),c(f,g),c(g,C),c(e,I),c(e,v),c(v,w),c(v,S),c(v,A),c(A,R),q(me,D,Ne),q(me,F,Ne),c(F,O),c(O,L),c(O,U),c(O,P),c(P,x),c(P,V),c(P,H),c(P,X),ri(P,n[1],!0),c(F,de),c(F,te),q(me,ie,Ne),q(me,se,Ne),c(se,fe),c(fe,we),c(fe,xe),c(fe,Se),c(Se,ae),$e(ae,n[2]),c(Se,$),c(Se,ue),c(se,ye),c(se,Ee),q(me,st,Ne),it.m(me,Ne),q(me,tt,Ne),q(me,Ve,Ne),c(Ve,qe),dt||(rt=[G(P,"change",n[20]),G(P,"change",n[11]),G(ae,"input",n[21]),G(ae,"change",n[12]),G(qe,"click",n[17])],dt=!0)},p(me,Ne){Ne&8&&a!==(a=me[3].totalMessages.toLocaleString()+"")&&re(o,a),Ne&8&&T!==(T=Ds(me[3].totalSize)+"")&&re(C,T),Ne&8&&E!==(E=me[3].archives.length+"")&&re(R,E),Ne&2&&ri(P,me[1]),Ne&4&&uo(ae.value)!==me[2]&&$e(ae,me[2]),Bt===(Bt=wt(me))&&it?it.p(me,Ne):(it.d(1),it=Bt(me),it&&(it.c(),it.m(tt.parentNode,tt)))},d(me){me&&(b(e),b(D),b(F),b(ie),b(se),b(st),b(tt),b(Ve)),it.d(me),dt=!1,Ae(rt)}}}function Yh(n){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-1jfalu6")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function Kh(n){let e,t,s,r="Archive History",i,l,a="ðŸ“¦ Export All",o,u,f,p,h=je(n[3].archives),_=[];for(let g=0;g<h.length;g+=1)_[g]=_a(ma(n,h,g));return{c(){e=k("div"),t=k("div"),s=k("h4"),s.textContent=r,i=z(),l=k("button"),l.textContent=a,o=z(),u=k("div");for(let g=0;g<_.length;g+=1)_[g].c();this.h()},l(g){e=y(g,"DIV",{class:!0});var T=N(e);t=y(T,"DIV",{class:!0});var C=N(t);s=y(C,"H4",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1i91zrs"&&(s.textContent=r),i=M(C),l=y(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-197zvis"&&(l.textContent=a),C.forEach(b),o=M(T),u=y(T,"DIV",{class:!0});var I=N(u);for(let v=0;v<_.length;v+=1)_[v].l(I);I.forEach(b),T.forEach(b),this.h()},h(){d(s,"class","svelte-1jfalu6"),d(l,"class","btn-small svelte-1jfalu6"),d(t,"class","section-header svelte-1jfalu6"),d(u,"class","archive-list svelte-1jfalu6"),d(e,"class","archives-section svelte-1jfalu6")},m(g,T){q(g,e,T),c(e,t),c(t,s),c(t,i),c(t,l),c(e,o),c(e,u);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m(u,null);f||(p=G(l,"click",n[16]),f=!0)},p(g,T){if(T&40968){h=je(g[3].archives);let C;for(C=0;C<h.length;C+=1){const I=ma(g,h,C);_[C]?_[C].p(I,T):(_[C]=_a(I),_[C].c(),_[C].m(u,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=h.length}},d(g){g&&b(e),Ns(_,g),f=!1,p()}}}function _a(n){let e,t,s,r=Rs(n[27].period)+"",i,l,a,o=Ds(n[27].size)+"",u,f,p=n[27].messageCount.toLocaleString()+"",h,_,g,T,C,I="ðŸ’¾",v,w,m="ðŸ—‘ï¸",S,A,E;function R(){return n[22](n[27])}function D(){return n[23](n[27])}return{c(){e=k("div"),t=k("div"),s=k("span"),i=J(r),l=z(),a=k("span"),u=J(o),f=J(" â€¢ "),h=J(p),_=J(" messages"),g=z(),T=k("div"),C=k("button"),C.textContent=I,v=z(),w=k("button"),w.textContent=m,S=z(),this.h()},l(F){e=y(F,"DIV",{class:!0});var O=N(e);t=y(O,"DIV",{class:!0});var L=N(t);s=y(L,"SPAN",{class:!0});var B=N(s);i=Z(B,r),B.forEach(b),l=M(L),a=y(L,"SPAN",{class:!0});var U=N(a);u=Z(U,o),f=Z(U," â€¢ "),h=Z(U,p),_=Z(U," messages"),U.forEach(b),L.forEach(b),g=M(O),T=y(O,"DIV",{class:!0});var P=N(T);C=y(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(C)!=="svelte-13e8aja"&&(C.textContent=I),v=M(P),w=y(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(w)!=="svelte-1br206h"&&(w.textContent=m),P.forEach(b),S=M(O),O.forEach(b),this.h()},h(){d(s,"class","archive-period svelte-1jfalu6"),d(a,"class","archive-meta svelte-1jfalu6"),d(t,"class","archive-info svelte-1jfalu6"),d(C,"class","btn-icon svelte-1jfalu6"),d(C,"title","Export"),d(w,"class","btn-icon danger svelte-1jfalu6"),d(w,"title","Delete"),d(T,"class","archive-actions svelte-1jfalu6"),d(e,"class","archive-item svelte-1jfalu6")},m(F,O){q(F,e,O),c(e,t),c(t,s),c(s,i),c(t,l),c(t,a),c(a,u),c(a,f),c(a,h),c(a,_),c(e,g),c(e,T),c(T,C),c(T,v),c(T,w),c(e,S),A||(E=[G(C,"click",R),G(w,"click",D)],A=!0)},p(F,O){n=F,O&8&&r!==(r=Rs(n[27].period)+"")&&re(i,r),O&8&&o!==(o=Ds(n[27].size)+"")&&re(u,o),O&8&&p!==(p=n[27].messageCount.toLocaleString()+"")&&re(h,p)},d(F){F&&b(e),A=!1,Ae(E)}}}function Xh(n){let e,t,s='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,l,a,o,u,f="Save chat history locally",p,h,_="When enabled, messages are stored in your browser. You control your data.",g,T,C,I,v,w,m,S,A,E,R=n[0]&&va(n);return C=new Cn({props:{isOpen:n[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:n[9],onCancel:n[10]}}),v=new Cn({props:{isOpen:n[5],title:"Delete Archive",message:`Delete archive "${Rs(n[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:n[14],onCancel:n[24]}}),m=new Cn({props:{isOpen:n[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[18],onCancel:n[25]}}),{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=z(),i=k("div"),l=k("label"),a=k("input"),o=z(),u=k("span"),u.textContent=f,p=z(),h=k("p"),h.textContent=_,g=z(),R&&R.c(),T=z(),Ye(C.$$.fragment),I=z(),Ye(v.$$.fragment),w=z(),Ye(m.$$.fragment),this.h()},l(D){e=y(D,"DIV",{class:!0});var F=N(e);t=y(F,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-s9o5r3"&&(t.innerHTML=s),r=M(F),i=y(F,"DIV",{class:!0});var O=N(i);l=y(O,"LABEL",{class:!0});var L=N(l);a=y(L,"INPUT",{type:!0,class:!0}),o=M(L),u=y(L,"SPAN",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1ssgcs1"&&(u.textContent=f),L.forEach(b),p=M(O),h=y(O,"P",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1hbmqvb"&&(h.textContent=_),O.forEach(b),g=M(F),R&&R.l(F),F.forEach(b),T=M(D),We(C.$$.fragment,D),I=M(D),We(v.$$.fragment,D),w=M(D),We(m.$$.fragment,D),this.h()},h(){d(t,"class","header svelte-1jfalu6"),d(a,"type","checkbox"),d(a,"class","svelte-1jfalu6"),d(u,"class","toggle-label"),d(l,"class","toggle-setting svelte-1jfalu6"),d(h,"class","hint svelte-1jfalu6"),d(i,"class","setting-group svelte-1jfalu6"),d(e,"class","storage-settings svelte-1jfalu6")},m(D,F){q(D,e,F),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),a.checked=n[0],c(l,o),c(l,u),c(i,p),c(i,h),c(e,g),R&&R.m(e,null),q(D,T,F),Ge(C,D,F),q(D,I,F),Ge(v,D,F),q(D,w,F),Ge(m,D,F),S=!0,A||(E=[G(a,"change",n[19]),G(a,"change",n[8])],A=!0)},p(D,[F]){F&1&&(a.checked=D[0]),D[0]?R?R.p(D,F):(R=va(D),R.c(),R.m(e,null)):R&&(R.d(1),R=null);const O={};F&16&&(O.isOpen=D[4]),C.$set(O);const L={};F&32&&(L.isOpen=D[5]),F&64&&(L.message=`Delete archive "${Rs(D[6])}"?`),F&32&&(L.onCancel=D[24]),v.$set(L);const B={};F&128&&(B.isOpen=D[7]),F&128&&(B.onCancel=D[25]),m.$set(B)},i(D){S||(be(C.$$.fragment,D),be(v.$$.fragment,D),be(m.$$.fragment,D),S=!0)},o(D){Ie(C.$$.fragment,D),Ie(v.$$.fragment,D),Ie(m.$$.fragment,D),S=!1},d(D){D&&(b(e),b(T),b(I),b(w)),R&&R.d(),He(C,D),He(v,D),He(m,D),A=!1,Ae(E)}}}function Ds(n){if(n===0)return"0 B";const e=n/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}function Rs(n){if(n.includes("-W")){const[e,t]=n.split("-W");return`Week ${t}, ${e}`}else if(n.includes("-H")){const[e,t]=n.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(n.match(/^\d{4}-\d{2}$/)){const[e,t]=n.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${n}`}function Zh(n,e,t){let s=!1,r=Lt.getRotationPeriod(),i=Lt.getMaxArchives(),l={archives:[],totalSize:0,totalMessages:0},a=!1,o=!1,u="",f=!1;async function p(){t(0,s=!s),await Lt.setEnabled(s),s?await A():t(4,a=!0)}async function h(){t(4,a=!1),await A()}function _(){t(0,s=!0),Lt.setEnabled(!0),t(4,a=!1)}async function g(){await Lt.setRotationPeriod(r),await A()}async function T(){await Lt.setMaxArchives(i),await A()}async function C(U){t(6,u=U),t(5,o=!0)}async function I(){await Lt.deleteArchive(u),await A(),t(5,o=!1)}async function v(U){await Lt.exportArchive(U)}async function w(){await Lt.exportArchives()}async function m(){t(7,f=!0)}async function S(){await Lt.clearAllHistory(),await A(),t(7,f=!1)}async function A(){t(3,l=await Lt.getStats())}function E(){s=this.checked,t(0,s)}function R(){r=oc(this),t(1,r)}function D(){i=uo(this.value),t(2,i)}return[s,r,i,l,a,o,u,f,p,h,_,g,T,C,I,v,w,m,S,E,R,D,U=>v(U.period),U=>C(U.period),()=>t(5,o=!1),()=>t(7,f=!1)]}class Jh extends ut{constructor(e){super(),ft(this,e,Zh,Xh,ct,{})}}function ba(n){let e,t,s,r,i="âš™ï¸ Settings",l,a,o="âœ•",u,f,p,h,_="ðŸŽ¤ Audio & Video",g,T,C,I='<span class="setting-label svelte-1l9ajc2">Sound Effects</span> <span class="setting-description svelte-1l9ajc2">Play sounds for messages and notifications</span>',v,w,m=n[1]?"ðŸ”Š":"ðŸ”‡",S,A,E,R,D='<span class="setting-label svelte-1l9ajc2">Microphone</span> <span class="setting-description svelte-1l9ajc2">Enable microphone for voice calls</span>',F,O,L=n[3]?"ðŸŽ¤":"ðŸ”‡",B,U,P,x,W='<span class="setting-label svelte-1l9ajc2">Camera</span> <span class="setting-description svelte-1l9ajc2">Enable camera for video calls</span>',V,K,H=n[4]?"ðŸ“¹":"ðŸ“·",Y,X,ne,de,te="ðŸ”” Notifications",ce,ie,se,fe='<span class="setting-label svelte-1l9ajc2">Desktop Notifications</span> <span class="setting-description svelte-1l9ajc2">Get notified when you receive new messages</span>',we,le,xe=n[2]?"âœ… Enabled":"ðŸ”” Enable",Se,ae,$,ue,_e="ðŸŽ¨ Appearance",ye,Ee,ze,st='<span class="setting-label svelte-1l9ajc2">Theme</span> <span class="setting-description svelte-1l9ajc2">Switch between light and dark mode</span>',tt,Ve,qe=n[5]==="dark"?"ðŸŒ™":"â˜€ï¸",gt,dt,rt,wt,Bt="ðŸ–¥ï¸ Server Management",it,me,Ne,Dt='<span class="setting-label svelte-1l9ajc2">Clear All Server Messages</span> <span class="setting-description svelte-1l9ajc2">Delete all messages from the server for all users (cannot be undone)</span>',zt,ee,ve="ðŸ—‘ï¸ Clear Server",bt,ht,Xe,Ft,pt,an='<h3 class="svelte-1l9ajc2">â„¹ï¸ About</h3> <div class="about-info svelte-1l9ajc2"><p class="svelte-1l9ajc2"><strong class="svelte-1l9ajc2">Wabi Chat</strong></p> <p class="svelte-1l9ajc2">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-1l9ajc2">Server stores nothing permanently. You control your data.</p> <p class="version svelte-1l9ajc2">Version 1.0.0</p></div>',Ke,$t,_n;return Xe=new Jh({}),{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),r.textContent=i,l=z(),a=k("button"),a.textContent=o,u=z(),f=k("div"),p=k("div"),h=k("h3"),h.textContent=_,g=z(),T=k("div"),C=k("div"),C.innerHTML=I,v=z(),w=k("button"),S=J(m),A=z(),E=k("div"),R=k("div"),R.innerHTML=D,F=z(),O=k("button"),B=J(L),U=z(),P=k("div"),x=k("div"),x.innerHTML=W,V=z(),K=k("button"),Y=J(H),X=z(),ne=k("div"),de=k("h3"),de.textContent=te,ce=z(),ie=k("div"),se=k("div"),se.innerHTML=fe,we=z(),le=k("button"),Se=J(xe),ae=z(),$=k("div"),ue=k("h3"),ue.textContent=_e,ye=z(),Ee=k("div"),ze=k("div"),ze.innerHTML=st,tt=z(),Ve=k("button"),gt=J(qe),dt=z(),rt=k("div"),wt=k("h3"),wt.textContent=Bt,it=z(),me=k("div"),Ne=k("div"),Ne.innerHTML=Dt,zt=z(),ee=k("button"),ee.textContent=ve,bt=z(),ht=k("div"),Ye(Xe.$$.fragment),Ft=z(),pt=k("div"),pt.innerHTML=an,this.h()},l(Ce){e=y(Ce,"DIV",{class:!0});var Qe=N(e);t=y(Qe,"DIV",{class:!0});var Mn=N(t);s=y(Mn,"DIV",{class:!0});var bn=N(s);r=y(bn,"H2",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-15bbpfh"&&(r.textContent=i),l=M(bn),a=y(bn,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-3o141q"&&(a.textContent=o),bn.forEach(b),u=M(Mn),f=y(Mn,"DIV",{class:!0});var yt=N(f);p=y(yt,"DIV",{class:!0});var Ht=N(p);h=y(Ht,"H3",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1tdb4hv"&&(h.textContent=_),g=M(Ht),T=y(Ht,"DIV",{class:!0});var yn=N(T);C=y(yn,"DIV",{class:!0,"data-svelte-h":!0}),Q(C)!=="svelte-5e193f"&&(C.innerHTML=I),v=M(yn),w=y(yn,"BUTTON",{class:!0});var us=N(w);S=Z(us,m),us.forEach(b),yn.forEach(b),A=M(Ht),E=y(Ht,"DIV",{class:!0});var Et=N(E);R=y(Et,"DIV",{class:!0,"data-svelte-h":!0}),Q(R)!=="svelte-ql0oob"&&(R.innerHTML=D),F=M(Et),O=y(Et,"BUTTON",{class:!0});var en=N(O);B=Z(en,L),en.forEach(b),Et.forEach(b),U=M(Ht),P=y(Ht,"DIV",{class:!0});var kn=N(P);x=y(kn,"DIV",{class:!0,"data-svelte-h":!0}),Q(x)!=="svelte-fu2kxq"&&(x.innerHTML=W),V=M(kn),K=y(kn,"BUTTON",{class:!0});var Hn=N(K);Y=Z(Hn,H),Hn.forEach(b),kn.forEach(b),Ht.forEach(b),X=M(yt),ne=y(yt,"DIV",{class:!0});var hn=N(ne);de=y(hn,"H3",{class:!0,"data-svelte-h":!0}),Q(de)!=="svelte-yb4801"&&(de.textContent=te),ce=M(hn),ie=y(hn,"DIV",{class:!0});var wn=N(ie);se=y(wn,"DIV",{class:!0,"data-svelte-h":!0}),Q(se)!=="svelte-11j8eba"&&(se.innerHTML=fe),we=M(wn),le=y(wn,"BUTTON",{class:!0});var Ut=N(le);Se=Z(Ut,xe),Ut.forEach(b),wn.forEach(b),hn.forEach(b),ae=M(yt),$=y(yt,"DIV",{class:!0});var En=N($);ue=y(En,"H3",{class:!0,"data-svelte-h":!0}),Q(ue)!=="svelte-bdq4j0"&&(ue.textContent=_e),ye=M(En),Ee=y(En,"DIV",{class:!0});var Tn=N(Ee);ze=y(Tn,"DIV",{class:!0,"data-svelte-h":!0}),Q(ze)!=="svelte-1expsbb"&&(ze.innerHTML=st),tt=M(Tn),Ve=y(Tn,"BUTTON",{class:!0});var Gn=N(Ve);gt=Z(Gn,qe),Gn.forEach(b),Tn.forEach(b),En.forEach(b),dt=M(yt),rt=y(yt,"DIV",{class:!0});var An=N(rt);wt=y(An,"H3",{class:!0,"data-svelte-h":!0}),Q(wt)!=="svelte-13bxj89"&&(wt.textContent=Bt),it=M(An),me=y(An,"DIV",{class:!0});var zn=N(me);Ne=y(zn,"DIV",{class:!0,"data-svelte-h":!0}),Q(Ne)!=="svelte-1kywvm7"&&(Ne.innerHTML=Dt),zt=M(zn),ee=y(zn,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(ee)!=="svelte-uzfcg3"&&(ee.textContent=ve),zn.forEach(b),An.forEach(b),bt=M(yt),ht=y(yt,"DIV",{class:!0});var pe=N(ht);We(Xe.$$.fragment,pe),pe.forEach(b),Ft=M(yt),pt=y(yt,"DIV",{class:!0,"data-svelte-h":!0}),Q(pt)!=="svelte-137zy12"&&(pt.innerHTML=an),yt.forEach(b),Mn.forEach(b),Qe.forEach(b),this.h()},h(){d(r,"class","svelte-1l9ajc2"),d(a,"class","close-btn svelte-1l9ajc2"),d(s,"class","modal-header svelte-1l9ajc2"),d(h,"class","svelte-1l9ajc2"),d(C,"class","setting-info svelte-1l9ajc2"),d(w,"class","toggle-btn svelte-1l9ajc2"),ge(w,"active",n[1]),d(T,"class","setting-item svelte-1l9ajc2"),d(R,"class","setting-info svelte-1l9ajc2"),d(O,"class","toggle-btn svelte-1l9ajc2"),ge(O,"active",n[3]),d(E,"class","setting-item svelte-1l9ajc2"),d(x,"class","setting-info svelte-1l9ajc2"),d(K,"class","toggle-btn svelte-1l9ajc2"),ge(K,"active",n[4]),d(P,"class","setting-item svelte-1l9ajc2"),d(p,"class","settings-section svelte-1l9ajc2"),d(de,"class","svelte-1l9ajc2"),d(se,"class","setting-info svelte-1l9ajc2"),d(le,"class","action-btn svelte-1l9ajc2"),ge(le,"active",n[2]),d(ie,"class","setting-item svelte-1l9ajc2"),d(ne,"class","settings-section svelte-1l9ajc2"),d(ue,"class","svelte-1l9ajc2"),d(ze,"class","setting-info svelte-1l9ajc2"),d(Ve,"class","toggle-btn svelte-1l9ajc2"),ge(Ve,"active",n[5]==="light"),d(Ee,"class","setting-item svelte-1l9ajc2"),d($,"class","settings-section svelte-1l9ajc2"),d(wt,"class","svelte-1l9ajc2"),d(Ne,"class","setting-info svelte-1l9ajc2"),d(ee,"class","action-btn danger svelte-1l9ajc2"),d(me,"class","setting-item svelte-1l9ajc2"),d(rt,"class","settings-section svelte-1l9ajc2"),d(ht,"class","settings-section svelte-1l9ajc2"),d(pt,"class","settings-section svelte-1l9ajc2"),d(f,"class","settings-sections svelte-1l9ajc2"),d(t,"class","modal-content svelte-1l9ajc2"),d(e,"class","modal-overlay svelte-1l9ajc2")},m(Ce,Qe){q(Ce,e,Qe),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,f),c(f,p),c(p,h),c(p,g),c(p,T),c(T,C),c(T,v),c(T,w),c(w,S),c(p,A),c(p,E),c(E,R),c(E,F),c(E,O),c(O,B),c(p,U),c(p,P),c(P,x),c(P,V),c(P,K),c(K,Y),c(f,X),c(f,ne),c(ne,de),c(ne,ce),c(ne,ie),c(ie,se),c(ie,we),c(ie,le),c(le,Se),c(f,ae),c(f,$),c($,ue),c($,ye),c($,Ee),c(Ee,ze),c(Ee,tt),c(Ee,Ve),c(Ve,gt),c(f,dt),c(f,rt),c(rt,wt),c(rt,it),c(rt,me),c(me,Ne),c(me,zt),c(me,ee),c(f,bt),c(f,ht),Ge(Xe,ht,null),c(f,Ft),c(f,pt),Ke=!0,$t||(_n=[G(a,"click",n[16]),G(w,"click",n[8]),G(O,"click",n[9]),G(K,"click",n[10]),G(le,"click",n[12]),G(Ve,"click",n[11]),G(ee,"click",n[14]),G(t,"click",ot(n[17])),G(e,"click",n[16])],$t=!0)},p(Ce,Qe){(!Ke||Qe&2)&&m!==(m=Ce[1]?"ðŸ”Š":"ðŸ”‡")&&re(S,m),(!Ke||Qe&2)&&ge(w,"active",Ce[1]),(!Ke||Qe&8)&&L!==(L=Ce[3]?"ðŸŽ¤":"ðŸ”‡")&&re(B,L),(!Ke||Qe&8)&&ge(O,"active",Ce[3]),(!Ke||Qe&16)&&H!==(H=Ce[4]?"ðŸ“¹":"ðŸ“·")&&re(Y,H),(!Ke||Qe&16)&&ge(K,"active",Ce[4]),(!Ke||Qe&4)&&xe!==(xe=Ce[2]?"âœ… Enabled":"ðŸ”” Enable")&&re(Se,xe),(!Ke||Qe&4)&&ge(le,"active",Ce[2]),(!Ke||Qe&32)&&qe!==(qe=Ce[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&re(gt,qe),(!Ke||Qe&32)&&ge(Ve,"active",Ce[5]==="light")},i(Ce){Ke||(be(Xe.$$.fragment,Ce),Ke=!0)},o(Ce){Ie(Xe.$$.fragment,Ce),Ke=!1},d(Ce){Ce&&b(e),He(Xe),$t=!1,Ae(_n)}}}function Qh(n){let e,t,s,r,i,l=n[0]&&ba(n);return t=new Cn({props:{isOpen:n[6],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:n[13],onCancel:n[18]}}),r=new Cn({props:{isOpen:n[7],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[15],onCancel:n[19]}}),{c(){l&&l.c(),e=z(),Ye(t.$$.fragment),s=z(),Ye(r.$$.fragment)},l(a){l&&l.l(a),e=M(a),We(t.$$.fragment,a),s=M(a),We(r.$$.fragment,a)},m(a,o){l&&l.m(a,o),q(a,e,o),Ge(t,a,o),q(a,s,o),Ge(r,a,o),i=!0},p(a,[o]){a[0]?l?(l.p(a,o),o&1&&be(l,1)):(l=ba(a),l.c(),be(l,1),l.m(e.parentNode,e)):l&&(xn(),Ie(l,1,1,()=>{l=null}),jn());const u={};o&64&&(u.isOpen=a[6]),o&64&&(u.onCancel=a[18]),t.$set(u);const f={};o&128&&(f.isOpen=a[7]),o&128&&(f.onCancel=a[19]),r.$set(f)},i(a){i||(be(l),be(t.$$.fragment,a),be(r.$$.fragment,a),i=!0)},o(a){Ie(l),Ie(t.$$.fragment,a),Ie(r.$$.fragment,a),i=!1},d(a){a&&(b(e),b(s)),l&&l.d(a),He(t,a),He(r,a)}}}function $h(n,e,t){Oe(n,ln,E=>t(20,E)),Oe(n,jt,E=>t(21,E)),Oe(n,At,E=>t(22,E));let{isOpen:s=!1}=e,r=!0,i=!0,l=!0,a=!0,o="dark",u=!1,f=!1;function p(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function h(){t(3,l=!l),localStorage.setItem("micEnabled",l.toString())}function _(){t(4,a=!a),localStorage.setItem("cameraEnabled",a.toString())}function g(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}async function T(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}function C(){At.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(6,u=!1)}async function I(){t(7,f=!0)}async function v(){try{const E=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,D=await(await fetch(`${E}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();D.success?(At.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(D.error||"Unknown error"))}catch(E){console.error("Error clearing server messages:",E),alert("Failed to clear server messages. Check console for details.")}t(7,f=!1)}function w(){t(0,s=!1)}function m(E){Zt.call(this,n,E)}const S=()=>t(6,u=!1),A=()=>t(7,f=!1);return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen)},[s,r,i,l,a,o,u,f,p,h,_,g,T,C,I,v,w,m,S,A]}class ep extends ut{constructor(e){super(),ft(this,e,$h,Qh,ct,{isOpen:0})}}function ya(n,e,t){const s=n.slice();return s[16]=e[t],s}function ka(n){let e,t,s,r,i,l,a,o,u="Ã—",f,p,h,_;function g(I,v){return I[2].length===0?np:tp}let T=g(n),C=T(n);return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),i=J("ðŸ“Œ Pinned Messages in #"),l=J(n[1]),a=z(),o=k("button"),o.textContent=u,f=z(),p=k("div"),C.c(),this.h()},l(I){e=y(I,"DIV",{class:!0});var v=N(e);t=y(v,"DIV",{class:!0});var w=N(t);s=y(w,"DIV",{class:!0});var m=N(s);r=y(m,"H2",{class:!0});var S=N(r);i=Z(S,"ðŸ“Œ Pinned Messages in #"),l=Z(S,n[1]),S.forEach(b),a=M(m),o=y(m,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-12zniqk"&&(o.textContent=u),m.forEach(b),f=M(w),p=y(w,"DIV",{class:!0});var A=N(p);C.l(A),A.forEach(b),w.forEach(b),v.forEach(b),this.h()},h(){d(r,"class","svelte-178cyr5"),d(o,"class","close-btn svelte-178cyr5"),d(s,"class","modal-header svelte-178cyr5"),d(p,"class","modal-body svelte-178cyr5"),d(t,"class","modal-content svelte-178cyr5"),d(e,"class","modal-overlay svelte-178cyr5")},m(I,v){q(I,e,v),c(e,t),c(t,s),c(s,r),c(r,i),c(r,l),c(s,a),c(s,o),c(t,f),c(t,p),C.m(p,null),h||(_=[G(o,"click",n[3]),G(t,"click",ot(n[10])),G(e,"click",n[3])],h=!0)},p(I,v){v&2&&re(l,I[1]),T===(T=g(I))&&C?C.p(I,v):(C.d(1),C=T(I),C&&(C.c(),C.m(p,null)))},d(I){I&&b(e),C.d(),h=!1,Ae(_)}}}function tp(n){let e,t=[],s=new Map,r=je(n[2]);const i=l=>l[16].id;for(let l=0;l<r.length;l+=1){let a=ya(n,r,l),o=i(a);s.set(o,t[l]=wa(o,a))}return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var a=N(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(b),this.h()},h(){d(e,"class","pinned-messages-list svelte-178cyr5")},m(l,a){q(l,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,a){a&116&&(r=je(l[2]),t=Qt(t,a,i,1,l,r,s,e,Jt,wa,null,ya))},d(l){l&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function np(n){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-178cyr5")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function wa(n,e){let t,s,r,i,l=e[16].user+"",a,o,u,f=Ea(e[16].timestamp)+"",p,h,_,g,T="Jump to",C,I,v="Unpin",w,m,S=e[16].text+"",A,E,R,D;function F(){return e[11](e[16])}function O(){return e[12](e[16])}return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("div"),i=k("span"),a=J(l),o=z(),u=k("span"),p=J(f),h=z(),_=k("div"),g=k("button"),g.textContent=T,C=z(),I=k("button"),I.textContent=v,w=z(),m=k("div"),A=J(S),E=z(),this.h()},l(L){t=y(L,"DIV",{class:!0});var B=N(t);s=y(B,"DIV",{class:!0});var U=N(s);r=y(U,"DIV",{class:!0});var P=N(r);i=y(P,"SPAN",{class:!0,style:!0});var x=N(i);a=Z(x,l),x.forEach(b),o=M(P),u=y(P,"SPAN",{class:!0});var W=N(u);p=Z(W,f),W.forEach(b),P.forEach(b),h=M(U),_=y(U,"DIV",{class:!0});var V=N(_);g=y(V,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(g)!=="svelte-1nadwym"&&(g.textContent=T),C=M(V),I=y(V,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(I)!=="svelte-eqnabo"&&(I.textContent=v),V.forEach(b),U.forEach(b),w=M(B),m=y(B,"DIV",{class:!0});var K=N(m);A=Z(K,S),K.forEach(b),E=M(B),B.forEach(b),this.h()},h(){d(i,"class","username svelte-178cyr5"),Te(i,"color",e[6](e[16].user)),d(u,"class","timestamp svelte-178cyr5"),d(r,"class","user-info svelte-178cyr5"),d(g,"class","jump-btn svelte-178cyr5"),d(g,"title","Jump to message"),d(I,"class","unpin-btn svelte-178cyr5"),d(I,"title","Unpin message"),d(_,"class","action-buttons svelte-178cyr5"),d(s,"class","message-header svelte-178cyr5"),d(m,"class","message-text svelte-178cyr5"),d(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(L,B){q(L,t,B),c(t,s),c(s,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(s,h),c(s,_),c(_,g),c(_,C),c(_,I),c(t,w),c(t,m),c(m,A),c(t,E),R||(D=[G(g,"click",F),G(I,"click",O)],R=!0)},p(L,B){e=L,B&4&&l!==(l=e[16].user+"")&&re(a,l),B&4&&Te(i,"color",e[6](e[16].user)),B&4&&f!==(f=Ea(e[16].timestamp)+"")&&re(p,f),B&4&&S!==(S=e[16].text+"")&&re(A,S)},d(L){L&&b(t),R=!1,Ae(D)}}}function sp(n){let e,t=n[0]&&ka(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=ka(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function Ea(n){return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function rp(n,e,t){let s,r,i,l,a;Oe(n,jt,v=>t(13,i=v)),Oe(n,dn,v=>t(8,l=v)),Oe(n,At,v=>t(9,a=v));let{isOpen:o=!1}=e,{channelId:u=""}=e;function f(){t(0,o=!1)}function p(v){Zr(u,v)}function h(v){f(),setTimeout(()=>{const w=document.getElementById(`message-${v}`);w&&(w.scrollIntoView({behavior:"smooth",block:"center"}),w.classList.add("highlighted"),setTimeout(()=>{w.classList.remove("highlighted")},2e3))},100)}function _(v){return i.find(w=>w.username===v)}function g(v){return _(v)?.color||"var(--status-offline)"}function T(v){Zt.call(this,n,v)}const C=v=>h(v.id),I=v=>p(v.id);return n.$$set=v=>{"isOpen"in v&&t(0,o=v.isOpen),"channelId"in v&&t(7,u=v.channelId)},n.$$.update=()=>{n.$$.dirty&640&&t(2,s=(a[u]||[]).filter(v=>v.isPinned)),n.$$.dirty&384&&t(1,r=l.find(v=>v.id===u)?.name||u)},[o,r,s,f,p,h,g,u,l,a,T,C,I]}class ip extends ut{constructor(e){super(),ft(this,e,rp,sp,ct,{isOpen:0,channelId:7})}}function Ta(n,e,t){const s=n.slice();return s[44]=e[t],s}function Aa(n,e,t){const s=n.slice();return s[44]=e[t],s}function Sa(n,e,t){const s=n.slice();return s[44]=e[t],s}function Ca(n){let e,t,s,r,i="Create",l,a;return{c(){e=k("div"),t=k("input"),s=z(),r=k("button"),r.textContent=i,this.h()},l(o){e=y(o,"DIV",{class:!0});var u=N(e);t=y(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=M(u),r=y(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(b),this.h()},h(){d(t,"type","text"),d(t,"placeholder","channel-name"),t.autofocus=!0,d(t,"class","svelte-yyh4lc"),d(r,"class","svelte-yyh4lc"),d(e,"class","create-channel svelte-yyh4lc")},m(o,u){q(o,e,u),c(e,t),$e(t,n[1]),c(e,s),c(e,r),t.focus(),l||(a=[G(t,"input",n[25]),G(t,"keydown",n[26]),G(r,"click",n[17])],l=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&$e(t,o[1])},d(o){o&&b(e),l=!1,Ae(a)}}}function Ia(n){let e,t="Ã—",s,r;function i(){return n[29](n[44])}return{c(){e=k("button"),e.textContent=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){d(e,"class","delete-btn svelte-yyh4lc")},m(l,a){q(l,e,a),s||(r=G(e,"click",ot(i)),s=!0)},p(l,a){n=l},d(l){l&&b(e),s=!1,r()}}}function Da(n,e){let t,s,r,i="#",l,a=e[44].name+"",o,u,f,p,h="ðŸ“Œ",_,g,T,C;function I(){return e[27](e[44])}function v(){return e[28](e[44])}let w=e[44].id!=="general"&&Ia(e);return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=z(),o=J(a),u=z(),f=k("div"),p=k("button"),p.textContent=h,_=z(),w&&w.c(),g=z(),this.h()},l(m){t=y(m,"DIV",{class:!0});var S=N(t);s=y(S,"BUTTON",{class:!0});var A=N(s);r=y(A,"SPAN",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-16vlh54"&&(r.textContent=i),l=M(A),o=Z(A,a),A.forEach(b),u=M(S),f=y(S,"DIV",{class:!0});var E=N(f);p=y(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(p)!=="svelte-18aqzoy"&&(p.textContent=h),_=M(E),w&&w.l(E),E.forEach(b),g=M(S),S.forEach(b),this.h()},h(){d(r,"class","hash svelte-yyh4lc"),d(s,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ge(t,"active",e[14]===e[44].id),this.first=t},m(m,S){q(m,t,S),c(t,s),c(s,r),c(s,l),c(s,o),c(t,u),c(t,f),c(f,p),c(f,_),w&&w.m(f,null),c(t,g),T||(C=[G(s,"click",I),G(p,"click",ot(v))],T=!0)},p(m,S){e=m,S[0]&8192&&a!==(a=e[44].name+"")&&re(o,a),e[44].id!=="general"?w?w.p(e,S):(w=Ia(e),w.c(),w.m(f,null)):w&&(w.d(1),w=null),S[0]&24576&&ge(t,"active",e[14]===e[44].id)},d(m){m&&b(t),w&&w.d(),T=!1,Ae(C)}}}function Ra(n){let e,t="Direct Messages",s,r=[],i=new Map,l,a=je(n[12]);const o=u=>u[44].id;for(let u=0;u<a.length;u+=1){let f=Aa(n,a,u),p=o(f);i.set(p,r[u]=Na(p,f))}return{c(){e=k("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Re(),this.h()},l(u){e=y(u,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-r1afib"&&(e.textContent=t),s=M(u);for(let f=0;f<r.length;f+=1)r[f].l(u);l=Re(),this.h()},h(){d(e,"class","section-header svelte-yyh4lc")},m(u,f){q(u,e,f),q(u,s,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,f);q(u,l,f)},p(u,f){f[0]&1396736&&(a=je(u[12]),r=Qt(r,f,o,1,u,a,i,l.parentNode,Jt,Na,l,Aa))},d(u){u&&(b(e),b(s),b(l));for(let f=0;f<r.length;f+=1)r[f].d(u)}}}function Na(n,e){let t,s,r,i="ðŸ’¬",l,a=e[44].name+"",o,u,f,p,h="ðŸ“Œ",_,g,T="Ã—",C,I,v;function w(){return e[30](e[44])}function m(){return e[31](e[44])}function S(){return e[32](e[44])}return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=z(),o=J(a),u=z(),f=k("div"),p=k("button"),p.textContent=h,_=z(),g=k("button"),g.textContent=T,C=z(),this.h()},l(A){t=y(A,"DIV",{class:!0});var E=N(t);s=y(E,"BUTTON",{class:!0});var R=N(s);r=y(R,"SPAN",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-q0xuov"&&(r.textContent=i),l=M(R),o=Z(R,a),R.forEach(b),u=M(E),f=y(E,"DIV",{class:!0});var D=N(f);p=y(D,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(p)!=="svelte-18aqzoy"&&(p.textContent=h),_=M(D),g=y(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(g)!=="svelte-12rgdhl"&&(g.textContent=T),D.forEach(b),C=M(E),E.forEach(b),this.h()},h(){d(r,"class","dm-icon svelte-yyh4lc"),d(s,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(g,"class","delete-btn svelte-yyh4lc"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ge(t,"active",e[14]===e[44].id),this.first=t},m(A,E){q(A,t,E),c(t,s),c(s,r),c(s,l),c(s,o),c(t,u),c(t,f),c(f,p),c(f,_),c(f,g),c(t,C),I||(v=[G(s,"click",w),G(p,"click",ot(m)),G(g,"click",ot(S))],I=!0)},p(A,E){e=A,E[0]&4096&&a!==(a=e[44].name+"")&&re(o,a),E[0]&20480&&ge(t,"active",e[14]===e[44].id)},d(A){A&&b(t),I=!1,Ae(v)}}}function Pa(n){let e,t="Group Chats",s,r=[],i=new Map,l,a=je(n[11]);const o=u=>u[44].id;for(let u=0;u<a.length;u+=1){let f=Ta(n,a,u),p=o(f);i.set(p,r[u]=Oa(p,f))}return{c(){e=k("div"),e.textContent=t,s=z();for(let u=0;u<r.length;u+=1)r[u].c();l=Re(),this.h()},l(u){e=y(u,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1fof55m"&&(e.textContent=t),s=M(u);for(let f=0;f<r.length;f+=1)r[f].l(u);l=Re(),this.h()},h(){d(e,"class","section-header svelte-yyh4lc")},m(u,f){q(u,e,f),q(u,s,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,f);q(u,l,f)},p(u,f){f[0]&1394688&&(a=je(u[11]),r=Qt(r,f,o,1,u,a,i,l.parentNode,Jt,Oa,l,Ta))},d(u){u&&(b(e),b(s),b(l));for(let f=0;f<r.length;f+=1)r[f].d(u)}}}function Oa(n,e){let t,s,r,i="ðŸ‘¥",l,a=e[44].name+"",o,u,f,p,h="ðŸ“Œ",_,g,T="Ã—",C,I,v;function w(){return e[33](e[44])}function m(){return e[34](e[44])}function S(){return e[35](e[44])}return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=z(),o=J(a),u=z(),f=k("div"),p=k("button"),p.textContent=h,_=z(),g=k("button"),g.textContent=T,C=z(),this.h()},l(A){t=y(A,"DIV",{class:!0});var E=N(t);s=y(E,"BUTTON",{class:!0});var R=N(s);r=y(R,"SPAN",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-4z5ugu"&&(r.textContent=i),l=M(R),o=Z(R,a),R.forEach(b),u=M(E),f=y(E,"DIV",{class:!0});var D=N(f);p=y(D,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(p)!=="svelte-18aqzoy"&&(p.textContent=h),_=M(D),g=y(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(g)!=="svelte-12rgdhl"&&(g.textContent=T),D.forEach(b),C=M(E),E.forEach(b),this.h()},h(){d(r,"class","group-icon svelte-yyh4lc"),d(s,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(g,"class","delete-btn svelte-yyh4lc"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ge(t,"active",e[14]===e[44].id),this.first=t},m(A,E){q(A,t,E),c(t,s),c(s,r),c(s,l),c(s,o),c(t,u),c(t,f),c(f,p),c(f,_),c(f,g),c(t,C),I||(v=[G(s,"click",w),G(p,"click",ot(m)),G(g,"click",ot(S))],I=!0)},p(A,E){e=A,E[0]&2048&&a!==(a=e[44].name+"")&&re(o,a),E[0]&18432&&ge(t,"active",e[14]===e[44].id)},d(A){A&&b(t),I=!1,Ae(v)}}}function Ma(n){let e,t,s,r,i,l,a,o,u=n[15].username+"",f,p,h,_,g=n[15].id.slice(0,4)+"",T,C,I,v,w=n[4]?"ðŸ”‡":"ðŸŽ¤",m,S,A,E,R=n[5]?"ðŸ”‡":"ðŸŽ§",D,F,O,L,B="âš™ï¸",U,P;function x(K,H){return K[15].profilePicture?ap:lp}let W=x(n),V=W(n);return{c(){e=k("div"),t=k("button"),s=k("div"),V.c(),r=z(),i=k("div"),l=z(),a=k("div"),o=k("div"),f=J(u),p=z(),h=k("div"),_=J("#"),T=J(g),C=z(),I=k("div"),v=k("button"),m=J(w),A=z(),E=k("button"),D=J(R),O=z(),L=k("button"),L.textContent=B,this.h()},l(K){e=y(K,"DIV",{class:!0});var H=N(e);t=y(H,"BUTTON",{class:!0});var Y=N(t);s=y(Y,"DIV",{class:!0});var X=N(s);V.l(X),r=M(X),i=y(X,"DIV",{class:!0}),N(i).forEach(b),X.forEach(b),l=M(Y),a=y(Y,"DIV",{class:!0});var ne=N(a);o=y(ne,"DIV",{class:!0});var de=N(o);f=Z(de,u),de.forEach(b),p=M(ne),h=y(ne,"DIV",{class:!0});var te=N(h);_=Z(te,"#"),T=Z(te,g),te.forEach(b),ne.forEach(b),Y.forEach(b),C=M(H),I=y(H,"DIV",{class:!0});var ce=N(I);v=y(ce,"BUTTON",{class:!0,title:!0});var ie=N(v);m=Z(ie,w),ie.forEach(b),A=M(ce),E=y(ce,"BUTTON",{class:!0,title:!0});var se=N(E);D=Z(se,R),se.forEach(b),O=M(ce),L=y(ce,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(L)!=="svelte-18txcln"&&(L.textContent=B),ce.forEach(b),H.forEach(b),this.h()},h(){d(i,"class","status-indicator svelte-yyh4lc"),ge(i,"online",n[15].status==="active"),ge(i,"away",n[15].status==="away"),ge(i,"busy",n[15].status==="busy"),d(s,"class","avatar-container svelte-yyh4lc"),d(o,"class","username svelte-yyh4lc"),d(h,"class","user-tag svelte-yyh4lc"),d(a,"class","user-details svelte-yyh4lc"),d(t,"class","profile-info svelte-yyh4lc"),d(v,"class","control-btn svelte-yyh4lc"),d(v,"title",S=n[4]?"Unmute":"Mute"),ge(v,"active",n[4]),d(E,"class","control-btn svelte-yyh4lc"),d(E,"title",F=n[5]?"Undeafen":"Deafen"),ge(E,"active",n[5]),d(L,"class","control-btn svelte-yyh4lc"),d(L,"title","User Settings"),d(I,"class","profile-controls svelte-yyh4lc"),d(e,"class","profile-card svelte-yyh4lc")},m(K,H){q(K,e,H),c(e,t),c(t,s),V.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,f),c(a,p),c(a,h),c(h,_),c(h,T),c(e,C),c(e,I),c(I,v),c(v,m),c(I,A),c(I,E),c(E,D),c(I,O),c(I,L),U||(P=[G(t,"click",n[21]),G(v,"click",n[36]),G(E,"click",n[37]),G(L,"click",n[38])],U=!0)},p(K,H){W===(W=x(K))&&V?V.p(K,H):(V.d(1),V=W(K),V&&(V.c(),V.m(s,r))),H[0]&32768&&ge(i,"online",K[15].status==="active"),H[0]&32768&&ge(i,"away",K[15].status==="away"),H[0]&32768&&ge(i,"busy",K[15].status==="busy"),H[0]&32768&&u!==(u=K[15].username+"")&&re(f,u),H[0]&32768&&g!==(g=K[15].id.slice(0,4)+"")&&re(T,g),H[0]&16&&w!==(w=K[4]?"ðŸ”‡":"ðŸŽ¤")&&re(m,w),H[0]&16&&S!==(S=K[4]?"Unmute":"Mute")&&d(v,"title",S),H[0]&16&&ge(v,"active",K[4]),H[0]&32&&R!==(R=K[5]?"ðŸ”‡":"ðŸŽ§")&&re(D,R),H[0]&32&&F!==(F=K[5]?"Undeafen":"Deafen")&&d(E,"title",F),H[0]&32&&ge(E,"active",K[5])},d(K){K&&b(e),V.d(),U=!1,Ae(P)}}}function lp(n){let e,t=n[15].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","avatar-placeholder svelte-yyh4lc"),Te(e,"background-color",n[15].color)},m(r,i){q(r,e,i),c(e,s)},p(r,i){i[0]&32768&&t!==(t=r[15].username.charAt(0).toUpperCase()+"")&&re(s,t),i[0]&32768&&Te(e,"background-color",r[15].color)},d(r){r&&b(e)}}}function ap(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[15].profilePicture)||d(e,"src",t),d(e,"alt",s=n[15].username),d(e,"class","avatar svelte-yyh4lc")},m(r,i){q(r,e,i)},p(r,i){i[0]&32768&&!Ue(e.src,t=r[15].profilePicture)&&d(e,"src",t),i[0]&32768&&s!==(s=r[15].username)&&d(e,"alt",s)},d(r){r&&b(e)}}}function op(n){let e,t,s='<div class="logo svelte-yyh4lc"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-yyh4lc"/></div>',r,i,l,a="Text Channels",o,u,f,p="ðŸ“º",h,_,g="+",T,C,I,v=[],w=new Map,m,S,A,E,R,D,F,O,L,B,U,P,x,W,V,K,H,Y,X=n[2]&&Ca(n),ne=je(n[13]);const de=$=>$[44].id;for(let $=0;$<ne.length;$+=1){let ue=Sa(n,ne,$),_e=de(ue);w.set(_e,v[$]=Da(_e,ue))}let te=n[12].length>0&&Ra(n),ce=n[11].length>0&&Pa(n),ie=n[15]&&Ma(n);function se($){n[39]($)}let fe={};n[3]!==void 0&&(fe.isOpen=n[3]),R=new ep({props:fe}),Je.push(()=>Mt(R,"isOpen",se)),O=new Cn({props:{isOpen:n[6],title:"Delete Channel",message:"Delete channel #"+n[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:n[19],onCancel:n[40]}});function we($){n[41]($)}let le={channelId:n[9]};n[8]!==void 0&&(le.isOpen=n[8]),B=new ip({props:le}),Je.push(()=>Mt(B,"isOpen",we));function xe($){n[42]($)}function Se($){n[43]($)}let ae={isOwnProfile:!0};return n[10]!==void 0&&(ae.isOpen=n[10]),n[15]!==void 0&&(ae.user=n[15]),x=new Jr({props:ae}),Je.push(()=>Mt(x,"isOpen",xe)),Je.push(()=>Mt(x,"user",Se)),{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=z(),i=k("div"),l=k("h3"),l.textContent=a,o=z(),u=k("div"),f=k("button"),f.textContent=p,h=z(),_=k("button"),_.textContent=g,T=z(),X&&X.c(),C=z(),I=k("div");for(let $=0;$<v.length;$+=1)v[$].c();m=z(),te&&te.c(),S=z(),ce&&ce.c(),A=z(),ie&&ie.c(),E=z(),Ye(R.$$.fragment),F=z(),Ye(O.$$.fragment),L=z(),Ye(B.$$.fragment),P=z(),Ye(x.$$.fragment),this.h()},l($){e=y($,"DIV",{class:!0});var ue=N(e);t=y(ue,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18mdtge"&&(t.innerHTML=s),r=M(ue),i=y(ue,"DIV",{class:!0});var _e=N(i);l=y(_e,"H3",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-cahn79"&&(l.textContent=a),o=M(_e),u=y(_e,"DIV",{class:!0});var ye=N(u);f=y(ye,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(f)!=="svelte-5el016"&&(f.textContent=p),h=M(ye),_=y(ye,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(_)!=="svelte-ou792o"&&(_.textContent=g),ye.forEach(b),_e.forEach(b),T=M(ue),X&&X.l(ue),C=M(ue),I=y(ue,"DIV",{class:!0});var Ee=N(I);for(let ze=0;ze<v.length;ze+=1)v[ze].l(Ee);m=M(Ee),te&&te.l(Ee),S=M(Ee),ce&&ce.l(Ee),Ee.forEach(b),A=M(ue),ie&&ie.l(ue),ue.forEach(b),E=M($),We(R.$$.fragment,$),F=M($),We(O.$$.fragment,$),L=M($),We(B.$$.fragment,$),P=M($),We(x.$$.fragment,$),this.h()},h(){d(t,"class","top-section svelte-yyh4lc"),d(l,"class","svelte-yyh4lc"),d(f,"class","screen-share-icon-btn svelte-yyh4lc"),d(f,"title","Screen Share"),ge(f,"active",n[0]==="screen"),d(_,"class","add-btn svelte-yyh4lc"),d(_,"title","Create channel"),d(u,"class","header-buttons svelte-yyh4lc"),d(i,"class","sidebar-header svelte-yyh4lc"),d(I,"class","channel-list svelte-yyh4lc"),d(e,"class","channel-sidebar svelte-yyh4lc")},m($,ue){q($,e,ue),c(e,t),c(e,r),c(e,i),c(i,l),c(i,o),c(i,u),c(u,f),c(u,h),c(u,_),c(e,T),X&&X.m(e,null),c(e,C),c(e,I);for(let _e=0;_e<v.length;_e+=1)v[_e]&&v[_e].m(I,null);c(I,m),te&&te.m(I,null),c(I,S),ce&&ce.m(I,null),c(e,A),ie&&ie.m(e,null),q($,E,ue),Ge(R,$,ue),q($,F,ue),Ge(O,$,ue),q($,L,ue),Ge(B,$,ue),q($,P,ue),Ge(x,$,ue),K=!0,H||(Y=[G(f,"click",n[23]),G(_,"click",n[24])],H=!0)},p($,ue){(!K||ue[0]&1)&&ge(f,"active",$[0]==="screen"),$[2]?X?X.p($,ue):(X=Ca($),X.c(),X.m(e,C)):X&&(X.d(1),X=null),ue[0]&1400832&&(ne=je($[13]),v=Qt(v,ue,de,1,$,ne,w,I,Jt,Da,m,Sa)),$[12].length>0?te?te.p($,ue):(te=Ra($),te.c(),te.m(I,S)):te&&(te.d(1),te=null),$[11].length>0?ce?ce.p($,ue):(ce=Pa($),ce.c(),ce.m(I,null)):ce&&(ce.d(1),ce=null),$[15]?ie?ie.p($,ue):(ie=Ma($),ie.c(),ie.m(e,null)):ie&&(ie.d(1),ie=null);const _e={};!D&&ue[0]&8&&(D=!0,_e.isOpen=$[3],Ot(()=>D=!1)),R.$set(_e);const ye={};ue[0]&64&&(ye.isOpen=$[6]),ue[0]&128&&(ye.message="Delete channel #"+$[7]+"? This action cannot be undone."),ue[0]&64&&(ye.onCancel=$[40]),O.$set(ye);const Ee={};ue[0]&512&&(Ee.channelId=$[9]),!U&&ue[0]&256&&(U=!0,Ee.isOpen=$[8],Ot(()=>U=!1)),B.$set(Ee);const ze={};!W&&ue[0]&1024&&(W=!0,ze.isOpen=$[10],Ot(()=>W=!1)),!V&&ue[0]&32768&&(V=!0,ze.user=$[15],Ot(()=>V=!1)),x.$set(ze)},i($){K||(be(R.$$.fragment,$),be(O.$$.fragment,$),be(B.$$.fragment,$),be(x.$$.fragment,$),K=!0)},o($){Ie(R.$$.fragment,$),Ie(O.$$.fragment,$),Ie(B.$$.fragment,$),Ie(x.$$.fragment,$),K=!1},d($){$&&(b(e),b(E),b(F),b(L),b(P)),X&&X.d();for(let ue=0;ue<v.length;ue+=1)v[ue].d();te&&te.d(),ce&&ce.d(),ie&&ie.d(),He(R,$),He(O,$),He(B,$),He(x,$),H=!1,Ae(Y)}}}function cp(n,e,t){let s,r,i,l,a,o;Oe(n,dn,le=>t(22,l=le)),Oe(n,Rn,le=>t(14,a=le)),Oe(n,ln,le=>t(15,o=le));let{activeView:u="chat"}=e,f="",p=!1,h=!1,_=!1,g=!1,T=!1,C="",I=!1,v="",w=!1;function m(le){Rf(le)}function S(){f.trim()&&(Nf(f.trim()),t(1,f=""),t(2,p=!1))}function A(le){t(7,C=le),t(6,T=!0)}function E(){Pf(C),t(6,T=!1)}function R(le){t(9,v=le),t(8,I=!0)}function D(){t(10,w=!0)}const F=()=>t(0,u="screen"),O=()=>t(2,p=!p);function L(){f=this.value,t(1,f)}const B=le=>le.key==="Enter"&&S(),U=le=>m(le.id),P=le=>R(le.id),x=le=>A(le.id),W=le=>m(le.id),V=le=>R(le.id),K=le=>A(le.id),H=le=>m(le.id),Y=le=>R(le.id),X=le=>A(le.id),ne=()=>t(4,_=!_),de=()=>t(5,g=!g),te=()=>t(3,h=!0);function ce(le){h=le,t(3,h)}const ie=()=>t(6,T=!1);function se(le){I=le,t(8,I)}function fe(le){w=le,t(10,w)}function we(le){o=le,ln.set(o)}return n.$$set=le=>{"activeView"in le&&t(0,u=le.activeView)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(13,s=l.filter(le=>!le.type||le.type==="public")),n.$$.dirty[0]&4194304&&t(12,r=l.filter(le=>le.type==="dm")),n.$$.dirty[0]&4194304&&t(11,i=l.filter(le=>le.type==="group")),n.$$.dirty[0]&1&&u==="chat"&&zf()},[u,f,p,h,_,g,T,C,I,v,w,i,r,s,a,o,m,S,A,E,R,D,l,F,O,L,B,U,P,x,W,V,K,H,Y,X,ne,de,te,ce,ie,se,fe,we]}class up extends ut{constructor(e){super(),ft(this,e,cp,op,ct,{activeView:0},null,[-1,-1])}}const sc=_t([]),ei=_t(null),Fs=_t(!1),os=_t(!1),cs=_t(!1),za=new Map;let Vt=null;async function Fa(n,e,t=!1){try{return Vt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Fs.set(!0),os.set(!1),cs.set(!t),n.emit("call-initiate",{targetUserId:e,isVideoCall:t}),Vt}catch(s){throw console.error("Error starting call:",s),s}}async function fp(n,e,t=!1){try{return Vt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Fs.set(!0),os.set(!1),cs.set(!t),n.emit("call-answer",{callerId:e,isVideoCall:t}),ei.set(null),Vt}catch(s){throw console.error("Error answering call:",s),s}}function dp(n,e){n.emit("call-reject",{callerId:e}),ei.set(null)}function hp(n){Vt&&(Vt.getTracks().forEach(e=>e.stop()),Vt=null),Fs.set(!1),os.set(!1),cs.set(!1),n.emit("call-end"),za.forEach(e=>e.close()),za.clear(),sc.set([])}function pp(){if(Vt){const n=Vt.getAudioTracks()[0];n&&(n.enabled=!n.enabled,os.set(!n.enabled))}}function gp(){if(Vt){const n=Vt.getVideoTracks()[0];n&&(n.enabled=!n.enabled,cs.set(!n.enabled))}}function mp(){return Vt}const{window:vp}=Mr;function _p(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","avatar-placeholder svelte-1jgoxw0"),Te(e,"background-color",n[0].color)},m(r,i){q(r,e,i),c(e,s)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&re(s,t),i&1&&Te(e,"background-color",r[0].color)},d(r){r&&b(e)}}}function bp(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[0].profilePicture)||d(e,"src",t),d(e,"alt",s=n[0].username),d(e,"class","avatar svelte-1jgoxw0")},m(r,i){q(r,e,i)},p(r,i){i&1&&!Ue(e.src,t=r[0].profilePicture)&&d(e,"src",t),i&1&&s!==(s=r[0].username)&&d(e,"alt",s)},d(r){r&&b(e)}}}function La(n){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',s,r,i='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',l,a,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,f,p,h;return{c(){e=k("button"),e.innerHTML=t,s=z(),r=k("button"),r.innerHTML=i,l=z(),a=k("button"),a.innerHTML=o,u=z(),f=k("div"),this.h()},l(_){e=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),s=M(_),r=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1om8irr"&&(r.innerHTML=i),l=M(_),a=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-124vjww"&&(a.innerHTML=o),u=M(_),f=y(_,"DIV",{class:!0}),N(f).forEach(b),this.h()},h(){d(e,"class","menu-item svelte-1jgoxw0"),d(r,"class","menu-item svelte-1jgoxw0"),d(a,"class","menu-item svelte-1jgoxw0"),d(f,"class","menu-divider svelte-1jgoxw0")},m(_,g){q(_,e,g),q(_,s,g),q(_,r,g),q(_,l,g),q(_,a,g),q(_,u,g),q(_,f,g),p||(h=[G(e,"click",n[8]),G(r,"click",n[6]),G(a,"click",n[7])],p=!0)},p:De,d(_){_&&(b(e),b(s),b(r),b(l),b(a),b(u),b(f)),p=!1,Ae(h)}}}function yp(n){let e,t,s,r,i,l=n[0].username+"",a,o,u,f,p,h,_='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',g,T;function C(m,S){return m[0].profilePicture?bp:_p}let I=C(n),v=I(n),w=!n[1]&&La(n);return{c(){e=k("div"),t=k("div"),s=k("div"),v.c(),r=z(),i=k("span"),a=J(l),o=z(),u=k("div"),f=z(),w&&w.c(),p=z(),h=k("button"),h.innerHTML=_,this.h()},l(m){e=y(m,"DIV",{class:!0,style:!0});var S=N(e);t=y(S,"DIV",{class:!0});var A=N(t);s=y(A,"DIV",{class:!0});var E=N(s);v.l(E),r=M(E),i=y(E,"SPAN",{class:!0});var R=N(i);a=Z(R,l),R.forEach(b),E.forEach(b),A.forEach(b),o=M(S),u=y(S,"DIV",{class:!0}),N(u).forEach(b),f=M(S),w&&w.l(S),p=M(S),h=y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1rwejc6"&&(h.innerHTML=_),S.forEach(b),this.h()},h(){d(i,"class","username svelte-1jgoxw0"),d(s,"class","user-info svelte-1jgoxw0"),d(t,"class","menu-header svelte-1jgoxw0"),d(u,"class","menu-divider svelte-1jgoxw0"),d(h,"class","menu-item svelte-1jgoxw0"),d(e,"class","context-menu svelte-1jgoxw0"),Te(e,"left",n[4]+"px"),Te(e,"top",n[3]+"px")},m(m,S){q(m,e,S),c(e,t),c(t,s),v.m(s,null),c(s,r),c(s,i),c(i,a),c(e,o),c(e,u),c(e,f),w&&w.m(e,null),c(e,p),c(e,h),n[13](e),g||(T=[G(vp,"click",n[5]),G(h,"click",n[9]),G(e,"click",ot(n[12]))],g=!0)},p(m,[S]){I===(I=C(m))&&v?v.p(m,S):(v.d(1),v=I(m),v&&(v.c(),v.m(s,r))),S&1&&l!==(l=m[0].username+"")&&re(a,l),m[1]?w&&(w.d(1),w=null):w?w.p(m,S):(w=La(m),w.c(),w.m(e,p)),S&16&&Te(e,"left",m[4]+"px"),S&8&&Te(e,"top",m[3]+"px")},i:De,o:De,d(m){m&&b(e),v.d(),w&&w.d(),n[13](null),g=!1,Ae(T)}}}function kp(n,e,t){let s,r,{user:i}=e,{x:l}=e,{y:a}=e,{isOwnProfile:o}=e;const u=Or();let f;function p(v){u("close")}function h(){u("voiceCall"),u("close")}function _(){u("videoCall"),u("close")}function g(){u("openDM"),u("close")}function T(){u("viewProfile"),u("close")}function C(v){Zt.call(this,n,v)}function I(v){Je[v?"unshift":"push"](()=>{f=v,t(2,f)})}return n.$$set=v=>{"user"in v&&t(0,i=v.user),"x"in v&&t(10,l=v.x),"y"in v&&t(11,a=v.y),"isOwnProfile"in v&&t(1,o=v.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&1028&&t(4,s=(()=>{if(!f)return l;const v=f.offsetWidth||200,w=window.innerWidth;return l+v>w?l-v:l})()),n.$$.dirty&2052&&t(3,r=(()=>{if(!f)return a;const v=f.offsetHeight||300,w=window.innerHeight;return a+v>w?a-v:a})())},[i,o,f,r,s,p,h,_,g,T,l,a,C,I]}class wp extends ut{constructor(e){super(),ft(this,e,kp,yp,ct,{user:0,x:10,y:11,isOwnProfile:1})}}function Ba(n,e,t){const s=n.slice();return s[9]=e[t],s}function Ua(n){let e,t,s,r,i,l="Start a Direct Message",a,o,u="Ã—",f,p,h,_,g,T,C;function I(m,S){return m[2].length===0?Tp:Ep}let v=I(n),w=v(n);return{c(){e=k("div"),t=z(),s=k("div"),r=k("div"),i=k("h2"),i.textContent=l,a=z(),o=k("button"),o.textContent=u,f=z(),p=k("div"),h=k("input"),_=z(),g=k("div"),w.c(),this.h()},l(m){e=y(m,"DIV",{class:!0}),N(e).forEach(b),t=M(m),s=y(m,"DIV",{class:!0});var S=N(s);r=y(S,"DIV",{class:!0});var A=N(r);i=y(A,"H2",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-14qt3ql"&&(i.textContent=l),a=M(A),o=y(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-mm165g"&&(o.textContent=u),A.forEach(b),f=M(S),p=y(S,"DIV",{class:!0});var E=N(p);h=y(E,"INPUT",{type:!0,placeholder:!0,class:!0}),E.forEach(b),_=M(S),g=y(S,"DIV",{class:!0});var R=N(g);w.l(R),R.forEach(b),S.forEach(b),this.h()},h(){d(e,"class","modal-overlay svelte-1wgtlqt"),d(i,"class","svelte-1wgtlqt"),d(o,"class","close-btn svelte-1wgtlqt"),d(r,"class","modal-header svelte-1wgtlqt"),d(h,"type","text"),d(h,"placeholder","Search users..."),h.autofocus=!0,d(h,"class","svelte-1wgtlqt"),d(p,"class","search-container svelte-1wgtlqt"),d(g,"class","user-list svelte-1wgtlqt"),d(s,"class","modal svelte-1wgtlqt")},m(m,S){q(m,e,S),q(m,t,S),q(m,s,S),c(s,r),c(r,i),c(r,a),c(r,o),c(s,f),c(s,p),c(p,h),$e(h,n[1]),c(s,_),c(s,g),w.m(g,null),h.focus(),T||(C=[G(e,"click",n[4]),G(o,"click",n[4]),G(h,"input",n[7])],T=!0)},p(m,S){S&2&&h.value!==m[1]&&$e(h,m[1]),v===(v=I(m))&&w?w.p(m,S):(w.d(1),w=v(m),w&&(w.c(),w.m(g,null)))},d(m){m&&(b(e),b(t),b(s)),w.d(),T=!1,Ae(C)}}}function Ep(n){let e=[],t=new Map,s,r=je(n[2]);const i=l=>l[9].id;for(let l=0;l<r.length;l+=1){let a=Ba(n,r,l),o=i(a);t.set(o,e[l]=xa(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Re()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Re()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);q(l,s,a)},p(l,a){a&12&&(r=je(l[2]),e=Qt(e,a,i,1,l,r,t,s.parentNode,Jt,xa,s,Ba))},d(l){l&&b(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function Tp(n){let e,t="No users found";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){d(e,"class","no-users svelte-1wgtlqt")},m(s,r){q(s,e,r)},p:De,d(s){s&&b(e)}}}function Ap(n){let e,t=n[9].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","user-avatar-placeholder svelte-1wgtlqt"),Te(e,"background-color",n[9].color)},m(r,i){q(r,e,i),c(e,s)},p(r,i){i&4&&t!==(t=r[9].username.charAt(0).toUpperCase()+"")&&re(s,t),i&4&&Te(e,"background-color",r[9].color)},d(r){r&&b(e)}}}function Sp(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[9].profilePicture)||d(e,"src",t),d(e,"alt",s=n[9].username),d(e,"class","user-avatar svelte-1wgtlqt")},m(r,i){q(r,e,i)},p(r,i){i&4&&!Ue(e.src,t=r[9].profilePicture)&&d(e,"src",t),i&4&&s!==(s=r[9].username)&&d(e,"alt",s)},d(r){r&&b(e)}}}function xa(n,e){let t,s,r,i,l,a,o,u=e[9].username+"",f,p,h,_=e[9].status+"",g,T,C,I;function v(A,E){return A[9].profilePicture?Sp:Ap}let w=v(e),m=w(e);function S(){return e[8](e[9])}return{key:n,first:null,c(){t=k("button"),s=k("div"),m.c(),r=z(),i=k("div"),l=z(),a=k("div"),o=k("div"),f=J(u),p=z(),h=k("div"),g=J(_),T=z(),this.h()},l(A){t=y(A,"BUTTON",{class:!0});var E=N(t);s=y(E,"DIV",{class:!0});var R=N(s);m.l(R),r=M(R),i=y(R,"DIV",{class:!0,style:!0}),N(i).forEach(b),R.forEach(b),l=M(E),a=y(E,"DIV",{class:!0});var D=N(a);o=y(D,"DIV",{class:!0});var F=N(o);f=Z(F,u),F.forEach(b),p=M(D),h=y(D,"DIV",{class:!0});var O=N(h);g=Z(O,_),O.forEach(b),D.forEach(b),T=M(E),E.forEach(b),this.h()},h(){d(i,"class","status-indicator svelte-1wgtlqt"),Te(i,"background-color",ja(e[9].status)),d(s,"class","user-avatar-container svelte-1wgtlqt"),d(o,"class","username svelte-1wgtlqt"),d(h,"class","status-text svelte-1wgtlqt"),d(a,"class","user-info svelte-1wgtlqt"),d(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(A,E){q(A,t,E),c(t,s),m.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,f),c(a,p),c(a,h),c(h,g),c(t,T),C||(I=G(t,"click",S),C=!0)},p(A,E){e=A,w===(w=v(e))&&m?m.p(e,E):(m.d(1),m=w(e),m&&(m.c(),m.m(s,r))),E&4&&Te(i,"background-color",ja(e[9].status)),E&4&&u!==(u=e[9].username+"")&&re(f,u),E&4&&_!==(_=e[9].status+"")&&re(g,_)},d(A){A&&b(t),m.d(),C=!1,I()}}}function Cp(n){let e,t=n[0]&&Ua(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=Ua(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(s){s&&b(e),t&&t.d(s)}}}function ja(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Ip(n,e,t){let s,r,i;Oe(n,ln,h=>t(5,r=h)),Oe(n,jt,h=>t(6,i=h));let{isOpen:l=!1}=e,a="";function o(h){Yo(h.id),u()}function u(){t(0,l=!1),t(1,a="")}function f(){a=this.value,t(1,a)}const p=h=>o(h);return n.$$set=h=>{"isOpen"in h&&t(0,l=h.isOpen)},n.$$.update=()=>{n.$$.dirty&98&&t(2,s=i.filter(h=>h.id===r?.id?!1:a?h.username.toLowerCase().includes(a.toLowerCase()):!0))},[l,a,s,o,u,r,i,f,p]}class Dp extends ut{constructor(e){super(),ft(this,e,Ip,Cp,ct,{isOpen:0})}}function Va(n,e,t){const s=n.slice();return s[28]=e[t],s}function Rp(n){let e,t=n[28].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=N(e);s=Z(i,t),i.forEach(b),this.h()},h(){d(e,"class","user-avatar-placeholder svelte-1dxxmv3"),Te(e,"background-color",n[28].color)},m(r,i){q(r,e,i),c(e,s)},p(r,i){i&512&&t!==(t=r[28].username.charAt(0).toUpperCase()+"")&&re(s,t),i&512&&Te(e,"background-color",r[28].color)},d(r){r&&b(e)}}}function Np(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=n[28].profilePicture)||d(e,"src",t),d(e,"alt",s=n[28].username),d(e,"class","user-avatar svelte-1dxxmv3")},m(r,i){q(r,e,i)},p(r,i){i&512&&!Ue(e.src,t=r[28].profilePicture)&&d(e,"src",t),i&512&&s!==(s=r[28].username)&&d(e,"alt",s)},d(r){r&&b(e)}}}function qa(n){let e,t="(you)";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=y(s,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){d(e,"class","you-badge svelte-1dxxmv3")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function Ha(n){let e,t,s="ðŸ“ž",r,i,l="ðŸ“¹",a,o;function u(...p){return n[19](n[28],...p)}function f(...p){return n[20](n[28],...p)}return{c(){e=k("div"),t=k("button"),t.textContent=s,r=z(),i=k("button"),i.textContent=l,this.h()},l(p){e=y(p,"DIV",{class:!0});var h=N(e);t=y(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(t)!=="svelte-jmuv4z"&&(t.textContent=s),r=M(h),i=y(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1whn4df"&&(i.textContent=l),h.forEach(b),this.h()},h(){d(t,"class","call-btn voice-call svelte-1dxxmv3"),d(t,"title","Voice call"),d(i,"class","call-btn video-call svelte-1dxxmv3"),d(i,"title","Video call"),d(e,"class","call-buttons svelte-1dxxmv3")},m(p,h){q(p,e,h),c(e,t),c(e,r),c(e,i),a||(o=[G(t,"click",u),G(i,"click",f)],a=!0)},p(p,h){n=p},d(p){p&&b(e),a=!1,Ae(o)}}}function Ga(n,e){let t,s,r,i,l,a=e[28].username+"",o,u,f,p,h,_,g,T=e[28].status+"",C,I,v,w,m;function S(L,B){return L[28].profilePicture?Np:Rp}let A=S(e),E=A(e),R=e[28].id===e[8]?.id&&qa();function D(){return e[17](e[28])}function F(...L){return e[18](e[28],...L)}let O=e[28].id!==e[8]?.id&&Ha(e);return{key:n,first:null,c(){t=k("div"),s=k("button"),E.c(),r=z(),i=k("div"),l=k("span"),o=J(a),u=z(),R&&R.c(),f=z(),p=k("div"),h=k("span"),_=z(),g=k("span"),C=J(T),I=z(),O&&O.c(),v=z(),this.h()},l(L){t=y(L,"DIV",{class:!0});var B=N(t);s=y(B,"BUTTON",{class:!0});var U=N(s);E.l(U),r=M(U),i=y(U,"DIV",{class:!0});var P=N(i);l=y(P,"SPAN",{class:!0});var x=N(l);o=Z(x,a),u=M(x),R&&R.l(x),x.forEach(b),f=M(P),p=y(P,"DIV",{class:!0});var W=N(p);h=y(W,"SPAN",{class:!0,style:!0}),N(h).forEach(b),_=M(W),g=y(W,"SPAN",{class:!0});var V=N(g);C=Z(V,T),V.forEach(b),W.forEach(b),P.forEach(b),U.forEach(b),I=M(B),O&&O.l(B),v=M(B),B.forEach(b),this.h()},h(){d(l,"class","user-name svelte-1dxxmv3"),d(h,"class","status-dot svelte-1dxxmv3"),Te(h,"background-color",Ya(e[28].status)),d(g,"class","status-text svelte-1dxxmv3"),d(p,"class","user-status svelte-1dxxmv3"),d(i,"class","user-info svelte-1dxxmv3"),d(s,"class","user svelte-1dxxmv3"),d(t,"class","user-container svelte-1dxxmv3"),this.first=t},m(L,B){q(L,t,B),c(t,s),E.m(s,null),c(s,r),c(s,i),c(i,l),c(l,o),c(l,u),R&&R.m(l,null),c(i,f),c(i,p),c(p,h),c(p,_),c(p,g),c(g,C),c(t,I),O&&O.m(t,null),c(t,v),w||(m=[G(s,"click",D),G(s,"contextmenu",F)],w=!0)},p(L,B){e=L,A===(A=S(e))&&E?E.p(e,B):(E.d(1),E=A(e),E&&(E.c(),E.m(s,r))),B&512&&a!==(a=e[28].username+"")&&re(o,a),e[28].id===e[8]?.id?R||(R=qa(),R.c(),R.m(l,null)):R&&(R.d(1),R=null),B&512&&Te(h,"background-color",Ya(e[28].status)),B&512&&T!==(T=e[28].status+"")&&re(C,T),e[28].id!==e[8]?.id?O?O.p(e,B):(O=Ha(e),O.c(),O.m(t,v)):O&&(O.d(1),O=null)},d(L){L&&b(t),E.d(),R&&R.d(),O&&O.d(),w=!1,Ae(m)}}}function Wa(n){let e,t;return e=new wp({props:{user:n[5],x:n[6],y:n[7],isOwnProfile:n[5].id===n[8]?.id}}),e.$on("close",n[12]),e.$on("voiceCall",n[23]),e.$on("videoCall",n[24]),e.$on("openDM",n[13]),e.$on("viewProfile",n[25]),{c(){Ye(e.$$.fragment)},l(s){We(e.$$.fragment,s)},m(s,r){Ge(e,s,r),t=!0},p(s,r){const i={};r&32&&(i.user=s[5]),r&64&&(i.x=s[6]),r&128&&(i.y=s[7]),r&288&&(i.isOwnProfile=s[5].id===s[8]?.id),e.$set(i)},i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){He(e,s)}}}function Pp(n){let e,t,s,r,i=n[9].length+"",l,a,o,u,f="ðŸ’¬",p,h,_=[],g=new Map,T,C,I,v,w,m,S,A,E,R,D,F=je(n[9]);const O=V=>V[28].id;for(let V=0;V<F.length;V+=1){let K=Va(n,F,V),H=O(K);g.set(H,_[V]=Ga(H,K))}function L(V){n[21](V)}function B(V){n[22](V)}let U={isOwnProfile:n[2]};n[0]!==void 0&&(U.isOpen=n[0]),n[1]!==void 0&&(U.user=n[1]),C=new Jr({props:U}),Je.push(()=>Mt(C,"isOpen",L)),Je.push(()=>Mt(C,"user",B));let P=n[4]&&n[5]&&Wa(n);function x(V){n[26](V)}let W={};return n[3]!==void 0&&(W.isOpen=n[3]),S=new Dp({props:W}),Je.push(()=>Mt(S,"isOpen",x)),{c(){e=k("aside"),t=k("div"),s=k("h3"),r=J("Online ("),l=J(i),a=J(")"),o=z(),u=k("button"),u.textContent=f,p=z(),h=k("div");for(let V=0;V<_.length;V+=1)_[V].c();T=z(),Ye(C.$$.fragment),w=z(),P&&P.c(),m=z(),Ye(S.$$.fragment),this.h()},l(V){e=y(V,"ASIDE",{class:!0});var K=N(e);t=y(K,"DIV",{class:!0});var H=N(t);s=y(H,"H3",{class:!0});var Y=N(s);r=Z(Y,"Online ("),l=Z(Y,i),a=Z(Y,")"),Y.forEach(b),o=M(H),u=y(H,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1sotr3f"&&(u.textContent=f),H.forEach(b),p=M(K),h=y(K,"DIV",{class:!0});var X=N(h);for(let ne=0;ne<_.length;ne+=1)_[ne].l(X);X.forEach(b),K.forEach(b),T=M(V),We(C.$$.fragment,V),w=M(V),P&&P.l(V),m=M(V),We(S.$$.fragment,V),this.h()},h(){d(s,"class","svelte-1dxxmv3"),d(u,"class","dm-btn svelte-1dxxmv3"),d(u,"title","Start a DM"),d(t,"class","panel-header svelte-1dxxmv3"),d(h,"class","user-list svelte-1dxxmv3"),d(e,"class","user-panel svelte-1dxxmv3")},m(V,K){q(V,e,K),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(e,p),c(e,h);for(let H=0;H<_.length;H+=1)_[H]&&_[H].m(h,null);q(V,T,K),Ge(C,V,K),q(V,w,K),P&&P.m(V,K),q(V,m,K),Ge(S,V,K),E=!0,R||(D=G(u,"click",n[14]),R=!0)},p(V,[K]){(!E||K&512)&&i!==(i=V[9].length+"")&&re(l,i),K&102144&&(F=je(V[9]),_=Qt(_,K,O,1,V,F,g,h,Jt,Ga,null,Va));const H={};K&4&&(H.isOwnProfile=V[2]),!I&&K&1&&(I=!0,H.isOpen=V[0],Ot(()=>I=!1)),!v&&K&2&&(v=!0,H.user=V[1],Ot(()=>v=!1)),C.$set(H),V[4]&&V[5]?P?(P.p(V,K),K&48&&be(P,1)):(P=Wa(V),P.c(),be(P,1),P.m(m.parentNode,m)):P&&(xn(),Ie(P,1,1,()=>{P=null}),jn());const Y={};!A&&K&8&&(A=!0,Y.isOpen=V[3],Ot(()=>A=!1)),S.$set(Y)},i(V){E||(be(C.$$.fragment,V),be(P),be(S.$$.fragment,V),E=!0)},o(V){Ie(C.$$.fragment,V),Ie(P),Ie(S.$$.fragment,V),E=!1},d(V){V&&(b(e),b(T),b(w),b(m));for(let K=0;K<_.length;K+=1)_[K].d();He(C,V),P&&P.d(V),He(S,V),R=!1,D()}}}function Ya(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Op(n,e,t){let s,r,i;Oe(n,qn,P=>t(27,s=P)),Oe(n,ln,P=>t(8,r=P)),Oe(n,jt,P=>t(9,i=P));let l=!1,a=null,o=!1,u=!1,f=!1,p=null,h=0,_=0;function g(P){t(1,a=P),t(2,o=P.id===r?.id),t(0,l=!0)}function T(P,x){P.preventDefault(),P.stopPropagation(),t(5,p=x),t(6,h=P.clientX),t(7,_=P.clientY),t(4,f=!0)}function C(){t(4,f=!1),t(5,p=null)}function I(){p&&Yo(p.id)}function v(){t(3,u=!0)}async function w(P,x){P&&P.stopPropagation();const W=x||p;if(!(!s||!W||W.id===r?.id))try{await Fa(s,W.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function m(P,x){P&&P.stopPropagation();const W=x||p;if(!(!s||!W||W.id===r?.id))try{await Fa(s,W.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const S=P=>g(P),A=(P,x)=>T(x,P),E=(P,x)=>w(x,P),R=(P,x)=>m(x,P);function D(P){l=P,t(0,l)}function F(P){a=P,t(1,a)}const O=()=>w(),L=()=>m(),B=()=>{p&&g(p)};function U(P){u=P,t(3,u)}return[l,a,o,u,f,p,h,_,r,i,g,T,C,I,v,w,m,S,A,E,R,D,F,O,L,B,U]}class Mp extends ut{constructor(e){super(),ft(this,e,Op,Pp,ct,{})}}const zp=_t([]),ti=_t(!1),Ka=new Map;let Un=null;async function Fp(n){try{return Un=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),ti.set(!0),n.emit("start-screen-share"),Un.getVideoTracks()[0].onended=()=>{rc(n)},Un}catch(e){throw console.error("Error starting screen share:",e),e}}function rc(n){Un&&(Un.getTracks().forEach(e=>e.stop()),Un=null),ti.set(!1),n.emit("stop-screen-share"),Ka.forEach(e=>e.close()),Ka.clear()}function Xa(n,e,t){const s=n.slice();return s[12]=e[t],s}function Lp(n){let e,t="Start Sharing",s,r;return{c(){e=k("button"),e.textContent=t},l(i){e=y(i,"BUTTON",{"data-svelte-h":!0}),Q(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,l){q(i,e,l),s||(r=G(e,"click",n[6]),s=!0)},p:De,d(i){i&&b(e),s=!1,r()}}}function Bp(n){let e,t="Stop Sharing",s,r;return{c(){e=k("button"),e.textContent=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){d(e,"class","stop-btn svelte-1oqngqd")},m(i,l){q(i,e,l),s||(r=G(e,"click",n[7]),s=!0)},p:De,d(i){i&&b(e),s=!1,r()}}}function Za(n){let e,t;return{c(){e=k("div"),t=J(n[2]),this.h()},l(s){e=y(s,"DIV",{class:!0});var r=N(e);t=Z(r,n[2]),r.forEach(b),this.h()},h(){d(e,"class","error svelte-1oqngqd")},m(s,r){q(s,e,r),c(e,t)},p(s,r){r&4&&re(t,s[2])},d(s){s&&b(e)}}}function Ja(n){let e,t,s='<span class="badge svelte-1oqngqd">Your Screen</span>',r,i;return{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=z(),i=k("video"),this.h()},l(l){e=y(l,"DIV",{class:!0});var a=N(e);t=y(a,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-16dlolc"&&(t.innerHTML=s),r=M(a),i=y(a,"VIDEO",{class:!0}),N(i).forEach(b),a.forEach(b),this.h()},h(){d(t,"class","screen-header svelte-1oqngqd"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,d(i,"class","svelte-1oqngqd"),d(e,"class","screen-item svelte-1oqngqd")},m(l,a){q(l,e,a),c(e,t),c(e,r),c(e,i),n[9](i)},p:De,d(l){l&&b(e),n[9](null)}}}function Qa(n,e){let t,s,r,i=e[12].username+"",l,a,o,u,f,p,h;return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("span"),l=J(i),a=J("'s Screen"),o=z(),u=k("video"),this.h()},l(_){t=y(_,"DIV",{class:!0});var g=N(t);s=y(g,"DIV",{class:!0});var T=N(s);r=y(T,"SPAN",{class:!0});var C=N(r);l=Z(C,i),a=Z(C,"'s Screen"),C.forEach(b),T.forEach(b),o=M(g),u=y(g,"VIDEO",{class:!0}),N(u).forEach(b),g.forEach(b),this.h()},h(){d(r,"class","username svelte-1oqngqd"),d(s,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,d(u,"class","svelte-1oqngqd"),d(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(_,g){q(_,t,g),c(t,s),c(s,r),c(r,l),c(r,a),c(t,o),c(t,u),p||(h=cc(f=xp.call(null,u,e[12].stream)),p=!0)},p(_,g){e=_,g&16&&i!==(i=e[12].username+"")&&re(l,i),f&&In(f.update)&&g&16&&f.update.call(null,e[12].stream)},d(_){_&&b(t),p=!1,h()}}}function $a(n){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-1oqngqd")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function Up(n){let e,t,s,r,i="â† Back",l,a,o="ðŸ–¥ï¸ Screen Sharing",u,f,p,h,_,g=[],T=new Map,C,I,v;function w(O,L){return O[3]?Bp:Lp}let m=w(n),S=m(n),A=n[2]&&Za(n),E=n[3]&&n[0]&&Ja(n),R=je(n[4]);const D=O=>O[12].userId;for(let O=0;O<R.length;O+=1){let L=Xa(n,R,O),B=D(L);T.set(B,g[O]=Qa(B,L))}let F=!n[3]&&n[4].length===0&&$a();return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("button"),r.textContent=i,l=z(),a=k("h2"),a.textContent=o,u=z(),S.c(),f=z(),A&&A.c(),p=z(),h=k("div"),E&&E.c(),_=z();for(let O=0;O<g.length;O+=1)g[O].c();C=z(),F&&F.c(),this.h()},l(O){e=y(O,"DIV",{class:!0});var L=N(e);t=y(L,"DIV",{class:!0});var B=N(t);s=y(B,"DIV",{class:!0});var U=N(s);r=y(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(r)!=="svelte-ts724a"&&(r.textContent=i),l=M(U),a=y(U,"H2",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1el2fdv"&&(a.textContent=o),U.forEach(b),u=M(B),S.l(B),B.forEach(b),f=M(L),A&&A.l(L),p=M(L),h=y(L,"DIV",{class:!0});var P=N(h);E&&E.l(P),_=M(P);for(let x=0;x<g.length;x+=1)g[x].l(P);C=M(P),F&&F.l(P),P.forEach(b),L.forEach(b),this.h()},h(){d(r,"class","back-btn svelte-1oqngqd"),d(r,"title","Back to chat"),d(a,"class","svelte-1oqngqd"),d(s,"class","header-left svelte-1oqngqd"),d(t,"class","header svelte-1oqngqd"),d(h,"class","screens svelte-1oqngqd"),d(e,"class","screen-share-container svelte-1oqngqd")},m(O,L){q(O,e,L),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),S.m(t,null),c(e,f),A&&A.m(e,null),c(e,p),c(e,h),E&&E.m(h,null),c(h,_);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(h,null);c(h,C),F&&F.m(h,null),I||(v=G(r,"click",n[5]),I=!0)},p(O,[L]){m===(m=w(O))&&S?S.p(O,L):(S.d(1),S=m(O),S&&(S.c(),S.m(t,null))),O[2]?A?A.p(O,L):(A=Za(O),A.c(),A.m(e,p)):A&&(A.d(1),A=null),O[3]&&O[0]?E?E.p(O,L):(E=Ja(O),E.c(),E.m(h,_)):E&&(E.d(1),E=null),L&16&&(R=je(O[4]),g=Qt(g,L,D,1,O,R,T,h,Jt,Qa,C,Xa)),!O[3]&&O[4].length===0?F||(F=$a(),F.c(),F.m(h,null)):F&&(F.d(1),F=null)},i:De,o:De,d(O){O&&b(e),S.d(),A&&A.d(),E&&E.d();for(let L=0;L<g.length;L+=1)g[L].d();F&&F.d(),I=!1,v()}}}function xp(n,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),n.srcObject=e,n.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),n.srcObject=t,n.play().catch(s=>console.error("Error playing updated remote video:",s))}}}function jp(n,e,t){let s,r,i;Oe(n,qn,g=>t(10,s=g)),Oe(n,ti,g=>t(3,r=g)),Oe(n,jt,g=>t(11,g)),Oe(n,zp,g=>t(4,i=g));let{activeView:l="screen"}=e,a=null,o="",u;function f(){t(8,l="chat")}async function p(){try{if(!s)return;t(0,a=await Fp(s)),console.log("Screen share started, stream:",a),console.log("Stream tracks:",a?.getTracks()),console.log("Video tracks:",a?.getVideoTracks()),t(2,o="")}catch(g){t(2,o="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",g)}}function h(){s&&(rc(s),t(0,a=null))}function _(g){Je[g?"unshift":"push"](()=>{u=g,t(1,u),t(0,a)})}return n.$$set=g=>{"activeView"in g&&t(8,l=g.activeView)},n.$$.update=()=>{n.$$.dirty&3&&u&&a&&(console.log("Setting local video srcObject",a),t(1,u.srcObject=a,u),u.play().catch(g=>console.error("Error playing local video:",g)))},[a,u,o,r,i,f,p,h,l,_]}class Vp extends ut{constructor(e){super(),ft(this,e,jp,Up,ct,{activeView:8})}}function eo(n,e,t){const s=n.slice();return s[17]=e[t],s[18]=e,s[19]=t,s}function to(n){let e,t,s,r,i=n[2].username.charAt(0).toUpperCase()+"",l,a,o,u=n[2].username+"",f,p,h,_=n[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,T,C,I,v,w=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,m,S,A=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,E,R;return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("div"),l=J(i),a=z(),o=k("h2"),f=J(u),p=z(),h=k("p"),g=J(_),T=J(" Call"),C=z(),I=k("div"),v=k("button"),v.innerHTML=w,m=z(),S=k("button"),S.innerHTML=A,this.h()},l(D){e=y(D,"DIV",{class:!0});var F=N(e);t=y(F,"DIV",{class:!0});var O=N(t);s=y(O,"DIV",{class:!0});var L=N(s);r=y(L,"DIV",{class:!0});var B=N(r);l=Z(B,i),B.forEach(b),a=M(L),o=y(L,"H2",{class:!0});var U=N(o);f=Z(U,u),U.forEach(b),p=M(L),h=y(L,"P",{class:!0});var P=N(h);g=Z(P,_),T=Z(P," Call"),P.forEach(b),L.forEach(b),C=M(O),I=y(O,"DIV",{class:!0});var x=N(I);v=y(x,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-u3s2jz"&&(v.innerHTML=w),m=M(x),S=y(x,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(S)!=="svelte-om1ns7"&&(S.innerHTML=A),x.forEach(b),O.forEach(b),F.forEach(b),this.h()},h(){d(r,"class","caller-avatar svelte-1mc89jk"),d(o,"class","svelte-1mc89jk"),d(h,"class","call-type svelte-1mc89jk"),d(s,"class","caller-info svelte-1mc89jk"),d(v,"class","answer-btn svelte-1mc89jk"),d(S,"class","reject-btn svelte-1mc89jk"),d(I,"class","call-actions svelte-1mc89jk"),d(t,"class","incoming-call-modal svelte-1mc89jk"),d(e,"class","call-modal-overlay svelte-1mc89jk")},m(D,F){q(D,e,F),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,f),c(s,p),c(s,h),c(h,g),c(h,T),c(t,C),c(t,I),c(I,v),c(I,m),c(I,S),E||(R=[G(v,"click",n[7]),G(S,"click",n[8])],E=!0)},p(D,F){F&4&&i!==(i=D[2].username.charAt(0).toUpperCase()+"")&&re(l,i),F&4&&u!==(u=D[2].username+"")&&re(f,u),F&4&&_!==(_=D[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&re(g,_)},d(D){D&&b(e),E=!1,Ae(R)}}}function no(n){let e,t,s,r,i,l,a,o="You",u,f=[],p=new Map,h,_,g,T,C=n[6]?"ðŸ”‡":"ðŸŽ¤",I,v,w,m,S,A=n[5]?"ðŸ“¹":"ðŸ“·",E,R,D,F,O='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',L,B,U=n[5]&&so(),P=je(n[3]);const x=W=>W[17].userId;for(let W=0;W<P.length;W+=1){let V=eo(n,P,W),K=x(V);p.set(K,f[W]=io(K,V))}return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("video"),i=z(),U&&U.c(),l=z(),a=k("div"),a.textContent=o,u=z();for(let W=0;W<f.length;W+=1)f[W].c();h=z(),_=k("div"),g=k("button"),T=k("span"),I=J(C),w=z(),m=k("button"),S=k("span"),E=J(A),D=z(),F=k("button"),F.innerHTML=O,this.h()},l(W){e=y(W,"DIV",{class:!0});var V=N(e);t=y(V,"DIV",{class:!0});var K=N(t);s=y(K,"DIV",{class:!0});var H=N(s);r=y(H,"VIDEO",{class:!0}),N(r).forEach(b),i=M(H),U&&U.l(H),l=M(H),a=y(H,"DIV",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1l6ztyc"&&(a.textContent=o),H.forEach(b),u=M(K);for(let ce=0;ce<f.length;ce+=1)f[ce].l(K);K.forEach(b),h=M(V),_=y(V,"DIV",{class:!0});var Y=N(_);g=y(Y,"BUTTON",{class:!0,title:!0});var X=N(g);T=y(X,"SPAN",{class:!0});var ne=N(T);I=Z(ne,C),ne.forEach(b),X.forEach(b),w=M(Y),m=y(Y,"BUTTON",{class:!0,title:!0});var de=N(m);S=y(de,"SPAN",{class:!0});var te=N(S);E=Z(te,A),te.forEach(b),de.forEach(b),D=M(Y),F=y(Y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(F)!=="svelte-1rszrze"&&(F.innerHTML=O),Y.forEach(b),V.forEach(b),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,d(r,"class","video-element svelte-1mc89jk"),ge(r,"video-hidden",n[5]),d(a,"class","video-label svelte-1mc89jk"),d(s,"class","video-wrapper local-video svelte-1mc89jk"),d(t,"class","video-grid svelte-1mc89jk"),d(T,"class","control-icon svelte-1mc89jk"),d(g,"class","control-btn svelte-1mc89jk"),d(g,"title",v=n[6]?"Unmute":"Mute"),ge(g,"active",n[6]),d(S,"class","control-icon svelte-1mc89jk"),d(m,"class","control-btn svelte-1mc89jk"),d(m,"title",R=n[5]?"Turn on camera":"Turn off camera"),ge(m,"active",n[5]),d(F,"class","control-btn end-call-btn svelte-1mc89jk"),d(F,"title","End call"),d(_,"class","call-controls svelte-1mc89jk"),d(e,"class","active-call-container svelte-1mc89jk")},m(W,V){q(W,e,V),c(e,t),c(t,s),c(s,r),n[13](r),c(s,i),U&&U.m(s,null),c(s,l),c(s,a),c(t,u);for(let K=0;K<f.length;K+=1)f[K]&&f[K].m(t,null);c(e,h),c(e,_),c(_,g),c(g,T),c(T,I),c(_,w),c(_,m),c(m,S),c(S,E),c(_,D),c(_,F),L||(B=[G(g,"click",n[10]),G(m,"click",n[11]),G(F,"click",n[9])],L=!0)},p(W,V){V&32&&ge(r,"video-hidden",W[5]),W[5]?U||(U=so(),U.c(),U.m(s,l)):U&&(U.d(1),U=null),V&10&&(P=je(W[3]),f=Qt(f,V,x,1,W,P,p,t,Jt,io,null,eo)),V&64&&C!==(C=W[6]?"ðŸ”‡":"ðŸŽ¤")&&re(I,C),V&64&&v!==(v=W[6]?"Unmute":"Mute")&&d(g,"title",v),V&64&&ge(g,"active",W[6]),V&32&&A!==(A=W[5]?"ðŸ“¹":"ðŸ“·")&&re(E,A),V&32&&R!==(R=W[5]?"Turn on camera":"Turn off camera")&&d(m,"title",R),V&32&&ge(m,"active",W[5])},d(W){W&&b(e),n[13](null),U&&U.d();for(let V=0;V<f.length;V+=1)f[V].d();L=!1,Ae(B)}}}function so(n){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=y(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){d(e,"class","video-placeholder svelte-1mc89jk")},m(s,r){q(s,e,r)},d(s){s&&b(e)}}}function ro(n){let e,t,s="ðŸ‘¤",r,i,l=(n[17].username||"User")+"",a;return{c(){e=k("div"),t=k("span"),t.textContent=s,r=z(),i=k("span"),a=J(l),this.h()},l(o){e=y(o,"DIV",{class:!0});var u=N(e);t=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18bpbb5"&&(t.textContent=s),r=M(u),i=y(u,"SPAN",{});var f=N(i);a=Z(f,l),f.forEach(b),u.forEach(b),this.h()},h(){d(t,"class","placeholder-icon svelte-1mc89jk"),d(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){q(o,e,u),c(e,t),c(e,r),c(e,i),c(i,a)},p(o,u){u&8&&l!==(l=(o[17].username||"User")+"")&&re(a,l)},d(o){o&&b(e)}}}function io(n,e){let t,s,r=e[17],i,l,a,o=(e[17].username||"User")+"",u,f;const p=()=>e[14](s,r),h=()=>e[14](null,r);let _=!e[17].isVideoEnabled&&ro(e);return{key:n,first:null,c(){t=k("div"),s=k("video"),i=z(),_&&_.c(),l=z(),a=k("div"),u=J(o),f=z(),this.h()},l(g){t=y(g,"DIV",{class:!0});var T=N(t);s=y(T,"VIDEO",{class:!0}),N(s).forEach(b),i=M(T),_&&_.l(T),l=M(T),a=y(T,"DIV",{class:!0});var C=N(a);u=Z(C,o),C.forEach(b),f=M(T),T.forEach(b),this.h()},h(){s.autoplay=!0,s.playsInline=!0,d(s,"class","video-element svelte-1mc89jk"),ge(s,"video-hidden",!e[17].isVideoEnabled),d(a,"class","video-label svelte-1mc89jk"),d(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(g,T){q(g,t,T),c(t,s),p(),c(t,i),_&&_.m(t,null),c(t,l),c(t,a),c(a,u),c(t,f)},p(g,T){e=g,r!==e[17]&&(h(),r=e[17],p()),T&8&&ge(s,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?_&&(_.d(1),_=null):_?_.p(e,T):(_=ro(e),_.c(),_.m(t,l)),T&8&&o!==(o=(e[17].username||"User")+"")&&re(u,o)},d(g){g&&b(t),h(),_&&_.d()}}}function qp(n){let e,t,s=n[2]&&to(n),r=n[4]&&no(n);return{c(){s&&s.c(),e=z(),r&&r.c(),t=Re()},l(i){s&&s.l(i),e=M(i),r&&r.l(i),t=Re()},m(i,l){s&&s.m(i,l),q(i,e,l),r&&r.m(i,l),q(i,t,l)},p(i,[l]){i[2]?s?s.p(i,l):(s=to(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[4]?r?r.p(i,l):(r=no(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:De,o:De,d(i){i&&(b(e),b(t)),s&&s.d(i),r&&r.d(i)}}}function Hp(n,e,t){let s,r,i,l,a,o;Oe(n,qn,m=>t(15,s=m)),Oe(n,ei,m=>t(2,r=m)),Oe(n,sc,m=>t(3,i=m)),Oe(n,Fs,m=>t(4,l=m)),Oe(n,cs,m=>t(5,a=m)),Oe(n,os,m=>t(6,o=m));let u,f={},p=null;fo(()=>{s&&(s.off("call-incoming"),s.off("call-accepted"),s.off("call-rejected"),s.off("call-ended"),s.off("call-offer"),s.off("call-answer-sdp"),s.off("call-ice-candidate"))});function h(){Co()}async function _(){!r||!s||await fp(s,r.userId,r.isVideoCall)}function g(){!r||!s||dp(s,r.userId)}function T(){s&&hp(s)}function C(){pp()}function I(){gp()}function v(m){Je[m?"unshift":"push"](()=>{u=m,t(0,u),t(4,l)})}function w(m,S){Je[m?"unshift":"push"](()=>{f[S.userId]=m,t(1,f)})}return n.$$.update=()=>{if(n.$$.dirty&4100&&(r?(h(),t(12,p=iu(r.username,r.isVideoCall,()=>_()))):p&&(p.close(),t(12,p=null))),n.$$.dirty&17&&l&&u){const m=mp();m&&t(0,u.srcObject=m,u)}n.$$.dirty&10&&i.length>0&&i.forEach(m=>{const S=f[m.userId];S&&m.stream&&(S.srcObject=m.stream)})},[u,f,r,i,l,a,o,_,g,T,C,I,p,v,w]}class Gp extends ut{constructor(e){super(),ft(this,e,Hp,qp,ct,{})}}const{window:lo}=Mr;function Wp(n){let e,t,s,r,i,l,a,o,u,f,p,h,_,g,T,C,I,v=n[2]?"â†’":"â†",w,m,S,A,E,R,D,F;function O(x){n[13](x)}let L={};n[1]!==void 0&&(L.activeView=n[1]),s=new up({props:L}),Je.push(()=>Mt(s,"activeView",O)),f=new yh({});function B(x){n[14](x)}let U={};n[1]!==void 0&&(U.activeView=n[1]),_=new Vp({props:U}),Je.push(()=>Mt(_,"activeView",B));let P=n[2]&&ao(n);return E=new Gp({}),{c(){e=k("div"),t=k("div"),Ye(s.$$.fragment),i=z(),l=k("div"),a=z(),o=k("div"),u=k("div"),Ye(f.$$.fragment),p=z(),h=k("div"),Ye(_.$$.fragment),T=z(),P&&P.c(),C=z(),I=k("button"),w=J(v),A=z(),Ye(E.$$.fragment),this.h()},l(x){e=y(x,"DIV",{class:!0});var W=N(e);t=y(W,"DIV",{class:!0,style:!0});var V=N(t);We(s.$$.fragment,V),i=M(V),l=y(V,"DIV",{class:!0}),N(l).forEach(b),V.forEach(b),a=M(W),o=y(W,"DIV",{class:!0});var K=N(o);u=y(K,"DIV",{class:!0});var H=N(u);We(f.$$.fragment,H),H.forEach(b),p=M(K),h=y(K,"DIV",{class:!0});var Y=N(h);We(_.$$.fragment,Y),Y.forEach(b),K.forEach(b),T=M(W),P&&P.l(W),C=M(W),I=y(W,"BUTTON",{class:!0,title:!0,style:!0});var X=N(I);w=Z(X,v),X.forEach(b),W.forEach(b),A=M(x),We(E.$$.fragment,x),this.h()},h(){d(l,"class","resize-handle resize-handle-channel svelte-10wao8h"),d(t,"class","channel-sidebar-container svelte-10wao8h"),Te(t,"width",n[3]+"px"),d(u,"class","svelte-10wao8h"),ge(u,"hidden",n[1]!=="chat"),d(h,"class","svelte-10wao8h"),ge(h,"hidden",n[1]!=="screen"),d(o,"class","main-content svelte-10wao8h"),d(I,"class","user-panel-toggle svelte-10wao8h"),d(I,"title",m=n[2]?"Hide user panel":"Show user panel"),d(I,"style",S=n[2]?`right: ${n[4]}px`:"right: 0"),ge(I,"open",n[2]),d(e,"class","app-container svelte-10wao8h"),ge(e,"resizing",n[5]||n[6])},m(x,W){q(x,e,W),c(e,t),Ge(s,t,null),c(t,i),c(t,l),c(e,a),c(e,o),c(o,u),Ge(f,u,null),c(o,p),c(o,h),Ge(_,h,null),c(e,T),P&&P.m(e,null),c(e,C),c(e,I),c(I,w),q(x,A,W),Ge(E,x,W),R=!0,D||(F=[G(l,"mousedown",n[8]),G(I,"click",n[15])],D=!0)},p(x,W){const V={};!r&&W&2&&(r=!0,V.activeView=x[1],Ot(()=>r=!1)),s.$set(V),(!R||W&8)&&Te(t,"width",x[3]+"px"),(!R||W&2)&&ge(u,"hidden",x[1]!=="chat");const K={};!g&&W&2&&(g=!0,K.activeView=x[1],Ot(()=>g=!1)),_.$set(K),(!R||W&2)&&ge(h,"hidden",x[1]!=="screen"),x[2]?P?(P.p(x,W),W&4&&be(P,1)):(P=ao(x),P.c(),be(P,1),P.m(e,C)):P&&(xn(),Ie(P,1,1,()=>{P=null}),jn()),(!R||W&4)&&v!==(v=x[2]?"â†’":"â†")&&re(w,v),(!R||W&4&&m!==(m=x[2]?"Hide user panel":"Show user panel"))&&d(I,"title",m),(!R||W&20&&S!==(S=x[2]?`right: ${x[4]}px`:"right: 0"))&&d(I,"style",S),(!R||W&4)&&ge(I,"open",x[2]),(!R||W&96)&&ge(e,"resizing",x[5]||x[6])},i(x){R||(be(s.$$.fragment,x),be(f.$$.fragment,x),be(_.$$.fragment,x),be(P),be(E.$$.fragment,x),R=!0)},o(x){Ie(s.$$.fragment,x),Ie(f.$$.fragment,x),Ie(_.$$.fragment,x),Ie(P),Ie(E.$$.fragment,x),R=!1},d(x){x&&(b(e),b(A)),He(s),He(f),He(_),P&&P.d(),He(E,x),D=!1,Ae(F)}}}function Yp(n){let e,t;return e=new Wh({}),e.$on("login",n[7]),{c(){Ye(e.$$.fragment)},l(s){We(e.$$.fragment,s)},m(s,r){Ge(e,s,r),t=!0},p:De,i(s){t||(be(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){He(e,s)}}}function ao(n){let e,t,s,r,i,l,a;return r=new Mp({}),{c(){e=k("div"),t=k("div"),s=z(),Ye(r.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0});var u=N(e);t=y(u,"DIV",{class:!0}),N(t).forEach(b),s=M(u),We(r.$$.fragment,u),u.forEach(b),this.h()},h(){d(t,"class","resize-handle resize-handle-user svelte-10wao8h"),d(e,"class","user-panel-container svelte-10wao8h"),Te(e,"width",n[4]+"px")},m(o,u){q(o,e,u),c(e,t),c(e,s),Ge(r,e,null),i=!0,l||(a=G(t,"mousedown",n[9]),l=!0)},p(o,u){(!i||u&16)&&Te(e,"width",o[4]+"px")},i(o){i||(be(r.$$.fragment,o),i=!0)},o(o){Ie(r.$$.fragment,o),i=!1},d(o){o&&b(e),He(r),l=!1,a()}}}function Kp(n){let e,t,s,r,i,l;const a=[Yp,Wp],o=[];function u(f,p){return f[0]?1:0}return e=u(n),t=o[e]=a[e](n),{c(){t.c(),s=Re()},l(f){t.l(f),s=Re()},m(f,p){o[e].m(f,p),q(f,s,p),r=!0,i||(l=[G(lo,"mousemove",n[10]),G(lo,"mouseup",n[11])],i=!0)},p(f,[p]){let h=e;e=u(f),e===h?o[e].p(f,p):(xn(),Ie(o[h],1,1,()=>{o[h]=null}),jn(),t=o[e],t?t.p(f,p):(t=o[e]=a[e](f),t.c()),be(t,1),t.m(s.parentNode,s))},i(f){r||(be(t),r=!0)},o(f){Ie(t),r=!1},d(f){f&&b(s),o[e].d(f),i=!1,Ae(l)}}}function Xp(n,e,t){let{data:s}=e,r="",i=!1,l="chat",a=!1,o=240,u=250,f=!1,p=!1;function h(m){r=m.detail,Df(r),t(0,i=!0)}function _(m){t(5,f=!0),m.preventDefault()}function g(m){t(6,p=!0),m.preventDefault()}function T(m){if(f){const S=m.clientX;S>=180&&S<=400&&t(3,o=S)}else if(p){const S=window.innerWidth-m.clientX;S>=200&&S<=500&&t(4,u=S)}}function C(){t(5,f=!1),t(6,p=!1)}fo(()=>{Mf()});function I(m){l=m,t(1,l)}function v(m){l=m,t(1,l)}const w=()=>t(2,a=!a);return n.$$set=m=>{"data"in m&&t(12,s=m.data)},[i,l,a,o,u,f,p,h,_,g,T,C,s,I,v,w]}class ng extends ut{constructor(e){super(),ft(this,e,Xp,Kp,ct,{data:12})}}export{ng as component};
