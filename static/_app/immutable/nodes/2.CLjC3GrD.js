var ja=Object.defineProperty;var Va=(s,e,t)=>e in s?ja(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Le=(s,e,t)=>Va(s,typeof e!="symbol"?e+"":e,t);import{A as Ae,s as ot,n as Ie,d as m,O as lt,i as j,e as c,P as X,x as d,f as k,h as D,k as P,Q as $,l as y,m as z,R as or,r as rs,p as De,S as Be,b as ne,T as _t,j as K,t as Q,U as ds,y as Ee,o as Re,B as Is,z as et,V as Dn,W as Ft,q as qa,X as Wl,Y as Yl,Z as ve,v as Ha,_ as Ga,$ as Pr,a0 as Xl,I as Wa,a1 as Ya,a2 as Xa,a3 as Zl}from"../chunks/CdCOery0.js";import{a as ke,S as ct,i as ut,f as Lt,d as He,t as Ce,g as xs,c as Ms,m as Ge,e as We,b as Ye}from"../chunks/CqCFC2cg.js";import{w as bt}from"../chunks/BHhKbfRM.js";/* empty css                */const cr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ve(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Kt(s,e){s.d(1),e.delete(s.key)}function Qt(s,e,t,n,r,i,a,l,o,u,f,p){let h=s.length,g=i.length,_=h;const v={};for(;_--;)v[s[_].key]=_;const S=[],I=new Map,w=new Map,E=[];for(_=g;_--;){const T=p(r,i,_),R=t(T);let O=a.get(R);O?E.push(()=>O.p(T,e)):(O=u(R,T),O.c()),I.set(R,S[_]=O),R in v&&w.set(R,Math.abs(_-v[R]))}const b=new Set,A=new Set;function C(T){ke(T,1),T.m(l,f),a.set(T.key,T),f=T.first,g--}for(;h&&g;){const T=S[g-1],R=s[h-1],O=T.key,L=R.key;T===R?(f=T.first,h--,g--):I.has(L)?!a.has(O)||b.has(O)?C(T):A.has(L)?h--:w.get(O)>w.get(L)?(A.add(O),C(T)):(b.add(L),h--):(o(R,a),h--)}for(;h--;){const T=s[h];I.has(T.key)||o(T,a)}for(;g;)C(S[g-1]);return Ae(E),S}const ss=Object.create(null);ss.open="0";ss.close="1";ss.ping="2";ss.pong="3";ss.message="4";ss.upgrade="5";ss.noop="6";const vn=Object.create(null);Object.keys(ss).forEach(s=>{vn[ss[s]]=s});const Kn={type:"error",data:"parser error"},Kl=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ql=typeof ArrayBuffer=="function",Jl=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ur=({type:s,data:e},t,n)=>Kl&&e instanceof Blob?t?n(e):zr(e,n):Ql&&(e instanceof ArrayBuffer||Jl(e))?t?n(e):zr(new Blob([e]),n):n(ss[s]+(e||"")),zr=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Fr(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Ln;function Za(s,e){if(Kl&&s.data instanceof Blob)return s.data.arrayBuffer().then(Fr).then(e);if(Ql&&(s.data instanceof ArrayBuffer||Jl(s.data)))return e(Fr(s.data));ur(s,!1,t=>{Ln||(Ln=new TextEncoder),e(Ln.encode(t))})}const Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Lr.length;s++)Qs[Lr.charCodeAt(s)]=s;const Ka=s=>{let e=s.length*.75,t=s.length,n,r=0,i,a,l,o;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(n=0;n<t;n+=4)i=Qs[s.charCodeAt(n)],a=Qs[s.charCodeAt(n+1)],l=Qs[s.charCodeAt(n+2)],o=Qs[s.charCodeAt(n+3)],f[r++]=i<<2|a>>4,f[r++]=(a&15)<<4|l>>2,f[r++]=(l&3)<<6|o&63;return u},Qa=typeof ArrayBuffer=="function",fr=(s,e)=>{if(typeof s!="string")return{type:"message",data:$l(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Ja(s.substring(1),e)}:vn[t]?s.length>1?{type:vn[t],data:s.substring(1)}:{type:vn[t]}:Kn},Ja=(s,e)=>{if(Qa){const t=Ka(s);return $l(t,e)}else return{base64:!0,data:s}},$l=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},ea="",$a=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((i,a)=>{ur(i,!1,l=>{n[a]=l,++r===t&&e(n.join(ea))})})},eo=(s,e)=>{const t=s.split(ea),n=[];for(let r=0;r<t.length;r++){const i=fr(t[r],e);if(n.push(i),i.type==="error")break}return n};function to(){return new TransformStream({transform(s,e){Za(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let xn;function on(s){return s.reduce((e,t)=>e+t.length,0)}function cn(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function so(s,e){xn||(xn=new TextDecoder);const t=[];let n=0,r=-1,i=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(n===0){if(on(t)<1)break;const o=cn(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(on(t)<2)break;const o=cn(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),n=3}else if(n===2){if(on(t)<8)break;const o=cn(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(Kn);break}r=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(on(t)<r)break;const o=cn(t,r);l.enqueue(fr(i?o:xn.decode(o),e)),n=0}if(r===0||r>s){l.enqueue(Kn);break}}}})}const ta=4;function at(s){if(s)return no(s)}function no(s){for(var e in at.prototype)s[e]=at.prototype[e];return s}at.prototype.on=at.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};at.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};at.prototype.off=at.prototype.removeListener=at.prototype.removeAllListeners=at.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+s],this};at.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};at.prototype.emitReserved=at.prototype.emit;at.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};at.prototype.hasListeners=function(s){return!!this.listeners(s).length};const On=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),jt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ro="arraybuffer";function sa(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const io=jt.setTimeout,lo=jt.clearTimeout;function Nn(s,e){e.useNativeTimers?(s.setTimeoutFn=io.bind(jt),s.clearTimeoutFn=lo.bind(jt)):(s.setTimeoutFn=jt.setTimeout.bind(jt),s.clearTimeoutFn=jt.clearTimeout.bind(jt))}const ao=1.33;function oo(s){return typeof s=="string"?co(s):Math.ceil((s.byteLength||s.size)*ao)}function co(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function na(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function uo(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function fo(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class ho extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class dr extends at{constructor(e){super(),this.writable=!1,Nn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new ho(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=fr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=uo(e);return t.length?"?"+t:""}}class po extends dr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};eo(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,$a(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=na()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let ra=!1;try{ra=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const go=ra;function mo(){}class vo extends po{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class ts extends at{constructor(e,t,n){super(),this.createRequest=e,Nn(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=sa(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=ts.requestsCount++,ts.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mo,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ts.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ts.requestsCount=0;ts.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xr);else if(typeof addEventListener=="function"){const s="onpagehide"in jt?"pagehide":"unload";addEventListener(s,xr,!1)}}function xr(){for(let s in ts.requests)ts.requests.hasOwnProperty(s)&&ts.requests[s].abort()}const _o=function(){const s=ia({xdomain:!1});return s&&s.responseType!==null}();class bo extends vo{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=_o&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ts(ia,this.uri(),e)}}function ia(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||go))return new XMLHttpRequest}catch{}if(!e)try{return new jt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const la=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ko extends dr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=la?{}:sa(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;ur(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}r&&On(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=na()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Mn=jt.WebSocket||jt.MozWebSocket;class yo extends ko{createSocket(e,t,n){return la?new Mn(e,t,n):t?new Mn(e,t):new Mn(e)}doWrite(e,t){this.ws.send(t)}}class wo extends dr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=so(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=to();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:l,value:o})=>{l||(this.onPacket(o),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&On(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Eo={websocket:yo,webtransport:wo,polling:bo},To=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,So=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qn(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=To.exec(s||""),i={},a=14;for(;a--;)i[So[a]]=r[a]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ao(i,i.path),i.queryKey=Co(i,i.query),i}function Ao(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Co(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,i){r&&(t[r]=i)}),t}const Jn=typeof addEventListener=="function"&&typeof removeEventListener=="function",_n=[];Jn&&addEventListener("offline",()=>{_n.forEach(s=>s())},!1);class ps extends at{constructor(e,t){if(super(),this.binaryType=ro,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Qn(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Qn(t.host).host);Nn(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fo(this.opts.query)),Jn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_n.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=ta,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ps.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ps.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=oo(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,On(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ps.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Jn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=_n.indexOf(this._offlineEventListener);n!==-1&&_n.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ps.protocol=ta;class Io extends ps{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;ps.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ps.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,f(),t.close(),t=null)}const a=p=>{const h=new Error("probe error: "+p);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function o(){a("socket closed")}function u(p){t&&p.name!==t.name&&i()}const f=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let Do=class extends Io{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Eo[r]).filter(r=>!!r)),super(e,n)}};function Oo(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=Qn(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const No=typeof ArrayBuffer=="function",Ro=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,aa=Object.prototype.toString,Po=typeof Blob=="function"||typeof Blob<"u"&&aa.call(Blob)==="[object BlobConstructor]",zo=typeof File=="function"||typeof File<"u"&&aa.call(File)==="[object FileConstructor]";function hr(s){return No&&(s instanceof ArrayBuffer||Ro(s))||Po&&s instanceof Blob||zo&&s instanceof File}function bn(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(bn(s[t]))return!0;return!1}if(hr(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return bn(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&bn(s[t]))return!0;return!1}function Fo(s){const e=[],t=s.data,n=s;return n.data=$n(t,e),n.attachments=e.length,{packet:n,buffers:e}}function $n(s,e){if(!s)return s;if(hr(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=$n(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=$n(s[n],e));return t}return s}function Lo(s,e){return s.data=er(s.data,e),delete s.attachments,s}function er(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=er(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=er(s[t],e));return s}const xo=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Mo=5;var Fe;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Fe||(Fe={}));class Uo{constructor(e){this.replacer=e}encode(e){return(e.type===Fe.EVENT||e.type===Fe.ACK)&&bn(e)?this.encodeAsBinary({type:e.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Fe.BINARY_EVENT||e.type===Fe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Fo(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Mr(s){return Object.prototype.toString.call(s)==="[object Object]"}class pr extends at{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Fe.BINARY_EVENT;n||t.type===Fe.BINARY_ACK?(t.type=n?Fe.EVENT:Fe.ACK,this.reconstructor=new Bo(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(hr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Fe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Fe.BINARY_EVENT||n.type===Fe.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(pr.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Fe.CONNECT:return Mr(t);case Fe.DISCONNECT:return t===void 0;case Fe.CONNECT_ERROR:return typeof t=="string"||Mr(t);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&xo.indexOf(t[0])===-1);case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Lo(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const jo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pr,Encoder:Uo,get PacketType(){return Fe},protocol:Mo},Symbol.toStringTag,{value:"Module"}));function Gt(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const Vo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class oa extends at{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Gt(e,"open",this.onopen.bind(this)),Gt(e,"packet",this.onpacket.bind(this)),Gt(e,"error",this.onerror.bind(this)),Gt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(Vo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Fe.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),a.id=f}const l=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},r),a=(...l)=>{this.io.clearTimeoutFn(i),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(a,l)=>a?r(a):n(l);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Fe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(e);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(e);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Fe.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Us(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Us.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};Us.prototype.reset=function(){this.attempts=0};Us.prototype.setMin=function(s){this.ms=s};Us.prototype.setMax=function(s){this.max=s};Us.prototype.setJitter=function(s){this.jitter=s};class tr extends at{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Nn(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Us({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||jo;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Do(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Gt(t,"open",function(){n.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=Gt(t,"error",i);if(this._timeout!==!1){const l=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},l);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Gt(e,"ping",this.onping.bind(this)),Gt(e,"data",this.ondata.bind(this)),Gt(e,"error",this.onerror.bind(this)),Gt(e,"close",this.onclose.bind(this)),Gt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){On(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new oa(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const qs={};function kn(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=Oo(s,e.path||"/socket.io"),n=t.source,r=t.id,i=t.path,a=qs[r]&&i in qs[r].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return l?o=new tr(n,e):(qs[r]||(qs[r]=new tr(n,e)),o=qs[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(kn,{Manager:tr,Socket:oa,io:kn,connect:kn});let st=null;function ca(){st||(st=new(window.AudioContext||window.webkitAudioContext))}function ua(){if(ca(),!st)return;const s=st.createOscillator(),e=st.createGain();s.connect(e),e.connect(st.destination),s.frequency.value=800,s.type="sine",e.gain.setValueAtTime(.1,st.currentTime),e.gain.exponentialRampToValueAtTime(.01,st.currentTime+.1),s.start(st.currentTime),s.stop(st.currentTime+.1)}function fa(){if(ca(),!st)return;const s=()=>{const e=st.createOscillator(),t=st.createOscillator(),n=st.createGain();e.connect(n),t.connect(n),n.connect(st.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",n.gain.setValueAtTime(.15,st.currentTime),n.gain.exponentialRampToValueAtTime(.01,st.currentTime+.8),e.start(st.currentTime),t.start(st.currentTime),e.stop(st.currentTime+.8),t.stop(st.currentTime+.8)};s(),setTimeout(s,1e3)}function qo(s,e,t){if(e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(ua(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let r="",i="",a="/icon-192.png";const l=t?`${s.user} in #${t}`:s.user;switch(s.type){case"text":r=l,i=s.text;break;case"gif":r=l,i="ðŸŽ¬ Sent a GIF";break;case"file":r=l,i=`ðŸ“Ž Sent a file: ${s.fileName}`;break}const o=new Notification(r,{body:i,icon:a,badge:a,tag:`message-${s.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function Ho(s,e,t,n){if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;fa();const i=`Incoming ${e?"Video":"Voice"} Call`,a=`${s} is calling...`,l="/icon-192.png",o=new Notification(i,{body:a,icon:l,badge:l,tag:`call-${s}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function Go(){return"Notification"in window?Notification.permission==="granted"?Promise.resolve("granted"):Notification.requestPermission():Promise.resolve("denied")}function gr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ns=gr();function da(s){Ns=s}var en={exec:()=>null};function xe(s,e=""){let t=typeof s=="string"?s:s.source,n={replace:(r,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Ct.caret,"$1"),t=t.replace(r,a),n},getRegex:()=>new RegExp(t,e)};return n}var Wo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ct={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},Yo=/^(?:[ \t]*(?:\n|$))+/,Xo=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Zo=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,nn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ko=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,mr=/(?:[*+-]|\d{1,9}[.)])/,ha=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,pa=xe(ha).replace(/bull/g,mr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Qo=xe(ha).replace(/bull/g,mr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),vr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Jo=/^[^\n]+/,_r=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,$o=xe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_r).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ec=xe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,mr).getRegex(),Rn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",br=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,tc=xe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",br).replace("tag",Rn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ga=xe(vr).replace("hr",nn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),sc=xe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ga).getRegex(),kr={blockquote:sc,code:Xo,def:$o,fences:Zo,heading:Ko,hr:nn,html:tc,lheading:pa,list:ec,newline:Yo,paragraph:ga,table:en,text:Jo},Ur=xe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",nn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),nc={...kr,lheading:Qo,table:Ur,paragraph:xe(vr).replace("hr",nn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ur).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex()},rc={...kr,html:xe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",br).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:en,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xe(vr).replace("hr",nn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",pa).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ic=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,lc=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ma=/^( {2,}|\\)\n(?!\s*$)/,ac=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pn=/[\p{P}\p{S}]/u,yr=/[\s\p{P}\p{S}]/u,va=/[^\s\p{P}\p{S}]/u,oc=xe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yr).getRegex(),_a=/(?!~)[\p{P}\p{S}]/u,cc=/(?!~)[\s\p{P}\p{S}]/u,uc=/(?:[^\s\p{P}\p{S}]|~)/u,fc=xe(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Wo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),ba=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,dc=xe(ba,"u").replace(/punct/g,Pn).getRegex(),hc=xe(ba,"u").replace(/punct/g,_a).getRegex(),ka="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",pc=xe(ka,"gu").replace(/notPunctSpace/g,va).replace(/punctSpace/g,yr).replace(/punct/g,Pn).getRegex(),gc=xe(ka,"gu").replace(/notPunctSpace/g,uc).replace(/punctSpace/g,cc).replace(/punct/g,_a).getRegex(),mc=xe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,va).replace(/punctSpace/g,yr).replace(/punct/g,Pn).getRegex(),vc=xe(/\\(punct)/,"gu").replace(/punct/g,Pn).getRegex(),_c=xe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bc=xe(br).replace("(?:-->|$)","-->").getRegex(),kc=xe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,yc=xe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",wn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ya=xe(/^!?\[(label)\]\[(ref)\]/).replace("label",wn).replace("ref",_r).getRegex(),wa=xe(/^!?\[(ref)\](?:\[\])?/).replace("ref",_r).getRegex(),wc=xe("reflink|nolink(?!\\()","g").replace("reflink",ya).replace("nolink",wa).getRegex(),Br=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,wr={_backpedal:en,anyPunctuation:vc,autolink:_c,blockSkip:fc,br:ma,code:lc,del:en,emStrongLDelim:dc,emStrongRDelimAst:pc,emStrongRDelimUnd:mc,escape:ic,link:yc,nolink:wa,punctuation:oc,reflink:ya,reflinkSearch:wc,tag:kc,text:ac,url:en},Ec={...wr,link:xe(/^!?\[(label)\]\((.*?)\)/).replace("label",wn).getRegex(),reflink:xe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wn).getRegex()},sr={...wr,emStrongRDelimAst:gc,emStrongLDelim:hc,url:xe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Br).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:xe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Br).getRegex()},Tc={...sr,br:xe(ma).replace("{2,}","*").getRegex(),text:xe(sr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},un={normal:kr,gfm:nc,pedantic:rc},Hs={normal:wr,gfm:sr,breaks:Tc,pedantic:Ec},Sc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jr=s=>Sc[s];function os(s,e){if(e){if(Ct.escapeTest.test(s))return s.replace(Ct.escapeReplace,jr)}else if(Ct.escapeTestNoEncode.test(s))return s.replace(Ct.escapeReplaceNoEncode,jr);return s}function Vr(s){try{s=encodeURI(s).replace(Ct.percentDecode,"%")}catch{return null}return s}function qr(s,e){var i;let t=s.replace(Ct.findPipe,(a,l,o)=>{let u=!1,f=l;for(;--f>=0&&o[f]==="\\";)u=!u;return u?"|":" |"}),n=t.split(Ct.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(Ct.slashPipe,"|");return n}function Gs(s,e,t){let n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function Ac(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Hr(s,e,t,n,r){let i=e.href,a=e.title||null,l=s[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let o={type:s[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,o}function Cc(s,e,t){let n=s.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(i=>{let a=i.match(t.other.beginningSpace);if(a===null)return i;let[l]=a;return l.length>=r.length?i.slice(r.length):i}).join(`
`)}var En=class{constructor(s){Le(this,"options");Le(this,"rules");Le(this,"lexer");this.options=s||Ns}space(s){let e=this.rules.block.newline.exec(s);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(s){let e=this.rules.block.code.exec(s);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Gs(t,`
`)}}}fences(s){let e=this.rules.block.fences.exec(s);if(e){let t=e[0],n=Cc(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(s){let e=this.rules.block.heading.exec(s);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=Gs(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(s){let e=this.rules.block.hr.exec(s);if(e)return{type:"hr",raw:Gs(e[0],`
`)}}blockquote(s){let e=this.rules.block.blockquote.exec(s);if(e){let t=Gs(e[0],`
`).split(`
`),n="",r="",i=[];for(;t.length>0;){let a=!1,l=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),a=!0;else if(!a)l.push(t[o]);else break;t=t.slice(o);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,t.length===0)break;let h=i.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let g=h,_=g.raw+`
`+t.join(`
`),v=this.blockquote(_);i[i.length-1]=v,n=n.substring(0,n.length-g.raw.length)+v.raw,r=r.substring(0,r.length-g.text.length)+v.text;break}else if((h==null?void 0:h.type)==="list"){let g=h,_=g.raw+`
`+t.join(`
`),v=this.list(_);i[i.length-1]=v,n=n.substring(0,n.length-h.raw.length)+v.raw,r=r.substring(0,r.length-g.raw.length)+v.raw,t=_.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(s){var t,n;let e=this.rules.block.list.exec(s);if(e){let r=e[1].trim(),i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let l=this.rules.other.listItemRegex(r),o=!1;for(;s;){let f=!1,p="",h="";if(!(e=l.exec(s))||this.rules.block.hr.test(s))break;p=e[0],s=s.substring(p.length);let g=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),_=s.split(`
`,1)[0],v=!g.trim(),S=0;if(this.options.pedantic?(S=2,h=g.trimStart()):v?S=e[1].length+1:(S=e[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,h=g.slice(S),S+=e[1].length),v&&this.rules.other.blankLine.test(_)&&(p+=_+`
`,s=s.substring(_.length+1),f=!0),!f){let I=this.rules.other.nextBulletRegex(S),w=this.rules.other.hrRegex(S),E=this.rules.other.fencesBeginRegex(S),b=this.rules.other.headingBeginRegex(S),A=this.rules.other.htmlBeginRegex(S);for(;s;){let C=s.split(`
`,1)[0],T;if(_=C,this.options.pedantic?(_=_.replace(this.rules.other.listReplaceNesting,"  "),T=_):T=_.replace(this.rules.other.tabCharGlobal,"    "),E.test(_)||b.test(_)||A.test(_)||I.test(_)||w.test(_))break;if(T.search(this.rules.other.nonSpaceChar)>=S||!_.trim())h+=`
`+T.slice(S);else{if(v||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(g)||b.test(g)||w.test(g))break;h+=`
`+_}!v&&!_.trim()&&(v=!0),p+=C+`
`,s=s.substring(C.length+1),g=T.slice(S)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(o=!0)),a.items.push({type:"list_item",raw:p,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=p}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let f of a.items){if(this.lexer.state.top=!1,f.tokens=this.lexer.blockTokens(f.text,[]),f.task){if(f.text=f.text.replace(this.rules.other.listReplaceTask,""),((t=f.tokens[0])==null?void 0:t.type)==="text"||((n=f.tokens[0])==null?void 0:n.type)==="paragraph"){f.tokens[0].raw=f.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),f.tokens[0].text=f.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let p=this.rules.other.listTaskCheckbox.exec(f.raw);if(p){let h={type:"checkbox",raw:p[0]+" ",checked:p[0]!=="[ ]"};f.checked=h.checked,a.loose?f.tokens[0]&&["paragraph","text"].includes(f.tokens[0].type)&&"tokens"in f.tokens[0]&&f.tokens[0].tokens?(f.tokens[0].raw=h.raw+f.tokens[0].raw,f.tokens[0].text=h.raw+f.tokens[0].text,f.tokens[0].tokens.unshift(h)):f.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):f.tokens.unshift(h)}}if(!a.loose){let p=f.tokens.filter(g=>g.type==="space"),h=p.length>0&&p.some(g=>this.rules.other.anyLine.test(g.raw));a.loose=h}}if(a.loose)for(let f of a.items){f.loose=!0;for(let p of f.tokens)p.type==="text"&&(p.type="paragraph")}return a}}html(s){let e=this.rules.block.html.exec(s);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(s){let e=this.rules.block.def.exec(s);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(s){var a;let e=this.rules.block.table.exec(s);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=qr(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(qr(l,i.header.length).map((o,u)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:i.align[u]})));return i}}lheading(s){let e=this.rules.block.lheading.exec(s);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(s){let e=this.rules.block.paragraph.exec(s);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(s){let e=this.rules.block.text.exec(s);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(s){let e=this.rules.inline.escape.exec(s);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(s){let e=this.rules.inline.tag.exec(s);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(s){let e=this.rules.inline.link.exec(s);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=Gs(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=Ac(e[2],"()");if(i===-2)return;if(i>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Hr(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(s,e){let t;if((t=this.rules.inline.reflink.exec(s))||(t=this.rules.inline.nolink.exec(s))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Hr(t,r,t[0],this.lexer,this.rules)}}emStrong(s,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(s);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,i,a,l=r,o=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*s.length+r);(n=u.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(a=[...i].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&r%3&&!((r+a)%3)){o+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+o);let f=[...n[0]][0].length,p=s.slice(0,r+n.index+f+a);if(Math.min(r,a)%2){let g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(s){let e=this.rules.inline.code.exec(s);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(s){let e=this.rules.inline.br.exec(s);if(e)return{type:"br",raw:e[0]}}del(s){let e=this.rules.inline.del.exec(s);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(s){let e=this.rules.inline.autolink.exec(s);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(s){var t;let e;if(e=this.rules.inline.url.exec(s)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(s){let e=this.rules.inline.text.exec(s);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Yt=class nr{constructor(e){Le(this,"tokens");Le(this,"options");Le(this,"state");Le(this,"inlineQueue");Le(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ns,this.options.tokenizer=this.options.tokenizer||new En,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Ct,block:un.normal,inline:Hs.normal};this.options.pedantic?(t.block=un.pedantic,t.inline=Hs.pedantic):this.options.gfm&&(t.block=un.gfm,this.options.breaks?t.inline=Hs.breaks:t.inline=Hs.gfm),this.tokenizer.rules=t}static get rules(){return{block:un,inline:Hs}}static lex(e,t){return new nr(t).lex(e)}static lexInline(e,t){return new nr(t).inlineTokens(e)}lex(e){e=e.replace(Ct.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var r,i,a;for(this.options.pedantic&&(e=e.replace(Ct.tabCharGlobal,"    ").replace(Ct.spaceLine,""));e;){let l;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let u=t.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},t.push(l));continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if((a=this.options.extensions)!=null&&a.startBlock){let u=1/0,f=e.slice(1),p;this.options.extensions.startBlock.forEach(h=>{p=h.call({lexer:this},f),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(o))){let u=t.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l),n=o.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,u,f,p,h;let n=e,r=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)g.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=r[2]?r[2].length:0,n=n.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((u=(o=this.options.hooks)==null?void 0:o.emStrongMask)==null?void 0:u.call({lexer:this},n))??n;let a=!1,l="";for(;e;){a||(l=""),a=!1;let g;if((p=(f=this.options.extensions)==null?void 0:f.inline)!=null&&p.some(v=>(g=v.call({lexer:this},e,t))?(e=e.substring(g.raw.length),t.push(g),!0):!1))continue;if(g=this.tokenizer.escape(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.tag(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.link(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(g.raw.length);let v=t.at(-1);g.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(g=this.tokenizer.emStrong(e,n,l)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.codespan(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.br(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.del(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.autolink(e)){e=e.substring(g.raw.length),t.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(e))){e=e.substring(g.raw.length),t.push(g);continue}let _=e;if((h=this.options.extensions)!=null&&h.startInline){let v=1/0,S=e.slice(1),I;this.options.extensions.startInline.forEach(w=>{I=w.call({lexer:this},S),typeof I=="number"&&I>=0&&(v=Math.min(v,I))}),v<1/0&&v>=0&&(_=e.substring(0,v+1))}if(g=this.tokenizer.inlineText(_)){e=e.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(l=g.raw.slice(-1)),a=!0;let v=t.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(e){let v="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return t}},Tn=class{constructor(s){Le(this,"options");Le(this,"parser");this.options=s||Ns}space(s){return""}code({text:s,lang:e,escaped:t}){var i;let n=(i=(e||"").match(Ct.notSpaceStart))==null?void 0:i[0],r=s.replace(Ct.endingNewline,"")+`
`;return n?'<pre><code class="language-'+os(n)+'">'+(t?r:os(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:os(r,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:e}){return`<h${e}>${this.parser.parseInline(s)}</h${e}>
`}hr(s){return`<hr>
`}list(s){let e=s.ordered,t=s.start,n="";for(let a=0;a<s.items.length;a++){let l=s.items[a];n+=this.listitem(l)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(s){return`<li>${this.parser.parse(s.tokens)}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let e="",t="";for(let r=0;r<s.header.length;r++)t+=this.tablecell(s.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<s.rows.length;r++){let i=s.rows[r];t="";for(let a=0;a<i.length;a++)t+=this.tablecell(i[a]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let e=this.parser.parseInline(s.tokens),t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${os(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t),r=Vr(s);if(r===null)return n;s=r;let i='<a href="'+s+'"';return e&&(i+=' title="'+os(e)+'"'),i+=">"+n+"</a>",i}image({href:s,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=Vr(s);if(r===null)return os(t);s=r;let i=`<img src="${s}" alt="${t}"`;return e&&(i+=` title="${os(e)}"`),i+=">",i}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:os(s.text)}},Er=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}checkbox({raw:s}){return s}},Xt=class rr{constructor(e){Le(this,"options");Le(this,"renderer");Le(this,"textRenderer");this.options=e||Ns,this.options.renderer=this.options.renderer||new Tn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Er}static parse(e,t){return new rr(t).parse(e)}static parseInline(e,t){return new rr(t).parseInline(e)}parse(e){var n,r;let t="";for(let i=0;i<e.length;i++){let a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){let o=a,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=u||"";continue}}let l=a;switch(l.type){case"space":{t+=this.renderer.space(l);break}case"hr":{t+=this.renderer.hr(l);break}case"heading":{t+=this.renderer.heading(l);break}case"code":{t+=this.renderer.code(l);break}case"table":{t+=this.renderer.table(l);break}case"blockquote":{t+=this.renderer.blockquote(l);break}case"list":{t+=this.renderer.list(l);break}case"checkbox":{t+=this.renderer.checkbox(l);break}case"html":{t+=this.renderer.html(l);break}case"def":{t+=this.renderer.def(l);break}case"paragraph":{t+=this.renderer.paragraph(l);break}case"text":{t+=this.renderer.text(l);break}default:{let o='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){var r,i;let n="";for(let a=0;a<e.length;a++){let l=e[a];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=u||"";continue}}let o=l;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"checkbox":{n+=t.checkbox(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},mn,Js=(mn=class{constructor(s){Le(this,"options");Le(this,"block");this.options=s||Ns}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?Yt.lex:Yt.lexInline}provideParser(){return this.block?Xt.parse:Xt.parseInline}},Le(mn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Le(mn,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),mn),Ic=class{constructor(...s){Le(this,"defaults",gr());Le(this,"options",this.setOptions);Le(this,"parse",this.parseMarkdown(!0));Le(this,"parseInline",this.parseMarkdown(!1));Le(this,"Parser",Xt);Le(this,"Renderer",Tn);Le(this,"TextRenderer",Er);Le(this,"Lexer",Yt);Le(this,"Tokenizer",En);Le(this,"Hooks",Js);this.use(...s)}walkTokens(s,e){var n,r;let t=[];for(let i of s)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of a.rows)for(let o of l)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let a=i;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=i;(r=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let o=a[l].flat(1/0);t=t.concat(this.walkTokens(o,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...s){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new Tn(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=t.renderer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new En(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=t.tokenizer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Js;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=t.hooks[a],o=r[a];Js.passThroughHooks.has(i)?r[a]=u=>{if(this.defaults.async&&Js.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await l.call(r,u);return o.call(r,p)})();let f=l.call(r,u);return o.call(r,f)}:r[a]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;n.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,e){return Yt.lex(s,e??this.defaults)}parser(s,e){return Xt.parse(s,e??this.defaults)}parseMarkdown(s){return(e,t)=>{let n={...t},r={...this.defaults,...n},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=s),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(e):e,l=await(r.hooks?await r.hooks.provideLexer():s?Yt.lex:Yt.lexInline)(a,r),o=r.hooks?await r.hooks.processAllTokens(l):l;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():s?Xt.parse:Xt.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let a=(r.hooks?r.hooks.provideLexer():s?Yt.lex:Yt.lexInline)(e,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let l=(r.hooks?r.hooks.provideParser():s?Xt.parse:Xt.parseInline)(a,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(s,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let n="<p>An error occurred:</p><pre>"+os(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},Ds=new Ic;function Ue(s,e){return Ds.parse(s,e)}Ue.options=Ue.setOptions=function(s){return Ds.setOptions(s),Ue.defaults=Ds.defaults,da(Ue.defaults),Ue};Ue.getDefaults=gr;Ue.defaults=Ns;Ue.use=function(...s){return Ds.use(...s),Ue.defaults=Ds.defaults,da(Ue.defaults),Ue};Ue.walkTokens=function(s,e){return Ds.walkTokens(s,e)};Ue.parseInline=Ds.parseInline;Ue.Parser=Xt;Ue.parser=Xt.parse;Ue.Renderer=Tn;Ue.TextRenderer=Er;Ue.Lexer=Yt;Ue.lexer=Yt.lex;Ue.Tokenizer=En;Ue.Hooks=Js;Ue.parse=Ue;Ue.options;Ue.setOptions;Ue.use;Ue.walkTokens;Ue.parseInline;Xt.parse;Yt.lex;var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ea={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function w(E){return E instanceof o?new o(E.type,w(E.content),E.alias):Array.isArray(E)?E.map(w):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(w){return Object.prototype.toString.call(w).slice(8,-1)},objId:function(w){return w.__id||Object.defineProperty(w,"__id",{value:++i}),w.__id},clone:function w(E,b){b=b||{};var A,C;switch(l.util.type(E)){case"Object":if(C=l.util.objId(E),b[C])return b[C];A={},b[C]=A;for(var T in E)E.hasOwnProperty(T)&&(A[T]=w(E[T],b));return A;case"Array":return C=l.util.objId(E),b[C]?b[C]:(A=[],b[C]=A,E.forEach(function(R,O){A[O]=w(R,b)}),A);default:return E}},getLanguage:function(w){for(;w;){var E=r.exec(w.className);if(E)return E[1].toLowerCase();w=w.parentElement}return"none"},setLanguage:function(w,E){w.className=w.className.replace(RegExp(r,"gi"),""),w.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var w=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(w){var E=document.getElementsByTagName("script");for(var b in E)if(E[b].src==w)return E[b]}return null}},isActive:function(w,E,b){for(var A="no-"+E;w;){var C=w.classList;if(C.contains(E))return!0;if(C.contains(A))return!1;w=w.parentElement}return!!b}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(w,E){var b=l.util.clone(l.languages[w]);for(var A in E)b[A]=E[A];return b},insertBefore:function(w,E,b,A){A=A||l.languages;var C=A[w],T={};for(var R in C)if(C.hasOwnProperty(R)){if(R==E)for(var O in b)b.hasOwnProperty(O)&&(T[O]=b[O]);b.hasOwnProperty(R)||(T[R]=C[R])}var L=A[w];return A[w]=T,l.languages.DFS(l.languages,function(F,B){B===L&&F!=w&&(this[F]=T)}),T},DFS:function w(E,b,A,C){C=C||{};var T=l.util.objId;for(var R in E)if(E.hasOwnProperty(R)){b.call(E,R,E[R],A||R);var O=E[R],L=l.util.type(O);L==="Object"&&!C[T(O)]?(C[T(O)]=!0,w(O,b,null,C)):L==="Array"&&!C[T(O)]&&(C[T(O)]=!0,w(O,b,R,C))}}},plugins:{},highlightAll:function(w,E){l.highlightAllUnder(document,w,E)},highlightAllUnder:function(w,E,b){var A={callback:b,container:w,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),l.hooks.run("before-all-elements-highlight",A);for(var C=0,T;T=A.elements[C++];)l.highlightElement(T,E===!0,A.callback)},highlightElement:function(w,E,b){var A=l.util.getLanguage(w),C=l.languages[A];l.util.setLanguage(w,A);var T=w.parentElement;T&&T.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(T,A);var R=w.textContent,O={element:w,language:A,grammar:C,code:R};function L(B){O.highlightedCode=B,l.hooks.run("before-insert",O),O.element.innerHTML=O.highlightedCode,l.hooks.run("after-highlight",O),l.hooks.run("complete",O),b&&b.call(O.element)}if(l.hooks.run("before-sanity-check",O),T=O.element.parentElement,T&&T.nodeName.toLowerCase()==="pre"&&!T.hasAttribute("tabindex")&&T.setAttribute("tabindex","0"),!O.code){l.hooks.run("complete",O),b&&b.call(O.element);return}if(l.hooks.run("before-highlight",O),!O.grammar){L(l.util.encode(O.code));return}if(E&&n.Worker){var F=new Worker(l.filename);F.onmessage=function(B){L(B.data)},F.postMessage(JSON.stringify({language:O.language,code:O.code,immediateClose:!0}))}else L(l.highlight(O.code,O.grammar,O.language))},highlight:function(w,E,b){var A={code:w,grammar:E,language:b};if(l.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=l.tokenize(A.code,A.grammar),l.hooks.run("after-tokenize",A),o.stringify(l.util.encode(A.tokens),A.language)},tokenize:function(w,E){var b=E.rest;if(b){for(var A in b)E[A]=b[A];delete E.rest}var C=new p;return h(C,C.head,w),f(w,C,E,C.head,0),_(C)},hooks:{all:{},add:function(w,E){var b=l.hooks.all;b[w]=b[w]||[],b[w].push(E)},run:function(w,E){var b=l.hooks.all[w];if(!(!b||!b.length))for(var A=0,C;C=b[A++];)C(E)}},Token:o};n.Prism=l;function o(w,E,b,A){this.type=w,this.content=E,this.alias=b,this.length=(A||"").length|0}o.stringify=function w(E,b){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(L){A+=w(L,b)}),A}var C={type:E.type,content:w(E.content,b),tag:"span",classes:["token",E.type],attributes:{},language:b},T=E.alias;T&&(Array.isArray(T)?Array.prototype.push.apply(C.classes,T):C.classes.push(T)),l.hooks.run("wrap",C);var R="";for(var O in C.attributes)R+=" "+O+'="'+(C.attributes[O]||"").replace(/"/g,"&quot;")+'"';return"<"+C.tag+' class="'+C.classes.join(" ")+'"'+R+">"+C.content+"</"+C.tag+">"};function u(w,E,b,A){w.lastIndex=E;var C=w.exec(b);if(C&&A&&C[1]){var T=C[1].length;C.index+=T,C[0]=C[0].slice(T)}return C}function f(w,E,b,A,C,T){for(var R in b)if(!(!b.hasOwnProperty(R)||!b[R])){var O=b[R];O=Array.isArray(O)?O:[O];for(var L=0;L<O.length;++L){if(T&&T.cause==R+","+L)return;var F=O[L],B=F.inside,q=!!F.lookbehind,V=!!F.greedy,N=F.alias;if(V&&!F.pattern.global){var x=F.pattern.toString().match(/[imsuy]*$/)[0];F.pattern=RegExp(F.pattern.source,x+"g")}for(var G=F.pattern||F,U=A.next,W=C;U!==E.tail&&!(T&&W>=T.reach);W+=U.value.length,U=U.next){var H=U.value;if(E.length>w.length)return;if(!(H instanceof o)){var Y=1,Z;if(V){if(Z=u(G,W,w,q),!Z||Z.index>=w.length)break;var ce=Z.index,se=Z.index+Z[0].length,de=W;for(de+=U.value.length;ce>=de;)U=U.next,de+=U.value.length;if(de-=U.value.length,W=de,U.value instanceof o)continue;for(var te=U;te!==E.tail&&(de<se||typeof te.value=="string");te=te.next)Y++,de+=te.value.length;Y--,H=w.slice(W,de),Z.index-=W}else if(Z=u(G,0,H,q),!Z)continue;var ce=Z.index,ue=Z[0],le=H.slice(0,ce),he=H.slice(ce+ue.length),Pe=W+H.length;T&&Pe>T.reach&&(T.reach=Pe);var re=U.prev;le&&(re=h(E,re,le),W+=le.length),g(E,re,Y);var je=new o(R,B?l.tokenize(ue,B):ue,N,ue);if(U=h(E,re,je),he&&h(E,U,he),Y>1){var Te={cause:R+","+L,reach:Pe};f(w,E,b,U.prev,W,Te),T&&Te.reach>T.reach&&(T.reach=Te.reach)}}}}}}function p(){var w={value:null,prev:null,next:null},E={value:null,prev:w,next:null};w.next=E,this.head=w,this.tail=E,this.length=0}function h(w,E,b){var A=E.next,C={value:b,prev:E,next:A};return E.next=C,A.prev=C,w.length++,C}function g(w,E,b){for(var A=E.next,C=0;C<b&&A!==w.tail;C++)A=A.next;E.next=A,A.prev=E,w.length-=C}function _(w){for(var E=[],b=w.head.next;b!==w.tail;)E.push(b.value),b=b.next;return E}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(w){var E=JSON.parse(w.data),b=E.language,A=E.code,C=E.immediateClose;n.postMessage(l.highlight(A,l.languages[b],b)),C&&n.close()},!1)),l;var v=l.util.currentScript();v&&(l.filename=v.src,v.hasAttribute("data-manual")&&(l.manual=!0));function S(){l.manual||l.highlightAll()}if(!l.manual){var I=document.readyState;I==="loading"||I==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",S):window.requestAnimationFrame?window.requestAnimationFrame(S):window.setTimeout(S,16)}return l}(e);s.exports&&(s.exports=t),typeof Gr<"u"&&(Gr.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",r=function(v,S){return"âœ– Error "+v+" while fetching file: "+S},i="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function h(v,S,I){var w=new XMLHttpRequest;w.open("GET",v,!0),w.onreadystatechange=function(){w.readyState==4&&(w.status<400&&w.responseText?S(w.responseText):w.status>=400?I(r(w.status,w.statusText)):I(i))},w.send(null)}function g(v){var S=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(S){var I=Number(S[1]),w=S[2],E=S[3];return w?E?[I,Number(E)]:[I,void 0]:[I,I]}}t.hooks.add("before-highlightall",function(v){v.selector+=", "+p}),t.hooks.add("before-sanity-check",function(v){var S=v.element;if(S.matches(p)){v.code="",S.setAttribute(l,o);var I=S.appendChild(document.createElement("CODE"));I.textContent=n;var w=S.getAttribute("data-src"),E=v.language;if(E==="none"){var b=(/\.(\w+)$/.exec(w)||[,"none"])[1];E=a[b]||b}t.util.setLanguage(I,E),t.util.setLanguage(S,E);var A=t.plugins.autoloader;A&&A.loadLanguages(E),h(w,function(C){S.setAttribute(l,u);var T=g(S.getAttribute("data-range"));if(T){var R=C.split(/\r\n?|\n/g),O=T[0],L=T[1]==null?R.length:T[1];O<0&&(O+=R.length),O=Math.max(0,Math.min(O-1,R.length)),L<0&&(L+=R.length),L=Math.max(0,Math.min(L,R.length)),C=R.slice(O,L).join(`
`),S.hasAttribute("data-start")||S.setAttribute("data-start",String(O+1))}I.textContent=C,t.highlightElement(I)},function(C){S.setAttribute(l,f),I.textContent=C})}}),t.plugins.fileHighlight={highlight:function(S){for(var I=(S||document).querySelectorAll(p),w=0,E;E=I[w++];)t.highlightElement(E)}};var _=!1;t.fileHighlight=function(){_||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),_=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Ea);var Oc=Ea.exports;const Un=Dc(Oc);/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Ta,setPrototypeOf:Wr,isFrozen:Nc,getPrototypeOf:Rc,getOwnPropertyDescriptor:Pc}=Object;let{freeze:It,seal:Vt,create:ir}=Object,{apply:lr,construct:ar}=typeof Reflect<"u"&&Reflect;It||(It=function(e){return e});Vt||(Vt=function(e){return e});lr||(lr=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)});ar||(ar=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const fn=Dt(Array.prototype.forEach),zc=Dt(Array.prototype.lastIndexOf),Yr=Dt(Array.prototype.pop),Ws=Dt(Array.prototype.push),Fc=Dt(Array.prototype.splice),yn=Dt(String.prototype.toLowerCase),Bn=Dt(String.prototype.toString),jn=Dt(String.prototype.match),Ys=Dt(String.prototype.replace),Lc=Dt(String.prototype.indexOf),xc=Dt(String.prototype.trim),Ht=Dt(Object.prototype.hasOwnProperty),St=Dt(RegExp.prototype.test),Xs=Mc(TypeError);function Dt(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lr(s,e,n)}}function Mc(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ar(s,t)}}function Ne(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yn;Wr&&Wr(s,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const i=t(r);i!==r&&(Nc(e)||(e[n]=i),r=i)}s[r]=!0}return s}function Uc(s){for(let e=0;e<s.length;e++)Ht(s,e)||(s[e]=null);return s}function cs(s){const e=ir(null);for(const[t,n]of Ta(s))Ht(s,t)&&(Array.isArray(n)?e[t]=Uc(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=cs(n):e[t]=n);return e}function Zs(s,e){for(;s!==null;){const n=Pc(s,e);if(n){if(n.get)return Dt(n.get);if(typeof n.value=="function")return Dt(n.value)}s=Rc(s)}function t(){return null}return t}const Xr=It(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Vn=It(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qn=It(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bc=It(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hn=It(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),jc=It(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zr=It(["#text"]),Kr=It(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gn=It(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Qr=It(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dn=It(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Vc=Vt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qc=Vt(/<%[\w\W]*|[\w\W]*%>/gm),Hc=Vt(/\$\{[\w\W]*/gm),Gc=Vt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Wc=Vt(/^aria-[\-\w]+$/),Sa=Vt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Yc=Vt(/^(?:\w+script|data):/i),Xc=Vt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Aa=Vt(/^html$/i),Zc=Vt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Jr=Object.freeze({__proto__:null,ARIA_ATTR:Wc,ATTR_WHITESPACE:Xc,CUSTOM_ELEMENT:Zc,DATA_ATTR:Gc,DOCTYPE_NAME:Aa,ERB_EXPR:qc,IS_ALLOWED_URI:Sa,IS_SCRIPT_OR_DATA:Yc,MUSTACHE_EXPR:Vc,TMPLIT_EXPR:Hc});const Ks={element:1,text:3,progressingInstruction:7,comment:8,document:9},Kc=function(){return typeof window>"u"?null:window},Qc=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},$r=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ca(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kc();const e=ge=>Ca(ge);if(e.version="3.3.0",e.removed=[],!s||!s.document||s.document.nodeType!==Ks.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const n=t,r=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:o,NodeFilter:u,NamedNodeMap:f=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:g}=s,_=o.prototype,v=Zs(_,"cloneNode"),S=Zs(_,"remove"),I=Zs(_,"nextSibling"),w=Zs(_,"childNodes"),E=Zs(_,"parentNode");if(typeof a=="function"){const ge=t.createElement("template");ge.content&&ge.content.ownerDocument&&(t=ge.content.ownerDocument)}let b,A="";const{implementation:C,createNodeIterator:T,createDocumentFragment:R,getElementsByTagName:O}=t,{importNode:L}=n;let F=$r();e.isSupported=typeof Ta=="function"&&typeof E=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:q,TMPLIT_EXPR:V,DATA_ATTR:N,ARIA_ATTR:x,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:W}=Jr;let{IS_ALLOWED_URI:H}=Jr,Y=null;const Z=Ne({},[...Xr,...Vn,...qn,...Hn,...Zr]);let se=null;const de=Ne({},[...Kr,...Gn,...Qr,...dn]);let te=Object.seal(ir(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,ue=null;const le=Object.seal(ir(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let he=!0,Pe=!0,re=!1,je=!0,Te=!1,ie=!0,J=!1,oe=!1,ye=!1,be=!1,we=!1,Me=!1,tt=!0,Qe=!1;const ze="user-content-";let qe=!0,gt=!1,ft={},nt=null;const Et=Ne({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ut=null;const rt=Ne({},["audio","video","img","source","image","track"]);let _e=null;const Oe=Ne({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ot="http://www.w3.org/1998/Math/MathML",xt="http://www.w3.org/2000/svg",ee="http://www.w3.org/1999/xhtml";let me=ee,kt=!1,dt=null;const Ze=Ne({},[Ot,xt,ee],Bn);let Mt=Ne({},["mi","mo","mn","ms","mtext"]),ht=Ne({},["annotation-xml"]);const is=Ne({},["title","style","font","a","script"]);let Xe=null;const Jt=["application/xhtml+xml","text/html"],_s="text/html";let Se=null,Je=null;const Rs=t.createElement("form"),bs=function(M){return M instanceof RegExp||M instanceof Function},yt=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Je&&Je===M)){if((!M||typeof M!="object")&&(M={}),M=cs(M),Xe=Jt.indexOf(M.PARSER_MEDIA_TYPE)===-1?_s:M.PARSER_MEDIA_TYPE,Se=Xe==="application/xhtml+xml"?Bn:yn,Y=Ht(M,"ALLOWED_TAGS")?Ne({},M.ALLOWED_TAGS,Se):Z,se=Ht(M,"ALLOWED_ATTR")?Ne({},M.ALLOWED_ATTR,Se):de,dt=Ht(M,"ALLOWED_NAMESPACES")?Ne({},M.ALLOWED_NAMESPACES,Bn):Ze,_e=Ht(M,"ADD_URI_SAFE_ATTR")?Ne(cs(Oe),M.ADD_URI_SAFE_ATTR,Se):Oe,Ut=Ht(M,"ADD_DATA_URI_TAGS")?Ne(cs(rt),M.ADD_DATA_URI_TAGS,Se):rt,nt=Ht(M,"FORBID_CONTENTS")?Ne({},M.FORBID_CONTENTS,Se):Et,ce=Ht(M,"FORBID_TAGS")?Ne({},M.FORBID_TAGS,Se):cs({}),ue=Ht(M,"FORBID_ATTR")?Ne({},M.FORBID_ATTR,Se):cs({}),ft=Ht(M,"USE_PROFILES")?M.USE_PROFILES:!1,he=M.ALLOW_ARIA_ATTR!==!1,Pe=M.ALLOW_DATA_ATTR!==!1,re=M.ALLOW_UNKNOWN_PROTOCOLS||!1,je=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Te=M.SAFE_FOR_TEMPLATES||!1,ie=M.SAFE_FOR_XML!==!1,J=M.WHOLE_DOCUMENT||!1,be=M.RETURN_DOM||!1,we=M.RETURN_DOM_FRAGMENT||!1,Me=M.RETURN_TRUSTED_TYPE||!1,ye=M.FORCE_BODY||!1,tt=M.SANITIZE_DOM!==!1,Qe=M.SANITIZE_NAMED_PROPS||!1,qe=M.KEEP_CONTENT!==!1,gt=M.IN_PLACE||!1,H=M.ALLOWED_URI_REGEXP||Sa,me=M.NAMESPACE||ee,Mt=M.MATHML_TEXT_INTEGRATION_POINTS||Mt,ht=M.HTML_INTEGRATION_POINTS||ht,te=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&bs(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&bs(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Te&&(Pe=!1),we&&(be=!0),ft&&(Y=Ne({},Zr),se=[],ft.html===!0&&(Ne(Y,Xr),Ne(se,Kr)),ft.svg===!0&&(Ne(Y,Vn),Ne(se,Gn),Ne(se,dn)),ft.svgFilters===!0&&(Ne(Y,qn),Ne(se,Gn),Ne(se,dn)),ft.mathMl===!0&&(Ne(Y,Hn),Ne(se,Qr),Ne(se,dn))),M.ADD_TAGS&&(typeof M.ADD_TAGS=="function"?le.tagCheck=M.ADD_TAGS:(Y===Z&&(Y=cs(Y)),Ne(Y,M.ADD_TAGS,Se))),M.ADD_ATTR&&(typeof M.ADD_ATTR=="function"?le.attributeCheck=M.ADD_ATTR:(se===de&&(se=cs(se)),Ne(se,M.ADD_ATTR,Se))),M.ADD_URI_SAFE_ATTR&&Ne(_e,M.ADD_URI_SAFE_ATTR,Se),M.FORBID_CONTENTS&&(nt===Et&&(nt=cs(nt)),Ne(nt,M.FORBID_CONTENTS,Se)),qe&&(Y["#text"]=!0),J&&Ne(Y,["html","head","body"]),Y.table&&(Ne(Y,["tbody"]),delete ce.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=M.TRUSTED_TYPES_POLICY,A=b.createHTML("")}else b===void 0&&(b=Qc(g,r)),b!==null&&typeof A=="string"&&(A=b.createHTML(""));It&&It(M),Je=M}},qt=Ne({},[...Vn,...qn,...Bc]),ks=Ne({},[...Hn,...jc]),an=function(M){let ae=E(M);(!ae||!ae.tagName)&&(ae={namespaceURI:me,tagName:"template"});const pe=yn(M.tagName),Ke=yn(ae.tagName);return dt[M.namespaceURI]?M.namespaceURI===xt?ae.namespaceURI===ee?pe==="svg":ae.namespaceURI===Ot?pe==="svg"&&(Ke==="annotation-xml"||Mt[Ke]):!!qt[pe]:M.namespaceURI===Ot?ae.namespaceURI===ee?pe==="math":ae.namespaceURI===xt?pe==="math"&&ht[Ke]:!!ks[pe]:M.namespaceURI===ee?ae.namespaceURI===xt&&!ht[Ke]||ae.namespaceURI===Ot&&!Mt[Ke]?!1:!ks[pe]&&(is[pe]||!qt[pe]):!!(Xe==="application/xhtml+xml"&&dt[M.namespaceURI]):!1},Tt=function(M){Ws(e.removed,{element:M});try{E(M).removeChild(M)}catch{S(M)}},$t=function(M,ae){try{Ws(e.removed,{attribute:ae.getAttributeNode(M),from:ae})}catch{Ws(e.removed,{attribute:null,from:ae})}if(ae.removeAttribute(M),M==="is")if(be||we)try{Tt(ae)}catch{}else try{ae.setAttribute(M,"")}catch{}},ys=function(M){let ae=null,pe=null;if(ye)M="<remove></remove>"+M;else{const it=jn(M,/^[\r\n\t ]+/);pe=it&&it[0]}Xe==="application/xhtml+xml"&&me===ee&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const Ke=b?b.createHTML(M):M;if(me===ee)try{ae=new h().parseFromString(Ke,Xe)}catch{}if(!ae||!ae.documentElement){ae=C.createDocument(me,"template",null);try{ae.documentElement.innerHTML=kt?A:Ke}catch{}}const wt=ae.body||ae.documentElement;return M&&pe&&wt.insertBefore(t.createTextNode(pe),wt.childNodes[0]||null),me===ee?O.call(ae,J?"html":"body")[0]:J?ae.documentElement:wt},js=function(M){return T.call(M.ownerDocument||M,M,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},hs=function(M){return M instanceof p&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof f)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},ws=function(M){return typeof l=="function"&&M instanceof l};function Bt(ge,M,ae){fn(ge,pe=>{pe.call(e,M,ae,Je)})}const Es=function(M){let ae=null;if(Bt(F.beforeSanitizeElements,M,null),hs(M))return Tt(M),!0;const pe=Se(M.nodeName);if(Bt(F.uponSanitizeElement,M,{tagName:pe,allowedTags:Y}),ie&&M.hasChildNodes()&&!ws(M.firstElementChild)&&St(/<[/\w!]/g,M.innerHTML)&&St(/<[/\w!]/g,M.textContent)||M.nodeType===Ks.progressingInstruction||ie&&M.nodeType===Ks.comment&&St(/<[/\w]/g,M.data))return Tt(M),!0;if(!(le.tagCheck instanceof Function&&le.tagCheck(pe))&&(!Y[pe]||ce[pe])){if(!ce[pe]&&Vs(pe)&&(te.tagNameCheck instanceof RegExp&&St(te.tagNameCheck,pe)||te.tagNameCheck instanceof Function&&te.tagNameCheck(pe)))return!1;if(qe&&!nt[pe]){const Ke=E(M)||M.parentNode,wt=w(M)||M.childNodes;if(wt&&Ke){const it=wt.length;for(let Nt=it-1;Nt>=0;--Nt){const ls=v(wt[Nt],!0);ls.__removalCount=(M.__removalCount||0)+1,Ke.insertBefore(ls,I(M))}}}return Tt(M),!0}return M instanceof o&&!an(M)||(pe==="noscript"||pe==="noembed"||pe==="noframes")&&St(/<\/no(script|embed|frames)/i,M.innerHTML)?(Tt(M),!0):(Te&&M.nodeType===Ks.text&&(ae=M.textContent,fn([B,q,V],Ke=>{ae=Ys(ae,Ke," ")}),M.textContent!==ae&&(Ws(e.removed,{element:M.cloneNode()}),M.textContent=ae)),Bt(F.afterSanitizeElements,M,null),!1)},Ts=function(M,ae,pe){if(tt&&(ae==="id"||ae==="name")&&(pe in t||pe in Rs))return!1;if(!(Pe&&!ue[ae]&&St(N,ae))){if(!(he&&St(x,ae))){if(!(le.attributeCheck instanceof Function&&le.attributeCheck(ae,M))){if(!se[ae]||ue[ae]){if(!(Vs(M)&&(te.tagNameCheck instanceof RegExp&&St(te.tagNameCheck,M)||te.tagNameCheck instanceof Function&&te.tagNameCheck(M))&&(te.attributeNameCheck instanceof RegExp&&St(te.attributeNameCheck,ae)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(ae,M))||ae==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&St(te.tagNameCheck,pe)||te.tagNameCheck instanceof Function&&te.tagNameCheck(pe))))return!1}else if(!_e[ae]){if(!St(H,Ys(pe,U,""))){if(!((ae==="src"||ae==="xlink:href"||ae==="href")&&M!=="script"&&Lc(pe,"data:")===0&&Ut[M])){if(!(re&&!St(G,Ys(pe,U,"")))){if(pe)return!1}}}}}}}return!0},Vs=function(M){return M!=="annotation-xml"&&jn(M,W)},Ss=function(M){Bt(F.beforeSanitizeAttributes,M,null);const{attributes:ae}=M;if(!ae||hs(M))return;const pe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se,forceKeepAttr:void 0};let Ke=ae.length;for(;Ke--;){const wt=ae[Ke],{name:it,namespaceURI:Nt,value:ls}=wt,zs=Se(it),Fn=ls;let mt=it==="value"?Fn:xc(Fn);if(pe.attrName=zs,pe.attrValue=mt,pe.keepAttr=!0,pe.forceKeepAttr=void 0,Bt(F.uponSanitizeAttribute,M,pe),mt=pe.attrValue,Qe&&(zs==="id"||zs==="name")&&($t(it,M),mt=ze+mt),ie&&St(/((--!?|])>)|<\/(style|title|textarea)/i,mt)){$t(it,M);continue}if(zs==="attributename"&&jn(mt,"href")){$t(it,M);continue}if(pe.forceKeepAttr)continue;if(!pe.keepAttr){$t(it,M);continue}if(!je&&St(/\/>/i,mt)){$t(it,M);continue}Te&&fn([B,q,V],Rr=>{mt=Ys(mt,Rr," ")});const Nr=Se(M.nodeName);if(!Ts(Nr,zs,mt)){$t(it,M);continue}if(b&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Nt)switch(g.getAttributeType(Nr,zs)){case"TrustedHTML":{mt=b.createHTML(mt);break}case"TrustedScriptURL":{mt=b.createScriptURL(mt);break}}if(mt!==Fn)try{Nt?M.setAttributeNS(Nt,it,mt):M.setAttribute(it,mt),hs(M)?Tt(M):Yr(e.removed)}catch{$t(it,M)}}Bt(F.afterSanitizeAttributes,M,null)},Ps=function ge(M){let ae=null;const pe=js(M);for(Bt(F.beforeSanitizeShadowDOM,M,null);ae=pe.nextNode();)Bt(F.uponSanitizeShadowNode,ae,null),Es(ae),Ss(ae),ae.content instanceof i&&ge(ae.content);Bt(F.afterSanitizeShadowDOM,M,null)};return e.sanitize=function(ge){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=null,pe=null,Ke=null,wt=null;if(kt=!ge,kt&&(ge="<!-->"),typeof ge!="string"&&!ws(ge))if(typeof ge.toString=="function"){if(ge=ge.toString(),typeof ge!="string")throw Xs("dirty is not a string, aborting")}else throw Xs("toString is not a function");if(!e.isSupported)return ge;if(oe||yt(M),e.removed=[],typeof ge=="string"&&(gt=!1),gt){if(ge.nodeName){const ls=Se(ge.nodeName);if(!Y[ls]||ce[ls])throw Xs("root node is forbidden and cannot be sanitized in-place")}}else if(ge instanceof l)ae=ys("<!---->"),pe=ae.ownerDocument.importNode(ge,!0),pe.nodeType===Ks.element&&pe.nodeName==="BODY"||pe.nodeName==="HTML"?ae=pe:ae.appendChild(pe);else{if(!be&&!Te&&!J&&ge.indexOf("<")===-1)return b&&Me?b.createHTML(ge):ge;if(ae=ys(ge),!ae)return be?null:Me?A:""}ae&&ye&&Tt(ae.firstChild);const it=js(gt?ge:ae);for(;Ke=it.nextNode();)Es(Ke),Ss(Ke),Ke.content instanceof i&&Ps(Ke.content);if(gt)return ge;if(be){if(we)for(wt=R.call(ae.ownerDocument);ae.firstChild;)wt.appendChild(ae.firstChild);else wt=ae;return(se.shadowroot||se.shadowrootmode)&&(wt=L.call(n,wt,!0)),wt}let Nt=J?ae.outerHTML:ae.innerHTML;return J&&Y["!doctype"]&&ae.ownerDocument&&ae.ownerDocument.doctype&&ae.ownerDocument.doctype.name&&St(Aa,ae.ownerDocument.doctype.name)&&(Nt="<!DOCTYPE "+ae.ownerDocument.doctype.name+`>
`+Nt),Te&&fn([B,q,V],ls=>{Nt=Ys(Nt,ls," ")}),b&&Me?b.createHTML(Nt):Nt},e.setConfig=function(){let ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt(ge),oe=!0},e.clearConfig=function(){Je=null,oe=!1},e.isValidAttribute=function(ge,M,ae){Je||yt({});const pe=Se(ge),Ke=Se(M);return Ts(pe,Ke,ae)},e.addHook=function(ge,M){typeof M=="function"&&Ws(F[ge],M)},e.removeHook=function(ge,M){if(M!==void 0){const ae=zc(F[ge],M);return ae===-1?void 0:Fc(F[ge],ae,1)[0]}return Yr(F[ge])},e.removeHooks=function(ge){F[ge]=[]},e.removeAllHooks=function(){F=$r()},e}var Jc=Ca();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(s){s.languages.typescript=s.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),s.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete s.languages.typescript.parameter,delete s.languages.typescript["literal-property"];var e=s.languages.extend("typescript",{});delete e["class-name"],s.languages.typescript["class-name"].inside=e,s.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),s.languages.ts=s.languages.typescript})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(s){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};s.languages.java=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:e,function:[s.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),s.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),s.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(s){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});s.languages.cpp=s.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),s.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),s.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:s.languages.cpp}}}}),s.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),s.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:s.languages.extend("cpp",{})}}),s.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},s.languages.cpp["base-clause"])})(Prism);(function(s){function e(W,H){return W.replace(/<<(\d+)>>/g,function(Y,Z){return"(?:"+H[+Z]+")"})}function t(W,H,Y){return RegExp(e(W,H),"")}function n(W,H){for(var Y=0;Y<H;Y++)W=W.replace(/<<self>>/g,function(){return"(?:"+W+")"});return W.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(W){return"\\b(?:"+W.trim().replace(/ /g,"|")+")\\b"}var a=i(r.typeDeclaration),l=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),f=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=n(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,g=e(/<<0>>(?:\s*<<1>>)?/.source,[h,f]),_=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,g]),v=/\[\s*(?:,\s*)*\]/.source,S=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[_,v]),I=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[f,p,v]),w=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[I]),E=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[w,_,v]),b={keyword:l,punctuation:/[<>()?,.:[\]]/},A=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,C=/"(?:\\.|[^\\"\r\n])*"/.source,T=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;s.languages.csharp=s.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[T]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[C]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[_]),lookbehind:!0,inside:b},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,E]),lookbehind:!0,inside:b},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,g]),lookbehind:!0,inside:b},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[_]),lookbehind:!0,inside:b},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[S]),lookbehind:!0,inside:b},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[E,u,h]),inside:b}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),s.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),s.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),s.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:b},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[E,_]),inside:b,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[E]),lookbehind:!0,inside:b,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,f]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(f),alias:"class-name",inside:b}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,g,h,E,l.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[g,p]),lookbehind:!0,greedy:!0,inside:s.languages.csharp},keyword:l,"class-name":{pattern:RegExp(E),greedy:!0,inside:b},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var R=C+"|"+A,O=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[R]),L=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[O]),2),F=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,B=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[_,L]);s.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[F,B]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[F]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[L]),inside:s.languages.csharp},"class-name":{pattern:RegExp(_),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var q=/:[^}\r\n]+/.source,V=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[O]),2),N=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[V,q]),x=n(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[R]),2),G=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[x,q]);function U(W,H){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[W]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[H,q]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:s.languages.csharp}}},string:/[\s\S]+/}}s.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[N]),lookbehind:!0,greedy:!0,inside:U(N,V)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[G]),lookbehind:!0,greedy:!0,inside:U(G,x)}],char:{pattern:RegExp(A),greedy:!0}}),s.languages.dotnet=s.languages.cs=s.languages.csharp})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(s){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),s.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},s.languages.rust["closure-params"].inside.rest=s.languages.rust,s.languages.rust.attribute.inside.string=s.languages.rust.string})(Prism);(function(s){s.languages.ruby=s.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),s.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:s.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete s.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",n=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;s.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+n),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+n+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),s.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete s.languages.ruby.string,s.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),s.languages.rb=s.languages.ruby})(Prism);(function(s){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},n={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};s.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:n},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:n.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:n.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=s.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=n.variable[1].inside,a=0;a<r.length;a++)i[r[a]]=s.languages.bash[r[a]];s.languages.sh=s.languages.bash,s.languages.shell=s.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const sn=new Map;Ue.setOptions({breaks:!0,gfm:!0});const ei={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},$c={code(s){const e=s.text;let t=s.lang;if(t&&ei[t.toLowerCase()]&&(t=ei[t.toLowerCase()]),t&&Un.languages[t])try{const r=Un.highlight(e,Un.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Ue.use({renderer:$c});function Sn(s){s=s.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),s=s.replace(/```(\w+)\n([\s\S]*?)```/g,(n,r,i)=>i.endsWith(`
`)?n:"```"+r+`
`+i+"\n```");let e;try{const n=Ue.parse(s,{async:!1});e=typeof n=="string"?n:String(n)}catch(n){console.error("Markdown parse error:",n),e=s}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(n,r)=>{const i=sn.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:n}),Jc.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function eu(s){sn.set(s.name,s)}function tu(s){sn.delete(s)}function su(s){sn.clear(),s.forEach(e=>{sn.set(e.name,e)})}const nu="wabi-chat-db",ru=1,Rt="messages",Fs="settings";class iu{constructor(){Le(this,"db",null);Le(this,"initPromise",null)}async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const n=indexedDB.open(nu,ru);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(Rt)||i.createObjectStore(Rt,{keyPath:"period"}),i.objectStoreNames.contains(Fs)||i.createObjectStore(Fs,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([Fs],"readonly").objectStore(Fs).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.value)},a.onerror=()=>n(a.error)}):null}async setSetting(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([Fs],"readwrite").objectStore(Fs).put({key:e,value:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async getArchive(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([Rt],"readonly").objectStore(Rt).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.data)},a.onerror=()=>n(a.error)}):null}async setArchive(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([Rt],"readwrite").objectStore(Rt).put({period:e,data:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async deleteArchive(e){if(this.db)return new Promise((t,n)=>{const a=this.db.transaction([Rt],"readwrite").objectStore(Rt).delete(e);a.onsuccess=()=>t(),a.onerror=()=>n(a.error)})}async getAllArchiveKeys(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([Rt],"readonly").objectStore(Rt).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async getAllArchives(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([Rt],"readonly").objectStore(Rt).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async clearAllArchives(){if(this.db)return new Promise((e,t)=>{const i=this.db.transaction([Rt],"readwrite").objectStore(Rt).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class lu{constructor(){Le(this,"rotationPeriod","month");Le(this,"maxArchives",4);Le(this,"db");Le(this,"initPromise",null);this.db=new iu,this.initPromise=this.init()}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e)}async setMaxArchives(e){await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives()}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const n=this.getWeekNumber(e);return`${t}-W${String(n).padStart(2,"0")}`}case"month":{const n=e.getMonth()+1;return`${t}-${String(n).padStart(2,"0")}`}case"half-year":{const n=e.getMonth()<6?"H1":"H2";return`${t}-${n}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/(24*60*60*1e3));return Math.ceil((n+t.getDay()+1)/7)}async isEnabled(){await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString())}async saveMessage(e,t){if(await this.ensureInit(),!await this.isEnabled())return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(a){console.error("Failed to save message to IndexedDB:",a),await this.rotateArchives()}}async rotateArchives(){await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const n of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${n}`),await this.db.deleteArchive(n)}}async loadAllMessages(){if(await this.ensureInit(),!await this.isEnabled())return{};const t={},n=await this.db.getAllArchives();for(const r of n){const i=r.data||{};Object.entries(i).forEach(([a,l])=>{t[a]||(t[a]=[]),t[a].push(...l)})}return Object.keys(t).forEach(r=>{t[r].sort((i,a)=>i.timestamp-a.timestamp)}),t}async deleteArchive(e){await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`)}async clearAllHistory(){await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history")}async exportArchives(){await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const n=JSON.stringify(t.data),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`wabi-chat-${t.period}.json`,a.click(),URL.revokeObjectURL(i)})}async exportArchive(e){await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const a=JSON.stringify(i.data),l=new Blob([a]).size,o=i.data,u=Object.values(o).reduce((f,p)=>f+p.length,0);return{period:i.period,size:l,messageCount:u}}).sort((i,a)=>a.period.localeCompare(i.period)),n=t.reduce((i,a)=>i+a.size,0),r=t.reduce((i,a)=>i+a.messageCount,0);return{archives:t,totalSize:n,totalMessages:r}}}const zt=new lu,Bs=bt(null),us=bt([]),Os=bt("general"),At=bt({general:[]}),Zt=bt([]),Ia=bt([]),ns=bt(null),ti=bt(!1),Da=bt(0),Tr=bt(null);let fe=null;function au(s){let e="http://localhost:3000";if(typeof window<"u"){const t=window.location.origin;t.includes(":5173")||(e=t)}return fe=kn(e),Bs.set(fe),zt.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const n={};for(const[r,i]of Object.entries(t)){const a=new Set;n[r]=i.filter(l=>a.has(l.id)?!1:(a.add(l.id),!0))}At.set(n)}}),fe.on("connect",()=>{console.log("Connected to server"),ti.set(!0),fe==null||fe.emit("join",s)}),fe.on("disconnect",()=>{console.log("Disconnected from server"),ti.set(!1)}),fe.on("init",t=>{us.set(t.channels),Zt.set(t.users),t.emotes&&su(t.emotes);const n=t.users.find(r=>r.id===(fe==null?void 0:fe.id));n&&ns.set(n),fe==null||fe.emit("join-channel","general")}),fe.on("channel-messages",t=>{At.update(n=>{const r=n[t.channelId]||[],i=new Set(r.map(l=>l.id)),a=t.messages.filter(l=>!i.has(l.id));return{...n,[t.channelId]:[...r,...a]}})}),fe.on("message",t=>{At.update(i=>{const a=i[t.channelId]||[];return a.some(l=>l.id===t.message.id)?i:{...i,[t.channelId]:[...a,t.message]}}),zt.saveMessage(t.channelId,t.message);const n=t.message.userId===(fe==null?void 0:fe.id);let r;us.subscribe(i=>{const a=i.find(l=>l.id===t.channelId);r=a==null?void 0:a.name})(),qo(t.message,n,r),!n&&document.hidden&&Da.update(i=>(i===0&&Tr.set(t.message.id),i+1))}),fe.on("user-joined",t=>{Zt.update(n=>[...n,t])}),fe.on("user-left",t=>{Zt.update(n=>n.filter(r=>r.id!==t.id))}),fe.on("typing",t=>{Ia.set(t)}),fe.on("profile-updated",t=>{Zt.update(n=>n.map(r=>r.id===t.id?t:r)),ns.update(n=>n&&n.id===t.id?t:n)}),fe.on("message-edited",t=>{At.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),fe.on("message-deleted",t=>{At.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),fe.on("message-pin-toggled",t=>{At.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),fe.on("channel-created",t=>{us.update(n=>[...n,t]),At.update(n=>({...n,[t.id]:[]}))}),fe.on("channel-deleted",t=>{us.update(n=>n.filter(r=>r.id!==t)),At.update(n=>{const r={...n};return delete r[t],r}),Os.update(n=>n===t?"general":n)}),fe.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),fe.on("dm-created",t=>{const n={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};us.update(r=>r.some(i=>i.id===t.channelId)?r:[...r,n]),At.update(r=>({...r,[t.channelId]:r[t.channelId]||[]})),Os.set(t.channelId)}),fe.on("group-created",t=>{us.update(n=>n.some(r=>r.id===t.id)?n:[...n,t]),At.update(n=>({...n,[t.id]:n[t.id]||[]}))}),fe.on("emote-added",t=>{eu(t)}),fe.on("emote-deleted",t=>{tu(t)}),fe.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),fe}function ou(s){fe==null||fe.emit("join-channel",s),Os.set(s)}function cu(s){fe==null||fe.emit("create-channel",s)}function uu(s){fe==null||fe.emit("delete-channel",s)}function hn(s,e,t="text",n){fe==null||fe.emit("message",{channelId:s,text:e,type:t,...n})}function Oa(s,e,t){fe==null||fe.emit("edit-message",{channelId:s,messageId:e,newText:t})}function fu(s,e){fe==null||fe.emit("delete-message",{channelId:s,messageId:e})}function Sr(s,e){fe==null||fe.emit("toggle-pin-message",{channelId:s,messageId:e})}function Wn(s){fe==null||fe.emit("typing",s)}function si(s,e){fe==null||fe.emit("update-profile",{status:s,profilePicture:e})}function du(){fe==null||fe.disconnect(),Bs.set(null),fe=null}function hu(){Da.set(0),Tr.set(null)}function Na(s){fe==null||fe.emit("create-dm",{targetUserId:s})}let pn;const pu=new Uint8Array(16);function gu(){if(!pn&&(pn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pn(pu)}const vt=[];for(let s=0;s<256;++s)vt.push((s+256).toString(16).slice(1));function mu(s,e=0){return vt[s[e+0]]+vt[s[e+1]]+vt[s[e+2]]+vt[s[e+3]]+"-"+vt[s[e+4]]+vt[s[e+5]]+"-"+vt[s[e+6]]+vt[s[e+7]]+"-"+vt[s[e+8]]+vt[s[e+9]]+"-"+vt[s[e+10]]+vt[s[e+11]]+vt[s[e+12]]+vt[s[e+13]]+vt[s[e+14]]+vt[s[e+15]]}const vu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ni={randomUUID:vu};function _u(s,e,t){if(ni.randomUUID&&!s)return ni.randomUUID();s=s||{};const n=s.random||(s.rng||gu)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,mu(n)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var As="",Ra=16,bu=()=>{let s="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let n=0;n<Ra;n++)s+=e.charAt(Math.floor(Math.random()*t));return s},ku=()=>{if(!As){try{As=sessionStorage.getItem("giphyPingbackId")}catch{}if(!As){const s=new Date().getTime().toString(16);try{As=`${s}${_u().replace(/-/g,"")}`.substring(0,Ra)}catch{As=bu()}try{sessionStorage.setItem("giphyPingbackId",As)}catch{}}}return As},yu=ku,gn=null;new Promise(s=>{typeof Image>"u"&&s(!1);const e=new Image;e.onload=()=>{gn=!0,s(gn)},e.onerror=()=>{gn=!1,s(gn)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var $s=(typeof window<"u"?window:global)||{};$s._GIPHY_SDK_HEADERS_=$s._GIPHY_SDK_HEADERS_||($s.Headers?new $s.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var Pa=()=>$s._GIPHY_SDK_HEADERS_,ri=(s,e)=>{var t;return(t=Pa())==null?void 0:t.set(s,e)},wu=Object.defineProperty,Eu=Object.defineProperties,Tu=Object.getOwnPropertyDescriptors,Su=Object.getOwnPropertyNames,ii=Object.getOwnPropertySymbols,Au=Object.prototype.hasOwnProperty,Cu=Object.prototype.propertyIsEnumerable,li=(s,e,t)=>e in s?wu(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,es=(s,e)=>{for(var t in e||(e={}))Au.call(e,t)&&li(s,t,e[t]);if(ii)for(var t of ii(e))Cu.call(e,t)&&li(s,t,e[t]);return s},Yn=(s,e)=>Eu(s,Tu(e)),Iu=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')}),Du=(s,e)=>function(){return e||(0,s[Su(s)[0]])((e={exports:{}}).exports,e),e.exports},Ou=(s,e,t)=>new Promise((n,r)=>{var i=o=>{try{l(t.next(o))}catch(u){r(u)}},a=o=>{try{l(t.throw(o))}catch(u){r(u)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,a);l((t=t.apply(s,e)).next())}),Nu=Du({"package.json"(s,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),Ru=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],Pu=["suppress_chrome","is_public","is_verified"],ai=s=>e=>s[e]=!!s[e],zu=s=>typeof s=="string"?s:s.text,za=(s,e="")=>{const t=es({},s);t.id=String(t.id),t.tags=(t.tags||[]).map(zu),t.bottle_data||(t.bottle_data={}),t.response_id=e,Ru.forEach(ai(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:n}=t;if(n){const r=es({},n);Pu.forEach(ai(r)),t.user=r}return t},oi=s=>{const{response_id:e}=s.meta;return s.data=za(s.data,e),s},as=s=>{const{response_id:e}=s.meta;return s.data=s.data.map(t=>za(t,e)),s},Fu=(typeof window<"u"?window:global)||{},Lu=Fu.GIPHY_API_URL||"https://api.giphy.com/v1/",Fa=class extends Error{constructor(s,e,t=0,n=""){super(s),this.url=e,this.status=t,this.statusText=n}},xu=class extends Fa{},ci=Fa,Mu="@giphy/js-fetch-api: ",Uu="Error fetching",Bu=s=>s,Wt={},ju=6e4,Vu=6e3,qu=()=>{const s=Date.now();Object.keys(Wt).forEach(e=>{const t=Wt[e].isError?Vu:ju;s-Wt[e].ts>=t&&delete Wt[e]})};function Hu(s,e={}){const{apiVersion:t=1,noCache:n=!1,normalizer:r=Bu}=e,i=Lu.replace(/\/v\d+\/$/,`/v${t}/`);if(qu(),!Wt[s]||n){const a=`${i}${s}`,l=()=>Ou(this,null,function*(){var o,u;let f;try{const p=yield fetch(a,{method:"get"});if(p.ok){const h=yield p.json();if((o=h.meta)!=null&&o.response_id)return r(h);throw{message:"synthetic response"}}else{let h=Uu;try{const _=yield p.json();_.message&&(h=_.message),(u=_.meta)!=null&&u.msg&&(h=_.meta.msg)}catch{}Wt[s]&&(Wt[s].isError=!0);let g=ci;h==="This content is not available in your location"&&(g=xu),f=new g(`${Mu}${h}`,a,p.status,p.statusText)}}catch(p){f=new ci(p.message,a),Wt[s]&&(Wt[s].isError=!0)}throw f});Wt[s]={request:l(),ts:Date.now()}}return Wt[s].request}var Pt=Hu,Xn=s=>s&&s.type?s.type:"gifs",Gu=class{constructor(s,e={}){this.getQS=(t={})=>new URLSearchParams(es(Yn(es({},t),{api_key:this.apiKey,pingback_id:yu()}),this.qsParams)).toString(),this.apiKey=s,this.qsParams=e}categories(s){return Pt(`gifs/categories?${this.getQS(s)}`)}gif(s,e){const t=e!=null&&e.internal?"internal/":"";return Pt(`${t}gifs/${s}?${this.getQS()}`,{normalizer:oi})}gifs(s,e){return Array.isArray(s)?Pt(`gifs?${this.getQS({ids:s.join(",")})}`,{normalizer:as}):Pt(`gifs/categories/${s}/${e}?${this.getQS()}`,{normalizer:as})}emoji(s){return Pt(`emoji?${this.getQS(s)}`,{normalizer:as})}emojiDefaultVariations(s){return Pt(`emoji?${this.getQS(s)}`,{apiVersion:2,normalizer:as})}emojiVariations(s){return Pt(`emoji/${s}/variations?${this.getQS()}`,{apiVersion:2,normalizer:as})}animate(s,e={}){const t=this.getQS(Yn(es({},e),{m:s}));return Pt(`text/animate?${t}`,{normalizer:as})}search(s,e={}){const t=e.channel?`@${e.channel} ${s}`:s;let n;e.type==="text"&&(n=!0);const r=this.getQS(Yn(es({rating:"pg-13"},e),{q:t,excludeDynamicResults:n}));return Pt(`${Xn(e)}/search?${r}`,{normalizer:as})}subcategories(s,e){return Pt(`gifs/categories/${s}?${this.getQS(e)}`)}trending(s={}){return Pt(`${Xn(s)}/trending?${this.getQS(es({rating:"pg-13"},s))}`,{normalizer:as})}random(s){return Pt(`${Xn(s)}/random?${this.getQS(es({rating:"pg-13"},s))}`,{noCache:!0,normalizer:oi})}related(s,e={}){const{type:t="gifs"}=e;return Pt(`${t}/related?${this.getQS(es({gif_id:s,rating:"pg-13"},e))}`,{normalizer:as})}channels(s,e={}){return Pt(`channels/search?${this.getQS(es({q:s,rating:"pg-13"},e))}`)}},Wu=Gu,ui;if(typeof Iu<"u"){const{version:s}=Nu();(ui=Pa())!=null&&ui.get("X-GIPHY-SDK-NAME")||(ri("X-GIPHY-SDK-NAME","FetchAPI"),ri("X-GIPHY-SDK-VERSION",s))}function fi(s,e,t){const n=s.slice();return n[11]=e[t],n}function Yu(s){let e=[],t=new Map,n,r=Ve(s[1]);const i=a=>a[11].id;for(let a=0;a<r.length;a+=1){let l=fi(s,r,a),o=i(l);t.set(o,e[a]=di(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=De()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=De()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,n,l)},p(a,l){l&34&&(r=Ve(a[1]),e=Qt(e,l,i,1,a,r,t,n.parentNode,Kt,di,n,fi))},d(a){a&&m(n);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Xu(s){let e,t="No GIFs found";return{c(){e=y("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){d(e,"class","no-results svelte-x54k5n")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function Zu(s){let e,t="Loading...";return{c(){e=y("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){d(e,"class","loading svelte-x54k5n")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function di(s,e){let t,n,r,i,a,l,o;function u(){return e[8](e[11])}return{key:s,first:null,c(){t=y("button"),n=y("img"),a=z(),this.h()},l(f){t=k(f,"BUTTON",{class:!0});var p=D(t);n=k(p,"IMG",{src:!0,alt:!0,class:!0}),a=P(p),p.forEach(m),this.h()},h(){Be(n.src,r=e[11].images.fixed_height_small.url)||d(n,"src",r),d(n,"alt",i=e[11].title),d(n,"class","svelte-x54k5n"),d(t,"class","gif-item svelte-x54k5n"),this.first=t},m(f,p){j(f,t,p),c(t,n),c(t,a),l||(o=X(t,"click",u),l=!0)},p(f,p){e=f,p&2&&!Be(n.src,r=e[11].images.fixed_height_small.url)&&d(n,"src",r),p&2&&i!==(i=e[11].title)&&d(n,"alt",i)},d(f){f&&m(t),l=!1,o()}}}function Ku(s){let e,t,n,r,i,a="âœ•",l,o,u,f;function p(_,v){return _[2]?Zu:_[1].length===0?Xu:Yu}let h=p(s),g=h(s);return{c(){e=y("div"),t=y("div"),n=y("input"),r=z(),i=y("button"),i.textContent=a,l=z(),o=y("div"),g.c(),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=D(e);t=k(v,"DIV",{class:!0});var S=D(t);n=k(S,"INPUT",{type:!0,placeholder:!0,class:!0}),r=P(S),i=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-xkwxcu"&&(i.textContent=a),S.forEach(m),l=P(v),o=k(v,"DIV",{class:!0});var I=D(o);g.l(I),I.forEach(m),v.forEach(m),this.h()},h(){d(n,"type","text"),d(n,"placeholder","Search GIFs..."),d(n,"class","svelte-x54k5n"),d(i,"class","close-btn svelte-x54k5n"),d(t,"class","giphy-header svelte-x54k5n"),d(o,"class","gif-grid svelte-x54k5n"),d(e,"class","giphy-picker svelte-x54k5n")},m(_,v){j(_,e,v),c(e,t),c(t,n),lt(n,s[0]),c(t,r),c(t,i),c(e,l),c(e,o),g.m(o,null),u||(f=[X(n,"input",s[6]),X(n,"input",s[4]),X(i,"click",s[7])],u=!0)},p(_,[v]){v&1&&n.value!==_[0]&&lt(n,_[0]),h===(h=p(_))&&g?g.p(_,v):(g.d(1),g=h(_),g&&(g.c(),g.m(o,null)))},i:Ie,o:Ie,d(_){_&&m(e),g.d(),u=!1,Ae(f)}}}function Qu(s,e,t){const n=or();let r="",i=[],a=!1;const l=new Wu("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,a=!0);try{const{data:_}=await l.search(r,{limit:20});t(1,i=_)}catch(_){console.error("Error fetching GIFs:",_)}t(2,a=!1)}async function u(){t(2,a=!0);try{const{data:_}=await l.trending({limit:20});t(1,i=_),console.log("Loaded GIFs:",i.length,i)}catch(_){console.error("Error fetching trending GIFs:",_),t(1,i=[])}t(2,a=!1)}function f(_){n("select",_.images.fixed_height.url)}rs(()=>{u()});function p(){r=this.value,t(0,r)}return[r,i,a,n,o,f,p,()=>n("close"),_=>f(_)]}class Ju extends ct{constructor(e){super(),ut(this,e,Qu,Ku,ot,{})}}function hi(s){let e,t,n,r,i=(s[2]?"Your Profile":s[1].username)+"",a,l,o,u="Ã—",f,p,h,g,_,v,S,I,w,E="Username:",b,A,C=s[1].username+"",T,R,O,L,F,B;function q(Z,se){return Z[4]||Z[1].profilePicture?ef:$u}let V=q(s),N=V(s),x=s[2]&&pi(s),G=!s[2]&&gi(s);function U(Z,se){return Z[2]?lf:rf}let W=U(s),H=W(s),Y=s[2]&&vi(s);return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("h2"),a=Q(i),l=z(),o=y("button"),o.textContent=u,f=z(),p=y("div"),h=y("div"),g=y("div"),N.c(),_=z(),x&&x.c(),v=z(),S=y("div"),I=y("div"),w=y("span"),w.textContent=E,b=z(),A=y("span"),T=Q(C),R=z(),G&&G.c(),O=z(),H.c(),L=z(),Y&&Y.c(),this.h()},l(Z){e=k(Z,"DIV",{class:!0});var se=D(e);t=k(se,"DIV",{class:!0});var de=D(t);n=k(de,"DIV",{class:!0});var te=D(n);r=k(te,"H2",{class:!0});var ce=D(r);a=K(ce,i),ce.forEach(m),l=P(te),o=k(te,"BUTTON",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-12zniqk"&&(o.textContent=u),te.forEach(m),f=P(de),p=k(de,"DIV",{class:!0});var ue=D(p);h=k(ue,"DIV",{class:!0});var le=D(h);g=k(le,"DIV",{class:!0});var he=D(g);N.l(he),he.forEach(m),_=P(le),x&&x.l(le),le.forEach(m),v=P(ue),S=k(ue,"DIV",{class:!0});var Pe=D(S);I=k(Pe,"DIV",{class:!0});var re=D(I);w=k(re,"SPAN",{class:!0,"data-svelte-h":!0}),$(w)!=="svelte-1fffgfa"&&(w.textContent=E),b=P(re),A=k(re,"SPAN",{class:!0});var je=D(A);T=K(je,C),je.forEach(m),re.forEach(m),Pe.forEach(m),R=P(ue),G&&G.l(ue),O=P(ue),H.l(ue),ue.forEach(m),L=P(de),Y&&Y.l(de),de.forEach(m),se.forEach(m),this.h()},h(){d(r,"class","svelte-mn2c16"),d(o,"class","close-btn svelte-mn2c16"),d(n,"class","modal-header svelte-mn2c16"),d(g,"class","profile-picture-container svelte-mn2c16"),d(h,"class","profile-picture-section svelte-mn2c16"),d(w,"class","info-label svelte-mn2c16"),d(A,"class","info-value svelte-mn2c16"),d(I,"class","info-row svelte-mn2c16"),d(S,"class","user-info svelte-mn2c16"),d(p,"class","modal-body svelte-mn2c16"),d(t,"class","modal-content svelte-mn2c16"),d(e,"class","modal-overlay svelte-mn2c16")},m(Z,se){j(Z,e,se),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(t,f),c(t,p),c(p,h),c(h,g),N.m(g,null),c(h,_),x&&x.m(h,null),c(p,v),c(p,S),c(S,I),c(I,w),c(I,b),c(I,A),c(A,T),c(p,R),G&&G.m(p,null),c(p,O),H.m(p,null),c(t,L),Y&&Y.m(t,null),F||(B=[X(o,"click",s[9]),X(t,"click",_t(s[12])),X(e,"click",s[9])],F=!0)},p(Z,se){se&6&&i!==(i=(Z[2]?"Your Profile":Z[1].username)+"")&&ne(a,i),V===(V=q(Z))&&N?N.p(Z,se):(N.d(1),N=V(Z),N&&(N.c(),N.m(g,null))),Z[2]?x?x.p(Z,se):(x=pi(Z),x.c(),x.m(h,null)):x&&(x.d(1),x=null),se&2&&C!==(C=Z[1].username+"")&&ne(T,C),Z[2]?G&&(G.d(1),G=null):G?G.p(Z,se):(G=gi(Z),G.c(),G.m(p,O)),W===(W=U(Z))&&H?H.p(Z,se):(H.d(1),H=W(Z),H&&(H.c(),H.m(p,null))),Z[2]?Y?Y.p(Z,se):(Y=vi(Z),Y.c(),Y.m(t,null)):Y&&(Y.d(1),Y=null)},d(Z){Z&&m(e),N.d(),x&&x.d(),G&&G.d(),H.d(),Y&&Y.d(),F=!1,Ae(B)}}}function $u(s){let e,t=s[1].username.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","profile-picture-placeholder svelte-mn2c16"),Ee(e,"background-color",s[1].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&2&&Ee(e,"background-color",r[1].color)},d(r){r&&m(e)}}}function ef(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[4]||s[1].profilePicture)||d(e,"src",t),d(e,"alt",n=s[1].username),d(e,"class","profile-picture svelte-mn2c16")},m(r,i){j(r,e,i)},p(r,i){i&18&&!Be(e.src,t=r[4]||r[1].profilePicture)&&d(e,"src",t),i&2&&n!==(n=r[1].username)&&d(e,"alt",n)},d(r){r&&m(e)}}}function pi(s){let e,t,n=s[4]||s[1].profilePicture?"Change Picture":"Upload Picture",r,i,a,l,o;return{c(){e=y("div"),t=y("label"),r=Q(n),i=z(),a=y("input"),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=D(e);t=k(f,"LABEL",{for:!0,class:!0});var p=D(t);r=K(p,n),p.forEach(m),i=P(f),a=k(f,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),f.forEach(m),this.h()},h(){d(t,"for","profile-picture"),d(t,"class","upload-label svelte-mn2c16"),d(a,"id","profile-picture"),d(a,"type","file"),d(a,"accept","image/*"),d(a,"class","file-input svelte-mn2c16"),d(e,"class","upload-section svelte-mn2c16")},m(u,f){j(u,e,f),c(e,t),c(t,r),c(e,i),c(e,a),l||(o=X(a,"change",s[10]),l=!0)},p(u,f){f&18&&n!==(n=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&ne(r,n)},d(u){u&&m(e),l=!1,o()}}}function gi(s){let e,t,n,r="Personal Notes:",i,a,l=!s[6]&&mi(s);function o(p,h){return p[6]?nf:p[5]?sf:tf}let u=o(s),f=u(s);return{c(){e=y("div"),t=y("div"),n=y("label"),n.textContent=r,i=z(),l&&l.c(),a=z(),f.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=D(e);t=k(h,"DIV",{class:!0});var g=D(t);n=k(g,"LABEL",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-1vz1uda"&&(n.textContent=r),i=P(g),l&&l.l(g),g.forEach(m),a=P(h),f.l(h),h.forEach(m),this.h()},h(){d(n,"class","notes-label svelte-mn2c16"),d(t,"class","notes-header svelte-mn2c16"),d(e,"class","notes-section svelte-mn2c16")},m(p,h){j(p,e,h),c(e,t),c(t,n),c(t,i),l&&l.m(t,null),c(e,a),f.m(e,null)},p(p,h){p[6]?l&&(l.d(1),l=null):l?l.p(p,h):(l=mi(p),l.c(),l.m(t,null)),u===(u=o(p))&&f?f.p(p,h):(f.d(1),f=u(p),f&&(f.c(),f.m(e,null)))},d(p){p&&m(e),l&&l.d(),f.d()}}}function mi(s){let e,t=s[5]?"Edit":"Add Note",n,r,i;return{c(){e=y("button"),n=Q(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var l=D(e);n=K(l,t),l.forEach(m),this.h()},h(){d(e,"class","edit-note-btn svelte-mn2c16")},m(a,l){j(a,e,l),c(e,n),r||(i=X(e,"click",s[13]),r=!0)},p(a,l){l&32&&t!==(t=a[5]?"Edit":"Add Note")&&ne(n,t)},d(a){a&&m(e),r=!1,i()}}}function tf(s){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=y("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){d(e,"class","note-placeholder svelte-mn2c16")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function sf(s){let e,t;return{c(){e=y("div"),t=Q(s[5]),this.h()},l(n){e=k(n,"DIV",{class:!0});var r=D(e);t=K(r,s[5]),r.forEach(m),this.h()},h(){d(e,"class","note-display svelte-mn2c16")},m(n,r){j(n,e,r),c(e,t)},p(n,r){r&32&&ne(t,n[5])},d(n){n&&m(e)}}}function nf(s){let e,t,n,r,i="Cancel",a,l,o="Save Note",u,f;return{c(){e=y("textarea"),t=z(),n=y("div"),r=y("button"),r.textContent=i,a=z(),l=y("button"),l.textContent=o,this.h()},l(p){e=k(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),D(e).forEach(m),t=P(p),n=k(p,"DIV",{class:!0});var h=D(n);r=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-hulrz8"&&(r.textContent=i),a=P(h),l=k(h,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-9d2dbm"&&(l.textContent=o),h.forEach(m),this.h()},h(){d(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),d(e,"class","note-textarea svelte-mn2c16"),d(e,"rows","3"),d(r,"class","cancel-note-btn svelte-mn2c16"),d(l,"class","save-note-btn svelte-mn2c16"),d(n,"class","note-actions svelte-mn2c16")},m(p,h){j(p,e,h),lt(e,s[5]),j(p,t,h),j(p,n,h),c(n,r),c(n,a),c(n,l),u||(f=[X(e,"input",s[14]),X(r,"click",s[15]),X(l,"click",s[8])],u=!0)},p(p,h){h&32&&lt(e,p[5])},d(p){p&&(m(e),m(t),m(n)),u=!1,Ae(f)}}}function rf(s){let e,t,n,r,i=s[1].status.charAt(0).toUpperCase()+s[1].status.slice(1)+"",a;return{c(){e=y("div"),t=y("span"),n=z(),r=y("span"),a=Q(i),this.h()},l(l){e=k(l,"DIV",{class:!0});var o=D(e);t=k(o,"SPAN",{class:!0,style:!0}),D(t).forEach(m),n=P(o),r=k(o,"SPAN",{class:!0});var u=D(r);a=K(u,i),u.forEach(m),o.forEach(m),this.h()},h(){d(t,"class","status-dot svelte-mn2c16"),Ee(t,"background-color",tn(s[1].status)),d(r,"class","status-text svelte-mn2c16"),d(e,"class","status-display svelte-mn2c16")},m(l,o){j(l,e,o),c(e,t),c(e,n),c(e,r),c(r,a)},p(l,o){o&2&&Ee(t,"background-color",tn(l[1].status)),o&2&&i!==(i=l[1].status.charAt(0).toUpperCase()+l[1].status.slice(1)+"")&&ne(a,i)},d(l){l&&m(e)}}}function lf(s){let e,t,n="Status:",r,i,a,l,o,u,f,p,h,g,_,v,S,I,w,E,b,A;return{c(){e=y("div"),t=y("label"),t.textContent=n,r=z(),i=y("div"),a=y("button"),l=y("span"),o=Q(`\r
								Active`),f=z(),p=y("button"),h=y("span"),g=Q(`\r
								Away`),v=z(),S=y("button"),I=y("span"),w=Q(`\r
								Busy`),this.h()},l(C){e=k(C,"DIV",{class:!0});var T=D(e);t=k(T,"LABEL",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-138t5u0"&&(t.textContent=n),r=P(T),i=k(T,"DIV",{class:!0});var R=D(i);a=k(R,"BUTTON",{class:!0});var O=D(a);l=k(O,"SPAN",{class:!0,style:!0}),D(l).forEach(m),o=K(O,`\r
								Active`),O.forEach(m),f=P(R),p=k(R,"BUTTON",{class:!0});var L=D(p);h=k(L,"SPAN",{class:!0,style:!0}),D(h).forEach(m),g=K(L,`\r
								Away`),L.forEach(m),v=P(R),S=k(R,"BUTTON",{class:!0});var F=D(S);I=k(F,"SPAN",{class:!0,style:!0}),D(I).forEach(m),w=K(F,`\r
								Busy`),F.forEach(m),R.forEach(m),T.forEach(m),this.h()},h(){d(t,"class","status-label svelte-mn2c16"),d(l,"class","status-dot svelte-mn2c16"),Ee(l,"background-color",tn("active")),d(a,"class",u="status-btn "+(s[3]==="active"?"selected":"")+" svelte-mn2c16"),d(h,"class","status-dot svelte-mn2c16"),Ee(h,"background-color",tn("away")),d(p,"class",_="status-btn "+(s[3]==="away"?"selected":"")+" svelte-mn2c16"),d(I,"class","status-dot svelte-mn2c16"),Ee(I,"background-color",tn("busy")),d(S,"class",E="status-btn "+(s[3]==="busy"?"selected":"")+" svelte-mn2c16"),d(i,"class","status-options svelte-mn2c16"),d(e,"class","status-section svelte-mn2c16")},m(C,T){j(C,e,T),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),c(a,o),c(i,f),c(i,p),c(p,h),c(p,g),c(i,v),c(i,S),c(S,I),c(S,w),b||(A=[X(a,"click",s[16]),X(p,"click",s[17]),X(S,"click",s[18])],b=!0)},p(C,T){T&8&&u!==(u="status-btn "+(C[3]==="active"?"selected":"")+" svelte-mn2c16")&&d(a,"class",u),T&8&&_!==(_="status-btn "+(C[3]==="away"?"selected":"")+" svelte-mn2c16")&&d(p,"class",_),T&8&&E!==(E="status-btn "+(C[3]==="busy"?"selected":"")+" svelte-mn2c16")&&d(S,"class",E)},d(C){C&&m(e),b=!1,Ae(A)}}}function vi(s){let e,t,n="Cancel",r,i,a="Save Changes",l,o;return{c(){e=y("div"),t=y("button"),t.textContent=n,r=z(),i=y("button"),i.textContent=a,this.h()},l(u){e=k(u,"DIV",{class:!0});var f=D(e);t=k(f,"BUTTON",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-2pqgi7"&&(t.textContent=n),r=P(f),i=k(f,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-2yi6cr"&&(i.textContent=a),f.forEach(m),this.h()},h(){d(t,"class","cancel-btn svelte-mn2c16"),d(i,"class","save-btn svelte-mn2c16"),d(e,"class","modal-footer svelte-mn2c16")},m(u,f){j(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=[X(t,"click",s[9]),X(i,"click",s[11])],l=!0)},p:Ie,d(u){u&&m(e),l=!1,Ae(o)}}}function af(s){let e,t=s[0]&&s[1]&&hi(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=hi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function tn(s){switch(s){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function of(s,e,t){let{isOpen:n=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,a=(r==null?void 0:r.status)||"active";r!=null&&r.profilePicture;let l=null,o=null,u="",f=!1;function p(){if(!r)return;const T=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=T[r.id]||"")}function h(){if(!r)return;const T=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?T[r.id]=u:delete T[r.id],localStorage.setItem("userNotes",JSON.stringify(T)),t(6,f=!1)}function g(){t(0,n=!1),l=null,t(4,o=null),t(6,f=!1)}function _(T){var L;const O=(L=T.target.files)==null?void 0:L[0];if(O&&O.type.startsWith("image/")){l=O;const F=new FileReader;F.onload=B=>{var q;t(4,o=(q=B.target)==null?void 0:q.result)},F.readAsDataURL(O)}}function v(){i&&(l&&o?si(a,o):a!==(r==null?void 0:r.status)&&si(a,void 0),g())}function S(T){ds.call(this,s,T)}const I=()=>t(6,f=!0);function w(){u=this.value,t(5,u)}const E=()=>{t(6,f=!1),p()},b=()=>t(3,a="active"),A=()=>t(3,a="away"),C=()=>t(3,a="busy");return s.$$set=T=>{"isOpen"in T&&t(0,n=T.isOpen),"user"in T&&t(1,r=T.user),"isOwnProfile"in T&&t(2,i=T.isOwnProfile)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(3,a=r.status),r.profilePicture,p())},[n,r,i,a,o,u,f,p,h,g,_,v,S,I,w,E,b,A,C]}class Ar extends ct{constructor(e){super(),ut(this,e,of,af,ot,{isOpen:0,user:1,isOwnProfile:2})}}function _i(s){let e,t,n,r=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,i,a,l,o,u,f,p=s[1].isPinned?"ðŸ“Œ":"ðŸ“",h,g,_=s[1].isPinned?"Unpin":"Pin",v,S,I,w,E=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,b,A,C,T=s[11]&&s[6]&&bi(s),R=s[7]&&ki(s),O=s[12]&&yi(s),L=s[12]&&wi(s);return{c(){e=y("div"),t=y("div"),n=y("button"),n.innerHTML=r,i=z(),T&&T.c(),a=z(),R&&R.c(),l=z(),O&&O.c(),o=z(),u=y("button"),f=y("span"),h=Q(p),g=z(),v=Q(_),S=Q(" Message"),I=z(),w=y("button"),w.innerHTML=E,b=z(),L&&L.c(),this.h()},l(F){e=k(F,"DIV",{class:!0});var B=D(e);t=k(B,"DIV",{class:!0,style:!0});var q=D(t);n=k(q,"BUTTON",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-1bhlhgs"&&(n.innerHTML=r),i=P(q),T&&T.l(q),a=P(q),R&&R.l(q),l=P(q),O&&O.l(q),o=P(q),u=k(q,"BUTTON",{class:!0});var V=D(u);f=k(V,"SPAN",{class:!0});var N=D(f);h=K(N,p),N.forEach(m),g=P(V),v=K(V,_),S=K(V," Message"),V.forEach(m),I=P(q),w=k(q,"BUTTON",{class:!0,"data-svelte-h":!0}),$(w)!=="svelte-pkfnng"&&(w.innerHTML=E),b=P(q),L&&L.l(q),q.forEach(m),B.forEach(m),this.h()},h(){d(n,"class","menu-item svelte-5kwx2s"),d(f,"class","menu-icon svelte-5kwx2s"),d(u,"class","menu-item svelte-5kwx2s"),d(w,"class","menu-item copy svelte-5kwx2s"),d(t,"class","context-menu svelte-5kwx2s"),Ee(t,"top",s[9]+"px"),Ee(t,"left",s[10]+"px"),d(e,"class","context-menu-overlay svelte-5kwx2s")},m(F,B){j(F,e,B),c(e,t),c(t,n),c(t,i),T&&T.m(t,null),c(t,a),R&&R.m(t,null),c(t,l),O&&O.m(t,null),c(t,o),c(t,u),c(u,f),c(f,h),c(u,g),c(u,v),c(u,S),c(t,I),c(t,w),c(t,b),L&&L.m(t,null),s[18](t),A||(C=[X(n,"click",function(){Is(s[5])&&s[5].apply(this,arguments)}),X(u,"click",function(){Is(s[4])&&s[4].apply(this,arguments)}),X(w,"click",s[17]),X(t,"click",_t(s[16])),X(e,"click",s[19])],A=!0)},p(F,B){s=F,s[11]&&s[6]?T?T.p(s,B):(T=bi(s),T.c(),T.m(t,a)):T&&(T.d(1),T=null),s[7]?R?R.p(s,B):(R=ki(s),R.c(),R.m(t,l)):R&&(R.d(1),R=null),s[12]?O?O.p(s,B):(O=yi(s),O.c(),O.m(t,o)):O&&(O.d(1),O=null),B&2&&p!==(p=s[1].isPinned?"ðŸ“Œ":"ðŸ“")&&ne(h,p),B&2&&_!==(_=s[1].isPinned?"Unpin":"Pin")&&ne(v,_),s[12]?L?L.p(s,B):(L=wi(s),L.c(),L.m(t,null)):L&&(L.d(1),L=null),B&512&&Ee(t,"top",s[9]+"px"),B&1024&&Ee(t,"left",s[10]+"px")},d(F){F&&m(e),T&&T.d(),R&&R.d(),O&&O.d(),L&&L.d(),s[18](null),A=!1,Ae(C)}}}function bi(s){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,n,r;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,a){j(i,e,a),n||(r=X(e,"click",function(){Is(s[6])&&s[6].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&m(e),n=!1,r()}}}function ki(s){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,n,r;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,a){j(i,e,a),n||(r=X(e,"click",function(){Is(s[7])&&s[7].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&m(e),n=!1,r()}}}function yi(s){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,n,r;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){d(e,"class","menu-item svelte-5kwx2s")},m(i,a){j(i,e,a),n||(r=X(e,"click",function(){Is(s[2])&&s[2].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&m(e),n=!1,r()}}}function wi(s){let e,t,n,r=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,i,a;return{c(){e=y("div"),t=z(),n=y("button"),n.innerHTML=r,this.h()},l(l){e=k(l,"DIV",{class:!0}),D(e).forEach(m),t=P(l),n=k(l,"BUTTON",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-g8outl"&&(n.innerHTML=r),this.h()},h(){d(e,"class","menu-divider svelte-5kwx2s"),d(n,"class","menu-item delete svelte-5kwx2s")},m(l,o){j(l,e,o),j(l,t,o),j(l,n,o),i||(a=X(n,"click",function(){Is(s[3])&&s[3].apply(this,arguments)}),i=!0)},p(l,o){s=l},d(l){l&&(m(e),m(t),m(n)),i=!1,a()}}}function cf(s){let e,t=s[0]&&_i(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=_i(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function uf(s,e,t){let n,r,i,a,l;Re(s,ns,T=>t(15,l=T));let{message:o}=e,{x:u=0}=e,{y:f=0}=e,{visible:p=!1}=e,{onEdit:h}=e,{onDelete:g}=e,{onPin:_}=e,{onReply:v}=e,{onDownload:S=void 0}=e,{onForward:I=void 0}=e,w;function E(T){ds.call(this,s,T)}const b=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function A(T){et[T?"unshift":"push"](()=>{w=T,t(8,w)})}const C=()=>t(0,p=!1);return s.$$set=T=>{"message"in T&&t(1,o=T.message),"x"in T&&t(13,u=T.x),"y"in T&&t(14,f=T.y),"visible"in T&&t(0,p=T.visible),"onEdit"in T&&t(2,h=T.onEdit),"onDelete"in T&&t(3,g=T.onDelete),"onPin"in T&&t(4,_=T.onPin),"onReply"in T&&t(5,v=T.onReply),"onDownload"in T&&t(6,S=T.onDownload),"onForward"in T&&t(7,I=T.onForward)},s.$$.update=()=>{s.$$.dirty&32770&&t(12,n=o.userId===(l==null?void 0:l.id)),s.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),s.$$.dirty&8448&&t(10,i=(()=>{if(!w)return u;const T=w.offsetWidth||200,R=window.innerWidth;return u+T>R?u-T:u})()),s.$$.dirty&16640&&t(9,a=(()=>{if(!w)return f;const T=w.offsetHeight||300,R=window.innerHeight;return f+T>R?f-T:f})())},[p,o,h,g,_,v,S,I,w,a,i,r,n,u,f,l,E,b,A,C]}class ff extends ct{constructor(e){super(),ut(this,e,uf,cf,ot,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function Ei(s,e,t){const n=s.slice();return n[9]=e[t],n}function Ti(s){let e,t,n,r,i="Forward Message",a,l,o="âœ•",u,f,p,h="Choose a channel to forward this message to:",g,_,v,S,I=Ve(s[2]),w=[];for(let E=0;E<I.length;E+=1)w[E]=Ai(Ei(s,I,E));return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("h3"),r.textContent=i,a=z(),l=y("button"),l.textContent=o,u=z(),f=y("div"),p=y("p"),p.textContent=h,g=z(),_=y("div");for(let E=0;E<w.length;E+=1)w[E].c();this.h()},l(E){e=k(E,"DIV",{class:!0});var b=D(e);t=k(b,"DIV",{class:!0});var A=D(t);n=k(A,"DIV",{class:!0});var C=D(n);r=k(C,"H3",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-1xq5ns4"&&(r.textContent=i),a=P(C),l=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-19jqbg1"&&(l.textContent=o),C.forEach(m),u=P(A),f=k(A,"DIV",{class:!0});var T=D(f);p=k(T,"P",{class:!0,"data-svelte-h":!0}),$(p)!=="svelte-alvqmp"&&(p.textContent=h),g=P(T),_=k(T,"DIV",{class:!0});var R=D(_);for(let O=0;O<w.length;O+=1)w[O].l(R);R.forEach(m),T.forEach(m),A.forEach(m),b.forEach(m),this.h()},h(){d(r,"class","svelte-70r9o1"),d(l,"class","close-button svelte-70r9o1"),d(n,"class","dialog-header svelte-70r9o1"),d(p,"class","dialog-description svelte-70r9o1"),d(_,"class","channel-list svelte-70r9o1"),d(f,"class","dialog-content svelte-70r9o1"),d(t,"class","dialog svelte-70r9o1"),d(e,"class","dialog-overlay svelte-70r9o1")},m(E,b){j(E,e,b),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(f,g),c(f,_);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(_,null);v||(S=[X(l,"click",s[5]),X(t,"click",_t(s[6])),X(e,"click",s[5])],v=!0)},p(E,b){if(b&28){I=Ve(E[2]);let A;for(A=0;A<I.length;A+=1){const C=Ei(E,I,A);w[A]?w[A].p(C,b):(w[A]=Ai(C),w[A].c(),w[A].m(_,null))}for(;A<w.length;A+=1)w[A].d(1);w.length=I.length}},d(E){E&&m(e),Dn(w,E),v=!1,Ae(S)}}}function Si(s){let e,t,n,r,i=s[9].name+"",a,l,o,u;function f(_,v){return _[9].type==="dm"?hf:df}let p=f(s),h=p(s);function g(){return s[7](s[9])}return{c(){e=y("button"),t=y("span"),h.c(),n=z(),r=y("span"),a=Q(i),l=z(),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var v=D(e);t=k(v,"SPAN",{class:!0});var S=D(t);h.l(S),S.forEach(m),n=P(v),r=k(v,"SPAN",{class:!0});var I=D(r);a=K(I,i),I.forEach(m),l=P(v),v.forEach(m),this.h()},h(){d(t,"class","channel-icon svelte-70r9o1"),d(r,"class","channel-name svelte-70r9o1"),d(e,"class","channel-item svelte-70r9o1")},m(_,v){j(_,e,v),c(e,t),h.m(t,null),c(e,n),c(e,r),c(r,a),c(e,l),o||(u=X(e,"click",g),o=!0)},p(_,v){s=_,p!==(p=f(s))&&(h.d(1),h=p(s),h&&(h.c(),h.m(t,null))),v&4&&i!==(i=s[9].name+"")&&ne(a,i)},d(_){_&&m(e),h.d(),o=!1,u()}}}function df(s){let e;return{c(){e=Q("#")},l(t){e=K(t,"#")},m(t,n){j(t,e,n)},d(t){t&&m(e)}}}function hf(s){let e;return{c(){e=Q("ðŸ’¬")},l(t){e=K(t,"ðŸ’¬")},m(t,n){j(t,e,n)},d(t){t&&m(e)}}}function Ai(s){let e,t=s[9].id!==s[3]&&Si(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,r){n[9].id!==n[3]?t?t.p(n,r):(t=Si(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function pf(s){let e,t=s[0]&&s[1]&&Ti(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=Ti(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function gf(s,e,t){let n,r,i;Re(s,Bs,h=>t(8,n=h)),Re(s,us,h=>t(2,r=h)),Re(s,Os,h=>t(3,i=h));let{visible:a=!1}=e,{message:l=null}=e;function o(h){!l||!n||(n.emit("message",{channelId:h,text:l.text,type:l.type,gifUrl:l.gifUrl,fileUrl:l.fileUrl,fileName:l.fileName,fileSize:l.fileSize,files:l.files}),t(0,a=!1))}function u(){t(0,a=!1)}function f(h){ds.call(this,s,h)}const p=h=>o(h.id);return s.$$set=h=>{"visible"in h&&t(0,a=h.visible),"message"in h&&t(1,l=h.message)},[a,l,r,i,o,u,f,p]}class mf extends ct{constructor(e){super(),ut(this,e,gf,pf,ot,{visible:0,message:1})}}function Ci(s){let e,t,n,r,i,a,l,o="Ã—",u,f,p,h,g,_,v,S,I,w,E,b,A,C;return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("h2"),i=Q(s[1]),a=z(),l=y("button"),l.textContent=o,u=z(),f=y("div"),p=y("p"),h=Q(s[2]),g=z(),_=y("div"),v=y("button"),S=Q(s[4]),I=z(),w=y("button"),E=Q(s[3]),this.h()},l(T){e=k(T,"DIV",{class:!0});var R=D(e);t=k(R,"DIV",{class:!0});var O=D(t);n=k(O,"DIV",{class:!0});var L=D(n);r=k(L,"H2",{class:!0});var F=D(r);i=K(F,s[1]),F.forEach(m),a=P(L),l=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-y9ayml"&&(l.textContent=o),L.forEach(m),u=P(O),f=k(O,"DIV",{class:!0});var B=D(f);p=k(B,"P",{class:!0});var q=D(p);h=K(q,s[2]),q.forEach(m),B.forEach(m),g=P(O),_=k(O,"DIV",{class:!0});var V=D(_);v=k(V,"BUTTON",{class:!0});var N=D(v);S=K(N,s[4]),N.forEach(m),I=P(V),w=k(V,"BUTTON",{class:!0});var x=D(w);E=K(x,s[3]),x.forEach(m),V.forEach(m),O.forEach(m),R.forEach(m),this.h()},h(){d(r,"class","svelte-1myntg4"),d(l,"class","close-btn svelte-1myntg4"),d(n,"class","modal-header svelte-1myntg4"),d(p,"class","svelte-1myntg4"),d(f,"class","modal-body svelte-1myntg4"),d(v,"class","cancel-btn svelte-1myntg4"),d(w,"class",b="confirm-btn "+s[5]+" svelte-1myntg4"),d(_,"class","modal-footer svelte-1myntg4"),d(t,"class","modal-content svelte-1myntg4"),d(e,"class","modal-overlay svelte-1myntg4")},m(T,R){j(T,e,R),c(e,t),c(t,n),c(n,r),c(r,i),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(p,h),c(t,g),c(t,_),c(_,v),c(v,S),c(_,I),c(_,w),c(w,E),A||(C=[X(l,"click",s[7]),X(v,"click",s[7]),X(w,"click",s[6]),X(t,"click",_t(s[10])),X(e,"click",s[7])],A=!0)},p(T,R){R&2&&ne(i,T[1]),R&4&&ne(h,T[2]),R&16&&ne(S,T[4]),R&8&&ne(E,T[3]),R&32&&b!==(b="confirm-btn "+T[5]+" svelte-1myntg4")&&d(w,"class",b)},d(T){T&&m(e),A=!1,Ae(C)}}}function vf(s){let e,t=s[0]&&Ci(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=Ci(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function _f(s,e,t){let{isOpen:n=!1}=e,{title:r="Confirm Action"}=e,{message:i="Are you sure you want to proceed?"}=e,{confirmText:a="Confirm"}=e,{cancelText:l="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:f=()=>{}}=e;function p(){u()}function h(){f()}function g(v){v.key==="Escape"&&n&&h()}rs(()=>(window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}));function _(v){ds.call(this,s,v)}return s.$$set=v=>{"isOpen"in v&&t(0,n=v.isOpen),"title"in v&&t(1,r=v.title),"message"in v&&t(2,i=v.message),"confirmText"in v&&t(3,a=v.confirmText),"cancelText"in v&&t(4,l=v.cancelText),"variant"in v&&t(5,o=v.variant),"onConfirm"in v&&t(8,u=v.onConfirm),"onCancel"in v&&t(9,f=v.onCancel)},[n,r,i,a,l,o,p,h,u,f,_]}class Cs extends ct{constructor(e){super(),ut(this,e,_f,vf,ot,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:bf}=cr;function Ii(s,e,t){const n=s.slice();n[68]=e[t];const r=n[19](n[68].user);n[69]=r;const i=n[33](n[68].replyTo);return n[70]=i,n}function Di(s,e,t){const n=s.slice();return n[73]=e[t],n[75]=t,n}function Oi(s){let e,t="<span>New Messages</span>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){d(e,"class","new-messages-divider svelte-zjz65z")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function kf(s){let e,t=s[68].user.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","avatar-placeholder svelte-zjz65z"),Ee(e,"background-color",s[20](s[68].user))},m(r,i){j(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[68].user.charAt(0).toUpperCase()+"")&&ne(n,t),i[0]&1&&Ee(e,"background-color",r[20](r[68].user))},d(r){r&&m(e)}}}function yf(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[69].profilePicture)||d(e,"src",t),d(e,"alt",n=s[68].user),d(e,"class","avatar svelte-zjz65z")},m(r,i){j(r,e,i)},p(r,i){i[0]&1&&!Be(e.src,t=r[69].profilePicture)&&d(e,"src",t),i[0]&1&&n!==(n=r[68].user)&&d(e,"alt",n)},d(r){r&&m(e)}}}function wf(s){let e,t=s[68].user+"",n;return{c(){e=y("span"),n=Q(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","username svelte-zjz65z")},m(r,i){j(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[68].user+"")&&ne(n,t)},d(r){r&&m(e)}}}function Ef(s){let e,t=s[68].user+"",n,r,i;function a(){return s[44](s[69])}return{c(){e=y("button"),n=Q(t),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var o=D(e);n=K(o,t),o.forEach(m),this.h()},h(){d(e,"class","username svelte-zjz65z")},m(l,o){j(l,e,o),c(e,n),r||(i=X(e,"click",a),r=!0)},p(l,o){s=l,o[0]&1&&t!==(t=s[68].user+"")&&ne(n,t)},d(l){l&&m(e),r=!1,i()}}}function Ni(s){let e,t="ðŸ“Œ";return{c(){e=y("span"),e.textContent=t,this.h()},l(n){e=k(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),$(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){d(e,"class","pin-badge svelte-zjz65z"),d(e,"title","Pinned message")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function Ri(s){let e,t="(edited)";return{c(){e=y("span"),e.textContent=t,this.h()},l(n){e=k(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),$(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){d(e,"class","edited-badge svelte-zjz65z"),d(e,"title","Edited")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function Pi(s){let e,t,n,r,i,a=s[70].user+"",l,o,u,f=s[70].text.substring(0,100)+"",p,h=s[70].text.length>100?"...":"",g,_,v;function S(){return s[45](s[70])}return{c(){e=y("div"),t=y("div"),n=z(),r=y("div"),i=y("span"),l=Q(a),o=z(),u=y("span"),p=Q(f),g=Q(h),this.h()},l(I){e=k(I,"DIV",{class:!0});var w=D(e);t=k(w,"DIV",{class:!0}),D(t).forEach(m),n=P(w),r=k(w,"DIV",{class:!0});var E=D(r);i=k(E,"SPAN",{class:!0});var b=D(i);l=K(b,a),b.forEach(m),o=P(E),u=k(E,"SPAN",{class:!0});var A=D(u);p=K(A,f),g=K(A,h),A.forEach(m),E.forEach(m),w.forEach(m),this.h()},h(){d(t,"class","reply-line svelte-zjz65z"),d(i,"class","reply-username svelte-zjz65z"),d(u,"class","reply-text svelte-zjz65z"),d(r,"class","reply-content svelte-zjz65z"),d(e,"class","reply-preview svelte-zjz65z")},m(I,w){j(I,e,w),c(e,t),c(e,n),c(e,r),c(r,i),c(i,l),c(r,o),c(r,u),c(u,p),c(u,g),_||(v=X(e,"click",S),_=!0)},p(I,w){s=I,w[0]&1&&a!==(a=s[70].user+"")&&ne(l,a),w[0]&1&&f!==(f=s[70].text.substring(0,100)+"")&&ne(p,f),w[0]&1&&h!==(h=s[70].text.length>100?"...":"")&&ne(g,h)},d(I){I&&m(e),_=!1,v()}}}function Tf(s){let e;function t(i,a){return i[68].type==="gif"&&i[68].gifUrl?If:i[68].type==="file"&&(i[68].fileUrl||i[68].files)?Cf:Af}let n=t(s),r=n(s);return{c(){e=y("div"),r.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var a=D(e);r.l(a),a.forEach(m),this.h()},h(){d(e,"class","message-content")},m(i,a){j(i,e,a),r.m(e,null)},p(i,a){n===(n=t(i))&&r?r.p(i,a):(r.d(1),r=n(i),r&&(r.c(),r.m(e,null)))},d(i){i&&m(e),r.d()}}}function Sf(s){let e,t,n,r,i,a="Cancel",l,o,u="Save",f,p;function h(..._){return s[47](s[68],..._)}function g(){return s[48](s[68])}return{c(){e=y("div"),t=y("textarea"),n=z(),r=y("div"),i=y("button"),i.textContent=a,l=z(),o=y("button"),o.textContent=u,this.h()},l(_){e=k(_,"DIV",{class:!0});var v=D(e);t=k(v,"TEXTAREA",{class:!0,rows:!0}),D(t).forEach(m),n=P(v),r=k(v,"DIV",{class:!0});var S=D(r);i=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-1czerce"&&(i.textContent=a),l=P(S),o=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-w3glyi"&&(o.textContent=u),S.forEach(m),v.forEach(m),this.h()},h(){d(t,"class","edit-textarea svelte-zjz65z"),d(t,"rows","3"),d(i,"class","edit-cancel svelte-zjz65z"),d(o,"class","edit-save svelte-zjz65z"),d(r,"class","edit-actions svelte-zjz65z"),d(e,"class","edit-mode svelte-zjz65z")},m(_,v){j(_,e,v),c(e,t),lt(t,s[10]),c(e,n),c(e,r),c(r,i),c(r,l),c(r,o),f||(p=[X(t,"input",s[46]),X(t,"keydown",h),X(i,"click",s[25]),X(o,"click",g)],f=!0)},p(_,v){s=_,v[0]&1024&&lt(t,s[10])},d(_){_&&m(e),f=!1,Ae(p)}}}function Af(s){let e,t,n=Sn(s[68].text)+"";return{c(){e=y("div"),t=new Yl(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=D(e);t=Wl(i,!1),i.forEach(m),this.h()},h(){t.a=null,d(e,"class","markdown-content svelte-zjz65z")},m(r,i){j(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=Sn(r[68].text)+"")&&t.p(n)},d(r){r&&m(e)}}}function Cf(s){let e,t;function n(l,o){if(l[68].files&&l[68].files.length>1)return Of;if(l[68].fileUrl)return Df}let r=n(s),i=r&&r(s),a=s[68].text&&(s[68].files?s[68].text!==`Shared ${s[68].files.length} files`:s[68].text!==`Shared: ${s[68].fileName}`)&&xi(s);return{c(){i&&i.c(),e=z(),a&&a.c(),t=De()},l(l){i&&i.l(l),e=P(l),a&&a.l(l),t=De()},m(l,o){i&&i.m(l,o),j(l,e,o),a&&a.m(l,o),j(l,t,o)},p(l,o){r===(r=n(l))&&i?i.p(l,o):(i&&i.d(1),i=r&&r(l),i&&(i.c(),i.m(e.parentNode,e))),l[68].text&&(l[68].files?l[68].text!==`Shared ${l[68].files.length} files`:l[68].text!==`Shared: ${l[68].fileName}`)?a?a.p(l,o):(a=xi(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(l){l&&(m(e),m(t)),i&&i.d(l),a&&a.d(l)}}}function If(s){let e,t,n,r;return{c(){e=y("img"),this.h()},l(i){e=k(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Be(e.src,t=s[68].gifUrl)||d(e,"src",t),d(e,"alt","GIF"),d(e,"class",n="gif "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(e,"data-spoiler",r=s[68].isSpoiler?"true":"false")},m(i,a){j(i,e,a)},p(i,a){a[0]&1&&!Be(e.src,t=i[68].gifUrl)&&d(e,"src",t),a[0]&1&&n!==(n="gif "+(i[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(e,"class",n),a[0]&1&&r!==(r=i[68].isSpoiler?"true":"false")&&d(e,"data-spoiler",r)},d(i){i&&m(e)}}}function Df(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Cr(l[68].fileName)),e?Pf:(t==null&&(t=!!La(l[68].fileName)),t?Rf:Nf)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=De()},l(l){a.l(l),n=De()},m(l,o){a.m(l,o),j(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&m(n),a.d(l)}}}function Of(s){let e,t=Ve(s[68].files.slice(0,4)),n=[];for(let r=0;r<t.length;r+=1)n[r]=Li(Di(s,t,r));return{c(){e=y("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var i=D(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(m),this.h()},h(){d(e,"class","files-gallery svelte-zjz65z"),ve(e,"has-more",s[68].files.length>4)},m(r,i){j(r,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,i){if(i[0]&1|i[1]&272){t=Ve(r[68].files.slice(0,4));let a;for(a=0;a<t.length;a+=1){const l=Di(r,t,a);n[a]?n[a].p(l,i):(n[a]=Li(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}i[0]&1&&ve(e,"has-more",r[68].files.length>4)},d(r){r&&m(e),Dn(n,r)}}}function Nf(s){let e,t,n=ms(s[68].fileName)+"",r,i,a,l,o=s[68].fileName+"",u,f,p,h=gs(s[68].fileSize)+"",g,_,v;return{c(){e=y("a"),t=y("span"),r=Q(n),i=z(),a=y("div"),l=y("span"),u=Q(o),f=z(),p=y("span"),g=Q(h),this.h()},l(S){e=k(S,"A",{href:!0,download:!0,class:!0});var I=D(e);t=k(I,"SPAN",{class:!0});var w=D(t);r=K(w,n),w.forEach(m),i=P(I),a=k(I,"DIV",{class:!0});var E=D(a);l=k(E,"SPAN",{class:!0});var b=D(l);u=K(b,o),b.forEach(m),f=P(E),p=k(E,"SPAN",{class:!0});var A=D(p);g=K(A,h),A.forEach(m),E.forEach(m),I.forEach(m),this.h()},h(){d(t,"class","file-icon svelte-zjz65z"),d(l,"class","file-name svelte-zjz65z"),d(p,"class","file-size svelte-zjz65z"),d(a,"class","file-info svelte-zjz65z"),d(e,"href",_=$e(s[68].fileUrl)),d(e,"download",v=s[68].fileName),d(e,"class","file-attachment svelte-zjz65z")},m(S,I){j(S,e,I),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,g)},p(S,I){I[0]&1&&n!==(n=ms(S[68].fileName)+"")&&ne(r,n),I[0]&1&&o!==(o=S[68].fileName+"")&&ne(u,o),I[0]&1&&h!==(h=gs(S[68].fileSize)+"")&&ne(g,h),I[0]&1&&_!==(_=$e(S[68].fileUrl))&&d(e,"href",_),I[0]&1&&v!==(v=S[68].fileName)&&d(e,"download",v)},d(S){S&&m(e)}}}function Rf(s){let e,t,n,r,i,a,l,o,u,f,p,h=ms(s[68].fileName)+"",g,_,v=s[68].fileName+"",S,I,w,E,b=gs(s[68].fileSize)+"",A,C,T,R,O,L;function F(...q){return s[53](s[68],...q)}function B(...q){return s[54](s[68],...q)}return{c(){e=y("div"),t=y("video"),n=y("source"),a=Q(`\r
									Your browser does not support the video tag.`),u=z(),f=y("a"),p=y("span"),g=Q(h),_=z(),S=Q(v),I=z(),w=y("span"),E=Q("("),A=Q(b),C=Q(")"),this.h()},l(q){e=k(q,"DIV",{class:!0});var V=D(e);t=k(V,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var N=D(t);n=k(N,"SOURCE",{src:!0,type:!0}),a=K(N,`\r
									Your browser does not support the video tag.`),N.forEach(m),u=P(V),f=k(V,"A",{href:!0,download:!0,class:!0});var x=D(f);p=k(x,"SPAN",{class:!0});var G=D(p);g=K(G,h),G.forEach(m),_=P(x),S=K(x,v),I=P(x),w=k(x,"SPAN",{class:!0});var U=D(w);E=K(U,"("),A=K(U,b),C=K(U,")"),U.forEach(m),x.forEach(m),V.forEach(m),this.h()},h(){var q;Be(n.src,r=$e(s[68].fileUrl))||d(n,"src",r),d(n,"type",i="video/"+((q=s[68].fileName)==null?void 0:q.split(".").pop())),t.controls=!0,d(t,"class",l="inline-video "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",o=s[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge, right-click for options"),d(p,"class","file-icon svelte-zjz65z"),d(w,"class","file-size svelte-zjz65z"),d(f,"href",T=$e(s[68].fileUrl)),d(f,"download",R=s[68].fileName),d(f,"class","video-download-link svelte-zjz65z"),d(e,"class","video-container svelte-zjz65z")},m(q,V){j(q,e,V),c(e,t),c(t,n),c(t,a),c(e,u),c(e,f),c(f,p),c(p,g),c(f,_),c(f,S),c(f,I),c(f,w),c(w,E),c(w,A),c(w,C),O||(L=[X(t,"click",F),X(t,"contextmenu",B)],O=!0)},p(q,V){var N;s=q,V[0]&1&&!Be(n.src,r=$e(s[68].fileUrl))&&d(n,"src",r),V[0]&1&&i!==(i="video/"+((N=s[68].fileName)==null?void 0:N.split(".").pop()))&&d(n,"type",i),V[0]&1&&l!==(l="inline-video "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",l),V[0]&1&&o!==(o=s[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",o),V[0]&1&&h!==(h=ms(s[68].fileName)+"")&&ne(g,h),V[0]&1&&v!==(v=s[68].fileName+"")&&ne(S,v),V[0]&1&&b!==(b=gs(s[68].fileSize)+"")&&ne(A,b),V[0]&1&&T!==(T=$e(s[68].fileUrl))&&d(f,"href",T),V[0]&1&&R!==(R=s[68].fileName)&&d(f,"download",R)},d(q){q&&m(e),O=!1,Ae(L)}}}function Pf(s){let e,t,n,r,i,a,l,o,u,f=ms(s[68].fileName)+"",p,h,g=s[68].fileName+"",_,v,S,I,w=gs(s[68].fileSize)+"",E,b,A,C,T,R;function O(...F){return s[51](s[68],...F)}function L(...F){return s[52](s[68],...F)}return{c(){e=y("div"),t=y("img"),l=z(),o=y("a"),u=y("span"),p=Q(f),h=z(),_=Q(g),v=z(),S=y("span"),I=Q("("),E=Q(w),b=Q(")"),this.h()},l(F){e=k(F,"DIV",{class:!0});var B=D(e);t=k(B,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=P(B),o=k(B,"A",{href:!0,download:!0,class:!0});var q=D(o);u=k(q,"SPAN",{class:!0});var V=D(u);p=K(V,f),V.forEach(m),h=P(q),_=K(q,g),v=P(q),S=k(q,"SPAN",{class:!0});var N=D(S);I=K(N,"("),E=K(N,w),b=K(N,")"),N.forEach(m),q.forEach(m),B.forEach(m),this.h()},h(){Be(t.src,n=$e(s[68].fileUrl))||d(t,"src",n),d(t,"alt",r=s[68].fileName),d(t,"class",i="inline-image "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",a=s[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge, right-click for options"),d(u,"class","file-icon svelte-zjz65z"),d(S,"class","file-size svelte-zjz65z"),d(o,"href",A=$e(s[68].fileUrl)),d(o,"download",C=s[68].fileName),d(o,"class","image-download-link svelte-zjz65z"),d(e,"class","image-container svelte-zjz65z")},m(F,B){j(F,e,B),c(e,t),c(e,l),c(e,o),c(o,u),c(u,p),c(o,h),c(o,_),c(o,v),c(o,S),c(S,I),c(S,E),c(S,b),T||(R=[X(t,"click",O),X(t,"contextmenu",L)],T=!0)},p(F,B){s=F,B[0]&1&&!Be(t.src,n=$e(s[68].fileUrl))&&d(t,"src",n),B[0]&1&&r!==(r=s[68].fileName)&&d(t,"alt",r),B[0]&1&&i!==(i="inline-image "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),B[0]&1&&a!==(a=s[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",a),B[0]&1&&f!==(f=ms(s[68].fileName)+"")&&ne(p,f),B[0]&1&&g!==(g=s[68].fileName+"")&&ne(_,g),B[0]&1&&w!==(w=gs(s[68].fileSize)+"")&&ne(E,w),B[0]&1&&A!==(A=$e(s[68].fileUrl))&&d(o,"href",A),B[0]&1&&C!==(C=s[68].fileName)&&d(o,"download",C)},d(F){F&&m(e),T=!1,Ae(R)}}}function zf(s){let e,t,n=ms(s[73].fileName)+"",r,i,a,l,o=s[73].fileName+"",u,f,p,h,g=gs(s[73].fileSize)+"",_,v,S,I,w;return{c(){e=y("a"),t=y("div"),r=Q(n),i=z(),a=y("div"),l=y("span"),u=Q(o),f=z(),p=y("span"),h=Q("("),_=Q(g),v=Q(")"),S=z(),this.h()},l(E){e=k(E,"A",{href:!0,download:!0,class:!0});var b=D(e);t=k(b,"DIV",{class:!0});var A=D(t);r=K(A,n),A.forEach(m),i=P(b),a=k(b,"DIV",{class:!0});var C=D(a);l=k(C,"SPAN",{class:!0});var T=D(l);u=K(T,o),T.forEach(m),f=P(C),p=k(C,"SPAN",{class:!0});var R=D(p);h=K(R,"("),_=K(R,g),v=K(R,")"),R.forEach(m),C.forEach(m),S=P(b),b.forEach(m),this.h()},h(){d(t,"class","gallery-file-icon-large svelte-zjz65z"),d(l,"class","file-name-truncate svelte-zjz65z"),d(p,"class","file-size-small svelte-zjz65z"),d(a,"class","gallery-file-overlay svelte-zjz65z"),d(e,"href",I=$e(s[73].fileUrl)),d(e,"download",w=s[73].fileName),d(e,"class","gallery-file-item file-link svelte-zjz65z")},m(E,b){j(E,e,b),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,h),c(p,_),c(p,v),c(e,S)},p(E,b){b[0]&1&&n!==(n=ms(E[73].fileName)+"")&&ne(r,n),b[0]&1&&o!==(o=E[73].fileName+"")&&ne(u,o),b[0]&1&&g!==(g=gs(E[73].fileSize)+"")&&ne(_,g),b[0]&1&&I!==(I=$e(E[73].fileUrl))&&d(e,"href",I),b[0]&1&&w!==(w=E[73].fileName)&&d(e,"download",w)},d(E){E&&m(e)}}}function Ff(s){let e,t,n,r,i,a,l,o,u,f;function p(...g){return s[50](s[73],...g)}let h=s[75]===3&&s[68].files.length>4&&zi(s);return{c(){e=y("div"),t=y("video"),n=y("source"),l=z(),h&&h.c(),o=z(),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=D(e);t=k(_,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var v=D(t);n=k(v,"SOURCE",{src:!0}),v.forEach(m),l=P(_),h&&h.l(_),o=P(_),_.forEach(m),this.h()},h(){Be(n.src,r=$e(s[73].fileUrl))||d(n,"src",r),d(t,"class",i="gallery-file-video "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",a=s[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge"),d(e,"class","gallery-file-item svelte-zjz65z"),ve(e,"last-item",s[75]===3&&s[68].files.length>4)},m(g,_){j(g,e,_),c(e,t),c(t,n),c(e,l),h&&h.m(e,null),c(e,o),u||(f=X(t,"click",p),u=!0)},p(g,_){s=g,_[0]&1&&!Be(n.src,r=$e(s[73].fileUrl))&&d(n,"src",r),_[0]&1&&i!==(i="gallery-file-video "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),_[0]&1&&a!==(a=s[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",a),s[75]===3&&s[68].files.length>4?h?h.p(s,_):(h=zi(s),h.c(),h.m(e,o)):h&&(h.d(1),h=null),_[0]&1&&ve(e,"last-item",s[75]===3&&s[68].files.length>4)},d(g){g&&m(e),h&&h.d(),u=!1,f()}}}function Lf(s){let e,t,n,r,i,a,l,o,u,f;function p(...g){return s[49](s[68],s[73],...g)}let h=s[75]===3&&s[68].files.length>4&&Fi(s);return{c(){e=y("div"),t=y("img"),l=z(),h&&h.c(),o=z(),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=D(e);t=k(_,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=P(_),h&&h.l(_),o=P(_),_.forEach(m),this.h()},h(){Be(t.src,n=$e(s[73].fileUrl))||d(t,"src",n),d(t,"alt",r=s[73].fileName),d(t,"class",i="gallery-file-image "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),d(t,"data-spoiler",a=s[68].isSpoiler?"true":"false"),d(t,"title","Click to enlarge"),d(e,"class","gallery-file-item svelte-zjz65z"),ve(e,"last-item",s[75]===3&&s[68].files.length>4)},m(g,_){j(g,e,_),c(e,t),c(e,l),h&&h.m(e,null),c(e,o),u||(f=X(t,"click",p),u=!0)},p(g,_){s=g,_[0]&1&&!Be(t.src,n=$e(s[73].fileUrl))&&d(t,"src",n),_[0]&1&&r!==(r=s[73].fileName)&&d(t,"alt",r),_[0]&1&&i!==(i="gallery-file-image "+(s[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&d(t,"class",i),_[0]&1&&a!==(a=s[68].isSpoiler?"true":"false")&&d(t,"data-spoiler",a),s[75]===3&&s[68].files.length>4?h?h.p(s,_):(h=Fi(s),h.c(),h.m(e,o)):h&&(h.d(1),h=null),_[0]&1&&ve(e,"last-item",s[75]===3&&s[68].files.length>4)},d(g){g&&m(e),h&&h.d(),u=!1,f()}}}function zi(s){let e,t,n,r=s[68].files.length-4+"",i;return{c(){e=y("div"),t=y("span"),n=Q("+"),i=Q(r),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=D(e);t=k(l,"SPAN",{class:!0});var o=D(t);n=K(o,"+"),i=K(o,r),o.forEach(m),l.forEach(m),this.h()},h(){d(t,"class","more-count svelte-zjz65z"),d(e,"class","more-overlay svelte-zjz65z")},m(a,l){j(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[68].files.length-4+"")&&ne(i,r)},d(a){a&&m(e)}}}function Fi(s){let e,t,n,r=s[68].files.length-4+"",i;return{c(){e=y("div"),t=y("span"),n=Q("+"),i=Q(r),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=D(e);t=k(l,"SPAN",{class:!0});var o=D(t);n=K(o,"+"),i=K(o,r),o.forEach(m),l.forEach(m),this.h()},h(){d(t,"class","more-count svelte-zjz65z"),d(e,"class","more-overlay svelte-zjz65z")},m(a,l){j(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[68].files.length-4+"")&&ne(i,r)},d(a){a&&m(e)}}}function Li(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!Cr(l[73].fileName)),e?Lf:(t==null&&(t=!!La(l[73].fileName)),t?Ff:zf)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=De()},l(l){a.l(l),n=De()},m(l,o){a.m(l,o),j(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&m(n),a.d(l)}}}function xi(s){let e,t,n=Sn(s[68].text)+"";return{c(){e=y("div"),t=new Yl(!1),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=D(e);t=Wl(i,!1),i.forEach(m),this.h()},h(){t.a=null,d(e,"class","markdown-content svelte-zjz65z")},m(r,i){j(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=Sn(r[68].text)+"")&&t.p(n)},d(r){r&&m(e)}}}function Mi(s,e){let t,n,r,i,a,l,o,u,f,p,h,g,_=qi(e[68].timestamp)+"",v,S,I,w,E,b,A,C=e[1]===e[68].id&&Oi();function T(H,Y){var Z;return(Z=H[69])!=null&&Z.profilePicture?yf:kf}let R=T(e),O=R(e);function L(H,Y){return H[69]?Ef:wf}let F=L(e),B=F(e),q=e[68].isPinned&&Ni(),V=e[68].isEdited&&Ri(),N=e[70]&&Pi(e);function x(H,Y){return H[9]===H[68].id?Sf:Tf}let G=x(e),U=G(e);function W(...H){return e[55](e[68],...H)}return{key:s,first:null,c(){t=De(),C&&C.c(),n=z(),r=y("div"),i=y("div"),O.c(),a=z(),l=y("div"),o=y("div"),u=y("div"),B.c(),f=z(),q&&q.c(),p=z(),V&&V.c(),h=z(),g=y("span"),v=Q(_),S=z(),N&&N.c(),I=z(),U.c(),this.h()},l(H){t=De(),C&&C.l(H),n=P(H),r=k(H,"DIV",{id:!0,class:!0});var Y=D(r);i=k(Y,"DIV",{class:!0});var Z=D(i);O.l(Z),Z.forEach(m),a=P(Y),l=k(Y,"DIV",{class:!0});var se=D(l);o=k(se,"DIV",{class:!0});var de=D(o);u=k(de,"DIV",{class:!0});var te=D(u);B.l(te),f=P(te),q&&q.l(te),p=P(te),V&&V.l(te),te.forEach(m),h=P(de),g=k(de,"SPAN",{class:!0});var ce=D(g);v=K(ce,_),ce.forEach(m),de.forEach(m),S=P(se),N&&N.l(se),I=P(se),U.l(se),se.forEach(m),Y.forEach(m),this.h()},h(){d(i,"class","message-avatar svelte-zjz65z"),d(u,"class","header-left svelte-zjz65z"),d(g,"class","timestamp svelte-zjz65z"),d(o,"class","message-header svelte-zjz65z"),d(l,"class","message-body svelte-zjz65z"),d(r,"id",w="message-"+e[68].id),d(r,"class",E="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z"),this.first=t},m(H,Y){j(H,t,Y),C&&C.m(H,Y),j(H,n,Y),j(H,r,Y),c(r,i),O.m(i,null),c(r,a),c(r,l),c(l,o),c(o,u),B.m(u,null),c(u,f),q&&q.m(u,null),c(u,p),V&&V.m(u,null),c(o,h),c(o,g),c(g,v),c(l,S),N&&N.m(l,null),c(l,I),U.m(l,null),b||(A=X(r,"contextmenu",W),b=!0)},p(H,Y){e=H,e[1]===e[68].id?C||(C=Oi(),C.c(),C.m(n.parentNode,n)):C&&(C.d(1),C=null),R===(R=T(e))&&O?O.p(e,Y):(O.d(1),O=R(e),O&&(O.c(),O.m(i,null))),F===(F=L(e))&&B?B.p(e,Y):(B.d(1),B=F(e),B&&(B.c(),B.m(u,f))),e[68].isPinned?q||(q=Ni(),q.c(),q.m(u,p)):q&&(q.d(1),q=null),e[68].isEdited?V||(V=Ri(),V.c(),V.m(u,null)):V&&(V.d(1),V=null),Y[0]&1&&_!==(_=qi(e[68].timestamp)+"")&&ne(v,_),e[70]?N?N.p(e,Y):(N=Pi(e),N.c(),N.m(l,I)):N&&(N.d(1),N=null),G===(G=x(e))&&U?U.p(e,Y):(U.d(1),U=G(e),U&&(U.c(),U.m(l,null))),Y[0]&1&&w!==(w="message-"+e[68].id)&&d(r,"id",w),Y[0]&16385&&E!==(E="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z")&&d(r,"class",E)},d(H){H&&(m(t),m(n),m(r)),C&&C.d(H),O.d(),B.d(),q&&q.d(),V&&V.d(),N&&N.d(),U.d(),b=!1,A()}}}function Ui(s){let e,t,n;function r(a){s[58](a)}let i={message:s[8],x:s[6],y:s[7],onEdit:s[23],onDelete:s[26],onPin:s[28],onReply:s[29],onDownload:s[30],onForward:s[31]};return s[5]!==void 0&&(i.visible=s[5]),e=new ff({props:i}),et.push(()=>Lt(e,"visible",r)),{c(){Ye(e.$$.fragment)},l(a){We(e.$$.fragment,a)},m(a,l){Ge(e,a,l),n=!0},p(a,l){const o={};l[0]&256&&(o.message=a[8]),l[0]&64&&(o.x=a[6]),l[0]&128&&(o.y=a[7]),!t&&l[0]&32&&(t=!0,o.visible=a[5],Ft(()=>t=!1)),e.$set(o)},i(a){n||(ke(e.$$.fragment,a),n=!0)},o(a){Ce(e.$$.fragment,a),n=!1},d(a){He(e,a)}}}function Bi(s){let e,t,n,r,i,a,l="âœ•",o,u,f,p,h,g=s[17].length>1&&ji(s);return{c(){e=y("div"),t=y("img"),r=z(),g&&g.c(),i=z(),a=y("button"),a.textContent=l,o=z(),u=y("a"),f=Q("Open in new tab"),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=D(e);t=k(v,"IMG",{src:!0,alt:!0,class:!0}),r=P(v),g&&g.l(v),i=P(v),a=k(v,"BUTTON",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-cyanf1"&&(a.textContent=l),o=P(v),u=k(v,"A",{href:!0,target:!0,rel:!0,class:!0});var S=D(u);f=K(S,"Open in new tab"),S.forEach(m),v.forEach(m),this.h()},h(){Be(t.src,n=s[15])||d(t,"src",n),d(t,"alt","Enlarged"),d(t,"class","enlarged-image svelte-zjz65z"),d(a,"class","close-modal svelte-zjz65z"),d(u,"href",s[15]),d(u,"target","_blank"),d(u,"rel","noopener noreferrer"),d(u,"class","open-new-tab svelte-zjz65z"),d(e,"class","image-modal svelte-zjz65z")},m(_,v){j(_,e,v),c(e,t),c(e,r),g&&g.m(e,null),c(e,i),c(e,a),c(e,o),c(e,u),c(u,f),p||(h=[X(t,"click",_t(s[43])),X(a,"click",s[36]),X(e,"click",s[36])],p=!0)},p(_,v){v[0]&32768&&!Be(t.src,n=_[15])&&d(t,"src",n),_[17].length>1?g?g.p(_,v):(g=ji(_),g.c(),g.m(e,i)):g&&(g.d(1),g=null),v[0]&32768&&d(u,"href",_[15])},d(_){_&&m(e),g&&g.d(),p=!1,Ae(h)}}}function ji(s){let e,t="â€¹",n,r,i="â€º",a,l,o=s[18]+1+"",u,f,p=s[17].length+"",h,g,_;return{c(){e=y("button"),e.textContent=t,n=z(),r=y("button"),r.textContent=i,a=z(),l=y("div"),u=Q(o),f=Q(" / "),h=Q(p),this.h()},l(v){e=k(v,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(e)!=="svelte-c4iawu"&&(e.textContent=t),n=P(v),r=k(v,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(r)!=="svelte-1gn22tr"&&(r.textContent=i),a=P(v),l=k(v,"DIV",{class:!0});var S=D(l);u=K(S,o),f=K(S," / "),h=K(S,p),S.forEach(m),this.h()},h(){d(e,"class","nav-arrow nav-prev svelte-zjz65z"),d(e,"title","Previous (â†)"),d(r,"class","nav-arrow nav-next svelte-zjz65z"),d(r,"title","Next (â†’)"),d(l,"class","image-counter svelte-zjz65z")},m(v,S){j(v,e,S),j(v,n,S),j(v,r,S),j(v,a,S),j(v,l,S),c(l,u),c(l,f),c(l,h),g||(_=[X(e,"click",_t(s[62])),X(r,"click",_t(s[63]))],g=!0)},p(v,S){S[0]&262144&&o!==(o=v[18]+1+"")&&ne(u,o),S[0]&131072&&p!==(p=v[17].length+"")&&ne(h,p)},d(v){v&&(m(e),m(n),m(r),m(a),m(l)),g=!1,Ae(_)}}}function Vi(s){let e,t,n,r,i,a,l,o="âœ•",u,f,p,h,g;return{c(){e=y("div"),t=y("video"),n=y("source"),i=Q(`\r
			Your browser does not support the video tag.`),a=z(),l=y("button"),l.textContent=o,u=z(),f=y("a"),p=Q("Open in new tab"),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=D(e);t=k(v,"VIDEO",{class:!0});var S=D(t);n=k(S,"SOURCE",{src:!0}),i=K(S,`\r
			Your browser does not support the video tag.`),S.forEach(m),a=P(v),l=k(v,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-yc21b"&&(l.textContent=o),u=P(v),f=k(v,"A",{href:!0,target:!0,rel:!0,class:!0});var I=D(f);p=K(I,"Open in new tab"),I.forEach(m),v.forEach(m),this.h()},h(){Be(n.src,r=s[16])||d(n,"src",r),t.controls=!0,t.autoplay=!0,d(t,"class","enlarged-video svelte-zjz65z"),d(l,"class","close-modal svelte-zjz65z"),d(f,"href",s[16]),d(f,"target","_blank"),d(f,"rel","noopener noreferrer"),d(f,"class","open-new-tab svelte-zjz65z"),d(e,"class","video-modal svelte-zjz65z")},m(_,v){j(_,e,v),c(e,t),c(t,n),c(t,i),c(e,a),c(e,l),c(e,u),c(e,f),c(f,p),h||(g=[X(t,"click",_t(s[42])),X(l,"click",s[40]),X(e,"click",s[40])],h=!0)},p(_,v){v[0]&65536&&!Be(n.src,r=_[16])&&d(n,"src",r),v[0]&65536&&d(f,"href",_[16])},d(_){_&&m(e),h=!1,Ae(g)}}}function xf(s){let e=[],t=new Map,n,r,i,a,l,o,u,f,p,h,g,_,v,S,I,w,E,b=Ve(s[0]);const A=N=>N[68].id;for(let N=0;N<b.length;N+=1){let x=Ii(s,b,N),G=A(x);t.set(G,e[N]=Mi(G,x))}function C(N){s[56](N)}function T(N){s[57](N)}let R={isOwnProfile:s[4]};s[2]!==void 0&&(R.isOpen=s[2]),s[3]!==void 0&&(R.user=s[3]),r=new Ar({props:R}),et.push(()=>Lt(r,"isOpen",C)),et.push(()=>Lt(r,"user",T));let O=s[8]&&Ui(s);function L(N){s[59](N)}function F(N){s[60](N)}let B={};s[12]!==void 0&&(B.visible=s[12]),s[13]!==void 0&&(B.message=s[13]),u=new mf({props:B}),et.push(()=>Lt(u,"visible",L)),et.push(()=>Lt(u,"message",F)),g=new Cs({props:{isOpen:s[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:s[27],onCancel:s[61]}});let q=s[15]&&Bi(s),V=s[16]&&Vi(s);return{c(){for(let N=0;N<e.length;N+=1)e[N].c();n=z(),Ye(r.$$.fragment),l=z(),O&&O.c(),o=z(),Ye(u.$$.fragment),h=z(),Ye(g.$$.fragment),_=z(),q&&q.c(),v=z(),V&&V.c(),S=De()},l(N){for(let x=0;x<e.length;x+=1)e[x].l(N);n=P(N),We(r.$$.fragment,N),l=P(N),O&&O.l(N),o=P(N),We(u.$$.fragment,N),h=P(N),We(g.$$.fragment,N),_=P(N),q&&q.l(N),v=P(N),V&&V.l(N),S=De()},m(N,x){for(let G=0;G<e.length;G+=1)e[G]&&e[G].m(N,x);j(N,n,x),Ge(r,N,x),j(N,l,x),O&&O.m(N,x),j(N,o,x),Ge(u,N,x),j(N,h,x),Ge(g,N,x),j(N,_,x),q&&q.m(N,x),j(N,v,x),V&&V.m(N,x),j(N,S,x),I=!0,w||(E=X(bf,"keydown",s[38]),w=!0)},p(N,x){x[0]&58213891|x[1]&286&&(b=Ve(N[0]),e=Qt(e,x,A,1,N,b,t,n.parentNode,Kt,Mi,n,Ii));const G={};x[0]&16&&(G.isOwnProfile=N[4]),!i&&x[0]&4&&(i=!0,G.isOpen=N[2],Ft(()=>i=!1)),!a&&x[0]&8&&(a=!0,G.user=N[3],Ft(()=>a=!1)),r.$set(G),N[8]?O?(O.p(N,x),x[0]&256&&ke(O,1)):(O=Ui(N),O.c(),ke(O,1),O.m(o.parentNode,o)):O&&(xs(),Ce(O,1,1,()=>{O=null}),Ms());const U={};!f&&x[0]&4096&&(f=!0,U.visible=N[12],Ft(()=>f=!1)),!p&&x[0]&8192&&(p=!0,U.message=N[13],Ft(()=>p=!1)),u.$set(U);const W={};x[0]&2048&&(W.isOpen=N[11]),x[0]&2048&&(W.onCancel=N[61]),g.$set(W),N[15]?q?q.p(N,x):(q=Bi(N),q.c(),q.m(v.parentNode,v)):q&&(q.d(1),q=null),N[16]?V?V.p(N,x):(V=Vi(N),V.c(),V.m(S.parentNode,S)):V&&(V.d(1),V=null)},i(N){I||(ke(r.$$.fragment,N),ke(O),ke(u.$$.fragment,N),ke(g.$$.fragment,N),I=!0)},o(N){Ce(r.$$.fragment,N),Ce(O),Ce(u.$$.fragment,N),Ce(g.$$.fragment,N),I=!1},d(N){N&&(m(n),m(l),m(o),m(h),m(_),m(v),m(S));for(let x=0;x<e.length;x+=1)e[x].d(N);He(r,N),O&&O.d(N),He(u,N),He(g,N),q&&q.d(N),V&&V.d(N),w=!1,E()}}}function qi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function gs(s){return s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":""}function $e(s){return s?s.startsWith("data:")||s.startsWith("http:")||s.startsWith("https:")?s:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${s}`:""}function ms(s){if(!s)return"ðŸ“Ž";const e=s.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function Cr(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function La(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function Hi(){document.querySelectorAll('.spoiler[data-spoiler="true"]').forEach(e=>{e.hasAttribute("data-listener-attached")||(e.addEventListener("click",function(){this.classList.toggle("revealed")}),e.setAttribute("data-listener-attached","true"))})}function Mf(s,e,t){let n,r,i;Re(s,Os,ee=>t(65,n=ee)),Re(s,ns,ee=>t(66,r=ee)),Re(s,Zt,ee=>t(67,i=ee));let{messages:a}=e,{onReply:l=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,f=null,p=!1,h=!1,g=0,_=0,v=null,S=null,I="",w=!1,E=null;function b(ee){return i.find(me=>me.username===ee)}function A(ee){const me=b(ee);return(me==null?void 0:me.color)||"var(--status-offline)"}function C(ee){t(3,f=ee),t(4,p=ee.id===(r==null?void 0:r.id)),t(2,u=!0)}function T(ee,me){ee.preventDefault(),t(8,v=me),t(6,g=ee.clientX),t(7,_=ee.clientY),t(5,h=!0)}function R(){v&&(t(9,S=v.id),t(10,I=v.text),t(5,h=!1))}function O(ee){I.trim()&&Oa(n,ee,I.trim()),t(9,S=null),t(10,I="")}function L(){t(9,S=null),t(10,I="")}function F(){v&&(E=v,t(11,w=!0),t(5,h=!1))}function B(){E&&fu(n,E.id),t(11,w=!1)}function q(){v&&(Sr(n,v.id),t(5,h=!1))}function V(){v&&(l(v),t(5,h=!1))}async function N(){if(!(!(v!=null&&v.fileUrl)||!(v!=null&&v.fileName))){try{const ee=$e(v.fileUrl),kt=await(await fetch(ee)).blob(),dt=window.URL.createObjectURL(kt),Ze=document.createElement("a");Ze.href=dt,Ze.download=v.fileName,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),window.URL.revokeObjectURL(dt)}catch(ee){console.error("Download failed:",ee)}t(5,h=!1)}}let x=!1,G=null;function U(){v&&(t(13,G=v),t(12,x=!0),t(5,h=!1))}function W(ee,me){ee.preventDefault(),t(8,v=me),t(6,g=ee.clientX),t(7,_=ee.clientY),t(5,h=!0)}function H(ee){if(ee)return a.find(me=>me.id===ee)}let Y=null;function Z(ee){const me=document.getElementById(`message-${ee}`);me&&(me.scrollIntoView({behavior:"smooth",block:"center"}),t(14,Y=ee),setTimeout(()=>{t(14,Y=null)},2e3))}let se=null,de=null,te=[],ce=0;function ue(ee,me=[]){t(15,se=ee),t(17,te=me.length>0?me:[ee]),t(18,ce=te.indexOf(ee))}function le(){t(15,se=null),t(17,te=[]),t(18,ce=0)}function he(ee){te.length!==0&&(ee==="prev"?t(18,ce=(ce-1+te.length)%te.length):t(18,ce=(ce+1)%te.length),t(15,se=te[ce]))}function Pe(ee){se&&(ee.key==="ArrowLeft"?(ee.preventDefault(),he("prev")):ee.key==="ArrowRight"?(ee.preventDefault(),he("next")):ee.key==="Escape"&&(ee.preventDefault(),le()))}function re(ee){t(16,de=ee)}function je(){t(16,de=null)}rs(Hi),qa(Hi);function Te(ee){ds.call(this,s,ee)}function ie(ee){ds.call(this,s,ee)}const J=ee=>C(ee),oe=ee=>Z(ee.id);function ye(){I=this.value,t(10,I)}const be=(ee,me)=>{me.key==="Enter"&&!me.shiftKey?(me.preventDefault(),O(ee.id)):me.key==="Escape"&&(me.preventDefault(),L())},we=ee=>O(ee.id),Me=(ee,me,kt)=>{if(kt.button===0){const dt=ee.files.filter(Ze=>Cr(Ze.fileName)).map(Ze=>$e(Ze.fileUrl));ue($e(me.fileUrl),dt)}},tt=(ee,me)=>me.button===0&&re($e(ee.fileUrl)),Qe=(ee,me)=>me.button===0&&ee.fileUrl&&ue($e(ee.fileUrl)),ze=(ee,me)=>W(me,ee),qe=(ee,me)=>{me.button===0&&ee.fileUrl&&re($e(ee.fileUrl))},gt=(ee,me)=>W(me,ee),ft=(ee,me)=>T(me,ee);function nt(ee){u=ee,t(2,u)}function Et(ee){f=ee,t(3,f)}function Ut(ee){h=ee,t(5,h)}function rt(ee){x=ee,t(12,x)}function _e(ee){G=ee,t(13,G)}const Oe=()=>t(11,w=!1),Ot=()=>he("prev"),xt=()=>he("next");return s.$$set=ee=>{"messages"in ee&&t(0,a=ee.messages),"onReply"in ee&&t(41,l=ee.onReply),"firstUnreadMessageId"in ee&&t(1,o=ee.firstUnreadMessageId)},[a,o,u,f,p,h,g,_,v,S,I,w,x,G,Y,se,de,te,ce,b,A,C,T,R,O,L,F,B,q,V,N,U,W,H,Z,ue,le,he,Pe,re,je,l,Te,ie,J,oe,ye,be,we,Me,tt,Qe,ze,qe,gt,ft,nt,Et,Ut,rt,_e,Oe,Ot,xt]}class Uf extends ct{constructor(e){super(),ut(this,e,Mf,xf,ot,{messages:0,onReply:41,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Gi(s,e,t){const n=s.slice();return n[6]=e[t],n}function Wi(s){let e,t,n,r="ðŸ“Œ",i,a,l="Pinned Messages",o,u,f,p=s[0].length+"",h,g,_,v,S=[],I=new Map,w=Ve(s[0]);const E=b=>b[6].id;for(let b=0;b<w.length;b+=1){let A=Gi(s,w,b),C=E(A);I.set(C,S[b]=Yi(C,A))}return{c(){e=y("div"),t=y("div"),n=y("span"),n.textContent=r,i=z(),a=y("span"),a.textContent=l,o=z(),u=y("span"),f=Q("("),h=Q(p),g=Q(")"),_=z(),v=y("div");for(let b=0;b<S.length;b+=1)S[b].c();this.h()},l(b){e=k(b,"DIV",{class:!0});var A=D(e);t=k(A,"DIV",{class:!0});var C=D(t);n=k(C,"SPAN",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-73xtmc"&&(n.textContent=r),i=P(C),a=k(C,"SPAN",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-123zvdk"&&(a.textContent=l),o=P(C),u=k(C,"SPAN",{class:!0});var T=D(u);f=K(T,"("),h=K(T,p),g=K(T,")"),T.forEach(m),C.forEach(m),_=P(A),v=k(A,"DIV",{class:!0});var R=D(v);for(let O=0;O<S.length;O+=1)S[O].l(R);R.forEach(m),A.forEach(m),this.h()},h(){d(n,"class","pinned-icon svelte-d1025n"),d(a,"class","pinned-title svelte-d1025n"),d(u,"class","pinned-count svelte-d1025n"),d(t,"class","pinned-header svelte-d1025n"),d(v,"class","pinned-messages svelte-d1025n"),d(e,"class","pinned-container svelte-d1025n")},m(b,A){j(b,e,A),c(e,t),c(t,n),c(t,i),c(t,a),c(t,o),c(t,u),c(u,f),c(u,h),c(u,g),c(e,_),c(e,v);for(let C=0;C<S.length;C+=1)S[C]&&S[C].m(v,null)},p(b,A){A&1&&p!==(p=b[0].length+"")&&ne(h,p),A&7&&(w=Ve(b[0]),S=Qt(S,A,E,1,b,w,I,v,Kt,Yi,null,Gi))},d(b){b&&m(e);for(let A=0;A<S.length;A+=1)S[A].d()}}}function Yi(s,e){let t,n,r,i=e[6].user+"",a,l,o,u=e[6].text.substring(0,100)+"",f,p=e[6].text.length>100?"...":"",h,g,_,v=Xi(e[6].timestamp)+"",S,I,w,E="Ã—",b,A,C;function T(){return e[3](e[6])}return{key:s,first:null,c(){t=y("div"),n=y("div"),r=y("span"),a=Q(i),l=z(),o=y("span"),f=Q(u),h=Q(p),g=z(),_=y("span"),S=Q(v),I=z(),w=y("button"),w.textContent=E,b=z(),this.h()},l(R){t=k(R,"DIV",{class:!0});var O=D(t);n=k(O,"DIV",{class:!0});var L=D(n);r=k(L,"SPAN",{class:!0,style:!0});var F=D(r);a=K(F,i),F.forEach(m),l=P(L),o=k(L,"SPAN",{class:!0});var B=D(o);f=K(B,u),h=K(B,p),B.forEach(m),g=P(L),_=k(L,"SPAN",{class:!0});var q=D(_);S=K(q,v),q.forEach(m),L.forEach(m),I=P(O),w=k(O,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(w)!=="svelte-87szfn"&&(w.textContent=E),b=P(O),O.forEach(m),this.h()},h(){d(r,"class","pinned-user svelte-d1025n"),Ee(r,"color",e[1](e[6].user)),d(o,"class","pinned-text svelte-d1025n"),d(_,"class","pinned-time svelte-d1025n"),d(n,"class","pinned-message-content svelte-d1025n"),d(w,"class","unpin-btn svelte-d1025n"),d(w,"title","Unpin message"),d(t,"class","pinned-message svelte-d1025n"),this.first=t},m(R,O){j(R,t,O),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,h),c(n,g),c(n,_),c(_,S),c(t,I),c(t,w),c(t,b),A||(C=X(w,"click",T),A=!0)},p(R,O){e=R,O&1&&i!==(i=e[6].user+"")&&ne(a,i),O&1&&Ee(r,"color",e[1](e[6].user)),O&1&&u!==(u=e[6].text.substring(0,100)+"")&&ne(f,u),O&1&&p!==(p=e[6].text.length>100?"...":"")&&ne(h,p),O&1&&v!==(v=Xi(e[6].timestamp)+"")&&ne(S,v)},d(R){R&&m(t),A=!1,C()}}}function Bf(s){let e,t=s[0].length>0&&Wi(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0].length>0?t?t.p(n,r):(t=Wi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function Xi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function jf(s,e,t){let n;Re(s,Zt,u=>t(4,n=u));let{pinnedMessages:r}=e;function i(u){return n.find(f=>f.username===u)}function a(u){const f=i(u);return(f==null?void 0:f.color)||"var(--status-offline)"}function l(u){Sr(u)}const o=u=>l(u.id);return s.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,a,l,o]}class Vf extends ct{constructor(e){super(),ut(this,e,jf,Bf,ot,{pinnedMessages:0})}}function Zi(s,e,t){const n=s.slice();return n[47]=e[t].file,n[48]=e[t].preview,n[50]=t,n}function Ki(s){let e,t='<div class="drag-overlay-content svelte-1mvqxem"><div class="drag-icon svelte-1mvqxem">ðŸ“</div> <div class="drag-text svelte-1mvqxem">Drop files here to upload</div></div>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){d(e,"class","drag-overlay svelte-1mvqxem")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function Qi(s){let e,t,n,r,i=s[16].join(", ")+"",a,l,o=s[16].length===1?"is":"are",u,f;return{c(){e=y("div"),t=y("span"),n=z(),r=y("span"),a=Q(i),l=z(),u=Q(o),f=Q(" typing..."),this.h()},l(p){e=k(p,"DIV",{class:!0});var h=D(e);t=k(h,"SPAN",{class:!0}),D(t).forEach(m),n=P(h),r=k(h,"SPAN",{});var g=D(r);a=K(g,i),l=P(g),u=K(g,o),f=K(g," typing..."),g.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","typing-dots svelte-1mvqxem"),d(e,"class","typing-indicator svelte-1mvqxem")},m(p,h){j(p,e,h),c(e,t),c(e,n),c(e,r),c(r,a),c(r,l),c(r,u),c(r,f)},p(p,h){h[0]&65536&&i!==(i=p[16].join(", ")+"")&&ne(a,i),h[0]&65536&&o!==(o=p[16].length===1?"is":"are")&&ne(u,o)},d(p){p&&m(e)}}}function Ji(s){let e,t;return e=new Ju({}),e.$on("select",s[21]),e.$on("close",s[33]),{c(){Ye(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,r){Ge(e,n,r),t=!0},p:Ie,i(n){t||(ke(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function qf(s){let e,t,n,r,i=s[5].user+"",a,l,o,u,f=s[5].text.substring(0,50)+"",p,h=s[5].text.length>50?"...":"",g,_,v,S="âœ•",I,w;return{c(){e=y("div"),t=y("div"),n=y("span"),r=Q("Replying to "),a=Q(i),l=Q(":"),o=z(),u=y("span"),p=Q(f),g=Q(h),_=z(),v=y("button"),v.textContent=S,this.h()},l(E){e=k(E,"DIV",{class:!0});var b=D(e);t=k(b,"DIV",{class:!0});var A=D(t);n=k(A,"SPAN",{class:!0});var C=D(n);r=K(C,"Replying to "),a=K(C,i),l=K(C,":"),C.forEach(m),o=P(A),u=k(A,"SPAN",{class:!0});var T=D(u);p=K(T,f),g=K(T,h),T.forEach(m),A.forEach(m),_=P(b),v=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),$(v)!=="svelte-1av190j"&&(v.textContent=S),b.forEach(m),this.h()},h(){d(n,"class","reply-label svelte-1mvqxem"),d(u,"class","reply-preview svelte-1mvqxem"),d(t,"class","reply-info svelte-1mvqxem"),d(v,"class","cancel-reply svelte-1mvqxem"),d(e,"class","reply-bar svelte-1mvqxem")},m(E,b){j(E,e,b),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,o),c(t,u),c(u,p),c(u,g),c(e,_),c(e,v),I||(w=X(v,"click",s[23]),I=!0)},p(E,b){b[0]&32&&i!==(i=E[5].user+"")&&ne(a,i),b[0]&32&&f!==(f=E[5].text.substring(0,50)+"")&&ne(p,f),b[0]&32&&h!==(h=E[5].text.length>50?"...":"")&&ne(g,h)},d(E){E&&m(e),I=!1,w()}}}function Hf(s){let e,t,n='<span class="edit-label svelte-1mvqxem">Editing message</span> <span class="edit-hint svelte-1mvqxem">Press Escape to cancel</span>',r,i,a="âœ•",l,o;return{c(){e=y("div"),t=y("div"),t.innerHTML=n,r=z(),i=y("button"),i.textContent=a,this.h()},l(u){e=k(u,"DIV",{class:!0});var f=D(e);t=k(f,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1kwfa7y"&&(t.innerHTML=n),r=P(f),i=k(f,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-1anw7a5"&&(i.textContent=a),f.forEach(m),this.h()},h(){d(t,"class","edit-info svelte-1mvqxem"),d(i,"class","cancel-edit svelte-1mvqxem"),d(e,"class","edit-bar svelte-1mvqxem")},m(u,f){j(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=X(i,"click",s[20]),l=!0)},p:Ie,d(u){u&&m(e),l=!1,o()}}}function $i(s){let e,t,n,r=s[10].length+"",i,a,l=s[10].length>1?"s":"",o,u,f,p,h="âœ•",g,_,v,S,I,w,E,b,A="Mark as spoiler",C,T,R="âš ï¸",O,L,F,B=s[10].length+"",q,V,N=s[10].length>1?"s":"",x,G,U,W=Ve(s[10]),H=[];for(let Y=0;Y<W.length;Y+=1)H[Y]=el(Zi(s,W,Y));return{c(){e=y("div"),t=y("div"),n=y("span"),i=Q(r),a=Q(" file"),o=Q(l),u=Q(" selected"),f=z(),p=y("button"),p.textContent=h,g=z(),_=y("div");for(let Y=0;Y<H.length;Y+=1)H[Y].c();v=z(),S=y("div"),I=y("label"),w=y("input"),E=z(),b=y("span"),b.textContent=A,C=z(),T=y("span"),T.textContent=R,O=z(),L=y("button"),F=Q("Upload "),q=Q(B),V=Q(" file"),x=Q(N),this.h()},l(Y){e=k(Y,"DIV",{class:!0});var Z=D(e);t=k(Z,"DIV",{class:!0});var se=D(t);n=k(se,"SPAN",{});var de=D(n);i=K(de,r),a=K(de," file"),o=K(de,l),u=K(de," selected"),de.forEach(m),f=P(se),p=k(se,"BUTTON",{class:!0,"data-svelte-h":!0}),$(p)!=="svelte-pcsk7y"&&(p.textContent=h),se.forEach(m),g=P(Z),_=k(Z,"DIV",{class:!0});var te=D(_);for(let he=0;he<H.length;he+=1)H[he].l(te);te.forEach(m),v=P(Z),S=k(Z,"DIV",{class:!0});var ce=D(S);I=k(ce,"LABEL",{class:!0});var ue=D(I);w=k(ue,"INPUT",{type:!0,class:!0}),E=P(ue),b=k(ue,"SPAN",{"data-svelte-h":!0}),$(b)!=="svelte-6s6emx"&&(b.textContent=A),ue.forEach(m),C=P(ce),T=k(ce,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),$(T)!=="svelte-6jzi8y"&&(T.textContent=R),ce.forEach(m),O=P(Z),L=k(Z,"BUTTON",{class:!0});var le=D(L);F=K(le,"Upload "),q=K(le,B),V=K(le," file"),x=K(le,N),le.forEach(m),Z.forEach(m),this.h()},h(){d(p,"class","cancel-gallery svelte-1mvqxem"),d(t,"class","gallery-header svelte-1mvqxem"),d(_,"class","gallery-grid svelte-1mvqxem"),d(w,"type","checkbox"),d(w,"class","spoiler-checkbox svelte-1mvqxem"),d(I,"class","spoiler-checkbox-label svelte-1mvqxem"),d(T,"class","spoiler-hint svelte-1mvqxem"),d(T,"title","Sensitive content will be hidden until clicked"),d(S,"class","spoiler-checkbox-container svelte-1mvqxem"),d(L,"class","upload-files-btn svelte-1mvqxem"),d(e,"class","file-gallery svelte-1mvqxem")},m(Y,Z){j(Y,e,Z),c(e,t),c(t,n),c(n,i),c(n,a),c(n,o),c(n,u),c(t,f),c(t,p),c(e,g),c(e,_);for(let se=0;se<H.length;se+=1)H[se]&&H[se].m(_,null);c(e,v),c(e,S),c(S,I),c(I,w),w.checked=s[11],c(I,E),c(I,b),c(S,C),c(S,T),c(e,O),c(e,L),c(L,F),c(L,q),c(L,V),c(L,x),G||(U=[X(p,"click",s[26]),X(w,"change",s[35]),X(L,"click",s[30])],G=!0)},p(Y,Z){if(Z[0]&1024&&r!==(r=Y[10].length+"")&&ne(i,r),Z[0]&1024&&l!==(l=Y[10].length>1?"s":"")&&ne(o,l),Z[0]&33555456){W=Ve(Y[10]);let se;for(se=0;se<W.length;se+=1){const de=Zi(Y,W,se);H[se]?H[se].p(de,Z):(H[se]=el(de),H[se].c(),H[se].m(_,null))}for(;se<H.length;se+=1)H[se].d(1);H.length=W.length}Z[0]&2048&&(w.checked=Y[11]),Z[0]&1024&&B!==(B=Y[10].length+"")&&ne(q,B),Z[0]&1024&&N!==(N=Y[10].length>1?"s":"")&&ne(x,N)},d(Y){Y&&m(e),Dn(H,Y),G=!1,Ae(U)}}}function Gf(s){let e,t,n;function r(l,o){return o[0]&1024&&(t=null),o[0]&1024&&(n=null),t==null&&(t=!!l[47].type.startsWith("video/")),t?Zf:(n==null&&(n=!!l[47].type.startsWith("audio/")),n?Xf:Yf)}let i=r(s,[-1,-1]),a=i(s);return{c(){e=y("div"),a.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var o=D(e);a.l(o),o.forEach(m),this.h()},h(){d(e,"class","gallery-file-icon svelte-1mvqxem")},m(l,o){j(l,e,o),a.m(e,null)},p(l,o){i!==(i=r(l,o))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},d(l){l&&m(e),a.d()}}}function Wf(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[48])||d(e,"src",t),d(e,"alt",n=s[47].name),d(e,"class","gallery-preview svelte-1mvqxem")},m(r,i){j(r,e,i)},p(r,i){i[0]&1024&&!Be(e.src,t=r[48])&&d(e,"src",t),i[0]&1024&&n!==(n=r[47].name)&&d(e,"alt",n)},d(r){r&&m(e)}}}function Yf(s){let e;return{c(){e=Q("ðŸ“„")},l(t){e=K(t,"ðŸ“„")},m(t,n){j(t,e,n)},d(t){t&&m(e)}}}function Xf(s){let e;return{c(){e=Q("ðŸŽµ")},l(t){e=K(t,"ðŸŽµ")},m(t,n){j(t,e,n)},d(t){t&&m(e)}}}function Zf(s){let e;return{c(){e=Q("ðŸŽ¬")},l(t){e=K(t,"ðŸŽ¬")},m(t,n){j(t,e,n)},d(t){t&&m(e)}}}function el(s){let e,t,n,r,i=s[47].name+"",a,l,o,u=(s[47].size/1024/1024).toFixed(2)+"",f,p,h,g,_="âœ•",v,S,I;function w(C,T){return C[48]?Wf:Gf}let E=w(s),b=E(s);function A(){return s[34](s[50])}return{c(){e=y("div"),b.c(),t=z(),n=y("div"),r=y("div"),a=Q(i),l=z(),o=y("div"),f=Q(u),p=Q(" MB"),h=z(),g=y("button"),g.textContent=_,v=z(),this.h()},l(C){e=k(C,"DIV",{class:!0});var T=D(e);b.l(T),t=P(T),n=k(T,"DIV",{class:!0});var R=D(n);r=k(R,"DIV",{class:!0});var O=D(r);a=K(O,i),O.forEach(m),l=P(R),o=k(R,"DIV",{class:!0});var L=D(o);f=K(L,u),p=K(L," MB"),L.forEach(m),R.forEach(m),h=P(T),g=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),$(g)!=="svelte-17gof1i"&&(g.textContent=_),v=P(T),T.forEach(m),this.h()},h(){d(r,"class","gallery-file-name svelte-1mvqxem"),d(o,"class","gallery-file-size svelte-1mvqxem"),d(n,"class","gallery-file-info svelte-1mvqxem"),d(g,"class","remove-file svelte-1mvqxem"),d(e,"class","gallery-item svelte-1mvqxem")},m(C,T){j(C,e,T),b.m(e,null),c(e,t),c(e,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,p),c(e,h),c(e,g),c(e,v),S||(I=X(g,"click",A),S=!0)},p(C,T){s=C,E===(E=w(s))&&b?b.p(s,T):(b.d(1),b=E(s),b&&(b.c(),b.m(e,t))),T[0]&1024&&i!==(i=s[47].name+"")&&ne(a,i),T[0]&1024&&u!==(u=(s[47].size/1024/1024).toFixed(2)+"")&&ne(f,u)},d(C){C&&m(e),b.d(),S=!1,I()}}}function tl(s){let e,t,n,r="Uploading files...",i,a,l,o,u,f,p;return{c(){e=y("div"),t=y("div"),n=y("span"),n.textContent=r,i=z(),a=y("span"),l=Q(s[8]),o=Q("%"),u=z(),f=y("div"),p=y("div"),this.h()},l(h){e=k(h,"DIV",{class:!0});var g=D(e);t=k(g,"DIV",{class:!0});var _=D(t);n=k(_,"SPAN",{"data-svelte-h":!0}),$(n)!=="svelte-10wvq4k"&&(n.textContent=r),i=P(_),a=k(_,"SPAN",{});var v=D(a);l=K(v,s[8]),o=K(v,"%"),v.forEach(m),_.forEach(m),u=P(g),f=k(g,"DIV",{class:!0});var S=D(f);p=k(S,"DIV",{class:!0,style:!0}),D(p).forEach(m),S.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","upload-progress-info svelte-1mvqxem"),d(p,"class","progress-fill svelte-1mvqxem"),Ee(p,"width",s[8]+"%"),d(f,"class","progress-bar svelte-1mvqxem"),d(e,"class","upload-progress-bar svelte-1mvqxem")},m(h,g){j(h,e,g),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),c(a,o),c(e,u),c(e,f),c(f,p)},p(h,g){g[0]&256&&ne(l,h[8]),g[0]&256&&Ee(p,"width",h[8]+"%")},d(h){h&&m(e)}}}function Kf(s){let e,t,n,r,i,a,l,o,u,f,p,h,g,_,v,S,I,w,E,b,A,C,T="ðŸ“Ž",R,O,L,F,B="GIF",q,V,N,x,G,U,W,H=s[12]&&Ki();o=new Vf({props:{pinnedMessages:s[14]}}),f=new Uf({props:{messages:s[0],onReply:s[22],firstUnreadMessageId:s[15]}});let Y=s[16].length>0&&Qi(s),Z=s[4]&&Ji(s);function se(le,he){if(le[7])return Hf;if(le[5])return qf}let de=se(s),te=de&&de(s),ce=s[10].length>0&&!s[9]&&$i(s),ue=s[9]&&tl(s);return{c(){e=y("div"),H&&H.c(),t=z(),n=y("div"),r=y("h2"),i=Q(s[1]),a=z(),l=y("div"),Ye(o.$$.fragment),u=z(),Ye(f.$$.fragment),p=z(),Y&&Y.c(),h=z(),Z&&Z.c(),g=z(),te&&te.c(),_=z(),v=y("div"),ce&&ce.c(),S=z(),ue&&ue.c(),I=z(),w=y("input"),E=z(),b=y("div"),A=y("div"),C=y("button"),C.textContent=T,R=z(),O=y("textarea"),L=z(),F=y("button"),F.textContent=B,q=z(),V=y("button"),N=Q("Send"),this.h()},l(le){e=k(le,"DIV",{class:!0});var he=D(e);H&&H.l(he),t=P(he),n=k(he,"DIV",{class:!0});var Pe=D(n);r=k(Pe,"H2",{class:!0});var re=D(r);i=K(re,s[1]),re.forEach(m),Pe.forEach(m),a=P(he),l=k(he,"DIV",{class:!0});var je=D(l);We(o.$$.fragment,je),u=P(je),We(f.$$.fragment,je),p=P(je),Y&&Y.l(je),je.forEach(m),h=P(he),Z&&Z.l(he),g=P(he),te&&te.l(he),_=P(he),v=k(he,"DIV",{class:!0});var Te=D(v);ce&&ce.l(Te),S=P(Te),ue&&ue.l(Te),I=P(Te),w=k(Te,"INPUT",{type:!0,style:!0}),E=P(Te),b=k(Te,"DIV",{class:!0});var ie=D(b);A=k(ie,"DIV",{class:!0});var J=D(A);C=k(J,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(C)!=="svelte-1fiys3t"&&(C.textContent=T),J.forEach(m),R=P(ie),O=k(ie,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),D(O).forEach(m),L=P(ie),F=k(ie,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(F)!=="svelte-1ty10q8"&&(F.textContent=B),q=P(ie),V=k(ie,"BUTTON",{class:!0});var oe=D(V);N=K(oe,"Send"),oe.forEach(m),ie.forEach(m),Te.forEach(m),he.forEach(m),this.h()},h(){d(r,"class","svelte-1mvqxem"),d(n,"class","chat-header svelte-1mvqxem"),d(l,"class","messages svelte-1mvqxem"),d(w,"type","file"),w.multiple=!0,Ee(w,"display","none"),d(C,"class","input-icon-button svelte-1mvqxem"),d(C,"title","Attach file"),d(A,"class","input-buttons-left svelte-1mvqxem"),d(O,"placeholder","Type a message... (Shift+Enter for new line)"),d(O,"maxlength","2000"),d(O,"rows","1"),d(O,"class","svelte-1mvqxem"),d(F,"class","input-icon-button svelte-1mvqxem"),d(F,"title","Add GIF"),d(V,"class","send-button svelte-1mvqxem"),V.disabled=x=!s[2].trim(),d(b,"class","input-container svelte-1mvqxem"),d(v,"class","input-wrapper svelte-1mvqxem"),d(e,"class","chat-container svelte-1mvqxem")},m(le,he){j(le,e,he),H&&H.m(e,null),c(e,t),c(e,n),c(n,r),c(r,i),c(e,a),c(e,l),Ge(o,l,null),c(l,u),Ge(f,l,null),c(l,p),Y&&Y.m(l,null),s[32](l),c(e,h),Z&&Z.m(e,null),c(e,g),te&&te.m(e,null),c(e,_),c(e,v),ce&&ce.m(v,null),c(v,S),ue&&ue.m(v,null),c(v,I),c(v,w),s[36](w),c(v,E),c(v,b),c(b,A),c(A,C),c(b,R),c(b,O),s[38](O),lt(O,s[2]),c(b,L),c(b,F),c(b,q),c(b,V),c(V,N),G=!0,U||(W=[X(w,"change",s[24]),X(C,"click",s[37]),X(O,"input",s[39]),X(O,"input",s[17]),X(O,"keydown",s[18]),X(F,"click",s[40]),X(V,"click",s[19]),X(e,"dragenter",s[27]),X(e,"dragleave",s[28]),X(e,"dragover",Qf),X(e,"drop",s[29])],U=!0)},p(le,he){le[12]?H||(H=Ki(),H.c(),H.m(e,t)):H&&(H.d(1),H=null),(!G||he[0]&2)&&ne(i,le[1]);const Pe={};he[0]&16384&&(Pe.pinnedMessages=le[14]),o.$set(Pe);const re={};he[0]&1&&(re.messages=le[0]),he[0]&32768&&(re.firstUnreadMessageId=le[15]),f.$set(re),le[16].length>0?Y?Y.p(le,he):(Y=Qi(le),Y.c(),Y.m(l,null)):Y&&(Y.d(1),Y=null),le[4]?Z?(Z.p(le,he),he[0]&16&&ke(Z,1)):(Z=Ji(le),Z.c(),ke(Z,1),Z.m(e,g)):Z&&(xs(),Ce(Z,1,1,()=>{Z=null}),Ms()),de===(de=se(le))&&te?te.p(le,he):(te&&te.d(1),te=de&&de(le),te&&(te.c(),te.m(e,_))),le[10].length>0&&!le[9]?ce?ce.p(le,he):(ce=$i(le),ce.c(),ce.m(v,S)):ce&&(ce.d(1),ce=null),le[9]?ue?ue.p(le,he):(ue=tl(le),ue.c(),ue.m(v,I)):ue&&(ue.d(1),ue=null),he[0]&4&&lt(O,le[2]),(!G||he[0]&4&&x!==(x=!le[2].trim()))&&(V.disabled=x)},i(le){G||(ke(o.$$.fragment,le),ke(f.$$.fragment,le),ke(Z),G=!0)},o(le){Ce(o.$$.fragment,le),Ce(f.$$.fragment,le),Ce(Z),G=!1},d(le){le&&m(e),H&&H.d(),He(o),He(f),Y&&Y.d(),s[32](null),Z&&Z.d(),te&&te.d(),ce&&ce.d(),ue&&ue.d(),s[36](null),s[38](null),U=!1,Ae(W)}}}function Qf(s){s.preventDefault(),s.stopPropagation()}function Jf(s,e,t){let n,r,i,a,l,o,u;Re(s,Os,ie=>t(1,i=ie)),Re(s,ns,ie=>t(44,a=ie)),Re(s,At,ie=>t(31,l=ie)),Re(s,Tr,ie=>t(15,o=ie)),Re(s,Ia,ie=>t(16,u=ie));let f="",p,h,g=!1,_=null,v,S=null,I=0,w=!1,E=[],b=[],A=!1,C=!1,T=0,R;async function O(){await Ha(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function L(){if(!R)return;t(13,R.style.height="auto",R);const ie=Math.min(R.scrollHeight,120);t(13,R.style.height=`${ie}px`,R)}function F(){L(),Wn(!0),h&&clearTimeout(h),h=setTimeout(()=>{Wn(!1)},1e3)}function B(ie){if(ie.key==="ArrowUp"&&!f.trim()&&!S){ie.preventDefault();const J=n.filter(oe=>oe.userId===(a==null?void 0:a.id));if(J.length>0){const oe=J[J.length-1];t(7,S=oe),t(2,f=oe.text)}}else ie.key==="Escape"&&S?(ie.preventDefault(),V()):ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),q())}function q(){f.trim()&&(S?(Oa(i,S.id,f.trim()),t(7,S=null)):(hn(i,f.trim(),"text",{replyTo:_==null?void 0:_.id,isSpoiler:A}),t(5,_=null)),t(2,f=""),Wn(!1),h&&clearTimeout(h),R&&t(13,R.style.height="auto",R))}function V(){t(7,S=null),t(2,f=""),R&&t(13,R.style.height="auto",R)}function N(ie){hn(i,"","gif",{gifUrl:ie.detail,replyTo:_==null?void 0:_.id,isSpoiler:A}),t(5,_=null),t(4,g=!1)}function x(ie){t(5,_=ie);const J=document.querySelector('input[type="text"]');J==null||J.focus()}function G(){t(5,_=null)}async function U(ie){const J=ie.target,oe=Array.from(J.files||[]);if(oe.length===0){console.log("No files selected");return}console.log("Files selected:",oe.length);const ye=1024*1024*1024;for(const be of oe)if(be.size>ye){alert(`File too large! Maximum size is 1GB per file. "${be.name}" is ${(be.size/1024/1024).toFixed(2)}MB`),J.value="";return}E=oe,t(10,b=await Promise.all(oe.map(async be=>{if(be.type.startsWith("image/")){const we=await new Promise(Me=>{const tt=new FileReader;tt.onload=Qe=>{var ze;return Me((ze=Qe.target)==null?void 0:ze.result)},tt.readAsDataURL(be)});return{file:be,preview:we}}return{file:be}}))),J.value=""}function W(ie){E=E.filter((J,oe)=>oe!==ie),t(10,b=b.filter((J,oe)=>oe!==ie))}function H(){E=[],t(10,b=[])}function Y(ie){var J;ie.preventDefault(),ie.stopPropagation(),T++,(J=ie.dataTransfer)!=null&&J.types.includes("Files")&&t(12,C=!0)}function Z(ie){ie.preventDefault(),ie.stopPropagation(),T--,T===0&&t(12,C=!1)}async function se(ie){var ye;ie.preventDefault(),ie.stopPropagation(),t(12,C=!1),T=0;const J=Array.from(((ye=ie.dataTransfer)==null?void 0:ye.files)||[]);if(J.length===0)return;const oe=1024*1024*1024;for(const be of J)if(be.size>oe){alert(`File too large! Maximum size is 1GB per file. "${be.name}" is ${(be.size/1024/1024).toFixed(2)}MB`);return}E=J,t(10,b=await Promise.all(J.map(async be=>{if(be.type.startsWith("image/")){const we=await new Promise(Me=>{const tt=new FileReader;tt.onload=Qe=>{var ze;return Me((ze=Qe.target)==null?void 0:ze.result)},tt.readAsDataURL(be)});return{file:be,preview:we}}return{file:be}})))}async function de(){if(E.length===0)return;t(9,w=!0);const ie=E.length;let J=0;try{const oe=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,ye=[];for(const be of E){const we=await new Promise((Me,tt)=>{const Qe=new FormData;Qe.append("file",be),Qe.append("channelId",i);const ze=new XMLHttpRequest;ze.upload.addEventListener("progress",qe=>{if(qe.lengthComputable){const gt=qe.loaded/qe.total*100,ft=(J+gt/100)/ie*100;t(8,I=Math.round(ft))}}),ze.addEventListener("load",()=>{if(ze.status===200){const qe=JSON.parse(ze.responseText);J++,Me({fileUrl:qe.fileUrl,fileName:be.name,fileSize:be.size})}else tt(new Error("Upload failed"))}),ze.addEventListener("error",()=>{tt(new Error("Upload failed"))}),ze.open("POST",`${oe}/api/upload`),ze.send(Qe)});ye.push(we)}ye.length===1?hn(i,f.trim()||`Shared: ${ye[0].fileName}`,"file",{fileUrl:ye[0].fileUrl,fileName:ye[0].fileName,fileSize:ye[0].fileSize,replyTo:_==null?void 0:_.id,isSpoiler:A}):hn(i,f.trim()||`Shared ${ye.length} files`,"file",{files:ye,replyTo:_==null?void 0:_.id,isSpoiler:A}),console.log("All files uploaded"),t(2,f=""),t(5,_=null),E=[],t(10,b=[]),t(9,w=!1),t(8,I=0)}catch(oe){console.error("Upload error:",oe),alert("Failed to upload files. Please try again."),t(9,w=!1),t(8,I=0)}}rs(()=>{O()});function te(ie){et[ie?"unshift":"push"](()=>{p=ie,t(3,p)})}const ce=()=>t(4,g=!1),ue=ie=>W(ie);function le(){A=this.checked,t(11,A)}function he(ie){et[ie?"unshift":"push"](()=>{v=ie,t(6,v)})}const Pe=()=>v==null?void 0:v.click();function re(ie){et[ie?"unshift":"push"](()=>{R=ie,t(13,R)})}function je(){f=this.value,t(2,f)}const Te=()=>t(4,g=!g);return s.$$.update=()=>{s.$$.dirty[0]&2|s.$$.dirty[1]&1&&t(0,n=l[i]||[]),s.$$.dirty[0]&1&&t(14,r=n.filter(ie=>ie.isPinned)),s.$$.dirty[0]&1&&n.length&&O()},[n,i,f,p,g,_,v,S,I,w,b,A,C,R,r,o,u,F,B,q,V,N,x,G,U,W,H,Y,Z,se,de,l,te,ce,ue,le,he,Pe,re,je,Te]}class $f extends ct{constructor(e){super(),ut(this,e,Jf,Kf,ot,{},null,[-1,-1])}}function ed(s){let e,t,n,r,i,a,l,o,u,f="Join Chat",p,h;return{c(){e=y("div"),t=y("div"),n=y("img"),i=z(),a=y("form"),l=y("input"),o=z(),u=y("button"),u.textContent=f,this.h()},l(g){e=k(g,"DIV",{class:!0});var _=D(e);t=k(_,"DIV",{class:!0});var v=D(t);n=k(v,"IMG",{src:!0,alt:!0,class:!0}),i=P(v),a=k(v,"FORM",{class:!0});var S=D(a);l=k(S,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=P(S),u=k(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$(u)!=="svelte-1oym1t5"&&(u.textContent=f),S.forEach(m),v.forEach(m),_.forEach(m),this.h()},h(){Be(n.src,r="/wabi-logo.png")||d(n,"src",r),d(n,"alt","Wabi"),d(n,"class","logo svelte-1vqfptn"),d(l,"type","text"),d(l,"placeholder","Enter your username"),d(l,"maxlength","20"),l.required=!0,l.autofocus=!0,d(l,"class","svelte-1vqfptn"),d(u,"type","submit"),d(u,"class","svelte-1vqfptn"),d(a,"class","svelte-1vqfptn"),d(t,"class","login-box svelte-1vqfptn"),d(e,"class","login-container svelte-1vqfptn")},m(g,_){j(g,e,_),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),lt(l,s[0]),c(a,o),c(a,u),l.focus(),p||(h=[X(l,"input",s[2]),X(a,"submit",Ga(s[1]))],p=!0)},p(g,[_]){_&1&&l.value!==g[0]&&lt(l,g[0])},i:Ie,o:Ie,d(g){g&&m(e),p=!1,Ae(h)}}}function td(s,e,t){const n=or();let r="";function i(){r.trim()&&n("login",r.trim())}function a(){r=this.value,t(0,r)}return[r,i,a]}class sd extends ct{constructor(e){super(),ut(this,e,td,ed,ot,{})}}function sl(s,e,t){const n=s.slice();return n[27]=e[t],n}function nl(s){let e,t,n,r="Total Messages",i,a,l=s[3].totalMessages.toLocaleString()+"",o,u,f,p,h="Storage Used",g,_,v=An(s[3].totalSize)+"",S,I,w,E,b="Archives",A,C,T=s[3].archives.length+"",R,O,L,F,B,q="Rotation Period",V,N,x,G="Weekly",U,W="Monthly",H,Y="Every 6 Months",Z,se="Yearly",de,te,ce="How often to create a new archive file (like changing batteries)",ue,le,he,Pe,re="Keep Last",je,Te,ie,J,oe,ye="archives",be,we,Me="Older archives are automatically deleted to save space",tt,Qe,ze,qe,gt="ðŸ—‘ï¸ Clear All History",ft,nt;function Et(_e,Oe){return _e[3].archives.length>0?rd:nd}let Ut=Et(s),rt=Ut(s);return{c(){e=y("div"),t=y("div"),n=y("div"),n.textContent=r,i=z(),a=y("div"),o=Q(l),u=z(),f=y("div"),p=y("div"),p.textContent=h,g=z(),_=y("div"),S=Q(v),I=z(),w=y("div"),E=y("div"),E.textContent=b,A=z(),C=y("div"),R=Q(T),O=z(),L=y("div"),F=y("label"),B=y("span"),B.textContent=q,V=z(),N=y("select"),x=y("option"),x.textContent=G,U=y("option"),U.textContent=W,H=y("option"),H.textContent=Y,Z=y("option"),Z.textContent=se,de=z(),te=y("p"),te.textContent=ce,ue=z(),le=y("div"),he=y("label"),Pe=y("span"),Pe.textContent=re,je=z(),Te=y("div"),ie=y("input"),J=z(),oe=y("span"),oe.textContent=ye,be=z(),we=y("p"),we.textContent=Me,tt=z(),rt.c(),Qe=z(),ze=y("div"),qe=y("button"),qe.textContent=gt,this.h()},l(_e){e=k(_e,"DIV",{class:!0});var Oe=D(e);t=k(Oe,"DIV",{class:!0});var Ot=D(t);n=k(Ot,"DIV",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-akn32o"&&(n.textContent=r),i=P(Ot),a=k(Ot,"DIV",{class:!0});var xt=D(a);o=K(xt,l),xt.forEach(m),Ot.forEach(m),u=P(Oe),f=k(Oe,"DIV",{class:!0});var ee=D(f);p=k(ee,"DIV",{class:!0,"data-svelte-h":!0}),$(p)!=="svelte-5vlbe4"&&(p.textContent=h),g=P(ee),_=k(ee,"DIV",{class:!0});var me=D(_);S=K(me,v),me.forEach(m),ee.forEach(m),I=P(Oe),w=k(Oe,"DIV",{class:!0});var kt=D(w);E=k(kt,"DIV",{class:!0,"data-svelte-h":!0}),$(E)!=="svelte-1e1df45"&&(E.textContent=b),A=P(kt),C=k(kt,"DIV",{class:!0});var dt=D(C);R=K(dt,T),dt.forEach(m),kt.forEach(m),Oe.forEach(m),O=P(_e),L=k(_e,"DIV",{class:!0});var Ze=D(L);F=k(Ze,"LABEL",{class:!0});var Mt=D(F);B=k(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),$(B)!=="svelte-608xyy"&&(B.textContent=q),V=P(Mt),N=k(Mt,"SELECT",{class:!0});var ht=D(N);x=k(ht,"OPTION",{"data-svelte-h":!0}),$(x)!=="svelte-crm6lv"&&(x.textContent=G),U=k(ht,"OPTION",{"data-svelte-h":!0}),$(U)!=="svelte-hva46z"&&(U.textContent=W),H=k(ht,"OPTION",{"data-svelte-h":!0}),$(H)!=="svelte-1s0lvql"&&(H.textContent=Y),Z=k(ht,"OPTION",{"data-svelte-h":!0}),$(Z)!=="svelte-jp5v27"&&(Z.textContent=se),ht.forEach(m),Mt.forEach(m),de=P(Ze),te=k(Ze,"P",{class:!0,"data-svelte-h":!0}),$(te)!=="svelte-qu5pay"&&(te.textContent=ce),Ze.forEach(m),ue=P(_e),le=k(_e,"DIV",{class:!0});var is=D(le);he=k(is,"LABEL",{class:!0});var Xe=D(he);Pe=k(Xe,"SPAN",{class:!0,"data-svelte-h":!0}),$(Pe)!=="svelte-1im50qe"&&(Pe.textContent=re),je=P(Xe),Te=k(Xe,"DIV",{class:!0});var Jt=D(Te);ie=k(Jt,"INPUT",{type:!0,min:!0,max:!0,class:!0}),J=P(Jt),oe=k(Jt,"SPAN",{class:!0,"data-svelte-h":!0}),$(oe)!=="svelte-nj3imy"&&(oe.textContent=ye),Jt.forEach(m),Xe.forEach(m),be=P(is),we=k(is,"P",{class:!0,"data-svelte-h":!0}),$(we)!=="svelte-he359b"&&(we.textContent=Me),is.forEach(m),tt=P(_e),rt.l(_e),Qe=P(_e),ze=k(_e,"DIV",{class:!0});var _s=D(ze);qe=k(_s,"BUTTON",{class:!0,"data-svelte-h":!0}),$(qe)!=="svelte-1u0bcm7"&&(qe.textContent=gt),_s.forEach(m),this.h()},h(){d(n,"class","stat-label svelte-1jfalu6"),d(a,"class","stat-value svelte-1jfalu6"),d(t,"class","stat svelte-1jfalu6"),d(p,"class","stat-label svelte-1jfalu6"),d(_,"class","stat-value svelte-1jfalu6"),d(f,"class","stat svelte-1jfalu6"),d(E,"class","stat-label svelte-1jfalu6"),d(C,"class","stat-value svelte-1jfalu6"),d(w,"class","stat svelte-1jfalu6"),d(e,"class","stats-panel svelte-1jfalu6"),d(B,"class","label svelte-1jfalu6"),x.__value="week",lt(x,x.__value),U.__value="month",lt(U,U.__value),H.__value="half-year",lt(H,H.__value),Z.__value="year",lt(Z,Z.__value),d(N,"class","svelte-1jfalu6"),s[1]===void 0&&Wa(()=>s[20].call(N)),d(F,"class","svelte-1jfalu6"),d(te,"class","hint svelte-1jfalu6"),d(L,"class","setting-group svelte-1jfalu6"),d(Pe,"class","label svelte-1jfalu6"),d(ie,"type","number"),d(ie,"min","1"),d(ie,"max","52"),d(ie,"class","svelte-1jfalu6"),d(oe,"class","unit svelte-1jfalu6"),d(Te,"class","number-input-group svelte-1jfalu6"),d(he,"class","svelte-1jfalu6"),d(we,"class","hint svelte-1jfalu6"),d(le,"class","setting-group svelte-1jfalu6"),d(qe,"class","btn-danger svelte-1jfalu6"),d(ze,"class","actions svelte-1jfalu6")},m(_e,Oe){j(_e,e,Oe),c(e,t),c(t,n),c(t,i),c(t,a),c(a,o),c(e,u),c(e,f),c(f,p),c(f,g),c(f,_),c(_,S),c(e,I),c(e,w),c(w,E),c(w,A),c(w,C),c(C,R),j(_e,O,Oe),j(_e,L,Oe),c(L,F),c(F,B),c(F,V),c(F,N),c(N,x),c(N,U),c(N,H),c(N,Z),Pr(N,s[1],!0),c(L,de),c(L,te),j(_e,ue,Oe),j(_e,le,Oe),c(le,he),c(he,Pe),c(he,je),c(he,Te),c(Te,ie),lt(ie,s[2]),c(Te,J),c(Te,oe),c(le,be),c(le,we),j(_e,tt,Oe),rt.m(_e,Oe),j(_e,Qe,Oe),j(_e,ze,Oe),c(ze,qe),ft||(nt=[X(N,"change",s[20]),X(N,"change",s[11]),X(ie,"input",s[21]),X(ie,"change",s[12]),X(qe,"click",s[17])],ft=!0)},p(_e,Oe){Oe&8&&l!==(l=_e[3].totalMessages.toLocaleString()+"")&&ne(o,l),Oe&8&&v!==(v=An(_e[3].totalSize)+"")&&ne(S,v),Oe&8&&T!==(T=_e[3].archives.length+"")&&ne(R,T),Oe&2&&Pr(N,_e[1]),Oe&4&&Xl(ie.value)!==_e[2]&&lt(ie,_e[2]),Ut===(Ut=Et(_e))&&rt?rt.p(_e,Oe):(rt.d(1),rt=Ut(_e),rt&&(rt.c(),rt.m(Qe.parentNode,Qe)))},d(_e){_e&&(m(e),m(O),m(L),m(ue),m(le),m(tt),m(Qe),m(ze)),rt.d(_e),ft=!1,Ae(nt)}}}function nd(s){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-1jfalu6")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function rd(s){let e,t,n,r="Archive History",i,a,l="ðŸ“¦ Export All",o,u,f,p,h=Ve(s[3].archives),g=[];for(let _=0;_<h.length;_+=1)g[_]=rl(sl(s,h,_));return{c(){e=y("div"),t=y("div"),n=y("h4"),n.textContent=r,i=z(),a=y("button"),a.textContent=l,o=z(),u=y("div");for(let _=0;_<g.length;_+=1)g[_].c();this.h()},l(_){e=k(_,"DIV",{class:!0});var v=D(e);t=k(v,"DIV",{class:!0});var S=D(t);n=k(S,"H4",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-1i91zrs"&&(n.textContent=r),i=P(S),a=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-197zvis"&&(a.textContent=l),S.forEach(m),o=P(v),u=k(v,"DIV",{class:!0});var I=D(u);for(let w=0;w<g.length;w+=1)g[w].l(I);I.forEach(m),v.forEach(m),this.h()},h(){d(n,"class","svelte-1jfalu6"),d(a,"class","btn-small svelte-1jfalu6"),d(t,"class","section-header svelte-1jfalu6"),d(u,"class","archive-list svelte-1jfalu6"),d(e,"class","archives-section svelte-1jfalu6")},m(_,v){j(_,e,v),c(e,t),c(t,n),c(t,i),c(t,a),c(e,o),c(e,u);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(u,null);f||(p=X(a,"click",s[16]),f=!0)},p(_,v){if(v&40968){h=Ve(_[3].archives);let S;for(S=0;S<h.length;S+=1){const I=sl(_,h,S);g[S]?g[S].p(I,v):(g[S]=rl(I),g[S].c(),g[S].m(u,null))}for(;S<g.length;S+=1)g[S].d(1);g.length=h.length}},d(_){_&&m(e),Dn(g,_),f=!1,p()}}}function rl(s){let e,t,n,r=Cn(s[27].period)+"",i,a,l,o=An(s[27].size)+"",u,f,p=s[27].messageCount.toLocaleString()+"",h,g,_,v,S,I="ðŸ’¾",w,E,b="ðŸ—‘ï¸",A,C,T;function R(){return s[22](s[27])}function O(){return s[23](s[27])}return{c(){e=y("div"),t=y("div"),n=y("span"),i=Q(r),a=z(),l=y("span"),u=Q(o),f=Q(" â€¢ "),h=Q(p),g=Q(" messages"),_=z(),v=y("div"),S=y("button"),S.textContent=I,w=z(),E=y("button"),E.textContent=b,A=z(),this.h()},l(L){e=k(L,"DIV",{class:!0});var F=D(e);t=k(F,"DIV",{class:!0});var B=D(t);n=k(B,"SPAN",{class:!0});var q=D(n);i=K(q,r),q.forEach(m),a=P(B),l=k(B,"SPAN",{class:!0});var V=D(l);u=K(V,o),f=K(V," â€¢ "),h=K(V,p),g=K(V," messages"),V.forEach(m),B.forEach(m),_=P(F),v=k(F,"DIV",{class:!0});var N=D(v);S=k(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(S)!=="svelte-13e8aja"&&(S.textContent=I),w=P(N),E=k(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(E)!=="svelte-1br206h"&&(E.textContent=b),N.forEach(m),A=P(F),F.forEach(m),this.h()},h(){d(n,"class","archive-period svelte-1jfalu6"),d(l,"class","archive-meta svelte-1jfalu6"),d(t,"class","archive-info svelte-1jfalu6"),d(S,"class","btn-icon svelte-1jfalu6"),d(S,"title","Export"),d(E,"class","btn-icon danger svelte-1jfalu6"),d(E,"title","Delete"),d(v,"class","archive-actions svelte-1jfalu6"),d(e,"class","archive-item svelte-1jfalu6")},m(L,F){j(L,e,F),c(e,t),c(t,n),c(n,i),c(t,a),c(t,l),c(l,u),c(l,f),c(l,h),c(l,g),c(e,_),c(e,v),c(v,S),c(v,w),c(v,E),c(e,A),C||(T=[X(S,"click",R),X(E,"click",O)],C=!0)},p(L,F){s=L,F&8&&r!==(r=Cn(s[27].period)+"")&&ne(i,r),F&8&&o!==(o=An(s[27].size)+"")&&ne(u,o),F&8&&p!==(p=s[27].messageCount.toLocaleString()+"")&&ne(h,p)},d(L){L&&m(e),C=!1,Ae(T)}}}function id(s){let e,t,n='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,a,l,o,u,f="Save chat history locally",p,h,g="When enabled, messages are stored in your browser. You control your data.",_,v,S,I,w,E,b,A,C,T,R=s[0]&&nl(s);return S=new Cs({props:{isOpen:s[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:s[9],onCancel:s[10]}}),w=new Cs({props:{isOpen:s[5],title:"Delete Archive",message:`Delete archive "${Cn(s[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:s[14],onCancel:s[24]}}),b=new Cs({props:{isOpen:s[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:s[18],onCancel:s[25]}}),{c(){e=y("div"),t=y("div"),t.innerHTML=n,r=z(),i=y("div"),a=y("label"),l=y("input"),o=z(),u=y("span"),u.textContent=f,p=z(),h=y("p"),h.textContent=g,_=z(),R&&R.c(),v=z(),Ye(S.$$.fragment),I=z(),Ye(w.$$.fragment),E=z(),Ye(b.$$.fragment),this.h()},l(O){e=k(O,"DIV",{class:!0});var L=D(e);t=k(L,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-s9o5r3"&&(t.innerHTML=n),r=P(L),i=k(L,"DIV",{class:!0});var F=D(i);a=k(F,"LABEL",{class:!0});var B=D(a);l=k(B,"INPUT",{type:!0,class:!0}),o=P(B),u=k(B,"SPAN",{class:!0,"data-svelte-h":!0}),$(u)!=="svelte-1ssgcs1"&&(u.textContent=f),B.forEach(m),p=P(F),h=k(F,"P",{class:!0,"data-svelte-h":!0}),$(h)!=="svelte-1hbmqvb"&&(h.textContent=g),F.forEach(m),_=P(L),R&&R.l(L),L.forEach(m),v=P(O),We(S.$$.fragment,O),I=P(O),We(w.$$.fragment,O),E=P(O),We(b.$$.fragment,O),this.h()},h(){d(t,"class","header svelte-1jfalu6"),d(l,"type","checkbox"),d(l,"class","svelte-1jfalu6"),d(u,"class","toggle-label"),d(a,"class","toggle-setting svelte-1jfalu6"),d(h,"class","hint svelte-1jfalu6"),d(i,"class","setting-group svelte-1jfalu6"),d(e,"class","storage-settings svelte-1jfalu6")},m(O,L){j(O,e,L),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),l.checked=s[0],c(a,o),c(a,u),c(i,p),c(i,h),c(e,_),R&&R.m(e,null),j(O,v,L),Ge(S,O,L),j(O,I,L),Ge(w,O,L),j(O,E,L),Ge(b,O,L),A=!0,C||(T=[X(l,"change",s[19]),X(l,"change",s[8])],C=!0)},p(O,[L]){L&1&&(l.checked=O[0]),O[0]?R?R.p(O,L):(R=nl(O),R.c(),R.m(e,null)):R&&(R.d(1),R=null);const F={};L&16&&(F.isOpen=O[4]),S.$set(F);const B={};L&32&&(B.isOpen=O[5]),L&64&&(B.message=`Delete archive "${Cn(O[6])}"?`),L&32&&(B.onCancel=O[24]),w.$set(B);const q={};L&128&&(q.isOpen=O[7]),L&128&&(q.onCancel=O[25]),b.$set(q)},i(O){A||(ke(S.$$.fragment,O),ke(w.$$.fragment,O),ke(b.$$.fragment,O),A=!0)},o(O){Ce(S.$$.fragment,O),Ce(w.$$.fragment,O),Ce(b.$$.fragment,O),A=!1},d(O){O&&(m(e),m(v),m(I),m(E)),R&&R.d(),He(S,O),He(w,O),He(b,O),C=!1,Ae(T)}}}function An(s){if(s===0)return"0 B";const e=s/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(s/1024).toFixed(2)} KB`}function Cn(s){if(s.includes("-W")){const[e,t]=s.split("-W");return`Week ${t}, ${e}`}else if(s.includes("-H")){const[e,t]=s.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(s.match(/^\d{4}-\d{2}$/)){const[e,t]=s.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${s}`}function ld(s,e,t){let n=!1,r=zt.getRotationPeriod(),i=zt.getMaxArchives(),a={archives:[],totalSize:0,totalMessages:0},l=!1,o=!1,u="",f=!1;async function p(){t(0,n=!n),await zt.setEnabled(n),n?await C():t(4,l=!0)}async function h(){t(4,l=!1),await C()}function g(){t(0,n=!0),zt.setEnabled(!0),t(4,l=!1)}async function _(){await zt.setRotationPeriod(r),await C()}async function v(){await zt.setMaxArchives(i),await C()}async function S(V){t(6,u=V),t(5,o=!0)}async function I(){await zt.deleteArchive(u),await C(),t(5,o=!1)}async function w(V){await zt.exportArchive(V)}async function E(){await zt.exportArchives()}async function b(){t(7,f=!0)}async function A(){await zt.clearAllHistory(),await C(),t(7,f=!1)}async function C(){t(3,a=await zt.getStats())}rs(async()=>{t(0,n=await zt.isEnabled()),await C()});function T(){n=this.checked,t(0,n)}function R(){r=Ya(this),t(1,r)}function O(){i=Xl(this.value),t(2,i)}return[n,r,i,a,l,o,u,f,p,h,g,_,v,S,I,w,E,b,A,T,R,O,V=>w(V.period),V=>S(V.period),()=>t(5,o=!1),()=>t(7,f=!1)]}class ad extends ct{constructor(e){super(),ut(this,e,ld,id,ot,{})}}function il(s){let e,t,n,r,i="âš™ï¸ Settings",a,l,o="âœ•",u,f,p,h,g="ðŸŽ¤ Audio & Video",_,v,S,I='<span class="setting-label svelte-1l9ajc2">Sound Effects</span> <span class="setting-description svelte-1l9ajc2">Play sounds for messages and notifications</span>',w,E,b=s[1]?"ðŸ”Š":"ðŸ”‡",A,C,T,R,O='<span class="setting-label svelte-1l9ajc2">Microphone</span> <span class="setting-description svelte-1l9ajc2">Enable microphone for voice calls</span>',L,F,B=s[3]?"ðŸŽ¤":"ðŸ”‡",q,V,N,x,G='<span class="setting-label svelte-1l9ajc2">Camera</span> <span class="setting-description svelte-1l9ajc2">Enable camera for video calls</span>',U,W,H=s[4]?"ðŸ“¹":"ðŸ“·",Y,Z,se,de,te="ðŸ”” Notifications",ce,ue,le,he='<span class="setting-label svelte-1l9ajc2">Desktop Notifications</span> <span class="setting-description svelte-1l9ajc2">Get notified when you receive new messages</span>',Pe,re,je=s[2]?"âœ… Enabled":"ðŸ”” Enable",Te,ie,J,oe,ye="ðŸŽ¨ Appearance",be,we,Me,tt='<span class="setting-label svelte-1l9ajc2">Theme</span> <span class="setting-description svelte-1l9ajc2">Switch between light and dark mode</span>',Qe,ze,qe=s[5]==="dark"?"ðŸŒ™":"â˜€ï¸",gt,ft,nt,Et,Ut="ðŸ–¥ï¸ Server Management",rt,_e,Oe,Ot='<span class="setting-label svelte-1l9ajc2">Clear All Server Messages</span> <span class="setting-description svelte-1l9ajc2">Delete all messages from the server for all users (cannot be undone)</span>',xt,ee,me="ðŸ—‘ï¸ Clear Server",kt,dt,Ze,Mt,ht,is='<h3 class="svelte-1l9ajc2">â„¹ï¸ About</h3> <div class="about-info svelte-1l9ajc2"><p class="svelte-1l9ajc2"><strong class="svelte-1l9ajc2">Wabi Chat</strong></p> <p class="svelte-1l9ajc2">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-1l9ajc2">Server stores nothing permanently. You control your data.</p> <p class="version svelte-1l9ajc2">Version 1.0.0</p></div>',Xe,Jt,_s;return Ze=new ad({}),{c(){e=y("div"),t=y("div"),n=y("div"),r=y("h2"),r.textContent=i,a=z(),l=y("button"),l.textContent=o,u=z(),f=y("div"),p=y("div"),h=y("h3"),h.textContent=g,_=z(),v=y("div"),S=y("div"),S.innerHTML=I,w=z(),E=y("button"),A=Q(b),C=z(),T=y("div"),R=y("div"),R.innerHTML=O,L=z(),F=y("button"),q=Q(B),V=z(),N=y("div"),x=y("div"),x.innerHTML=G,U=z(),W=y("button"),Y=Q(H),Z=z(),se=y("div"),de=y("h3"),de.textContent=te,ce=z(),ue=y("div"),le=y("div"),le.innerHTML=he,Pe=z(),re=y("button"),Te=Q(je),ie=z(),J=y("div"),oe=y("h3"),oe.textContent=ye,be=z(),we=y("div"),Me=y("div"),Me.innerHTML=tt,Qe=z(),ze=y("button"),gt=Q(qe),ft=z(),nt=y("div"),Et=y("h3"),Et.textContent=Ut,rt=z(),_e=y("div"),Oe=y("div"),Oe.innerHTML=Ot,xt=z(),ee=y("button"),ee.textContent=me,kt=z(),dt=y("div"),Ye(Ze.$$.fragment),Mt=z(),ht=y("div"),ht.innerHTML=is,this.h()},l(Se){e=k(Se,"DIV",{class:!0});var Je=D(e);t=k(Je,"DIV",{class:!0});var Rs=D(t);n=k(Rs,"DIV",{class:!0});var bs=D(n);r=k(bs,"H2",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-15bbpfh"&&(r.textContent=i),a=P(bs),l=k(bs,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-3o141q"&&(l.textContent=o),bs.forEach(m),u=P(Rs),f=k(Rs,"DIV",{class:!0});var yt=D(f);p=k(yt,"DIV",{class:!0});var qt=D(p);h=k(qt,"H3",{class:!0,"data-svelte-h":!0}),$(h)!=="svelte-1tdb4hv"&&(h.textContent=g),_=P(qt),v=k(qt,"DIV",{class:!0});var ks=D(v);S=k(ks,"DIV",{class:!0,"data-svelte-h":!0}),$(S)!=="svelte-5e193f"&&(S.innerHTML=I),w=P(ks),E=k(ks,"BUTTON",{class:!0});var an=D(E);A=K(an,b),an.forEach(m),ks.forEach(m),C=P(qt),T=k(qt,"DIV",{class:!0});var Tt=D(T);R=k(Tt,"DIV",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-ql0oob"&&(R.innerHTML=O),L=P(Tt),F=k(Tt,"BUTTON",{class:!0});var $t=D(F);q=K($t,B),$t.forEach(m),Tt.forEach(m),V=P(qt),N=k(qt,"DIV",{class:!0});var ys=D(N);x=k(ys,"DIV",{class:!0,"data-svelte-h":!0}),$(x)!=="svelte-fu2kxq"&&(x.innerHTML=G),U=P(ys),W=k(ys,"BUTTON",{class:!0});var js=D(W);Y=K(js,H),js.forEach(m),ys.forEach(m),qt.forEach(m),Z=P(yt),se=k(yt,"DIV",{class:!0});var hs=D(se);de=k(hs,"H3",{class:!0,"data-svelte-h":!0}),$(de)!=="svelte-yb4801"&&(de.textContent=te),ce=P(hs),ue=k(hs,"DIV",{class:!0});var ws=D(ue);le=k(ws,"DIV",{class:!0,"data-svelte-h":!0}),$(le)!=="svelte-11j8eba"&&(le.innerHTML=he),Pe=P(ws),re=k(ws,"BUTTON",{class:!0});var Bt=D(re);Te=K(Bt,je),Bt.forEach(m),ws.forEach(m),hs.forEach(m),ie=P(yt),J=k(yt,"DIV",{class:!0});var Es=D(J);oe=k(Es,"H3",{class:!0,"data-svelte-h":!0}),$(oe)!=="svelte-bdq4j0"&&(oe.textContent=ye),be=P(Es),we=k(Es,"DIV",{class:!0});var Ts=D(we);Me=k(Ts,"DIV",{class:!0,"data-svelte-h":!0}),$(Me)!=="svelte-1expsbb"&&(Me.innerHTML=tt),Qe=P(Ts),ze=k(Ts,"BUTTON",{class:!0});var Vs=D(ze);gt=K(Vs,qe),Vs.forEach(m),Ts.forEach(m),Es.forEach(m),ft=P(yt),nt=k(yt,"DIV",{class:!0});var Ss=D(nt);Et=k(Ss,"H3",{class:!0,"data-svelte-h":!0}),$(Et)!=="svelte-13bxj89"&&(Et.textContent=Ut),rt=P(Ss),_e=k(Ss,"DIV",{class:!0});var Ps=D(_e);Oe=k(Ps,"DIV",{class:!0,"data-svelte-h":!0}),$(Oe)!=="svelte-1kywvm7"&&(Oe.innerHTML=Ot),xt=P(Ps),ee=k(Ps,"BUTTON",{class:!0,"data-svelte-h":!0}),$(ee)!=="svelte-uzfcg3"&&(ee.textContent=me),Ps.forEach(m),Ss.forEach(m),kt=P(yt),dt=k(yt,"DIV",{class:!0});var ge=D(dt);We(Ze.$$.fragment,ge),ge.forEach(m),Mt=P(yt),ht=k(yt,"DIV",{class:!0,"data-svelte-h":!0}),$(ht)!=="svelte-137zy12"&&(ht.innerHTML=is),yt.forEach(m),Rs.forEach(m),Je.forEach(m),this.h()},h(){d(r,"class","svelte-1l9ajc2"),d(l,"class","close-btn svelte-1l9ajc2"),d(n,"class","modal-header svelte-1l9ajc2"),d(h,"class","svelte-1l9ajc2"),d(S,"class","setting-info svelte-1l9ajc2"),d(E,"class","toggle-btn svelte-1l9ajc2"),ve(E,"active",s[1]),d(v,"class","setting-item svelte-1l9ajc2"),d(R,"class","setting-info svelte-1l9ajc2"),d(F,"class","toggle-btn svelte-1l9ajc2"),ve(F,"active",s[3]),d(T,"class","setting-item svelte-1l9ajc2"),d(x,"class","setting-info svelte-1l9ajc2"),d(W,"class","toggle-btn svelte-1l9ajc2"),ve(W,"active",s[4]),d(N,"class","setting-item svelte-1l9ajc2"),d(p,"class","settings-section svelte-1l9ajc2"),d(de,"class","svelte-1l9ajc2"),d(le,"class","setting-info svelte-1l9ajc2"),d(re,"class","action-btn svelte-1l9ajc2"),ve(re,"active",s[2]),d(ue,"class","setting-item svelte-1l9ajc2"),d(se,"class","settings-section svelte-1l9ajc2"),d(oe,"class","svelte-1l9ajc2"),d(Me,"class","setting-info svelte-1l9ajc2"),d(ze,"class","toggle-btn svelte-1l9ajc2"),ve(ze,"active",s[5]==="light"),d(we,"class","setting-item svelte-1l9ajc2"),d(J,"class","settings-section svelte-1l9ajc2"),d(Et,"class","svelte-1l9ajc2"),d(Oe,"class","setting-info svelte-1l9ajc2"),d(ee,"class","action-btn danger svelte-1l9ajc2"),d(_e,"class","setting-item svelte-1l9ajc2"),d(nt,"class","settings-section svelte-1l9ajc2"),d(dt,"class","settings-section svelte-1l9ajc2"),d(ht,"class","settings-section svelte-1l9ajc2"),d(f,"class","settings-sections svelte-1l9ajc2"),d(t,"class","modal-content svelte-1l9ajc2"),d(e,"class","modal-overlay svelte-1l9ajc2")},m(Se,Je){j(Se,e,Je),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(p,h),c(p,_),c(p,v),c(v,S),c(v,w),c(v,E),c(E,A),c(p,C),c(p,T),c(T,R),c(T,L),c(T,F),c(F,q),c(p,V),c(p,N),c(N,x),c(N,U),c(N,W),c(W,Y),c(f,Z),c(f,se),c(se,de),c(se,ce),c(se,ue),c(ue,le),c(ue,Pe),c(ue,re),c(re,Te),c(f,ie),c(f,J),c(J,oe),c(J,be),c(J,we),c(we,Me),c(we,Qe),c(we,ze),c(ze,gt),c(f,ft),c(f,nt),c(nt,Et),c(nt,rt),c(nt,_e),c(_e,Oe),c(_e,xt),c(_e,ee),c(f,kt),c(f,dt),Ge(Ze,dt,null),c(f,Mt),c(f,ht),Xe=!0,Jt||(_s=[X(l,"click",s[16]),X(E,"click",s[8]),X(F,"click",s[9]),X(W,"click",s[10]),X(re,"click",s[12]),X(ze,"click",s[11]),X(ee,"click",s[14]),X(t,"click",_t(s[17])),X(e,"click",s[16])],Jt=!0)},p(Se,Je){(!Xe||Je&2)&&b!==(b=Se[1]?"ðŸ”Š":"ðŸ”‡")&&ne(A,b),(!Xe||Je&2)&&ve(E,"active",Se[1]),(!Xe||Je&8)&&B!==(B=Se[3]?"ðŸŽ¤":"ðŸ”‡")&&ne(q,B),(!Xe||Je&8)&&ve(F,"active",Se[3]),(!Xe||Je&16)&&H!==(H=Se[4]?"ðŸ“¹":"ðŸ“·")&&ne(Y,H),(!Xe||Je&16)&&ve(W,"active",Se[4]),(!Xe||Je&4)&&je!==(je=Se[2]?"âœ… Enabled":"ðŸ”” Enable")&&ne(Te,je),(!Xe||Je&4)&&ve(re,"active",Se[2]),(!Xe||Je&32)&&qe!==(qe=Se[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&ne(gt,qe),(!Xe||Je&32)&&ve(ze,"active",Se[5]==="light")},i(Se){Xe||(ke(Ze.$$.fragment,Se),Xe=!0)},o(Se){Ce(Ze.$$.fragment,Se),Xe=!1},d(Se){Se&&m(e),He(Ze),Jt=!1,Ae(_s)}}}function od(s){let e,t,n,r,i,a=s[0]&&il(s);return t=new Cs({props:{isOpen:s[6],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:s[13],onCancel:s[18]}}),r=new Cs({props:{isOpen:s[7],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:s[15],onCancel:s[19]}}),{c(){a&&a.c(),e=z(),Ye(t.$$.fragment),n=z(),Ye(r.$$.fragment)},l(l){a&&a.l(l),e=P(l),We(t.$$.fragment,l),n=P(l),We(r.$$.fragment,l)},m(l,o){a&&a.m(l,o),j(l,e,o),Ge(t,l,o),j(l,n,o),Ge(r,l,o),i=!0},p(l,[o]){l[0]?a?(a.p(l,o),o&1&&ke(a,1)):(a=il(l),a.c(),ke(a,1),a.m(e.parentNode,e)):a&&(xs(),Ce(a,1,1,()=>{a=null}),Ms());const u={};o&64&&(u.isOpen=l[6]),o&64&&(u.onCancel=l[18]),t.$set(u);const f={};o&128&&(f.isOpen=l[7]),o&128&&(f.onCancel=l[19]),r.$set(f)},i(l){i||(ke(a),ke(t.$$.fragment,l),ke(r.$$.fragment,l),i=!0)},o(l){Ce(a),Ce(t.$$.fragment,l),Ce(r.$$.fragment,l),i=!1},d(l){l&&(m(e),m(n)),a&&a.d(l),He(t,l),He(r,l)}}}function cd(s,e,t){Re(s,ns,T=>t(20,T)),Re(s,Zt,T=>t(21,T)),Re(s,At,T=>t(22,T));let{isOpen:n=!1}=e,r=!0,i=!0,a=!0,l=!0,o="dark",u=!1,f=!1;rs(()=>{t(1,r=localStorage.getItem("soundEnabled")!=="false"),t(2,i=localStorage.getItem("notificationsEnabled")!=="false"),t(3,a=localStorage.getItem("micEnabled")!=="false"),t(4,l=localStorage.getItem("cameraEnabled")!=="false"),t(5,o=localStorage.getItem("theme")||"dark")});function p(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function h(){t(3,a=!a),localStorage.setItem("micEnabled",a.toString())}function g(){t(4,l=!l),localStorage.setItem("cameraEnabled",l.toString())}function _(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}async function v(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}function S(){At.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(6,u=!1)}async function I(){t(7,f=!0)}async function w(){try{const T=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,O=await(await fetch(`${T}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();O.success?(At.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(O.error||"Unknown error"))}catch(T){console.error("Error clearing server messages:",T),alert("Failed to clear server messages. Check console for details.")}t(7,f=!1)}function E(){t(0,n=!1)}function b(T){ds.call(this,s,T)}const A=()=>t(6,u=!1),C=()=>t(7,f=!1);return s.$$set=T=>{"isOpen"in T&&t(0,n=T.isOpen)},[n,r,i,a,l,o,u,f,p,h,g,_,v,S,I,w,E,b,A,C]}class ud extends ct{constructor(e){super(),ut(this,e,cd,od,ot,{isOpen:0})}}function ll(s,e,t){const n=s.slice();return n[16]=e[t],n}function al(s){let e,t,n,r,i,a,l,o,u="Ã—",f,p,h,g;function _(I,w){return I[2].length===0?dd:fd}let v=_(s),S=v(s);return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("h2"),i=Q("ðŸ“Œ Pinned Messages in #"),a=Q(s[1]),l=z(),o=y("button"),o.textContent=u,f=z(),p=y("div"),S.c(),this.h()},l(I){e=k(I,"DIV",{class:!0});var w=D(e);t=k(w,"DIV",{class:!0});var E=D(t);n=k(E,"DIV",{class:!0});var b=D(n);r=k(b,"H2",{class:!0});var A=D(r);i=K(A,"ðŸ“Œ Pinned Messages in #"),a=K(A,s[1]),A.forEach(m),l=P(b),o=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-12zniqk"&&(o.textContent=u),b.forEach(m),f=P(E),p=k(E,"DIV",{class:!0});var C=D(p);S.l(C),C.forEach(m),E.forEach(m),w.forEach(m),this.h()},h(){d(r,"class","svelte-178cyr5"),d(o,"class","close-btn svelte-178cyr5"),d(n,"class","modal-header svelte-178cyr5"),d(p,"class","modal-body svelte-178cyr5"),d(t,"class","modal-content svelte-178cyr5"),d(e,"class","modal-overlay svelte-178cyr5")},m(I,w){j(I,e,w),c(e,t),c(t,n),c(n,r),c(r,i),c(r,a),c(n,l),c(n,o),c(t,f),c(t,p),S.m(p,null),h||(g=[X(o,"click",s[3]),X(t,"click",_t(s[10])),X(e,"click",s[3])],h=!0)},p(I,w){w&2&&ne(a,I[1]),v===(v=_(I))&&S?S.p(I,w):(S.d(1),S=v(I),S&&(S.c(),S.m(p,null)))},d(I){I&&m(e),S.d(),h=!1,Ae(g)}}}function fd(s){let e,t=[],n=new Map,r=Ve(s[2]);const i=a=>a[16].id;for(let a=0;a<r.length;a+=1){let l=ll(s,r,a),o=i(l);n.set(o,t[a]=ol(o,l))}return{c(){e=y("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=D(e);for(let o=0;o<t.length;o+=1)t[o].l(l);l.forEach(m),this.h()},h(){d(e,"class","pinned-messages-list svelte-178cyr5")},m(a,l){j(a,e,l);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(a,l){l&116&&(r=Ve(a[2]),t=Qt(t,l,i,1,a,r,n,e,Kt,ol,null,ll))},d(a){a&&m(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function dd(s){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-178cyr5")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function ol(s,e){let t,n,r,i,a=e[16].user+"",l,o,u,f=cl(e[16].timestamp)+"",p,h,g,_,v="Jump to",S,I,w="Unpin",E,b,A=e[16].text+"",C,T,R,O;function L(){return e[11](e[16])}function F(){return e[12](e[16])}return{key:s,first:null,c(){t=y("div"),n=y("div"),r=y("div"),i=y("span"),l=Q(a),o=z(),u=y("span"),p=Q(f),h=z(),g=y("div"),_=y("button"),_.textContent=v,S=z(),I=y("button"),I.textContent=w,E=z(),b=y("div"),C=Q(A),T=z(),this.h()},l(B){t=k(B,"DIV",{class:!0});var q=D(t);n=k(q,"DIV",{class:!0});var V=D(n);r=k(V,"DIV",{class:!0});var N=D(r);i=k(N,"SPAN",{class:!0,style:!0});var x=D(i);l=K(x,a),x.forEach(m),o=P(N),u=k(N,"SPAN",{class:!0});var G=D(u);p=K(G,f),G.forEach(m),N.forEach(m),h=P(V),g=k(V,"DIV",{class:!0});var U=D(g);_=k(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(_)!=="svelte-1nadwym"&&(_.textContent=v),S=P(U),I=k(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(I)!=="svelte-eqnabo"&&(I.textContent=w),U.forEach(m),V.forEach(m),E=P(q),b=k(q,"DIV",{class:!0});var W=D(b);C=K(W,A),W.forEach(m),T=P(q),q.forEach(m),this.h()},h(){d(i,"class","username svelte-178cyr5"),Ee(i,"color",e[6](e[16].user)),d(u,"class","timestamp svelte-178cyr5"),d(r,"class","user-info svelte-178cyr5"),d(_,"class","jump-btn svelte-178cyr5"),d(_,"title","Jump to message"),d(I,"class","unpin-btn svelte-178cyr5"),d(I,"title","Unpin message"),d(g,"class","action-buttons svelte-178cyr5"),d(n,"class","message-header svelte-178cyr5"),d(b,"class","message-text svelte-178cyr5"),d(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(B,q){j(B,t,q),c(t,n),c(n,r),c(r,i),c(i,l),c(r,o),c(r,u),c(u,p),c(n,h),c(n,g),c(g,_),c(g,S),c(g,I),c(t,E),c(t,b),c(b,C),c(t,T),R||(O=[X(_,"click",L),X(I,"click",F)],R=!0)},p(B,q){e=B,q&4&&a!==(a=e[16].user+"")&&ne(l,a),q&4&&Ee(i,"color",e[6](e[16].user)),q&4&&f!==(f=cl(e[16].timestamp)+"")&&ne(p,f),q&4&&A!==(A=e[16].text+"")&&ne(C,A)},d(B){B&&m(t),R=!1,Ae(O)}}}function hd(s){let e,t=s[0]&&al(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=al(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function cl(s){return new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function pd(s,e,t){let n,r,i,a,l;Re(s,Zt,E=>t(13,i=E)),Re(s,us,E=>t(8,a=E)),Re(s,At,E=>t(9,l=E));let{isOpen:o=!1}=e,{channelId:u=""}=e;function f(){t(0,o=!1)}function p(E){Sr(u,E)}function h(E){f(),setTimeout(()=>{const b=document.getElementById(`message-${E}`);b&&(b.scrollIntoView({behavior:"smooth",block:"center"}),b.classList.add("highlighted"),setTimeout(()=>{b.classList.remove("highlighted")},2e3))},100)}function g(E){return i.find(b=>b.username===E)}function _(E){const b=g(E);return(b==null?void 0:b.color)||"var(--status-offline)"}function v(E){E.key==="Escape"&&o&&f()}rs(()=>(window.addEventListener("keydown",v),()=>{window.removeEventListener("keydown",v)}));function S(E){ds.call(this,s,E)}const I=E=>h(E.id),w=E=>p(E.id);return s.$$set=E=>{"isOpen"in E&&t(0,o=E.isOpen),"channelId"in E&&t(7,u=E.channelId)},s.$$.update=()=>{var E;s.$$.dirty&640&&t(2,n=(l[u]||[]).filter(b=>b.isPinned)),s.$$.dirty&384&&t(1,r=((E=a.find(b=>b.id===u))==null?void 0:E.name)||u)},[o,r,n,f,p,h,_,u,a,l,S,I,w]}class gd extends ct{constructor(e){super(),ut(this,e,pd,hd,ot,{isOpen:0,channelId:7})}}function ul(s,e,t){const n=s.slice();return n[44]=e[t],n}function fl(s,e,t){const n=s.slice();return n[44]=e[t],n}function dl(s,e,t){const n=s.slice();return n[44]=e[t],n}function hl(s){let e,t,n,r,i="Create",a,l;return{c(){e=y("div"),t=y("input"),n=z(),r=y("button"),r.textContent=i,this.h()},l(o){e=k(o,"DIV",{class:!0});var u=D(e);t=k(u,"INPUT",{type:!0,placeholder:!0,class:!0}),n=P(u),r=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(m),this.h()},h(){d(t,"type","text"),d(t,"placeholder","channel-name"),t.autofocus=!0,d(t,"class","svelte-yyh4lc"),d(r,"class","svelte-yyh4lc"),d(e,"class","create-channel svelte-yyh4lc")},m(o,u){j(o,e,u),c(e,t),lt(t,s[1]),c(e,n),c(e,r),t.focus(),a||(l=[X(t,"input",s[25]),X(t,"keydown",s[26]),X(r,"click",s[17])],a=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&lt(t,o[1])},d(o){o&&m(e),a=!1,Ae(l)}}}function pl(s){let e,t="Ã—",n,r;function i(){return s[29](s[44])}return{c(){e=y("button"),e.textContent=t,this.h()},l(a){e=k(a,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){d(e,"class","delete-btn svelte-yyh4lc")},m(a,l){j(a,e,l),n||(r=X(e,"click",_t(i)),n=!0)},p(a,l){s=a},d(a){a&&m(e),n=!1,r()}}}function gl(s,e){let t,n,r,i="#",a,l=e[44].name+"",o,u,f,p,h="ðŸ“Œ",g,_,v,S;function I(){return e[27](e[44])}function w(){return e[28](e[44])}let E=e[44].id!=="general"&&pl(e);return{key:s,first:null,c(){t=y("div"),n=y("button"),r=y("span"),r.textContent=i,a=z(),o=Q(l),u=z(),f=y("div"),p=y("button"),p.textContent=h,g=z(),E&&E.c(),_=z(),this.h()},l(b){t=k(b,"DIV",{class:!0});var A=D(t);n=k(A,"BUTTON",{class:!0});var C=D(n);r=k(C,"SPAN",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-16vlh54"&&(r.textContent=i),a=P(C),o=K(C,l),C.forEach(m),u=P(A),f=k(A,"DIV",{class:!0});var T=D(f);p=k(T,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(p)!=="svelte-18aqzoy"&&(p.textContent=h),g=P(T),E&&E.l(T),T.forEach(m),_=P(A),A.forEach(m),this.h()},h(){d(r,"class","hash svelte-yyh4lc"),d(n,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ve(t,"active",e[14]===e[44].id),this.first=t},m(b,A){j(b,t,A),c(t,n),c(n,r),c(n,a),c(n,o),c(t,u),c(t,f),c(f,p),c(f,g),E&&E.m(f,null),c(t,_),v||(S=[X(n,"click",I),X(p,"click",_t(w))],v=!0)},p(b,A){e=b,A[0]&8192&&l!==(l=e[44].name+"")&&ne(o,l),e[44].id!=="general"?E?E.p(e,A):(E=pl(e),E.c(),E.m(f,null)):E&&(E.d(1),E=null),A[0]&24576&&ve(t,"active",e[14]===e[44].id)},d(b){b&&m(t),E&&E.d(),v=!1,Ae(S)}}}function ml(s){let e,t="Direct Messages",n,r=[],i=new Map,a,l=Ve(s[12]);const o=u=>u[44].id;for(let u=0;u<l.length;u+=1){let f=fl(s,l,u),p=o(f);i.set(p,r[u]=vl(p,f))}return{c(){e=y("div"),e.textContent=t,n=z();for(let u=0;u<r.length;u+=1)r[u].c();a=De(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-r1afib"&&(e.textContent=t),n=P(u);for(let f=0;f<r.length;f+=1)r[f].l(u);a=De(),this.h()},h(){d(e,"class","section-header svelte-yyh4lc")},m(u,f){j(u,e,f),j(u,n,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,f);j(u,a,f)},p(u,f){f[0]&1396736&&(l=Ve(u[12]),r=Qt(r,f,o,1,u,l,i,a.parentNode,Kt,vl,a,fl))},d(u){u&&(m(e),m(n),m(a));for(let f=0;f<r.length;f+=1)r[f].d(u)}}}function vl(s,e){let t,n,r,i="ðŸ’¬",a,l=e[44].name+"",o,u,f,p,h="ðŸ“Œ",g,_,v="Ã—",S,I,w;function E(){return e[30](e[44])}function b(){return e[31](e[44])}function A(){return e[32](e[44])}return{key:s,first:null,c(){t=y("div"),n=y("button"),r=y("span"),r.textContent=i,a=z(),o=Q(l),u=z(),f=y("div"),p=y("button"),p.textContent=h,g=z(),_=y("button"),_.textContent=v,S=z(),this.h()},l(C){t=k(C,"DIV",{class:!0});var T=D(t);n=k(T,"BUTTON",{class:!0});var R=D(n);r=k(R,"SPAN",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-q0xuov"&&(r.textContent=i),a=P(R),o=K(R,l),R.forEach(m),u=P(T),f=k(T,"DIV",{class:!0});var O=D(f);p=k(O,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(p)!=="svelte-18aqzoy"&&(p.textContent=h),g=P(O),_=k(O,"BUTTON",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-12rgdhl"&&(_.textContent=v),O.forEach(m),S=P(T),T.forEach(m),this.h()},h(){d(r,"class","dm-icon svelte-yyh4lc"),d(n,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(_,"class","delete-btn svelte-yyh4lc"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ve(t,"active",e[14]===e[44].id),this.first=t},m(C,T){j(C,t,T),c(t,n),c(n,r),c(n,a),c(n,o),c(t,u),c(t,f),c(f,p),c(f,g),c(f,_),c(t,S),I||(w=[X(n,"click",E),X(p,"click",_t(b)),X(_,"click",_t(A))],I=!0)},p(C,T){e=C,T[0]&4096&&l!==(l=e[44].name+"")&&ne(o,l),T[0]&20480&&ve(t,"active",e[14]===e[44].id)},d(C){C&&m(t),I=!1,Ae(w)}}}function _l(s){let e,t="Group Chats",n,r=[],i=new Map,a,l=Ve(s[11]);const o=u=>u[44].id;for(let u=0;u<l.length;u+=1){let f=ul(s,l,u),p=o(f);i.set(p,r[u]=bl(p,f))}return{c(){e=y("div"),e.textContent=t,n=z();for(let u=0;u<r.length;u+=1)r[u].c();a=De(),this.h()},l(u){e=k(u,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1fof55m"&&(e.textContent=t),n=P(u);for(let f=0;f<r.length;f+=1)r[f].l(u);a=De(),this.h()},h(){d(e,"class","section-header svelte-yyh4lc")},m(u,f){j(u,e,f),j(u,n,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,f);j(u,a,f)},p(u,f){f[0]&1394688&&(l=Ve(u[11]),r=Qt(r,f,o,1,u,l,i,a.parentNode,Kt,bl,a,ul))},d(u){u&&(m(e),m(n),m(a));for(let f=0;f<r.length;f+=1)r[f].d(u)}}}function bl(s,e){let t,n,r,i="ðŸ‘¥",a,l=e[44].name+"",o,u,f,p,h="ðŸ“Œ",g,_,v="Ã—",S,I,w;function E(){return e[33](e[44])}function b(){return e[34](e[44])}function A(){return e[35](e[44])}return{key:s,first:null,c(){t=y("div"),n=y("button"),r=y("span"),r.textContent=i,a=z(),o=Q(l),u=z(),f=y("div"),p=y("button"),p.textContent=h,g=z(),_=y("button"),_.textContent=v,S=z(),this.h()},l(C){t=k(C,"DIV",{class:!0});var T=D(t);n=k(T,"BUTTON",{class:!0});var R=D(n);r=k(R,"SPAN",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-4z5ugu"&&(r.textContent=i),a=P(R),o=K(R,l),R.forEach(m),u=P(T),f=k(T,"DIV",{class:!0});var O=D(f);p=k(O,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(p)!=="svelte-18aqzoy"&&(p.textContent=h),g=P(O),_=k(O,"BUTTON",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-12rgdhl"&&(_.textContent=v),O.forEach(m),S=P(T),T.forEach(m),this.h()},h(){d(r,"class","group-icon svelte-yyh4lc"),d(n,"class","channel-btn svelte-yyh4lc"),d(p,"class","pin-btn svelte-yyh4lc"),d(p,"title","View pinned messages"),d(_,"class","delete-btn svelte-yyh4lc"),d(f,"class","channel-actions svelte-yyh4lc"),d(t,"class","channel-item svelte-yyh4lc"),ve(t,"active",e[14]===e[44].id),this.first=t},m(C,T){j(C,t,T),c(t,n),c(n,r),c(n,a),c(n,o),c(t,u),c(t,f),c(f,p),c(f,g),c(f,_),c(t,S),I||(w=[X(n,"click",E),X(p,"click",_t(b)),X(_,"click",_t(A))],I=!0)},p(C,T){e=C,T[0]&2048&&l!==(l=e[44].name+"")&&ne(o,l),T[0]&18432&&ve(t,"active",e[14]===e[44].id)},d(C){C&&m(t),I=!1,Ae(w)}}}function kl(s){let e,t,n,r,i,a,l,o,u=s[15].username+"",f,p,h,g,_=s[15].id.slice(0,4)+"",v,S,I,w,E=s[4]?"ðŸ”‡":"ðŸŽ¤",b,A,C,T,R=s[5]?"ðŸ”‡":"ðŸŽ§",O,L,F,B,q="âš™ï¸",V,N;function x(W,H){return W[15].profilePicture?vd:md}let G=x(s),U=G(s);return{c(){e=y("div"),t=y("button"),n=y("div"),U.c(),r=z(),i=y("div"),a=z(),l=y("div"),o=y("div"),f=Q(u),p=z(),h=y("div"),g=Q("#"),v=Q(_),S=z(),I=y("div"),w=y("button"),b=Q(E),C=z(),T=y("button"),O=Q(R),F=z(),B=y("button"),B.textContent=q,this.h()},l(W){e=k(W,"DIV",{class:!0});var H=D(e);t=k(H,"BUTTON",{class:!0});var Y=D(t);n=k(Y,"DIV",{class:!0});var Z=D(n);U.l(Z),r=P(Z),i=k(Z,"DIV",{class:!0}),D(i).forEach(m),Z.forEach(m),a=P(Y),l=k(Y,"DIV",{class:!0});var se=D(l);o=k(se,"DIV",{class:!0});var de=D(o);f=K(de,u),de.forEach(m),p=P(se),h=k(se,"DIV",{class:!0});var te=D(h);g=K(te,"#"),v=K(te,_),te.forEach(m),se.forEach(m),Y.forEach(m),S=P(H),I=k(H,"DIV",{class:!0});var ce=D(I);w=k(ce,"BUTTON",{class:!0,title:!0});var ue=D(w);b=K(ue,E),ue.forEach(m),C=P(ce),T=k(ce,"BUTTON",{class:!0,title:!0});var le=D(T);O=K(le,R),le.forEach(m),F=P(ce),B=k(ce,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(B)!=="svelte-18txcln"&&(B.textContent=q),ce.forEach(m),H.forEach(m),this.h()},h(){d(i,"class","status-indicator svelte-yyh4lc"),ve(i,"online",s[15].status==="active"),ve(i,"away",s[15].status==="away"),ve(i,"busy",s[15].status==="busy"),d(n,"class","avatar-container svelte-yyh4lc"),d(o,"class","username svelte-yyh4lc"),d(h,"class","user-tag svelte-yyh4lc"),d(l,"class","user-details svelte-yyh4lc"),d(t,"class","profile-info svelte-yyh4lc"),d(w,"class","control-btn svelte-yyh4lc"),d(w,"title",A=s[4]?"Unmute":"Mute"),ve(w,"active",s[4]),d(T,"class","control-btn svelte-yyh4lc"),d(T,"title",L=s[5]?"Undeafen":"Deafen"),ve(T,"active",s[5]),d(B,"class","control-btn svelte-yyh4lc"),d(B,"title","User Settings"),d(I,"class","profile-controls svelte-yyh4lc"),d(e,"class","profile-card svelte-yyh4lc")},m(W,H){j(W,e,H),c(e,t),c(t,n),U.m(n,null),c(n,r),c(n,i),c(t,a),c(t,l),c(l,o),c(o,f),c(l,p),c(l,h),c(h,g),c(h,v),c(e,S),c(e,I),c(I,w),c(w,b),c(I,C),c(I,T),c(T,O),c(I,F),c(I,B),V||(N=[X(t,"click",s[21]),X(w,"click",s[36]),X(T,"click",s[37]),X(B,"click",s[38])],V=!0)},p(W,H){G===(G=x(W))&&U?U.p(W,H):(U.d(1),U=G(W),U&&(U.c(),U.m(n,r))),H[0]&32768&&ve(i,"online",W[15].status==="active"),H[0]&32768&&ve(i,"away",W[15].status==="away"),H[0]&32768&&ve(i,"busy",W[15].status==="busy"),H[0]&32768&&u!==(u=W[15].username+"")&&ne(f,u),H[0]&32768&&_!==(_=W[15].id.slice(0,4)+"")&&ne(v,_),H[0]&16&&E!==(E=W[4]?"ðŸ”‡":"ðŸŽ¤")&&ne(b,E),H[0]&16&&A!==(A=W[4]?"Unmute":"Mute")&&d(w,"title",A),H[0]&16&&ve(w,"active",W[4]),H[0]&32&&R!==(R=W[5]?"ðŸ”‡":"ðŸŽ§")&&ne(O,R),H[0]&32&&L!==(L=W[5]?"Undeafen":"Deafen")&&d(T,"title",L),H[0]&32&&ve(T,"active",W[5])},d(W){W&&m(e),U.d(),V=!1,Ae(N)}}}function md(s){let e,t=s[15].username.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","avatar-placeholder svelte-yyh4lc"),Ee(e,"background-color",s[15].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i[0]&32768&&t!==(t=r[15].username.charAt(0).toUpperCase()+"")&&ne(n,t),i[0]&32768&&Ee(e,"background-color",r[15].color)},d(r){r&&m(e)}}}function vd(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[15].profilePicture)||d(e,"src",t),d(e,"alt",n=s[15].username),d(e,"class","avatar svelte-yyh4lc")},m(r,i){j(r,e,i)},p(r,i){i[0]&32768&&!Be(e.src,t=r[15].profilePicture)&&d(e,"src",t),i[0]&32768&&n!==(n=r[15].username)&&d(e,"alt",n)},d(r){r&&m(e)}}}function _d(s){let e,t,n='<div class="logo svelte-yyh4lc"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-yyh4lc"/></div>',r,i,a,l="Text Channels",o,u,f,p="ðŸ“º",h,g,_="+",v,S,I,w=[],E=new Map,b,A,C,T,R,O,L,F,B,q,V,N,x,G,U,W,H,Y,Z=s[2]&&hl(s),se=Ve(s[13]);const de=J=>J[44].id;for(let J=0;J<se.length;J+=1){let oe=dl(s,se,J),ye=de(oe);E.set(ye,w[J]=gl(ye,oe))}let te=s[12].length>0&&ml(s),ce=s[11].length>0&&_l(s),ue=s[15]&&kl(s);function le(J){s[39](J)}let he={};s[3]!==void 0&&(he.isOpen=s[3]),R=new ud({props:he}),et.push(()=>Lt(R,"isOpen",le)),F=new Cs({props:{isOpen:s[6],title:"Delete Channel",message:"Delete channel #"+s[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:s[19],onCancel:s[40]}});function Pe(J){s[41](J)}let re={channelId:s[9]};s[8]!==void 0&&(re.isOpen=s[8]),q=new gd({props:re}),et.push(()=>Lt(q,"isOpen",Pe));function je(J){s[42](J)}function Te(J){s[43](J)}let ie={isOwnProfile:!0};return s[10]!==void 0&&(ie.isOpen=s[10]),s[15]!==void 0&&(ie.user=s[15]),x=new Ar({props:ie}),et.push(()=>Lt(x,"isOpen",je)),et.push(()=>Lt(x,"user",Te)),{c(){e=y("div"),t=y("div"),t.innerHTML=n,r=z(),i=y("div"),a=y("h3"),a.textContent=l,o=z(),u=y("div"),f=y("button"),f.textContent=p,h=z(),g=y("button"),g.textContent=_,v=z(),Z&&Z.c(),S=z(),I=y("div");for(let J=0;J<w.length;J+=1)w[J].c();b=z(),te&&te.c(),A=z(),ce&&ce.c(),C=z(),ue&&ue.c(),T=z(),Ye(R.$$.fragment),L=z(),Ye(F.$$.fragment),B=z(),Ye(q.$$.fragment),N=z(),Ye(x.$$.fragment),this.h()},l(J){e=k(J,"DIV",{class:!0});var oe=D(e);t=k(oe,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-18mdtge"&&(t.innerHTML=n),r=P(oe),i=k(oe,"DIV",{class:!0});var ye=D(i);a=k(ye,"H3",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-cahn79"&&(a.textContent=l),o=P(ye),u=k(ye,"DIV",{class:!0});var be=D(u);f=k(be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(f)!=="svelte-5el016"&&(f.textContent=p),h=P(be),g=k(be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(g)!=="svelte-ou792o"&&(g.textContent=_),be.forEach(m),ye.forEach(m),v=P(oe),Z&&Z.l(oe),S=P(oe),I=k(oe,"DIV",{class:!0});var we=D(I);for(let Me=0;Me<w.length;Me+=1)w[Me].l(we);b=P(we),te&&te.l(we),A=P(we),ce&&ce.l(we),we.forEach(m),C=P(oe),ue&&ue.l(oe),oe.forEach(m),T=P(J),We(R.$$.fragment,J),L=P(J),We(F.$$.fragment,J),B=P(J),We(q.$$.fragment,J),N=P(J),We(x.$$.fragment,J),this.h()},h(){d(t,"class","top-section svelte-yyh4lc"),d(a,"class","svelte-yyh4lc"),d(f,"class","screen-share-icon-btn svelte-yyh4lc"),d(f,"title","Screen Share"),ve(f,"active",s[0]==="screen"),d(g,"class","add-btn svelte-yyh4lc"),d(g,"title","Create channel"),d(u,"class","header-buttons svelte-yyh4lc"),d(i,"class","sidebar-header svelte-yyh4lc"),d(I,"class","channel-list svelte-yyh4lc"),d(e,"class","channel-sidebar svelte-yyh4lc")},m(J,oe){j(J,e,oe),c(e,t),c(e,r),c(e,i),c(i,a),c(i,o),c(i,u),c(u,f),c(u,h),c(u,g),c(e,v),Z&&Z.m(e,null),c(e,S),c(e,I);for(let ye=0;ye<w.length;ye+=1)w[ye]&&w[ye].m(I,null);c(I,b),te&&te.m(I,null),c(I,A),ce&&ce.m(I,null),c(e,C),ue&&ue.m(e,null),j(J,T,oe),Ge(R,J,oe),j(J,L,oe),Ge(F,J,oe),j(J,B,oe),Ge(q,J,oe),j(J,N,oe),Ge(x,J,oe),W=!0,H||(Y=[X(f,"click",s[23]),X(g,"click",s[24])],H=!0)},p(J,oe){(!W||oe[0]&1)&&ve(f,"active",J[0]==="screen"),J[2]?Z?Z.p(J,oe):(Z=hl(J),Z.c(),Z.m(e,S)):Z&&(Z.d(1),Z=null),oe[0]&1400832&&(se=Ve(J[13]),w=Qt(w,oe,de,1,J,se,E,I,Kt,gl,b,dl)),J[12].length>0?te?te.p(J,oe):(te=ml(J),te.c(),te.m(I,A)):te&&(te.d(1),te=null),J[11].length>0?ce?ce.p(J,oe):(ce=_l(J),ce.c(),ce.m(I,null)):ce&&(ce.d(1),ce=null),J[15]?ue?ue.p(J,oe):(ue=kl(J),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null);const ye={};!O&&oe[0]&8&&(O=!0,ye.isOpen=J[3],Ft(()=>O=!1)),R.$set(ye);const be={};oe[0]&64&&(be.isOpen=J[6]),oe[0]&128&&(be.message="Delete channel #"+J[7]+"? This action cannot be undone."),oe[0]&64&&(be.onCancel=J[40]),F.$set(be);const we={};oe[0]&512&&(we.channelId=J[9]),!V&&oe[0]&256&&(V=!0,we.isOpen=J[8],Ft(()=>V=!1)),q.$set(we);const Me={};!G&&oe[0]&1024&&(G=!0,Me.isOpen=J[10],Ft(()=>G=!1)),!U&&oe[0]&32768&&(U=!0,Me.user=J[15],Ft(()=>U=!1)),x.$set(Me)},i(J){W||(ke(R.$$.fragment,J),ke(F.$$.fragment,J),ke(q.$$.fragment,J),ke(x.$$.fragment,J),W=!0)},o(J){Ce(R.$$.fragment,J),Ce(F.$$.fragment,J),Ce(q.$$.fragment,J),Ce(x.$$.fragment,J),W=!1},d(J){J&&(m(e),m(T),m(L),m(B),m(N)),Z&&Z.d();for(let oe=0;oe<w.length;oe+=1)w[oe].d();te&&te.d(),ce&&ce.d(),ue&&ue.d(),He(R,J),He(F,J),He(q,J),He(x,J),H=!1,Ae(Y)}}}function bd(s,e,t){let n,r,i,a,l,o;Re(s,us,re=>t(22,a=re)),Re(s,Os,re=>t(14,l=re)),Re(s,ns,re=>t(15,o=re));let{activeView:u="chat"}=e,f="",p=!1,h=!1,g=!1,_=!1,v=!1,S="",I=!1,w="",E=!1;function b(re){ou(re)}function A(){f.trim()&&(cu(f.trim()),t(1,f=""),t(2,p=!1))}function C(re){t(7,S=re),t(6,v=!0)}function T(){uu(S),t(6,v=!1)}function R(re){t(9,w=re),t(8,I=!0)}function O(){t(10,E=!0)}const L=()=>t(0,u="screen"),F=()=>t(2,p=!p);function B(){f=this.value,t(1,f)}const q=re=>re.key==="Enter"&&A(),V=re=>b(re.id),N=re=>R(re.id),x=re=>C(re.id),G=re=>b(re.id),U=re=>R(re.id),W=re=>C(re.id),H=re=>b(re.id),Y=re=>R(re.id),Z=re=>C(re.id),se=()=>t(4,g=!g),de=()=>t(5,_=!_),te=()=>t(3,h=!0);function ce(re){h=re,t(3,h)}const ue=()=>t(6,v=!1);function le(re){I=re,t(8,I)}function he(re){E=re,t(10,E)}function Pe(re){o=re,ns.set(o)}return s.$$set=re=>{"activeView"in re&&t(0,u=re.activeView)},s.$$.update=()=>{s.$$.dirty[0]&4194304&&t(13,n=a.filter(re=>!re.type||re.type==="public")),s.$$.dirty[0]&4194304&&t(12,r=a.filter(re=>re.type==="dm")),s.$$.dirty[0]&4194304&&t(11,i=a.filter(re=>re.type==="group")),s.$$.dirty[0]&1&&u==="chat"&&hu()},[u,f,p,h,g,_,v,S,I,w,E,i,r,n,l,o,b,A,C,T,R,O,a,L,F,B,q,V,N,x,G,U,W,H,Y,Z,se,de,te,ce,ue,le,he,Pe]}class kd extends ct{constructor(e){super(),ut(this,e,bd,_d,ot,{activeView:0},null,[-1,-1])}}const Ir=bt([]),In=bt(null),zn=bt(!1),rn=bt(!1),ln=bt(!1),Ls=new Map;let pt=null;const xa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function yl(s,e,t=!1){try{return pt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),zn.set(!0),rn.set(!1),ln.set(!t),s.emit("call-initiate",{targetUserId:e,isVideoCall:t}),pt}catch(n){throw console.error("Error starting call:",n),n}}async function yd(s,e,t=!1){try{return pt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),zn.set(!0),rn.set(!1),ln.set(!t),s.emit("call-answer",{callerId:e,isVideoCall:t}),In.set(null),pt}catch(n){throw console.error("Error answering call:",n),n}}function wd(s,e){s.emit("call-reject",{callerId:e}),In.set(null)}function Zn(s){pt&&(pt.getTracks().forEach(e=>e.stop()),pt=null),zn.set(!1),rn.set(!1),ln.set(!1),s.emit("call-end"),Ls.forEach(e=>e.close()),Ls.clear(),Ir.set([])}function Ed(){if(pt){const s=pt.getAudioTracks()[0];s&&(s.enabled=!s.enabled,rn.set(!s.enabled))}}function Td(){if(pt){const s=pt.getVideoTracks()[0];s&&(s.enabled=!s.enabled,ln.set(!s.enabled))}}async function Sd(s,e){const t=new RTCPeerConnection(xa);Ls.set(e,t),pt&&pt.getTracks().forEach(r=>{t.addTrack(r,pt)}),t.onicecandidate=r=>{r.candidate&&s.emit("call-ice-candidate",{candidate:r.candidate,targetId:e})},t.ontrack=r=>{Ma(e,r.streams[0])};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("call-offer",{offer:n,targetId:e})}async function Ad(s,e,t,n){const r=new RTCPeerConnection(xa);Ls.set(e,r),pt&&pt.getTracks().forEach(a=>{r.addTrack(a,pt)}),r.ontrack=a=>{Ma(e,a.streams[0])},r.onicecandidate=a=>{a.candidate&&s.emit("call-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("call-answer-sdp",{answer:i,targetId:e})}async function Cd(s,e){const t=Ls.get(s);t&&await t.setRemoteDescription(e)}async function Id(s,e){const t=Ls.get(s);t&&await t.addIceCandidate(e)}function Ma(s,e){Ir.update(t=>{const n=t.findIndex(i=>i.userId===s),r={userId:s,username:"",stream:e,isVideoEnabled:e.getVideoTracks().length>0,isAudioEnabled:e.getAudioTracks().length>0};return n>=0?(t[n]=r,t):[...t,r]})}function Dd(){return pt}const{window:Od}=cr;function Nd(s){let e,t=s[0].username.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","avatar-placeholder svelte-1jgoxw0"),Ee(e,"background-color",s[0].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&1&&Ee(e,"background-color",r[0].color)},d(r){r&&m(e)}}}function Rd(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[0].profilePicture)||d(e,"src",t),d(e,"alt",n=s[0].username),d(e,"class","avatar svelte-1jgoxw0")},m(r,i){j(r,e,i)},p(r,i){i&1&&!Be(e.src,t=r[0].profilePicture)&&d(e,"src",t),i&1&&n!==(n=r[0].username)&&d(e,"alt",n)},d(r){r&&m(e)}}}function wl(s){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',n,r,i='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',a,l,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,f,p,h;return{c(){e=y("button"),e.innerHTML=t,n=z(),r=y("button"),r.innerHTML=i,a=z(),l=y("button"),l.innerHTML=o,u=z(),f=y("div"),this.h()},l(g){e=k(g,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),n=P(g),r=k(g,"BUTTON",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-1om8irr"&&(r.innerHTML=i),a=P(g),l=k(g,"BUTTON",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-124vjww"&&(l.innerHTML=o),u=P(g),f=k(g,"DIV",{class:!0}),D(f).forEach(m),this.h()},h(){d(e,"class","menu-item svelte-1jgoxw0"),d(r,"class","menu-item svelte-1jgoxw0"),d(l,"class","menu-item svelte-1jgoxw0"),d(f,"class","menu-divider svelte-1jgoxw0")},m(g,_){j(g,e,_),j(g,n,_),j(g,r,_),j(g,a,_),j(g,l,_),j(g,u,_),j(g,f,_),p||(h=[X(e,"click",s[8]),X(r,"click",s[6]),X(l,"click",s[7])],p=!0)},p:Ie,d(g){g&&(m(e),m(n),m(r),m(a),m(l),m(u),m(f)),p=!1,Ae(h)}}}function Pd(s){let e,t,n,r,i,a=s[0].username+"",l,o,u,f,p,h,g='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',_,v;function S(b,A){return b[0].profilePicture?Rd:Nd}let I=S(s),w=I(s),E=!s[1]&&wl(s);return{c(){e=y("div"),t=y("div"),n=y("div"),w.c(),r=z(),i=y("span"),l=Q(a),o=z(),u=y("div"),f=z(),E&&E.c(),p=z(),h=y("button"),h.innerHTML=g,this.h()},l(b){e=k(b,"DIV",{class:!0,style:!0});var A=D(e);t=k(A,"DIV",{class:!0});var C=D(t);n=k(C,"DIV",{class:!0});var T=D(n);w.l(T),r=P(T),i=k(T,"SPAN",{class:!0});var R=D(i);l=K(R,a),R.forEach(m),T.forEach(m),C.forEach(m),o=P(A),u=k(A,"DIV",{class:!0}),D(u).forEach(m),f=P(A),E&&E.l(A),p=P(A),h=k(A,"BUTTON",{class:!0,"data-svelte-h":!0}),$(h)!=="svelte-1rwejc6"&&(h.innerHTML=g),A.forEach(m),this.h()},h(){d(i,"class","username svelte-1jgoxw0"),d(n,"class","user-info svelte-1jgoxw0"),d(t,"class","menu-header svelte-1jgoxw0"),d(u,"class","menu-divider svelte-1jgoxw0"),d(h,"class","menu-item svelte-1jgoxw0"),d(e,"class","context-menu svelte-1jgoxw0"),Ee(e,"left",s[4]+"px"),Ee(e,"top",s[3]+"px")},m(b,A){j(b,e,A),c(e,t),c(t,n),w.m(n,null),c(n,r),c(n,i),c(i,l),c(e,o),c(e,u),c(e,f),E&&E.m(e,null),c(e,p),c(e,h),s[13](e),_||(v=[X(Od,"click",s[5]),X(h,"click",s[9]),X(e,"click",_t(s[12]))],_=!0)},p(b,[A]){I===(I=S(b))&&w?w.p(b,A):(w.d(1),w=I(b),w&&(w.c(),w.m(n,r))),A&1&&a!==(a=b[0].username+"")&&ne(l,a),b[1]?E&&(E.d(1),E=null):E?E.p(b,A):(E=wl(b),E.c(),E.m(e,p)),A&16&&Ee(e,"left",b[4]+"px"),A&8&&Ee(e,"top",b[3]+"px")},i:Ie,o:Ie,d(b){b&&m(e),w.d(),E&&E.d(),s[13](null),_=!1,Ae(v)}}}function zd(s,e,t){let n,r,{user:i}=e,{x:a}=e,{y:l}=e,{isOwnProfile:o}=e;const u=or();let f;function p(w){u("close")}function h(){u("voiceCall"),u("close")}function g(){u("videoCall"),u("close")}function _(){u("openDM"),u("close")}function v(){u("viewProfile"),u("close")}function S(w){ds.call(this,s,w)}function I(w){et[w?"unshift":"push"](()=>{f=w,t(2,f)})}return s.$$set=w=>{"user"in w&&t(0,i=w.user),"x"in w&&t(10,a=w.x),"y"in w&&t(11,l=w.y),"isOwnProfile"in w&&t(1,o=w.isOwnProfile)},s.$$.update=()=>{s.$$.dirty&1028&&t(4,n=(()=>{if(!f)return a;const w=f.offsetWidth||200,E=window.innerWidth;return a+w>E?a-w:a})()),s.$$.dirty&2052&&t(3,r=(()=>{if(!f)return l;const w=f.offsetHeight||300,E=window.innerHeight;return l+w>E?l-w:l})())},[i,o,f,r,n,p,h,g,_,v,a,l,S,I]}class Fd extends ct{constructor(e){super(),ut(this,e,zd,Pd,ot,{user:0,x:10,y:11,isOwnProfile:1})}}function El(s,e,t){const n=s.slice();return n[9]=e[t],n}function Tl(s){let e,t,n,r,i,a="Start a Direct Message",l,o,u="Ã—",f,p,h,g,_,v,S;function I(b,A){return b[2].length===0?xd:Ld}let w=I(s),E=w(s);return{c(){e=y("div"),t=z(),n=y("div"),r=y("div"),i=y("h2"),i.textContent=a,l=z(),o=y("button"),o.textContent=u,f=z(),p=y("div"),h=y("input"),g=z(),_=y("div"),E.c(),this.h()},l(b){e=k(b,"DIV",{class:!0}),D(e).forEach(m),t=P(b),n=k(b,"DIV",{class:!0});var A=D(n);r=k(A,"DIV",{class:!0});var C=D(r);i=k(C,"H2",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-14qt3ql"&&(i.textContent=a),l=P(C),o=k(C,"BUTTON",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-mm165g"&&(o.textContent=u),C.forEach(m),f=P(A),p=k(A,"DIV",{class:!0});var T=D(p);h=k(T,"INPUT",{type:!0,placeholder:!0,class:!0}),T.forEach(m),g=P(A),_=k(A,"DIV",{class:!0});var R=D(_);E.l(R),R.forEach(m),A.forEach(m),this.h()},h(){d(e,"class","modal-overlay svelte-1wgtlqt"),d(i,"class","svelte-1wgtlqt"),d(o,"class","close-btn svelte-1wgtlqt"),d(r,"class","modal-header svelte-1wgtlqt"),d(h,"type","text"),d(h,"placeholder","Search users..."),h.autofocus=!0,d(h,"class","svelte-1wgtlqt"),d(p,"class","search-container svelte-1wgtlqt"),d(_,"class","user-list svelte-1wgtlqt"),d(n,"class","modal svelte-1wgtlqt")},m(b,A){j(b,e,A),j(b,t,A),j(b,n,A),c(n,r),c(r,i),c(r,l),c(r,o),c(n,f),c(n,p),c(p,h),lt(h,s[1]),c(n,g),c(n,_),E.m(_,null),h.focus(),v||(S=[X(e,"click",s[4]),X(o,"click",s[4]),X(h,"input",s[7])],v=!0)},p(b,A){A&2&&h.value!==b[1]&&lt(h,b[1]),w===(w=I(b))&&E?E.p(b,A):(E.d(1),E=w(b),E&&(E.c(),E.m(_,null)))},d(b){b&&(m(e),m(t),m(n)),E.d(),v=!1,Ae(S)}}}function Ld(s){let e=[],t=new Map,n,r=Ve(s[2]);const i=a=>a[9].id;for(let a=0;a<r.length;a+=1){let l=El(s,r,a),o=i(l);t.set(o,e[a]=Sl(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=De()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=De()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,n,l)},p(a,l){l&12&&(r=Ve(a[2]),e=Qt(e,l,i,1,a,r,t,n.parentNode,Kt,Sl,n,El))},d(a){a&&m(n);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function xd(s){let e,t="No users found";return{c(){e=y("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){d(e,"class","no-users svelte-1wgtlqt")},m(n,r){j(n,e,r)},p:Ie,d(n){n&&m(e)}}}function Md(s){let e,t=s[9].username.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","user-avatar-placeholder svelte-1wgtlqt"),Ee(e,"background-color",s[9].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&4&&t!==(t=r[9].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&4&&Ee(e,"background-color",r[9].color)},d(r){r&&m(e)}}}function Ud(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[9].profilePicture)||d(e,"src",t),d(e,"alt",n=s[9].username),d(e,"class","user-avatar svelte-1wgtlqt")},m(r,i){j(r,e,i)},p(r,i){i&4&&!Be(e.src,t=r[9].profilePicture)&&d(e,"src",t),i&4&&n!==(n=r[9].username)&&d(e,"alt",n)},d(r){r&&m(e)}}}function Sl(s,e){let t,n,r,i,a,l,o,u=e[9].username+"",f,p,h,g=e[9].status+"",_,v,S,I;function w(C,T){return C[9].profilePicture?Ud:Md}let E=w(e),b=E(e);function A(){return e[8](e[9])}return{key:s,first:null,c(){t=y("button"),n=y("div"),b.c(),r=z(),i=y("div"),a=z(),l=y("div"),o=y("div"),f=Q(u),p=z(),h=y("div"),_=Q(g),v=z(),this.h()},l(C){t=k(C,"BUTTON",{class:!0});var T=D(t);n=k(T,"DIV",{class:!0});var R=D(n);b.l(R),r=P(R),i=k(R,"DIV",{class:!0,style:!0}),D(i).forEach(m),R.forEach(m),a=P(T),l=k(T,"DIV",{class:!0});var O=D(l);o=k(O,"DIV",{class:!0});var L=D(o);f=K(L,u),L.forEach(m),p=P(O),h=k(O,"DIV",{class:!0});var F=D(h);_=K(F,g),F.forEach(m),O.forEach(m),v=P(T),T.forEach(m),this.h()},h(){d(i,"class","status-indicator svelte-1wgtlqt"),Ee(i,"background-color",Al(e[9].status)),d(n,"class","user-avatar-container svelte-1wgtlqt"),d(o,"class","username svelte-1wgtlqt"),d(h,"class","status-text svelte-1wgtlqt"),d(l,"class","user-info svelte-1wgtlqt"),d(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(C,T){j(C,t,T),c(t,n),b.m(n,null),c(n,r),c(n,i),c(t,a),c(t,l),c(l,o),c(o,f),c(l,p),c(l,h),c(h,_),c(t,v),S||(I=X(t,"click",A),S=!0)},p(C,T){e=C,E===(E=w(e))&&b?b.p(e,T):(b.d(1),b=E(e),b&&(b.c(),b.m(n,r))),T&4&&Ee(i,"background-color",Al(e[9].status)),T&4&&u!==(u=e[9].username+"")&&ne(f,u),T&4&&g!==(g=e[9].status+"")&&ne(_,g)},d(C){C&&m(t),b.d(),S=!1,I()}}}function Bd(s){let e,t=s[0]&&Tl(s);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=Tl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&m(e),t&&t.d(n)}}}function Al(s){switch(s){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function jd(s,e,t){let n,r,i;Re(s,ns,h=>t(5,r=h)),Re(s,Zt,h=>t(6,i=h));let{isOpen:a=!1}=e,l="";function o(h){Na(h.id),u()}function u(){t(0,a=!1),t(1,l="")}function f(){l=this.value,t(1,l)}const p=h=>o(h);return s.$$set=h=>{"isOpen"in h&&t(0,a=h.isOpen)},s.$$.update=()=>{s.$$.dirty&98&&t(2,n=i.filter(h=>h.id===(r==null?void 0:r.id)?!1:l?h.username.toLowerCase().includes(l.toLowerCase()):!0))},[a,l,n,o,u,r,i,f,p]}class Vd extends ct{constructor(e){super(),ut(this,e,jd,Bd,ot,{isOpen:0})}}function Cl(s,e,t){const n=s.slice();return n[28]=e[t],n}function qd(s){let e,t=s[28].username.charAt(0).toUpperCase()+"",n;return{c(){e=y("div"),n=Q(t),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var i=D(e);n=K(i,t),i.forEach(m),this.h()},h(){d(e,"class","user-avatar-placeholder svelte-1dxxmv3"),Ee(e,"background-color",s[28].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&512&&t!==(t=r[28].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&512&&Ee(e,"background-color",r[28].color)},d(r){r&&m(e)}}}function Hd(s){let e,t,n;return{c(){e=y("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[28].profilePicture)||d(e,"src",t),d(e,"alt",n=s[28].username),d(e,"class","user-avatar svelte-1dxxmv3")},m(r,i){j(r,e,i)},p(r,i){i&512&&!Be(e.src,t=r[28].profilePicture)&&d(e,"src",t),i&512&&n!==(n=r[28].username)&&d(e,"alt",n)},d(r){r&&m(e)}}}function Il(s){let e,t="(you)";return{c(){e=y("span"),e.textContent=t,this.h()},l(n){e=k(n,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){d(e,"class","you-badge svelte-1dxxmv3")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function Dl(s){let e,t,n="ðŸ“ž",r,i,a="ðŸ“¹",l,o;function u(...p){return s[19](s[28],...p)}function f(...p){return s[20](s[28],...p)}return{c(){e=y("div"),t=y("button"),t.textContent=n,r=z(),i=y("button"),i.textContent=a,this.h()},l(p){e=k(p,"DIV",{class:!0});var h=D(e);t=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(t)!=="svelte-jmuv4z"&&(t.textContent=n),r=P(h),i=k(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(i)!=="svelte-1whn4df"&&(i.textContent=a),h.forEach(m),this.h()},h(){d(t,"class","call-btn voice-call svelte-1dxxmv3"),d(t,"title","Voice call"),d(i,"class","call-btn video-call svelte-1dxxmv3"),d(i,"title","Video call"),d(e,"class","call-buttons svelte-1dxxmv3")},m(p,h){j(p,e,h),c(e,t),c(e,r),c(e,i),l||(o=[X(t,"click",u),X(i,"click",f)],l=!0)},p(p,h){s=p},d(p){p&&m(e),l=!1,Ae(o)}}}function Ol(s,e){var B,q;let t,n,r,i,a,l=e[28].username+"",o,u,f,p,h,g,_,v=e[28].status+"",S,I,w,E,b;function A(V,N){return V[28].profilePicture?Hd:qd}let C=A(e),T=C(e),R=e[28].id===((B=e[8])==null?void 0:B.id)&&Il();function O(){return e[17](e[28])}function L(...V){return e[18](e[28],...V)}let F=e[28].id!==((q=e[8])==null?void 0:q.id)&&Dl(e);return{key:s,first:null,c(){t=y("div"),n=y("button"),T.c(),r=z(),i=y("div"),a=y("span"),o=Q(l),u=z(),R&&R.c(),f=z(),p=y("div"),h=y("span"),g=z(),_=y("span"),S=Q(v),I=z(),F&&F.c(),w=z(),this.h()},l(V){t=k(V,"DIV",{class:!0});var N=D(t);n=k(N,"BUTTON",{class:!0});var x=D(n);T.l(x),r=P(x),i=k(x,"DIV",{class:!0});var G=D(i);a=k(G,"SPAN",{class:!0});var U=D(a);o=K(U,l),u=P(U),R&&R.l(U),U.forEach(m),f=P(G),p=k(G,"DIV",{class:!0});var W=D(p);h=k(W,"SPAN",{class:!0,style:!0}),D(h).forEach(m),g=P(W),_=k(W,"SPAN",{class:!0});var H=D(_);S=K(H,v),H.forEach(m),W.forEach(m),G.forEach(m),x.forEach(m),I=P(N),F&&F.l(N),w=P(N),N.forEach(m),this.h()},h(){d(a,"class","user-name svelte-1dxxmv3"),d(h,"class","status-dot svelte-1dxxmv3"),Ee(h,"background-color",Rl(e[28].status)),d(_,"class","status-text svelte-1dxxmv3"),d(p,"class","user-status svelte-1dxxmv3"),d(i,"class","user-info svelte-1dxxmv3"),d(n,"class","user svelte-1dxxmv3"),d(t,"class","user-container svelte-1dxxmv3"),this.first=t},m(V,N){j(V,t,N),c(t,n),T.m(n,null),c(n,r),c(n,i),c(i,a),c(a,o),c(a,u),R&&R.m(a,null),c(i,f),c(i,p),c(p,h),c(p,g),c(p,_),c(_,S),c(t,I),F&&F.m(t,null),c(t,w),E||(b=[X(n,"click",O),X(n,"contextmenu",L)],E=!0)},p(V,N){var x,G;e=V,C===(C=A(e))&&T?T.p(e,N):(T.d(1),T=C(e),T&&(T.c(),T.m(n,r))),N&512&&l!==(l=e[28].username+"")&&ne(o,l),e[28].id===((x=e[8])==null?void 0:x.id)?R||(R=Il(),R.c(),R.m(a,null)):R&&(R.d(1),R=null),N&512&&Ee(h,"background-color",Rl(e[28].status)),N&512&&v!==(v=e[28].status+"")&&ne(S,v),e[28].id!==((G=e[8])==null?void 0:G.id)?F?F.p(e,N):(F=Dl(e),F.c(),F.m(t,w)):F&&(F.d(1),F=null)},d(V){V&&m(t),T.d(),R&&R.d(),F&&F.d(),E=!1,Ae(b)}}}function Nl(s){var n;let e,t;return e=new Fd({props:{user:s[5],x:s[6],y:s[7],isOwnProfile:s[5].id===((n=s[8])==null?void 0:n.id)}}),e.$on("close",s[12]),e.$on("voiceCall",s[23]),e.$on("videoCall",s[24]),e.$on("openDM",s[13]),e.$on("viewProfile",s[25]),{c(){Ye(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,i){Ge(e,r,i),t=!0},p(r,i){var l;const a={};i&32&&(a.user=r[5]),i&64&&(a.x=r[6]),i&128&&(a.y=r[7]),i&288&&(a.isOwnProfile=r[5].id===((l=r[8])==null?void 0:l.id)),e.$set(a)},i(r){t||(ke(e.$$.fragment,r),t=!0)},o(r){Ce(e.$$.fragment,r),t=!1},d(r){He(e,r)}}}function Gd(s){let e,t,n,r,i=s[9].length+"",a,l,o,u,f="ðŸ’¬",p,h,g=[],_=new Map,v,S,I,w,E,b,A,C,T,R,O,L=Ve(s[9]);const F=U=>U[28].id;for(let U=0;U<L.length;U+=1){let W=Cl(s,L,U),H=F(W);_.set(H,g[U]=Ol(H,W))}function B(U){s[21](U)}function q(U){s[22](U)}let V={isOwnProfile:s[2]};s[0]!==void 0&&(V.isOpen=s[0]),s[1]!==void 0&&(V.user=s[1]),S=new Ar({props:V}),et.push(()=>Lt(S,"isOpen",B)),et.push(()=>Lt(S,"user",q));let N=s[4]&&s[5]&&Nl(s);function x(U){s[26](U)}let G={};return s[3]!==void 0&&(G.isOpen=s[3]),A=new Vd({props:G}),et.push(()=>Lt(A,"isOpen",x)),{c(){e=y("aside"),t=y("div"),n=y("h3"),r=Q("Online ("),a=Q(i),l=Q(")"),o=z(),u=y("button"),u.textContent=f,p=z(),h=y("div");for(let U=0;U<g.length;U+=1)g[U].c();v=z(),Ye(S.$$.fragment),E=z(),N&&N.c(),b=z(),Ye(A.$$.fragment),this.h()},l(U){e=k(U,"ASIDE",{class:!0});var W=D(e);t=k(W,"DIV",{class:!0});var H=D(t);n=k(H,"H3",{class:!0});var Y=D(n);r=K(Y,"Online ("),a=K(Y,i),l=K(Y,")"),Y.forEach(m),o=P(H),u=k(H,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(u)!=="svelte-1sotr3f"&&(u.textContent=f),H.forEach(m),p=P(W),h=k(W,"DIV",{class:!0});var Z=D(h);for(let se=0;se<g.length;se+=1)g[se].l(Z);Z.forEach(m),W.forEach(m),v=P(U),We(S.$$.fragment,U),E=P(U),N&&N.l(U),b=P(U),We(A.$$.fragment,U),this.h()},h(){d(n,"class","svelte-1dxxmv3"),d(u,"class","dm-btn svelte-1dxxmv3"),d(u,"title","Start a DM"),d(t,"class","panel-header svelte-1dxxmv3"),d(h,"class","user-list svelte-1dxxmv3"),d(e,"class","user-panel svelte-1dxxmv3")},m(U,W){j(U,e,W),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,o),c(t,u),c(e,p),c(e,h);for(let H=0;H<g.length;H+=1)g[H]&&g[H].m(h,null);j(U,v,W),Ge(S,U,W),j(U,E,W),N&&N.m(U,W),j(U,b,W),Ge(A,U,W),T=!0,R||(O=X(u,"click",s[14]),R=!0)},p(U,[W]){(!T||W&512)&&i!==(i=U[9].length+"")&&ne(a,i),W&102144&&(L=Ve(U[9]),g=Qt(g,W,F,1,U,L,_,h,Kt,Ol,null,Cl));const H={};W&4&&(H.isOwnProfile=U[2]),!I&&W&1&&(I=!0,H.isOpen=U[0],Ft(()=>I=!1)),!w&&W&2&&(w=!0,H.user=U[1],Ft(()=>w=!1)),S.$set(H),U[4]&&U[5]?N?(N.p(U,W),W&48&&ke(N,1)):(N=Nl(U),N.c(),ke(N,1),N.m(b.parentNode,b)):N&&(xs(),Ce(N,1,1,()=>{N=null}),Ms());const Y={};!C&&W&8&&(C=!0,Y.isOpen=U[3],Ft(()=>C=!1)),A.$set(Y)},i(U){T||(ke(S.$$.fragment,U),ke(N),ke(A.$$.fragment,U),T=!0)},o(U){Ce(S.$$.fragment,U),Ce(N),Ce(A.$$.fragment,U),T=!1},d(U){U&&(m(e),m(v),m(E),m(b));for(let W=0;W<g.length;W+=1)g[W].d();He(S,U),N&&N.d(U),He(A,U),R=!1,O()}}}function Rl(s){switch(s){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Wd(s,e,t){let n,r,i;Re(s,Bs,N=>t(27,n=N)),Re(s,ns,N=>t(8,r=N)),Re(s,Zt,N=>t(9,i=N));let a=!1,l=null,o=!1,u=!1,f=!1,p=null,h=0,g=0;function _(N){t(1,l=N),t(2,o=N.id===(r==null?void 0:r.id)),t(0,a=!0)}function v(N,x){N.preventDefault(),N.stopPropagation(),t(5,p=x),t(6,h=N.clientX),t(7,g=N.clientY),t(4,f=!0)}function S(){t(4,f=!1),t(5,p=null)}function I(){p&&Na(p.id)}function w(){t(3,u=!0)}async function E(N,x){N&&N.stopPropagation();const G=x||p;if(!(!n||!G||G.id===(r==null?void 0:r.id)))try{await yl(n,G.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function b(N,x){N&&N.stopPropagation();const G=x||p;if(!(!n||!G||G.id===(r==null?void 0:r.id)))try{await yl(n,G.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const A=N=>_(N),C=(N,x)=>v(x,N),T=(N,x)=>E(x,N),R=(N,x)=>b(x,N);function O(N){a=N,t(0,a)}function L(N){l=N,t(1,l)}const F=()=>E(),B=()=>b(),q=()=>{p&&_(p)};function V(N){u=N,t(3,u)}return[a,l,o,u,f,p,h,g,r,i,_,v,S,I,w,E,b,A,C,T,R,O,L,F,B,q,V]}class Yd extends ct{constructor(e){super(),ut(this,e,Wd,Gd,ot,{})}}const Dr=bt([]),Or=bt(!1),vs=new Map;let fs=null;const Ua={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function Xd(s){try{return fs=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),Or.set(!0),s.emit("start-screen-share"),fs.getVideoTracks()[0].onended=()=>{Ba(s)},fs}catch(e){throw console.error("Error starting screen share:",e),e}}function Ba(s){fs&&(fs.getTracks().forEach(e=>e.stop()),fs=null),Or.set(!1),s.emit("stop-screen-share"),vs.forEach(e=>e.close()),vs.clear()}async function Zd(s,e){const t=new RTCPeerConnection(Ua);vs.set(e,t),fs&&fs.getTracks().forEach(r=>{t.addTrack(r,fs)}),t.onicecandidate=r=>{r.candidate&&s.emit("webrtc-ice-candidate",{candidate:r.candidate,targetId:e})};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("webrtc-offer",{offer:n,targetId:e})}async function Kd(s,e,t,n){const r=new RTCPeerConnection(Ua);vs.set(e,r),r.ontrack=a=>{Dr.update(l=>{const o=l.findIndex(f=>f.userId===e),u={userId:e,username:t,stream:a.streams[0]};return o>=0?(l[o]=u,l):[...l,u]})},r.onicecandidate=a=>{a.candidate&&s.emit("webrtc-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("webrtc-answer",{answer:i,targetId:e})}async function Qd(s,e){const t=vs.get(s);t&&await t.setRemoteDescription(e)}async function Jd(s,e){const t=vs.get(s);t&&await t.addIceCandidate(e)}function $d(s){Dr.update(t=>t.filter(n=>n.userId!==s));const e=vs.get(s);e&&(e.close(),vs.delete(s))}function Pl(s,e,t){const n=s.slice();return n[12]=e[t],n}function eh(s){let e,t="Start Sharing",n,r;return{c(){e=y("button"),e.textContent=t},l(i){e=k(i,"BUTTON",{"data-svelte-h":!0}),$(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,a){j(i,e,a),n||(r=X(e,"click",s[6]),n=!0)},p:Ie,d(i){i&&m(e),n=!1,r()}}}function th(s){let e,t="Stop Sharing",n,r;return{c(){e=y("button"),e.textContent=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){d(e,"class","stop-btn svelte-1oqngqd")},m(i,a){j(i,e,a),n||(r=X(e,"click",s[7]),n=!0)},p:Ie,d(i){i&&m(e),n=!1,r()}}}function zl(s){let e,t;return{c(){e=y("div"),t=Q(s[2]),this.h()},l(n){e=k(n,"DIV",{class:!0});var r=D(e);t=K(r,s[2]),r.forEach(m),this.h()},h(){d(e,"class","error svelte-1oqngqd")},m(n,r){j(n,e,r),c(e,t)},p(n,r){r&4&&ne(t,n[2])},d(n){n&&m(e)}}}function Fl(s){let e,t,n='<span class="badge svelte-1oqngqd">Your Screen</span>',r,i;return{c(){e=y("div"),t=y("div"),t.innerHTML=n,r=z(),i=y("video"),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=D(e);t=k(l,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-16dlolc"&&(t.innerHTML=n),r=P(l),i=k(l,"VIDEO",{class:!0}),D(i).forEach(m),l.forEach(m),this.h()},h(){d(t,"class","screen-header svelte-1oqngqd"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,d(i,"class","svelte-1oqngqd"),d(e,"class","screen-item svelte-1oqngqd")},m(a,l){j(a,e,l),c(e,t),c(e,r),c(e,i),s[9](i)},p:Ie,d(a){a&&m(e),s[9](null)}}}function Ll(s,e){let t,n,r,i=e[12].username+"",a,l,o,u,f,p,h;return{key:s,first:null,c(){t=y("div"),n=y("div"),r=y("span"),a=Q(i),l=Q("'s Screen"),o=z(),u=y("video"),this.h()},l(g){t=k(g,"DIV",{class:!0});var _=D(t);n=k(_,"DIV",{class:!0});var v=D(n);r=k(v,"SPAN",{class:!0});var S=D(r);a=K(S,i),l=K(S,"'s Screen"),S.forEach(m),v.forEach(m),o=P(_),u=k(_,"VIDEO",{class:!0}),D(u).forEach(m),_.forEach(m),this.h()},h(){d(r,"class","username svelte-1oqngqd"),d(n,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,d(u,"class","svelte-1oqngqd"),d(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(g,_){j(g,t,_),c(t,n),c(n,r),c(r,a),c(r,l),c(t,o),c(t,u),p||(h=Xa(f=nh.call(null,u,e[12].stream)),p=!0)},p(g,_){e=g,_&16&&i!==(i=e[12].username+"")&&ne(a,i),f&&Is(f.update)&&_&16&&f.update.call(null,e[12].stream)},d(g){g&&m(t),p=!1,h()}}}function xl(s){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){d(e,"class","empty-state svelte-1oqngqd")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function sh(s){let e,t,n,r,i="â† Back",a,l,o="ðŸ–¥ï¸ Screen Sharing",u,f,p,h,g,_=[],v=new Map,S,I,w;function E(F,B){return F[3]?th:eh}let b=E(s),A=b(s),C=s[2]&&zl(s),T=s[3]&&s[0]&&Fl(s),R=Ve(s[4]);const O=F=>F[12].userId;for(let F=0;F<R.length;F+=1){let B=Pl(s,R,F),q=O(B);v.set(q,_[F]=Ll(q,B))}let L=!s[3]&&s[4].length===0&&xl();return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("button"),r.textContent=i,a=z(),l=y("h2"),l.textContent=o,u=z(),A.c(),f=z(),C&&C.c(),p=z(),h=y("div"),T&&T.c(),g=z();for(let F=0;F<_.length;F+=1)_[F].c();S=z(),L&&L.c(),this.h()},l(F){e=k(F,"DIV",{class:!0});var B=D(e);t=k(B,"DIV",{class:!0});var q=D(t);n=k(q,"DIV",{class:!0});var V=D(n);r=k(V,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(r)!=="svelte-ts724a"&&(r.textContent=i),a=P(V),l=k(V,"H2",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-1el2fdv"&&(l.textContent=o),V.forEach(m),u=P(q),A.l(q),q.forEach(m),f=P(B),C&&C.l(B),p=P(B),h=k(B,"DIV",{class:!0});var N=D(h);T&&T.l(N),g=P(N);for(let x=0;x<_.length;x+=1)_[x].l(N);S=P(N),L&&L.l(N),N.forEach(m),B.forEach(m),this.h()},h(){d(r,"class","back-btn svelte-1oqngqd"),d(r,"title","Back to chat"),d(l,"class","svelte-1oqngqd"),d(n,"class","header-left svelte-1oqngqd"),d(t,"class","header svelte-1oqngqd"),d(h,"class","screens svelte-1oqngqd"),d(e,"class","screen-share-container svelte-1oqngqd")},m(F,B){j(F,e,B),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),A.m(t,null),c(e,f),C&&C.m(e,null),c(e,p),c(e,h),T&&T.m(h,null),c(h,g);for(let q=0;q<_.length;q+=1)_[q]&&_[q].m(h,null);c(h,S),L&&L.m(h,null),I||(w=X(r,"click",s[5]),I=!0)},p(F,[B]){b===(b=E(F))&&A?A.p(F,B):(A.d(1),A=b(F),A&&(A.c(),A.m(t,null))),F[2]?C?C.p(F,B):(C=zl(F),C.c(),C.m(e,p)):C&&(C.d(1),C=null),F[3]&&F[0]?T?T.p(F,B):(T=Fl(F),T.c(),T.m(h,g)):T&&(T.d(1),T=null),B&16&&(R=Ve(F[4]),_=Qt(_,B,O,1,F,R,v,h,Kt,Ll,S,Pl)),!F[3]&&F[4].length===0?L||(L=xl(),L.c(),L.m(h,null)):L&&(L.d(1),L=null)},i:Ie,o:Ie,d(F){F&&m(e),A.d(),C&&C.d(),T&&T.d();for(let B=0;B<_.length;B+=1)_[B].d();L&&L.d(),I=!1,w()}}}function nh(s,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),s.srcObject=e,s.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),s.srcObject=t,s.play().catch(n=>console.error("Error playing updated remote video:",n))}}}function rh(s,e,t){let n,r,i,a;Re(s,Bs,v=>t(10,n=v)),Re(s,Or,v=>t(3,r=v)),Re(s,Zt,v=>t(11,i=v)),Re(s,Dr,v=>t(4,a=v));let{activeView:l="screen"}=e,o=null,u="",f;function p(){t(8,l="chat")}async function h(){try{if(!n)return;t(0,o=await Xd(n)),console.log("Screen share started, stream:",o),console.log("Stream tracks:",o==null?void 0:o.getTracks()),console.log("Video tracks:",o==null?void 0:o.getVideoTracks()),t(2,u="")}catch(v){t(2,u="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",v)}}function g(){n&&(Ba(n),t(0,o=null))}rs(()=>{n&&(n.on("screen-share-started",async v=>{n&&(console.log(`${v.username} started screen sharing`),ua(),t(8,l="screen"),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Screen Share Started",{body:`${v.username} is sharing their screen`,icon:"/icon-192.png"}))}),n.on("screen-share-stopped",v=>{$d(v)}),n.on("webrtc-offer",async v=>{if(!n)return;const S=i.find(I=>I.id===v.senderId);S&&await Kd(n,v.senderId,S.username,v.offer)}),n.on("webrtc-answer",async v=>{await Qd(v.senderId,v.answer)}),n.on("webrtc-ice-candidate",async v=>{await Jd(v.senderId,v.candidate)}),n.on("user-joined",async v=>{r&&n&&setTimeout(()=>{n&&Zd(n,v.id)},1e3)}))});function _(v){et[v?"unshift":"push"](()=>{f=v,t(1,f),t(0,o)})}return s.$$set=v=>{"activeView"in v&&t(8,l=v.activeView)},s.$$.update=()=>{s.$$.dirty&3&&f&&o&&(console.log("Setting local video srcObject",o),t(1,f.srcObject=o,f),f.play().catch(v=>console.error("Error playing local video:",v)))},[o,f,u,r,a,p,h,g,l,_]}class ih extends ct{constructor(e){super(),ut(this,e,rh,sh,ot,{activeView:8})}}function Ml(s,e,t){const n=s.slice();return n[17]=e[t],n[18]=e,n[19]=t,n}function Ul(s){let e,t,n,r,i=s[2].username.charAt(0).toUpperCase()+"",a,l,o,u=s[2].username+"",f,p,h,g=s[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",_,v,S,I,w,E=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,b,A,C=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,T,R;return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("div"),a=Q(i),l=z(),o=y("h2"),f=Q(u),p=z(),h=y("p"),_=Q(g),v=Q(" Call"),S=z(),I=y("div"),w=y("button"),w.innerHTML=E,b=z(),A=y("button"),A.innerHTML=C,this.h()},l(O){e=k(O,"DIV",{class:!0});var L=D(e);t=k(L,"DIV",{class:!0});var F=D(t);n=k(F,"DIV",{class:!0});var B=D(n);r=k(B,"DIV",{class:!0});var q=D(r);a=K(q,i),q.forEach(m),l=P(B),o=k(B,"H2",{class:!0});var V=D(o);f=K(V,u),V.forEach(m),p=P(B),h=k(B,"P",{class:!0});var N=D(h);_=K(N,g),v=K(N," Call"),N.forEach(m),B.forEach(m),S=P(F),I=k(F,"DIV",{class:!0});var x=D(I);w=k(x,"BUTTON",{class:!0,"data-svelte-h":!0}),$(w)!=="svelte-u3s2jz"&&(w.innerHTML=E),b=P(x),A=k(x,"BUTTON",{class:!0,"data-svelte-h":!0}),$(A)!=="svelte-om1ns7"&&(A.innerHTML=C),x.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){d(r,"class","caller-avatar svelte-1mc89jk"),d(o,"class","svelte-1mc89jk"),d(h,"class","call-type svelte-1mc89jk"),d(n,"class","caller-info svelte-1mc89jk"),d(w,"class","answer-btn svelte-1mc89jk"),d(A,"class","reject-btn svelte-1mc89jk"),d(I,"class","call-actions svelte-1mc89jk"),d(t,"class","incoming-call-modal svelte-1mc89jk"),d(e,"class","call-modal-overlay svelte-1mc89jk")},m(O,L){j(O,e,L),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(n,p),c(n,h),c(h,_),c(h,v),c(t,S),c(t,I),c(I,w),c(I,b),c(I,A),T||(R=[X(w,"click",s[7]),X(A,"click",s[8])],T=!0)},p(O,L){L&4&&i!==(i=O[2].username.charAt(0).toUpperCase()+"")&&ne(a,i),L&4&&u!==(u=O[2].username+"")&&ne(f,u),L&4&&g!==(g=O[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&ne(_,g)},d(O){O&&m(e),T=!1,Ae(R)}}}function Bl(s){let e,t,n,r,i,a,l,o="You",u,f=[],p=new Map,h,g,_,v,S=s[6]?"ðŸ”‡":"ðŸŽ¤",I,w,E,b,A,C=s[5]?"ðŸ“¹":"ðŸ“·",T,R,O,L,F='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',B,q,V=s[5]&&jl(),N=Ve(s[3]);const x=G=>G[17].userId;for(let G=0;G<N.length;G+=1){let U=Ml(s,N,G),W=x(U);p.set(W,f[G]=ql(W,U))}return{c(){e=y("div"),t=y("div"),n=y("div"),r=y("video"),i=z(),V&&V.c(),a=z(),l=y("div"),l.textContent=o,u=z();for(let G=0;G<f.length;G+=1)f[G].c();h=z(),g=y("div"),_=y("button"),v=y("span"),I=Q(S),E=z(),b=y("button"),A=y("span"),T=Q(C),O=z(),L=y("button"),L.innerHTML=F,this.h()},l(G){e=k(G,"DIV",{class:!0});var U=D(e);t=k(U,"DIV",{class:!0});var W=D(t);n=k(W,"DIV",{class:!0});var H=D(n);r=k(H,"VIDEO",{class:!0}),D(r).forEach(m),i=P(H),V&&V.l(H),a=P(H),l=k(H,"DIV",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-1l6ztyc"&&(l.textContent=o),H.forEach(m),u=P(W);for(let ce=0;ce<f.length;ce+=1)f[ce].l(W);W.forEach(m),h=P(U),g=k(U,"DIV",{class:!0});var Y=D(g);_=k(Y,"BUTTON",{class:!0,title:!0});var Z=D(_);v=k(Z,"SPAN",{class:!0});var se=D(v);I=K(se,S),se.forEach(m),Z.forEach(m),E=P(Y),b=k(Y,"BUTTON",{class:!0,title:!0});var de=D(b);A=k(de,"SPAN",{class:!0});var te=D(A);T=K(te,C),te.forEach(m),de.forEach(m),O=P(Y),L=k(Y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),$(L)!=="svelte-1rszrze"&&(L.innerHTML=F),Y.forEach(m),U.forEach(m),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,d(r,"class","video-element svelte-1mc89jk"),ve(r,"video-hidden",s[5]),d(l,"class","video-label svelte-1mc89jk"),d(n,"class","video-wrapper local-video svelte-1mc89jk"),d(t,"class","video-grid svelte-1mc89jk"),d(v,"class","control-icon svelte-1mc89jk"),d(_,"class","control-btn svelte-1mc89jk"),d(_,"title",w=s[6]?"Unmute":"Mute"),ve(_,"active",s[6]),d(A,"class","control-icon svelte-1mc89jk"),d(b,"class","control-btn svelte-1mc89jk"),d(b,"title",R=s[5]?"Turn on camera":"Turn off camera"),ve(b,"active",s[5]),d(L,"class","control-btn end-call-btn svelte-1mc89jk"),d(L,"title","End call"),d(g,"class","call-controls svelte-1mc89jk"),d(e,"class","active-call-container svelte-1mc89jk")},m(G,U){j(G,e,U),c(e,t),c(t,n),c(n,r),s[13](r),c(n,i),V&&V.m(n,null),c(n,a),c(n,l),c(t,u);for(let W=0;W<f.length;W+=1)f[W]&&f[W].m(t,null);c(e,h),c(e,g),c(g,_),c(_,v),c(v,I),c(g,E),c(g,b),c(b,A),c(A,T),c(g,O),c(g,L),B||(q=[X(_,"click",s[10]),X(b,"click",s[11]),X(L,"click",s[9])],B=!0)},p(G,U){U&32&&ve(r,"video-hidden",G[5]),G[5]?V||(V=jl(),V.c(),V.m(n,a)):V&&(V.d(1),V=null),U&10&&(N=Ve(G[3]),f=Qt(f,U,x,1,G,N,p,t,Kt,ql,null,Ml)),U&64&&S!==(S=G[6]?"ðŸ”‡":"ðŸŽ¤")&&ne(I,S),U&64&&w!==(w=G[6]?"Unmute":"Mute")&&d(_,"title",w),U&64&&ve(_,"active",G[6]),U&32&&C!==(C=G[5]?"ðŸ“¹":"ðŸ“·")&&ne(T,C),U&32&&R!==(R=G[5]?"Turn on camera":"Turn off camera")&&d(b,"title",R),U&32&&ve(b,"active",G[5])},d(G){G&&m(e),s[13](null),V&&V.d();for(let U=0;U<f.length;U+=1)f[U].d();B=!1,Ae(q)}}}function jl(s){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){d(e,"class","video-placeholder svelte-1mc89jk")},m(n,r){j(n,e,r)},d(n){n&&m(e)}}}function Vl(s){let e,t,n="ðŸ‘¤",r,i,a=(s[17].username||"User")+"",l;return{c(){e=y("div"),t=y("span"),t.textContent=n,r=z(),i=y("span"),l=Q(a),this.h()},l(o){e=k(o,"DIV",{class:!0});var u=D(e);t=k(u,"SPAN",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-18bpbb5"&&(t.textContent=n),r=P(u),i=k(u,"SPAN",{});var f=D(i);l=K(f,a),f.forEach(m),u.forEach(m),this.h()},h(){d(t,"class","placeholder-icon svelte-1mc89jk"),d(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){j(o,e,u),c(e,t),c(e,r),c(e,i),c(i,l)},p(o,u){u&8&&a!==(a=(o[17].username||"User")+"")&&ne(l,a)},d(o){o&&m(e)}}}function ql(s,e){let t,n,r=e[17],i,a,l,o=(e[17].username||"User")+"",u,f;const p=()=>e[14](n,r),h=()=>e[14](null,r);let g=!e[17].isVideoEnabled&&Vl(e);return{key:s,first:null,c(){t=y("div"),n=y("video"),i=z(),g&&g.c(),a=z(),l=y("div"),u=Q(o),f=z(),this.h()},l(_){t=k(_,"DIV",{class:!0});var v=D(t);n=k(v,"VIDEO",{class:!0}),D(n).forEach(m),i=P(v),g&&g.l(v),a=P(v),l=k(v,"DIV",{class:!0});var S=D(l);u=K(S,o),S.forEach(m),f=P(v),v.forEach(m),this.h()},h(){n.autoplay=!0,n.playsInline=!0,d(n,"class","video-element svelte-1mc89jk"),ve(n,"video-hidden",!e[17].isVideoEnabled),d(l,"class","video-label svelte-1mc89jk"),d(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(_,v){j(_,t,v),c(t,n),p(),c(t,i),g&&g.m(t,null),c(t,a),c(t,l),c(l,u),c(t,f)},p(_,v){e=_,r!==e[17]&&(h(),r=e[17],p()),v&8&&ve(n,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?g&&(g.d(1),g=null):g?g.p(e,v):(g=Vl(e),g.c(),g.m(t,a)),v&8&&o!==(o=(e[17].username||"User")+"")&&ne(u,o)},d(_){_&&m(t),h(),g&&g.d()}}}function lh(s){let e,t,n=s[2]&&Ul(s),r=s[4]&&Bl(s);return{c(){n&&n.c(),e=z(),r&&r.c(),t=De()},l(i){n&&n.l(i),e=P(i),r&&r.l(i),t=De()},m(i,a){n&&n.m(i,a),j(i,e,a),r&&r.m(i,a),j(i,t,a)},p(i,[a]){i[2]?n?n.p(i,a):(n=Ul(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[4]?r?r.p(i,a):(r=Bl(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Ie,o:Ie,d(i){i&&(m(e),m(t)),n&&n.d(i),r&&r.d(i)}}}function ah(s,e,t){let n,r,i,a,l,o;Re(s,Bs,b=>t(15,n=b)),Re(s,In,b=>t(2,r=b)),Re(s,Ir,b=>t(3,i=b)),Re(s,zn,b=>t(4,a=b)),Re(s,ln,b=>t(5,l=b)),Re(s,rn,b=>t(6,o=b));let u,f={},p=null;rs(()=>{n&&(n.on("call-incoming",b=>{In.set({userId:b.userId,username:b.username,isVideoCall:b.isVideoCall})}),n.on("call-accepted",async b=>{await Sd(n,b.userId)}),n.on("call-rejected",b=>{alert("Call was rejected"),Zn(n)}),n.on("call-ended",b=>{Zn(n)}),n.on("call-offer",async b=>{const A=i.find(T=>T.userId===b.senderId)||r,C=A?A.username:"Unknown";await Ad(n,b.senderId,C,b.offer)}),n.on("call-answer-sdp",async b=>{await Cd(b.senderId,b.answer)}),n.on("call-ice-candidate",async b=>{await Id(b.senderId,b.candidate)}))}),Zl(()=>{n&&(n.off("call-incoming"),n.off("call-accepted"),n.off("call-rejected"),n.off("call-ended"),n.off("call-offer"),n.off("call-answer-sdp"),n.off("call-ice-candidate"))});function h(){fa()}async function g(){!r||!n||await yd(n,r.userId,r.isVideoCall)}function _(){!r||!n||wd(n,r.userId)}function v(){n&&Zn(n)}function S(){Ed()}function I(){Td()}function w(b){et[b?"unshift":"push"](()=>{u=b,t(0,u),t(4,a)})}function E(b,A){et[b?"unshift":"push"](()=>{f[A.userId]=b,t(1,f)})}return s.$$.update=()=>{if(s.$$.dirty&4100&&(r?(h(),t(12,p=Ho(r.username,r.isVideoCall,()=>g()))):p&&(p.close(),t(12,p=null))),s.$$.dirty&17&&a&&u){const b=Dd();b&&t(0,u.srcObject=b,u)}s.$$.dirty&10&&i.length>0&&i.forEach(b=>{const A=f[b.userId];A&&b.stream&&(A.srcObject=b.stream)})},[u,f,r,i,a,l,o,g,_,v,S,I,p,w,E]}class oh extends ct{constructor(e){super(),ut(this,e,ah,lh,ot,{})}}const{window:Hl}=cr;function ch(s){let e,t,n,r,i,a,l,o,u,f,p,h,g,_,v,S,I,w=s[2]?"â†’":"â†",E,b,A,C,T,R,O,L;function F(x){s[13](x)}let B={};s[1]!==void 0&&(B.activeView=s[1]),n=new kd({props:B}),et.push(()=>Lt(n,"activeView",F)),f=new $f({});function q(x){s[14](x)}let V={};s[1]!==void 0&&(V.activeView=s[1]),g=new ih({props:V}),et.push(()=>Lt(g,"activeView",q));let N=s[2]&&Gl(s);return T=new oh({}),{c(){e=y("div"),t=y("div"),Ye(n.$$.fragment),i=z(),a=y("div"),l=z(),o=y("div"),u=y("div"),Ye(f.$$.fragment),p=z(),h=y("div"),Ye(g.$$.fragment),v=z(),N&&N.c(),S=z(),I=y("button"),E=Q(w),C=z(),Ye(T.$$.fragment),this.h()},l(x){e=k(x,"DIV",{class:!0});var G=D(e);t=k(G,"DIV",{class:!0,style:!0});var U=D(t);We(n.$$.fragment,U),i=P(U),a=k(U,"DIV",{class:!0}),D(a).forEach(m),U.forEach(m),l=P(G),o=k(G,"DIV",{class:!0});var W=D(o);u=k(W,"DIV",{class:!0});var H=D(u);We(f.$$.fragment,H),H.forEach(m),p=P(W),h=k(W,"DIV",{class:!0});var Y=D(h);We(g.$$.fragment,Y),Y.forEach(m),W.forEach(m),v=P(G),N&&N.l(G),S=P(G),I=k(G,"BUTTON",{class:!0,title:!0,style:!0});var Z=D(I);E=K(Z,w),Z.forEach(m),G.forEach(m),C=P(x),We(T.$$.fragment,x),this.h()},h(){d(a,"class","resize-handle resize-handle-channel svelte-10wao8h"),d(t,"class","channel-sidebar-container svelte-10wao8h"),Ee(t,"width",s[3]+"px"),d(u,"class","svelte-10wao8h"),ve(u,"hidden",s[1]!=="chat"),d(h,"class","svelte-10wao8h"),ve(h,"hidden",s[1]!=="screen"),d(o,"class","main-content svelte-10wao8h"),d(I,"class","user-panel-toggle svelte-10wao8h"),d(I,"title",b=s[2]?"Hide user panel":"Show user panel"),d(I,"style",A=s[2]?`right: ${s[4]}px`:"right: 0"),ve(I,"open",s[2]),d(e,"class","app-container svelte-10wao8h"),ve(e,"resizing",s[5]||s[6])},m(x,G){j(x,e,G),c(e,t),Ge(n,t,null),c(t,i),c(t,a),c(e,l),c(e,o),c(o,u),Ge(f,u,null),c(o,p),c(o,h),Ge(g,h,null),c(e,v),N&&N.m(e,null),c(e,S),c(e,I),c(I,E),j(x,C,G),Ge(T,x,G),R=!0,O||(L=[X(a,"mousedown",s[8]),X(I,"click",s[15])],O=!0)},p(x,G){const U={};!r&&G&2&&(r=!0,U.activeView=x[1],Ft(()=>r=!1)),n.$set(U),(!R||G&8)&&Ee(t,"width",x[3]+"px"),(!R||G&2)&&ve(u,"hidden",x[1]!=="chat");const W={};!_&&G&2&&(_=!0,W.activeView=x[1],Ft(()=>_=!1)),g.$set(W),(!R||G&2)&&ve(h,"hidden",x[1]!=="screen"),x[2]?N?(N.p(x,G),G&4&&ke(N,1)):(N=Gl(x),N.c(),ke(N,1),N.m(e,S)):N&&(xs(),Ce(N,1,1,()=>{N=null}),Ms()),(!R||G&4)&&w!==(w=x[2]?"â†’":"â†")&&ne(E,w),(!R||G&4&&b!==(b=x[2]?"Hide user panel":"Show user panel"))&&d(I,"title",b),(!R||G&20&&A!==(A=x[2]?`right: ${x[4]}px`:"right: 0"))&&d(I,"style",A),(!R||G&4)&&ve(I,"open",x[2]),(!R||G&96)&&ve(e,"resizing",x[5]||x[6])},i(x){R||(ke(n.$$.fragment,x),ke(f.$$.fragment,x),ke(g.$$.fragment,x),ke(N),ke(T.$$.fragment,x),R=!0)},o(x){Ce(n.$$.fragment,x),Ce(f.$$.fragment,x),Ce(g.$$.fragment,x),Ce(N),Ce(T.$$.fragment,x),R=!1},d(x){x&&(m(e),m(C)),He(n),He(f),He(g),N&&N.d(),He(T,x),O=!1,Ae(L)}}}function uh(s){let e,t;return e=new sd({}),e.$on("login",s[7]),{c(){Ye(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,r){Ge(e,n,r),t=!0},p:Ie,i(n){t||(ke(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function Gl(s){let e,t,n,r,i,a,l;return r=new Yd({}),{c(){e=y("div"),t=y("div"),n=z(),Ye(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var u=D(e);t=k(u,"DIV",{class:!0}),D(t).forEach(m),n=P(u),We(r.$$.fragment,u),u.forEach(m),this.h()},h(){d(t,"class","resize-handle resize-handle-user svelte-10wao8h"),d(e,"class","user-panel-container svelte-10wao8h"),Ee(e,"width",s[4]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,n),Ge(r,e,null),i=!0,a||(l=X(t,"mousedown",s[9]),a=!0)},p(o,u){(!i||u&16)&&Ee(e,"width",o[4]+"px")},i(o){i||(ke(r.$$.fragment,o),i=!0)},o(o){Ce(r.$$.fragment,o),i=!1},d(o){o&&m(e),He(r),a=!1,l()}}}function fh(s){let e,t,n,r,i,a;const l=[uh,ch],o=[];function u(f,p){return f[0]?1:0}return e=u(s),t=o[e]=l[e](s),{c(){t.c(),n=De()},l(f){t.l(f),n=De()},m(f,p){o[e].m(f,p),j(f,n,p),r=!0,i||(a=[X(Hl,"mousemove",s[10]),X(Hl,"mouseup",s[11])],i=!0)},p(f,[p]){let h=e;e=u(f),e===h?o[e].p(f,p):(xs(),Ce(o[h],1,1,()=>{o[h]=null}),Ms(),t=o[e],t?t.p(f,p):(t=o[e]=l[e](f),t.c()),ke(t,1),t.m(n.parentNode,n))},i(f){r||(ke(t),r=!0)},o(f){Ce(t),r=!1},d(f){f&&m(n),o[e].d(f),i=!1,Ae(a)}}}function dh(s,e,t){let{data:n}=e,r="",i=!1,a="chat",l=!1,o=240,u=250,f=!1,p=!1;rs(async()=>{localStorage.getItem("notificationsEnabled")!=="false"&&await Go()});function h(b){r=b.detail,au(r),t(0,i=!0)}function g(b){t(5,f=!0),b.preventDefault()}function _(b){t(6,p=!0),b.preventDefault()}function v(b){if(f){const A=b.clientX;A>=180&&A<=400&&t(3,o=A)}else if(p){const A=window.innerWidth-b.clientX;A>=200&&A<=500&&t(4,u=A)}}function S(){t(5,f=!1),t(6,p=!1)}Zl(()=>{du()});function I(b){a=b,t(1,a)}function w(b){a=b,t(1,a)}const E=()=>t(2,l=!l);return s.$$set=b=>{"data"in b&&t(12,n=b.data)},[i,a,l,o,u,f,p,h,g,_,v,S,n,I,w,E]}class bh extends ct{constructor(e){super(),ut(this,e,dh,fh,ot,{data:12})}}export{bh as component};
