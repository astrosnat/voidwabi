var uf=Object.defineProperty;var ff=(n,e,t)=>e in n?uf(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ze=(n,e,t)=>ff(n,typeof e!="symbol"?e+"":e,t);import{A as je,O as qi,s as bt,n as Ne,d as _,P as Ke,i as j,e as c,Q as G,x as f,f as w,h as I,k as P,R as J,l as y,m as O,S as ni,r as Tn,p as Le,T as Re,U as Is,o as Me,b as te,V as ve,j as K,t as X,W as _t,X as pn,y as Be,B as Gn,z as lt,Y as en,q as df,Z as Zc,_ as Jc,v as Qc,$ as hf,a0 as Hi,a1 as ol,I as $c,a2 as eu,a3 as pf,a4 as tu}from"../chunks/scheduler.wtTgrGif.js";import{a as Te,S as kt,i as wt,f as tn,d as tt,t as De,g as gn,c as mn,m as nt,e as st,b as it}from"../chunks/index.dBWnVAe_.js";import{w as Ct}from"../chunks/index.C8fpCf-7.js";/* empty css                            */const cl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function xe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function nn(n,e){n.d(1),e.delete(n.key)}function sn(n,e,t,s,i,r,a,l,o,u,d,b){let h=n.length,p=r.length,g=h;const E={};for(;g--;)E[n[g].key]=g;const C=[],S=new Map,k=new Map,v=[];for(g=p;g--;){const D=b(i,r,g),N=t(D);let R=a.get(N);R?v.push(()=>R.p(D,e)):(R=u(N,D),R.c()),S.set(N,C[g]=R),N in E&&k.set(N,Math.abs(g-E[N]))}const m=new Set,T=new Set;function A(D){Te(D,1),D.m(l,d),a.set(D.key,D),d=D.first,p--}for(;h&&p;){const D=C[p-1],N=n[h-1],R=D.key,M=N.key;D===N?(d=D.first,h--,p--):S.has(M)?!a.has(R)||m.has(R)?A(D):T.has(M)?h--:k.get(R)>k.get(M)?(T.add(R),A(D)):(m.add(M),h--):(o(N,a),h--)}for(;h--;){const D=n[h];S.has(D.key)||o(D,a)}for(;p;)A(C[p-1]);return je(v),C}const On=Object.create(null);On.open="0";On.close="1";On.ping="2";On.pong="3";On.message="4";On.upgrade="5";On.noop="6";const Bi=Object.create(null);Object.keys(On).forEach(n=>{Bi[On[n]]=n});const Wr={type:"error",data:"parser error"},nu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",su=typeof ArrayBuffer=="function",iu=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,ul=({type:n,data:e},t,s)=>nu&&e instanceof Blob?t?s(e):ia(e,s):su&&(e instanceof ArrayBuffer||iu(e))?t?s(e):ia(new Blob([e]),s):s(On[n]+(e||"")),ia=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function ra(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Tr;function gf(n,e){if(nu&&n.data instanceof Blob)return n.data.arrayBuffer().then(ra).then(e);if(su&&(n.data instanceof ArrayBuffer||iu(n.data)))return e(ra(n.data));ul(n,!1,t=>{Tr||(Tr=new TextEncoder),e(Tr.encode(t))})}const la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ys=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<la.length;n++)Ys[la.charCodeAt(n)]=n;const mf=n=>{let e=n.length*.75,t=n.length,s,i=0,r,a,l,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(s=0;s<t;s+=4)r=Ys[n.charCodeAt(s)],a=Ys[n.charCodeAt(s+1)],l=Ys[n.charCodeAt(s+2)],o=Ys[n.charCodeAt(s+3)],d[i++]=r<<2|a>>4,d[i++]=(a&15)<<4|l>>2,d[i++]=(l&3)<<6|o&63;return u},vf=typeof ArrayBuffer=="function",fl=(n,e)=>{if(typeof n!="string")return{type:"message",data:ru(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:_f(n.substring(1),e)}:Bi[t]?n.length>1?{type:Bi[t],data:n.substring(1)}:{type:Bi[t]}:Wr},_f=(n,e)=>{if(vf){const t=mf(n);return ru(t,e)}else return{base64:!0,data:n}},ru=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},lu="",bf=(n,e)=>{const t=n.length,s=new Array(t);let i=0;n.forEach((r,a)=>{ul(r,!1,l=>{s[a]=l,++i===t&&e(s.join(lu))})})},kf=(n,e)=>{const t=n.split(lu),s=[];for(let i=0;i<t.length;i++){const r=fl(t[i],e);if(s.push(r),r.type==="error")break}return s};function wf(){return new TransformStream({transform(n,e){gf(n,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Sr;function Ai(n){return n.reduce((e,t)=>e+t.length,0)}function Ii(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function yf(n,e){Sr||(Sr=new TextDecoder);const t=[];let s=0,i=-1,r=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(s===0){if(Ai(t)<1)break;const o=Ii(t,1);r=(o[0]&128)===128,i=o[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Ai(t)<2)break;const o=Ii(t,2);i=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),s=3}else if(s===2){if(Ai(t)<8)break;const o=Ii(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Wr);break}i=d*Math.pow(2,32)+u.getUint32(4),s=3}else{if(Ai(t)<i)break;const o=Ii(t,i);l.enqueue(fl(r?o:Sr.decode(o),e)),s=0}if(i===0||i>n){l.enqueue(Wr);break}}}})}const au=4;function Et(n){if(n)return Ef(n)}function Ef(n){for(var e in Et.prototype)n[e]=Et.prototype[e];return n}Et.prototype.on=Et.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Et.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Et.prototype.off=Et.prototype.removeListener=Et.prototype.removeAllListeners=Et.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Et.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};Et.prototype.emitReserved=Et.prototype.emit;Et.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Et.prototype.hasListeners=function(n){return!!this.listeners(n).length};const nr=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),hn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Cf="arraybuffer";function ou(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Tf=hn.setTimeout,Sf=hn.clearTimeout;function sr(n,e){e.useNativeTimers?(n.setTimeoutFn=Tf.bind(hn),n.clearTimeoutFn=Sf.bind(hn)):(n.setTimeoutFn=hn.setTimeout.bind(hn),n.clearTimeoutFn=hn.clearTimeout.bind(hn))}const Af=1.33;function If(n){return typeof n=="string"?Df(n):Math.ceil((n.byteLength||n.size)*Af)}function Df(n){let e=0,t=0;for(let s=0,i=n.length;s<i;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function cu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Nf(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Pf(n){let e={},t=n.split("&");for(let s=0,i=t.length;s<i;s++){let r=t[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Of extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class dl extends Et{constructor(e){super(),this.writable=!1,sr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Of(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=fl(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Nf(e);return t.length?"?"+t:""}}class Rf extends dl{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};kf(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,bf(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=cu()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let uu=!1;try{uu=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Mf=uu;function Ff(){}class Lf extends Rf{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class Pn extends Et{constructor(e,t,s){super(),this.createRequest=e,sr(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=ou(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Pn.requestsCount++,Pn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ff,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pn.requestsCount=0;Pn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",aa);else if(typeof addEventListener=="function"){const n="onpagehide"in hn?"pagehide":"unload";addEventListener(n,aa,!1)}}function aa(){for(let n in Pn.requests)Pn.requests.hasOwnProperty(n)&&Pn.requests[n].abort()}const Bf=function(){const n=fu({xdomain:!1});return n&&n.responseType!==null}();class Uf extends Lf{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Bf&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Pn(fu,this.uri(),e)}}function fu(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Mf))return new XMLHttpRequest}catch{}if(!e)try{return new hn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const du=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Vf extends dl{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=du?{}:ou(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;ul(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&nr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=cu()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ar=hn.WebSocket||hn.MozWebSocket;class jf extends Vf{createSocket(e,t,s){return du?new Ar(e,t,s):t?new Ar(e,t):new Ar(e)}doWrite(e,t){this.ws.send(t)}}class zf extends dl{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=yf(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=wf();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:l,value:o})=>{l||(this.onPacket(o),r())}).catch(l=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&nr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const qf={websocket:jf,webtransport:zf,polling:Uf},Hf=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xf=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let i=Hf.exec(n||""),r={},a=14;for(;a--;)r[xf[a]]=i[a]||"";return t!=-1&&s!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Gf(r,r.path),r.queryKey=Wf(r,r.query),r}function Gf(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Wf(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(t[i]=r)}),t}const Kr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ui=[];Kr&&addEventListener("offline",()=>{Ui.forEach(n=>n())},!1);class $n extends Et{constructor(e,t){if(super(),this.binaryType=Cf,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=Yr(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Yr(t.host).host);sr(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Pf(this.opts.query)),Kr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ui.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=au,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&$n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",$n.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=If(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if($n.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Kr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Ui.indexOf(this._offlineEventListener);s!==-1&&Ui.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}$n.protocol=au;class Yf extends $n{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;$n.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;$n.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function r(){s||(s=!0,d(),t.close(),t=null)}const a=b=>{const h=new Error("probe error: "+b);h.transport=t.name,r(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function o(){a("socket closed")}function u(b){t&&b.name!==t.name&&r()}const d=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",l),this.off("close",o),this.off("upgrading",u)};t.once("open",i),t.once("error",a),t.once("close",l),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let Kf=class extends Yf{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>qf[i]).filter(i=>!!i)),super(e,s)}};function Xf(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=Yr(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}const Zf=typeof ArrayBuffer=="function",Jf=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,hu=Object.prototype.toString,Qf=typeof Blob=="function"||typeof Blob<"u"&&hu.call(Blob)==="[object BlobConstructor]",$f=typeof File=="function"||typeof File<"u"&&hu.call(File)==="[object FileConstructor]";function hl(n){return Zf&&(n instanceof ArrayBuffer||Jf(n))||Qf&&n instanceof Blob||$f&&n instanceof File}function Vi(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(Vi(n[t]))return!0;return!1}if(hl(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Vi(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Vi(n[t]))return!0;return!1}function ed(n){const e=[],t=n.data,s=n;return s.data=Xr(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Xr(n,e){if(!n)return n;if(hl(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Xr(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Xr(n[s],e));return t}return n}function td(n,e){return n.data=Zr(n.data,e),delete n.attachments,n}function Zr(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Zr(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Zr(n[t],e));return n}const nd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sd=5;var Xe;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(Xe||(Xe={}));class id{constructor(e){this.replacer=e}encode(e){return(e.type===Xe.EVENT||e.type===Xe.ACK)&&Vi(e)?this.encodeAsBinary({type:e.type===Xe.EVENT?Xe.BINARY_EVENT:Xe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Xe.BINARY_EVENT||e.type===Xe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ed(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function oa(n){return Object.prototype.toString.call(n)==="[object Object]"}class pl extends Et{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===Xe.BINARY_EVENT;s||t.type===Xe.BINARY_ACK?(t.type=s?Xe.EVENT:Xe.ACK,this.reconstructor=new rd(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(hl(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(Xe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Xe.BINARY_EVENT||s.type===Xe.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(r,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(pl.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Xe.CONNECT:return oa(t);case Xe.DISCONNECT:return t===void 0;case Xe.CONNECT_ERROR:return typeof t=="string"||oa(t);case Xe.EVENT:case Xe.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&nd.indexOf(t[0])===-1);case Xe.ACK:case Xe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class rd{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=td(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ld=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pl,Encoder:id,get PacketType(){return Xe},protocol:sd},Symbol.toStringTag,{value:"Module"}));function kn(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const ad=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class pu extends Et{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[kn(e,"open",this.onopen.bind(this)),kn(e,"packet",this.onpacket.bind(this)),kn(e,"error",this.onerror.bind(this)),kn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,r;if(ad.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Xe.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,b=t.pop();this._registerAckCallback(d,b),a.id=d}const l=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,o=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!l||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(r),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((s,i)=>{const r=(a,l)=>a?i(a):s(l);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Xe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Xe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xe.EVENT:case Xe.BINARY_EVENT:this.onevent(e);break;case Xe.ACK:case Xe.BINARY_ACK:this.onack(e);break;case Xe.DISCONNECT:this.ondisconnect();break;case Xe.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:Xe.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Ds(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Ds.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};Ds.prototype.reset=function(){this.attempts=0};Ds.prototype.setMin=function(n){this.ms=n};Ds.prototype.setMax=function(n){this.max=n};Ds.prototype.setJitter=function(n){this.jitter=n};class Jr extends Et{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,sr(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ds({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||ld;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Kf(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=kn(t,"open",function(){s.onopen(),e&&e()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=kn(t,"error",r);if(this._timeout!==!1){const l=this._timeout,o=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},l);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(kn(e,"ping",this.onping.bind(this)),kn(e,"data",this.ondata.bind(this)),kn(e,"error",this.onerror.bind(this)),kn(e,"close",this.onclose.bind(this)),kn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){nr(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new pu(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Us={};function ji(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=Xf(n,e.path||"/socket.io"),s=t.source,i=t.id,r=t.path,a=Us[i]&&r in Us[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return l?o=new Jr(s,e):(Us[i]||(Us[i]=new Jr(s,e)),o=Us[i]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(ji,{Manager:Jr,Socket:pu,io:ji,connect:ji});let Vs=null;function od(){return localStorage.getItem("notificationSound")||"/sounds/ProjectSound.ogg"}function cd(){const n=localStorage.getItem("notificationVolume");return n?parseFloat(n):.5}function gl(){try{Vs||(Vs=new Audio),Vs.src=od(),Vs.volume=cd(),Vs.play().catch(n=>{console.error("Failed to play notification sound:",n)})}catch(n){console.error("Error setting up notification sound:",n)}}function gu(){if(initAudio(),!audioContext)return;const n=()=>{const e=audioContext.createOscillator(),t=audioContext.createOscillator(),s=audioContext.createGain();e.connect(s),t.connect(s),s.connect(audioContext.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",s.gain.setValueAtTime(.15,audioContext.currentTime),s.gain.exponentialRampToValueAtTime(.01,audioContext.currentTime+.8),e.start(audioContext.currentTime),t.start(audioContext.currentTime),e.stop(audioContext.currentTime+.8),t.stop(audioContext.currentTime+.8)};n(),setTimeout(n,1e3)}function ud(n,e,t){if(e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(gl(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let i="",r="",a="/icon-192.png";const l=t?`${n.user} in #${t}`:n.user;switch(n.type){case"text":i=l,r=n.text;break;case"gif":i=l,r="ðŸŽ¬ Sent a GIF";break;case"file":i=l,r=`ðŸ“Ž Sent a file: ${n.fileName}`;break}const o=new Notification(i,{body:r,icon:a,badge:a,tag:`message-${n.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function fd(n,e,t,s){if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;gu();const r=`Incoming ${e?"Video":"Voice"} Call`,a=`${n} is calling...`,l="/icon-192.png",o=new Notification(r,{body:a,icon:l,badge:l,tag:`call-${n}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function dd(){return"Notification"in window?Notification.permission==="granted"?Promise.resolve("granted"):Notification.requestPermission():Promise.resolve("denied")}function ml(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ps=ml();function mu(n){ps=n}var Zs={exec:()=>null};function Qe(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(i,r)=>{let a=typeof r=="string"?r:r.source;return a=a.replace(Gt.caret,"$1"),t=t.replace(i,a),s},getRegex:()=>new RegExp(t,e)};return s}var hd=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Gt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},pd=/^(?:[ \t]*(?:\n|$))+/,gd=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,md=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,si=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vd=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vl=/(?:[*+-]|\d{1,9}[.)])/,vu=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_u=Qe(vu).replace(/bull/g,vl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_d=Qe(vu).replace(/bull/g,vl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_l=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bd=/^[^\n]+/,bl=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,kd=Qe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",bl).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wd=Qe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vl).getRegex(),ir="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,yd=Qe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kl).replace("tag",ir).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),bu=Qe(_l).replace("hr",si).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ir).getRegex(),Ed=Qe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",bu).getRegex(),wl={blockquote:Ed,code:gd,def:kd,fences:md,heading:vd,hr:si,html:yd,lheading:_u,list:wd,newline:pd,paragraph:bu,table:Zs,text:bd},ca=Qe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",si).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ir).getRegex(),Cd={...wl,lheading:_d,table:ca,paragraph:Qe(_l).replace("hr",si).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ca).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ir).getRegex()},Td={...wl,html:Qe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Qe(_l).replace("hr",si).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_u).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Sd=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ad=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ku=/^( {2,}|\\)\n(?!\s*$)/,Id=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,rr=/[\p{P}\p{S}]/u,yl=/[\s\p{P}\p{S}]/u,wu=/[^\s\p{P}\p{S}]/u,Dd=Qe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yl).getRegex(),yu=/(?!~)[\p{P}\p{S}]/u,Nd=/(?!~)[\s\p{P}\p{S}]/u,Pd=/(?:[^\s\p{P}\p{S}]|~)/u,Od=Qe(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",hd?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Eu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Rd=Qe(Eu,"u").replace(/punct/g,rr).getRegex(),Md=Qe(Eu,"u").replace(/punct/g,yu).getRegex(),Cu="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Fd=Qe(Cu,"gu").replace(/notPunctSpace/g,wu).replace(/punctSpace/g,yl).replace(/punct/g,rr).getRegex(),Ld=Qe(Cu,"gu").replace(/notPunctSpace/g,Pd).replace(/punctSpace/g,Nd).replace(/punct/g,yu).getRegex(),Bd=Qe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,wu).replace(/punctSpace/g,yl).replace(/punct/g,rr).getRegex(),Ud=Qe(/\\(punct)/,"gu").replace(/punct/g,rr).getRegex(),Vd=Qe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jd=Qe(kl).replace("(?:-->|$)","-->").getRegex(),zd=Qe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jd).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xi=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,qd=Qe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Tu=Qe(/^!?\[(label)\]\[(ref)\]/).replace("label",xi).replace("ref",bl).getRegex(),Su=Qe(/^!?\[(ref)\](?:\[\])?/).replace("ref",bl).getRegex(),Hd=Qe("reflink|nolink(?!\\()","g").replace("reflink",Tu).replace("nolink",Su).getRegex(),ua=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,El={_backpedal:Zs,anyPunctuation:Ud,autolink:Vd,blockSkip:Od,br:ku,code:Ad,del:Zs,emStrongLDelim:Rd,emStrongRDelimAst:Fd,emStrongRDelimUnd:Bd,escape:Sd,link:qd,nolink:Su,punctuation:Dd,reflink:Tu,reflinkSearch:Hd,tag:zd,text:Id,url:Zs},xd={...El,link:Qe(/^!?\[(label)\]\((.*?)\)/).replace("label",xi).getRegex(),reflink:Qe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xi).getRegex()},Qr={...El,emStrongRDelimAst:Ld,emStrongLDelim:Md,url:Qe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ua).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Qe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ua).getRegex()},Gd={...Qr,br:Qe(ku).replace("{2,}","*").getRegex(),text:Qe(Qr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Di={normal:wl,gfm:Cd,pedantic:Td},js={normal:El,gfm:Qr,breaks:Gd,pedantic:xd},Wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fa=n=>Wd[n];function qn(n,e){if(e){if(Gt.escapeTest.test(n))return n.replace(Gt.escapeReplace,fa)}else if(Gt.escapeTestNoEncode.test(n))return n.replace(Gt.escapeReplaceNoEncode,fa);return n}function da(n){try{n=encodeURI(n).replace(Gt.percentDecode,"%")}catch{return null}return n}function ha(n,e){var r;let t=n.replace(Gt.findPipe,(a,l,o)=>{let u=!1,d=l;for(;--d>=0&&o[d]==="\\";)u=!u;return u?"|":" |"}),s=t.split(Gt.splitPipe),i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(Gt.slashPipe,"|");return s}function zs(n,e,t){let s=n.length;if(s===0)return"";let i=0;for(;i<s&&n.charAt(s-i-1)===e;)i++;return n.slice(0,s-i)}function Yd(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function pa(n,e,t,s,i){let r=e.href,a=e.title||null,l=n[1].replace(i.other.outputLinkReplace,"$1");s.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:r,title:a,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,o}function Kd(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let i=s[1];return e.split(`
`).map(r=>{let a=r.match(t.other.beginningSpace);if(a===null)return r;let[l]=a;return l.length>=i.length?r.slice(i.length):r}).join(`
`)}var Gi=class{constructor(n){Ze(this,"options");Ze(this,"rules");Ze(this,"lexer");this.options=n||ps}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:zs(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=Kd(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=zs(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:zs(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=zs(e[0],`
`).split(`
`),s="",i="",r=[];for(;t.length>0;){let a=!1,l=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),a=!0;else if(!a)l.push(t[o]);else break;t=t.slice(o);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,i=i?`${i}
${d}`:d;let b=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=b,t.length===0)break;let h=r.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let p=h,g=p.raw+`
`+t.join(`
`),E=this.blockquote(g);r[r.length-1]=E,s=s.substring(0,s.length-p.raw.length)+E.raw,i=i.substring(0,i.length-p.text.length)+E.text;break}else if((h==null?void 0:h.type)==="list"){let p=h,g=p.raw+`
`+t.join(`
`),E=this.list(g);r[r.length-1]=E,s=s.substring(0,s.length-h.raw.length)+E.raw,i=i.substring(0,i.length-p.raw.length)+E.raw,t=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:r,text:i}}}list(n){var t,s;let e=this.rules.block.list.exec(n);if(e){let i=e[1].trim(),r=i.length>1,a={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");let l=this.rules.other.listItemRegex(i),o=!1;for(;n;){let d=!1,b="",h="";if(!(e=l.exec(n))||this.rules.block.hr.test(n))break;b=e[0],n=n.substring(b.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),g=n.split(`
`,1)[0],E=!p.trim(),C=0;if(this.options.pedantic?(C=2,h=p.trimStart()):E?C=e[1].length+1:(C=e[2].search(this.rules.other.nonSpaceChar),C=C>4?1:C,h=p.slice(C),C+=e[1].length),E&&this.rules.other.blankLine.test(g)&&(b+=g+`
`,n=n.substring(g.length+1),d=!0),!d){let S=this.rules.other.nextBulletRegex(C),k=this.rules.other.hrRegex(C),v=this.rules.other.fencesBeginRegex(C),m=this.rules.other.headingBeginRegex(C),T=this.rules.other.htmlBeginRegex(C);for(;n;){let A=n.split(`
`,1)[0],D;if(g=A,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),D=g):D=g.replace(this.rules.other.tabCharGlobal,"    "),v.test(g)||m.test(g)||T.test(g)||S.test(g)||k.test(g))break;if(D.search(this.rules.other.nonSpaceChar)>=C||!g.trim())h+=`
`+D.slice(C);else{if(E||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||v.test(p)||m.test(p)||k.test(p))break;h+=`
`+g}!E&&!g.trim()&&(E=!0),b+=A+`
`,n=n.substring(A.length+1),p=D.slice(C)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(b)&&(o=!0)),a.items.push({type:"list_item",raw:b,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=b}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let d of a.items){if(this.lexer.state.top=!1,d.tokens=this.lexer.blockTokens(d.text,[]),d.task){if(d.text=d.text.replace(this.rules.other.listReplaceTask,""),((t=d.tokens[0])==null?void 0:t.type)==="text"||((s=d.tokens[0])==null?void 0:s.type)==="paragraph"){d.tokens[0].raw=d.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),d.tokens[0].text=d.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let b=this.rules.other.listTaskCheckbox.exec(d.raw);if(b){let h={type:"checkbox",raw:b[0]+" ",checked:b[0]!=="[ ]"};d.checked=h.checked,a.loose?d.tokens[0]&&["paragraph","text"].includes(d.tokens[0].type)&&"tokens"in d.tokens[0]&&d.tokens[0].tokens?(d.tokens[0].raw=h.raw+d.tokens[0].raw,d.tokens[0].text=h.raw+d.tokens[0].text,d.tokens[0].tokens.unshift(h)):d.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):d.tokens.unshift(h)}}if(!a.loose){let b=d.tokens.filter(p=>p.type==="space"),h=b.length>0&&b.some(p=>this.rules.other.anyLine.test(p.raw));a.loose=h}}if(a.loose)for(let d of a.items){d.loose=!0;for(let b of d.tokens)b.type==="text"&&(b.type="paragraph")}return a}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:i}}}table(n){var a;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=ha(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?r.align.push("right"):this.rules.other.tableAlignCenter.test(l)?r.align.push("center"):this.rules.other.tableAlignLeft.test(l)?r.align.push("left"):r.align.push(null);for(let l=0;l<t.length;l++)r.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:r.align[l]});for(let l of i)r.rows.push(ha(l,r.header.length).map((o,u)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:r.align[u]})));return r}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let r=zs(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{let r=Yd(e[2],"()");if(r===-2)return;if(r>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let s=e[2],i="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],i=r[3])}else i=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),pa(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[s.toLowerCase()];if(!i){let r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return pa(t,i,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let i=[...s[0]].length-1,r,a,l=i,o=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+i);(s=u.exec(e))!=null;){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(a=[...r].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&i%3&&!((i+a)%3)){o+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+o);let d=[...s[0]][0].length,b=n.slice(0,i+s.index+d+a);if(Math.min(i,a)%2){let p=b.slice(1,-1);return{type:"em",raw:b,text:p,tokens:this.lexer.inlineTokens(p)}}let h=b.slice(2,-2);return{type:"strong",raw:b,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let s,i;if(e[2]==="@")s=e[0],i="mailto:"+s;else{let r;do r=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(r!==e[0]);s=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},yn=class $r{constructor(e){Ze(this,"tokens");Ze(this,"options");Ze(this,"state");Ze(this,"inlineQueue");Ze(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ps,this.options.tokenizer=this.options.tokenizer||new Gi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Gt,block:Di.normal,inline:js.normal};this.options.pedantic?(t.block=Di.pedantic,t.inline=js.pedantic):this.options.gfm&&(t.block=Di.gfm,this.options.breaks?t.inline=js.breaks:t.inline=js.gfm),this.tokenizer.rules=t}static get rules(){return{block:Di,inline:js}}static lex(e,t){return new $r(t).lex(e)}static lexInline(e,t){return new $r(t).inlineTokens(e)}lex(e){e=e.replace(Gt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var i,r,a;for(this.options.pedantic&&(e=e.replace(Gt.tabCharGlobal,"    ").replace(Gt.spaceLine,""));e;){let l;if((r=(i=this.options.extensions)==null?void 0:i.block)!=null&&r.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let u=t.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},t.push(l));continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if((a=this.options.extensions)!=null&&a.startBlock){let u=1/0,d=e.slice(1),b;this.options.extensions.startBlock.forEach(h=>{b=h.call({lexer:this},d),typeof b=="number"&&b>=0&&(u=Math.min(u,b))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(o))){let u=t.at(-1);s&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l),s=o.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,u,d,b,h;let s=e,i=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)r=i[2]?i[2].length:0,s=s.slice(0,i.index+r)+"["+"a".repeat(i[0].length-r-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((u=(o=this.options.hooks)==null?void 0:o.emStrongMask)==null?void 0:u.call({lexer:this},s))??s;let a=!1,l="";for(;e;){a||(l=""),a=!1;let p;if((b=(d=this.options.extensions)==null?void 0:d.inline)!=null&&b.some(E=>(p=E.call({lexer:this},e,t))?(e=e.substring(p.raw.length),t.push(p),!0):!1))continue;if(p=this.tokenizer.escape(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.tag(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.link(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(p.raw.length);let E=t.at(-1);p.type==="text"&&(E==null?void 0:E.type)==="text"?(E.raw+=p.raw,E.text+=p.text):t.push(p);continue}if(p=this.tokenizer.emStrong(e,s,l)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.codespan(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.br(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.del(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.autolink(e)){e=e.substring(p.raw.length),t.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(e))){e=e.substring(p.raw.length),t.push(p);continue}let g=e;if((h=this.options.extensions)!=null&&h.startInline){let E=1/0,C=e.slice(1),S;this.options.extensions.startInline.forEach(k=>{S=k.call({lexer:this},C),typeof S=="number"&&S>=0&&(E=Math.min(E,S))}),E<1/0&&E>=0&&(g=e.substring(0,E+1))}if(p=this.tokenizer.inlineText(g)){e=e.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(l=p.raw.slice(-1)),a=!0;let E=t.at(-1);(E==null?void 0:E.type)==="text"?(E.raw+=p.raw,E.text+=p.text):t.push(p);continue}if(e){let E="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(E);break}else throw new Error(E)}}return t}},Wi=class{constructor(n){Ze(this,"options");Ze(this,"parser");this.options=n||ps}space(n){return""}code({text:n,lang:e,escaped:t}){var r;let s=(r=(e||"").match(Gt.notSpaceStart))==null?void 0:r[0],i=n.replace(Gt.endingNewline,"")+`
`;return s?'<pre><code class="language-'+qn(s)+'">'+(t?i:qn(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:qn(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let a=0;a<n.items.length;a++){let l=n.items[a];s+=this.listitem(l)}let i=e?"ol":"ul",r=e&&t!==1?' start="'+t+'"':"";return"<"+i+r+`>
`+s+"</"+i+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let i=0;i<n.header.length;i++)t+=this.tablecell(n.header[i]);e+=this.tablerow({text:t});let s="";for(let i=0;i<n.rows.length;i++){let r=n.rows[i];t="";for(let a=0;a<r.length;a++)t+=this.tablecell(r[a]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${qn(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),i=da(n);if(i===null)return s;n=i;let r='<a href="'+n+'"';return e&&(r+=' title="'+qn(e)+'"'),r+=">"+s+"</a>",r}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let i=da(n);if(i===null)return qn(t);n=i;let r=`<img src="${n}" alt="${t}"`;return e&&(r+=` title="${qn(e)}"`),r+=">",r}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:qn(n.text)}},Cl=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},En=class el{constructor(e){Ze(this,"options");Ze(this,"renderer");Ze(this,"textRenderer");this.options=e||ps,this.options.renderer=this.options.renderer||new Wi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Cl}static parse(e,t){return new el(t).parse(e)}static parseInline(e,t){return new el(t).parseInline(e)}parse(e){var s,i;let t="";for(let r=0;r<e.length;r++){let a=e[r];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){let o=a,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=u||"";continue}}let l=a;switch(l.type){case"space":{t+=this.renderer.space(l);break}case"hr":{t+=this.renderer.hr(l);break}case"heading":{t+=this.renderer.heading(l);break}case"code":{t+=this.renderer.code(l);break}case"table":{t+=this.renderer.table(l);break}case"blockquote":{t+=this.renderer.blockquote(l);break}case"list":{t+=this.renderer.list(l);break}case"checkbox":{t+=this.renderer.checkbox(l);break}case"html":{t+=this.renderer.html(l);break}case"def":{t+=this.renderer.def(l);break}case"paragraph":{t+=this.renderer.paragraph(l);break}case"text":{t+=this.renderer.text(l);break}default:{let o='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){var i,r;let s="";for(let a=0;a<e.length;a++){let l=e[a];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){s+=u||"";continue}}let o=l;switch(o.type){case"escape":{s+=t.text(o);break}case"html":{s+=t.html(o);break}case"link":{s+=t.link(o);break}case"image":{s+=t.image(o);break}case"checkbox":{s+=t.checkbox(o);break}case"strong":{s+=t.strong(o);break}case"em":{s+=t.em(o);break}case"codespan":{s+=t.codespan(o);break}case"br":{s+=t.br(o);break}case"del":{s+=t.del(o);break}case"text":{s+=t.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}},Li,Ks=(Li=class{constructor(n){Ze(this,"options");Ze(this,"block");this.options=n||ps}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?yn.lex:yn.lexInline}provideParser(){return this.block?En.parse:En.parseInline}},Ze(Li,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ze(Li,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Li),Xd=class{constructor(...n){Ze(this,"defaults",ml());Ze(this,"options",this.setOptions);Ze(this,"parse",this.parseMarkdown(!0));Ze(this,"parseInline",this.parseMarkdown(!1));Ze(this,"Parser",En);Ze(this,"Renderer",Wi);Ze(this,"TextRenderer",Cl);Ze(this,"Lexer",yn);Ze(this,"Tokenizer",Gi);Ze(this,"Hooks",Ks);this.use(...n)}walkTokens(n,e){var s,i;let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let a=r;for(let l of a.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of a.rows)for(let o of l)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let a=r;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=r;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let o=a[l].flat(1/0);t=t.concat(this.walkTokens(o,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let r=e.renderers[i.name];r?e.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=r.apply(this,a)),l}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=e[i.level];r?r.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),s.extensions=e),t.renderer){let i=this.defaults.renderer||new Wi(this.defaults);for(let r in t.renderer){if(!(r in i))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let a=r,l=t.renderer[a],o=i[a];i[a]=(...u)=>{let d=l.apply(i,u);return d===!1&&(d=o.apply(i,u)),d||""}}s.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new Gi(this.defaults);for(let r in t.tokenizer){if(!(r in i))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let a=r,l=t.tokenizer[a],o=i[a];i[a]=(...u)=>{let d=l.apply(i,u);return d===!1&&(d=o.apply(i,u)),d}}s.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new Ks;for(let r in t.hooks){if(!(r in i))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let a=r,l=t.hooks[a],o=i[a];Ks.passThroughHooks.has(r)?i[a]=u=>{if(this.defaults.async&&Ks.passThroughHooksRespectAsync.has(r))return(async()=>{let b=await l.call(i,u);return o.call(i,b)})();let d=l.call(i,u);return o.call(i,d)}:i[a]=(...u)=>{if(this.defaults.async)return(async()=>{let b=await l.apply(i,u);return b===!1&&(b=await o.apply(i,u)),b})();let d=l.apply(i,u);return d===!1&&(d=o.apply(i,u)),d}}s.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,r=t.walkTokens;s.walkTokens=function(a){let l=[];return l.push(r.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return yn.lex(n,e??this.defaults)}parser(n,e){return En.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},i={...this.defaults,...s},r=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=n),i.async)return(async()=>{let a=i.hooks?await i.hooks.preprocess(e):e,l=await(i.hooks?await i.hooks.provideLexer():n?yn.lex:yn.lexInline)(a,i),o=i.hooks?await i.hooks.processAllTokens(l):l;i.walkTokens&&await Promise.all(this.walkTokens(o,i.walkTokens));let u=await(i.hooks?await i.hooks.provideParser():n?En.parse:En.parseInline)(o,i);return i.hooks?await i.hooks.postprocess(u):u})().catch(r);try{i.hooks&&(e=i.hooks.preprocess(e));let a=(i.hooks?i.hooks.provideLexer():n?yn.lex:yn.lexInline)(e,i);i.hooks&&(a=i.hooks.processAllTokens(a)),i.walkTokens&&this.walkTokens(a,i.walkTokens);let l=(i.hooks?i.hooks.provideParser():n?En.parse:En.parseInline)(a,i);return i.hooks&&(l=i.hooks.postprocess(l)),l}catch(a){return r(a)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+qn(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},ds=new Xd;function et(n,e){return ds.parse(n,e)}et.options=et.setOptions=function(n){return ds.setOptions(n),et.defaults=ds.defaults,mu(et.defaults),et};et.getDefaults=ml;et.defaults=ps;et.use=function(...n){return ds.use(...n),et.defaults=ds.defaults,mu(et.defaults),et};et.walkTokens=function(n,e){return ds.walkTokens(n,e)};et.parseInline=ds.parseInline;et.Parser=En;et.parser=En.parse;et.Renderer=Wi;et.TextRenderer=Cl;et.Lexer=yn;et.lexer=yn.lex;et.Tokenizer=Gi;et.Hooks=Ks;et.parse=et;et.options;et.setOptions;et.use;et.walkTokens;et.parseInline;En.parse;yn.lex;var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Au={exports:{}};(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(s){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,a={},l={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function k(v){return v instanceof o?new o(v.type,k(v.content),v.alias):Array.isArray(v)?v.map(k):v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++r}),k.__id},clone:function k(v,m){m=m||{};var T,A;switch(l.util.type(v)){case"Object":if(A=l.util.objId(v),m[A])return m[A];T={},m[A]=T;for(var D in v)v.hasOwnProperty(D)&&(T[D]=k(v[D],m));return T;case"Array":return A=l.util.objId(v),m[A]?m[A]:(T=[],m[A]=T,v.forEach(function(N,R){T[R]=k(N,m)}),T);default:return v}},getLanguage:function(k){for(;k;){var v=i.exec(k.className);if(v)return v[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,v){k.className=k.className.replace(RegExp(i,"gi"),""),k.classList.add("language-"+v)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(k){var v=document.getElementsByTagName("script");for(var m in v)if(v[m].src==k)return v[m]}return null}},isActive:function(k,v,m){for(var T="no-"+v;k;){var A=k.classList;if(A.contains(v))return!0;if(A.contains(T))return!1;k=k.parentElement}return!!m}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(k,v){var m=l.util.clone(l.languages[k]);for(var T in v)m[T]=v[T];return m},insertBefore:function(k,v,m,T){T=T||l.languages;var A=T[k],D={};for(var N in A)if(A.hasOwnProperty(N)){if(N==v)for(var R in m)m.hasOwnProperty(R)&&(D[R]=m[R]);m.hasOwnProperty(N)||(D[N]=A[N])}var M=T[k];return T[k]=D,l.languages.DFS(l.languages,function(F,z){z===M&&F!=k&&(this[F]=D)}),D},DFS:function k(v,m,T,A){A=A||{};var D=l.util.objId;for(var N in v)if(v.hasOwnProperty(N)){m.call(v,N,v[N],T||N);var R=v[N],M=l.util.type(R);M==="Object"&&!A[D(R)]?(A[D(R)]=!0,k(R,m,null,A)):M==="Array"&&!A[D(R)]&&(A[D(R)]=!0,k(R,m,N,A))}}},plugins:{},highlightAll:function(k,v){l.highlightAllUnder(document,k,v)},highlightAllUnder:function(k,v,m){var T={callback:m,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),l.hooks.run("before-all-elements-highlight",T);for(var A=0,D;D=T.elements[A++];)l.highlightElement(D,v===!0,T.callback)},highlightElement:function(k,v,m){var T=l.util.getLanguage(k),A=l.languages[T];l.util.setLanguage(k,T);var D=k.parentElement;D&&D.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(D,T);var N=k.textContent,R={element:k,language:T,grammar:A,code:N};function M(z){R.highlightedCode=z,l.hooks.run("before-insert",R),R.element.innerHTML=R.highlightedCode,l.hooks.run("after-highlight",R),l.hooks.run("complete",R),m&&m.call(R.element)}if(l.hooks.run("before-sanity-check",R),D=R.element.parentElement,D&&D.nodeName.toLowerCase()==="pre"&&!D.hasAttribute("tabindex")&&D.setAttribute("tabindex","0"),!R.code){l.hooks.run("complete",R),m&&m.call(R.element);return}if(l.hooks.run("before-highlight",R),!R.grammar){M(l.util.encode(R.code));return}if(v&&s.Worker){var F=new Worker(l.filename);F.onmessage=function(z){M(z.data)},F.postMessage(JSON.stringify({language:R.language,code:R.code,immediateClose:!0}))}else M(l.highlight(R.code,R.grammar,R.language))},highlight:function(k,v,m){var T={code:k,grammar:v,language:m};if(l.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=l.tokenize(T.code,T.grammar),l.hooks.run("after-tokenize",T),o.stringify(l.util.encode(T.tokens),T.language)},tokenize:function(k,v){var m=v.rest;if(m){for(var T in m)v[T]=m[T];delete v.rest}var A=new b;return h(A,A.head,k),d(k,A,v,A.head,0),g(A)},hooks:{all:{},add:function(k,v){var m=l.hooks.all;m[k]=m[k]||[],m[k].push(v)},run:function(k,v){var m=l.hooks.all[k];if(!(!m||!m.length))for(var T=0,A;A=m[T++];)A(v)}},Token:o};s.Prism=l;function o(k,v,m,T){this.type=k,this.content=v,this.alias=m,this.length=(T||"").length|0}o.stringify=function k(v,m){if(typeof v=="string")return v;if(Array.isArray(v)){var T="";return v.forEach(function(M){T+=k(M,m)}),T}var A={type:v.type,content:k(v.content,m),tag:"span",classes:["token",v.type],attributes:{},language:m},D=v.alias;D&&(Array.isArray(D)?Array.prototype.push.apply(A.classes,D):A.classes.push(D)),l.hooks.run("wrap",A);var N="";for(var R in A.attributes)N+=" "+R+'="'+(A.attributes[R]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+N+">"+A.content+"</"+A.tag+">"};function u(k,v,m,T){k.lastIndex=v;var A=k.exec(m);if(A&&T&&A[1]){var D=A[1].length;A.index+=D,A[0]=A[0].slice(D)}return A}function d(k,v,m,T,A,D){for(var N in m)if(!(!m.hasOwnProperty(N)||!m[N])){var R=m[N];R=Array.isArray(R)?R:[R];for(var M=0;M<R.length;++M){if(D&&D.cause==N+","+M)return;var F=R[M],z=F.inside,W=!!F.lookbehind,B=!!F.greedy,U=F.alias;if(B&&!F.pattern.global){var Y=F.pattern.toString().match(/[imsuy]*$/)[0];F.pattern=RegExp(F.pattern.source,Y+"g")}for(var V=F.pattern||F,L=T.next,H=A;L!==v.tail&&!(D&&H>=D.reach);H+=L.value.length,L=L.next){var q=L.value;if(v.length>k.length)return;if(!(q instanceof o)){var Z=1,$;if(B){if($=u(V,H,k,W),!$||$.index>=k.length)break;var ce=$.index,Q=$.index+$[0].length,oe=H;for(oe+=L.value.length;ce>=oe;)L=L.next,oe+=L.value.length;if(oe-=L.value.length,H=oe,L.value instanceof o)continue;for(var ae=L;ae!==v.tail&&(oe<Q||typeof ae.value=="string");ae=ae.next)Z++,oe+=ae.value.length;Z--,q=k.slice(H,oe),$.index-=H}else if($=u(V,0,q,W),!$)continue;var ce=$.index,re=$[0],he=q.slice(0,ce),Ce=q.slice(ce+re.length),se=H+q.length;D&&se>D.reach&&(D.reach=se);var pe=L.prev;he&&(pe=h(v,pe,he),H+=he.length),p(v,pe,Z);var Ge=new o(N,z?l.tokenize(re,z):re,U,re);if(L=h(v,pe,Ge),Ce&&h(v,L,Ce),Z>1){var we={cause:N+","+M,reach:se};d(k,v,m,L.prev,H,we),D&&we.reach>D.reach&&(D.reach=we.reach)}}}}}}function b(){var k={value:null,prev:null,next:null},v={value:null,prev:k,next:null};k.next=v,this.head=k,this.tail=v,this.length=0}function h(k,v,m){var T=v.next,A={value:m,prev:v,next:T};return v.next=A,T.prev=A,k.length++,A}function p(k,v,m){for(var T=v.next,A=0;A<m&&T!==k.tail;A++)T=T.next;v.next=T,T.prev=v,k.length-=A}function g(k){for(var v=[],m=k.head.next;m!==k.tail;)v.push(m.value),m=m.next;return v}if(!s.document)return s.addEventListener&&(l.disableWorkerMessageHandler||s.addEventListener("message",function(k){var v=JSON.parse(k.data),m=v.language,T=v.code,A=v.immediateClose;s.postMessage(l.highlight(T,l.languages[m],m)),A&&s.close()},!1)),l;var E=l.util.currentScript();E&&(l.filename=E.src,E.hasAttribute("data-manual")&&(l.manual=!0));function C(){l.manual||l.highlightAll()}if(!l.manual){var S=document.readyState;S==="loading"||S==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return l}(e);n.exports&&(n.exports=t),typeof ga<"u"&&(ga.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(i,r){var a={};a["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[r]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+r]={pattern:/[\s\S]+/,inside:t.languages[r]};var o={};o[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(s,i){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:t.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(s){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var r=s.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",i=function(E,C){return"âœ– Error "+E+" while fetching file: "+C},r="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",d="failed",b="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function h(E,C,S){var k=new XMLHttpRequest;k.open("GET",E,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?C(k.responseText):k.status>=400?S(i(k.status,k.statusText)):S(r))},k.send(null)}function p(E){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(C){var S=Number(C[1]),k=C[2],v=C[3];return k?v?[S,Number(v)]:[S,void 0]:[S,S]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+b}),t.hooks.add("before-sanity-check",function(E){var C=E.element;if(C.matches(b)){E.code="",C.setAttribute(l,o);var S=C.appendChild(document.createElement("CODE"));S.textContent=s;var k=C.getAttribute("data-src"),v=E.language;if(v==="none"){var m=(/\.(\w+)$/.exec(k)||[,"none"])[1];v=a[m]||m}t.util.setLanguage(S,v),t.util.setLanguage(C,v);var T=t.plugins.autoloader;T&&T.loadLanguages(v),h(k,function(A){C.setAttribute(l,u);var D=p(C.getAttribute("data-range"));if(D){var N=A.split(/\r\n?|\n/g),R=D[0],M=D[1]==null?N.length:D[1];R<0&&(R+=N.length),R=Math.max(0,Math.min(R-1,N.length)),M<0&&(M+=N.length),M=Math.max(0,Math.min(M,N.length)),A=N.slice(R,M).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(R+1))}S.textContent=A,t.highlightElement(S)},function(A){C.setAttribute(l,d),S.textContent=A})}}),t.plugins.fileHighlight={highlight:function(C){for(var S=(C||document).querySelectorAll(b),k=0,v;v=S[k++];)t.highlightElement(v)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Au);var Jd=Au.exports;const Ir=Zd(Jd);/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Iu,setPrototypeOf:ma,isFrozen:Qd,getPrototypeOf:$d,getOwnPropertyDescriptor:eh}=Object;let{freeze:Wt,seal:vn,create:tl}=Object,{apply:nl,construct:sl}=typeof Reflect<"u"&&Reflect;Wt||(Wt=function(e){return e});vn||(vn=function(e){return e});nl||(nl=function(e,t){for(var s=arguments.length,i=new Array(s>2?s-2:0),r=2;r<s;r++)i[r-2]=arguments[r];return e.apply(t,i)});sl||(sl=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return new e(...s)});const Ni=Yt(Array.prototype.forEach),th=Yt(Array.prototype.lastIndexOf),va=Yt(Array.prototype.pop),qs=Yt(Array.prototype.push),nh=Yt(Array.prototype.splice),zi=Yt(String.prototype.toLowerCase),Dr=Yt(String.prototype.toString),Nr=Yt(String.prototype.match),Hs=Yt(String.prototype.replace),sh=Yt(String.prototype.indexOf),ih=Yt(String.prototype.trim),bn=Yt(Object.prototype.hasOwnProperty),xt=Yt(RegExp.prototype.test),xs=rh(TypeError);function Yt(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return nl(n,e,s)}}function rh(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return sl(n,t)}}function We(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zi;ma&&ma(n,null);let s=e.length;for(;s--;){let i=e[s];if(typeof i=="string"){const r=t(i);r!==i&&(Qd(e)||(e[s]=r),i=r)}n[i]=!0}return n}function lh(n){for(let e=0;e<n.length;e++)bn(n,e)||(n[e]=null);return n}function Hn(n){const e=tl(null);for(const[t,s]of Iu(n))bn(n,t)&&(Array.isArray(s)?e[t]=lh(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=Hn(s):e[t]=s);return e}function Gs(n,e){for(;n!==null;){const s=eh(n,e);if(s){if(s.get)return Yt(s.get);if(typeof s.value=="function")return Yt(s.value)}n=$d(n)}function t(){return null}return t}const _a=Wt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pr=Wt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Or=Wt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ah=Wt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Rr=Wt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oh=Wt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ba=Wt(["#text"]),ka=Wt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mr=Wt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wa=Wt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pi=Wt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ch=vn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uh=vn(/<%[\w\W]*|[\w\W]*%>/gm),fh=vn(/\$\{[\w\W]*/gm),dh=vn(/^data-[\-\w.\u00B7-\uFFFF]+$/),hh=vn(/^aria-[\-\w]+$/),Du=vn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ph=vn(/^(?:\w+script|data):/i),gh=vn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Nu=vn(/^html$/i),mh=vn(/^[a-z][.\w]*(-[.\w]+)+$/i);var ya=Object.freeze({__proto__:null,ARIA_ATTR:hh,ATTR_WHITESPACE:gh,CUSTOM_ELEMENT:mh,DATA_ATTR:dh,DOCTYPE_NAME:Nu,ERB_EXPR:uh,IS_ALLOWED_URI:Du,IS_SCRIPT_OR_DATA:ph,MUSTACHE_EXPR:ch,TMPLIT_EXPR:fh});const Ws={element:1,text:3,progressingInstruction:7,comment:8,document:9},vh=function(){return typeof window>"u"?null:window},_h=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(s=t.getAttribute(i));const r="dompurify"+(s?"#"+s:"");try{return e.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},Ea=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Pu(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vh();const e=ge=>Pu(ge);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==Ws.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,i=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:l,Element:o,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:b,DOMParser:h,trustedTypes:p}=n,g=o.prototype,E=Gs(g,"cloneNode"),C=Gs(g,"remove"),S=Gs(g,"nextSibling"),k=Gs(g,"childNodes"),v=Gs(g,"parentNode");if(typeof a=="function"){const ge=t.createElement("template");ge.content&&ge.content.ownerDocument&&(t=ge.content.ownerDocument)}let m,T="";const{implementation:A,createNodeIterator:D,createDocumentFragment:N,getElementsByTagName:R}=t,{importNode:M}=s;let F=Ea();e.isSupported=typeof Iu=="function"&&typeof v=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:W,TMPLIT_EXPR:B,DATA_ATTR:U,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:L,CUSTOM_ELEMENT:H}=ya;let{IS_ALLOWED_URI:q}=ya,Z=null;const $=We({},[..._a,...Pr,...Or,...Rr,...ba]);let Q=null;const oe=We({},[...ka,...Mr,...wa,...Pi]);let ae=Object.seal(tl(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,re=null;const he=Object.seal(tl(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ce=!0,se=!0,pe=!1,Ge=!0,we=!1,Pe=!0,ye=!1,ne=!1,me=!1,Ie=!1,Ae=!1,le=!1,Fe=!0,Ve=!1;const ze="user-content-";let qe=!0,ie=!1,_e={},be=null;const de=We({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let He=null;const $e=We({},["audio","video","img","source","image","track"]);let Se=null;const Ue=We({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ft="http://www.w3.org/1998/Math/MathML",rt="http://www.w3.org/2000/svg",ot="http://www.w3.org/1999/xhtml";let Nt=ot,ct=!1,an=null;const Pt=We({},[ft,rt,ot],Dr);let Tt=We({},["mi","mo","mn","ms","mtext"]),zt=We({},["annotation-xml"]);const on=We({},["title","style","font","a","script"]);let mt=null;const Lt=["application/xhtml+xml","text/html"],Ln="text/html";let ht=null,St=null;const ee=t.createElement("form"),Ee=function(x){return x instanceof RegExp||x instanceof Function},Ot=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(St&&St===x)){if((!x||typeof x!="object")&&(x={}),x=Hn(x),mt=Lt.indexOf(x.PARSER_MEDIA_TYPE)===-1?Ln:x.PARSER_MEDIA_TYPE,ht=mt==="application/xhtml+xml"?Dr:zi,Z=bn(x,"ALLOWED_TAGS")?We({},x.ALLOWED_TAGS,ht):$,Q=bn(x,"ALLOWED_ATTR")?We({},x.ALLOWED_ATTR,ht):oe,an=bn(x,"ALLOWED_NAMESPACES")?We({},x.ALLOWED_NAMESPACES,Dr):Pt,Se=bn(x,"ADD_URI_SAFE_ATTR")?We(Hn(Ue),x.ADD_URI_SAFE_ATTR,ht):Ue,He=bn(x,"ADD_DATA_URI_TAGS")?We(Hn($e),x.ADD_DATA_URI_TAGS,ht):$e,be=bn(x,"FORBID_CONTENTS")?We({},x.FORBID_CONTENTS,ht):de,ce=bn(x,"FORBID_TAGS")?We({},x.FORBID_TAGS,ht):Hn({}),re=bn(x,"FORBID_ATTR")?We({},x.FORBID_ATTR,ht):Hn({}),_e=bn(x,"USE_PROFILES")?x.USE_PROFILES:!1,Ce=x.ALLOW_ARIA_ATTR!==!1,se=x.ALLOW_DATA_ATTR!==!1,pe=x.ALLOW_UNKNOWN_PROTOCOLS||!1,Ge=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,we=x.SAFE_FOR_TEMPLATES||!1,Pe=x.SAFE_FOR_XML!==!1,ye=x.WHOLE_DOCUMENT||!1,Ie=x.RETURN_DOM||!1,Ae=x.RETURN_DOM_FRAGMENT||!1,le=x.RETURN_TRUSTED_TYPE||!1,me=x.FORCE_BODY||!1,Fe=x.SANITIZE_DOM!==!1,Ve=x.SANITIZE_NAMED_PROPS||!1,qe=x.KEEP_CONTENT!==!1,ie=x.IN_PLACE||!1,q=x.ALLOWED_URI_REGEXP||Du,Nt=x.NAMESPACE||ot,Tt=x.MATHML_TEXT_INTEGRATION_POINTS||Tt,zt=x.HTML_INTEGRATION_POINTS||zt,ae=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&Ee(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&Ee(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),we&&(se=!1),Ae&&(Ie=!0),_e&&(Z=We({},ba),Q=[],_e.html===!0&&(We(Z,_a),We(Q,ka)),_e.svg===!0&&(We(Z,Pr),We(Q,Mr),We(Q,Pi)),_e.svgFilters===!0&&(We(Z,Or),We(Q,Mr),We(Q,Pi)),_e.mathMl===!0&&(We(Z,Rr),We(Q,wa),We(Q,Pi))),x.ADD_TAGS&&(typeof x.ADD_TAGS=="function"?he.tagCheck=x.ADD_TAGS:(Z===$&&(Z=Hn(Z)),We(Z,x.ADD_TAGS,ht))),x.ADD_ATTR&&(typeof x.ADD_ATTR=="function"?he.attributeCheck=x.ADD_ATTR:(Q===oe&&(Q=Hn(Q)),We(Q,x.ADD_ATTR,ht))),x.ADD_URI_SAFE_ATTR&&We(Se,x.ADD_URI_SAFE_ATTR,ht),x.FORBID_CONTENTS&&(be===de&&(be=Hn(be)),We(be,x.FORBID_CONTENTS,ht)),qe&&(Z["#text"]=!0),ye&&We(Z,["html","head","body"]),Z.table&&(We(Z,["tbody"]),delete ce.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw xs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=x.TRUSTED_TYPES_POLICY,T=m.createHTML("")}else m===void 0&&(m=_h(p,i)),m!==null&&typeof T=="string"&&(T=m.createHTML(""));Wt&&Wt(x),St=x}},Rt=We({},[...Pr,...Or,...ah]),pt=We({},[...Rr,...oh]),gs=function(x){let ue=v(x);(!ue||!ue.tagName)&&(ue={namespaceURI:Nt,tagName:"template"});const ke=zi(x.tagName),Je=zi(ue.tagName);return an[x.namespaceURI]?x.namespaceURI===rt?ue.namespaceURI===ot?ke==="svg":ue.namespaceURI===ft?ke==="svg"&&(Je==="annotation-xml"||Tt[Je]):!!Rt[ke]:x.namespaceURI===ft?ue.namespaceURI===ot?ke==="math":ue.namespaceURI===rt?ke==="math"&&zt[Je]:!!pt[ke]:x.namespaceURI===ot?ue.namespaceURI===rt&&!zt[Je]||ue.namespaceURI===ft&&!Tt[Je]?!1:!pt[ke]&&(on[ke]||!Rt[ke]):!!(mt==="application/xhtml+xml"&&an[x.namespaceURI]):!1},Kt=function(x){qs(e.removed,{element:x});try{v(x).removeChild(x)}catch{C(x)}},Bt=function(x,ue){try{qs(e.removed,{attribute:ue.getAttributeNode(x),from:ue})}catch{qs(e.removed,{attribute:null,from:ue})}if(ue.removeAttribute(x),x==="is")if(Ie||Ae)try{Kt(ue)}catch{}else try{ue.setAttribute(x,"")}catch{}},Sn=function(x){let ue=null,ke=null;if(me)x="<remove></remove>"+x;else{const dt=Nr(x,/^[\r\n\t ]+/);ke=dt&&dt[0]}mt==="application/xhtml+xml"&&Nt===ot&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const Je=m?m.createHTML(x):x;if(Nt===ot)try{ue=new h().parseFromString(Je,mt)}catch{}if(!ue||!ue.documentElement){ue=A.createDocument(Nt,"template",null);try{ue.documentElement.innerHTML=ct?T:Je}catch{}}const gt=ue.body||ue.documentElement;return x&&ke&&gt.insertBefore(t.createTextNode(ke),gt.childNodes[0]||null),Nt===ot?R.call(ue,ye?"html":"body")[0]:ye?ue.documentElement:gt},Ps=function(x){return D.call(x.ownerDocument||x,x,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ss=function(x){return x instanceof b&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof d)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},_n=function(x){return typeof l=="function"&&x instanceof l};function cn(ge,x,ue){Ni(ge,ke=>{ke.call(e,x,ue,St)})}const ms=function(x){let ue=null;if(cn(F.beforeSanitizeElements,x,null),ss(x))return Kt(x),!0;const ke=ht(x.nodeName);if(cn(F.uponSanitizeElement,x,{tagName:ke,allowedTags:Z}),Pe&&x.hasChildNodes()&&!_n(x.firstElementChild)&&xt(/<[/\w!]/g,x.innerHTML)&&xt(/<[/\w!]/g,x.textContent)||x.nodeType===Ws.progressingInstruction||Pe&&x.nodeType===Ws.comment&&xt(/<[/\w]/g,x.data))return Kt(x),!0;if(!(he.tagCheck instanceof Function&&he.tagCheck(ke))&&(!Z[ke]||ce[ke])){if(!ce[ke]&&An(ke)&&(ae.tagNameCheck instanceof RegExp&&xt(ae.tagNameCheck,ke)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(ke)))return!1;if(qe&&!be[ke]){const Je=v(x)||x.parentNode,gt=k(x)||x.childNodes;if(gt&&Je){const dt=gt.length;for(let At=dt-1;At>=0;--At){const vt=E(gt[At],!0);vt.__removalCount=(x.__removalCount||0)+1,Je.insertBefore(vt,S(x))}}}return Kt(x),!0}return x instanceof o&&!gs(x)||(ke==="noscript"||ke==="noembed"||ke==="noframes")&&xt(/<\/no(script|embed|frames)/i,x.innerHTML)?(Kt(x),!0):(we&&x.nodeType===Ws.text&&(ue=x.textContent,Ni([z,W,B],Je=>{ue=Hs(ue,Je," ")}),x.textContent!==ue&&(qs(e.removed,{element:x.cloneNode()}),x.textContent=ue)),cn(F.afterSanitizeElements,x,null),!1)},qt=function(x,ue,ke){if(Fe&&(ue==="id"||ue==="name")&&(ke in t||ke in ee))return!1;if(!(se&&!re[ue]&&xt(U,ue))){if(!(Ce&&xt(Y,ue))){if(!(he.attributeCheck instanceof Function&&he.attributeCheck(ue,x))){if(!Q[ue]||re[ue]){if(!(An(x)&&(ae.tagNameCheck instanceof RegExp&&xt(ae.tagNameCheck,x)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(x))&&(ae.attributeNameCheck instanceof RegExp&&xt(ae.attributeNameCheck,ue)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(ue,x))||ue==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&xt(ae.tagNameCheck,ke)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(ke))))return!1}else if(!Se[ue]){if(!xt(q,Hs(ke,L,""))){if(!((ue==="src"||ue==="xlink:href"||ue==="href")&&x!=="script"&&sh(ke,"data:")===0&&He[x])){if(!(pe&&!xt(V,Hs(ke,L,"")))){if(ke)return!1}}}}}}}return!0},An=function(x){return x!=="annotation-xml"&&Nr(x,H)},Os=function(x){cn(F.beforeSanitizeAttributes,x,null);const{attributes:ue}=x;if(!ue||ss(x))return;const ke={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q,forceKeepAttr:void 0};let Je=ue.length;for(;Je--;){const gt=ue[Je],{name:dt,namespaceURI:At,value:vt}=gt,In=ht(dt),Mt=vt;let at=dt==="value"?Mt:ih(Mt);if(ke.attrName=In,ke.attrValue=at,ke.keepAttr=!0,ke.forceKeepAttr=void 0,cn(F.uponSanitizeAttribute,x,ke),at=ke.attrValue,Ve&&(In==="id"||In==="name")&&(Bt(dt,x),at=ze+at),Pe&&xt(/((--!?|])>)|<\/(style|title|textarea)/i,at)){Bt(dt,x);continue}if(In==="attributename"&&Nr(at,"href")){Bt(dt,x);continue}if(ke.forceKeepAttr)continue;if(!ke.keepAttr){Bt(dt,x);continue}if(!Ge&&xt(/\/>/i,at)){Bt(dt,x);continue}we&&Ni([z,W,B],un=>{at=Hs(at,un," ")});const Ms=ht(x.nodeName);if(!qt(Ms,In,at)){Bt(dt,x);continue}if(m&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!At)switch(p.getAttributeType(Ms,In)){case"TrustedHTML":{at=m.createHTML(at);break}case"TrustedScriptURL":{at=m.createScriptURL(at);break}}if(at!==Mt)try{At?x.setAttributeNS(At,dt,at):x.setAttribute(dt,at),ss(x)?Kt(x):va(e.removed)}catch{Bt(dt,x)}}cn(F.afterSanitizeAttributes,x,null)},Rs=function ge(x){let ue=null;const ke=Ps(x);for(cn(F.beforeSanitizeShadowDOM,x,null);ue=ke.nextNode();)cn(F.uponSanitizeShadowNode,ue,null),ms(ue),Os(ue),ue.content instanceof r&&ge(ue.content);cn(F.afterSanitizeShadowDOM,x,null)};return e.sanitize=function(ge){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=null,ke=null,Je=null,gt=null;if(ct=!ge,ct&&(ge="<!-->"),typeof ge!="string"&&!_n(ge))if(typeof ge.toString=="function"){if(ge=ge.toString(),typeof ge!="string")throw xs("dirty is not a string, aborting")}else throw xs("toString is not a function");if(!e.isSupported)return ge;if(ne||Ot(x),e.removed=[],typeof ge=="string"&&(ie=!1),ie){if(ge.nodeName){const vt=ht(ge.nodeName);if(!Z[vt]||ce[vt])throw xs("root node is forbidden and cannot be sanitized in-place")}}else if(ge instanceof l)ue=Sn("<!---->"),ke=ue.ownerDocument.importNode(ge,!0),ke.nodeType===Ws.element&&ke.nodeName==="BODY"||ke.nodeName==="HTML"?ue=ke:ue.appendChild(ke);else{if(!Ie&&!we&&!ye&&ge.indexOf("<")===-1)return m&&le?m.createHTML(ge):ge;if(ue=Sn(ge),!ue)return Ie?null:le?T:""}ue&&me&&Kt(ue.firstChild);const dt=Ps(ie?ge:ue);for(;Je=dt.nextNode();)ms(Je),Os(Je),Je.content instanceof r&&Rs(Je.content);if(ie)return ge;if(Ie){if(Ae)for(gt=N.call(ue.ownerDocument);ue.firstChild;)gt.appendChild(ue.firstChild);else gt=ue;return(Q.shadowroot||Q.shadowrootmode)&&(gt=M.call(s,gt,!0)),gt}let At=ye?ue.outerHTML:ue.innerHTML;return ye&&Z["!doctype"]&&ue.ownerDocument&&ue.ownerDocument.doctype&&ue.ownerDocument.doctype.name&&xt(Nu,ue.ownerDocument.doctype.name)&&(At="<!DOCTYPE "+ue.ownerDocument.doctype.name+`>
`+At),we&&Ni([z,W,B],vt=>{At=Hs(At,vt," ")}),m&&le?m.createHTML(At):At},e.setConfig=function(){let ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ot(ge),ne=!0},e.clearConfig=function(){St=null,ne=!1},e.isValidAttribute=function(ge,x,ue){St||Ot({});const ke=ht(ge),Je=ht(x);return qt(ke,Je,ue)},e.addHook=function(ge,x){typeof x=="function"&&qs(F[ge],x)},e.removeHook=function(ge,x){if(x!==void 0){const ue=th(F[ge],x);return ue===-1?void 0:nh(F[ge],ue,1)[0]}return va(F[ge])},e.removeHooks=function(ge){F[ge]=[]},e.removeAllHooks=function(){F=Ea()},e}var bh=Pu();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var e=n.languages.extend("typescript",{});delete e["class-name"],n.languages.typescript["class-name"].inside=e,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),n.languages.ts=n.languages.typescript})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(n){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,s={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[s,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:s.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:s.inside}],keyword:e,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":s,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:s.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:s.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism);(function(n){function e(H,q){return H.replace(/<<(\d+)>>/g,function(Z,$){return"(?:"+q[+$]+")"})}function t(H,q,Z){return RegExp(e(H,q),"")}function s(H,q){for(var Z=0;Z<q;Z++)H=H.replace(/<<self>>/g,function(){return"(?:"+H+")"});return H.replace(/<<self>>/g,"[^\\s\\S]")}var i={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function r(H){return"\\b(?:"+H.trim().replace(/ /g,"|")+")\\b"}var a=r(i.typeDeclaration),l=RegExp(r(i.type+" "+i.typeDeclaration+" "+i.contextual+" "+i.other)),o=r(i.typeDeclaration+" "+i.contextual+" "+i.other),u=r(i.type+" "+i.typeDeclaration+" "+i.other),d=s(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),b=s(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,p=e(/<<0>>(?:\s*<<1>>)?/.source,[h,d]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,p]),E=/\[\s*(?:,\s*)*\]/.source,C=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,E]),S=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,b,E]),k=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[S]),v=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[k,g,E]),m={keyword:l,punctuation:/[<>()?,.:[\]]/},T=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,A=/"(?:\\.|[^\\"\r\n])*"/.source,D=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[D]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[A]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:m},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,v]),lookbehind:!0,inside:m},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,p]),lookbehind:!0,inside:m},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:m},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[C]),lookbehind:!0,inside:m},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[v,u,h]),inside:m}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[b]),lookbehind:!0,alias:"class-name",inside:m},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[v,g]),inside:m,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[v]),lookbehind:!0,inside:m,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,d]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(d),alias:"class-name",inside:m}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,p,h,v,l.source,b,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[p,b]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:l,"class-name":{pattern:RegExp(v),greedy:!0,inside:m},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var N=A+"|"+T,R=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[N]),M=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[R]),2),F=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,z=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,M]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[F,z]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[F]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[M]),inside:n.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var W=/:[^}\r\n]+/.source,B=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[R]),2),U=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[B,W]),Y=s(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[N]),2),V=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Y,W]);function L(H,q){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[H]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[q,W]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[U]),lookbehind:!0,greedy:!0,inside:L(U,B)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[V]),lookbehind:!0,greedy:!0,inside:L(V,Y)}],char:{pattern:RegExp(T),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(n){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism);(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",s=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+s),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+s+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism);(function(n){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},s={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:s},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:s},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:s.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:s.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=n.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],r=s.variable[1].inside,a=0;a<i.length;a++)r[i[a]]=n.languages.bash[i[a]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var t=n.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const $s=new Map;et.setOptions({breaks:!0,gfm:!0});const Ca={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},kh={code(n){const e=n.text;let t=n.lang;if(t&&Ca[t.toLowerCase()]&&(t=Ca[t.toLowerCase()]),t&&Ir.languages[t])try{const i=Ir.highlight(e,Ir.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}catch(i){console.error("Prism highlighting failed for",t,":",i);const r=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};et.use({renderer:kh});function Yi(n){n=n.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),n=n.replace(/```(\w+)\n([\s\S]*?)```/g,(s,i,r)=>r.endsWith(`
`)?s:"```"+i+`
`+r+"\n```");let e;try{const s=et.parse(n,{async:!1});e=typeof s=="string"?s:String(s)}catch(s){console.error("Markdown parse error:",s),e=n}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(s,i)=>{const r=$s.get(i);if(r)return`<img src="${r.url}" alt=":${i}:" class="emote ${r.type==="animated"?"emote-animated":""}" title=":${i}:">`;const l=qi(es).find(o=>o.name===i);return l?`<img src="${l.url}" alt=":${l.name}:" class="emoji-inline" title=":${l.name}:">`:s}),bh.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function wh(n){$s.set(n.name,n)}function yh(n){$s.delete(n)}function Eh(n){$s.clear(),n.forEach(e=>{$s.set(e.name,e)})}const Ch="wabi-chat-db",Th=1,Jt="messages",bs="settings";class Sh{constructor(){Ze(this,"db",null);Ze(this,"initPromise",null)}async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Ch,Th);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=i=>{const r=i.target.result;r.objectStoreNames.contains(Jt)||r.createObjectStore(Jt,{keyPath:"period"}),r.objectStoreNames.contains(bs)||r.createObjectStore(bs,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return this.db?new Promise((t,s)=>{const a=this.db.transaction([bs],"readonly").objectStore(bs).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.value)},a.onerror=()=>s(a.error)}):null}async setSetting(e,t){if(this.db)return new Promise((s,i)=>{const l=this.db.transaction([bs],"readwrite").objectStore(bs).put({key:e,value:t});l.onsuccess=()=>s(),l.onerror=()=>i(l.error)})}async getArchive(e){return this.db?new Promise((t,s)=>{const a=this.db.transaction([Jt],"readonly").objectStore(Jt).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.data)},a.onerror=()=>s(a.error)}):null}async setArchive(e,t){if(this.db)return new Promise((s,i)=>{const l=this.db.transaction([Jt],"readwrite").objectStore(Jt).put({period:e,data:t});l.onsuccess=()=>s(),l.onerror=()=>i(l.error)})}async deleteArchive(e){if(this.db)return new Promise((t,s)=>{const a=this.db.transaction([Jt],"readwrite").objectStore(Jt).delete(e);a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})}async getAllArchiveKeys(){return this.db?new Promise((e,t)=>{const r=this.db.transaction([Jt],"readonly").objectStore(Jt).getAllKeys();r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}):[]}async getAllArchives(){return this.db?new Promise((e,t)=>{const r=this.db.transaction([Jt],"readonly").objectStore(Jt).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}):[]}async clearAllArchives(){if(this.db)return new Promise((e,t)=>{const r=this.db.transaction([Jt],"readwrite").objectStore(Jt).clear();r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})}}class Ah{constructor(){Ze(this,"rotationPeriod","month");Ze(this,"maxArchives",4);Ze(this,"db");Ze(this,"initPromise",null);this.db=new Sh,this.initPromise=this.init()}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e)}async setMaxArchives(e){await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives()}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const s=this.getWeekNumber(e);return`${t}-W${String(s).padStart(2,"0")}`}case"month":{const s=e.getMonth()+1;return`${t}-${String(s).padStart(2,"0")}`}case"half-year":{const s=e.getMonth()<6?"H1":"H2";return`${t}-${s}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-t.getTime())/(24*60*60*1e3));return Math.ceil((s+t.getDay()+1)/7)}async isEnabled(){await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString())}async saveMessage(e,t){await this.ensureInit();const s=this.getPeriodKey(),i=await this.db.getArchive(s)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(s,i),await this.rotateArchives()}catch(r){console.error("Failed to save message to IndexedDB:",r),await this.rotateArchives()}}async rotateArchives(){await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const s of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${s}`),await this.db.deleteArchive(s)}}async loadAllMessages(){await this.ensureInit();const e={},t=await this.db.getAllArchives();for(const s of t){const i=s.data||{};Object.entries(i).forEach(([r,a])=>{e[r]||(e[r]=[]),e[r].push(...a)})}return Object.keys(e).forEach(s=>{e[s].sort((i,r)=>i.timestamp-r.timestamp)}),e}async deleteArchive(e){await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`)}async clearAllHistory(){await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history")}async exportArchives(){await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const s=JSON.stringify(t.data),i=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`wabi-chat-${t.period}.json`,a.click(),URL.revokeObjectURL(r)})}async exportArchive(e){await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const s=new Blob([JSON.stringify(t)],{type:"application/json"}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=`wabi-chat-${e}.json`,r.click(),URL.revokeObjectURL(i)}async getStats(){await this.ensureInit();const t=(await this.db.getAllArchives()).map(r=>{const a=JSON.stringify(r.data),l=new Blob([a]).size,o=r.data,u=Object.values(o).reduce((d,b)=>d+b.length,0);return{period:r.period,size:l,messageCount:u}}).sort((r,a)=>a.period.localeCompare(r.period)),s=t.reduce((r,a)=>r+a.size,0),i=t.reduce((r,a)=>r+a.messageCount,0);return{archives:t,totalSize:s,totalMessages:i}}}const $t=new Ah,Ns=Ct(null),jt=Ct([]),hs=Ct("general"),It=Ct({general:[]}),rn=Ct([]),Ou=Ct([]),Cn=Ct(null),Ta=Ct(!1),ei=Ct(0),Tl=Ct(null),ys=Ct({}),Ki=Ct(null),es=Ct([]);let fe=null;function Fr(){return fe}function Ih(n){let e="http://localhost:3000";e="http://localhost:3000",console.log("[Socket] Connecting to:",e),fe=ji(e),fe.on("connect",()=>{console.log("[Socket] Connected successfully!",fe.id)}),fe.on("connect_error",t=>{console.error("[Socket] Connection error:",t)}),Ns.set(fe);try{const t=localStorage.getItem("channelUnreadCounts");if(t){const s=JSON.parse(t);ys.set(s);const i=Object.values(s).reduce((r,a)=>r+a,0);ei.set(i),Xi()}}catch(t){console.error("Failed to load unread counts from localStorage:",t)}return $t.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const s={};for(const[i,r]of Object.entries(t)){const a=new Set;s[i]=r.filter(l=>a.has(l.id)?!1:(a.add(l.id),!0))}It.set(s)}}),fe.on("connect",()=>{console.log("Connected to server"),Ta.set(!0),fe==null||fe.emit("join",n)}),fe.on("disconnect",()=>{console.log("Disconnected from server"),Ta.set(!1)}),fe.on("init",t=>{console.log("[INIT DEBUG] Received init data:",Object.keys(t)),console.log("[INIT DEBUG] data.emojis value:",t.emojis),console.log("[INIT DEBUG] typeof data.emojis:",typeof t.emojis),rn.set(t.users);const s=t.channels.map(r=>{if(r.type==="dm"&&r.members){const a=r.members.find(o=>o!==(fe==null?void 0:fe.id)),l=t.users.find(o=>o.id===a);if(l)return{...r,name:l.username,otherUser:l}}return r});jt.set(s),t.emotes&&Eh(t.emotes),t.emojis?(console.log("Received emojis from server:",t.emojis.length,t.emojis),es.set(t.emojis)):console.log("No emojis received from server!");const i=t.users.find(r=>r.id===(fe==null?void 0:fe.id));i&&Cn.set(i),fe==null||fe.emit("join-channel","general")}),fe.on("channel-messages",t=>{It.update(s=>{const i=s[t.channelId]||[],r=new Set(i.map(l=>l.id)),a=t.messages.filter(l=>!r.has(l.id));return{...s,[t.channelId]:[...i,...a]}})}),fe.on("message",t=>{It.update(u=>{const d=u[t.channelId]||[];return d.some(b=>b.id===t.message.id)?u:{...u,[t.channelId]:[...d,t.message]}}),jt.subscribe(u=>{const d=u.find(b=>b.id===t.channelId);d!=null&&d.persistMessages&&$t.saveMessage(t.channelId,t.message)})();const s=t.message.userId===(fe==null?void 0:fe.id),i=qi(jt),r=qi(hs),a=i.find(u=>u.id===t.channelId),l=a==null?void 0:a.name,o=r===t.channelId;ud(t.message,s,l),!s&&(!o||document.hidden)&&(ys.update(u=>{const d={...u,[t.channelId]:(u[t.channelId]||0)+1};return localStorage.setItem("channelUnreadCounts",JSON.stringify(d)),d}),ei.update(u=>(u===0&&Tl.set(t.message.id),u+1)),Xi())}),fe.on("user-joined",t=>{rn.update(s=>[...s,t])}),fe.on("user-left",t=>{rn.update(s=>s.filter(i=>i.id!==t.id))}),fe.on("typing",t=>{Ou.set(t)}),fe.on("profile-updated",t=>{rn.update(s=>s.map(i=>i.id===t.id?t:i)),Cn.update(s=>s&&s.id===t.id?t:s)}),fe.on("message-edited",t=>{It.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(i=>i.id===t.messageId?{...i,text:t.newText,isEdited:!0}:i)}))}),fe.on("message-deleted",t=>{It.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).filter(i=>i.id!==t.messageId)}))}),fe.on("message-pin-toggled",t=>{It.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(i=>i.id===t.messageId?{...i,isPinned:t.isPinned}:i)}))}),fe.on("channel-created",t=>{let s=t;t.type==="dm"&&t.members&&rn.subscribe(i=>{const r=t.members.find(l=>l!==(fe==null?void 0:fe.id)),a=i.find(l=>l.id===r);a&&(s={...t,name:a.username,otherUser:a})})(),jt.update(i=>[...i,s]),It.update(i=>({...i,[s.id]:[]}))}),fe.on("channel-deleted",t=>{jt.update(s=>s.filter(i=>i.id!==t)),It.update(s=>{const i={...s};return delete i[t],i}),hs.update(s=>s===t?"general":s)}),fe.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),fe.on("dm-created",t=>{const s={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};jt.update(i=>i.some(r=>r.id===t.channelId)?i:[...i,s]),It.update(i=>({...i,[t.channelId]:i[t.channelId]||[]})),Ki.set({channelId:t.channelId,otherUser:t.otherUser})}),fe.on("group-created",t=>{jt.update(s=>s.some(i=>i.id===t.id)?s:[...s,t]),It.update(s=>({...s,[t.id]:s[t.id]||[]}))}),fe.on("emote-added",t=>{wh(t)}),fe.on("emote-deleted",t=>{yh(t)}),fe.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),fe.on("reaction-added",t=>{It.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(i=>i.id===t.messageId?{...i,reactions:t.reactions}:i)}))}),fe.on("reaction-removed",t=>{It.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(i=>i.id===t.messageId?{...i,reactions:t.reactions}:i)}))}),fe.on("emoji-added",t=>{es.update(s=>[...s,t])}),fe.on("emoji-deleted",t=>{es.update(s=>s.filter(i=>i.name!==t))}),fe.on("channel-settings-updated",t=>{jt.update(s=>s.map(i=>i.id===t.channelId?{...i,autoDeleteAfter:t.autoDeleteAfter,persistMessages:t.persistMessages}:i))}),fe}function Dh(n){const e=qi(jt).find(t=>t.id===n);if(e&&e.type==="dm"){console.warn("Cannot join DM channel via joinChannel - use DM panel instead"),e.otherUser&&Ki.set({channelId:n,otherUser:e.otherUser});return}fe==null||fe.emit("join-channel",n),hs.set(n),Fh(n)}function Nh(n){fe==null||fe.emit("create-channel",n)}function Ph(n){fe==null||fe.emit("delete-channel",n)}function ks(n,e,t="text",s){fe==null||fe.emit("message",{channelId:n,text:e,type:t,...s})}function Ru(n,e,t){fe==null||fe.emit("edit-message",{channelId:n,messageId:e,newText:t})}function Oh(n,e){fe==null||fe.emit("delete-message",{channelId:n,messageId:e})}function Sl(n,e){fe==null||fe.emit("toggle-pin-message",{channelId:n,messageId:e})}function ws(n){fe==null||fe.emit("typing",n)}function Sa(n,e){fe==null||fe.emit("update-profile",{status:n,profilePicture:e})}function Rh(){fe==null||fe.disconnect(),Ns.set(null),fe=null}function Mh(){ei.set(0),Tl.set(null),Xi()}function Fh(n){ys.update(e=>{const t={...e},s=t[n]||0;return ei.update(i=>Math.max(0,i-s)),delete t[n],t}),ys.subscribe(e=>{localStorage.setItem("channelUnreadCounts",JSON.stringify(e))})(),Xi()}function Xi(){let n=0;ei.subscribe(e=>n=e)(),n===0?document.title="Wabi Chat":n<=10?document.title=`(${n}) Wabi Chat`:document.title="(â€¢) Wabi Chat"}function Mu(n){fe==null||fe.emit("create-dm",{targetUserId:n})}function Lh(n,e){fe==null||fe.emit("update-channel-settings",{channelId:n,...e})}function Lr(n,e,t){fe==null||fe.emit("add-reaction",{channelId:n,messageId:e,emojiId:t})}function Bh(n,e,t){fe==null||fe.emit("remove-reaction",{channelId:n,messageId:e,emojiId:t})}let Oi;const Uh=new Uint8Array(16);function Vh(){if(!Oi&&(Oi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oi(Uh)}const Ft=[];for(let n=0;n<256;++n)Ft.push((n+256).toString(16).slice(1));function jh(n,e=0){return Ft[n[e+0]]+Ft[n[e+1]]+Ft[n[e+2]]+Ft[n[e+3]]+"-"+Ft[n[e+4]]+Ft[n[e+5]]+"-"+Ft[n[e+6]]+Ft[n[e+7]]+"-"+Ft[n[e+8]]+Ft[n[e+9]]+"-"+Ft[n[e+10]]+Ft[n[e+11]]+Ft[n[e+12]]+Ft[n[e+13]]+Ft[n[e+14]]+Ft[n[e+15]]}const zh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Aa={randomUUID:zh};function qh(n,e,t){if(Aa.randomUUID&&!n)return Aa.randomUUID();n=n||{};const s=n.random||(n.rng||Vh)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,jh(s)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var us="",Fu=16,Hh=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let s=0;s<Fu;s++)n+=e.charAt(Math.floor(Math.random()*t));return n},xh=()=>{if(!us){try{us=sessionStorage.getItem("giphyPingbackId")}catch{}if(!us){const n=new Date().getTime().toString(16);try{us=`${n}${qh().replace(/-/g,"")}`.substring(0,Fu)}catch{us=Hh()}try{sessionStorage.setItem("giphyPingbackId",us)}catch{}}}return us},Gh=xh,Ri=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{Ri=!0,n(Ri)},e.onerror=()=>{Ri=!1,n(Ri)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Xs=(typeof window<"u"?window:global)||{};Xs._GIPHY_SDK_HEADERS_=Xs._GIPHY_SDK_HEADERS_||(Xs.Headers?new Xs.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var Lu=()=>Xs._GIPHY_SDK_HEADERS_,Ia=(n,e)=>{var t;return(t=Lu())==null?void 0:t.set(n,e)},Wh=Object.defineProperty,Yh=Object.defineProperties,Kh=Object.getOwnPropertyDescriptors,Xh=Object.getOwnPropertyNames,Da=Object.getOwnPropertySymbols,Zh=Object.prototype.hasOwnProperty,Jh=Object.prototype.propertyIsEnumerable,Na=(n,e,t)=>e in n?Wh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nn=(n,e)=>{for(var t in e||(e={}))Zh.call(e,t)&&Na(n,t,e[t]);if(Da)for(var t of Da(e))Jh.call(e,t)&&Na(n,t,e[t]);return n},Br=(n,e)=>Yh(n,Kh(e)),Qh=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),$h=(n,e)=>function(){return e||(0,n[Xh(n)[0]])((e={exports:{}}).exports,e),e.exports},ep=(n,e,t)=>new Promise((s,i)=>{var r=o=>{try{l(t.next(o))}catch(u){i(u)}},a=o=>{try{l(t.throw(o))}catch(u){i(u)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(r,a);l((t=t.apply(n,e)).next())}),tp=$h({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),np=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],sp=["suppress_chrome","is_public","is_verified"],Pa=n=>e=>n[e]=!!n[e],ip=n=>typeof n=="string"?n:n.text,Bu=(n,e="")=>{const t=Nn({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(ip),t.bottle_data||(t.bottle_data={}),t.response_id=e,np.forEach(Pa(t)),Object.keys(t.images||{}).forEach(i=>{const r=t.images[i];r.width=parseInt(r.width),r.height=parseInt(r.height)});const{user:s}=t;if(s){const i=Nn({},s);sp.forEach(Pa(i)),t.user=i}return t},Oa=n=>{const{response_id:e}=n.meta;return n.data=Bu(n.data,e),n},zn=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>Bu(t,e)),n},rp=(typeof window<"u"?window:global)||{},lp=rp.GIPHY_API_URL||"https://api.giphy.com/v1/",Uu=class extends Error{constructor(n,e,t=0,s=""){super(n),this.url=e,this.status=t,this.statusText=s}},ap=class extends Uu{},Ra=Uu,op="@giphy/js-fetch-api: ",cp="Error fetching",up=n=>n,wn={},fp=6e4,dp=6e3,hp=()=>{const n=Date.now();Object.keys(wn).forEach(e=>{const t=wn[e].isError?dp:fp;n-wn[e].ts>=t&&delete wn[e]})};function pp(n,e={}){const{apiVersion:t=1,noCache:s=!1,normalizer:i=up}=e,r=lp.replace(/\/v\d+\/$/,`/v${t}/`);if(hp(),!wn[n]||s){const a=`${r}${n}`,l=()=>ep(this,null,function*(){var o,u;let d;try{const b=yield fetch(a,{method:"get"});if(b.ok){const h=yield b.json();if((o=h.meta)!=null&&o.response_id)return i(h);throw{message:"synthetic response"}}else{let h=cp;try{const g=yield b.json();g.message&&(h=g.message),(u=g.meta)!=null&&u.msg&&(h=g.meta.msg)}catch{}wn[n]&&(wn[n].isError=!0);let p=Ra;h==="This content is not available in your location"&&(p=ap),d=new p(`${op}${h}`,a,b.status,b.statusText)}}catch(b){d=new Ra(b.message,a),wn[n]&&(wn[n].isError=!0)}throw d});wn[n]={request:l(),ts:Date.now()}}return wn[n].request}var Qt=pp,Ur=n=>n&&n.type?n.type:"gifs",gp=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(Nn(Br(Nn({},t),{api_key:this.apiKey,pingback_id:Gh()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return Qt(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e!=null&&e.internal?"internal/":"";return Qt(`${t}gifs/${n}?${this.getQS()}`,{normalizer:Oa})}gifs(n,e){return Array.isArray(n)?Qt(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:zn}):Qt(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:zn})}emoji(n){return Qt(`emoji?${this.getQS(n)}`,{normalizer:zn})}emojiDefaultVariations(n){return Qt(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:zn})}emojiVariations(n){return Qt(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:zn})}animate(n,e={}){const t=this.getQS(Br(Nn({},e),{m:n}));return Qt(`text/animate?${t}`,{normalizer:zn})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let s;e.type==="text"&&(s=!0);const i=this.getQS(Br(Nn({rating:"pg-13"},e),{q:t,excludeDynamicResults:s}));return Qt(`${Ur(e)}/search?${i}`,{normalizer:zn})}subcategories(n,e){return Qt(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return Qt(`${Ur(n)}/trending?${this.getQS(Nn({rating:"pg-13"},n))}`,{normalizer:zn})}random(n){return Qt(`${Ur(n)}/random?${this.getQS(Nn({rating:"pg-13"},n))}`,{noCache:!0,normalizer:Oa})}related(n,e={}){const{type:t="gifs"}=e;return Qt(`${t}/related?${this.getQS(Nn({gif_id:n,rating:"pg-13"},e))}`,{normalizer:zn})}channels(n,e={}){return Qt(`channels/search?${this.getQS(Nn({q:n,rating:"pg-13"},e))}`)}},mp=gp,Ma;if(typeof Qh<"u"){const{version:n}=tp();(Ma=Lu())!=null&&Ma.get("X-GIPHY-SDK-NAME")||(Ia("X-GIPHY-SDK-NAME","FetchAPI"),Ia("X-GIPHY-SDK-VERSION",n))}function Fa(n,e,t){const s=n.slice();return s[11]=e[t],s}function vp(n){let e=[],t=new Map,s,i=xe(n[1]);const r=a=>a[11].id;for(let a=0;a<i.length;a+=1){let l=Fa(n,i,a),o=r(l);t.set(o,e[a]=La(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);s=Le()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,s,l)},p(a,l){l&34&&(i=xe(a[1]),e=sn(e,l,r,1,a,i,t,s.parentNode,nn,La,s,Fa))},d(a){a&&_(s);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function _p(n){let e,t="No GIFs found";return{c(){e=y("div"),e.textContent=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){f(e,"class","no-results svelte-x54k5n")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function bp(n){let e,t="Loading...";return{c(){e=y("div"),e.textContent=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-x54k5n")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function La(n,e){let t,s,i,r,a,l,o;function u(){return e[8](e[11])}return{key:n,first:null,c(){t=y("button"),s=y("img"),a=O(),this.h()},l(d){t=w(d,"BUTTON",{class:!0});var b=I(t);s=w(b,"IMG",{src:!0,alt:!0,class:!0}),a=P(b),b.forEach(_),this.h()},h(){Re(s.src,i=e[11].images.fixed_height_small.url)||f(s,"src",i),f(s,"alt",r=e[11].title),f(s,"class","svelte-x54k5n"),f(t,"class","gif-item svelte-x54k5n"),this.first=t},m(d,b){j(d,t,b),c(t,s),c(t,a),l||(o=G(t,"click",u),l=!0)},p(d,b){e=d,b&2&&!Re(s.src,i=e[11].images.fixed_height_small.url)&&f(s,"src",i),b&2&&r!==(r=e[11].title)&&f(s,"alt",r)},d(d){d&&_(t),l=!1,o()}}}function kp(n){let e,t,s,i,r,a="âœ•",l,o,u,d;function b(g,E){return g[2]?bp:g[1].length===0?_p:vp}let h=b(n),p=h(n);return{c(){e=y("div"),t=y("div"),s=y("input"),i=O(),r=y("button"),r.textContent=a,l=O(),o=y("div"),p.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"DIV",{class:!0});var C=I(t);s=w(C,"INPUT",{type:!0,placeholder:!0,class:!0}),i=P(C),r=w(C,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-xkwxcu"&&(r.textContent=a),C.forEach(_),l=P(E),o=w(E,"DIV",{class:!0});var S=I(o);p.l(S),S.forEach(_),E.forEach(_),this.h()},h(){f(s,"type","text"),f(s,"placeholder","Search GIFs..."),f(s,"class","svelte-x54k5n"),f(r,"class","close-btn svelte-x54k5n"),f(t,"class","giphy-header svelte-x54k5n"),f(o,"class","gif-grid svelte-x54k5n"),f(e,"class","giphy-picker svelte-x54k5n")},m(g,E){j(g,e,E),c(e,t),c(t,s),Ke(s,n[0]),c(t,i),c(t,r),c(e,l),c(e,o),p.m(o,null),u||(d=[G(s,"input",n[6]),G(s,"input",n[4]),G(r,"click",n[7])],u=!0)},p(g,[E]){E&1&&s.value!==g[0]&&Ke(s,g[0]),h===(h=b(g))&&p?p.p(g,E):(p.d(1),p=h(g),p&&(p.c(),p.m(o,null)))},i:Ne,o:Ne,d(g){g&&_(e),p.d(),u=!1,je(d)}}}function wp(n,e,t){const s=ni();let i="",r=[],a=!1;const l=new mp("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!i.trim()){u();return}t(2,a=!0);try{const{data:g}=await l.search(i,{limit:20});t(1,r=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,a=!1)}async function u(){t(2,a=!0);try{const{data:g}=await l.trending({limit:20});t(1,r=g),console.log("Loaded GIFs:",r.length,r)}catch(g){console.error("Error fetching trending GIFs:",g),t(1,r=[])}t(2,a=!1)}function d(g){s("select",g.images.fixed_height.url)}Tn(()=>{u()});function b(){i=this.value,t(0,i)}return[i,r,a,s,o,d,b,()=>s("close"),g=>d(g)]}class yp extends kt{constructor(e){super(),wt(this,e,wp,kp,bt,{})}}function Ba(n,e,t){const s=n.slice();return s[11]=e[t],s}function Ua(n,e,t){const s=n.slice();return s[14]=e[t],s}function Va(n){let e,t=za(n[14])+"",s,i,r,a,l;function o(){return n[9](n[14])}return{c(){e=y("button"),s=X(t),i=O(),this.h()},l(u){e=w(u,"BUTTON",{class:!0,title:!0});var d=I(e);s=K(d,t),i=P(d),d.forEach(_),this.h()},h(){f(e,"class","category-tab svelte-lmg0d0"),f(e,"title",r=n[14]),ve(e,"active",n[0]===n[14])},m(u,d){j(u,e,d),c(e,s),c(e,i),a||(l=G(e,"click",o),a=!0)},p(u,d){n=u,d&8&&t!==(t=za(n[14])+"")&&te(s,t),d&8&&r!==(r=n[14])&&f(e,"title",r),d&9&&ve(e,"active",n[0]===n[14])},d(u){u&&_(e),a=!1,l()}}}function Ep(n){let e=[],t=new Map,s,i=xe(n[2]);const r=a=>a[11].id;for(let a=0;a<i.length;a+=1){let l=Ba(n,i,a),o=r(l);t.set(o,e[a]=ja(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);s=Le()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,s,l)},p(a,l){l&36&&(i=xe(a[2]),e=sn(e,l,r,1,a,i,t,s.parentNode,nn,ja,s,Ba))},d(a){a&&_(s);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Cp(n){let e,t="No emojis found";return{c(){e=y("div"),e.textContent=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-14gmr6"&&(e.textContent=t),this.h()},h(){f(e,"class","no-emojis svelte-lmg0d0")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function ja(n,e){let t,s,i,r,a,l,o,u;function d(){return e[10](e[11])}return{key:n,first:null,c(){t=y("button"),s=y("img"),a=O(),this.h()},l(b){t=w(b,"BUTTON",{class:!0,title:!0});var h=I(t);s=w(h,"IMG",{src:!0,alt:!0,class:!0}),a=P(h),h.forEach(_),this.h()},h(){Re(s.src,i=e[11].url)||f(s,"src",i),f(s,"alt",r=e[11].name),f(s,"class","emoji-img svelte-lmg0d0"),f(t,"class","emoji-btn svelte-lmg0d0"),f(t,"title",l=":"+e[11].name+":"),this.first=t},m(b,h){j(b,t,h),c(t,s),c(t,a),o||(u=G(t,"click",d),o=!0)},p(b,h){e=b,h&4&&!Re(s.src,i=e[11].url)&&f(s,"src",i),h&4&&r!==(r=e[11].name)&&f(s,"alt",r),h&4&&l!==(l=":"+e[11].name+":")&&f(t,"title",l)},d(b){b&&_(t),o=!1,u()}}}function Tp(n){let e,t,s,i,r,a="âœ•",l,o,u,d,b,h,p=xe(n[3]),g=[];for(let k=0;k<p.length;k+=1)g[k]=Va(Ua(n,p,k));function E(k,v){return k[2].length===0?Cp:Ep}let C=E(n),S=C(n);return{c(){e=y("div"),t=y("div"),s=y("input"),i=O(),r=y("button"),r.textContent=a,l=O(),o=y("div");for(let k=0;k<g.length;k+=1)g[k].c();u=O(),d=y("div"),S.c(),this.h()},l(k){e=w(k,"DIV",{class:!0});var v=I(e);t=w(v,"DIV",{class:!0});var m=I(t);s=w(m,"INPUT",{type:!0,placeholder:!0,class:!0}),i=P(m),r=w(m,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-xkwxcu"&&(r.textContent=a),m.forEach(_),l=P(v),o=w(v,"DIV",{class:!0});var T=I(o);for(let D=0;D<g.length;D+=1)g[D].l(T);T.forEach(_),u=P(v),d=w(v,"DIV",{class:!0});var A=I(d);S.l(A),A.forEach(_),v.forEach(_),this.h()},h(){f(s,"type","text"),f(s,"placeholder","Search emojis..."),f(s,"class","svelte-lmg0d0"),f(r,"class","close-btn svelte-lmg0d0"),f(t,"class","emoji-header svelte-lmg0d0"),f(o,"class","category-tabs svelte-lmg0d0"),f(d,"class","emoji-grid svelte-lmg0d0"),f(e,"class","emoji-picker svelte-lmg0d0")},m(k,v){j(k,e,v),c(e,t),c(t,s),Ke(s,n[1]),c(t,i),c(t,r),c(e,l),c(e,o);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(o,null);c(e,u),c(e,d),S.m(d,null),b||(h=[G(s,"input",n[7]),G(r,"click",n[8])],b=!0)},p(k,[v]){if(v&2&&s.value!==k[1]&&Ke(s,k[1]),v&9){p=xe(k[3]);let m;for(m=0;m<p.length;m+=1){const T=Ua(k,p,m);g[m]?g[m].p(T,v):(g[m]=Va(T),g[m].c(),g[m].m(o,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=p.length}C===(C=E(k))&&S?S.p(k,v):(S.d(1),S=C(k),S&&(S.c(),S.m(d,null)))},i:Ne,o:Ne,d(k){k&&_(e),Is(g,k),S.d(),b=!1,je(h)}}}function za(n){switch(n){case"all":return"ðŸŒŸ";case"smileys":return"ðŸ˜€";case"gestures":return"ðŸ‘‹";case"hearts":return"â¤ï¸";case"symbols":return"â­";case"objects":return"ðŸŽ";default:return"ðŸ“"}}function Sp(n,e,t){let s,i,r;Me(n,es,g=>t(6,r=g));const a=ni();let l="all",o="";function u(g){a("select",{emoji:g})}function d(){o=this.value,t(1,o)}const b=()=>a("close"),h=g=>t(0,l=g),p=g=>u(g);return n.$$.update=()=>{n.$$.dirty&64&&t(3,s=["all",...new Set(r.map(g=>g.category))]),n.$$.dirty&67&&t(2,i=r.filter(g=>{const E=l==="all"||g.category===l,C=o===""||g.name.toLowerCase().includes(o.toLowerCase());return E&&C}))},[l,o,i,s,a,u,r,d,b,h,p]}class Vu extends kt{constructor(e){super(),wt(this,e,Sp,Tp,bt,{})}}function qa(n){let e,t,s,i,r=(n[2]?"Your Profile":n[1].username)+"",a,l,o,u="Ã—",d,b,h,p,g,E,C,S,k,v="Username:",m,T,A=n[1].username+"",D,N,R,M,F,z;function W($,Q){return $[4]||$[1].profilePicture?Ip:Ap}let B=W(n),U=B(n),Y=n[2]&&Ha(n),V=!n[2]&&xa(n);function L($,Q){return $[2]?Rp:Op}let H=L(n),q=H(n),Z=n[2]&&Wa(n);return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h2"),a=X(r),l=O(),o=y("button"),o.textContent=u,d=O(),b=y("div"),h=y("div"),p=y("div"),U.c(),g=O(),Y&&Y.c(),E=O(),C=y("div"),S=y("div"),k=y("span"),k.textContent=v,m=O(),T=y("span"),D=X(A),N=O(),V&&V.c(),R=O(),q.c(),M=O(),Z&&Z.c(),this.h()},l($){e=w($,"DIV",{class:!0});var Q=I(e);t=w(Q,"DIV",{class:!0});var oe=I(t);s=w(oe,"DIV",{class:!0});var ae=I(s);i=w(ae,"H2",{class:!0});var ce=I(i);a=K(ce,r),ce.forEach(_),l=P(ae),o=w(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-12zniqk"&&(o.textContent=u),ae.forEach(_),d=P(oe),b=w(oe,"DIV",{class:!0});var re=I(b);h=w(re,"DIV",{class:!0});var he=I(h);p=w(he,"DIV",{class:!0});var Ce=I(p);U.l(Ce),Ce.forEach(_),g=P(he),Y&&Y.l(he),he.forEach(_),E=P(re),C=w(re,"DIV",{class:!0});var se=I(C);S=w(se,"DIV",{class:!0});var pe=I(S);k=w(pe,"SPAN",{class:!0,"data-svelte-h":!0}),J(k)!=="svelte-1fffgfa"&&(k.textContent=v),m=P(pe),T=w(pe,"SPAN",{class:!0});var Ge=I(T);D=K(Ge,A),Ge.forEach(_),pe.forEach(_),se.forEach(_),N=P(re),V&&V.l(re),R=P(re),q.l(re),re.forEach(_),M=P(oe),Z&&Z.l(oe),oe.forEach(_),Q.forEach(_),this.h()},h(){f(i,"class","svelte-mn2c16"),f(o,"class","close-btn svelte-mn2c16"),f(s,"class","modal-header svelte-mn2c16"),f(p,"class","profile-picture-container svelte-mn2c16"),f(h,"class","profile-picture-section svelte-mn2c16"),f(k,"class","info-label svelte-mn2c16"),f(T,"class","info-value svelte-mn2c16"),f(S,"class","info-row svelte-mn2c16"),f(C,"class","user-info svelte-mn2c16"),f(b,"class","modal-body svelte-mn2c16"),f(t,"class","modal-content svelte-mn2c16"),f(e,"class","modal-overlay svelte-mn2c16")},m($,Q){j($,e,Q),c(e,t),c(t,s),c(s,i),c(i,a),c(s,l),c(s,o),c(t,d),c(t,b),c(b,h),c(h,p),U.m(p,null),c(h,g),Y&&Y.m(h,null),c(b,E),c(b,C),c(C,S),c(S,k),c(S,m),c(S,T),c(T,D),c(b,N),V&&V.m(b,null),c(b,R),q.m(b,null),c(t,M),Z&&Z.m(t,null),F||(z=[G(o,"click",n[9]),G(t,"click",_t(n[12])),G(e,"click",n[9])],F=!0)},p($,Q){Q&6&&r!==(r=($[2]?"Your Profile":$[1].username)+"")&&te(a,r),B===(B=W($))&&U?U.p($,Q):(U.d(1),U=B($),U&&(U.c(),U.m(p,null))),$[2]?Y?Y.p($,Q):(Y=Ha($),Y.c(),Y.m(h,null)):Y&&(Y.d(1),Y=null),Q&2&&A!==(A=$[1].username+"")&&te(D,A),$[2]?V&&(V.d(1),V=null):V?V.p($,Q):(V=xa($),V.c(),V.m(b,R)),H===(H=L($))&&q?q.p($,Q):(q.d(1),q=H($),q&&(q.c(),q.m(b,null))),$[2]?Z?Z.p($,Q):(Z=Wa($),Z.c(),Z.m(t,null)):Z&&(Z.d(1),Z=null)},d($){$&&_(e),U.d(),Y&&Y.d(),V&&V.d(),q.d(),Z&&Z.d(),F=!1,je(z)}}}function Ap(n){let e,t=n[1].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","profile-picture-placeholder svelte-mn2c16"),Be(e,"background-color",n[1].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r&2&&t!==(t=i[1].username.charAt(0).toUpperCase()+"")&&te(s,t),r&2&&Be(e,"background-color",i[1].color)},d(i){i&&_(e)}}}function Ip(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[4]||n[1].profilePicture)||f(e,"src",t),f(e,"alt",s=n[1].username),f(e,"class","profile-picture svelte-mn2c16")},m(i,r){j(i,e,r)},p(i,r){r&18&&!Re(e.src,t=i[4]||i[1].profilePicture)&&f(e,"src",t),r&2&&s!==(s=i[1].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Ha(n){let e,t,s=n[4]||n[1].profilePicture?"Change Picture":"Upload Picture",i,r,a,l,o;return{c(){e=y("div"),t=y("label"),i=X(s),r=O(),a=y("input"),this.h()},l(u){e=w(u,"DIV",{class:!0});var d=I(e);t=w(d,"LABEL",{for:!0,class:!0});var b=I(t);i=K(b,s),b.forEach(_),r=P(d),a=w(d,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),d.forEach(_),this.h()},h(){f(t,"for","profile-picture"),f(t,"class","upload-label svelte-mn2c16"),f(a,"id","profile-picture"),f(a,"type","file"),f(a,"accept","image/*"),f(a,"class","file-input svelte-mn2c16"),f(e,"class","upload-section svelte-mn2c16")},m(u,d){j(u,e,d),c(e,t),c(t,i),c(e,r),c(e,a),l||(o=G(a,"change",n[10]),l=!0)},p(u,d){d&18&&s!==(s=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&te(i,s)},d(u){u&&_(e),l=!1,o()}}}function xa(n){let e,t,s,i="Personal Notes:",r,a,l=!n[6]&&Ga(n);function o(b,h){return b[6]?Pp:b[5]?Np:Dp}let u=o(n),d=u(n);return{c(){e=y("div"),t=y("div"),s=y("label"),s.textContent=i,r=O(),l&&l.c(),a=O(),d.c(),this.h()},l(b){e=w(b,"DIV",{class:!0});var h=I(e);t=w(h,"DIV",{class:!0});var p=I(t);s=w(p,"LABEL",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1vz1uda"&&(s.textContent=i),r=P(p),l&&l.l(p),p.forEach(_),a=P(h),d.l(h),h.forEach(_),this.h()},h(){f(s,"class","notes-label svelte-mn2c16"),f(t,"class","notes-header svelte-mn2c16"),f(e,"class","notes-section svelte-mn2c16")},m(b,h){j(b,e,h),c(e,t),c(t,s),c(t,r),l&&l.m(t,null),c(e,a),d.m(e,null)},p(b,h){b[6]?l&&(l.d(1),l=null):l?l.p(b,h):(l=Ga(b),l.c(),l.m(t,null)),u===(u=o(b))&&d?d.p(b,h):(d.d(1),d=u(b),d&&(d.c(),d.m(e,null)))},d(b){b&&_(e),l&&l.d(),d.d()}}}function Ga(n){let e,t=n[5]?"Edit":"Add Note",s,i,r;return{c(){e=y("button"),s=X(t),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var l=I(e);s=K(l,t),l.forEach(_),this.h()},h(){f(e,"class","edit-note-btn svelte-mn2c16")},m(a,l){j(a,e,l),c(e,s),i||(r=G(e,"click",n[13]),i=!0)},p(a,l){l&32&&t!==(t=a[5]?"Edit":"Add Note")&&te(s,t)},d(a){a&&_(e),i=!1,r()}}}function Dp(n){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=y("div"),e.textContent=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){f(e,"class","note-placeholder svelte-mn2c16")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function Np(n){let e,t;return{c(){e=y("div"),t=X(n[5]),this.h()},l(s){e=w(s,"DIV",{class:!0});var i=I(e);t=K(i,n[5]),i.forEach(_),this.h()},h(){f(e,"class","note-display svelte-mn2c16")},m(s,i){j(s,e,i),c(e,t)},p(s,i){i&32&&te(t,s[5])},d(s){s&&_(e)}}}function Pp(n){let e,t,s,i,r="Cancel",a,l,o="Save Note",u,d;return{c(){e=y("textarea"),t=O(),s=y("div"),i=y("button"),i.textContent=r,a=O(),l=y("button"),l.textContent=o,this.h()},l(b){e=w(b,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),I(e).forEach(_),t=P(b),s=w(b,"DIV",{class:!0});var h=I(s);i=w(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-hulrz8"&&(i.textContent=r),a=P(h),l=w(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-9d2dbm"&&(l.textContent=o),h.forEach(_),this.h()},h(){f(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),f(e,"class","note-textarea svelte-mn2c16"),f(e,"rows","3"),f(i,"class","cancel-note-btn svelte-mn2c16"),f(l,"class","save-note-btn svelte-mn2c16"),f(s,"class","note-actions svelte-mn2c16")},m(b,h){j(b,e,h),Ke(e,n[5]),j(b,t,h),j(b,s,h),c(s,i),c(s,a),c(s,l),u||(d=[G(e,"input",n[14]),G(i,"click",n[15]),G(l,"click",n[8])],u=!0)},p(b,h){h&32&&Ke(e,b[5])},d(b){b&&(_(e),_(t),_(s)),u=!1,je(d)}}}function Op(n){let e,t,s,i,r=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1)+"",a;return{c(){e=y("div"),t=y("span"),s=O(),i=y("span"),a=X(r),this.h()},l(l){e=w(l,"DIV",{class:!0});var o=I(e);t=w(o,"SPAN",{class:!0,style:!0}),I(t).forEach(_),s=P(o),i=w(o,"SPAN",{class:!0});var u=I(i);a=K(u,r),u.forEach(_),o.forEach(_),this.h()},h(){f(t,"class","status-dot svelte-mn2c16"),Be(t,"background-color",Js(n[1].status)),f(i,"class","status-text svelte-mn2c16"),f(e,"class","status-display svelte-mn2c16")},m(l,o){j(l,e,o),c(e,t),c(e,s),c(e,i),c(i,a)},p(l,o){o&2&&Be(t,"background-color",Js(l[1].status)),o&2&&r!==(r=l[1].status.charAt(0).toUpperCase()+l[1].status.slice(1)+"")&&te(a,r)},d(l){l&&_(e)}}}function Rp(n){let e,t,s="Status:",i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T;return{c(){e=y("div"),t=y("label"),t.textContent=s,i=O(),r=y("div"),a=y("button"),l=y("span"),o=X(`\r
								Active`),d=O(),b=y("button"),h=y("span"),p=X(`\r
								Away`),E=O(),C=y("button"),S=y("span"),k=X(`\r
								Busy`),this.h()},l(A){e=w(A,"DIV",{class:!0});var D=I(e);t=w(D,"LABEL",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-138t5u0"&&(t.textContent=s),i=P(D),r=w(D,"DIV",{class:!0});var N=I(r);a=w(N,"BUTTON",{class:!0});var R=I(a);l=w(R,"SPAN",{class:!0,style:!0}),I(l).forEach(_),o=K(R,`\r
								Active`),R.forEach(_),d=P(N),b=w(N,"BUTTON",{class:!0});var M=I(b);h=w(M,"SPAN",{class:!0,style:!0}),I(h).forEach(_),p=K(M,`\r
								Away`),M.forEach(_),E=P(N),C=w(N,"BUTTON",{class:!0});var F=I(C);S=w(F,"SPAN",{class:!0,style:!0}),I(S).forEach(_),k=K(F,`\r
								Busy`),F.forEach(_),N.forEach(_),D.forEach(_),this.h()},h(){f(t,"class","status-label svelte-mn2c16"),f(l,"class","status-dot svelte-mn2c16"),Be(l,"background-color",Js("active")),f(a,"class",u="status-btn "+(n[3]==="active"?"selected":"")+" svelte-mn2c16"),f(h,"class","status-dot svelte-mn2c16"),Be(h,"background-color",Js("away")),f(b,"class",g="status-btn "+(n[3]==="away"?"selected":"")+" svelte-mn2c16"),f(S,"class","status-dot svelte-mn2c16"),Be(S,"background-color",Js("busy")),f(C,"class",v="status-btn "+(n[3]==="busy"?"selected":"")+" svelte-mn2c16"),f(r,"class","status-options svelte-mn2c16"),f(e,"class","status-section svelte-mn2c16")},m(A,D){j(A,e,D),c(e,t),c(e,i),c(e,r),c(r,a),c(a,l),c(a,o),c(r,d),c(r,b),c(b,h),c(b,p),c(r,E),c(r,C),c(C,S),c(C,k),m||(T=[G(a,"click",n[16]),G(b,"click",n[17]),G(C,"click",n[18])],m=!0)},p(A,D){D&8&&u!==(u="status-btn "+(A[3]==="active"?"selected":"")+" svelte-mn2c16")&&f(a,"class",u),D&8&&g!==(g="status-btn "+(A[3]==="away"?"selected":"")+" svelte-mn2c16")&&f(b,"class",g),D&8&&v!==(v="status-btn "+(A[3]==="busy"?"selected":"")+" svelte-mn2c16")&&f(C,"class",v)},d(A){A&&_(e),m=!1,je(T)}}}function Wa(n){let e,t,s="Cancel",i,r,a="Save Changes",l,o;return{c(){e=y("div"),t=y("button"),t.textContent=s,i=O(),r=y("button"),r.textContent=a,this.h()},l(u){e=w(u,"DIV",{class:!0});var d=I(e);t=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-2pqgi7"&&(t.textContent=s),i=P(d),r=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-2yi6cr"&&(r.textContent=a),d.forEach(_),this.h()},h(){f(t,"class","cancel-btn svelte-mn2c16"),f(r,"class","save-btn svelte-mn2c16"),f(e,"class","modal-footer svelte-mn2c16")},m(u,d){j(u,e,d),c(e,t),c(e,i),c(e,r),l||(o=[G(t,"click",n[9]),G(r,"click",n[11])],l=!0)},p:Ne,d(u){u&&_(e),l=!1,je(o)}}}function Mp(n){let e,t=n[0]&&n[1]&&qa(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]&&s[1]?t?t.p(s,i):(t=qa(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function Js(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Fp(n,e,t){let{isOpen:s=!1}=e,{user:i=null}=e,{isOwnProfile:r=!1}=e,a=(i==null?void 0:i.status)||"active";i!=null&&i.profilePicture;let l=null,o=null,u="",d=!1;function b(){if(!i)return;const D=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=D[i.id]||"")}function h(){if(!i)return;const D=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?D[i.id]=u:delete D[i.id],localStorage.setItem("userNotes",JSON.stringify(D)),t(6,d=!1)}function p(){t(0,s=!1),l=null,t(4,o=null),t(6,d=!1)}function g(D){var M;const R=(M=D.target.files)==null?void 0:M[0];if(R&&R.type.startsWith("image/")){l=R;const F=new FileReader;F.onload=z=>{var W;t(4,o=(W=z.target)==null?void 0:W.result)},F.readAsDataURL(R)}}function E(){r&&(l&&o?Sa(a,o):a!==(i==null?void 0:i.status)&&Sa(a,void 0),p())}function C(D){pn.call(this,n,D)}const S=()=>t(6,d=!0);function k(){u=this.value,t(5,u)}const v=()=>{t(6,d=!1),b()},m=()=>t(3,a="active"),T=()=>t(3,a="away"),A=()=>t(3,a="busy");return n.$$set=D=>{"isOpen"in D&&t(0,s=D.isOpen),"user"in D&&t(1,i=D.user),"isOwnProfile"in D&&t(2,r=D.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&2&&i&&(t(3,a=i.status),i.profilePicture,b())},[s,i,r,a,o,u,d,b,h,p,g,E,C,S,k,v,m,T,A]}class Al extends kt{constructor(e){super(),wt(this,e,Fp,Mp,bt,{isOpen:0,user:1,isOwnProfile:2})}}function Ya(n){let e,t,s,i=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,r,a,l,o,u,d,b,h=n[1].isPinned?"ðŸ“Œ":"ðŸ“",p,g,E=n[1].isPinned?"Unpin":"Pin",C,S,k,v,m=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,T,A,D,N=n[8]&&Ka(n),R=n[12]&&n[6]&&Xa(n),M=n[7]&&Za(n),F=n[13]&&Ja(n),z=n[13]&&Qa(n);return{c(){e=y("div"),t=y("div"),s=y("button"),s.innerHTML=i,r=O(),N&&N.c(),a=O(),R&&R.c(),l=O(),M&&M.c(),o=O(),F&&F.c(),u=O(),d=y("button"),b=y("span"),p=X(h),g=O(),C=X(E),S=X(" Message"),k=O(),v=y("button"),v.innerHTML=m,T=O(),z&&z.c(),this.h()},l(W){e=w(W,"DIV",{class:!0});var B=I(e);t=w(B,"DIV",{class:!0,style:!0});var U=I(t);s=w(U,"BUTTON",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1bhlhgs"&&(s.innerHTML=i),r=P(U),N&&N.l(U),a=P(U),R&&R.l(U),l=P(U),M&&M.l(U),o=P(U),F&&F.l(U),u=P(U),d=w(U,"BUTTON",{class:!0});var Y=I(d);b=w(Y,"SPAN",{class:!0});var V=I(b);p=K(V,h),V.forEach(_),g=P(Y),C=K(Y,E),S=K(Y," Message"),Y.forEach(_),k=P(U),v=w(U,"BUTTON",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-pkfnng"&&(v.innerHTML=m),T=P(U),z&&z.l(U),U.forEach(_),B.forEach(_),this.h()},h(){f(s,"class","menu-item svelte-5kwx2s"),f(b,"class","menu-icon svelte-5kwx2s"),f(d,"class","menu-item svelte-5kwx2s"),f(v,"class","menu-item copy svelte-5kwx2s"),f(t,"class","context-menu svelte-5kwx2s"),Be(t,"top",n[10]+"px"),Be(t,"left",n[11]+"px"),f(e,"class","context-menu-overlay svelte-5kwx2s")},m(W,B){j(W,e,B),c(e,t),c(t,s),c(t,r),N&&N.m(t,null),c(t,a),R&&R.m(t,null),c(t,l),M&&M.m(t,null),c(t,o),F&&F.m(t,null),c(t,u),c(t,d),c(d,b),c(b,p),c(d,g),c(d,C),c(d,S),c(t,k),c(t,v),c(t,T),z&&z.m(t,null),n[19](t),A||(D=[G(s,"click",function(){Gn(n[5])&&n[5].apply(this,arguments)}),G(d,"click",function(){Gn(n[4])&&n[4].apply(this,arguments)}),G(v,"click",n[18]),G(t,"click",_t(n[17])),G(e,"click",n[20])],A=!0)},p(W,B){n=W,n[8]?N?N.p(n,B):(N=Ka(n),N.c(),N.m(t,a)):N&&(N.d(1),N=null),n[12]&&n[6]?R?R.p(n,B):(R=Xa(n),R.c(),R.m(t,l)):R&&(R.d(1),R=null),n[7]?M?M.p(n,B):(M=Za(n),M.c(),M.m(t,o)):M&&(M.d(1),M=null),n[13]?F?F.p(n,B):(F=Ja(n),F.c(),F.m(t,u)):F&&(F.d(1),F=null),B&2&&h!==(h=n[1].isPinned?"ðŸ“Œ":"ðŸ“")&&te(p,h),B&2&&E!==(E=n[1].isPinned?"Unpin":"Pin")&&te(C,E),n[13]?z?z.p(n,B):(z=Qa(n),z.c(),z.m(t,null)):z&&(z.d(1),z=null),B&1024&&Be(t,"top",n[10]+"px"),B&2048&&Be(t,"left",n[11]+"px")},d(W){W&&_(e),N&&N.d(),R&&R.d(),M&&M.d(),F&&F.d(),z&&z.d(),n[19](null),A=!1,je(D)}}}function Ka(n){let e,t=`<span class="menu-icon svelte-5kwx2s">ðŸ˜€</span>
					Add Reaction`,s,i;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-134x1bj"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(r,a){j(r,e,a),s||(i=G(e,"click",function(){Gn(n[8])&&n[8].apply(this,arguments)}),s=!0)},p(r,a){n=r},d(r){r&&_(e),s=!1,i()}}}function Xa(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,s,i;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(r,a){j(r,e,a),s||(i=G(e,"click",function(){Gn(n[6])&&n[6].apply(this,arguments)}),s=!0)},p(r,a){n=r},d(r){r&&_(e),s=!1,i()}}}function Za(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,s,i;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(r,a){j(r,e,a),s||(i=G(e,"click",function(){Gn(n[7])&&n[7].apply(this,arguments)}),s=!0)},p(r,a){n=r},d(r){r&&_(e),s=!1,i()}}}function Ja(n){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,s,i;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(r,a){j(r,e,a),s||(i=G(e,"click",function(){Gn(n[2])&&n[2].apply(this,arguments)}),s=!0)},p(r,a){n=r},d(r){r&&_(e),s=!1,i()}}}function Qa(n){let e,t,s,i=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,r,a;return{c(){e=y("div"),t=O(),s=y("button"),s.innerHTML=i,this.h()},l(l){e=w(l,"DIV",{class:!0}),I(e).forEach(_),t=P(l),s=w(l,"BUTTON",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-g8outl"&&(s.innerHTML=i),this.h()},h(){f(e,"class","menu-divider svelte-5kwx2s"),f(s,"class","menu-item delete svelte-5kwx2s")},m(l,o){j(l,e,o),j(l,t,o),j(l,s,o),r||(a=G(s,"click",function(){Gn(n[3])&&n[3].apply(this,arguments)}),r=!0)},p(l,o){n=l},d(l){l&&(_(e),_(t),_(s)),r=!1,a()}}}function Lp(n){let e,t=n[0]&&Ya(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=Ya(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function Bp(n,e,t){let s,i,r,a,l;Me(n,Cn,N=>t(16,l=N));let{message:o}=e,{x:u=0}=e,{y:d=0}=e,{visible:b=!1}=e,{onEdit:h}=e,{onDelete:p}=e,{onPin:g}=e,{onReply:E}=e,{onDownload:C=void 0}=e,{onForward:S=void 0}=e,{onAddReaction:k=void 0}=e,v;function m(N){pn.call(this,n,N)}const T=()=>{navigator.clipboard.writeText(o.text),t(0,b=!1)};function A(N){lt[N?"unshift":"push"](()=>{v=N,t(9,v)})}const D=()=>t(0,b=!1);return n.$$set=N=>{"message"in N&&t(1,o=N.message),"x"in N&&t(14,u=N.x),"y"in N&&t(15,d=N.y),"visible"in N&&t(0,b=N.visible),"onEdit"in N&&t(2,h=N.onEdit),"onDelete"in N&&t(3,p=N.onDelete),"onPin"in N&&t(4,g=N.onPin),"onReply"in N&&t(5,E=N.onReply),"onDownload"in N&&t(6,C=N.onDownload),"onForward"in N&&t(7,S=N.onForward),"onAddReaction"in N&&t(8,k=N.onAddReaction)},n.$$.update=()=>{n.$$.dirty&65538&&t(13,s=o.userId===(l==null?void 0:l.id)),n.$$.dirty&2&&t(12,i=o.type==="file"&&o.fileUrl),n.$$.dirty&16896&&t(11,r=(()=>{if(!v)return u;const N=v.offsetWidth||200,R=window.innerWidth;return u+N>R?u-N:u})()),n.$$.dirty&33280&&t(10,a=(()=>{if(!v)return d;const N=v.offsetHeight||300,R=window.innerHeight;return d+N>R?d-N:d})())},[b,o,h,p,g,E,C,S,k,v,a,r,i,s,u,d,l,m,T,A,D]}class Up extends kt{constructor(e){super(),wt(this,e,Bp,Lp,bt,{message:1,x:14,y:15,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7,onAddReaction:8})}}function $a(n,e,t){const s=n.slice();return s[9]=e[t],s}function eo(n){let e,t,s,i,r="Forward Message",a,l,o="âœ•",u,d,b,h="Choose a channel to forward this message to:",p,g,E,C,S=xe(n[2]),k=[];for(let v=0;v<S.length;v+=1)k[v]=no($a(n,S,v));return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h3"),i.textContent=r,a=O(),l=y("button"),l.textContent=o,u=O(),d=y("div"),b=y("p"),b.textContent=h,p=O(),g=y("div");for(let v=0;v<k.length;v+=1)k[v].c();this.h()},l(v){e=w(v,"DIV",{class:!0});var m=I(e);t=w(m,"DIV",{class:!0});var T=I(t);s=w(T,"DIV",{class:!0});var A=I(s);i=w(A,"H3",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1xq5ns4"&&(i.textContent=r),a=P(A),l=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-19jqbg1"&&(l.textContent=o),A.forEach(_),u=P(T),d=w(T,"DIV",{class:!0});var D=I(d);b=w(D,"P",{class:!0,"data-svelte-h":!0}),J(b)!=="svelte-alvqmp"&&(b.textContent=h),p=P(D),g=w(D,"DIV",{class:!0});var N=I(g);for(let R=0;R<k.length;R+=1)k[R].l(N);N.forEach(_),D.forEach(_),T.forEach(_),m.forEach(_),this.h()},h(){f(i,"class","svelte-70r9o1"),f(l,"class","close-button svelte-70r9o1"),f(s,"class","dialog-header svelte-70r9o1"),f(b,"class","dialog-description svelte-70r9o1"),f(g,"class","channel-list svelte-70r9o1"),f(d,"class","dialog-content svelte-70r9o1"),f(t,"class","dialog svelte-70r9o1"),f(e,"class","dialog-overlay svelte-70r9o1")},m(v,m){j(v,e,m),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,u),c(t,d),c(d,b),c(d,p),c(d,g);for(let T=0;T<k.length;T+=1)k[T]&&k[T].m(g,null);E||(C=[G(l,"click",n[5]),G(t,"click",_t(n[6])),G(e,"click",n[5])],E=!0)},p(v,m){if(m&28){S=xe(v[2]);let T;for(T=0;T<S.length;T+=1){const A=$a(v,S,T);k[T]?k[T].p(A,m):(k[T]=no(A),k[T].c(),k[T].m(g,null))}for(;T<k.length;T+=1)k[T].d(1);k.length=S.length}},d(v){v&&_(e),Is(k,v),E=!1,je(C)}}}function to(n){let e,t,s,i,r=n[9].name+"",a,l,o,u;function d(g,E){return g[9].type==="dm"?jp:Vp}let b=d(n),h=b(n);function p(){return n[7](n[9])}return{c(){e=y("button"),t=y("span"),h.c(),s=O(),i=y("span"),a=X(r),l=O(),this.h()},l(g){e=w(g,"BUTTON",{class:!0});var E=I(e);t=w(E,"SPAN",{class:!0});var C=I(t);h.l(C),C.forEach(_),s=P(E),i=w(E,"SPAN",{class:!0});var S=I(i);a=K(S,r),S.forEach(_),l=P(E),E.forEach(_),this.h()},h(){f(t,"class","channel-icon svelte-70r9o1"),f(i,"class","channel-name svelte-70r9o1"),f(e,"class","channel-item svelte-70r9o1")},m(g,E){j(g,e,E),c(e,t),h.m(t,null),c(e,s),c(e,i),c(i,a),c(e,l),o||(u=G(e,"click",p),o=!0)},p(g,E){n=g,b!==(b=d(n))&&(h.d(1),h=b(n),h&&(h.c(),h.m(t,null))),E&4&&r!==(r=n[9].name+"")&&te(a,r)},d(g){g&&_(e),h.d(),o=!1,u()}}}function Vp(n){let e;return{c(){e=X("#")},l(t){e=K(t,"#")},m(t,s){j(t,e,s)},d(t){t&&_(e)}}}function jp(n){let e;return{c(){e=X("ðŸ’¬")},l(t){e=K(t,"ðŸ’¬")},m(t,s){j(t,e,s)},d(t){t&&_(e)}}}function no(n){let e,t=n[9].id!==n[3]&&to(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,i){s[9].id!==s[3]?t?t.p(s,i):(t=to(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&_(e),t&&t.d(s)}}}function zp(n){let e,t=n[0]&&n[1]&&eo(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]&&s[1]?t?t.p(s,i):(t=eo(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function qp(n,e,t){let s,i,r;Me(n,Ns,h=>t(8,s=h)),Me(n,jt,h=>t(2,i=h)),Me(n,hs,h=>t(3,r=h));let{visible:a=!1}=e,{message:l=null}=e;function o(h){!l||!s||(s.emit("message",{channelId:h,text:l.text,type:l.type,gifUrl:l.gifUrl,fileUrl:l.fileUrl,fileName:l.fileName,fileSize:l.fileSize,files:l.files}),t(0,a=!1))}function u(){t(0,a=!1)}function d(h){pn.call(this,n,h)}const b=h=>o(h.id);return n.$$set=h=>{"visible"in h&&t(0,a=h.visible),"message"in h&&t(1,l=h.message)},[a,l,i,r,o,u,d,b]}class Hp extends kt{constructor(e){super(),wt(this,e,qp,zp,bt,{visible:0,message:1})}}function so(n){let e,t,s,i,r,a,l,o="Ã—",u,d,b,h,p,g,E,C,S,k,v,m,T,A;return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h2"),r=X(n[1]),a=O(),l=y("button"),l.textContent=o,u=O(),d=y("div"),b=y("p"),h=X(n[2]),p=O(),g=y("div"),E=y("button"),C=X(n[4]),S=O(),k=y("button"),v=X(n[3]),this.h()},l(D){e=w(D,"DIV",{class:!0});var N=I(e);t=w(N,"DIV",{class:!0});var R=I(t);s=w(R,"DIV",{class:!0});var M=I(s);i=w(M,"H2",{class:!0});var F=I(i);r=K(F,n[1]),F.forEach(_),a=P(M),l=w(M,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-y9ayml"&&(l.textContent=o),M.forEach(_),u=P(R),d=w(R,"DIV",{class:!0});var z=I(d);b=w(z,"P",{class:!0});var W=I(b);h=K(W,n[2]),W.forEach(_),z.forEach(_),p=P(R),g=w(R,"DIV",{class:!0});var B=I(g);E=w(B,"BUTTON",{class:!0});var U=I(E);C=K(U,n[4]),U.forEach(_),S=P(B),k=w(B,"BUTTON",{class:!0});var Y=I(k);v=K(Y,n[3]),Y.forEach(_),B.forEach(_),R.forEach(_),N.forEach(_),this.h()},h(){f(i,"class","svelte-19vmxhi"),f(l,"class","close-btn svelte-19vmxhi"),f(s,"class","modal-header svelte-19vmxhi"),f(b,"class","svelte-19vmxhi"),f(d,"class","modal-body svelte-19vmxhi"),f(E,"class","cancel-btn svelte-19vmxhi"),f(k,"class",m="confirm-btn "+n[5]+" svelte-19vmxhi"),f(g,"class","modal-footer svelte-19vmxhi"),f(t,"class","modal-content svelte-19vmxhi"),f(e,"class","modal-overlay svelte-19vmxhi")},m(D,N){j(D,e,N),c(e,t),c(t,s),c(s,i),c(i,r),c(s,a),c(s,l),c(t,u),c(t,d),c(d,b),c(b,h),c(t,p),c(t,g),c(g,E),c(E,C),c(g,S),c(g,k),c(k,v),T||(A=[G(l,"click",n[7]),G(E,"click",n[7]),G(k,"click",n[6]),G(t,"click",_t(n[10])),G(e,"click",n[7])],T=!0)},p(D,N){N&2&&te(r,D[1]),N&4&&te(h,D[2]),N&16&&te(C,D[4]),N&8&&te(v,D[3]),N&32&&m!==(m="confirm-btn "+D[5]+" svelte-19vmxhi")&&f(k,"class",m)},d(D){D&&_(e),T=!1,je(A)}}}function xp(n){let e,t=n[0]&&so(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=so(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function Gp(n,e,t){let{isOpen:s=!1}=e,{title:i="Confirm Action"}=e,{message:r="Are you sure you want to proceed?"}=e,{confirmText:a="Confirm"}=e,{cancelText:l="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:d=()=>{}}=e;function b(){u()}function h(){d()}function p(E){E.key==="Escape"&&s&&h()}Tn(()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}));function g(E){pn.call(this,n,E)}return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"title"in E&&t(1,i=E.title),"message"in E&&t(2,r=E.message),"confirmText"in E&&t(3,a=E.confirmText),"cancelText"in E&&t(4,l=E.cancelText),"variant"in E&&t(5,o=E.variant),"onConfirm"in E&&t(8,u=E.onConfirm),"onCancel"in E&&t(9,d=E.onCancel)},[s,i,r,a,l,o,b,h,u,d,g]}class fs extends kt{constructor(e){super(),wt(this,e,Gp,xp,bt,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:Wp}=cl;function io(n,e,t){const s=n.slice();s[83]=e[t];const i=s[22](s[83].user);s[84]=i;const r=s[41](s[83].replyTo);return s[85]=r,s}function ro(n,e,t){const s=n.slice();s[88]=e[t][0],s[89]=e[t][1];const i=s[39](s[88]);return s[90]=i,s}function Vr(n){var s;const e=n.slice(),t=e[89].includes(((s=e[20])==null?void 0:s.id)||"");return e[93]=t,e}function lo(n,e,t){const s=n.slice();return s[94]=e[t],s[96]=t,s}function ao(n){let e,t="<span>New Messages</span>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){f(e,"class","new-messages-divider svelte-17pfmrq")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function Yp(n){let e,t=n[83].user.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-17pfmrq"),Be(e,"background-color",n[23](n[83].user))},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&1&&t!==(t=i[83].user.charAt(0).toUpperCase()+"")&&te(s,t),r[0]&1&&Be(e,"background-color",i[23](i[83].user))},d(i){i&&_(e)}}}function Kp(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[84].profilePicture)||f(e,"src",t),f(e,"alt",s=n[83].user),f(e,"class","avatar svelte-17pfmrq")},m(i,r){j(i,e,r)},p(i,r){r[0]&1&&!Re(e.src,t=i[84].profilePicture)&&f(e,"src",t),r[0]&1&&s!==(s=i[83].user)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Xp(n){let e,t=n[83].user+"",s;return{c(){e=y("span"),s=X(t),this.h()},l(i){e=w(i,"SPAN",{class:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","username svelte-17pfmrq")},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&1&&t!==(t=i[83].user+"")&&te(s,t)},d(i){i&&_(e)}}}function Zp(n){let e,t=n[83].user+"",s,i,r;function a(){return n[52](n[84])}return{c(){e=y("button"),s=X(t),this.h()},l(l){e=w(l,"BUTTON",{class:!0});var o=I(e);s=K(o,t),o.forEach(_),this.h()},h(){f(e,"class","username svelte-17pfmrq")},m(l,o){j(l,e,o),c(e,s),i||(r=G(e,"click",a),i=!0)},p(l,o){n=l,o[0]&1&&t!==(t=n[83].user+"")&&te(s,t)},d(l){l&&_(e),i=!1,r()}}}function oo(n){let e,t="ðŸ“Œ";return{c(){e=y("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){f(e,"class","pin-badge svelte-17pfmrq"),f(e,"title","Pinned message")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function co(n){let e,t="(edited)";return{c(){e=y("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){f(e,"class","edited-badge svelte-17pfmrq"),f(e,"title","Edited")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function uo(n){let e,t,s,i,r,a=n[85].user+"",l,o,u,d=n[85].text.substring(0,100)+"",b,h=n[85].text.length>100?"...":"",p,g,E;function C(){return n[53](n[85])}return{c(){e=y("div"),t=y("div"),s=O(),i=y("div"),r=y("span"),l=X(a),o=O(),u=y("span"),b=X(d),p=X(h),this.h()},l(S){e=w(S,"DIV",{class:!0});var k=I(e);t=w(k,"DIV",{class:!0}),I(t).forEach(_),s=P(k),i=w(k,"DIV",{class:!0});var v=I(i);r=w(v,"SPAN",{class:!0});var m=I(r);l=K(m,a),m.forEach(_),o=P(v),u=w(v,"SPAN",{class:!0});var T=I(u);b=K(T,d),p=K(T,h),T.forEach(_),v.forEach(_),k.forEach(_),this.h()},h(){f(t,"class","reply-line svelte-17pfmrq"),f(r,"class","reply-username svelte-17pfmrq"),f(u,"class","reply-text svelte-17pfmrq"),f(i,"class","reply-content svelte-17pfmrq"),f(e,"class","reply-preview svelte-17pfmrq")},m(S,k){j(S,e,k),c(e,t),c(e,s),c(e,i),c(i,r),c(r,l),c(i,o),c(i,u),c(u,b),c(u,p),g||(E=G(e,"click",C),g=!0)},p(S,k){n=S,k[0]&1&&a!==(a=n[85].user+"")&&te(l,a),k[0]&1&&d!==(d=n[85].text.substring(0,100)+"")&&te(b,d),k[0]&1&&h!==(h=n[85].text.length>100?"...":"")&&te(p,h)},d(S){S&&_(e),g=!1,E()}}}function Jp(n){let e;function t(r,a){return r[83].type==="gif"&&r[83].gifUrl?ng:r[83].type==="emoji"&&r[83].emojiUrl?tg:r[83].type==="file"&&(r[83].fileUrl||r[83].files)?eg:$p}let s=t(n),i=s(n);return{c(){e=y("div"),i.c(),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=I(e);i.l(a),a.forEach(_),this.h()},h(){f(e,"class","message-content")},m(r,a){j(r,e,a),i.m(e,null)},p(r,a){s===(s=t(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&_(e),i.d()}}}function Qp(n){let e,t,s,i,r,a="Cancel",l,o,u="Save",d,b;function h(...g){return n[55](n[83],...g)}function p(){return n[56](n[83])}return{c(){e=y("div"),t=y("textarea"),s=O(),i=y("div"),r=y("button"),r.textContent=a,l=O(),o=y("button"),o.textContent=u,this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"TEXTAREA",{class:!0,rows:!0}),I(t).forEach(_),s=P(E),i=w(E,"DIV",{class:!0});var C=I(i);r=w(C,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-1czerce"&&(r.textContent=a),l=P(C),o=w(C,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-w3glyi"&&(o.textContent=u),C.forEach(_),E.forEach(_),this.h()},h(){f(t,"class","edit-textarea svelte-17pfmrq"),f(t,"rows","3"),f(r,"class","edit-cancel svelte-17pfmrq"),f(o,"class","edit-save svelte-17pfmrq"),f(i,"class","edit-actions svelte-17pfmrq"),f(e,"class","edit-mode svelte-17pfmrq")},m(g,E){j(g,e,E),c(e,t),Ke(t,n[10]),c(e,s),c(e,i),c(i,r),c(i,l),c(i,o),d||(b=[G(t,"input",n[54]),G(t,"keydown",h),G(r,"click",n[28]),G(o,"click",p)],d=!0)},p(g,E){n=g,E[0]&1024&&Ke(t,n[10])},d(g){g&&_(e),d=!1,je(b)}}}function $p(n){let e,t,s=Yi(n[83].text)+"";return{c(){e=y("div"),t=new Jc(!1),this.h()},l(i){e=w(i,"DIV",{class:!0});var r=I(e);t=Zc(r,!1),r.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-17pfmrq")},m(i,r){j(i,e,r),t.m(s,e)},p(i,r){r[0]&1&&s!==(s=Yi(i[83].text)+"")&&t.p(s)},d(i){i&&_(e)}}}function eg(n){let e,t;function s(l,o){if(l[83].files&&l[83].files.length>1)return ig;if(l[83].fileUrl)return sg}let i=s(n),r=i&&i(n),a=n[83].text&&(n[83].files?n[83].text!==`Shared ${n[83].files.length} files`:n[83].text!==`Shared: ${n[83].fileName}`)&&mo(n);return{c(){r&&r.c(),e=O(),a&&a.c(),t=Le()},l(l){r&&r.l(l),e=P(l),a&&a.l(l),t=Le()},m(l,o){r&&r.m(l,o),j(l,e,o),a&&a.m(l,o),j(l,t,o)},p(l,o){i===(i=s(l))&&r?r.p(l,o):(r&&r.d(1),r=i&&i(l),r&&(r.c(),r.m(e.parentNode,e))),l[83].text&&(l[83].files?l[83].text!==`Shared ${l[83].files.length} files`:l[83].text!==`Shared: ${l[83].fileName}`)?a?a.p(l,o):(a=mo(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(l){l&&(_(e),_(t)),r&&r.d(l),a&&a.d(l)}}}function tg(n){let e,t,s,i,r;return{c(){e=y("img"),this.h()},l(a){e=w(a,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Re(e.src,t=n[83].emojiUrl)||f(e,"src",t),f(e,"alt",s=n[83].emojiName||"emoji"),f(e,"class",i="emoji-large "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(e,"data-spoiler",r=n[83].isSpoiler?"true":"false")},m(a,l){j(a,e,l)},p(a,l){l[0]&1&&!Re(e.src,t=a[83].emojiUrl)&&f(e,"src",t),l[0]&1&&s!==(s=a[83].emojiName||"emoji")&&f(e,"alt",s),l[0]&1&&i!==(i="emoji-large "+(a[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(e,"class",i),l[0]&1&&r!==(r=a[83].isSpoiler?"true":"false")&&f(e,"data-spoiler",r)},d(a){a&&_(e)}}}function ng(n){let e,t,s,i;return{c(){e=y("img"),this.h()},l(r){e=w(r,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Re(e.src,t=n[83].gifUrl)||f(e,"src",t),f(e,"alt","GIF"),f(e,"class",s="gif "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(e,"data-spoiler",i=n[83].isSpoiler?"true":"false")},m(r,a){j(r,e,a)},p(r,a){a[0]&1&&!Re(e.src,t=r[83].gifUrl)&&f(e,"src",t),a[0]&1&&s!==(s="gif "+(r[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(e,"class",s),a[0]&1&&i!==(i=r[83].isSpoiler?"true":"false")&&f(e,"data-spoiler",i)},d(r){r&&_(e)}}}function sg(n){let e,t,s,i;function r(o,u){return u[0]&1&&(e=null),u[0]&1&&(t=null),u[0]&1&&(s=null),e==null&&(e=!!Il(o[83].fileName)),e?og:(t==null&&(t=!!ju(o[83].fileName)),t?ag:(s==null&&(s=!!zu(o[83].fileName)),s?lg:rg))}let a=r(n,[-1,-1,-1,-1]),l=a(n);return{c(){l.c(),i=Le()},l(o){l.l(o),i=Le()},m(o,u){l.m(o,u),j(o,i,u)},p(o,u){a===(a=r(o,u))&&l?l.p(o,u):(l.d(1),l=a(o),l&&(l.c(),l.m(i.parentNode,i)))},d(o){o&&_(i),l.d(o)}}}function ig(n){let e,t=xe(n[83].files.slice(0,4)),s=[];for(let i=0;i<t.length;i+=1)s[i]=go(lo(n,t,i));return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var r=I(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(_),this.h()},h(){f(e,"class","files-gallery svelte-17pfmrq"),ve(e,"has-more",n[83].files.length>4)},m(i,r){j(i,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(i,r){if(r[0]&1|r[1]&69632){t=xe(i[83].files.slice(0,4));let a;for(a=0;a<t.length;a+=1){const l=lo(i,t,a);s[a]?s[a].p(l,r):(s[a]=go(l),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}r[0]&1&&ve(e,"has-more",i[83].files.length>4)},d(i){i&&_(e),Is(s,i)}}}function rg(n){let e,t,s=Mn(n[83].fileName)+"",i,r,a,l,o=n[83].fileName+"",u,d,b,h=Rn(n[83].fileSize)+"",p,g,E;return{c(){e=y("a"),t=y("span"),i=X(s),r=O(),a=y("div"),l=y("span"),u=X(o),d=O(),b=y("span"),p=X(h),this.h()},l(C){e=w(C,"A",{href:!0,download:!0,class:!0});var S=I(e);t=w(S,"SPAN",{class:!0});var k=I(t);i=K(k,s),k.forEach(_),r=P(S),a=w(S,"DIV",{class:!0});var v=I(a);l=w(v,"SPAN",{class:!0});var m=I(l);u=K(m,o),m.forEach(_),d=P(v),b=w(v,"SPAN",{class:!0});var T=I(b);p=K(T,h),T.forEach(_),v.forEach(_),S.forEach(_),this.h()},h(){f(t,"class","file-icon svelte-17pfmrq"),f(l,"class","file-name svelte-17pfmrq"),f(b,"class","file-size svelte-17pfmrq"),f(a,"class","file-info svelte-17pfmrq"),f(e,"href",g=ut(n[83].fileUrl)),f(e,"download",E=n[83].fileName),f(e,"class","file-attachment svelte-17pfmrq")},m(C,S){j(C,e,S),c(e,t),c(t,i),c(e,r),c(e,a),c(a,l),c(l,u),c(a,d),c(a,b),c(b,p)},p(C,S){S[0]&1&&s!==(s=Mn(C[83].fileName)+"")&&te(i,s),S[0]&1&&o!==(o=C[83].fileName+"")&&te(u,o),S[0]&1&&h!==(h=Rn(C[83].fileSize)+"")&&te(p,h),S[0]&1&&g!==(g=ut(C[83].fileUrl))&&f(e,"href",g),S[0]&1&&E!==(E=C[83].fileName)&&f(e,"download",E)},d(C){C&&_(e)}}}function lg(n){let e,t,s,i,r,a,l,o,u,d=Mn(n[83].fileName)+"",b,h,p=n[83].fileName+"",g,E,C,S,k=Rn(n[83].fileSize)+"",v,m;return{c(){e=y("div"),t=y("audio"),s=y("source"),a=X(`\r
									Your browser does not support the audio element.`),l=O(),o=y("div"),u=y("span"),b=X(d),h=O(),g=X(p),E=O(),C=y("span"),S=X("("),v=X(k),m=X(")"),this.h()},l(T){e=w(T,"DIV",{class:!0});var A=I(e);t=w(A,"AUDIO",{class:!0});var D=I(t);s=w(D,"SOURCE",{src:!0,type:!0}),a=K(D,`\r
									Your browser does not support the audio element.`),D.forEach(_),l=P(A),o=w(A,"DIV",{class:!0});var N=I(o);u=w(N,"SPAN",{class:!0});var R=I(u);b=K(R,d),R.forEach(_),h=P(N),g=K(N,p),E=P(N),C=w(N,"SPAN",{class:!0});var M=I(C);S=K(M,"("),v=K(M,k),m=K(M,")"),M.forEach(_),N.forEach(_),A.forEach(_),this.h()},h(){var T;Re(s.src,i=ut(n[83].fileUrl))||f(s,"src",i),f(s,"type",r="audio/"+((T=n[83].fileName)==null?void 0:T.split(".").pop())),t.controls=!0,f(t,"class","inline-audio svelte-17pfmrq"),f(u,"class","file-icon svelte-17pfmrq"),f(C,"class","file-size svelte-17pfmrq"),f(o,"class","audio-file-info svelte-17pfmrq"),f(e,"class","audio-container svelte-17pfmrq")},m(T,A){j(T,e,A),c(e,t),c(t,s),c(t,a),c(e,l),c(e,o),c(o,u),c(u,b),c(o,h),c(o,g),c(o,E),c(o,C),c(C,S),c(C,v),c(C,m)},p(T,A){var D;A[0]&1&&!Re(s.src,i=ut(T[83].fileUrl))&&f(s,"src",i),A[0]&1&&r!==(r="audio/"+((D=T[83].fileName)==null?void 0:D.split(".").pop()))&&f(s,"type",r),A[0]&1&&d!==(d=Mn(T[83].fileName)+"")&&te(b,d),A[0]&1&&p!==(p=T[83].fileName+"")&&te(g,p),A[0]&1&&k!==(k=Rn(T[83].fileSize)+"")&&te(v,k)},d(T){T&&_(e)}}}function ag(n){let e,t,s,i,r,a,l,o,u,d,b,h=Mn(n[83].fileName)+"",p,g,E=n[83].fileName+"",C,S,k,v,m=Rn(n[83].fileSize)+"",T,A,D,N,R,M;function F(...W){return n[61](n[83],...W)}function z(...W){return n[62](n[83],...W)}return{c(){e=y("div"),t=y("video"),s=y("source"),a=X(`\r
									Your browser does not support the video tag.`),u=O(),d=y("a"),b=y("span"),p=X(h),g=O(),C=X(E),S=O(),k=y("span"),v=X("("),T=X(m),A=X(")"),this.h()},l(W){e=w(W,"DIV",{class:!0});var B=I(e);t=w(B,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var U=I(t);s=w(U,"SOURCE",{src:!0,type:!0}),a=K(U,`\r
									Your browser does not support the video tag.`),U.forEach(_),u=P(B),d=w(B,"A",{href:!0,download:!0,class:!0});var Y=I(d);b=w(Y,"SPAN",{class:!0});var V=I(b);p=K(V,h),V.forEach(_),g=P(Y),C=K(Y,E),S=P(Y),k=w(Y,"SPAN",{class:!0});var L=I(k);v=K(L,"("),T=K(L,m),A=K(L,")"),L.forEach(_),Y.forEach(_),B.forEach(_),this.h()},h(){var W;Re(s.src,i=ut(n[83].fileUrl))||f(s,"src",i),f(s,"type",r="video/"+((W=n[83].fileName)==null?void 0:W.split(".").pop())),t.controls=!0,f(t,"class",l="inline-video "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(t,"data-spoiler",o=n[83].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(b,"class","file-icon svelte-17pfmrq"),f(k,"class","file-size svelte-17pfmrq"),f(d,"href",D=ut(n[83].fileUrl)),f(d,"download",N=n[83].fileName),f(d,"class","video-download-link svelte-17pfmrq"),f(e,"class","video-container svelte-17pfmrq")},m(W,B){j(W,e,B),c(e,t),c(t,s),c(t,a),c(e,u),c(e,d),c(d,b),c(b,p),c(d,g),c(d,C),c(d,S),c(d,k),c(k,v),c(k,T),c(k,A),R||(M=[G(t,"click",F),G(t,"contextmenu",z)],R=!0)},p(W,B){var U;n=W,B[0]&1&&!Re(s.src,i=ut(n[83].fileUrl))&&f(s,"src",i),B[0]&1&&r!==(r="video/"+((U=n[83].fileName)==null?void 0:U.split(".").pop()))&&f(s,"type",r),B[0]&1&&l!==(l="inline-video "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(t,"class",l),B[0]&1&&o!==(o=n[83].isSpoiler?"true":"false")&&f(t,"data-spoiler",o),B[0]&1&&h!==(h=Mn(n[83].fileName)+"")&&te(p,h),B[0]&1&&E!==(E=n[83].fileName+"")&&te(C,E),B[0]&1&&m!==(m=Rn(n[83].fileSize)+"")&&te(T,m),B[0]&1&&D!==(D=ut(n[83].fileUrl))&&f(d,"href",D),B[0]&1&&N!==(N=n[83].fileName)&&f(d,"download",N)},d(W){W&&_(e),R=!1,je(M)}}}function og(n){let e,t,s,i,r,a,l,o,u,d=Mn(n[83].fileName)+"",b,h,p=n[83].fileName+"",g,E,C,S,k=Rn(n[83].fileSize)+"",v,m,T,A,D,N;function R(...F){return n[59](n[83],...F)}function M(...F){return n[60](n[83],...F)}return{c(){e=y("div"),t=y("img"),l=O(),o=y("a"),u=y("span"),b=X(d),h=O(),g=X(p),E=O(),C=y("span"),S=X("("),v=X(k),m=X(")"),this.h()},l(F){e=w(F,"DIV",{class:!0});var z=I(e);t=w(z,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=P(z),o=w(z,"A",{href:!0,download:!0,class:!0});var W=I(o);u=w(W,"SPAN",{class:!0});var B=I(u);b=K(B,d),B.forEach(_),h=P(W),g=K(W,p),E=P(W),C=w(W,"SPAN",{class:!0});var U=I(C);S=K(U,"("),v=K(U,k),m=K(U,")"),U.forEach(_),W.forEach(_),z.forEach(_),this.h()},h(){Re(t.src,s=ut(n[83].fileUrl))||f(t,"src",s),f(t,"alt",i=n[83].fileName),f(t,"class",r="inline-image "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(t,"data-spoiler",a=n[83].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(u,"class","file-icon svelte-17pfmrq"),f(C,"class","file-size svelte-17pfmrq"),f(o,"href",T=ut(n[83].fileUrl)),f(o,"download",A=n[83].fileName),f(o,"class","image-download-link svelte-17pfmrq"),f(e,"class","image-container svelte-17pfmrq")},m(F,z){j(F,e,z),c(e,t),c(e,l),c(e,o),c(o,u),c(u,b),c(o,h),c(o,g),c(o,E),c(o,C),c(C,S),c(C,v),c(C,m),D||(N=[G(t,"click",R),G(t,"contextmenu",M)],D=!0)},p(F,z){n=F,z[0]&1&&!Re(t.src,s=ut(n[83].fileUrl))&&f(t,"src",s),z[0]&1&&i!==(i=n[83].fileName)&&f(t,"alt",i),z[0]&1&&r!==(r="inline-image "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(t,"class",r),z[0]&1&&a!==(a=n[83].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),z[0]&1&&d!==(d=Mn(n[83].fileName)+"")&&te(b,d),z[0]&1&&p!==(p=n[83].fileName+"")&&te(g,p),z[0]&1&&k!==(k=Rn(n[83].fileSize)+"")&&te(v,k),z[0]&1&&T!==(T=ut(n[83].fileUrl))&&f(o,"href",T),z[0]&1&&A!==(A=n[83].fileName)&&f(o,"download",A)},d(F){F&&_(e),D=!1,je(N)}}}function cg(n){let e,t,s=Mn(n[94].fileName)+"",i,r,a,l,o=n[94].fileName+"",u,d,b,h,p=Rn(n[94].fileSize)+"",g,E,C,S,k;return{c(){e=y("a"),t=y("div"),i=X(s),r=O(),a=y("div"),l=y("span"),u=X(o),d=O(),b=y("span"),h=X("("),g=X(p),E=X(")"),C=O(),this.h()},l(v){e=w(v,"A",{href:!0,download:!0,class:!0});var m=I(e);t=w(m,"DIV",{class:!0});var T=I(t);i=K(T,s),T.forEach(_),r=P(m),a=w(m,"DIV",{class:!0});var A=I(a);l=w(A,"SPAN",{class:!0});var D=I(l);u=K(D,o),D.forEach(_),d=P(A),b=w(A,"SPAN",{class:!0});var N=I(b);h=K(N,"("),g=K(N,p),E=K(N,")"),N.forEach(_),A.forEach(_),C=P(m),m.forEach(_),this.h()},h(){f(t,"class","gallery-file-icon-large svelte-17pfmrq"),f(l,"class","file-name-truncate svelte-17pfmrq"),f(b,"class","file-size-small svelte-17pfmrq"),f(a,"class","gallery-file-overlay svelte-17pfmrq"),f(e,"href",S=ut(n[94].fileUrl)),f(e,"download",k=n[94].fileName),f(e,"class","gallery-file-item file-link svelte-17pfmrq")},m(v,m){j(v,e,m),c(e,t),c(t,i),c(e,r),c(e,a),c(a,l),c(l,u),c(a,d),c(a,b),c(b,h),c(b,g),c(b,E),c(e,C)},p(v,m){m[0]&1&&s!==(s=Mn(v[94].fileName)+"")&&te(i,s),m[0]&1&&o!==(o=v[94].fileName+"")&&te(u,o),m[0]&1&&p!==(p=Rn(v[94].fileSize)+"")&&te(g,p),m[0]&1&&S!==(S=ut(v[94].fileUrl))&&f(e,"href",S),m[0]&1&&k!==(k=v[94].fileName)&&f(e,"download",k)},d(v){v&&_(e)}}}function ug(n){let e,t,s,i,r,a,l,o,u=n[94].fileName+"",d,b,h,p=n[96]===3&&n[83].files.length>4&&fo(n);return{c(){e=y("div"),t=y("audio"),s=y("source"),a=X(`\r
												Your browser does not support the audio element.`),l=O(),o=y("div"),d=X(u),b=O(),p&&p.c(),h=O(),this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"AUDIO",{class:!0});var C=I(t);s=w(C,"SOURCE",{src:!0,type:!0}),a=K(C,`\r
												Your browser does not support the audio element.`),C.forEach(_),l=P(E),o=w(E,"DIV",{class:!0});var S=I(o);d=K(S,u),S.forEach(_),b=P(E),p&&p.l(E),h=P(E),E.forEach(_),this.h()},h(){var g;Re(s.src,i=ut(n[94].fileUrl))||f(s,"src",i),f(s,"type",r="audio/"+((g=n[94].fileName)==null?void 0:g.split(".").pop())),t.controls=!0,f(t,"class","gallery-file-audio svelte-17pfmrq"),f(o,"class","audio-file-name svelte-17pfmrq"),f(e,"class","gallery-file-item audio-item svelte-17pfmrq"),ve(e,"last-item",n[96]===3&&n[83].files.length>4)},m(g,E){j(g,e,E),c(e,t),c(t,s),c(t,a),c(e,l),c(e,o),c(o,d),c(e,b),p&&p.m(e,null),c(e,h)},p(g,E){var C;E[0]&1&&!Re(s.src,i=ut(g[94].fileUrl))&&f(s,"src",i),E[0]&1&&r!==(r="audio/"+((C=g[94].fileName)==null?void 0:C.split(".").pop()))&&f(s,"type",r),E[0]&1&&u!==(u=g[94].fileName+"")&&te(d,u),g[96]===3&&g[83].files.length>4?p?p.p(g,E):(p=fo(g),p.c(),p.m(e,h)):p&&(p.d(1),p=null),E[0]&1&&ve(e,"last-item",g[96]===3&&g[83].files.length>4)},d(g){g&&_(e),p&&p.d()}}}function fg(n){let e,t,s,i,r,a,l,o,u,d;function b(...p){return n[58](n[94],...p)}let h=n[96]===3&&n[83].files.length>4&&ho(n);return{c(){e=y("div"),t=y("video"),s=y("source"),l=O(),h&&h.c(),o=O(),this.h()},l(p){e=w(p,"DIV",{class:!0});var g=I(e);t=w(g,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var E=I(t);s=w(E,"SOURCE",{src:!0}),E.forEach(_),l=P(g),h&&h.l(g),o=P(g),g.forEach(_),this.h()},h(){Re(s.src,i=ut(n[94].fileUrl))||f(s,"src",i),f(t,"class",r="gallery-file-video "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(t,"data-spoiler",a=n[83].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-17pfmrq"),ve(e,"last-item",n[96]===3&&n[83].files.length>4)},m(p,g){j(p,e,g),c(e,t),c(t,s),c(e,l),h&&h.m(e,null),c(e,o),u||(d=G(t,"click",b),u=!0)},p(p,g){n=p,g[0]&1&&!Re(s.src,i=ut(n[94].fileUrl))&&f(s,"src",i),g[0]&1&&r!==(r="gallery-file-video "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(t,"class",r),g[0]&1&&a!==(a=n[83].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),n[96]===3&&n[83].files.length>4?h?h.p(n,g):(h=ho(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&ve(e,"last-item",n[96]===3&&n[83].files.length>4)},d(p){p&&_(e),h&&h.d(),u=!1,d()}}}function dg(n){let e,t,s,i,r,a,l,o,u,d;function b(...p){return n[57](n[83],n[94],...p)}let h=n[96]===3&&n[83].files.length>4&&po(n);return{c(){e=y("div"),t=y("img"),l=O(),h&&h.c(),o=O(),this.h()},l(p){e=w(p,"DIV",{class:!0});var g=I(e);t=w(g,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=P(g),h&&h.l(g),o=P(g),g.forEach(_),this.h()},h(){Re(t.src,s=ut(n[94].fileUrl))||f(t,"src",s),f(t,"alt",i=n[94].fileName),f(t,"class",r="gallery-file-image "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq"),f(t,"data-spoiler",a=n[83].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-17pfmrq"),ve(e,"last-item",n[96]===3&&n[83].files.length>4)},m(p,g){j(p,e,g),c(e,t),c(e,l),h&&h.m(e,null),c(e,o),u||(d=G(t,"click",b),u=!0)},p(p,g){n=p,g[0]&1&&!Re(t.src,s=ut(n[94].fileUrl))&&f(t,"src",s),g[0]&1&&i!==(i=n[94].fileName)&&f(t,"alt",i),g[0]&1&&r!==(r="gallery-file-image "+(n[83].isSpoiler?"spoiler":"")+" svelte-17pfmrq")&&f(t,"class",r),g[0]&1&&a!==(a=n[83].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),n[96]===3&&n[83].files.length>4?h?h.p(n,g):(h=po(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&ve(e,"last-item",n[96]===3&&n[83].files.length>4)},d(p){p&&_(e),h&&h.d(),u=!1,d()}}}function fo(n){let e,t,s,i=n[83].files.length-4+"",r;return{c(){e=y("div"),t=y("span"),s=X("+"),r=X(i),this.h()},l(a){e=w(a,"DIV",{class:!0});var l=I(e);t=w(l,"SPAN",{class:!0});var o=I(t);s=K(o,"+"),r=K(o,i),o.forEach(_),l.forEach(_),this.h()},h(){f(t,"class","more-count svelte-17pfmrq"),f(e,"class","more-overlay svelte-17pfmrq")},m(a,l){j(a,e,l),c(e,t),c(t,s),c(t,r)},p(a,l){l[0]&1&&i!==(i=a[83].files.length-4+"")&&te(r,i)},d(a){a&&_(e)}}}function ho(n){let e,t,s,i=n[83].files.length-4+"",r;return{c(){e=y("div"),t=y("span"),s=X("+"),r=X(i),this.h()},l(a){e=w(a,"DIV",{class:!0});var l=I(e);t=w(l,"SPAN",{class:!0});var o=I(t);s=K(o,"+"),r=K(o,i),o.forEach(_),l.forEach(_),this.h()},h(){f(t,"class","more-count svelte-17pfmrq"),f(e,"class","more-overlay svelte-17pfmrq")},m(a,l){j(a,e,l),c(e,t),c(t,s),c(t,r)},p(a,l){l[0]&1&&i!==(i=a[83].files.length-4+"")&&te(r,i)},d(a){a&&_(e)}}}function po(n){let e,t,s,i=n[83].files.length-4+"",r;return{c(){e=y("div"),t=y("span"),s=X("+"),r=X(i),this.h()},l(a){e=w(a,"DIV",{class:!0});var l=I(e);t=w(l,"SPAN",{class:!0});var o=I(t);s=K(o,"+"),r=K(o,i),o.forEach(_),l.forEach(_),this.h()},h(){f(t,"class","more-count svelte-17pfmrq"),f(e,"class","more-overlay svelte-17pfmrq")},m(a,l){j(a,e,l),c(e,t),c(t,s),c(t,r)},p(a,l){l[0]&1&&i!==(i=a[83].files.length-4+"")&&te(r,i)},d(a){a&&_(e)}}}function go(n){let e,t,s,i;function r(o,u){return u[0]&1&&(e=null),u[0]&1&&(t=null),u[0]&1&&(s=null),e==null&&(e=!!Il(o[94].fileName)),e?dg:(t==null&&(t=!!ju(o[94].fileName)),t?fg:(s==null&&(s=!!zu(o[94].fileName)),s?ug:cg))}let a=r(n,[-1,-1,-1,-1]),l=a(n);return{c(){l.c(),i=Le()},l(o){l.l(o),i=Le()},m(o,u){l.m(o,u),j(o,i,u)},p(o,u){a===(a=r(o,u))&&l?l.p(o,u):(l.d(1),l=a(o),l&&(l.c(),l.m(i.parentNode,i)))},d(o){o&&_(i),l.d(o)}}}function mo(n){let e,t,s=Yi(n[83].text)+"";return{c(){e=y("div"),t=new Jc(!1),this.h()},l(i){e=w(i,"DIV",{class:!0});var r=I(e);t=Zc(r,!1),r.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-17pfmrq")},m(i,r){j(i,e,r),t.m(s,e)},p(i,r){r[0]&1&&s!==(s=Yi(i[83].text)+"")&&t.p(s)},d(i){i&&_(e)}}}function hg(n){let e,t,s="+",i,r;function a(...l){return n[66](n[83],...l)}return{c(){e=y("div"),t=y("button"),t.textContent=s,this.h()},l(l){e=w(l,"DIV",{class:!0});var o=I(e);t=w(o,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(t)!=="svelte-56u96j"&&(t.textContent=s),o.forEach(_),this.h()},h(){f(t,"class","add-reaction-btn svelte-17pfmrq"),f(t,"title","Add reaction"),f(e,"class","reactions-hover svelte-17pfmrq")},m(l,o){j(l,e,o),c(e,t),i||(r=G(t,"click",a),i=!0)},p(l,o){n=l},d(l){l&&_(e),i=!1,r()}}}function pg(n){let e,t,s,i="+",r,a,l=xe(Object.entries(n[83].reactions)),o=[];for(let d=0;d<l.length;d+=1)o[d]=_o(ro(n,l,d));function u(...d){return n[65](n[83],...d)}return{c(){e=y("div");for(let d=0;d<o.length;d+=1)o[d].c();t=O(),s=y("button"),s.textContent=i,this.h()},l(d){e=w(d,"DIV",{class:!0});var b=I(e);for(let h=0;h<o.length;h+=1)o[h].l(b);t=P(b),s=w(b,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(s)!=="svelte-56u96j"&&(s.textContent=i),b.forEach(_),this.h()},h(){f(s,"class","add-reaction-btn svelte-17pfmrq"),f(s,"title","Add reaction"),f(e,"class","reactions svelte-17pfmrq")},m(d,b){j(d,e,b);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);c(e,t),c(e,s),r||(a=G(s,"click",u),r=!0)},p(d,b){if(n=d,b[0]&3145729|b[1]&384){l=xe(Object.entries(n[83].reactions));let h;for(h=0;h<l.length;h+=1){const p=ro(n,l,h);o[h]?o[h].p(p,b):(o[h]=_o(p),o[h].c(),o[h].m(e,t))}for(;h<o.length;h+=1)o[h].d(1);o.length=l.length}},d(d){d&&_(e),Is(o,d),r=!1,a()}}}function vo(n){let e,t,s,i,r,a,l=n[89].length+"",o,u,d,b;function h(){return n[64](n[83],n[88])}return{c(){e=y("button"),t=y("img"),r=O(),a=y("span"),o=X(l),this.h()},l(p){e=w(p,"BUTTON",{class:!0,title:!0});var g=I(e);t=w(g,"IMG",{src:!0,alt:!0,class:!0}),r=P(g),a=w(g,"SPAN",{class:!0});var E=I(a);o=K(E,l),E.forEach(_),g.forEach(_),this.h()},h(){Re(t.src,s=n[90].url)||f(t,"src",s),f(t,"alt",i=n[90].name),f(t,"class","reaction-emoji svelte-17pfmrq"),f(a,"class","reaction-count svelte-17pfmrq"),f(e,"class","reaction-btn svelte-17pfmrq"),f(e,"title",u=n[89].map(n[63]).filter(Boolean).join(", ")),ve(e,"user-reacted",n[93])},m(p,g){j(p,e,g),c(e,t),c(e,r),c(e,a),c(a,o),d||(b=G(e,"click",h),d=!0)},p(p,g){n=p,g[0]&1&&!Re(t.src,s=n[90].url)&&f(t,"src",s),g[0]&1&&i!==(i=n[90].name)&&f(t,"alt",i),g[0]&1&&l!==(l=n[89].length+"")&&te(o,l),g[0]&2097153&&u!==(u=n[89].map(n[63]).filter(Boolean).join(", "))&&f(e,"title",u),g[0]&1048577&&ve(e,"user-reacted",n[93])},d(p){p&&_(e),d=!1,b()}}}function _o(n){let e,t=n[90]&&n[89].length>0&&vo(Vr(n));return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,i){s[90]&&s[89].length>0?t?t.p(Vr(s),i):(t=vo(Vr(s)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&_(e),t&&t.d(s)}}}function bo(n,e){let t,s,i,r,a,l,o,u,d,b,h,p,g=To(e[83].timestamp)+"",E,C,S,k,v,m,T,A,D,N=e[1]===e[83].id&&ao();function R(ae,ce){var re;return(re=ae[84])!=null&&re.profilePicture?Kp:Yp}let M=R(e),F=M(e);function z(ae,ce){return ae[84]?Zp:Xp}let W=z(e),B=W(e),U=e[83].isPinned&&oo(),Y=e[83].isEdited&&co(),V=e[85]&&uo(e);function L(ae,ce){return ae[9]===ae[83].id?Qp:Jp}let H=L(e),q=H(e);function Z(ae,ce){return ce[0]&1&&(v=null),v==null&&(v=!!(ae[83].reactions&&Object.keys(ae[83].reactions).length>0)),v?pg:hg}let $=Z(e,[-1,-1,-1,-1]),Q=$(e);function oe(...ae){return e[67](e[83],...ae)}return{key:n,first:null,c(){t=Le(),N&&N.c(),s=O(),i=y("div"),r=y("div"),F.c(),a=O(),l=y("div"),o=y("div"),u=y("div"),B.c(),d=O(),U&&U.c(),b=O(),Y&&Y.c(),h=O(),p=y("span"),E=X(g),C=O(),V&&V.c(),S=O(),q.c(),k=O(),Q.c(),this.h()},l(ae){t=Le(),N&&N.l(ae),s=P(ae),i=w(ae,"DIV",{id:!0,class:!0});var ce=I(i);r=w(ce,"DIV",{class:!0});var re=I(r);F.l(re),re.forEach(_),a=P(ce),l=w(ce,"DIV",{class:!0});var he=I(l);o=w(he,"DIV",{class:!0});var Ce=I(o);u=w(Ce,"DIV",{class:!0});var se=I(u);B.l(se),d=P(se),U&&U.l(se),b=P(se),Y&&Y.l(se),se.forEach(_),h=P(Ce),p=w(Ce,"SPAN",{class:!0});var pe=I(p);E=K(pe,g),pe.forEach(_),Ce.forEach(_),C=P(he),V&&V.l(he),S=P(he),q.l(he),k=P(he),Q.l(he),he.forEach(_),ce.forEach(_),this.h()},h(){f(r,"class","message-avatar svelte-17pfmrq"),f(u,"class","header-left svelte-17pfmrq"),f(p,"class","timestamp svelte-17pfmrq"),f(o,"class","message-header svelte-17pfmrq"),f(l,"class","message-body svelte-17pfmrq"),f(i,"id",m="message-"+e[83].id),f(i,"class",T="message "+(e[83].isPinned?"pinned":"")+" "+(e[15]===e[83].id?"highlighted":"")+" svelte-17pfmrq"),this.first=t},m(ae,ce){j(ae,t,ce),N&&N.m(ae,ce),j(ae,s,ce),j(ae,i,ce),c(i,r),F.m(r,null),c(i,a),c(i,l),c(l,o),c(o,u),B.m(u,null),c(u,d),U&&U.m(u,null),c(u,b),Y&&Y.m(u,null),c(o,h),c(o,p),c(p,E),c(l,C),V&&V.m(l,null),c(l,S),q.m(l,null),c(l,k),Q.m(l,null),A||(D=G(i,"contextmenu",oe),A=!0)},p(ae,ce){e=ae,e[1]===e[83].id?N||(N=ao(),N.c(),N.m(s.parentNode,s)):N&&(N.d(1),N=null),M===(M=R(e))&&F?F.p(e,ce):(F.d(1),F=M(e),F&&(F.c(),F.m(r,null))),W===(W=z(e))&&B?B.p(e,ce):(B.d(1),B=W(e),B&&(B.c(),B.m(u,d))),e[83].isPinned?U||(U=oo(),U.c(),U.m(u,b)):U&&(U.d(1),U=null),e[83].isEdited?Y||(Y=co(),Y.c(),Y.m(u,null)):Y&&(Y.d(1),Y=null),ce[0]&1&&g!==(g=To(e[83].timestamp)+"")&&te(E,g),e[85]?V?V.p(e,ce):(V=uo(e),V.c(),V.m(l,S)):V&&(V.d(1),V=null),H===(H=L(e))&&q?q.p(e,ce):(q.d(1),q=H(e),q&&(q.c(),q.m(l,k))),$===($=Z(e,ce))&&Q?Q.p(e,ce):(Q.d(1),Q=$(e),Q&&(Q.c(),Q.m(l,null))),ce[0]&1&&m!==(m="message-"+e[83].id)&&f(i,"id",m),ce[0]&32769&&T!==(T="message "+(e[83].isPinned?"pinned":"")+" "+(e[15]===e[83].id?"highlighted":"")+" svelte-17pfmrq")&&f(i,"class",T)},d(ae){ae&&(_(t),_(s),_(i)),N&&N.d(ae),F.d(),B.d(),U&&U.d(),Y&&Y.d(),V&&V.d(),q.d(),Q.d(),A=!1,D()}}}function ko(n){let e,t;return e=new Vu({}),e.$on("select",n[37]),e.$on("close",n[70]),{c(){it(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,i){nt(e,s,i),t=!0},p:Ne,i(s){t||(Te(e.$$.fragment,s),t=!0)},o(s){De(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function wo(n){let e,t,s;function i(a){n[71](a)}let r={message:n[8],x:n[6],y:n[7],onEdit:n[26],onDelete:n[29],onPin:n[31],onReply:n[32],onDownload:n[33],onForward:n[34],onAddReaction:n[35]};return n[5]!==void 0&&(r.visible=n[5]),e=new Up({props:r}),lt.push(()=>tn(e,"visible",i)),{c(){it(e.$$.fragment)},l(a){st(e.$$.fragment,a)},m(a,l){nt(e,a,l),s=!0},p(a,l){const o={};l[0]&256&&(o.message=a[8]),l[0]&64&&(o.x=a[6]),l[0]&128&&(o.y=a[7]),!t&&l[0]&32&&(t=!0,o.visible=a[5],en(()=>t=!1)),e.$set(o)},i(a){s||(Te(e.$$.fragment,a),s=!0)},o(a){De(e.$$.fragment,a),s=!1},d(a){tt(e,a)}}}function yo(n){let e,t,s,i,r,a,l="âœ•",o,u,d,b,h,p=n[18].length>1&&Eo(n);return{c(){e=y("div"),t=y("img"),i=O(),p&&p.c(),r=O(),a=y("button"),a.textContent=l,o=O(),u=y("a"),d=X("Open in new tab"),this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"IMG",{src:!0,alt:!0,class:!0}),i=P(E),p&&p.l(E),r=P(E),a=w(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-cyanf1"&&(a.textContent=l),o=P(E),u=w(E,"A",{href:!0,target:!0,rel:!0,class:!0});var C=I(u);d=K(C,"Open in new tab"),C.forEach(_),E.forEach(_),this.h()},h(){Re(t.src,s=n[16])||f(t,"src",s),f(t,"alt","Enlarged"),f(t,"class","enlarged-image svelte-17pfmrq"),f(a,"class","close-modal svelte-17pfmrq"),f(u,"href",n[16]),f(u,"target","_blank"),f(u,"rel","noopener noreferrer"),f(u,"class","open-new-tab svelte-17pfmrq"),f(e,"class","image-modal svelte-17pfmrq")},m(g,E){j(g,e,E),c(e,t),c(e,i),p&&p.m(e,null),c(e,r),c(e,a),c(e,o),c(e,u),c(u,d),b||(h=[G(t,"click",_t(n[51])),G(a,"click",n[44]),G(e,"click",n[44])],b=!0)},p(g,E){E[0]&65536&&!Re(t.src,s=g[16])&&f(t,"src",s),g[18].length>1?p?p.p(g,E):(p=Eo(g),p.c(),p.m(e,r)):p&&(p.d(1),p=null),E[0]&65536&&f(u,"href",g[16])},d(g){g&&_(e),p&&p.d(),b=!1,je(h)}}}function Eo(n){let e,t="â€¹",s,i,r="â€º",a,l,o=n[19]+1+"",u,d,b=n[18].length+"",h,p,g;return{c(){e=y("button"),e.textContent=t,s=O(),i=y("button"),i.textContent=r,a=O(),l=y("div"),u=X(o),d=X(" / "),h=X(b),this.h()},l(E){e=w(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-c4iawu"&&(e.textContent=t),s=P(E),i=w(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(i)!=="svelte-1gn22tr"&&(i.textContent=r),a=P(E),l=w(E,"DIV",{class:!0});var C=I(l);u=K(C,o),d=K(C," / "),h=K(C,b),C.forEach(_),this.h()},h(){f(e,"class","nav-arrow nav-prev svelte-17pfmrq"),f(e,"title","Previous (â†)"),f(i,"class","nav-arrow nav-next svelte-17pfmrq"),f(i,"title","Next (â†’)"),f(l,"class","image-counter svelte-17pfmrq")},m(E,C){j(E,e,C),j(E,s,C),j(E,i,C),j(E,a,C),j(E,l,C),c(l,u),c(l,d),c(l,h),p||(g=[G(e,"click",_t(n[75])),G(i,"click",_t(n[76]))],p=!0)},p(E,C){C[0]&524288&&o!==(o=E[19]+1+"")&&te(u,o),C[0]&262144&&b!==(b=E[18].length+"")&&te(h,b)},d(E){E&&(_(e),_(s),_(i),_(a),_(l)),p=!1,je(g)}}}function Co(n){let e,t,s,i,r,a,l,o="âœ•",u,d,b,h,p;return{c(){e=y("div"),t=y("video"),s=y("source"),r=X(`\r
			Your browser does not support the video tag.`),a=O(),l=y("button"),l.textContent=o,u=O(),d=y("a"),b=X("Open in new tab"),this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"VIDEO",{class:!0});var C=I(t);s=w(C,"SOURCE",{src:!0}),r=K(C,`\r
			Your browser does not support the video tag.`),C.forEach(_),a=P(E),l=w(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-yc21b"&&(l.textContent=o),u=P(E),d=w(E,"A",{href:!0,target:!0,rel:!0,class:!0});var S=I(d);b=K(S,"Open in new tab"),S.forEach(_),E.forEach(_),this.h()},h(){Re(s.src,i=n[17])||f(s,"src",i),t.controls=!0,t.autoplay=!0,f(t,"class","enlarged-video svelte-17pfmrq"),f(l,"class","close-modal svelte-17pfmrq"),f(d,"href",n[17]),f(d,"target","_blank"),f(d,"rel","noopener noreferrer"),f(d,"class","open-new-tab svelte-17pfmrq"),f(e,"class","video-modal svelte-17pfmrq")},m(g,E){j(g,e,E),c(e,t),c(t,s),c(t,r),c(e,a),c(e,l),c(e,u),c(e,d),c(d,b),h||(p=[G(t,"click",_t(n[50])),G(l,"click",n[48]),G(e,"click",n[48])],h=!0)},p(g,E){E[0]&131072&&!Re(s.src,i=g[17])&&f(s,"src",i),E[0]&131072&&f(d,"href",g[17])},d(g){g&&_(e),h=!1,je(p)}}}function gg(n){let e=[],t=new Map,s,i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T=xe(n[0]);const A=V=>V[83].id;for(let V=0;V<T.length;V+=1){let L=io(n,T,V),H=A(L);t.set(H,e[V]=bo(H,L))}function D(V){n[68](V)}function N(V){n[69](V)}let R={isOwnProfile:n[4]};n[2]!==void 0&&(R.isOpen=n[2]),n[3]!==void 0&&(R.user=n[3]),i=new Al({props:R}),lt.push(()=>tn(i,"isOpen",D)),lt.push(()=>tn(i,"user",N));let M=n[12]&&ko(n),F=n[8]&&wo(n);function z(V){n[72](V)}function W(V){n[73](V)}let B={};n[13]!==void 0&&(B.visible=n[13]),n[14]!==void 0&&(B.message=n[14]),d=new Hp({props:B}),lt.push(()=>tn(d,"visible",z)),lt.push(()=>tn(d,"message",W)),g=new fs({props:{isOpen:n[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:n[30],onCancel:n[74]}});let U=n[16]&&yo(n),Y=n[17]&&Co(n);return{c(){for(let V=0;V<e.length;V+=1)e[V].c();s=O(),it(i.$$.fragment),l=O(),M&&M.c(),o=O(),F&&F.c(),u=O(),it(d.$$.fragment),p=O(),it(g.$$.fragment),E=O(),U&&U.c(),C=O(),Y&&Y.c(),S=Le()},l(V){for(let L=0;L<e.length;L+=1)e[L].l(V);s=P(V),st(i.$$.fragment,V),l=P(V),M&&M.l(V),o=P(V),F&&F.l(V),u=P(V),st(d.$$.fragment,V),p=P(V),st(g.$$.fragment,V),E=P(V),U&&U.l(V),C=P(V),Y&&Y.l(V),S=Le()},m(V,L){for(let H=0;H<e.length;H+=1)e[H]&&e[H].m(V,L);j(V,s,L),nt(i,V,L),j(V,l,L),M&&M.m(V,L),j(V,o,L),F&&F.m(V,L),j(V,u,L),nt(d,V,L),j(V,p,L),nt(g,V,L),j(V,E,L),U&&U.m(V,L),j(V,C,L),Y&&Y.m(V,L),j(V,S,L),k=!0,v||(m=G(Wp,"keydown",n[46]),v=!0)},p(V,L){L[0]&468747779|L[1]&73632&&(T=xe(V[0]),e=sn(e,L,A,1,V,T,t,s.parentNode,nn,bo,s,io));const H={};L[0]&16&&(H.isOwnProfile=V[4]),!r&&L[0]&4&&(r=!0,H.isOpen=V[2],en(()=>r=!1)),!a&&L[0]&8&&(a=!0,H.user=V[3],en(()=>a=!1)),i.$set(H),V[12]?M?(M.p(V,L),L[0]&4096&&Te(M,1)):(M=ko(V),M.c(),Te(M,1),M.m(o.parentNode,o)):M&&(gn(),De(M,1,1,()=>{M=null}),mn()),V[8]?F?(F.p(V,L),L[0]&256&&Te(F,1)):(F=wo(V),F.c(),Te(F,1),F.m(u.parentNode,u)):F&&(gn(),De(F,1,1,()=>{F=null}),mn());const q={};!b&&L[0]&8192&&(b=!0,q.visible=V[13],en(()=>b=!1)),!h&&L[0]&16384&&(h=!0,q.message=V[14],en(()=>h=!1)),d.$set(q);const Z={};L[0]&2048&&(Z.isOpen=V[11]),L[0]&2048&&(Z.onCancel=V[74]),g.$set(Z),V[16]?U?U.p(V,L):(U=yo(V),U.c(),U.m(C.parentNode,C)):U&&(U.d(1),U=null),V[17]?Y?Y.p(V,L):(Y=Co(V),Y.c(),Y.m(S.parentNode,S)):Y&&(Y.d(1),Y=null)},i(V){k||(Te(i.$$.fragment,V),Te(M),Te(F),Te(d.$$.fragment,V),Te(g.$$.fragment,V),k=!0)},o(V){De(i.$$.fragment,V),De(M),De(F),De(d.$$.fragment,V),De(g.$$.fragment,V),k=!1},d(V){V&&(_(s),_(l),_(o),_(u),_(p),_(E),_(C),_(S));for(let L=0;L<e.length;L+=1)e[L].d(V);tt(i,V),M&&M.d(V),F&&F.d(V),tt(d,V),tt(g,V),U&&U.d(V),Y&&Y.d(V),v=!1,m()}}}function To(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function Rn(n){return n?n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB":""}function ut(n){return n?n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:")?n:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${n}`:""}function Mn(n){if(!n)return"ðŸ“Ž";const e=n.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function Il(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function ju(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function zu(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp3","wav","ogg","flac","m4a","aac","wma"].includes(e)}function So(){document.querySelectorAll('.spoiler[data-spoiler="true"]').forEach(e=>{e.hasAttribute("data-listener-attached")||(e.addEventListener("click",function(){this.classList.toggle("revealed")}),e.setAttribute("data-listener-attached","true"))})}function mg(n,e,t){let s,i,r,a;Me(n,es,ee=>t(81,s=ee)),Me(n,hs,ee=>t(82,i=ee)),Me(n,Cn,ee=>t(20,r=ee)),Me(n,rn,ee=>t(21,a=ee));let{messages:l}=e,{onReply:o=()=>{}}=e,{firstUnreadMessageId:u=null}=e,d=!1,b=null,h=!1,p=!1,g=0,E=0,C=null,S=null,k="",v=!1,m=null,T=!1,A=null;function D(ee){return a.find(Ee=>Ee.username===ee)}function N(ee){const Ee=D(ee);return(Ee==null?void 0:Ee.color)||"var(--status-offline)"}function R(ee){t(3,b=ee),t(4,h=ee.id===(r==null?void 0:r.id)),t(2,d=!0)}function M(ee,Ee){ee.preventDefault(),t(8,C=Ee),t(6,g=ee.clientX),t(7,E=ee.clientY),t(5,p=!0)}function F(){C&&(t(9,S=C.id),t(10,k=C.text),t(5,p=!1))}function z(ee){k.trim()&&Ru(i,ee,k.trim()),t(9,S=null),t(10,k="")}function W(){t(9,S=null),t(10,k="")}function B(){C&&(m=C,t(11,v=!0),t(5,p=!1))}function U(){m&&Oh(i,m.id),t(11,v=!1)}function Y(){C&&(Sl(i,C.id),t(5,p=!1))}function V(){C&&(o(C),t(5,p=!1))}async function L(){if(!(!(C!=null&&C.fileUrl)||!(C!=null&&C.fileName))){try{const ee=ut(C.fileUrl),Ot=await(await fetch(ee)).blob(),Rt=window.URL.createObjectURL(Ot),pt=document.createElement("a");pt.href=Rt,pt.download=C.fileName,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),window.URL.revokeObjectURL(Rt)}catch(ee){console.error("Download failed:",ee)}t(5,p=!1)}}let H=!1,q=null;function Z(){C&&(t(14,q=C),t(13,H=!0),t(5,p=!1))}function $(){C&&(A=C.id,t(12,T=!0),t(5,p=!1))}function Q(ee,Ee){ee.stopPropagation(),A=Ee,ee.clientX,ee.clientY,t(12,T=!0)}function oe(ee){A&&(Lr(i,A,ee.detail.emoji.id),t(12,T=!1),A=null)}function ae(ee,Ee){var pt;const Ot=l.find(gs=>gs.id===ee);if(!Ot||!Ot.reactions){Lr(i,ee,Ee);return}((pt=Ot.reactions[Ee])==null?void 0:pt.includes((r==null?void 0:r.id)||""))?Bh(i,ee,Ee):Lr(i,ee,Ee)}function ce(ee){return s.find(Ee=>Ee.id===ee)}function re(ee,Ee){ee.preventDefault(),t(8,C=Ee),t(6,g=ee.clientX),t(7,E=ee.clientY),t(5,p=!0)}function he(ee){if(ee)return l.find(Ee=>Ee.id===ee)}let Ce=null;function se(ee){const Ee=document.getElementById(`message-${ee}`);Ee&&(Ee.scrollIntoView({behavior:"smooth",block:"center"}),t(15,Ce=ee),setTimeout(()=>{t(15,Ce=null)},2e3))}let pe=null,Ge=null,we=[],Pe=0;function ye(ee,Ee=[]){t(16,pe=ee),t(18,we=Ee.length>0?Ee:[ee]),t(19,Pe=we.indexOf(ee))}function ne(){t(16,pe=null),t(18,we=[]),t(19,Pe=0)}function me(ee){we.length!==0&&(ee==="prev"?t(19,Pe=(Pe-1+we.length)%we.length):t(19,Pe=(Pe+1)%we.length),t(16,pe=we[Pe]))}function Ie(ee){pe&&(ee.key==="ArrowLeft"?(ee.preventDefault(),me("prev")):ee.key==="ArrowRight"?(ee.preventDefault(),me("next")):ee.key==="Escape"&&(ee.preventDefault(),ne()))}function Ae(ee){t(17,Ge=ee)}function le(){t(17,Ge=null)}Tn(So),df(So);function Fe(ee){pn.call(this,n,ee)}function Ve(ee){pn.call(this,n,ee)}const ze=ee=>R(ee),qe=ee=>se(ee.id);function ie(){k=this.value,t(10,k)}const _e=(ee,Ee)=>{Ee.key==="Enter"&&!Ee.shiftKey?(Ee.preventDefault(),z(ee.id)):Ee.key==="Escape"&&(Ee.preventDefault(),W())},be=ee=>z(ee.id),de=(ee,Ee,Ot)=>{if(Ot.button===0){const Rt=ee.files.filter(pt=>Il(pt.fileName)).map(pt=>ut(pt.fileUrl));ye(ut(Ee.fileUrl),Rt)}},He=(ee,Ee)=>Ee.button===0&&Ae(ut(ee.fileUrl)),$e=(ee,Ee)=>Ee.button===0&&ee.fileUrl&&ye(ut(ee.fileUrl)),Se=(ee,Ee)=>re(Ee,ee),Ue=(ee,Ee)=>{Ee.button===0&&ee.fileUrl&&Ae(ut(ee.fileUrl))},ft=(ee,Ee)=>re(Ee,ee),rt=ee=>{var Ee;return(Ee=a.find(Ot=>Ot.id===ee))==null?void 0:Ee.username},ot=(ee,Ee)=>ae(ee.id,Ee),Nt=(ee,Ee)=>Q(Ee,ee.id),ct=(ee,Ee)=>Q(Ee,ee.id),an=(ee,Ee)=>M(Ee,ee);function Pt(ee){d=ee,t(2,d)}function Tt(ee){b=ee,t(3,b)}const zt=()=>t(12,T=!1);function on(ee){p=ee,t(5,p)}function mt(ee){H=ee,t(13,H)}function Lt(ee){q=ee,t(14,q)}const Ln=()=>t(11,v=!1),ht=()=>me("prev"),St=()=>me("next");return n.$$set=ee=>{"messages"in ee&&t(0,l=ee.messages),"onReply"in ee&&t(49,o=ee.onReply),"firstUnreadMessageId"in ee&&t(1,u=ee.firstUnreadMessageId)},[l,u,d,b,h,p,g,E,C,S,k,v,T,H,q,Ce,pe,Ge,we,Pe,r,a,D,N,R,M,F,z,W,B,U,Y,V,L,Z,$,Q,oe,ae,ce,re,he,se,ye,ne,me,Ie,Ae,le,o,Fe,Ve,ze,qe,ie,_e,be,de,He,$e,Se,Ue,ft,rt,ot,Nt,ct,an,Pt,Tt,zt,on,mt,Lt,Ln,ht,St]}class qu extends kt{constructor(e){super(),wt(this,e,mg,gg,bt,{messages:0,onReply:49,firstUnreadMessageId:1},null,[-1,-1,-1,-1])}}function Ao(n,e,t){const s=n.slice();return s[6]=e[t],s}function Io(n){let e,t,s,i="ðŸ“Œ",r,a,l="Pinned Messages",o,u,d,b=n[0].length+"",h,p,g,E,C=[],S=new Map,k=xe(n[0]);const v=m=>m[6].id;for(let m=0;m<k.length;m+=1){let T=Ao(n,k,m),A=v(T);S.set(A,C[m]=Do(A,T))}return{c(){e=y("div"),t=y("div"),s=y("span"),s.textContent=i,r=O(),a=y("span"),a.textContent=l,o=O(),u=y("span"),d=X("("),h=X(b),p=X(")"),g=O(),E=y("div");for(let m=0;m<C.length;m+=1)C[m].c();this.h()},l(m){e=w(m,"DIV",{class:!0});var T=I(e);t=w(T,"DIV",{class:!0});var A=I(t);s=w(A,"SPAN",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-73xtmc"&&(s.textContent=i),r=P(A),a=w(A,"SPAN",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-123zvdk"&&(a.textContent=l),o=P(A),u=w(A,"SPAN",{class:!0});var D=I(u);d=K(D,"("),h=K(D,b),p=K(D,")"),D.forEach(_),A.forEach(_),g=P(T),E=w(T,"DIV",{class:!0});var N=I(E);for(let R=0;R<C.length;R+=1)C[R].l(N);N.forEach(_),T.forEach(_),this.h()},h(){f(s,"class","pinned-icon svelte-d1025n"),f(a,"class","pinned-title svelte-d1025n"),f(u,"class","pinned-count svelte-d1025n"),f(t,"class","pinned-header svelte-d1025n"),f(E,"class","pinned-messages svelte-d1025n"),f(e,"class","pinned-container svelte-d1025n")},m(m,T){j(m,e,T),c(e,t),c(t,s),c(t,r),c(t,a),c(t,o),c(t,u),c(u,d),c(u,h),c(u,p),c(e,g),c(e,E);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(E,null)},p(m,T){T&1&&b!==(b=m[0].length+"")&&te(h,b),T&7&&(k=xe(m[0]),C=sn(C,T,v,1,m,k,S,E,nn,Do,null,Ao))},d(m){m&&_(e);for(let T=0;T<C.length;T+=1)C[T].d()}}}function Do(n,e){let t,s,i,r=e[6].user+"",a,l,o,u=e[6].text.substring(0,100)+"",d,b=e[6].text.length>100?"...":"",h,p,g,E=No(e[6].timestamp)+"",C,S,k,v="Ã—",m,T,A;function D(){return e[3](e[6])}return{key:n,first:null,c(){t=y("div"),s=y("div"),i=y("span"),a=X(r),l=O(),o=y("span"),d=X(u),h=X(b),p=O(),g=y("span"),C=X(E),S=O(),k=y("button"),k.textContent=v,m=O(),this.h()},l(N){t=w(N,"DIV",{class:!0});var R=I(t);s=w(R,"DIV",{class:!0});var M=I(s);i=w(M,"SPAN",{class:!0,style:!0});var F=I(i);a=K(F,r),F.forEach(_),l=P(M),o=w(M,"SPAN",{class:!0});var z=I(o);d=K(z,u),h=K(z,b),z.forEach(_),p=P(M),g=w(M,"SPAN",{class:!0});var W=I(g);C=K(W,E),W.forEach(_),M.forEach(_),S=P(R),k=w(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(k)!=="svelte-87szfn"&&(k.textContent=v),m=P(R),R.forEach(_),this.h()},h(){f(i,"class","pinned-user svelte-d1025n"),Be(i,"color",e[1](e[6].user)),f(o,"class","pinned-text svelte-d1025n"),f(g,"class","pinned-time svelte-d1025n"),f(s,"class","pinned-message-content svelte-d1025n"),f(k,"class","unpin-btn svelte-d1025n"),f(k,"title","Unpin message"),f(t,"class","pinned-message svelte-d1025n"),this.first=t},m(N,R){j(N,t,R),c(t,s),c(s,i),c(i,a),c(s,l),c(s,o),c(o,d),c(o,h),c(s,p),c(s,g),c(g,C),c(t,S),c(t,k),c(t,m),T||(A=G(k,"click",D),T=!0)},p(N,R){e=N,R&1&&r!==(r=e[6].user+"")&&te(a,r),R&1&&Be(i,"color",e[1](e[6].user)),R&1&&u!==(u=e[6].text.substring(0,100)+"")&&te(d,u),R&1&&b!==(b=e[6].text.length>100?"...":"")&&te(h,b),R&1&&E!==(E=No(e[6].timestamp)+"")&&te(C,E)},d(N){N&&_(t),T=!1,A()}}}function vg(n){let e,t=n[0].length>0&&Io(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0].length>0?t?t.p(s,i):(t=Io(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function No(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function _g(n,e,t){let s;Me(n,rn,u=>t(4,s=u));let{pinnedMessages:i}=e;function r(u){return s.find(d=>d.username===u)}function a(u){const d=r(u);return(d==null?void 0:d.color)||"var(--status-offline)"}function l(u){Sl(u)}const o=u=>l(u.id);return n.$$set=u=>{"pinnedMessages"in u&&t(0,i=u.pinnedMessages)},[i,a,l,o]}class bg extends kt{constructor(e){super(),wt(this,e,_g,vg,bt,{pinnedMessages:0})}}function Po(n,e,t){const s=n.slice();return s[58]=e[t].file,s[59]=e[t].preview,s[61]=t,s}function Oo(n){let e,t='<div class="drag-overlay-content svelte-1rw63eu"><div class="drag-icon svelte-1rw63eu">ðŸ“</div> <div class="drag-text svelte-1rw63eu">Drop files here to upload</div></div>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){f(e,"class","drag-overlay svelte-1rw63eu")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function kg(n){let e,t,s,i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T,A="ðŸ“Ž",D,N,R,M,F="GIF",z,W,B="ðŸ˜€",U,Y,V,L,H,q,Z;a=new bg({props:{pinnedMessages:n[17]}}),o=new qu({props:{messages:n[0],onReply:n[26],firstUnreadMessageId:n[18]}});let $=n[19].length>0&&Ro(n),Q=n[3]&&Mo(n),oe=n[4]&&Fo(n);function ae(se,pe){if(se[8])return Eg;if(se[6])return yg}let ce=ae(n),re=ce&&ce(n),he=n[11].length>0&&!n[10]&&Lo(n),Ce=n[10]&&Uo(n);return{c(){e=y("div"),t=y("h2"),s=X(n[16]),i=O(),r=y("div"),it(a.$$.fragment),l=O(),it(o.$$.fragment),u=O(),$&&$.c(),d=O(),Q&&Q.c(),b=O(),oe&&oe.c(),h=O(),re&&re.c(),p=O(),g=y("div"),he&&he.c(),E=O(),Ce&&Ce.c(),C=O(),S=y("input"),k=O(),v=y("div"),m=y("div"),T=y("button"),T.textContent=A,D=O(),N=y("textarea"),R=O(),M=y("button"),M.textContent=F,z=O(),W=y("button"),W.textContent=B,U=O(),Y=y("button"),V=X("Send"),this.h()},l(se){e=w(se,"DIV",{class:!0});var pe=I(e);t=w(pe,"H2",{class:!0});var Ge=I(t);s=K(Ge,n[16]),Ge.forEach(_),pe.forEach(_),i=P(se),r=w(se,"DIV",{class:!0});var we=I(r);st(a.$$.fragment,we),l=P(we),st(o.$$.fragment,we),u=P(we),$&&$.l(we),we.forEach(_),d=P(se),Q&&Q.l(se),b=P(se),oe&&oe.l(se),h=P(se),re&&re.l(se),p=P(se),g=w(se,"DIV",{class:!0});var Pe=I(g);he&&he.l(Pe),E=P(Pe),Ce&&Ce.l(Pe),C=P(Pe),S=w(Pe,"INPUT",{type:!0,style:!0}),k=P(Pe),v=w(Pe,"DIV",{class:!0});var ye=I(v);m=w(ye,"DIV",{class:!0});var ne=I(m);T=w(ne,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(T)!=="svelte-1fiys3t"&&(T.textContent=A),ne.forEach(_),D=P(ye),N=w(ye,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),I(N).forEach(_),R=P(ye),M=w(ye,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(M)!=="svelte-1ty10q8"&&(M.textContent=F),z=P(ye),W=w(ye,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(W)!=="svelte-11le0jp"&&(W.textContent=B),U=P(ye),Y=w(ye,"BUTTON",{class:!0});var me=I(Y);V=K(me,"Send"),me.forEach(_),ye.forEach(_),Pe.forEach(_),this.h()},h(){f(t,"class","svelte-1rw63eu"),f(e,"class","chat-header svelte-1rw63eu"),f(r,"class","messages svelte-1rw63eu"),f(S,"type","file"),S.multiple=!0,Be(S,"display","none"),f(T,"class","input-icon-button svelte-1rw63eu"),f(T,"title","Attach file"),f(m,"class","input-buttons-left svelte-1rw63eu"),f(N,"placeholder","Type a message... (Shift+Enter for new line)"),f(N,"maxlength","2000"),f(N,"rows","1"),f(N,"class","svelte-1rw63eu"),f(M,"class","input-icon-button svelte-1rw63eu"),f(M,"title","Add GIF"),f(W,"class","input-icon-button svelte-1rw63eu"),f(W,"title","Add emoji"),f(Y,"class","send-button svelte-1rw63eu"),Y.disabled=L=!n[1].trim(),f(v,"class","input-container svelte-1rw63eu"),f(g,"class","input-wrapper svelte-1rw63eu")},m(se,pe){j(se,e,pe),c(e,t),c(t,s),j(se,i,pe),j(se,r,pe),nt(a,r,null),c(r,l),nt(o,r,null),c(r,u),$&&$.m(r,null),n[39](r),j(se,d,pe),Q&&Q.m(se,pe),j(se,b,pe),oe&&oe.m(se,pe),j(se,h,pe),re&&re.m(se,pe),j(se,p,pe),j(se,g,pe),he&&he.m(g,null),c(g,E),Ce&&Ce.m(g,null),c(g,C),c(g,S),n[44](S),c(g,k),c(g,v),c(v,m),c(m,T),c(v,D),c(v,N),n[46](N),Ke(N,n[1]),c(v,R),c(v,M),c(v,z),c(v,W),n[49](W),c(v,U),c(v,Y),c(Y,V),H=!0,q||(Z=[G(S,"change",n[28]),G(T,"click",n[45]),G(N,"input",n[47]),G(N,"input",n[20]),G(N,"keydown",n[21]),G(M,"click",n[48]),G(W,"click",_t(n[50])),G(Y,"click",n[22])],q=!0)},p(se,pe){(!H||pe[0]&65536)&&te(s,se[16]);const Ge={};pe[0]&131072&&(Ge.pinnedMessages=se[17]),a.$set(Ge);const we={};pe[0]&1&&(we.messages=se[0]),pe[0]&262144&&(we.firstUnreadMessageId=se[18]),o.$set(we),se[19].length>0?$?$.p(se,pe):($=Ro(se),$.c(),$.m(r,null)):$&&($.d(1),$=null),se[3]?Q?(Q.p(se,pe),pe[0]&8&&Te(Q,1)):(Q=Mo(se),Q.c(),Te(Q,1),Q.m(b.parentNode,b)):Q&&(gn(),De(Q,1,1,()=>{Q=null}),mn()),se[4]?oe?(oe.p(se,pe),pe[0]&16&&Te(oe,1)):(oe=Fo(se),oe.c(),Te(oe,1),oe.m(h.parentNode,h)):oe&&(gn(),De(oe,1,1,()=>{oe=null}),mn()),ce===(ce=ae(se))&&re?re.p(se,pe):(re&&re.d(1),re=ce&&ce(se),re&&(re.c(),re.m(p.parentNode,p))),se[11].length>0&&!se[10]?he?he.p(se,pe):(he=Lo(se),he.c(),he.m(g,E)):he&&(he.d(1),he=null),se[10]?Ce?Ce.p(se,pe):(Ce=Uo(se),Ce.c(),Ce.m(g,C)):Ce&&(Ce.d(1),Ce=null),pe[0]&2&&Ke(N,se[1]),(!H||pe[0]&2&&L!==(L=!se[1].trim()))&&(Y.disabled=L)},i(se){H||(Te(a.$$.fragment,se),Te(o.$$.fragment,se),Te(Q),Te(oe),H=!0)},o(se){De(a.$$.fragment,se),De(o.$$.fragment,se),De(Q),De(oe),H=!1},d(se){se&&(_(e),_(i),_(r),_(d),_(b),_(h),_(p),_(g)),tt(a),tt(o),$&&$.d(),n[39](null),Q&&Q.d(se),oe&&oe.d(se),re&&re.d(se),he&&he.d(),Ce&&Ce.d(),n[44](null),n[46](null),n[49](null),q=!1,je(Z)}}}function wg(n){let e,t='<div class="dm-redirect-content svelte-1rw63eu"><h2 class="svelte-1rw63eu">Direct Messages</h2> <p class="svelte-1rw63eu">Direct messages are displayed in the DM panel on the right side.</p> <p class="svelte-1rw63eu">Click on a user in the user panel to start or view a DM conversation.</p></div>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1agg7j7"&&(e.innerHTML=t),this.h()},h(){f(e,"class","dm-redirect-message svelte-1rw63eu")},m(s,i){j(s,e,i)},p:Ne,i:Ne,o:Ne,d(s){s&&_(e)}}}function Ro(n){let e,t,s,i,r=n[19].join(", ")+"",a,l,o=n[19].length===1?"is":"are",u,d;return{c(){e=y("div"),t=y("span"),s=O(),i=y("span"),a=X(r),l=O(),u=X(o),d=X(" typing..."),this.h()},l(b){e=w(b,"DIV",{class:!0});var h=I(e);t=w(h,"SPAN",{class:!0}),I(t).forEach(_),s=P(h),i=w(h,"SPAN",{});var p=I(i);a=K(p,r),l=P(p),u=K(p,o),d=K(p," typing..."),p.forEach(_),h.forEach(_),this.h()},h(){f(t,"class","typing-dots svelte-1rw63eu"),f(e,"class","typing-indicator svelte-1rw63eu")},m(b,h){j(b,e,h),c(e,t),c(e,s),c(e,i),c(i,a),c(i,l),c(i,u),c(i,d)},p(b,h){h[0]&524288&&r!==(r=b[19].join(", ")+"")&&te(a,r),h[0]&524288&&o!==(o=b[19].length===1?"is":"are")&&te(u,o)},d(b){b&&_(e)}}}function Mo(n){let e,t;return e=new yp({}),e.$on("select",n[24]),e.$on("close",n[40]),{c(){it(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,i){nt(e,s,i),t=!0},p:Ne,i(s){t||(Te(e.$$.fragment,s),t=!0)},o(s){De(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function Fo(n){let e,t;return e=new Vu({}),e.$on("select",n[25]),e.$on("close",n[41]),{c(){it(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,i){nt(e,s,i),t=!0},p:Ne,i(s){t||(Te(e.$$.fragment,s),t=!0)},o(s){De(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function yg(n){let e,t,s,i,r=n[6].user+"",a,l,o,u,d=n[6].text.substring(0,50)+"",b,h=n[6].text.length>50?"...":"",p,g,E,C="âœ•",S,k;return{c(){e=y("div"),t=y("div"),s=y("span"),i=X("Replying to "),a=X(r),l=X(":"),o=O(),u=y("span"),b=X(d),p=X(h),g=O(),E=y("button"),E.textContent=C,this.h()},l(v){e=w(v,"DIV",{class:!0});var m=I(e);t=w(m,"DIV",{class:!0});var T=I(t);s=w(T,"SPAN",{class:!0});var A=I(s);i=K(A,"Replying to "),a=K(A,r),l=K(A,":"),A.forEach(_),o=P(T),u=w(T,"SPAN",{class:!0});var D=I(u);b=K(D,d),p=K(D,h),D.forEach(_),T.forEach(_),g=P(m),E=w(m,"BUTTON",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-1av190j"&&(E.textContent=C),m.forEach(_),this.h()},h(){f(s,"class","reply-label svelte-1rw63eu"),f(u,"class","reply-preview svelte-1rw63eu"),f(t,"class","reply-info svelte-1rw63eu"),f(E,"class","cancel-reply svelte-1rw63eu"),f(e,"class","reply-bar svelte-1rw63eu")},m(v,m){j(v,e,m),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,o),c(t,u),c(u,b),c(u,p),c(e,g),c(e,E),S||(k=G(E,"click",n[27]),S=!0)},p(v,m){m[0]&64&&r!==(r=v[6].user+"")&&te(a,r),m[0]&64&&d!==(d=v[6].text.substring(0,50)+"")&&te(b,d),m[0]&64&&h!==(h=v[6].text.length>50?"...":"")&&te(p,h)},d(v){v&&_(e),S=!1,k()}}}function Eg(n){let e,t,s='<span class="edit-label svelte-1rw63eu">Editing message</span> <span class="edit-hint svelte-1rw63eu">Press Escape to cancel</span>',i,r,a="âœ•",l,o;return{c(){e=y("div"),t=y("div"),t.innerHTML=s,i=O(),r=y("button"),r.textContent=a,this.h()},l(u){e=w(u,"DIV",{class:!0});var d=I(e);t=w(d,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1kwfa7y"&&(t.innerHTML=s),i=P(d),r=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-1anw7a5"&&(r.textContent=a),d.forEach(_),this.h()},h(){f(t,"class","edit-info svelte-1rw63eu"),f(r,"class","cancel-edit svelte-1rw63eu"),f(e,"class","edit-bar svelte-1rw63eu")},m(u,d){j(u,e,d),c(e,t),c(e,i),c(e,r),l||(o=G(r,"click",n[23]),l=!0)},p:Ne,d(u){u&&_(e),l=!1,o()}}}function Lo(n){let e,t,s,i=n[11].length+"",r,a,l=n[11].length>1?"s":"",o,u,d,b,h="âœ•",p,g,E,C,S,k,v,m,T="Mark as spoiler",A,D,N="âš ï¸",R,M,F,z=n[11].length+"",W,B,U=n[11].length>1?"s":"",Y,V,L,H=xe(n[11]),q=[];for(let Z=0;Z<H.length;Z+=1)q[Z]=Bo(Po(n,H,Z));return{c(){e=y("div"),t=y("div"),s=y("span"),r=X(i),a=X(" file"),o=X(l),u=X(" selected"),d=O(),b=y("button"),b.textContent=h,p=O(),g=y("div");for(let Z=0;Z<q.length;Z+=1)q[Z].c();E=O(),C=y("div"),S=y("label"),k=y("input"),v=O(),m=y("span"),m.textContent=T,A=O(),D=y("span"),D.textContent=N,R=O(),M=y("button"),F=X("Upload "),W=X(z),B=X(" file"),Y=X(U),this.h()},l(Z){e=w(Z,"DIV",{class:!0});var $=I(e);t=w($,"DIV",{class:!0});var Q=I(t);s=w(Q,"SPAN",{});var oe=I(s);r=K(oe,i),a=K(oe," file"),o=K(oe,l),u=K(oe," selected"),oe.forEach(_),d=P(Q),b=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),J(b)!=="svelte-pcsk7y"&&(b.textContent=h),Q.forEach(_),p=P($),g=w($,"DIV",{class:!0});var ae=I(g);for(let Ce=0;Ce<q.length;Ce+=1)q[Ce].l(ae);ae.forEach(_),E=P($),C=w($,"DIV",{class:!0});var ce=I(C);S=w(ce,"LABEL",{class:!0});var re=I(S);k=w(re,"INPUT",{type:!0,class:!0}),v=P(re),m=w(re,"SPAN",{"data-svelte-h":!0}),J(m)!=="svelte-6s6emx"&&(m.textContent=T),re.forEach(_),A=P(ce),D=w(ce,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),J(D)!=="svelte-6jzi8y"&&(D.textContent=N),ce.forEach(_),R=P($),M=w($,"BUTTON",{class:!0});var he=I(M);F=K(he,"Upload "),W=K(he,z),B=K(he," file"),Y=K(he,U),he.forEach(_),$.forEach(_),this.h()},h(){f(b,"class","cancel-gallery svelte-1rw63eu"),f(t,"class","gallery-header svelte-1rw63eu"),f(g,"class","gallery-grid svelte-1rw63eu"),f(k,"type","checkbox"),f(k,"class","spoiler-checkbox svelte-1rw63eu"),f(S,"class","spoiler-checkbox-label svelte-1rw63eu"),f(D,"class","spoiler-hint svelte-1rw63eu"),f(D,"title","Sensitive content will be hidden until clicked"),f(C,"class","spoiler-checkbox-container svelte-1rw63eu"),f(M,"class","upload-files-btn svelte-1rw63eu"),f(e,"class","file-gallery svelte-1rw63eu")},m(Z,$){j(Z,e,$),c(e,t),c(t,s),c(s,r),c(s,a),c(s,o),c(s,u),c(t,d),c(t,b),c(e,p),c(e,g);for(let Q=0;Q<q.length;Q+=1)q[Q]&&q[Q].m(g,null);c(e,E),c(e,C),c(C,S),c(S,k),k.checked=n[12],c(S,v),c(S,m),c(C,A),c(C,D),c(e,R),c(e,M),c(M,F),c(M,W),c(M,B),c(M,Y),V||(L=[G(b,"click",n[30]),G(k,"change",n[43]),G(M,"click",n[34])],V=!0)},p(Z,$){if($[0]&2048&&i!==(i=Z[11].length+"")&&te(r,i),$[0]&2048&&l!==(l=Z[11].length>1?"s":"")&&te(o,l),$[0]&536872960){H=xe(Z[11]);let Q;for(Q=0;Q<H.length;Q+=1){const oe=Po(Z,H,Q);q[Q]?q[Q].p(oe,$):(q[Q]=Bo(oe),q[Q].c(),q[Q].m(g,null))}for(;Q<q.length;Q+=1)q[Q].d(1);q.length=H.length}$[0]&4096&&(k.checked=Z[12]),$[0]&2048&&z!==(z=Z[11].length+"")&&te(W,z),$[0]&2048&&U!==(U=Z[11].length>1?"s":"")&&te(Y,U)},d(Z){Z&&_(e),Is(q,Z),V=!1,je(L)}}}function Cg(n){let e,t,s;function i(l,o){return o[0]&2048&&(t=null),o[0]&2048&&(s=null),t==null&&(t=!!l[58].type.startsWith("video/")),t?Ig:(s==null&&(s=!!l[58].type.startsWith("audio/")),s?Ag:Sg)}let r=i(n,[-1,-1]),a=r(n);return{c(){e=y("div"),a.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var o=I(e);a.l(o),o.forEach(_),this.h()},h(){f(e,"class","gallery-file-icon svelte-1rw63eu")},m(l,o){j(l,e,o),a.m(e,null)},p(l,o){r!==(r=i(l,o))&&(a.d(1),a=r(l),a&&(a.c(),a.m(e,null)))},d(l){l&&_(e),a.d()}}}function Tg(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[59])||f(e,"src",t),f(e,"alt",s=n[58].name),f(e,"class","gallery-preview svelte-1rw63eu")},m(i,r){j(i,e,r)},p(i,r){r[0]&2048&&!Re(e.src,t=i[59])&&f(e,"src",t),r[0]&2048&&s!==(s=i[58].name)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Sg(n){let e;return{c(){e=X("ðŸ“„")},l(t){e=K(t,"ðŸ“„")},m(t,s){j(t,e,s)},d(t){t&&_(e)}}}function Ag(n){let e;return{c(){e=X("ðŸŽµ")},l(t){e=K(t,"ðŸŽµ")},m(t,s){j(t,e,s)},d(t){t&&_(e)}}}function Ig(n){let e;return{c(){e=X("ðŸŽ¬")},l(t){e=K(t,"ðŸŽ¬")},m(t,s){j(t,e,s)},d(t){t&&_(e)}}}function Bo(n){let e,t,s,i,r=n[58].name+"",a,l,o,u=(n[58].size/1024/1024).toFixed(2)+"",d,b,h,p,g="âœ•",E,C,S;function k(A,D){return A[59]?Tg:Cg}let v=k(n),m=v(n);function T(){return n[42](n[61])}return{c(){e=y("div"),m.c(),t=O(),s=y("div"),i=y("div"),a=X(r),l=O(),o=y("div"),d=X(u),b=X(" MB"),h=O(),p=y("button"),p.textContent=g,E=O(),this.h()},l(A){e=w(A,"DIV",{class:!0});var D=I(e);m.l(D),t=P(D),s=w(D,"DIV",{class:!0});var N=I(s);i=w(N,"DIV",{class:!0});var R=I(i);a=K(R,r),R.forEach(_),l=P(N),o=w(N,"DIV",{class:!0});var M=I(o);d=K(M,u),b=K(M," MB"),M.forEach(_),N.forEach(_),h=P(D),p=w(D,"BUTTON",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-17gof1i"&&(p.textContent=g),E=P(D),D.forEach(_),this.h()},h(){f(i,"class","gallery-file-name svelte-1rw63eu"),f(o,"class","gallery-file-size svelte-1rw63eu"),f(s,"class","gallery-file-info svelte-1rw63eu"),f(p,"class","remove-file svelte-1rw63eu"),f(e,"class","gallery-item svelte-1rw63eu")},m(A,D){j(A,e,D),m.m(e,null),c(e,t),c(e,s),c(s,i),c(i,a),c(s,l),c(s,o),c(o,d),c(o,b),c(e,h),c(e,p),c(e,E),C||(S=G(p,"click",T),C=!0)},p(A,D){n=A,v===(v=k(n))&&m?m.p(n,D):(m.d(1),m=v(n),m&&(m.c(),m.m(e,t))),D[0]&2048&&r!==(r=n[58].name+"")&&te(a,r),D[0]&2048&&u!==(u=(n[58].size/1024/1024).toFixed(2)+"")&&te(d,u)},d(A){A&&_(e),m.d(),C=!1,S()}}}function Uo(n){let e,t,s,i="Uploading files...",r,a,l,o,u,d,b;return{c(){e=y("div"),t=y("div"),s=y("span"),s.textContent=i,r=O(),a=y("span"),l=X(n[9]),o=X("%"),u=O(),d=y("div"),b=y("div"),this.h()},l(h){e=w(h,"DIV",{class:!0});var p=I(e);t=w(p,"DIV",{class:!0});var g=I(t);s=w(g,"SPAN",{"data-svelte-h":!0}),J(s)!=="svelte-10wvq4k"&&(s.textContent=i),r=P(g),a=w(g,"SPAN",{});var E=I(a);l=K(E,n[9]),o=K(E,"%"),E.forEach(_),g.forEach(_),u=P(p),d=w(p,"DIV",{class:!0});var C=I(d);b=w(C,"DIV",{class:!0,style:!0}),I(b).forEach(_),C.forEach(_),p.forEach(_),this.h()},h(){f(t,"class","upload-progress-info svelte-1rw63eu"),f(b,"class","progress-fill svelte-1rw63eu"),Be(b,"width",n[9]+"%"),f(d,"class","progress-bar svelte-1rw63eu"),f(e,"class","upload-progress-bar svelte-1rw63eu")},m(h,p){j(h,e,p),c(e,t),c(t,s),c(t,r),c(t,a),c(a,l),c(a,o),c(e,u),c(e,d),c(d,b)},p(h,p){p[0]&512&&te(l,h[9]),p[0]&512&&Be(b,"width",h[9]+"%")},d(h){h&&_(e)}}}function Dg(n){let e,t,s,i,r,a,l,o=n[13]&&Oo();const u=[wg,kg],d=[];function b(h,p){return h[15]?0:1}return s=b(n),i=d[s]=u[s](n),{c(){e=y("div"),o&&o.c(),t=O(),i.c(),this.h()},l(h){e=w(h,"DIV",{class:!0});var p=I(e);o&&o.l(p),t=P(p),i.l(p),p.forEach(_),this.h()},h(){f(e,"class","chat-container svelte-1rw63eu")},m(h,p){j(h,e,p),o&&o.m(e,null),c(e,t),d[s].m(e,null),r=!0,a||(l=[G(e,"dragenter",n[31]),G(e,"dragleave",n[32]),G(e,"dragover",Ng),G(e,"drop",n[33])],a=!0)},p(h,p){h[13]?o||(o=Oo(),o.c(),o.m(e,t)):o&&(o.d(1),o=null);let g=s;s=b(h),s===g?d[s].p(h,p):(gn(),De(d[g],1,1,()=>{d[g]=null}),mn(),i=d[s],i?i.p(h,p):(i=d[s]=u[s](h),i.c()),Te(i,1),i.m(e,null))},i(h){r||(Te(i),r=!0)},o(h){De(i),r=!1},d(h){h&&_(e),o&&o.d(),d[s].d(),a=!1,je(l)}}}function Ng(n){n.preventDefault(),n.stopPropagation()}function Pg(n,e,t){let s,i,r,a,l,o,u,d,b,h,p,g;Me(n,hs,ie=>t(36,o=ie)),Me(n,es,ie=>t(54,u=ie)),Me(n,Cn,ie=>t(55,d=ie)),Me(n,jt,ie=>t(37,b=ie)),Me(n,It,ie=>t(38,h=ie)),Me(n,Tl,ie=>t(18,p=ie)),Me(n,Ou,ie=>t(19,g=ie));let E="",C,S,k=!1,v=!1,m,T=null,A,D=null,N=0,R=!1,M=[],F=[],z=!1,W=!1,B=0,U;async function Y(){await Qc(),C&&t(2,C.scrollTop=C.scrollHeight,C)}function V(){if(!U)return;t(14,U.style.height="auto",U);const ie=Math.min(U.scrollHeight,120);t(14,U.style.height=`${ie}px`,U)}function L(){V(),ws(!0),S&&clearTimeout(S),S=setTimeout(()=>{ws(!1)},1e3)}function H(ie){if(ie.key==="ArrowUp"&&!E.trim()&&!D){ie.preventDefault();const _e=s.filter(be=>be.userId===(d==null?void 0:d.id));if(_e.length>0){const be=_e[_e.length-1];t(8,D=be),t(1,E=be.text)}}else ie.key==="Escape"&&D?(ie.preventDefault(),Z()):ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),q())}function q(){var ie;if(E.trim()){if(D)Ru(o,D.id,E.trim()),t(8,D=null);else{const _e=E.trim();if(/^(?::[\w_]+:)+$/.test(_e)){const $e=(((ie=_e.match(/:[\w_]+:/g))==null?void 0:ie.map(Ue=>Ue.slice(1,-1)))||[])[0],Se=u.find(Ue=>Ue.name===$e);ks(o,_e,"emoji",{emojiUrl:Se==null?void 0:Se.url,emojiName:$e,replyTo:T==null?void 0:T.id,isSpoiler:z})}else ks(o,_e,"text",{replyTo:T==null?void 0:T.id,isSpoiler:z});t(6,T=null)}t(1,E=""),ws(!1),S&&clearTimeout(S),U&&t(14,U.style.height="auto",U)}}function Z(){t(8,D=null),t(1,E=""),U&&t(14,U.style.height="auto",U)}function $(ie){ks(o,"","gif",{gifUrl:ie.detail,replyTo:T==null?void 0:T.id,isSpoiler:z}),t(6,T=null),t(3,k=!1)}function Q(ie){const _e=ie.detail.emoji;t(4,v=!1),t(1,E=E.trim()?E+`:${_e.name}:`:`:${_e.name}:`),q()}function oe(ie){t(6,T=ie);const _e=document.querySelector('input[type="text"]');_e==null||_e.focus()}function ae(){t(6,T=null)}async function ce(ie){const _e=ie.target,be=Array.from(_e.files||[]);if(be.length===0){console.log("No files selected");return}console.log("Files selected:",be.length);const de=1024*1024*1024;for(const He of be)if(He.size>de){alert(`File too large! Maximum size is 1GB per file. "${He.name}" is ${(He.size/1024/1024).toFixed(2)}MB`),_e.value="";return}M=be,t(11,F=await Promise.all(be.map(async He=>{if(He.type.startsWith("image/")){const $e=await new Promise(Se=>{const Ue=new FileReader;Ue.onload=ft=>{var rt;return Se((rt=ft.target)==null?void 0:rt.result)},Ue.readAsDataURL(He)});return{file:He,preview:$e}}return{file:He}}))),_e.value=""}function re(ie){M=M.filter((_e,be)=>be!==ie),t(11,F=F.filter((_e,be)=>be!==ie))}function he(){M=[],t(11,F=[])}function Ce(ie){var _e;ie.preventDefault(),ie.stopPropagation(),B++,(_e=ie.dataTransfer)!=null&&_e.types.includes("Files")&&t(13,W=!0)}function se(ie){ie.preventDefault(),ie.stopPropagation(),B--,B===0&&t(13,W=!1)}async function pe(ie){var de;ie.preventDefault(),ie.stopPropagation(),t(13,W=!1),B=0;const _e=Array.from(((de=ie.dataTransfer)==null?void 0:de.files)||[]);if(_e.length===0)return;const be=1024*1024*1024;for(const He of _e)if(He.size>be){alert(`File too large! Maximum size is 1GB per file. "${He.name}" is ${(He.size/1024/1024).toFixed(2)}MB`);return}M=_e,t(11,F=await Promise.all(_e.map(async He=>{if(He.type.startsWith("image/")){const $e=await new Promise(Se=>{const Ue=new FileReader;Ue.onload=ft=>{var rt;return Se((rt=ft.target)==null?void 0:rt.result)},Ue.readAsDataURL(He)});return{file:He,preview:$e}}return{file:He}})))}async function Ge(){if(M.length===0)return;t(10,R=!0);const ie=M.length;let _e=0;try{const be=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,de=[];for(const He of M){const $e=await new Promise((Se,Ue)=>{const ft=new FormData;ft.append("file",He),ft.append("channelId",o);const rt=new XMLHttpRequest;rt.upload.addEventListener("progress",ot=>{if(ot.lengthComputable){const Nt=ot.loaded/ot.total*100,ct=(_e+Nt/100)/ie*100;t(9,N=Math.round(ct))}}),rt.addEventListener("load",()=>{if(rt.status===200){const ot=JSON.parse(rt.responseText);_e++,Se({fileUrl:ot.fileUrl,fileName:He.name,fileSize:He.size})}else Ue(new Error("Upload failed"))}),rt.addEventListener("error",()=>{Ue(new Error("Upload failed"))}),rt.open("POST",`${be}/api/upload`),rt.send(ft)});de.push($e)}de.length===1?ks(o,E.trim()||`Shared: ${de[0].fileName}`,"file",{fileUrl:de[0].fileUrl,fileName:de[0].fileName,fileSize:de[0].fileSize,replyTo:T==null?void 0:T.id,isSpoiler:z}):ks(o,E.trim()||`Shared ${de.length} files`,"file",{files:de,replyTo:T==null?void 0:T.id,isSpoiler:z}),console.log("All files uploaded"),t(1,E=""),t(6,T=null),M=[],t(11,F=[]),t(10,R=!1),t(9,N=0)}catch(be){console.error("Upload error:",be),alert("Failed to upload files. Please try again."),t(10,R=!1),t(9,N=0)}}Tn(()=>{Y()});function we(ie){lt[ie?"unshift":"push"](()=>{C=ie,t(2,C)})}const Pe=()=>t(3,k=!1),ye=()=>t(4,v=!1),ne=ie=>re(ie);function me(){z=this.checked,t(12,z)}function Ie(ie){lt[ie?"unshift":"push"](()=>{A=ie,t(7,A)})}const Ae=()=>A==null?void 0:A.click();function le(ie){lt[ie?"unshift":"push"](()=>{U=ie,t(14,U)})}function Fe(){E=this.value,t(1,E)}const Ve=()=>t(3,k=!k);function ze(ie){lt[ie?"unshift":"push"](()=>{m=ie,t(5,m)})}const qe=()=>{t(4,v=!v)};return n.$$.update=()=>{n.$$.dirty[1]&160&&t(0,s=h[o]||[]),n.$$.dirty[0]&1&&t(17,i=s.filter(ie=>ie.isPinned)),n.$$.dirty[1]&96&&t(35,r=b.find(ie=>ie.id===o)),n.$$.dirty[1]&48&&t(16,a=(r==null?void 0:r.name)||o),n.$$.dirty[1]&16&&t(15,l=(r==null?void 0:r.type)==="dm"),n.$$.dirty[0]&1&&s.length&&Y()},[s,E,C,k,v,m,T,A,D,N,R,F,z,W,U,l,a,i,p,g,L,H,q,Z,$,Q,oe,ae,ce,re,he,Ce,se,pe,Ge,r,o,b,h,we,Pe,ye,ne,me,Ie,Ae,le,Fe,Ve,ze,qe]}class Og extends kt{constructor(e){super(),wt(this,e,Pg,Dg,bt,{},null,[-1,-1])}}var ii={},Rg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Hu={},ln={};let Dl;const Mg=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ln.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ln.getSymbolTotalCodewords=function(e){return Mg[e]};ln.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};ln.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Dl=e};ln.isKanjiModeEnabled=function(){return typeof Dl<"u"};ln.toSJIS=function(e){return Dl(e)};var lr={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,i){if(n.isValid(s))return s;try{return e(s)}catch{return i}}})(lr);function xu(){this.buffer=[],this.length=0}xu.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Fg=xu;function ri(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}ri.prototype.set=function(n,e,t,s){const i=n*this.size+e;this.data[i]=t,s&&(this.reservedBit[i]=!0)};ri.prototype.get=function(n,e){return this.data[n*this.size+e]};ri.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};ri.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var Lg=ri,Gu={};(function(n){const e=ln.getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const i=Math.floor(s/7)+2,r=e(s),a=r===145?26:Math.ceil((r-13)/(2*i-2))*2,l=[r-7];for(let o=1;o<i-1;o++)l[o]=l[o-1]-a;return l.push(6),l.reverse()},n.getPositions=function(s){const i=[],r=n.getRowColCoords(s),a=r.length;for(let l=0;l<a;l++)for(let o=0;o<a;o++)l===0&&o===0||l===0&&o===a-1||l===a-1&&o===0||i.push([r[l],r[o]]);return i}})(Gu);var Wu={};const Bg=ln.getSymbolSize,Vo=7;Wu.getPositions=function(e){const t=Bg(e);return[[0,0],[t-Vo,0],[0,t-Vo]]};var Yu={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const r=i.size;let a=0,l=0,o=0,u=null,d=null;for(let b=0;b<r;b++){l=o=0,u=d=null;for(let h=0;h<r;h++){let p=i.get(b,h);p===u?l++:(l>=5&&(a+=e.N1+(l-5)),u=p,l=1),p=i.get(h,b),p===d?o++:(o>=5&&(a+=e.N1+(o-5)),d=p,o=1)}l>=5&&(a+=e.N1+(l-5)),o>=5&&(a+=e.N1+(o-5))}return a},n.getPenaltyN2=function(i){const r=i.size;let a=0;for(let l=0;l<r-1;l++)for(let o=0;o<r-1;o++){const u=i.get(l,o)+i.get(l,o+1)+i.get(l+1,o)+i.get(l+1,o+1);(u===4||u===0)&&a++}return a*e.N2},n.getPenaltyN3=function(i){const r=i.size;let a=0,l=0,o=0;for(let u=0;u<r;u++){l=o=0;for(let d=0;d<r;d++)l=l<<1&2047|i.get(u,d),d>=10&&(l===1488||l===93)&&a++,o=o<<1&2047|i.get(d,u),d>=10&&(o===1488||o===93)&&a++}return a*e.N3},n.getPenaltyN4=function(i){let r=0;const a=i.data.length;for(let o=0;o<a;o++)r+=i.data[o];return Math.abs(Math.ceil(r*100/a/5)-10)*e.N4};function t(s,i,r){switch(s){case n.Patterns.PATTERN000:return(i+r)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return r%3===0;case n.Patterns.PATTERN011:return(i+r)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2===0;case n.Patterns.PATTERN101:return i*r%2+i*r%3===0;case n.Patterns.PATTERN110:return(i*r%2+i*r%3)%2===0;case n.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(i,r){const a=r.size;for(let l=0;l<a;l++)for(let o=0;o<a;o++)r.isReserved(o,l)||r.xor(o,l,t(i,o,l))},n.getBestMask=function(i,r){const a=Object.keys(n.Patterns).length;let l=0,o=1/0;for(let u=0;u<a;u++){r(u),n.applyMask(u,i);const d=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(u,i),d<o&&(o=d,l=u)}return l}})(Yu);var ar={};const Qn=lr,Mi=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fi=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ar.getBlocksCount=function(e,t){switch(t){case Qn.L:return Mi[(e-1)*4+0];case Qn.M:return Mi[(e-1)*4+1];case Qn.Q:return Mi[(e-1)*4+2];case Qn.H:return Mi[(e-1)*4+3];default:return}};ar.getTotalCodewordsCount=function(e,t){switch(t){case Qn.L:return Fi[(e-1)*4+0];case Qn.M:return Fi[(e-1)*4+1];case Qn.Q:return Fi[(e-1)*4+2];case Qn.H:return Fi[(e-1)*4+3];default:return}};var Ku={},or={};const Qs=new Uint8Array(512),Zi=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Qs[t]=e,Zi[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Qs[t]=Qs[t-255]})();or.log=function(e){if(e<1)throw new Error("log("+e+")");return Zi[e]};or.exp=function(e){return Qs[e]};or.mul=function(e,t){return e===0||t===0?0:Qs[Zi[e]+Zi[t]]};(function(n){const e=or;n.mul=function(s,i){const r=new Uint8Array(s.length+i.length-1);for(let a=0;a<s.length;a++)for(let l=0;l<i.length;l++)r[a+l]^=e.mul(s[a],i[l]);return r},n.mod=function(s,i){let r=new Uint8Array(s);for(;r.length-i.length>=0;){const a=r[0];for(let o=0;o<i.length;o++)r[o]^=e.mul(i[o],a);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},n.generateECPolynomial=function(s){let i=new Uint8Array([1]);for(let r=0;r<s;r++)i=n.mul(i,new Uint8Array([1,e.exp(r)]));return i}})(Ku);const Xu=Ku;function Nl(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Nl.prototype.initialize=function(e){this.degree=e,this.genPoly=Xu.generateECPolynomial(this.degree)};Nl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const s=Xu.mod(t,this.genPoly),i=this.degree-s.length;if(i>0){const r=new Uint8Array(this.degree);return r.set(s,i),r}return s};var Ug=Nl,Zu={},ns={},Pl={};Pl.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Fn={};const Ju="[0-9]+",Vg="[A-Z $%*+\\-./:]+";let ti="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ti=ti.replace(/u/g,"\\u");const jg="(?:(?![A-Z0-9 $%*+\\-./:]|"+ti+`)(?:.|[\r
]))+`;Fn.KANJI=new RegExp(ti,"g");Fn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Fn.BYTE=new RegExp(jg,"g");Fn.NUMERIC=new RegExp(Ju,"g");Fn.ALPHANUMERIC=new RegExp(Vg,"g");const zg=new RegExp("^"+ti+"$"),qg=new RegExp("^"+Ju+"$"),Hg=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Fn.testKanji=function(e){return zg.test(e)};Fn.testNumeric=function(e){return qg.test(e)};Fn.testAlphanumeric=function(e){return Hg.test(e)};(function(n){const e=Pl,t=Fn;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(r,a){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?r.ccBits[0]:a<27?r.ccBits[1]:r.ccBits[2]},n.getBestModeForData=function(r){return t.testNumeric(r)?n.NUMERIC:t.testAlphanumeric(r)?n.ALPHANUMERIC:t.testKanji(r)?n.KANJI:n.BYTE},n.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},n.isValid=function(r){return r&&r.bit&&r.ccBits};function s(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(r,a){if(n.isValid(r))return r;try{return s(r)}catch{return a}}})(ns);(function(n){const e=ln,t=ar,s=lr,i=ns,r=Pl,a=7973,l=e.getBCHDigit(a);function o(h,p,g){for(let E=1;E<=40;E++)if(p<=n.getCapacity(E,g,h))return E}function u(h,p){return i.getCharCountIndicator(h,p)+4}function d(h,p){let g=0;return h.forEach(function(E){const C=u(E.mode,p);g+=C+E.getBitsLength()}),g}function b(h,p){for(let g=1;g<=40;g++)if(d(h,g)<=n.getCapacity(g,p,i.MIXED))return g}n.from=function(p,g){return r.isValid(p)?parseInt(p,10):g},n.getCapacity=function(p,g,E){if(!r.isValid(p))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=i.BYTE);const C=e.getSymbolTotalCodewords(p),S=t.getTotalCodewordsCount(p,g),k=(C-S)*8;if(E===i.MIXED)return k;const v=k-u(E,p);switch(E){case i.NUMERIC:return Math.floor(v/10*3);case i.ALPHANUMERIC:return Math.floor(v/11*2);case i.KANJI:return Math.floor(v/13);case i.BYTE:default:return Math.floor(v/8)}},n.getBestVersionForData=function(p,g){let E;const C=s.from(g,s.M);if(Array.isArray(p)){if(p.length>1)return b(p,C);if(p.length===0)return 1;E=p[0]}else E=p;return o(E.mode,E.getLength(),C)},n.getEncodedBits=function(p){if(!r.isValid(p)||p<7)throw new Error("Invalid QR Code version");let g=p<<12;for(;e.getBCHDigit(g)-l>=0;)g^=a<<e.getBCHDigit(g)-l;return p<<12|g}})(Zu);var Qu={};const il=ln,$u=1335,xg=21522,jo=il.getBCHDigit($u);Qu.getEncodedBits=function(e,t){const s=e.bit<<3|t;let i=s<<10;for(;il.getBCHDigit(i)-jo>=0;)i^=$u<<il.getBCHDigit(i)-jo;return(s<<10|i)^xg};var ef={};const Gg=ns;function Es(n){this.mode=Gg.NUMERIC,this.data=n.toString()}Es.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Es.prototype.getLength=function(){return this.data.length};Es.prototype.getBitsLength=function(){return Es.getBitsLength(this.data.length)};Es.prototype.write=function(e){let t,s,i;for(t=0;t+3<=this.data.length;t+=3)s=this.data.substr(t,3),i=parseInt(s,10),e.put(i,10);const r=this.data.length-t;r>0&&(s=this.data.substr(t),i=parseInt(s,10),e.put(i,r*3+1))};var Wg=Es;const Yg=ns,jr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Cs(n){this.mode=Yg.ALPHANUMERIC,this.data=n}Cs.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Cs.prototype.getLength=function(){return this.data.length};Cs.prototype.getBitsLength=function(){return Cs.getBitsLength(this.data.length)};Cs.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let s=jr.indexOf(this.data[t])*45;s+=jr.indexOf(this.data[t+1]),e.put(s,11)}this.data.length%2&&e.put(jr.indexOf(this.data[t]),6)};var Kg=Cs;const Xg=ns;function Ts(n){this.mode=Xg.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Ts.getBitsLength=function(e){return e*8};Ts.prototype.getLength=function(){return this.data.length};Ts.prototype.getBitsLength=function(){return Ts.getBitsLength(this.data.length)};Ts.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var Zg=Ts;const Jg=ns,Qg=ln;function Ss(n){this.mode=Jg.KANJI,this.data=n}Ss.getBitsLength=function(e){return e*13};Ss.prototype.getLength=function(){return this.data.length};Ss.prototype.getBitsLength=function(){return Ss.getBitsLength(this.data.length)};Ss.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Qg.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var $g=Ss,tf={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,s,i){var r={},a={};a[s]=0;var l=e.PriorityQueue.make();l.push(s,0);for(var o,u,d,b,h,p,g,E,C;!l.empty();){o=l.pop(),u=o.value,b=o.cost,h=t[u]||{};for(d in h)h.hasOwnProperty(d)&&(p=h[d],g=b+p,E=a[d],C=typeof a[d]>"u",(C||E>g)&&(a[d]=g,l.push(d,g),r[d]=u))}if(typeof i<"u"&&typeof a[i]>"u"){var S=["Could not find a path from ",s," to ",i,"."].join("");throw new Error(S)}return r},extract_shortest_path_from_predecessor_list:function(t,s){for(var i=[],r=s;r;)i.push(r),t[r],r=t[r];return i.reverse(),i},find_path:function(t,s,i){var r=e.single_source_shortest_paths(t,s,i);return e.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(t){var s=e.PriorityQueue,i={},r;t=t||{};for(r in s)s.hasOwnProperty(r)&&(i[r]=s[r]);return i.queue=[],i.sorter=t.sorter||s.default_sorter,i},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var i={value:t,cost:s};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(tf);var em=tf.exports;(function(n){const e=ns,t=Wg,s=Kg,i=Zg,r=$g,a=Fn,l=ln,o=em;function u(S){return unescape(encodeURIComponent(S)).length}function d(S,k,v){const m=[];let T;for(;(T=S.exec(v))!==null;)m.push({data:T[0],index:T.index,mode:k,length:T[0].length});return m}function b(S){const k=d(a.NUMERIC,e.NUMERIC,S),v=d(a.ALPHANUMERIC,e.ALPHANUMERIC,S);let m,T;return l.isKanjiModeEnabled()?(m=d(a.BYTE,e.BYTE,S),T=d(a.KANJI,e.KANJI,S)):(m=d(a.BYTE_KANJI,e.BYTE,S),T=[]),k.concat(v,m,T).sort(function(D,N){return D.index-N.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function h(S,k){switch(k){case e.NUMERIC:return t.getBitsLength(S);case e.ALPHANUMERIC:return s.getBitsLength(S);case e.KANJI:return r.getBitsLength(S);case e.BYTE:return i.getBitsLength(S)}}function p(S){return S.reduce(function(k,v){const m=k.length-1>=0?k[k.length-1]:null;return m&&m.mode===v.mode?(k[k.length-1].data+=v.data,k):(k.push(v),k)},[])}function g(S){const k=[];for(let v=0;v<S.length;v++){const m=S[v];switch(m.mode){case e.NUMERIC:k.push([m,{data:m.data,mode:e.ALPHANUMERIC,length:m.length},{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.ALPHANUMERIC:k.push([m,{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.KANJI:k.push([m,{data:m.data,mode:e.BYTE,length:u(m.data)}]);break;case e.BYTE:k.push([{data:m.data,mode:e.BYTE,length:u(m.data)}])}}return k}function E(S,k){const v={},m={start:{}};let T=["start"];for(let A=0;A<S.length;A++){const D=S[A],N=[];for(let R=0;R<D.length;R++){const M=D[R],F=""+A+R;N.push(F),v[F]={node:M,lastCount:0},m[F]={};for(let z=0;z<T.length;z++){const W=T[z];v[W]&&v[W].node.mode===M.mode?(m[W][F]=h(v[W].lastCount+M.length,M.mode)-h(v[W].lastCount,M.mode),v[W].lastCount+=M.length):(v[W]&&(v[W].lastCount=M.length),m[W][F]=h(M.length,M.mode)+4+e.getCharCountIndicator(M.mode,k))}}T=N}for(let A=0;A<T.length;A++)m[T[A]].end=0;return{map:m,table:v}}function C(S,k){let v;const m=e.getBestModeForData(S);if(v=e.from(k,m),v!==e.BYTE&&v.bit<m.bit)throw new Error('"'+S+'" cannot be encoded with mode '+e.toString(v)+`.
 Suggested mode is: `+e.toString(m));switch(v===e.KANJI&&!l.isKanjiModeEnabled()&&(v=e.BYTE),v){case e.NUMERIC:return new t(S);case e.ALPHANUMERIC:return new s(S);case e.KANJI:return new r(S);case e.BYTE:return new i(S)}}n.fromArray=function(k){return k.reduce(function(v,m){return typeof m=="string"?v.push(C(m,null)):m.data&&v.push(C(m.data,m.mode)),v},[])},n.fromString=function(k,v){const m=b(k,l.isKanjiModeEnabled()),T=g(m),A=E(T,v),D=o.find_path(A.map,"start","end"),N=[];for(let R=1;R<D.length-1;R++)N.push(A.table[D[R]].node);return n.fromArray(p(N))},n.rawSplit=function(k){return n.fromArray(b(k,l.isKanjiModeEnabled()))}})(ef);const cr=ln,zr=lr,tm=Fg,nm=Lg,sm=Gu,im=Wu,rl=Yu,ll=ar,rm=Ug,Ji=Zu,lm=Qu,am=ns,qr=ef;function om(n,e){const t=n.size,s=im.getPositions(e);for(let i=0;i<s.length;i++){const r=s[i][0],a=s[i][1];for(let l=-1;l<=7;l++)if(!(r+l<=-1||t<=r+l))for(let o=-1;o<=7;o++)a+o<=-1||t<=a+o||(l>=0&&l<=6&&(o===0||o===6)||o>=0&&o<=6&&(l===0||l===6)||l>=2&&l<=4&&o>=2&&o<=4?n.set(r+l,a+o,!0,!0):n.set(r+l,a+o,!1,!0))}}function cm(n){const e=n.size;for(let t=8;t<e-8;t++){const s=t%2===0;n.set(t,6,s,!0),n.set(6,t,s,!0)}}function um(n,e){const t=sm.getPositions(e);for(let s=0;s<t.length;s++){const i=t[s][0],r=t[s][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?n.set(i+a,r+l,!0,!0):n.set(i+a,r+l,!1,!0)}}function fm(n,e){const t=n.size,s=Ji.getEncodedBits(e);let i,r,a;for(let l=0;l<18;l++)i=Math.floor(l/3),r=l%3+t-8-3,a=(s>>l&1)===1,n.set(i,r,a,!0),n.set(r,i,a,!0)}function Hr(n,e,t){const s=n.size,i=lm.getEncodedBits(e,t);let r,a;for(r=0;r<15;r++)a=(i>>r&1)===1,r<6?n.set(r,8,a,!0):r<8?n.set(r+1,8,a,!0):n.set(s-15+r,8,a,!0),r<8?n.set(8,s-r-1,a,!0):r<9?n.set(8,15-r-1+1,a,!0):n.set(8,15-r-1,a,!0);n.set(s-8,8,1,!0)}function dm(n,e){const t=n.size;let s=-1,i=t-1,r=7,a=0;for(let l=t-1;l>0;l-=2)for(l===6&&l--;;){for(let o=0;o<2;o++)if(!n.isReserved(i,l-o)){let u=!1;a<e.length&&(u=(e[a]>>>r&1)===1),n.set(i,l-o,u),r--,r===-1&&(a++,r=7)}if(i+=s,i<0||t<=i){i-=s,s=-s;break}}}function hm(n,e,t){const s=new tm;t.forEach(function(o){s.put(o.mode.bit,4),s.put(o.getLength(),am.getCharCountIndicator(o.mode,n)),o.write(s)});const i=cr.getSymbolTotalCodewords(n),r=ll.getTotalCodewordsCount(n,e),a=(i-r)*8;for(s.getLengthInBits()+4<=a&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const l=(a-s.getLengthInBits())/8;for(let o=0;o<l;o++)s.put(o%2?17:236,8);return pm(s,n,e)}function pm(n,e,t){const s=cr.getSymbolTotalCodewords(e),i=ll.getTotalCodewordsCount(e,t),r=s-i,a=ll.getBlocksCount(e,t),l=s%a,o=a-l,u=Math.floor(s/a),d=Math.floor(r/a),b=d+1,h=u-d,p=new rm(h);let g=0;const E=new Array(a),C=new Array(a);let S=0;const k=new Uint8Array(n.buffer);for(let D=0;D<a;D++){const N=D<o?d:b;E[D]=k.slice(g,g+N),C[D]=p.encode(E[D]),g+=N,S=Math.max(S,N)}const v=new Uint8Array(s);let m=0,T,A;for(T=0;T<S;T++)for(A=0;A<a;A++)T<E[A].length&&(v[m++]=E[A][T]);for(T=0;T<h;T++)for(A=0;A<a;A++)v[m++]=C[A][T];return v}function gm(n,e,t,s){let i;if(Array.isArray(n))i=qr.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const d=qr.rawSplit(n);u=Ji.getBestVersionForData(d,t)}i=qr.fromString(n,u||40)}else throw new Error("Invalid data");const r=Ji.getBestVersionForData(i,t);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=r;else if(e<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const a=hm(e,t,i),l=cr.getSymbolSize(e),o=new nm(l);return om(o,e),cm(o),um(o,e),Hr(o,t,0),e>=7&&fm(o,e),dm(o,a),isNaN(s)&&(s=rl.getBestMask(o,Hr.bind(null,o,t))),rl.applyMask(s,o),Hr(o,t,s),{modules:o,version:e,errorCorrectionLevel:t,maskPattern:s,segments:i}}Hu.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let s=zr.M,i,r;return typeof t<"u"&&(s=zr.from(t.errorCorrectionLevel,zr.M),i=Ji.from(t.version),r=rl.from(t.maskPattern),t.toSJISFunc&&cr.setToSJISFunction(t.toSJISFunc)),gm(e,i,s,r)};var nf={},Ol={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(r){return[r,r]}))),s.length===6&&s.push("F","F");const i=parseInt(s.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const i=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,r=s.width&&s.width>=21?s.width:void 0,a=s.scale||4;return{width:r,scale:r?4:a,margin:i,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,i){return i.width&&i.width>=s+i.margin*2?i.width/(s+i.margin*2):i.scale},n.getImageWidth=function(s,i){const r=n.getScale(s,i);return Math.floor((s+i.margin*2)*r)},n.qrToImageData=function(s,i,r){const a=i.modules.size,l=i.modules.data,o=n.getScale(a,r),u=Math.floor((a+r.margin*2)*o),d=r.margin*o,b=[r.color.light,r.color.dark];for(let h=0;h<u;h++)for(let p=0;p<u;p++){let g=(h*u+p)*4,E=r.color.light;if(h>=d&&p>=d&&h<u-d&&p<u-d){const C=Math.floor((h-d)/o),S=Math.floor((p-d)/o);E=b[l[C*a+S]?1:0]}s[g++]=E.r,s[g++]=E.g,s[g++]=E.b,s[g]=E.a}}})(Ol);(function(n){const e=Ol;function t(i,r,a){i.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=a,r.width=a,r.style.height=a+"px",r.style.width=a+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(r,a,l){let o=l,u=a;typeof o>"u"&&(!a||!a.getContext)&&(o=a,a=void 0),a||(u=s()),o=e.getOptions(o);const d=e.getImageWidth(r.modules.size,o),b=u.getContext("2d"),h=b.createImageData(d,d);return e.qrToImageData(h.data,r,o),t(b,u,d),b.putImageData(h,0,0),u},n.renderToDataURL=function(r,a,l){let o=l;typeof o>"u"&&(!a||!a.getContext)&&(o=a,a=void 0),o||(o={});const u=n.render(r,a,o),d=o.type||"image/png",b=o.rendererOpts||{};return u.toDataURL(d,b.quality)}})(nf);var sf={};const mm=Ol;function zo(n,e){const t=n.a/255,s=e+'="'+n.hex+'"';return t<1?s+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':s}function xr(n,e,t){let s=n+e;return typeof t<"u"&&(s+=" "+t),s}function vm(n,e,t){let s="",i=0,r=!1,a=0;for(let l=0;l<n.length;l++){const o=Math.floor(l%e),u=Math.floor(l/e);!o&&!r&&(r=!0),n[l]?(a++,l>0&&o>0&&n[l-1]||(s+=r?xr("M",o+t,.5+u+t):xr("m",i,0),i=0,r=!1),o+1<e&&n[l+1]||(s+=xr("h",a),a=0)):i++}return s}sf.render=function(e,t,s){const i=mm.getOptions(t),r=e.modules.size,a=e.modules.data,l=r+i.margin*2,o=i.color.light.a?"<path "+zo(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+zo(i.color.dark,"stroke")+' d="'+vm(a,r,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+o+u+`</svg>
`;return typeof s=="function"&&s(null,h),h};const _m=Rg,al=Hu,rf=nf,bm=sf;function Rl(n,e,t,s,i){const r=[].slice.call(arguments,1),a=r.length,l=typeof r[a-1]=="function";if(!l&&!_m())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(i=t,t=e,e=s=void 0):a===3&&(e.getContext&&typeof i>"u"?(i=s,s=void 0):(i=s,s=t,t=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(t=e,e=s=void 0):a===2&&!e.getContext&&(s=t,t=e,e=void 0),new Promise(function(o,u){try{const d=al.create(t,s);o(n(d,e,s))}catch(d){u(d)}})}try{const o=al.create(t,s);i(null,n(o,e,s))}catch(o){i(o)}}ii.create=al.create;ii.toCanvas=Rl.bind(null,rf.render);ii.toDataURL=Rl.bind(null,rf.renderToDataURL);ii.toString=Rl.bind(null,function(n,e,t){return bm.render(n,t)});function qo(n){let e,t,s,i="Scan to Join",r,a,l,o,u,d,b,h,p,g,E,C="Regenerate",S,k,v="Close",m,T;return{c(){e=y("div"),t=y("div"),s=y("h2"),s.textContent=i,r=O(),a=y("canvas"),l=O(),o=y("p"),u=X(n[4]),d=O(),b=y("div"),h=y("input"),p=O(),g=y("div"),E=y("button"),E.textContent=C,S=O(),k=y("button"),k.textContent=v,this.h()},l(A){e=w(A,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var D=I(e);t=w(D,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var N=I(t);s=w(N,"H2",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1af6bt8"&&(s.textContent=i),r=P(N),a=w(N,"CANVAS",{}),I(a).forEach(_),l=P(N),o=w(N,"P",{class:!0});var R=I(o);u=K(R,n[4]),R.forEach(_),d=P(N),b=w(N,"DIV",{class:!0});var M=I(b);h=w(M,"INPUT",{type:!0,placeholder:!0,class:!0}),M.forEach(_),p=P(N),g=w(N,"DIV",{class:!0});var F=I(g);E=w(F,"BUTTON",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-10gzc5i"&&(E.textContent=C),S=P(F),k=w(F,"BUTTON",{class:!0,"data-svelte-h":!0}),J(k)!=="svelte-1muw4mw"&&(k.textContent=v),F.forEach(_),N.forEach(_),D.forEach(_),this.h()},h(){f(s,"class","svelte-13o88on"),f(o,"class","url svelte-13o88on"),f(h,"type","text"),f(h,"placeholder","Optional room name (e.g. kitchen)"),f(h,"class","svelte-13o88on"),f(b,"class","room-input svelte-13o88on"),f(E,"class","svelte-13o88on"),f(k,"class","svelte-13o88on"),f(g,"class","qr-actions svelte-13o88on"),f(t,"class","qr-modal svelte-13o88on"),f(t,"role","dialog"),f(t,"aria-modal","true"),f(t,"aria-label","QR code to join chat"),f(e,"class","qr-overlay svelte-13o88on"),f(e,"role","button"),f(e,"tabindex","0"),f(e,"aria-label","Close QR code modal")},m(A,D){j(A,e,D),c(e,t),c(t,s),c(t,r),c(t,a),n[10](a),c(t,l),c(t,o),c(o,u),c(t,d),c(t,b),c(b,h),Ke(h,n[3]),c(t,p),c(t,g),c(g,E),c(g,S),c(g,k),m||(T=[G(h,"input",n[11]),G(h,"input",n[12]),G(E,"click",n[6]),G(k,"click",n[13]),G(t,"click",_t(n[7])),G(t,"keydown",_t(n[8])),G(e,"click",n[14]),G(e,"keydown",n[15])],m=!0)},p(A,D){D&16&&te(u,A[4]),D&8&&h.value!==A[3]&&Ke(h,A[3])},d(A){A&&_(e),n[10](null),m=!1,je(T)}}}function km(n){let e,t,s,i,r,a,l,o,u,d="Join Chat",b,h,p="Join via QR Code",g,E,C,S=n[2]&&qo(n);return{c(){e=y("div"),t=y("div"),s=y("img"),r=O(),a=y("form"),l=y("input"),o=O(),u=y("button"),u.textContent=d,b=O(),h=y("button"),h.textContent=p,g=O(),S&&S.c(),this.h()},l(k){e=w(k,"DIV",{class:!0});var v=I(e);t=w(v,"DIV",{class:!0});var m=I(t);s=w(m,"IMG",{src:!0,alt:!0,class:!0}),r=P(m),a=w(m,"FORM",{});var T=I(a);l=w(T,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=P(T),u=w(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(u)!=="svelte-fr4ny9"&&(u.textContent=d),T.forEach(_),b=P(m),h=w(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(h)!=="svelte-k56p15"&&(h.textContent=p),m.forEach(_),g=P(v),S&&S.l(v),v.forEach(_),this.h()},h(){Re(s.src,i="/wabi-logo.png")||f(s,"src",i),f(s,"alt","Wabi"),f(s,"class","logo svelte-13o88on"),f(l,"type","text"),f(l,"placeholder","Enter your name"),f(l,"maxlength","20"),l.required=!0,l.autofocus=!0,f(l,"class","svelte-13o88on"),f(u,"type","submit"),f(u,"class","join-btn svelte-13o88on"),f(h,"type","button"),f(h,"class","qr-btn svelte-13o88on"),f(t,"class","login-box svelte-13o88on"),f(e,"class","login-container svelte-13o88on")},m(k,v){j(k,e,v),c(e,t),c(t,s),c(t,r),c(t,a),c(a,l),Ke(l,n[0]),c(a,o),c(a,u),c(t,b),c(t,h),c(e,g),S&&S.m(e,null),l.focus(),E||(C=[G(l,"input",n[9]),G(a,"submit",hf(n[5])),G(h,"click",n[6])],E=!0)},p(k,[v]){v&1&&l.value!==k[0]&&Ke(l,k[0]),k[2]?S?S.p(k,v):(S=qo(k),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:Ne,o:Ne,d(k){k&&_(e),S&&S.d(),E=!1,je(C)}}}function wm(n,e,t){let s;const i=ni();let r="",a,l=!1,o="";function u(){r.trim()&&(localStorage.setItem("wabi-username",r.trim()),i("login",r.trim()))}function d(){t(2,l=!0),setTimeout(()=>{const m=o.trim()?`${s}?room=${encodeURIComponent(o.trim())}`:s;ii.toCanvas(a,m,{width:300,margin:2,color:{dark:"#ffffff",light:"#00000000"}})},50)}Tn(()=>{const T=new URLSearchParams(window.location.search).get("room");T&&t(3,o=T)});function b(m){pn.call(this,n,m)}function h(m){pn.call(this,n,m)}function p(){r=this.value,t(0,r)}function g(m){lt[m?"unshift":"push"](()=>{a=m,t(1,a)})}function E(){o=this.value,t(3,o)}const C=()=>setTimeout(d,300),S=()=>t(2,l=!1),k=()=>t(2,l=!1),v=m=>(m.key==="Escape"||m.key===" ")&&t(2,l=!1);return t(4,s=typeof window<"u"?`${window.location.origin}./`:""),[r,a,l,o,s,u,d,b,h,p,g,E,C,S,k,v]}class ym extends kt{constructor(e){super(),wt(this,e,wm,km,bt,{})}}function Ho(n,e,t){const s=n.slice();return s[27]=e[t],s}function xo(n){let e,t,s,i="Total Messages",r,a,l=n[3].totalMessages.toLocaleString()+"",o,u,d,b,h="Storage Used",p,g,E=Qi(n[3].totalSize)+"",C,S,k,v,m="Archives",T,A,D=n[3].archives.length+"",N,R,M,F,z,W="Rotation Period",B,U,Y,V="Weekly",L,H="Monthly",q,Z="Every 6 Months",$,Q="Yearly",oe,ae,ce="How often to create a new archive file (like changing batteries)",re,he,Ce,se,pe="Keep Last",Ge,we,Pe,ye,ne,me="archives",Ie,Ae,le="Older archives are automatically deleted to save space",Fe,Ve,ze,qe,ie="ðŸ—‘ï¸ Clear All History",_e,be;function de(Se,Ue){return Se[3].archives.length>0?Cm:Em}let He=de(n),$e=He(n);return{c(){e=y("div"),t=y("div"),s=y("div"),s.textContent=i,r=O(),a=y("div"),o=X(l),u=O(),d=y("div"),b=y("div"),b.textContent=h,p=O(),g=y("div"),C=X(E),S=O(),k=y("div"),v=y("div"),v.textContent=m,T=O(),A=y("div"),N=X(D),R=O(),M=y("div"),F=y("label"),z=y("span"),z.textContent=W,B=O(),U=y("select"),Y=y("option"),Y.textContent=V,L=y("option"),L.textContent=H,q=y("option"),q.textContent=Z,$=y("option"),$.textContent=Q,oe=O(),ae=y("p"),ae.textContent=ce,re=O(),he=y("div"),Ce=y("label"),se=y("span"),se.textContent=pe,Ge=O(),we=y("div"),Pe=y("input"),ye=O(),ne=y("span"),ne.textContent=me,Ie=O(),Ae=y("p"),Ae.textContent=le,Fe=O(),$e.c(),Ve=O(),ze=y("div"),qe=y("button"),qe.textContent=ie,this.h()},l(Se){e=w(Se,"DIV",{class:!0});var Ue=I(e);t=w(Ue,"DIV",{class:!0});var ft=I(t);s=w(ft,"DIV",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-akn32o"&&(s.textContent=i),r=P(ft),a=w(ft,"DIV",{class:!0});var rt=I(a);o=K(rt,l),rt.forEach(_),ft.forEach(_),u=P(Ue),d=w(Ue,"DIV",{class:!0});var ot=I(d);b=w(ot,"DIV",{class:!0,"data-svelte-h":!0}),J(b)!=="svelte-5vlbe4"&&(b.textContent=h),p=P(ot),g=w(ot,"DIV",{class:!0});var Nt=I(g);C=K(Nt,E),Nt.forEach(_),ot.forEach(_),S=P(Ue),k=w(Ue,"DIV",{class:!0});var ct=I(k);v=w(ct,"DIV",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1e1df45"&&(v.textContent=m),T=P(ct),A=w(ct,"DIV",{class:!0});var an=I(A);N=K(an,D),an.forEach(_),ct.forEach(_),Ue.forEach(_),R=P(Se),M=w(Se,"DIV",{class:!0});var Pt=I(M);F=w(Pt,"LABEL",{class:!0});var Tt=I(F);z=w(Tt,"SPAN",{class:!0,"data-svelte-h":!0}),J(z)!=="svelte-608xyy"&&(z.textContent=W),B=P(Tt),U=w(Tt,"SELECT",{class:!0});var zt=I(U);Y=w(zt,"OPTION",{"data-svelte-h":!0}),J(Y)!=="svelte-crm6lv"&&(Y.textContent=V),L=w(zt,"OPTION",{"data-svelte-h":!0}),J(L)!=="svelte-hva46z"&&(L.textContent=H),q=w(zt,"OPTION",{"data-svelte-h":!0}),J(q)!=="svelte-1s0lvql"&&(q.textContent=Z),$=w(zt,"OPTION",{"data-svelte-h":!0}),J($)!=="svelte-jp5v27"&&($.textContent=Q),zt.forEach(_),Tt.forEach(_),oe=P(Pt),ae=w(Pt,"P",{class:!0,"data-svelte-h":!0}),J(ae)!=="svelte-qu5pay"&&(ae.textContent=ce),Pt.forEach(_),re=P(Se),he=w(Se,"DIV",{class:!0});var on=I(he);Ce=w(on,"LABEL",{class:!0});var mt=I(Ce);se=w(mt,"SPAN",{class:!0,"data-svelte-h":!0}),J(se)!=="svelte-1im50qe"&&(se.textContent=pe),Ge=P(mt),we=w(mt,"DIV",{class:!0});var Lt=I(we);Pe=w(Lt,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ye=P(Lt),ne=w(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),J(ne)!=="svelte-nj3imy"&&(ne.textContent=me),Lt.forEach(_),mt.forEach(_),Ie=P(on),Ae=w(on,"P",{class:!0,"data-svelte-h":!0}),J(Ae)!=="svelte-he359b"&&(Ae.textContent=le),on.forEach(_),Fe=P(Se),$e.l(Se),Ve=P(Se),ze=w(Se,"DIV",{class:!0});var Ln=I(ze);qe=w(Ln,"BUTTON",{class:!0,"data-svelte-h":!0}),J(qe)!=="svelte-1u0bcm7"&&(qe.textContent=ie),Ln.forEach(_),this.h()},h(){f(s,"class","stat-label svelte-1jfalu6"),f(a,"class","stat-value svelte-1jfalu6"),f(t,"class","stat svelte-1jfalu6"),f(b,"class","stat-label svelte-1jfalu6"),f(g,"class","stat-value svelte-1jfalu6"),f(d,"class","stat svelte-1jfalu6"),f(v,"class","stat-label svelte-1jfalu6"),f(A,"class","stat-value svelte-1jfalu6"),f(k,"class","stat svelte-1jfalu6"),f(e,"class","stats-panel svelte-1jfalu6"),f(z,"class","label svelte-1jfalu6"),Y.__value="week",Ke(Y,Y.__value),L.__value="month",Ke(L,L.__value),q.__value="half-year",Ke(q,q.__value),$.__value="year",Ke($,$.__value),f(U,"class","svelte-1jfalu6"),n[1]===void 0&&$c(()=>n[20].call(U)),f(F,"class","svelte-1jfalu6"),f(ae,"class","hint svelte-1jfalu6"),f(M,"class","setting-group svelte-1jfalu6"),f(se,"class","label svelte-1jfalu6"),f(Pe,"type","number"),f(Pe,"min","1"),f(Pe,"max","52"),f(Pe,"class","svelte-1jfalu6"),f(ne,"class","unit svelte-1jfalu6"),f(we,"class","number-input-group svelte-1jfalu6"),f(Ce,"class","svelte-1jfalu6"),f(Ae,"class","hint svelte-1jfalu6"),f(he,"class","setting-group svelte-1jfalu6"),f(qe,"class","btn-danger svelte-1jfalu6"),f(ze,"class","actions svelte-1jfalu6")},m(Se,Ue){j(Se,e,Ue),c(e,t),c(t,s),c(t,r),c(t,a),c(a,o),c(e,u),c(e,d),c(d,b),c(d,p),c(d,g),c(g,C),c(e,S),c(e,k),c(k,v),c(k,T),c(k,A),c(A,N),j(Se,R,Ue),j(Se,M,Ue),c(M,F),c(F,z),c(F,B),c(F,U),c(U,Y),c(U,L),c(U,q),c(U,$),Hi(U,n[1],!0),c(M,oe),c(M,ae),j(Se,re,Ue),j(Se,he,Ue),c(he,Ce),c(Ce,se),c(Ce,Ge),c(Ce,we),c(we,Pe),Ke(Pe,n[2]),c(we,ye),c(we,ne),c(he,Ie),c(he,Ae),j(Se,Fe,Ue),$e.m(Se,Ue),j(Se,Ve,Ue),j(Se,ze,Ue),c(ze,qe),_e||(be=[G(U,"change",n[20]),G(U,"change",n[11]),G(Pe,"input",n[21]),G(Pe,"change",n[12]),G(qe,"click",n[17])],_e=!0)},p(Se,Ue){Ue&8&&l!==(l=Se[3].totalMessages.toLocaleString()+"")&&te(o,l),Ue&8&&E!==(E=Qi(Se[3].totalSize)+"")&&te(C,E),Ue&8&&D!==(D=Se[3].archives.length+"")&&te(N,D),Ue&2&&Hi(U,Se[1]),Ue&4&&ol(Pe.value)!==Se[2]&&Ke(Pe,Se[2]),He===(He=de(Se))&&$e?$e.p(Se,Ue):($e.d(1),$e=He(Se),$e&&($e.c(),$e.m(Ve.parentNode,Ve)))},d(Se){Se&&(_(e),_(R),_(M),_(re),_(he),_(Fe),_(Ve),_(ze)),$e.d(Se),_e=!1,je(be)}}}function Em(n){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1jfalu6")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function Cm(n){let e,t,s,i="Archive History",r,a,l="ðŸ“¦ Export All",o,u,d,b,h=xe(n[3].archives),p=[];for(let g=0;g<h.length;g+=1)p[g]=Go(Ho(n,h,g));return{c(){e=y("div"),t=y("div"),s=y("h4"),s.textContent=i,r=O(),a=y("button"),a.textContent=l,o=O(),u=y("div");for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){e=w(g,"DIV",{class:!0});var E=I(e);t=w(E,"DIV",{class:!0});var C=I(t);s=w(C,"H4",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1i91zrs"&&(s.textContent=i),r=P(C),a=w(C,"BUTTON",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-197zvis"&&(a.textContent=l),C.forEach(_),o=P(E),u=w(E,"DIV",{class:!0});var S=I(u);for(let k=0;k<p.length;k+=1)p[k].l(S);S.forEach(_),E.forEach(_),this.h()},h(){f(s,"class","svelte-1jfalu6"),f(a,"class","btn-small svelte-1jfalu6"),f(t,"class","section-header svelte-1jfalu6"),f(u,"class","archive-list svelte-1jfalu6"),f(e,"class","archives-section svelte-1jfalu6")},m(g,E){j(g,e,E),c(e,t),c(t,s),c(t,r),c(t,a),c(e,o),c(e,u);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(u,null);d||(b=G(a,"click",n[16]),d=!0)},p(g,E){if(E&40968){h=xe(g[3].archives);let C;for(C=0;C<h.length;C+=1){const S=Ho(g,h,C);p[C]?p[C].p(S,E):(p[C]=Go(S),p[C].c(),p[C].m(u,null))}for(;C<p.length;C+=1)p[C].d(1);p.length=h.length}},d(g){g&&_(e),Is(p,g),d=!1,b()}}}function Go(n){let e,t,s,i=$i(n[27].period)+"",r,a,l,o=Qi(n[27].size)+"",u,d,b=n[27].messageCount.toLocaleString()+"",h,p,g,E,C,S="ðŸ’¾",k,v,m="ðŸ—‘ï¸",T,A,D;function N(){return n[22](n[27])}function R(){return n[23](n[27])}return{c(){e=y("div"),t=y("div"),s=y("span"),r=X(i),a=O(),l=y("span"),u=X(o),d=X(" â€¢ "),h=X(b),p=X(" messages"),g=O(),E=y("div"),C=y("button"),C.textContent=S,k=O(),v=y("button"),v.textContent=m,T=O(),this.h()},l(M){e=w(M,"DIV",{class:!0});var F=I(e);t=w(F,"DIV",{class:!0});var z=I(t);s=w(z,"SPAN",{class:!0});var W=I(s);r=K(W,i),W.forEach(_),a=P(z),l=w(z,"SPAN",{class:!0});var B=I(l);u=K(B,o),d=K(B," â€¢ "),h=K(B,b),p=K(B," messages"),B.forEach(_),z.forEach(_),g=P(F),E=w(F,"DIV",{class:!0});var U=I(E);C=w(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(C)!=="svelte-13e8aja"&&(C.textContent=S),k=P(U),v=w(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(v)!=="svelte-1br206h"&&(v.textContent=m),U.forEach(_),T=P(F),F.forEach(_),this.h()},h(){f(s,"class","archive-period svelte-1jfalu6"),f(l,"class","archive-meta svelte-1jfalu6"),f(t,"class","archive-info svelte-1jfalu6"),f(C,"class","btn-icon svelte-1jfalu6"),f(C,"title","Export"),f(v,"class","btn-icon danger svelte-1jfalu6"),f(v,"title","Delete"),f(E,"class","archive-actions svelte-1jfalu6"),f(e,"class","archive-item svelte-1jfalu6")},m(M,F){j(M,e,F),c(e,t),c(t,s),c(s,r),c(t,a),c(t,l),c(l,u),c(l,d),c(l,h),c(l,p),c(e,g),c(e,E),c(E,C),c(E,k),c(E,v),c(e,T),A||(D=[G(C,"click",N),G(v,"click",R)],A=!0)},p(M,F){n=M,F&8&&i!==(i=$i(n[27].period)+"")&&te(r,i),F&8&&o!==(o=Qi(n[27].size)+"")&&te(u,o),F&8&&b!==(b=n[27].messageCount.toLocaleString()+"")&&te(h,b)},d(M){M&&_(e),A=!1,je(D)}}}function Tm(n){let e,t,s='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',i,r,a,l,o,u,d="Save chat history locally",b,h,p="When enabled, messages are stored in your browser. You control your data.",g,E,C,S,k,v,m,T,A,D,N=n[0]&&xo(n);return C=new fs({props:{isOpen:n[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:n[9],onCancel:n[10]}}),k=new fs({props:{isOpen:n[5],title:"Delete Archive",message:`Delete archive "${$i(n[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:n[14],onCancel:n[24]}}),m=new fs({props:{isOpen:n[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[18],onCancel:n[25]}}),{c(){e=y("div"),t=y("div"),t.innerHTML=s,i=O(),r=y("div"),a=y("label"),l=y("input"),o=O(),u=y("span"),u.textContent=d,b=O(),h=y("p"),h.textContent=p,g=O(),N&&N.c(),E=O(),it(C.$$.fragment),S=O(),it(k.$$.fragment),v=O(),it(m.$$.fragment),this.h()},l(R){e=w(R,"DIV",{class:!0});var M=I(e);t=w(M,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-s9o5r3"&&(t.innerHTML=s),i=P(M),r=w(M,"DIV",{class:!0});var F=I(r);a=w(F,"LABEL",{class:!0});var z=I(a);l=w(z,"INPUT",{type:!0,class:!0}),o=P(z),u=w(z,"SPAN",{class:!0,"data-svelte-h":!0}),J(u)!=="svelte-1ssgcs1"&&(u.textContent=d),z.forEach(_),b=P(F),h=w(F,"P",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1hbmqvb"&&(h.textContent=p),F.forEach(_),g=P(M),N&&N.l(M),M.forEach(_),E=P(R),st(C.$$.fragment,R),S=P(R),st(k.$$.fragment,R),v=P(R),st(m.$$.fragment,R),this.h()},h(){f(t,"class","header svelte-1jfalu6"),f(l,"type","checkbox"),f(l,"class","svelte-1jfalu6"),f(u,"class","toggle-label"),f(a,"class","toggle-setting svelte-1jfalu6"),f(h,"class","hint svelte-1jfalu6"),f(r,"class","setting-group svelte-1jfalu6"),f(e,"class","storage-settings svelte-1jfalu6")},m(R,M){j(R,e,M),c(e,t),c(e,i),c(e,r),c(r,a),c(a,l),l.checked=n[0],c(a,o),c(a,u),c(r,b),c(r,h),c(e,g),N&&N.m(e,null),j(R,E,M),nt(C,R,M),j(R,S,M),nt(k,R,M),j(R,v,M),nt(m,R,M),T=!0,A||(D=[G(l,"change",n[19]),G(l,"change",n[8])],A=!0)},p(R,[M]){M&1&&(l.checked=R[0]),R[0]?N?N.p(R,M):(N=xo(R),N.c(),N.m(e,null)):N&&(N.d(1),N=null);const F={};M&16&&(F.isOpen=R[4]),C.$set(F);const z={};M&32&&(z.isOpen=R[5]),M&64&&(z.message=`Delete archive "${$i(R[6])}"?`),M&32&&(z.onCancel=R[24]),k.$set(z);const W={};M&128&&(W.isOpen=R[7]),M&128&&(W.onCancel=R[25]),m.$set(W)},i(R){T||(Te(C.$$.fragment,R),Te(k.$$.fragment,R),Te(m.$$.fragment,R),T=!0)},o(R){De(C.$$.fragment,R),De(k.$$.fragment,R),De(m.$$.fragment,R),T=!1},d(R){R&&(_(e),_(E),_(S),_(v)),N&&N.d(),tt(C,R),tt(k,R),tt(m,R),A=!1,je(D)}}}function Qi(n){if(n===0)return"0 B";const e=n/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}function $i(n){if(n.includes("-W")){const[e,t]=n.split("-W");return`Week ${t}, ${e}`}else if(n.includes("-H")){const[e,t]=n.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(n.match(/^\d{4}-\d{2}$/)){const[e,t]=n.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${n}`}function Sm(n,e,t){let s=!1,i=$t.getRotationPeriod(),r=$t.getMaxArchives(),a={archives:[],totalSize:0,totalMessages:0},l=!1,o=!1,u="",d=!1;async function b(){t(0,s=!s),await $t.setEnabled(s),s?await A():t(4,l=!0)}async function h(){t(4,l=!1),await A()}function p(){t(0,s=!0),$t.setEnabled(!0),t(4,l=!1)}async function g(){await $t.setRotationPeriod(i),await A()}async function E(){await $t.setMaxArchives(r),await A()}async function C(B){t(6,u=B),t(5,o=!0)}async function S(){await $t.deleteArchive(u),await A(),t(5,o=!1)}async function k(B){await $t.exportArchive(B)}async function v(){await $t.exportArchives()}async function m(){t(7,d=!0)}async function T(){await $t.clearAllHistory(),await A(),t(7,d=!1)}async function A(){t(3,a=await $t.getStats())}Tn(async()=>{t(0,s=await $t.isEnabled()),await A()});function D(){s=this.checked,t(0,s)}function N(){i=eu(this),t(1,i)}function R(){r=ol(this.value),t(2,r)}return[s,i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T,D,N,R,B=>k(B.period),B=>C(B.period),()=>t(5,o=!1),()=>t(7,d=!1)]}class Am extends kt{constructor(e){super(),wt(this,e,Sm,Tm,bt,{})}}function Wo(n,e,t){const s=n.slice();return s[59]=e[t],s}function Yo(n,e,t){const s=n.slice();return s[62]=e[t],s[63]=e,s[64]=t,s}function Ko(n){let e,t,s,i,r="âš™ï¸ Settings",a,l,o="âœ•",u,d,b,h,p="ðŸŽ¤ Audio & Video",g,E,C,S='<span class="setting-label svelte-1wki486">Sound Effects</span> <span class="setting-description svelte-1wki486">Play sounds for messages and notifications</span>',k,v,m=n[1]?"ðŸ”Š":"ðŸ”‡",T,A,D,N,R='<span class="setting-label svelte-1wki486">Microphone</span> <span class="setting-description svelte-1wki486">Enable microphone for voice calls</span>',M,F,z=n[3]?"ðŸŽ¤":"ðŸ”‡",W,B,U,Y,V='<span class="setting-label svelte-1wki486">Camera</span> <span class="setting-description svelte-1wki486">Enable camera for video calls</span>',L,H,q=n[4]?"ðŸ“¹":"ðŸ“·",Z,$,Q,oe,ae="ðŸ”” Notifications",ce,re,he,Ce='<span class="setting-label svelte-1wki486">Desktop Notifications</span> <span class="setting-description svelte-1wki486">Get notified when you receive new messages</span>',se,pe,Ge=n[2]?"âœ… Enabled":"ðŸ”” Enable",we,Pe,ye,ne,me='<span class="setting-label svelte-1wki486">ðŸ”Š Notification Sound</span> <span class="setting-description svelte-1wki486">Choose which sound to play for notifications</span>',Ie,Ae,le,Fe="ProjectSound.ogg",Ve,ze,qe="ðŸŽµ Test Sound",ie,_e,be,de,He="ðŸ”‰ Notification Volume",$e,Se,Ue,ft=Math.round(n[7]*100)+"",rt,ot,Nt,ct,an,Pt,Tt,zt="ðŸŽ¨ Appearance",on,mt,Lt,Ln='<span class="setting-label svelte-1wki486">Theme</span> <span class="setting-description svelte-1wki486">Switch between light and dark mode</span>',ht,St,ee=n[5]==="dark"?"ðŸŒ™":"â˜€ï¸",Ee,Ot,Rt,pt,gs="ðŸ–¥ï¸ Server Management",Kt,Bt,Sn,Ps='<span class="setting-label svelte-1wki486">Clear All Server Messages</span> <span class="setting-description svelte-1wki486">Delete all messages from the server for all users (cannot be undone)</span>',ss,_n,cn="ðŸ—‘ï¸ Clear Server",ms,qt,An,Os="ðŸŽ¨ Custom Emojis",Rs,ge,x,ue,ke,Je,gt=n[14]?"ðŸ“· Change Image":"ðŸ“ Select Image",dt,At,vt,In,Mt,at,Ms="Custom",un,Bl="Animated",Bn,Ul="Art",Un,Vl="Memes",fr,Vn,Fs=n[15]?"â³ Uploading...":"â¬†ï¸ Upload Emoji",oi,ci,dr,is,jl="Supports PNG, GIF (animated), JPG. Max 2MB.",hr,Ht,rs,zl="ðŸ“¦ Bulk Upload",pr,jn,gr,Wn,ql="ðŸ“‚ Select Multiple Images",mr,ui,ls,Hl="Auto-names from filenames. Edit names before uploading.",vr,Yn,Kn,_r,Ls=n[19].filter($o).length+"",fi,br,kr,as,fn=[],xl=new Map,wr,vs,os,yr,cs,Gl='<h3 class="svelte-1wki486">â„¹ï¸ About</h3> <div class="about-info svelte-1wki486"><p class="svelte-1wki486"><strong class="svelte-1wki486">Wabi Chat</strong></p> <p class="svelte-1wki486">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-1wki486">Server stores nothing permanently. You control your data.</p> <p class="version svelte-1wki486">Version 1.0.0</p></div>',yt,Er,Wl,Ut=n[14]&&Xo(n),Vt=n[17].length>0&&Zo(n),di=xe(n[19].filter(ec));const Yl=Oe=>Oe[59].id;for(let Oe=0;Oe<di.length;Oe+=1){let Ye=Wo(n,di,Oe),dn=Yl(Ye);xl.set(dn,fn[Oe]=Qo(dn,Ye))}return os=new Am({}),{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h2"),i.textContent=r,a=O(),l=y("button"),l.textContent=o,u=O(),d=y("div"),b=y("div"),h=y("h3"),h.textContent=p,g=O(),E=y("div"),C=y("div"),C.innerHTML=S,k=O(),v=y("button"),T=X(m),A=O(),D=y("div"),N=y("div"),N.innerHTML=R,M=O(),F=y("button"),W=X(z),B=O(),U=y("div"),Y=y("div"),Y.innerHTML=V,L=O(),H=y("button"),Z=X(q),$=O(),Q=y("div"),oe=y("h3"),oe.textContent=ae,ce=O(),re=y("div"),he=y("div"),he.innerHTML=Ce,se=O(),pe=y("button"),we=X(Ge),Pe=O(),ye=y("div"),ne=y("div"),ne.innerHTML=me,Ie=O(),Ae=y("div"),le=y("button"),le.textContent=Fe,Ve=O(),ze=y("button"),ze.textContent=qe,ie=O(),_e=y("div"),be=y("div"),de=y("span"),de.textContent=He,$e=O(),Se=y("span"),Ue=X("Adjust the volume of notification sounds ("),rt=X(ft),ot=X("%)"),Nt=O(),ct=y("input"),an=O(),Pt=y("div"),Tt=y("h3"),Tt.textContent=zt,on=O(),mt=y("div"),Lt=y("div"),Lt.innerHTML=Ln,ht=O(),St=y("button"),Ee=X(ee),Ot=O(),Rt=y("div"),pt=y("h3"),pt.textContent=gs,Kt=O(),Bt=y("div"),Sn=y("div"),Sn.innerHTML=Ps,ss=O(),_n=y("button"),_n.textContent=cn,ms=O(),qt=y("div"),An=y("h3"),An.textContent=Os,Rs=O(),ge=y("div"),x=y("input"),ue=O(),Ut&&Ut.c(),ke=O(),Je=y("button"),dt=X(gt),At=O(),vt=y("input"),In=O(),Mt=y("select"),at=y("option"),at.textContent=Ms,un=y("option"),un.textContent=Bl,Bn=y("option"),Bn.textContent=Ul,Un=y("option"),Un.textContent=Vl,fr=O(),Vn=y("button"),oi=X(Fs),dr=O(),is=y("p"),is.textContent=jl,hr=O(),Ht=y("div"),rs=y("h4"),rs.textContent=zl,pr=O(),jn=y("input"),gr=O(),Wn=y("button"),Wn.textContent=ql,mr=O(),Vt&&Vt.c(),ui=O(),ls=y("p"),ls.textContent=Hl,vr=O(),Yn=y("div"),Kn=y("h4"),_r=X("Your Custom Emojis ("),fi=X(Ls),br=X(")"),kr=O(),as=y("div");for(let Oe=0;Oe<fn.length;Oe+=1)fn[Oe].c();wr=O(),vs=y("div"),it(os.$$.fragment),yr=O(),cs=y("div"),cs.innerHTML=Gl,this.h()},l(Oe){e=w(Oe,"DIV",{class:!0});var Ye=I(e);t=w(Ye,"DIV",{class:!0});var dn=I(t);s=w(dn,"DIV",{class:!0});var hi=I(s);i=w(hi,"H2",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-15bbpfh"&&(i.textContent=r),a=P(hi),l=w(hi,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-3o141q"&&(l.textContent=o),hi.forEach(_),u=P(dn),d=w(dn,"DIV",{class:!0});var Xt=I(d);b=w(Xt,"DIV",{class:!0});var Xn=I(b);h=w(Xn,"H3",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1tdb4hv"&&(h.textContent=p),g=P(Xn),E=w(Xn,"DIV",{class:!0});var pi=I(E);C=w(pi,"DIV",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-5e193f"&&(C.innerHTML=S),k=P(pi),v=w(pi,"BUTTON",{class:!0});var Kl=I(v);T=K(Kl,m),Kl.forEach(_),pi.forEach(_),A=P(Xn),D=w(Xn,"DIV",{class:!0});var gi=I(D);N=w(gi,"DIV",{class:!0,"data-svelte-h":!0}),J(N)!=="svelte-ql0oob"&&(N.innerHTML=R),M=P(gi),F=w(gi,"BUTTON",{class:!0});var Xl=I(F);W=K(Xl,z),Xl.forEach(_),gi.forEach(_),B=P(Xn),U=w(Xn,"DIV",{class:!0});var mi=I(U);Y=w(mi,"DIV",{class:!0,"data-svelte-h":!0}),J(Y)!=="svelte-fu2kxq"&&(Y.innerHTML=V),L=P(mi),H=w(mi,"BUTTON",{class:!0});var Zl=I(H);Z=K(Zl,q),Zl.forEach(_),mi.forEach(_),Xn.forEach(_),$=P(Xt),Q=w(Xt,"DIV",{class:!0});var Zn=I(Q);oe=w(Zn,"H3",{class:!0,"data-svelte-h":!0}),J(oe)!=="svelte-yb4801"&&(oe.textContent=ae),ce=P(Zn),re=w(Zn,"DIV",{class:!0});var vi=I(re);he=w(vi,"DIV",{class:!0,"data-svelte-h":!0}),J(he)!=="svelte-11j8eba"&&(he.innerHTML=Ce),se=P(vi),pe=w(vi,"BUTTON",{class:!0});var Jl=I(pe);we=K(Jl,Ge),Jl.forEach(_),vi.forEach(_),Pe=P(Zn),ye=w(Zn,"DIV",{class:!0});var _s=I(ye);ne=w(_s,"DIV",{class:!0,"data-svelte-h":!0}),J(ne)!=="svelte-1xiuakk"&&(ne.innerHTML=me),Ie=P(_s),Ae=w(_s,"DIV",{class:!0});var Ql=I(Ae);le=w(Ql,"BUTTON",{class:!0,"data-svelte-h":!0}),J(le)!=="svelte-uo9hxj"&&(le.textContent=Fe),Ql.forEach(_),Ve=P(_s),ze=w(_s,"BUTTON",{class:!0,"data-svelte-h":!0}),J(ze)!=="svelte-1g396qj"&&(ze.textContent=qe),_s.forEach(_),ie=P(Zn),_e=w(Zn,"DIV",{class:!0});var _i=I(_e);be=w(_i,"DIV",{class:!0});var bi=I(be);de=w(bi,"SPAN",{class:!0,"data-svelte-h":!0}),J(de)!=="svelte-wf5473"&&(de.textContent=He),$e=P(bi),Se=w(bi,"SPAN",{class:!0});var ki=I(Se);Ue=K(ki,"Adjust the volume of notification sounds ("),rt=K(ki,ft),ot=K(ki,"%)"),ki.forEach(_),bi.forEach(_),Nt=P(_i),ct=w(_i,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),_i.forEach(_),Zn.forEach(_),an=P(Xt),Pt=w(Xt,"DIV",{class:!0});var wi=I(Pt);Tt=w(wi,"H3",{class:!0,"data-svelte-h":!0}),J(Tt)!=="svelte-bdq4j0"&&(Tt.textContent=zt),on=P(wi),mt=w(wi,"DIV",{class:!0});var yi=I(mt);Lt=w(yi,"DIV",{class:!0,"data-svelte-h":!0}),J(Lt)!=="svelte-1expsbb"&&(Lt.innerHTML=Ln),ht=P(yi),St=w(yi,"BUTTON",{class:!0});var $l=I(St);Ee=K($l,ee),$l.forEach(_),yi.forEach(_),wi.forEach(_),Ot=P(Xt),Rt=w(Xt,"DIV",{class:!0});var Ei=I(Rt);pt=w(Ei,"H3",{class:!0,"data-svelte-h":!0}),J(pt)!=="svelte-13bxj89"&&(pt.textContent=gs),Kt=P(Ei),Bt=w(Ei,"DIV",{class:!0});var Ci=I(Bt);Sn=w(Ci,"DIV",{class:!0,"data-svelte-h":!0}),J(Sn)!=="svelte-1kywvm7"&&(Sn.innerHTML=Ps),ss=P(Ci),_n=w(Ci,"BUTTON",{class:!0,"data-svelte-h":!0}),J(_n)!=="svelte-uzfcg3"&&(_n.textContent=cn),Ci.forEach(_),Ei.forEach(_),ms=P(Xt),qt=w(Xt,"DIV",{class:!0});var Jn=I(qt);An=w(Jn,"H3",{class:!0,"data-svelte-h":!0}),J(An)!=="svelte-vyc55a"&&(An.textContent=Os),Rs=P(Jn),ge=w(Jn,"DIV",{class:!0});var Zt=I(ge);x=w(Zt,"INPUT",{type:!0,accept:!0,style:!0}),ue=P(Zt),Ut&&Ut.l(Zt),ke=P(Zt),Je=w(Zt,"BUTTON",{class:!0});var ea=I(Je);dt=K(ea,gt),ea.forEach(_),At=P(Zt),vt=w(Zt,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),In=P(Zt),Mt=w(Zt,"SELECT",{class:!0});var Bs=I(Mt);at=w(Bs,"OPTION",{"data-svelte-h":!0}),J(at)!=="svelte-15u4c16"&&(at.textContent=Ms),un=w(Bs,"OPTION",{"data-svelte-h":!0}),J(un)!=="svelte-1mejmsi"&&(un.textContent=Bl),Bn=w(Bs,"OPTION",{"data-svelte-h":!0}),J(Bn)!=="svelte-1ws28ik"&&(Bn.textContent=Ul),Un=w(Bs,"OPTION",{"data-svelte-h":!0}),J(Un)!=="svelte-zp25m8"&&(Un.textContent=Vl),Bs.forEach(_),fr=P(Zt),Vn=w(Zt,"BUTTON",{class:!0});var ta=I(Vn);oi=K(ta,Fs),ta.forEach(_),dr=P(Zt),is=w(Zt,"P",{class:!0,"data-svelte-h":!0}),J(is)!=="svelte-oq0lv2"&&(is.textContent=jl),Zt.forEach(_),hr=P(Jn),Ht=w(Jn,"DIV",{class:!0});var Dn=I(Ht);rs=w(Dn,"H4",{class:!0,"data-svelte-h":!0}),J(rs)!=="svelte-11rc5vc"&&(rs.textContent=zl),pr=P(Dn),jn=w(Dn,"INPUT",{type:!0,accept:!0,style:!0}),gr=P(Dn),Wn=w(Dn,"BUTTON",{class:!0,"data-svelte-h":!0}),J(Wn)!=="svelte-oo9c75"&&(Wn.textContent=ql),mr=P(Dn),Vt&&Vt.l(Dn),ui=P(Dn),ls=w(Dn,"P",{class:!0,"data-svelte-h":!0}),J(ls)!=="svelte-nfftsh"&&(ls.textContent=Hl),Dn.forEach(_),vr=P(Jn),Yn=w(Jn,"DIV",{class:!0});var Ti=I(Yn);Kn=w(Ti,"H4",{class:!0});var Si=I(Kn);_r=K(Si,"Your Custom Emojis ("),fi=K(Si,Ls),br=K(Si,")"),Si.forEach(_),kr=P(Ti),as=w(Ti,"DIV",{class:!0});var na=I(as);for(let Cr=0;Cr<fn.length;Cr+=1)fn[Cr].l(na);na.forEach(_),Ti.forEach(_),Jn.forEach(_),wr=P(Xt),vs=w(Xt,"DIV",{class:!0});var sa=I(vs);st(os.$$.fragment,sa),sa.forEach(_),yr=P(Xt),cs=w(Xt,"DIV",{class:!0,"data-svelte-h":!0}),J(cs)!=="svelte-137zy12"&&(cs.innerHTML=Gl),Xt.forEach(_),dn.forEach(_),Ye.forEach(_),this.h()},h(){f(i,"class","svelte-1wki486"),f(l,"class","close-btn svelte-1wki486"),f(s,"class","modal-header svelte-1wki486"),f(h,"class","svelte-1wki486"),f(C,"class","setting-info svelte-1wki486"),f(v,"class","toggle-btn svelte-1wki486"),ve(v,"active",n[1]),f(E,"class","setting-item svelte-1wki486"),f(N,"class","setting-info svelte-1wki486"),f(F,"class","toggle-btn svelte-1wki486"),ve(F,"active",n[3]),f(D,"class","setting-item svelte-1wki486"),f(Y,"class","setting-info svelte-1wki486"),f(H,"class","toggle-btn svelte-1wki486"),ve(H,"active",n[4]),f(U,"class","setting-item svelte-1wki486"),f(b,"class","settings-section svelte-1wki486"),f(oe,"class","svelte-1wki486"),f(he,"class","setting-info svelte-1wki486"),f(pe,"class","action-btn svelte-1wki486"),ve(pe,"active",n[2]),f(re,"class","setting-item svelte-1wki486"),f(ne,"class","setting-info svelte-1wki486"),f(le,"class","sound-option svelte-1wki486"),ve(le,"active",n[6]==="/sounds/ProjectSound.ogg"),f(Ae,"class","sound-options svelte-1wki486"),f(ze,"class","test-sound-btn svelte-1wki486"),f(ye,"class","setting-item-full svelte-1wki486"),f(de,"class","setting-label svelte-1wki486"),f(Se,"class","setting-description svelte-1wki486"),f(be,"class","setting-info svelte-1wki486"),f(ct,"type","range"),f(ct,"min","0"),f(ct,"max","1"),f(ct,"step","0.05"),f(ct,"class","volume-slider svelte-1wki486"),f(_e,"class","setting-item-full svelte-1wki486"),f(Q,"class","settings-section svelte-1wki486"),f(Tt,"class","svelte-1wki486"),f(Lt,"class","setting-info svelte-1wki486"),f(St,"class","toggle-btn svelte-1wki486"),ve(St,"active",n[5]==="light"),f(mt,"class","setting-item svelte-1wki486"),f(Pt,"class","settings-section svelte-1wki486"),f(pt,"class","svelte-1wki486"),f(Sn,"class","setting-info svelte-1wki486"),f(_n,"class","action-btn danger svelte-1wki486"),f(Bt,"class","setting-item svelte-1wki486"),f(Rt,"class","settings-section svelte-1wki486"),f(An,"class","svelte-1wki486"),f(x,"type","file"),f(x,"accept","image/*"),Be(x,"display","none"),f(Je,"class","emoji-select-btn svelte-1wki486"),f(vt,"type","text"),f(vt,"placeholder","Emoji name (e.g., parrot)"),f(vt,"maxlength","30"),f(vt,"class","emoji-name-input svelte-1wki486"),at.__value="custom",Ke(at,at.__value),un.__value="animated",Ke(un,un.__value),Bn.__value="art",Ke(Bn,Bn.__value),Un.__value="memes",Ke(Un,Un.__value),f(Mt,"class","emoji-category-select svelte-1wki486"),n[12]===void 0&&$c(()=>n[45].call(Mt)),f(Vn,"class","emoji-upload-btn svelte-1wki486"),Vn.disabled=ci=n[15]||!n[13]||!n[11].trim(),f(is,"class","emoji-hint svelte-1wki486"),f(ge,"class","emoji-upload-form svelte-1wki486"),f(rs,"class","svelte-1wki486"),f(jn,"type","file"),f(jn,"accept","image/*"),jn.multiple=!0,Be(jn,"display","none"),f(Wn,"class","emoji-select-btn svelte-1wki486"),f(ls,"class","emoji-hint svelte-1wki486"),f(Ht,"class","emoji-upload-form bulk svelte-1wki486"),f(Kn,"class","svelte-1wki486"),f(as,"class","emoji-grid-list svelte-1wki486"),f(Yn,"class","emoji-list svelte-1wki486"),f(qt,"class","settings-section svelte-1wki486"),f(vs,"class","settings-section svelte-1wki486"),f(cs,"class","settings-section svelte-1wki486"),f(d,"class","settings-sections svelte-1wki486"),f(t,"class","modal-content svelte-1wki486"),f(e,"class","modal-overlay svelte-1wki486")},m(Oe,Ye){j(Oe,e,Ye),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,u),c(t,d),c(d,b),c(b,h),c(b,g),c(b,E),c(E,C),c(E,k),c(E,v),c(v,T),c(b,A),c(b,D),c(D,N),c(D,M),c(D,F),c(F,W),c(b,B),c(b,U),c(U,Y),c(U,L),c(U,H),c(H,Z),c(d,$),c(d,Q),c(Q,oe),c(Q,ce),c(Q,re),c(re,he),c(re,se),c(re,pe),c(pe,we),c(Q,Pe),c(Q,ye),c(ye,ne),c(ye,Ie),c(ye,Ae),c(Ae,le),c(ye,Ve),c(ye,ze),c(Q,ie),c(Q,_e),c(_e,be),c(be,de),c(be,$e),c(be,Se),c(Se,Ue),c(Se,rt),c(Se,ot),c(_e,Nt),c(_e,ct),Ke(ct,n[7]),c(d,an),c(d,Pt),c(Pt,Tt),c(Pt,on),c(Pt,mt),c(mt,Lt),c(mt,ht),c(mt,St),c(St,Ee),c(d,Ot),c(d,Rt),c(Rt,pt),c(Rt,Kt),c(Rt,Bt),c(Bt,Sn),c(Bt,ss),c(Bt,_n),c(d,ms),c(d,qt),c(qt,An),c(qt,Rs),c(qt,ge),c(ge,x),n[42](x),c(ge,ue),Ut&&Ut.m(ge,null),c(ge,ke),c(ge,Je),c(Je,dt),c(ge,At),c(ge,vt),Ke(vt,n[11]),c(ge,In),c(ge,Mt),c(Mt,at),c(Mt,un),c(Mt,Bn),c(Mt,Un),Hi(Mt,n[12],!0),c(ge,fr),c(ge,Vn),c(Vn,oi),c(ge,dr),c(ge,is),c(qt,hr),c(qt,Ht),c(Ht,rs),c(Ht,pr),c(Ht,jn),n[46](jn),c(Ht,gr),c(Ht,Wn),c(Ht,mr),Vt&&Vt.m(Ht,null),c(Ht,ui),c(Ht,ls),c(qt,vr),c(qt,Yn),c(Yn,Kn),c(Kn,_r),c(Kn,fi),c(Kn,br),c(Yn,kr),c(Yn,as);for(let dn=0;dn<fn.length;dn+=1)fn[dn]&&fn[dn].m(as,null);c(d,wr),c(d,vs),nt(os,vs,null),c(d,yr),c(d,cs),yt=!0,Er||(Wl=[G(l,"click",n[37]),G(v,"click",n[20]),G(F,"click",n[21]),G(H,"click",n[22]),G(pe,"click",n[27]),G(le,"click",n[39]),G(ze,"click",n[26]),G(ct,"change",n[40]),G(ct,"input",n[40]),G(ct,"input",n[41]),G(St,"click",n[23]),G(_n,"click",n[29]),G(x,"change",n[30]),G(Je,"click",n[43]),G(vt,"input",n[44]),G(Mt,"change",n[45]),G(Vn,"click",n[31]),G(jn,"change",n[33]),G(Wn,"click",n[47]),G(t,"click",_t(n[38])),G(e,"click",n[37])],Er=!0)},p(Oe,Ye){(!yt||Ye[0]&2)&&m!==(m=Oe[1]?"ðŸ”Š":"ðŸ”‡")&&te(T,m),(!yt||Ye[0]&2)&&ve(v,"active",Oe[1]),(!yt||Ye[0]&8)&&z!==(z=Oe[3]?"ðŸŽ¤":"ðŸ”‡")&&te(W,z),(!yt||Ye[0]&8)&&ve(F,"active",Oe[3]),(!yt||Ye[0]&16)&&q!==(q=Oe[4]?"ðŸ“¹":"ðŸ“·")&&te(Z,q),(!yt||Ye[0]&16)&&ve(H,"active",Oe[4]),(!yt||Ye[0]&4)&&Ge!==(Ge=Oe[2]?"âœ… Enabled":"ðŸ”” Enable")&&te(we,Ge),(!yt||Ye[0]&4)&&ve(pe,"active",Oe[2]),(!yt||Ye[0]&64)&&ve(le,"active",Oe[6]==="/sounds/ProjectSound.ogg"),(!yt||Ye[0]&128)&&ft!==(ft=Math.round(Oe[7]*100)+"")&&te(rt,ft),Ye[0]&128&&Ke(ct,Oe[7]),(!yt||Ye[0]&32)&&ee!==(ee=Oe[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&te(Ee,ee),(!yt||Ye[0]&32)&&ve(St,"active",Oe[5]==="light"),Oe[14]?Ut?Ut.p(Oe,Ye):(Ut=Xo(Oe),Ut.c(),Ut.m(ge,ke)):Ut&&(Ut.d(1),Ut=null),(!yt||Ye[0]&16384)&&gt!==(gt=Oe[14]?"ðŸ“· Change Image":"ðŸ“ Select Image")&&te(dt,gt),Ye[0]&2048&&vt.value!==Oe[11]&&Ke(vt,Oe[11]),Ye[0]&4096&&Hi(Mt,Oe[12]),(!yt||Ye[0]&32768)&&Fs!==(Fs=Oe[15]?"â³ Uploading...":"â¬†ï¸ Upload Emoji")&&te(oi,Fs),(!yt||Ye[0]&43008&&ci!==(ci=Oe[15]||!Oe[13]||!Oe[11].trim()))&&(Vn.disabled=ci),Oe[17].length>0?Vt?Vt.p(Oe,Ye):(Vt=Zo(Oe),Vt.c(),Vt.m(Ht,ui)):Vt&&(Vt.d(1),Vt=null),(!yt||Ye[0]&524288)&&Ls!==(Ls=Oe[19].filter($o).length+"")&&te(fi,Ls),Ye[0]&524288|Ye[1]&2&&(di=xe(Oe[19].filter(ec)),fn=sn(fn,Ye,Yl,1,Oe,di,xl,as,nn,Qo,null,Wo))},i(Oe){yt||(Te(os.$$.fragment,Oe),yt=!0)},o(Oe){De(os.$$.fragment,Oe),yt=!1},d(Oe){Oe&&_(e),n[42](null),Ut&&Ut.d(),n[46](null),Vt&&Vt.d();for(let Ye=0;Ye<fn.length;Ye+=1)fn[Ye].d();tt(os),Er=!1,je(Wl)}}}function Xo(n){let e,t,s;return{c(){e=y("div"),t=y("img"),this.h()},l(i){e=w(i,"DIV",{class:!0});var r=I(e);t=w(r,"IMG",{src:!0,alt:!0,class:!0}),r.forEach(_),this.h()},h(){Re(t.src,s=n[14])||f(t,"src",s),f(t,"alt","Preview"),f(t,"class","svelte-1wki486"),f(e,"class","emoji-preview svelte-1wki486")},m(i,r){j(i,e,r),c(e,t)},p(i,r){r[0]&16384&&!Re(t.src,s=i[14])&&f(t,"src",s)},d(i){i&&_(e)}}}function Zo(n){let e,t,s=n[17].length+"",i,r,a,l=[],o=new Map,u,d,b=n[18]?"â³ Uploading...":`â¬†ï¸ Upload ${n[17].length} Emoji${n[17].length>1?"s":""}`,h,p,g,E,C=xe(n[17]);const S=k=>k[64];for(let k=0;k<C.length;k+=1){let v=Yo(n,C,k),m=S(v);o.set(m,l[k]=Jo(m,v))}return{c(){e=y("div"),t=y("p"),i=X(s),r=X(" file(s) selected"),a=O();for(let k=0;k<l.length;k+=1)l[k].c();u=O(),d=y("button"),h=X(b),this.h()},l(k){e=w(k,"DIV",{class:!0});var v=I(e);t=w(v,"P",{class:!0});var m=I(t);i=K(m,s),r=K(m," file(s) selected"),m.forEach(_),a=P(v);for(let A=0;A<l.length;A+=1)l[A].l(v);u=P(v),d=w(v,"BUTTON",{class:!0});var T=I(d);h=K(T,b),T.forEach(_),v.forEach(_),this.h()},h(){f(t,"class","bulk-count svelte-1wki486"),f(d,"class","emoji-upload-btn svelte-1wki486"),d.disabled=p=n[18]||n[17].length===0,f(e,"class","bulk-emoji-list svelte-1wki486")},m(k,v){j(k,e,v),c(e,t),c(t,i),c(t,r),c(e,a);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);c(e,u),c(e,d),c(d,h),g||(E=G(d,"click",n[34]),g=!0)},p(k,v){v[0]&131072&&s!==(s=k[17].length+"")&&te(i,s),v[0]&131072|v[1]&16&&(C=xe(k[17]),l=sn(l,v,S,1,k,C,o,e,nn,Jo,u,Yo)),v[0]&393216&&b!==(b=k[18]?"â³ Uploading...":`â¬†ï¸ Upload ${k[17].length} Emoji${k[17].length>1?"s":""}`)&&te(h,b),v[0]&393216&&p!==(p=k[18]||k[17].length===0)&&(d.disabled=p)},d(k){k&&_(e);for(let v=0;v<l.length;v+=1)l[v].d();g=!1,E()}}}function Jo(n,e){let t,s,i,r,a,l,o,u="âœ•",d,b;function h(){e[48].call(a,e[63],e[64])}function p(){return e[49](e[64])}return{key:n,first:null,c(){t=y("div"),s=y("img"),r=O(),a=y("input"),l=O(),o=y("button"),o.textContent=u,this.h()},l(g){t=w(g,"DIV",{class:!0});var E=I(t);s=w(E,"IMG",{src:!0,alt:!0,class:!0}),r=P(E),a=w(E,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),l=P(E),o=w(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(o)!=="svelte-1o93ikm"&&(o.textContent=u),E.forEach(_),this.h()},h(){Re(s.src,i=e[62].preview)||f(s,"src",i),f(s,"alt","Preview"),f(s,"class","bulk-preview svelte-1wki486"),f(a,"type","text"),f(a,"placeholder","emoji_name"),f(a,"maxlength","30"),f(a,"class","bulk-name-input svelte-1wki486"),f(o,"class","bulk-remove-btn svelte-1wki486"),f(o,"title","Remove"),f(t,"class","bulk-emoji-item svelte-1wki486"),this.first=t},m(g,E){j(g,t,E),c(t,s),c(t,r),c(t,a),Ke(a,e[62].name),c(t,l),c(t,o),d||(b=[G(a,"input",h),G(o,"click",p)],d=!0)},p(g,E){e=g,E[0]&131072&&!Re(s.src,i=e[62].preview)&&f(s,"src",i),E[0]&131072&&a.value!==e[62].name&&Ke(a,e[62].name)},d(g){g&&_(t),d=!1,je(b)}}}function Qo(n,e){let t,s,i,r,a,l,o,u=e[59].name+"",d,b,h,p,g="ðŸ—‘ï¸",E,C,S;function k(){return e[50](e[59])}return{key:n,first:null,c(){t=y("div"),s=y("img"),a=O(),l=y("span"),o=X(":"),d=X(u),b=X(":"),h=O(),p=y("button"),p.textContent=g,E=O(),this.h()},l(v){t=w(v,"DIV",{class:!0});var m=I(t);s=w(m,"IMG",{src:!0,alt:!0,class:!0}),a=P(m),l=w(m,"SPAN",{class:!0});var T=I(l);o=K(T,":"),d=K(T,u),b=K(T,":"),T.forEach(_),h=P(m),p=w(m,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(p)!=="svelte-qg29ty"&&(p.textContent=g),E=P(m),m.forEach(_),this.h()},h(){Re(s.src,i=e[59].url)||f(s,"src",i),f(s,"alt",r=e[59].name),f(s,"class","emoji-thumb svelte-1wki486"),f(l,"class","emoji-item-name svelte-1wki486"),f(p,"class","emoji-delete-btn svelte-1wki486"),f(p,"title","Delete emoji"),f(t,"class","emoji-item svelte-1wki486"),this.first=t},m(v,m){j(v,t,m),c(t,s),c(t,a),c(t,l),c(l,o),c(l,d),c(l,b),c(t,h),c(t,p),c(t,E),C||(S=G(p,"click",k),C=!0)},p(v,m){e=v,m[0]&524288&&!Re(s.src,i=e[59].url)&&f(s,"src",i),m[0]&524288&&r!==(r=e[59].name)&&f(s,"alt",r),m[0]&524288&&u!==(u=e[59].name+"")&&te(d,u)},d(v){v&&_(t),C=!1,S()}}}function Im(n){let e,t,s,i,r,a=n[0]&&Ko(n);return t=new fs({props:{isOpen:n[8],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:n[28],onCancel:n[51]}}),i=new fs({props:{isOpen:n[9],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[36],onCancel:n[52]}}),{c(){a&&a.c(),e=O(),it(t.$$.fragment),s=O(),it(i.$$.fragment)},l(l){a&&a.l(l),e=P(l),st(t.$$.fragment,l),s=P(l),st(i.$$.fragment,l)},m(l,o){a&&a.m(l,o),j(l,e,o),nt(t,l,o),j(l,s,o),nt(i,l,o),r=!0},p(l,o){l[0]?a?(a.p(l,o),o[0]&1&&Te(a,1)):(a=Ko(l),a.c(),Te(a,1),a.m(e.parentNode,e)):a&&(gn(),De(a,1,1,()=>{a=null}),mn());const u={};o[0]&256&&(u.isOpen=l[8]),o[0]&256&&(u.onCancel=l[51]),t.$set(u);const d={};o[0]&512&&(d.isOpen=l[9]),o[0]&512&&(d.onCancel=l[52]),i.$set(d)},i(l){r||(Te(a),Te(t.$$.fragment,l),Te(i.$$.fragment,l),r=!0)},o(l){De(a),De(t.$$.fragment,l),De(i.$$.fragment,l),r=!1},d(l){l&&(_(e),_(s)),a&&a.d(l),tt(t,l),tt(i,l)}}}const $o=n=>n.isCustom,ec=n=>n.isCustom;function Dm(n,e,t){let s;Me(n,Cn,le=>t(53,le)),Me(n,rn,le=>t(54,le)),Me(n,It,le=>t(55,le)),Me(n,es,le=>t(19,s=le));let{isOpen:i=!1}=e,r=!0,a=!0,l=!0,o=!0,u="dark",d="/sounds/ProjectSound.ogg",b=.5,h=!1,p=!1,g,E="",C="custom",S=null,k=null,v=!1,m,T=[],A=!1;Tn(()=>{t(1,r=localStorage.getItem("soundEnabled")!=="false"),t(2,a=localStorage.getItem("notificationsEnabled")!=="false"),t(3,l=localStorage.getItem("micEnabled")!=="false"),t(4,o=localStorage.getItem("cameraEnabled")!=="false"),t(5,u=localStorage.getItem("theme")||"dark"),t(6,d=localStorage.getItem("notificationSound")||"/sounds/ProjectSound.ogg"),t(7,b=parseFloat(localStorage.getItem("notificationVolume")||"0.5"))});function D(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function N(){t(3,l=!l),localStorage.setItem("micEnabled",l.toString())}function R(){t(4,o=!o),localStorage.setItem("cameraEnabled",o.toString())}function M(){t(5,u=u==="dark"?"light":"dark"),localStorage.setItem("theme",u),document.documentElement.setAttribute("data-theme",u)}function F(le){t(6,d=le),localStorage.setItem("notificationSound",le)}function z(le){t(7,b=le),localStorage.setItem("notificationVolume",le.toString())}function W(){gl()}async function B(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,a=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,a=!1),localStorage.setItem("notificationsEnabled","false"))}function U(){It.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(8,h=!1)}async function Y(){t(9,p=!0)}async function V(le){var qe;const Ve=(qe=le.target.files)==null?void 0:qe[0];if(!Ve)return;if(!Ve.type.startsWith("image/")){alert("Please select an image file (PNG, GIF, JPG, etc.)");return}if(Ve.size>2*1024*1024){alert("File too large! Maximum size is 2MB");return}t(13,S=Ve);const ze=new FileReader;ze.onload=ie=>{var _e;t(14,k=(_e=ie.target)==null?void 0:_e.result)},ze.readAsDataURL(Ve)}async function L(){if(!S||!E.trim()){alert("Please select a file and enter an emoji name");return}t(15,v=!0);try{const le=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,Fe=new FormData;Fe.append("file",S),Fe.append("name",E.trim()),Fe.append("category",C);const Ve=await fetch(`${le}/api/emoji/upload`,{method:"POST",body:Fe});if(!Ve.ok)throw new Error("Upload failed");const ze=await Ve.json(),qe=Fr();qe==null||qe.emit("emoji-added",ze.emoji),t(11,E=""),t(12,C="custom"),t(13,S=null),t(14,k=null),g&&t(10,g.value="",g),alert(`Emoji "${ze.emoji.name}" uploaded successfully!`)}catch(le){console.error("Emoji upload error:",le),alert("Failed to upload emoji. Please try again.")}finally{t(15,v=!1)}}function H(le){if(!confirm(`Delete emoji ":${le}:"?`))return;const Fe=Fr();Fe==null||Fe.emit("delete-emoji",le)}async function q(le){const Fe=le.target,Ve=Array.from(Fe.files||[]);if(Ve.length===0)return;const ze=Ve.filter(ie=>ie.type.startsWith("image/"));if(ze.length===0){alert("No valid image files selected");return}for(const ie of ze)if(ie.size>2*1024*1024){alert(`File "${ie.name}" is too large! Maximum size is 2MB`);return}const qe=await Promise.all(ze.map(async ie=>{const _e=await new Promise(de=>{const He=new FileReader;He.onload=$e=>{var Se;return de((Se=$e.target)==null?void 0:Se.result)},He.readAsDataURL(ie)}),be=ie.name.replace(/\.[^/.]+$/,"").toLowerCase().replace(/[^a-z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");return{file:ie,name:be,preview:_e}}));t(17,T=qe)}async function Z(){if(T.length===0){alert("No files selected");return}if(T.filter(ze=>!ze.name.trim()).length>0){alert("All emojis must have a name");return}t(18,A=!0);let Fe=0,Ve=0;try{const ze=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin;for(const qe of T)try{const ie=new FormData;ie.append("file",qe.file),ie.append("name",qe.name.trim()),ie.append("category",C);const _e=await fetch(`${ze}/api/emoji/upload`,{method:"POST",body:ie});if(!_e.ok){const He=await _e.json();console.error(`Failed to upload ${qe.name}:`,He),Ve++;continue}const be=await _e.json(),de=Fr();de==null||de.emit("emoji-added",be.emoji),Fe++}catch(ie){console.error(`Error uploading ${qe.name}:`,ie),Ve++}t(17,T=[]),m&&t(16,m.value="",m),alert(`Upload complete!
âœ… ${Fe} successful
âŒ ${Ve} failed`)}catch(ze){console.error("Bulk upload error:",ze),alert("Failed to upload emojis. Please try again.")}finally{t(18,A=!1)}}function $(le){t(17,T=T.filter((Fe,Ve)=>Ve!==le))}async function Q(){try{const le=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,Ve=await(await fetch(`${le}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();Ve.success?(It.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(Ve.error||"Unknown error"))}catch(le){console.error("Error clearing server messages:",le),alert("Failed to clear server messages. Check console for details.")}t(9,p=!1)}function oe(){t(0,i=!1)}function ae(le){pn.call(this,n,le)}const ce=()=>F("/sounds/ProjectSound.ogg");function re(){b=ol(this.value),t(7,b)}const he=le=>z(parseFloat(le.currentTarget.value));function Ce(le){lt[le?"unshift":"push"](()=>{g=le,t(10,g)})}const se=()=>g==null?void 0:g.click();function pe(){E=this.value,t(11,E)}function Ge(){C=eu(this),t(12,C)}function we(le){lt[le?"unshift":"push"](()=>{m=le,t(16,m)})}const Pe=()=>m==null?void 0:m.click();function ye(le,Fe){le[Fe].name=this.value,t(17,T)}const ne=le=>$(le),me=le=>H(le.name),Ie=()=>t(8,h=!1),Ae=()=>t(9,p=!1);return n.$$set=le=>{"isOpen"in le&&t(0,i=le.isOpen)},[i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T,A,s,D,N,R,M,F,z,W,B,U,Y,V,L,H,q,Z,$,Q,oe,ae,ce,re,he,Ce,se,pe,Ge,we,Pe,ye,ne,me,Ie,Ae]}class Nm extends kt{constructor(e){super(),wt(this,e,Dm,Im,bt,{isOpen:0},null,[-1,-1,-1])}}function tc(n,e,t){const s=n.slice();return s[16]=e[t],s}function nc(n){let e,t,s,i,r,a,l,o,u="Ã—",d,b,h,p;function g(S,k){return S[2].length===0?Om:Pm}let E=g(n),C=E(n);return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h2"),r=X("ðŸ“Œ Pinned Messages in #"),a=X(n[1]),l=O(),o=y("button"),o.textContent=u,d=O(),b=y("div"),C.c(),this.h()},l(S){e=w(S,"DIV",{class:!0});var k=I(e);t=w(k,"DIV",{class:!0});var v=I(t);s=w(v,"DIV",{class:!0});var m=I(s);i=w(m,"H2",{class:!0});var T=I(i);r=K(T,"ðŸ“Œ Pinned Messages in #"),a=K(T,n[1]),T.forEach(_),l=P(m),o=w(m,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-12zniqk"&&(o.textContent=u),m.forEach(_),d=P(v),b=w(v,"DIV",{class:!0});var A=I(b);C.l(A),A.forEach(_),v.forEach(_),k.forEach(_),this.h()},h(){f(i,"class","svelte-178cyr5"),f(o,"class","close-btn svelte-178cyr5"),f(s,"class","modal-header svelte-178cyr5"),f(b,"class","modal-body svelte-178cyr5"),f(t,"class","modal-content svelte-178cyr5"),f(e,"class","modal-overlay svelte-178cyr5")},m(S,k){j(S,e,k),c(e,t),c(t,s),c(s,i),c(i,r),c(i,a),c(s,l),c(s,o),c(t,d),c(t,b),C.m(b,null),h||(p=[G(o,"click",n[3]),G(t,"click",_t(n[10])),G(e,"click",n[3])],h=!0)},p(S,k){k&2&&te(a,S[1]),E===(E=g(S))&&C?C.p(S,k):(C.d(1),C=E(S),C&&(C.c(),C.m(b,null)))},d(S){S&&_(e),C.d(),h=!1,je(p)}}}function Pm(n){let e,t=[],s=new Map,i=xe(n[2]);const r=a=>a[16].id;for(let a=0;a<i.length;a+=1){let l=tc(n,i,a),o=r(l);s.set(o,t[a]=sc(o,l))}return{c(){e=y("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var l=I(e);for(let o=0;o<t.length;o+=1)t[o].l(l);l.forEach(_),this.h()},h(){f(e,"class","pinned-messages-list svelte-178cyr5")},m(a,l){j(a,e,l);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(a,l){l&116&&(i=xe(a[2]),t=sn(t,l,r,1,a,i,s,e,nn,sc,null,tc))},d(a){a&&_(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function Om(n){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-178cyr5")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function sc(n,e){let t,s,i,r,a=e[16].user+"",l,o,u,d=ic(e[16].timestamp)+"",b,h,p,g,E="Jump to",C,S,k="Unpin",v,m,T=e[16].text+"",A,D,N,R;function M(){return e[11](e[16])}function F(){return e[12](e[16])}return{key:n,first:null,c(){t=y("div"),s=y("div"),i=y("div"),r=y("span"),l=X(a),o=O(),u=y("span"),b=X(d),h=O(),p=y("div"),g=y("button"),g.textContent=E,C=O(),S=y("button"),S.textContent=k,v=O(),m=y("div"),A=X(T),D=O(),this.h()},l(z){t=w(z,"DIV",{class:!0});var W=I(t);s=w(W,"DIV",{class:!0});var B=I(s);i=w(B,"DIV",{class:!0});var U=I(i);r=w(U,"SPAN",{class:!0,style:!0});var Y=I(r);l=K(Y,a),Y.forEach(_),o=P(U),u=w(U,"SPAN",{class:!0});var V=I(u);b=K(V,d),V.forEach(_),U.forEach(_),h=P(B),p=w(B,"DIV",{class:!0});var L=I(p);g=w(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(g)!=="svelte-1nadwym"&&(g.textContent=E),C=P(L),S=w(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(S)!=="svelte-eqnabo"&&(S.textContent=k),L.forEach(_),B.forEach(_),v=P(W),m=w(W,"DIV",{class:!0});var H=I(m);A=K(H,T),H.forEach(_),D=P(W),W.forEach(_),this.h()},h(){f(r,"class","username svelte-178cyr5"),Be(r,"color",e[6](e[16].user)),f(u,"class","timestamp svelte-178cyr5"),f(i,"class","user-info svelte-178cyr5"),f(g,"class","jump-btn svelte-178cyr5"),f(g,"title","Jump to message"),f(S,"class","unpin-btn svelte-178cyr5"),f(S,"title","Unpin message"),f(p,"class","action-buttons svelte-178cyr5"),f(s,"class","message-header svelte-178cyr5"),f(m,"class","message-text svelte-178cyr5"),f(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(z,W){j(z,t,W),c(t,s),c(s,i),c(i,r),c(r,l),c(i,o),c(i,u),c(u,b),c(s,h),c(s,p),c(p,g),c(p,C),c(p,S),c(t,v),c(t,m),c(m,A),c(t,D),N||(R=[G(g,"click",M),G(S,"click",F)],N=!0)},p(z,W){e=z,W&4&&a!==(a=e[16].user+"")&&te(l,a),W&4&&Be(r,"color",e[6](e[16].user)),W&4&&d!==(d=ic(e[16].timestamp)+"")&&te(b,d),W&4&&T!==(T=e[16].text+"")&&te(A,T)},d(z){z&&_(t),N=!1,je(R)}}}function Rm(n){let e,t=n[0]&&nc(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=nc(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function ic(n){return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Mm(n,e,t){let s,i,r,a,l;Me(n,rn,v=>t(13,r=v)),Me(n,jt,v=>t(8,a=v)),Me(n,It,v=>t(9,l=v));let{isOpen:o=!1}=e,{channelId:u=""}=e;function d(){t(0,o=!1)}function b(v){Sl(u,v)}function h(v){d(),setTimeout(()=>{const m=document.getElementById(`message-${v}`);m&&(m.scrollIntoView({behavior:"smooth",block:"center"}),m.classList.add("highlighted"),setTimeout(()=>{m.classList.remove("highlighted")},2e3))},100)}function p(v){return r.find(m=>m.username===v)}function g(v){const m=p(v);return(m==null?void 0:m.color)||"var(--status-offline)"}function E(v){v.key==="Escape"&&o&&d()}Tn(()=>(window.addEventListener("keydown",E),()=>{window.removeEventListener("keydown",E)}));function C(v){pn.call(this,n,v)}const S=v=>h(v.id),k=v=>b(v.id);return n.$$set=v=>{"isOpen"in v&&t(0,o=v.isOpen),"channelId"in v&&t(7,u=v.channelId)},n.$$.update=()=>{var v;n.$$.dirty&640&&t(2,s=(l[u]||[]).filter(m=>m.isPinned)),n.$$.dirty&384&&t(1,i=((v=a.find(m=>m.id===u))==null?void 0:v.name)||u)},[o,i,s,d,b,h,g,u,a,l,C,S,k]}class Fm extends kt{constructor(e){super(),wt(this,e,Mm,Rm,bt,{isOpen:0,channelId:7})}}function rc(n,e,t){const s=n.slice();return s[62]=e[t],s}function lc(n,e,t){const s=n.slice();return s[62]=e[t],s}function ac(n){let e,t,s,i,r="Create",a,l;return{c(){e=y("div"),t=y("input"),s=O(),i=y("button"),i.textContent=r,this.h()},l(o){e=w(o,"DIV",{class:!0});var u=I(e);t=w(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=P(u),i=w(u,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1ih09o9"&&(i.textContent=r),u.forEach(_),this.h()},h(){f(t,"type","text"),f(t,"placeholder","channel-name"),t.autofocus=!0,f(t,"class","svelte-uk4feo"),f(i,"class","svelte-uk4feo"),f(e,"class","create-channel svelte-uk4feo")},m(o,u){j(o,e,u),c(e,t),Ke(t,n[1]),c(e,s),c(e,i),t.focus(),a||(l=[G(t,"input",n[31]),G(t,"keydown",n[32]),G(i,"click",n[20])],a=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&Ke(t,o[1])},d(o){o&&_(e),a=!1,je(l)}}}function oc(n){let e,t,s;return{c(){e=y("span"),t=X("â±ï¸"),this.h()},l(i){e=w(i,"SPAN",{class:!0,title:!0});var r=I(e);t=K(r,"â±ï¸"),r.forEach(_),this.h()},h(){f(e,"class","auto-delete-indicator svelte-uk4feo"),f(e,"title",s="Auto-delete: "+n[62].autoDeleteAfter)},m(i,r){j(i,e,r),c(e,t)},p(i,r){r[0]&32768&&s!==(s="Auto-delete: "+i[62].autoDeleteAfter)&&f(e,"title",s)},d(i){i&&_(e)}}}function cc(n){let e,t=er(n[17][n[62].id])+"",s;return{c(){e=y("span"),s=X(t),this.h()},l(i){e=w(i,"SPAN",{class:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","unread-badge svelte-uk4feo")},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&163840&&t!==(t=er(i[17][i[62].id])+"")&&te(s,t)},d(i){i&&_(e)}}}function uc(n){let e,t="Ã—",s,i;function r(){return n[36](n[62])}return{c(){e=y("button"),e.textContent=t,this.h()},l(a){e=w(a,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn svelte-uk4feo")},m(a,l){j(a,e,l),s||(i=G(e,"click",_t(r)),s=!0)},p(a,l){n=a},d(a){a&&_(e),s=!1,i()}}}function fc(n,e){let t,s,i,r="#",a,l=e[62].name+"",o,u,d,b,h,p,g="âš™ï¸",E,C,S="ðŸ“Œ",k,v,m,T,A=e[62].autoDeleteAfter&&oc(e),D=e[17][e[62].id]&&e[16]!==e[62].id&&cc(e);function N(){return e[33](e[62])}function R(){return e[34](e[62])}function M(){return e[35](e[62])}let F=e[62].id!=="general"&&uc(e);return{key:n,first:null,c(){t=y("div"),s=y("button"),i=y("span"),i.textContent=r,a=O(),o=X(l),u=O(),A&&A.c(),d=O(),D&&D.c(),b=O(),h=y("div"),p=y("button"),p.textContent=g,E=O(),C=y("button"),C.textContent=S,k=O(),F&&F.c(),v=O(),this.h()},l(z){t=w(z,"DIV",{class:!0});var W=I(t);s=w(W,"BUTTON",{class:!0});var B=I(s);i=w(B,"SPAN",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-16vlh54"&&(i.textContent=r),a=P(B),o=K(B,l),u=P(B),A&&A.l(B),d=P(B),D&&D.l(B),B.forEach(_),b=P(W),h=w(W,"DIV",{class:!0});var U=I(h);p=w(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(p)!=="svelte-17mbiia"&&(p.textContent=g),E=P(U),C=w(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(C)!=="svelte-18aqzoy"&&(C.textContent=S),k=P(U),F&&F.l(U),U.forEach(_),v=P(W),W.forEach(_),this.h()},h(){f(i,"class","hash svelte-uk4feo"),f(s,"class","channel-btn svelte-uk4feo"),f(p,"class","settings-btn svelte-uk4feo"),f(p,"title","Channel settings"),f(C,"class","pin-btn svelte-uk4feo"),f(C,"title","View pinned messages"),f(h,"class","channel-actions svelte-uk4feo"),f(t,"class","channel-item svelte-uk4feo"),ve(t,"active",e[16]===e[62].id),this.first=t},m(z,W){j(z,t,W),c(t,s),c(s,i),c(s,a),c(s,o),c(s,u),A&&A.m(s,null),c(s,d),D&&D.m(s,null),c(t,b),c(t,h),c(h,p),c(h,E),c(h,C),c(h,k),F&&F.m(h,null),c(t,v),m||(T=[G(s,"click",N),G(p,"click",_t(R)),G(C,"click",_t(M))],m=!0)},p(z,W){e=z,W[0]&32768&&l!==(l=e[62].name+"")&&te(o,l),e[62].autoDeleteAfter?A?A.p(e,W):(A=oc(e),A.c(),A.m(s,d)):A&&(A.d(1),A=null),e[17][e[62].id]&&e[16]!==e[62].id?D?D.p(e,W):(D=cc(e),D.c(),D.m(s,null)):D&&(D.d(1),D=null),e[62].id!=="general"?F?F.p(e,W):(F=uc(e),F.c(),F.m(h,null)):F&&(F.d(1),F=null),W[0]&98304&&ve(t,"active",e[16]===e[62].id)},d(z){z&&_(t),A&&A.d(),D&&D.d(),F&&F.d(),m=!1,je(T)}}}function dc(n){let e,t="Group Chats",s,i=[],r=new Map,a,l=xe(n[14]);const o=u=>u[62].id;for(let u=0;u<l.length;u+=1){let d=rc(n,l,u),b=o(d);r.set(b,i[u]=gc(b,d))}return{c(){e=y("div"),e.textContent=t,s=O();for(let u=0;u<i.length;u+=1)i[u].c();a=Le(),this.h()},l(u){e=w(u,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1fof55m"&&(e.textContent=t),s=P(u);for(let d=0;d<i.length;d+=1)i[d].l(u);a=Le(),this.h()},h(){f(e,"class","section-header svelte-uk4feo")},m(u,d){j(u,e,d),j(u,s,d);for(let b=0;b<i.length;b+=1)i[b]&&i[b].m(u,d);j(u,a,d)},p(u,d){d[0]&28000256&&(l=xe(u[14]),i=sn(i,d,o,1,u,l,r,a.parentNode,nn,gc,a,rc))},d(u){u&&(_(e),_(s),_(a));for(let d=0;d<i.length;d+=1)i[d].d(u)}}}function hc(n){let e,t,s;return{c(){e=y("span"),t=X("â±ï¸"),this.h()},l(i){e=w(i,"SPAN",{class:!0,title:!0});var r=I(e);t=K(r,"â±ï¸"),r.forEach(_),this.h()},h(){f(e,"class","auto-delete-indicator svelte-uk4feo"),f(e,"title",s="Auto-delete: "+n[62].autoDeleteAfter)},m(i,r){j(i,e,r),c(e,t)},p(i,r){r[0]&16384&&s!==(s="Auto-delete: "+i[62].autoDeleteAfter)&&f(e,"title",s)},d(i){i&&_(e)}}}function pc(n){let e,t=er(n[17][n[62].id])+"",s;return{c(){e=y("span"),s=X(t),this.h()},l(i){e=w(i,"SPAN",{class:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","unread-badge svelte-uk4feo")},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&147456&&t!==(t=er(i[17][i[62].id])+"")&&te(s,t)},d(i){i&&_(e)}}}function gc(n,e){let t,s,i,r="ðŸ‘¥",a,l=e[62].name+"",o,u,d,b,h,p,g="âš™ï¸",E,C,S="ðŸ“Œ",k,v,m="Ã—",T,A,D,N=e[62].autoDeleteAfter&&hc(e),R=e[17][e[62].id]&&e[16]!==e[62].id&&pc(e);function M(){return e[37](e[62])}function F(){return e[38](e[62])}function z(){return e[39](e[62])}function W(){return e[40](e[62])}return{key:n,first:null,c(){t=y("div"),s=y("button"),i=y("span"),i.textContent=r,a=O(),o=X(l),u=O(),N&&N.c(),d=O(),R&&R.c(),b=O(),h=y("div"),p=y("button"),p.textContent=g,E=O(),C=y("button"),C.textContent=S,k=O(),v=y("button"),v.textContent=m,T=O(),this.h()},l(B){t=w(B,"DIV",{class:!0});var U=I(t);s=w(U,"BUTTON",{class:!0});var Y=I(s);i=w(Y,"SPAN",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-4z5ugu"&&(i.textContent=r),a=P(Y),o=K(Y,l),u=P(Y),N&&N.l(Y),d=P(Y),R&&R.l(Y),Y.forEach(_),b=P(U),h=w(U,"DIV",{class:!0});var V=I(h);p=w(V,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(p)!=="svelte-17mbiia"&&(p.textContent=g),E=P(V),C=w(V,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(C)!=="svelte-18aqzoy"&&(C.textContent=S),k=P(V),v=w(V,"BUTTON",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-12rgdhl"&&(v.textContent=m),V.forEach(_),T=P(U),U.forEach(_),this.h()},h(){f(i,"class","group-icon svelte-uk4feo"),f(s,"class","channel-btn svelte-uk4feo"),f(p,"class","settings-btn svelte-uk4feo"),f(p,"title","Channel settings"),f(C,"class","pin-btn svelte-uk4feo"),f(C,"title","View pinned messages"),f(v,"class","delete-btn svelte-uk4feo"),f(h,"class","channel-actions svelte-uk4feo"),f(t,"class","channel-item svelte-uk4feo"),ve(t,"active",e[16]===e[62].id),this.first=t},m(B,U){j(B,t,U),c(t,s),c(s,i),c(s,a),c(s,o),c(s,u),N&&N.m(s,null),c(s,d),R&&R.m(s,null),c(t,b),c(t,h),c(h,p),c(h,E),c(h,C),c(h,k),c(h,v),c(t,T),A||(D=[G(s,"click",M),G(p,"click",_t(F)),G(C,"click",_t(z)),G(v,"click",_t(W))],A=!0)},p(B,U){e=B,U[0]&16384&&l!==(l=e[62].name+"")&&te(o,l),e[62].autoDeleteAfter?N?N.p(e,U):(N=hc(e),N.c(),N.m(s,d)):N&&(N.d(1),N=null),e[17][e[62].id]&&e[16]!==e[62].id?R?R.p(e,U):(R=pc(e),R.c(),R.m(s,null)):R&&(R.d(1),R=null),U[0]&81920&&ve(t,"active",e[16]===e[62].id)},d(B){B&&_(t),N&&N.d(),R&&R.d(),A=!1,je(D)}}}function mc(n){let e,t,s,i,r,a,l,o,u=n[18].username+"",d,b,h,p,g=n[18].id.slice(0,4)+"",E,C,S,k,v=n[4]?"ðŸ”‡":"ðŸŽ¤",m,T,A,D,N=n[5]?"ðŸ”‡":"ðŸŽ§",R,M,F,z,W="âš™ï¸",B,U;function Y(H,q){return H[18].profilePicture?Bm:Lm}let V=Y(n),L=V(n);return{c(){e=y("div"),t=y("button"),s=y("div"),L.c(),i=O(),r=y("div"),a=O(),l=y("div"),o=y("div"),d=X(u),b=O(),h=y("div"),p=X("#"),E=X(g),C=O(),S=y("div"),k=y("button"),m=X(v),A=O(),D=y("button"),R=X(N),F=O(),z=y("button"),z.textContent=W,this.h()},l(H){e=w(H,"DIV",{class:!0});var q=I(e);t=w(q,"BUTTON",{class:!0});var Z=I(t);s=w(Z,"DIV",{class:!0});var $=I(s);L.l($),i=P($),r=w($,"DIV",{class:!0}),I(r).forEach(_),$.forEach(_),a=P(Z),l=w(Z,"DIV",{class:!0});var Q=I(l);o=w(Q,"DIV",{class:!0});var oe=I(o);d=K(oe,u),oe.forEach(_),b=P(Q),h=w(Q,"DIV",{class:!0});var ae=I(h);p=K(ae,"#"),E=K(ae,g),ae.forEach(_),Q.forEach(_),Z.forEach(_),C=P(q),S=w(q,"DIV",{class:!0});var ce=I(S);k=w(ce,"BUTTON",{class:!0,title:!0});var re=I(k);m=K(re,v),re.forEach(_),A=P(ce),D=w(ce,"BUTTON",{class:!0,title:!0});var he=I(D);R=K(he,N),he.forEach(_),F=P(ce),z=w(ce,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(z)!=="svelte-18txcln"&&(z.textContent=W),ce.forEach(_),q.forEach(_),this.h()},h(){f(r,"class","status-indicator svelte-uk4feo"),ve(r,"online",n[18].status==="active"),ve(r,"away",n[18].status==="away"),ve(r,"busy",n[18].status==="busy"),f(s,"class","avatar-container svelte-uk4feo"),f(o,"class","username svelte-uk4feo"),f(h,"class","user-tag svelte-uk4feo"),f(l,"class","user-details svelte-uk4feo"),f(t,"class","profile-info svelte-uk4feo"),f(k,"class","control-btn svelte-uk4feo"),f(k,"title",T=n[4]?"Unmute":"Mute"),ve(k,"active",n[4]),f(D,"class","control-btn svelte-uk4feo"),f(D,"title",M=n[5]?"Undeafen":"Deafen"),ve(D,"active",n[5]),f(z,"class","control-btn svelte-uk4feo"),f(z,"title","User Settings"),f(S,"class","profile-controls svelte-uk4feo"),f(e,"class","profile-card svelte-uk4feo")},m(H,q){j(H,e,q),c(e,t),c(t,s),L.m(s,null),c(s,i),c(s,r),c(t,a),c(t,l),c(l,o),c(o,d),c(l,b),c(l,h),c(h,p),c(h,E),c(e,C),c(e,S),c(S,k),c(k,m),c(S,A),c(S,D),c(D,R),c(S,F),c(S,z),B||(U=[G(t,"click",n[26]),G(k,"click",n[41]),G(D,"click",n[42]),G(z,"click",n[43])],B=!0)},p(H,q){V===(V=Y(H))&&L?L.p(H,q):(L.d(1),L=V(H),L&&(L.c(),L.m(s,i))),q[0]&262144&&ve(r,"online",H[18].status==="active"),q[0]&262144&&ve(r,"away",H[18].status==="away"),q[0]&262144&&ve(r,"busy",H[18].status==="busy"),q[0]&262144&&u!==(u=H[18].username+"")&&te(d,u),q[0]&262144&&g!==(g=H[18].id.slice(0,4)+"")&&te(E,g),q[0]&16&&v!==(v=H[4]?"ðŸ”‡":"ðŸŽ¤")&&te(m,v),q[0]&16&&T!==(T=H[4]?"Unmute":"Mute")&&f(k,"title",T),q[0]&16&&ve(k,"active",H[4]),q[0]&32&&N!==(N=H[5]?"ðŸ”‡":"ðŸŽ§")&&te(R,N),q[0]&32&&M!==(M=H[5]?"Undeafen":"Deafen")&&f(D,"title",M),q[0]&32&&ve(D,"active",H[5])},d(H){H&&_(e),L.d(),B=!1,je(U)}}}function Lm(n){let e,t=n[18].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-uk4feo"),Be(e,"background-color",n[18].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&262144&&t!==(t=i[18].username.charAt(0).toUpperCase()+"")&&te(s,t),r[0]&262144&&Be(e,"background-color",i[18].color)},d(i){i&&_(e)}}}function Bm(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[18].profilePicture)||f(e,"src",t),f(e,"alt",s=n[18].username),f(e,"class","avatar svelte-uk4feo")},m(i,r){j(i,e,r)},p(i,r){r[0]&262144&&!Re(e.src,t=i[18].profilePicture)&&f(e,"src",t),r[0]&262144&&s!==(s=i[18].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function vc(n){let e,t,s,i,r="âš™ï¸ Channel Settings",a,l,o="Ã—",u,d,b,h,p,g=n[12].name+"",E,C,S,k,v="Auto-Delete Messages",m,T,A="Automatically delete messages after a set period of time",D,N,R,M="Disabled",F,z,W="1 Hour",B,U,Y="6 Hours",V,L,H="12 Hours",q,Z,$="1 Day",Q,oe,ae="3 Days",ce,re,he="7 Days",Ce,se,pe="14 Days",Ge,we,Pe="30 Days",ye,ne,me,Ie=n[12].type!=="dm"&&_c(n);return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("h2"),i.textContent=r,a=O(),l=y("button"),l.textContent=o,u=O(),d=y("div"),b=y("div"),h=y("h3"),p=X("Channel: #"),E=X(g),C=O(),S=y("div"),k=y("label"),k.textContent=v,m=O(),T=y("p"),T.textContent=A,D=O(),N=y("div"),R=y("button"),R.textContent=M,F=O(),z=y("button"),z.textContent=W,B=O(),U=y("button"),U.textContent=Y,V=O(),L=y("button"),L.textContent=H,q=O(),Z=y("button"),Z.textContent=$,Q=O(),oe=y("button"),oe.textContent=ae,ce=O(),re=y("button"),re.textContent=he,Ce=O(),se=y("button"),se.textContent=pe,Ge=O(),we=y("button"),we.textContent=Pe,ye=O(),Ie&&Ie.c(),this.h()},l(Ae){e=w(Ae,"DIV",{class:!0});var le=I(e);t=w(le,"DIV",{class:!0});var Fe=I(t);s=w(Fe,"DIV",{class:!0});var Ve=I(s);i=w(Ve,"H2",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-gucqu6"&&(i.textContent=r),a=P(Ve),l=w(Ve,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1eq7ufx"&&(l.textContent=o),Ve.forEach(_),u=P(Fe),d=w(Fe,"DIV",{class:!0});var ze=I(d);b=w(ze,"DIV",{class:!0});var qe=I(b);h=w(qe,"H3",{class:!0});var ie=I(h);p=K(ie,"Channel: #"),E=K(ie,g),ie.forEach(_),C=P(qe),S=w(qe,"DIV",{class:!0});var _e=I(S);k=w(_e,"LABEL",{class:!0,"data-svelte-h":!0}),J(k)!=="svelte-ryy261"&&(k.textContent=v),m=P(_e),T=w(_e,"P",{class:!0,"data-svelte-h":!0}),J(T)!=="svelte-1tt2qq4"&&(T.textContent=A),D=P(_e),N=w(_e,"DIV",{class:!0});var be=I(N);R=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(R)!=="svelte-uqphio"&&(R.textContent=M),F=P(be),z=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(z)!=="svelte-1nt1au0"&&(z.textContent=W),B=P(be),U=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(U)!=="svelte-1gtmi8"&&(U.textContent=Y),V=P(be),L=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(L)!=="svelte-1notbsz"&&(L.textContent=H),q=P(be),Z=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(Z)!=="svelte-9g0opm"&&(Z.textContent=$),Q=P(be),oe=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(oe)!=="svelte-1lvi2x3"&&(oe.textContent=ae),ce=P(be),re=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(re)!=="svelte-1rb14zv"&&(re.textContent=he),Ce=P(be),se=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(se)!=="svelte-1i8t5rl"&&(se.textContent=pe),Ge=P(be),we=w(be,"BUTTON",{class:!0,"data-svelte-h":!0}),J(we)!=="svelte-1snshdf"&&(we.textContent=Pe),be.forEach(_),_e.forEach(_),ye=P(qe),Ie&&Ie.l(qe),qe.forEach(_),ze.forEach(_),Fe.forEach(_),le.forEach(_),this.h()},h(){f(i,"class","svelte-uk4feo"),f(l,"class","close-btn svelte-uk4feo"),f(s,"class","modal-header svelte-uk4feo"),f(h,"class","svelte-uk4feo"),f(k,"class","svelte-uk4feo"),f(T,"class","setting-description svelte-uk4feo"),f(R,"class","auto-delete-btn svelte-uk4feo"),ve(R,"active",!n[12].autoDeleteAfter),f(z,"class","auto-delete-btn svelte-uk4feo"),ve(z,"active",n[12].autoDeleteAfter==="1h"),f(U,"class","auto-delete-btn svelte-uk4feo"),ve(U,"active",n[12].autoDeleteAfter==="6h"),f(L,"class","auto-delete-btn svelte-uk4feo"),ve(L,"active",n[12].autoDeleteAfter==="12h"),f(Z,"class","auto-delete-btn svelte-uk4feo"),ve(Z,"active",n[12].autoDeleteAfter==="24h"),f(oe,"class","auto-delete-btn svelte-uk4feo"),ve(oe,"active",n[12].autoDeleteAfter==="3d"),f(re,"class","auto-delete-btn svelte-uk4feo"),ve(re,"active",n[12].autoDeleteAfter==="7d"),f(se,"class","auto-delete-btn svelte-uk4feo"),ve(se,"active",n[12].autoDeleteAfter==="14d"),f(we,"class","auto-delete-btn svelte-uk4feo"),ve(we,"active",n[12].autoDeleteAfter==="30d"),f(N,"class","auto-delete-options svelte-uk4feo"),f(S,"class","setting-group svelte-uk4feo"),f(b,"class","setting-section svelte-uk4feo"),f(d,"class","modal-body svelte-uk4feo"),f(t,"class","modal-content svelte-uk4feo"),f(e,"class","modal-overlay svelte-uk4feo")},m(Ae,le){j(Ae,e,le),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,u),c(t,d),c(d,b),c(b,h),c(h,p),c(h,E),c(b,C),c(b,S),c(S,k),c(S,m),c(S,T),c(S,D),c(S,N),c(N,R),c(N,F),c(N,z),c(N,B),c(N,U),c(N,V),c(N,L),c(N,q),c(N,Z),c(N,Q),c(N,oe),c(N,ce),c(N,re),c(N,Ce),c(N,se),c(N,Ge),c(N,we),c(b,ye),Ie&&Ie.m(b,null),ne||(me=[G(l,"click",n[49]),G(R,"click",n[50]),G(z,"click",n[51]),G(U,"click",n[52]),G(L,"click",n[53]),G(Z,"click",n[54]),G(oe,"click",n[55]),G(re,"click",n[56]),G(se,"click",n[57]),G(we,"click",n[58]),G(t,"click",_t(n[28])),G(e,"click",n[60])],ne=!0)},p(Ae,le){le[0]&4096&&g!==(g=Ae[12].name+"")&&te(E,g),le[0]&4096&&ve(R,"active",!Ae[12].autoDeleteAfter),le[0]&4096&&ve(z,"active",Ae[12].autoDeleteAfter==="1h"),le[0]&4096&&ve(U,"active",Ae[12].autoDeleteAfter==="6h"),le[0]&4096&&ve(L,"active",Ae[12].autoDeleteAfter==="12h"),le[0]&4096&&ve(Z,"active",Ae[12].autoDeleteAfter==="24h"),le[0]&4096&&ve(oe,"active",Ae[12].autoDeleteAfter==="3d"),le[0]&4096&&ve(re,"active",Ae[12].autoDeleteAfter==="7d"),le[0]&4096&&ve(se,"active",Ae[12].autoDeleteAfter==="14d"),le[0]&4096&&ve(we,"active",Ae[12].autoDeleteAfter==="30d"),Ae[12].type!=="dm"?Ie?Ie.p(Ae,le):(Ie=_c(Ae),Ie.c(),Ie.m(b,null)):Ie&&(Ie.d(1),Ie=null)},d(Ae){Ae&&_(e),Ie&&Ie.d(),ne=!1,je(me)}}}function _c(n){let e,t,s,i,r,a,l=`Save messages to your browser's local storage so you can see them after the server restarts.\r
								Each client controls their own message history.`,o,u;return{c(){e=y("div"),t=y("label"),s=y("input"),i=X(`\r
								Persist Messages Locally`),r=O(),a=y("p"),a.textContent=l,this.h()},l(d){e=w(d,"DIV",{class:!0});var b=I(e);t=w(b,"LABEL",{class:!0});var h=I(t);s=w(h,"INPUT",{type:!0,class:!0}),i=K(h,`\r
								Persist Messages Locally`),h.forEach(_),r=P(b),a=w(b,"P",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-c09spf"&&(a.textContent=l),b.forEach(_),this.h()},h(){f(s,"type","checkbox"),f(s,"class","setting-checkbox"),f(t,"class","setting-label svelte-uk4feo"),f(a,"class","setting-description svelte-uk4feo"),f(e,"class","setting-group svelte-uk4feo")},m(d,b){j(d,e,b),c(e,t),c(t,s),s.checked=n[13],c(t,i),c(e,r),c(e,a),o||(u=G(s,"change",n[59]),o=!0)},p(d,b){b[0]&8192&&(s.checked=d[13])},d(d){d&&_(e),o=!1,u()}}}function Um(n){let e,t,s='<div class="logo svelte-uk4feo"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-uk4feo"/></div>',i,r,a,l="Text Channels",o,u,d,b="ðŸ“º",h,p,g="+",E,C,S,k=[],v=new Map,m,T,A,D,N,R,M,F,z,W,B,U,Y,V,L,H,q,Z,$,Q=n[2]&&ac(n),oe=xe(n[15]);const ae=ne=>ne[62].id;for(let ne=0;ne<oe.length;ne+=1){let me=lc(n,oe,ne),Ie=ae(me);v.set(Ie,k[ne]=fc(Ie,me))}let ce=n[14].length>0&&dc(n),re=n[18]&&mc(n);function he(ne){n[44](ne)}let Ce={};n[3]!==void 0&&(Ce.isOpen=n[3]),D=new Nm({props:Ce}),lt.push(()=>tn(D,"isOpen",he)),M=new fs({props:{isOpen:n[6],title:"Delete Channel",message:"Delete channel #"+n[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:n[22],onCancel:n[45]}});function se(ne){n[46](ne)}let pe={channelId:n[9]};n[8]!==void 0&&(pe.isOpen=n[8]),z=new Fm({props:pe}),lt.push(()=>tn(z,"isOpen",se));function Ge(ne){n[47](ne)}function we(ne){n[48](ne)}let Pe={isOwnProfile:!0};n[10]!==void 0&&(Pe.isOpen=n[10]),n[18]!==void 0&&(Pe.user=n[18]),U=new Al({props:Pe}),lt.push(()=>tn(U,"isOpen",Ge)),lt.push(()=>tn(U,"user",we));let ye=n[11]&&n[12]&&vc(n);return{c(){e=y("div"),t=y("div"),t.innerHTML=s,i=O(),r=y("div"),a=y("h3"),a.textContent=l,o=O(),u=y("div"),d=y("button"),d.textContent=b,h=O(),p=y("button"),p.textContent=g,E=O(),Q&&Q.c(),C=O(),S=y("div");for(let ne=0;ne<k.length;ne+=1)k[ne].c();m=O(),ce&&ce.c(),T=O(),re&&re.c(),A=O(),it(D.$$.fragment),R=O(),it(M.$$.fragment),F=O(),it(z.$$.fragment),B=O(),it(U.$$.fragment),L=O(),ye&&ye.c(),H=Le(),this.h()},l(ne){e=w(ne,"DIV",{class:!0});var me=I(e);t=w(me,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-18mdtge"&&(t.innerHTML=s),i=P(me),r=w(me,"DIV",{class:!0});var Ie=I(r);a=w(Ie,"H3",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-cahn79"&&(a.textContent=l),o=P(Ie),u=w(Ie,"DIV",{class:!0});var Ae=I(u);d=w(Ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(d)!=="svelte-5el016"&&(d.textContent=b),h=P(Ae),p=w(Ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(p)!=="svelte-ou792o"&&(p.textContent=g),Ae.forEach(_),Ie.forEach(_),E=P(me),Q&&Q.l(me),C=P(me),S=w(me,"DIV",{class:!0});var le=I(S);for(let Fe=0;Fe<k.length;Fe+=1)k[Fe].l(le);m=P(le),ce&&ce.l(le),le.forEach(_),T=P(me),re&&re.l(me),me.forEach(_),A=P(ne),st(D.$$.fragment,ne),R=P(ne),st(M.$$.fragment,ne),F=P(ne),st(z.$$.fragment,ne),B=P(ne),st(U.$$.fragment,ne),L=P(ne),ye&&ye.l(ne),H=Le(),this.h()},h(){f(t,"class","top-section svelte-uk4feo"),f(a,"class","svelte-uk4feo"),f(d,"class","screen-share-icon-btn svelte-uk4feo"),f(d,"title","Screen Share"),ve(d,"active",n[0]==="screen"),f(p,"class","add-btn svelte-uk4feo"),f(p,"title","Create channel"),f(u,"class","header-buttons svelte-uk4feo"),f(r,"class","sidebar-header svelte-uk4feo"),f(S,"class","channel-list svelte-uk4feo"),f(e,"class","channel-sidebar svelte-uk4feo")},m(ne,me){j(ne,e,me),c(e,t),c(e,i),c(e,r),c(r,a),c(r,o),c(r,u),c(u,d),c(u,h),c(u,p),c(e,E),Q&&Q.m(e,null),c(e,C),c(e,S);for(let Ie=0;Ie<k.length;Ie+=1)k[Ie]&&k[Ie].m(S,null);c(S,m),ce&&ce.m(S,null),c(e,T),re&&re.m(e,null),j(ne,A,me),nt(D,ne,me),j(ne,R,me),nt(M,ne,me),j(ne,F,me),nt(z,ne,me),j(ne,B,me),nt(U,ne,me),j(ne,L,me),ye&&ye.m(ne,me),j(ne,H,me),q=!0,Z||($=[G(d,"click",n[29]),G(p,"click",n[30])],Z=!0)},p(ne,me){(!q||me[0]&1)&&ve(d,"active",ne[0]==="screen"),ne[2]?Q?Q.p(ne,me):(Q=ac(ne),Q.c(),Q.m(e,C)):Q&&(Q.d(1),Q=null),me[0]&28016640&&(oe=xe(ne[15]),k=sn(k,me,ae,1,ne,oe,v,S,nn,fc,m,lc)),ne[14].length>0?ce?ce.p(ne,me):(ce=dc(ne),ce.c(),ce.m(S,null)):ce&&(ce.d(1),ce=null),ne[18]?re?re.p(ne,me):(re=mc(ne),re.c(),re.m(e,null)):re&&(re.d(1),re=null);const Ie={};!N&&me[0]&8&&(N=!0,Ie.isOpen=ne[3],en(()=>N=!1)),D.$set(Ie);const Ae={};me[0]&64&&(Ae.isOpen=ne[6]),me[0]&128&&(Ae.message="Delete channel #"+ne[7]+"? This action cannot be undone."),me[0]&64&&(Ae.onCancel=ne[45]),M.$set(Ae);const le={};me[0]&512&&(le.channelId=ne[9]),!W&&me[0]&256&&(W=!0,le.isOpen=ne[8],en(()=>W=!1)),z.$set(le);const Fe={};!Y&&me[0]&1024&&(Y=!0,Fe.isOpen=ne[10],en(()=>Y=!1)),!V&&me[0]&262144&&(V=!0,Fe.user=ne[18],en(()=>V=!1)),U.$set(Fe),ne[11]&&ne[12]?ye?ye.p(ne,me):(ye=vc(ne),ye.c(),ye.m(H.parentNode,H)):ye&&(ye.d(1),ye=null)},i(ne){q||(Te(D.$$.fragment,ne),Te(M.$$.fragment,ne),Te(z.$$.fragment,ne),Te(U.$$.fragment,ne),q=!0)},o(ne){De(D.$$.fragment,ne),De(M.$$.fragment,ne),De(z.$$.fragment,ne),De(U.$$.fragment,ne),q=!1},d(ne){ne&&(_(e),_(A),_(R),_(F),_(B),_(L),_(H)),Q&&Q.d();for(let me=0;me<k.length;me+=1)k[me].d();ce&&ce.d(),re&&re.d(),tt(D,ne),tt(M,ne),tt(z,ne),tt(U,ne),ye&&ye.d(ne),Z=!1,je($)}}}function er(n){return n===0?"":n<=10?`+${n}`:"â€¢"}function Vm(n,e,t){let s,i,r,a,l,o;Me(n,jt,de=>t(27,r=de)),Me(n,hs,de=>t(16,a=de)),Me(n,ys,de=>t(17,l=de)),Me(n,Cn,de=>t(18,o=de));let{activeView:u="chat"}=e,d="",b=!1,h=!1,p=!1,g=!1,E=!1,C="",S=!1,k="",v=!1,m=!1,T=null;function A(de){Dh(de)}function D(){d.trim()&&(Nh(d.trim()),t(1,d=""),t(2,b=!1))}function N(de){t(7,C=de),t(6,E=!0)}function R(){Ph(C),t(6,E=!1)}function M(de){t(9,k=de),t(8,S=!0)}let F=!1;function z(de){t(12,T=de),t(13,F=de.persistMessages||!1),t(11,m=!0)}function W(de){T&&(Lh(T.id,{autoDeleteAfter:de,persistMessages:F}),t(11,m=!1))}function B(){t(10,v=!0)}function U(de){pn.call(this,n,de)}const Y=()=>t(0,u="screen"),V=()=>t(2,b=!b);function L(){d=this.value,t(1,d)}const H=de=>de.key==="Enter"&&D(),q=de=>A(de.id),Z=de=>z(de),$=de=>M(de.id),Q=de=>N(de.id),oe=de=>A(de.id),ae=de=>z(de),ce=de=>M(de.id),re=de=>N(de.id),he=()=>t(4,p=!p),Ce=()=>t(5,g=!g),se=()=>t(3,h=!0);function pe(de){h=de,t(3,h)}const Ge=()=>t(6,E=!1);function we(de){S=de,t(8,S)}function Pe(de){v=de,t(10,v)}function ye(de){o=de,Cn.set(o)}const ne=()=>t(11,m=!1),me=()=>W(null),Ie=()=>W("1h"),Ae=()=>W("6h"),le=()=>W("12h"),Fe=()=>W("24h"),Ve=()=>W("3d"),ze=()=>W("7d"),qe=()=>W("14d"),ie=()=>W("30d");function _e(){F=this.checked,t(13,F)}const be=()=>t(11,m=!1);return n.$$set=de=>{"activeView"in de&&t(0,u=de.activeView)},n.$$.update=()=>{n.$$.dirty[0]&134217728&&t(15,s=r.filter(de=>!de.type||de.type==="public")),n.$$.dirty[0]&134217728&&t(14,i=r.filter(de=>de.type==="group")),n.$$.dirty[0]&1&&u==="chat"&&Mh()},[u,d,b,h,p,g,E,C,S,k,v,m,T,F,i,s,a,l,o,A,D,N,R,M,z,W,B,r,U,Y,V,L,H,q,Z,$,Q,oe,ae,ce,re,he,Ce,se,pe,Ge,we,Pe,ye,ne,me,Ie,Ae,le,Fe,Ve,ze,qe,ie,_e,be]}class jm extends kt{constructor(e){super(),wt(this,e,Vm,Um,bt,{activeView:0},null,[-1,-1,-1])}}const Ml=Ct([]),tr=Ct(null),ur=Ct(!1),li=Ct(!1),ai=Ct(!1),As=new Map;let Dt=null;const lf={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function bc(n,e,t=!1){try{return Dt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),ur.set(!0),li.set(!1),ai.set(!t),n.emit("call-initiate",{targetUserId:e,isVideoCall:t}),Dt}catch(s){throw console.error("Error starting call:",s),s}}async function zm(n,e,t=!1){try{return Dt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),ur.set(!0),li.set(!1),ai.set(!t),n.emit("call-answer",{callerId:e,isVideoCall:t}),tr.set(null),Dt}catch(s){throw console.error("Error answering call:",s),s}}function qm(n,e){n.emit("call-reject",{callerId:e}),tr.set(null)}function Gr(n){Dt&&(Dt.getTracks().forEach(e=>e.stop()),Dt=null),ur.set(!1),li.set(!1),ai.set(!1),n.emit("call-end"),As.forEach(e=>e.close()),As.clear(),Ml.set([])}function Hm(){if(Dt){const n=Dt.getAudioTracks()[0];n&&(n.enabled=!n.enabled,li.set(!n.enabled))}}function xm(){if(Dt){const n=Dt.getVideoTracks()[0];n&&(n.enabled=!n.enabled,ai.set(!n.enabled))}}async function Gm(n,e){const t=new RTCPeerConnection(lf);As.set(e,t),Dt&&Dt.getTracks().forEach(i=>{t.addTrack(i,Dt)}),t.onicecandidate=i=>{i.candidate&&n.emit("call-ice-candidate",{candidate:i.candidate,targetId:e})},t.ontrack=i=>{af(e,i.streams[0])};const s=await t.createOffer();await t.setLocalDescription(s),n.emit("call-offer",{offer:s,targetId:e})}async function Wm(n,e,t,s){const i=new RTCPeerConnection(lf);As.set(e,i),Dt&&Dt.getTracks().forEach(a=>{i.addTrack(a,Dt)}),i.ontrack=a=>{af(e,a.streams[0])},i.onicecandidate=a=>{a.candidate&&n.emit("call-ice-candidate",{candidate:a.candidate,targetId:e})},await i.setRemoteDescription(s);const r=await i.createAnswer();await i.setLocalDescription(r),n.emit("call-answer-sdp",{answer:r,targetId:e})}async function Ym(n,e){const t=As.get(n);t&&await t.setRemoteDescription(e)}async function Km(n,e){const t=As.get(n);t&&await t.addIceCandidate(e)}function af(n,e){Ml.update(t=>{const s=t.findIndex(r=>r.userId===n),i={userId:n,username:"",stream:e,isVideoEnabled:e.getVideoTracks().length>0,isAudioEnabled:e.getAudioTracks().length>0};return s>=0?(t[s]=i,t):[...t,i]})}function Xm(){return Dt}const{window:Zm}=cl;function Jm(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-1jgoxw0"),Be(e,"background-color",n[0].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r&1&&t!==(t=i[0].username.charAt(0).toUpperCase()+"")&&te(s,t),r&1&&Be(e,"background-color",i[0].color)},d(i){i&&_(e)}}}function Qm(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","avatar svelte-1jgoxw0")},m(i,r){j(i,e,r)},p(i,r){r&1&&!Re(e.src,t=i[0].profilePicture)&&f(e,"src",t),r&1&&s!==(s=i[0].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function kc(n){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',s,i,r='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',a,l,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,d,b,h;return{c(){e=y("button"),e.innerHTML=t,s=O(),i=y("button"),i.innerHTML=r,a=O(),l=y("button"),l.innerHTML=o,u=O(),d=y("div"),this.h()},l(p){e=w(p,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),s=P(p),i=w(p,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1om8irr"&&(i.innerHTML=r),a=P(p),l=w(p,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-124vjww"&&(l.innerHTML=o),u=P(p),d=w(p,"DIV",{class:!0}),I(d).forEach(_),this.h()},h(){f(e,"class","menu-item svelte-1jgoxw0"),f(i,"class","menu-item svelte-1jgoxw0"),f(l,"class","menu-item svelte-1jgoxw0"),f(d,"class","menu-divider svelte-1jgoxw0")},m(p,g){j(p,e,g),j(p,s,g),j(p,i,g),j(p,a,g),j(p,l,g),j(p,u,g),j(p,d,g),b||(h=[G(e,"click",n[8]),G(i,"click",n[6]),G(l,"click",n[7])],b=!0)},p:Ne,d(p){p&&(_(e),_(s),_(i),_(a),_(l),_(u),_(d)),b=!1,je(h)}}}function $m(n){let e,t,s,i,r,a=n[0].username+"",l,o,u,d,b,h,p='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',g,E;function C(m,T){return m[0].profilePicture?Qm:Jm}let S=C(n),k=S(n),v=!n[1]&&kc(n);return{c(){e=y("div"),t=y("div"),s=y("div"),k.c(),i=O(),r=y("span"),l=X(a),o=O(),u=y("div"),d=O(),v&&v.c(),b=O(),h=y("button"),h.innerHTML=p,this.h()},l(m){e=w(m,"DIV",{class:!0,style:!0});var T=I(e);t=w(T,"DIV",{class:!0});var A=I(t);s=w(A,"DIV",{class:!0});var D=I(s);k.l(D),i=P(D),r=w(D,"SPAN",{class:!0});var N=I(r);l=K(N,a),N.forEach(_),D.forEach(_),A.forEach(_),o=P(T),u=w(T,"DIV",{class:!0}),I(u).forEach(_),d=P(T),v&&v.l(T),b=P(T),h=w(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-1rwejc6"&&(h.innerHTML=p),T.forEach(_),this.h()},h(){f(r,"class","username svelte-1jgoxw0"),f(s,"class","user-info svelte-1jgoxw0"),f(t,"class","menu-header svelte-1jgoxw0"),f(u,"class","menu-divider svelte-1jgoxw0"),f(h,"class","menu-item svelte-1jgoxw0"),f(e,"class","context-menu svelte-1jgoxw0"),Be(e,"left",n[4]+"px"),Be(e,"top",n[3]+"px")},m(m,T){j(m,e,T),c(e,t),c(t,s),k.m(s,null),c(s,i),c(s,r),c(r,l),c(e,o),c(e,u),c(e,d),v&&v.m(e,null),c(e,b),c(e,h),n[13](e),g||(E=[G(Zm,"click",n[5]),G(h,"click",n[9]),G(e,"click",_t(n[12]))],g=!0)},p(m,[T]){S===(S=C(m))&&k?k.p(m,T):(k.d(1),k=S(m),k&&(k.c(),k.m(s,i))),T&1&&a!==(a=m[0].username+"")&&te(l,a),m[1]?v&&(v.d(1),v=null):v?v.p(m,T):(v=kc(m),v.c(),v.m(e,b)),T&16&&Be(e,"left",m[4]+"px"),T&8&&Be(e,"top",m[3]+"px")},i:Ne,o:Ne,d(m){m&&_(e),k.d(),v&&v.d(),n[13](null),g=!1,je(E)}}}function ev(n,e,t){let s,i,{user:r}=e,{x:a}=e,{y:l}=e,{isOwnProfile:o}=e;const u=ni();let d;function b(k){u("close")}function h(){u("voiceCall"),u("close")}function p(){u("videoCall"),u("close")}function g(){u("openDM",{user:r}),u("close")}function E(){u("viewProfile"),u("close")}function C(k){pn.call(this,n,k)}function S(k){lt[k?"unshift":"push"](()=>{d=k,t(2,d)})}return n.$$set=k=>{"user"in k&&t(0,r=k.user),"x"in k&&t(10,a=k.x),"y"in k&&t(11,l=k.y),"isOwnProfile"in k&&t(1,o=k.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&1028&&t(4,s=(()=>{if(!d)return a;const k=d.offsetWidth||200,v=window.innerWidth;return a+k>v?a-k:a})()),n.$$.dirty&2052&&t(3,i=(()=>{if(!d)return l;const k=d.offsetHeight||300,v=window.innerHeight;return l+k>v?l-k:l})())},[r,o,d,i,s,b,h,p,g,E,a,l,C,S]}class tv extends kt{constructor(e){super(),wt(this,e,ev,$m,bt,{user:0,x:10,y:11,isOwnProfile:1})}}function wc(n,e,t){const s=n.slice();return s[9]=e[t],s}function yc(n){let e,t,s,i,r,a="Start a Direct Message",l,o,u="Ã—",d,b,h,p,g,E,C;function S(m,T){return m[2].length===0?sv:nv}let k=S(n),v=k(n);return{c(){e=y("div"),t=O(),s=y("div"),i=y("div"),r=y("h2"),r.textContent=a,l=O(),o=y("button"),o.textContent=u,d=O(),b=y("div"),h=y("input"),p=O(),g=y("div"),v.c(),this.h()},l(m){e=w(m,"DIV",{class:!0}),I(e).forEach(_),t=P(m),s=w(m,"DIV",{class:!0});var T=I(s);i=w(T,"DIV",{class:!0});var A=I(i);r=w(A,"H2",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-14qt3ql"&&(r.textContent=a),l=P(A),o=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-mm165g"&&(o.textContent=u),A.forEach(_),d=P(T),b=w(T,"DIV",{class:!0});var D=I(b);h=w(D,"INPUT",{type:!0,placeholder:!0,class:!0}),D.forEach(_),p=P(T),g=w(T,"DIV",{class:!0});var N=I(g);v.l(N),N.forEach(_),T.forEach(_),this.h()},h(){f(e,"class","modal-overlay svelte-1wgtlqt"),f(r,"class","svelte-1wgtlqt"),f(o,"class","close-btn svelte-1wgtlqt"),f(i,"class","modal-header svelte-1wgtlqt"),f(h,"type","text"),f(h,"placeholder","Search users..."),h.autofocus=!0,f(h,"class","svelte-1wgtlqt"),f(b,"class","search-container svelte-1wgtlqt"),f(g,"class","user-list svelte-1wgtlqt"),f(s,"class","modal svelte-1wgtlqt")},m(m,T){j(m,e,T),j(m,t,T),j(m,s,T),c(s,i),c(i,r),c(i,l),c(i,o),c(s,d),c(s,b),c(b,h),Ke(h,n[1]),c(s,p),c(s,g),v.m(g,null),h.focus(),E||(C=[G(e,"click",n[4]),G(o,"click",n[4]),G(h,"input",n[7])],E=!0)},p(m,T){T&2&&h.value!==m[1]&&Ke(h,m[1]),k===(k=S(m))&&v?v.p(m,T):(v.d(1),v=k(m),v&&(v.c(),v.m(g,null)))},d(m){m&&(_(e),_(t),_(s)),v.d(),E=!1,je(C)}}}function nv(n){let e=[],t=new Map,s,i=xe(n[2]);const r=a=>a[9].id;for(let a=0;a<i.length;a+=1){let l=wc(n,i,a),o=r(l);t.set(o,e[a]=Ec(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);s=Le()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,s,l)},p(a,l){l&12&&(i=xe(a[2]),e=sn(e,l,r,1,a,i,t,s.parentNode,nn,Ec,s,wc))},d(a){a&&_(s);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function sv(n){let e,t="No users found";return{c(){e=y("div"),e.textContent=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){f(e,"class","no-users svelte-1wgtlqt")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function iv(n){let e,t=n[9].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1wgtlqt"),Be(e,"background-color",n[9].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r&4&&t!==(t=i[9].username.charAt(0).toUpperCase()+"")&&te(s,t),r&4&&Be(e,"background-color",i[9].color)},d(i){i&&_(e)}}}function rv(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[9].profilePicture)||f(e,"src",t),f(e,"alt",s=n[9].username),f(e,"class","user-avatar svelte-1wgtlqt")},m(i,r){j(i,e,r)},p(i,r){r&4&&!Re(e.src,t=i[9].profilePicture)&&f(e,"src",t),r&4&&s!==(s=i[9].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Ec(n,e){let t,s,i,r,a,l,o,u=e[9].username+"",d,b,h,p=e[9].status+"",g,E,C,S;function k(A,D){return A[9].profilePicture?rv:iv}let v=k(e),m=v(e);function T(){return e[8](e[9])}return{key:n,first:null,c(){t=y("button"),s=y("div"),m.c(),i=O(),r=y("div"),a=O(),l=y("div"),o=y("div"),d=X(u),b=O(),h=y("div"),g=X(p),E=O(),this.h()},l(A){t=w(A,"BUTTON",{class:!0});var D=I(t);s=w(D,"DIV",{class:!0});var N=I(s);m.l(N),i=P(N),r=w(N,"DIV",{class:!0,style:!0}),I(r).forEach(_),N.forEach(_),a=P(D),l=w(D,"DIV",{class:!0});var R=I(l);o=w(R,"DIV",{class:!0});var M=I(o);d=K(M,u),M.forEach(_),b=P(R),h=w(R,"DIV",{class:!0});var F=I(h);g=K(F,p),F.forEach(_),R.forEach(_),E=P(D),D.forEach(_),this.h()},h(){f(r,"class","status-indicator svelte-1wgtlqt"),Be(r,"background-color",Cc(e[9].status)),f(s,"class","user-avatar-container svelte-1wgtlqt"),f(o,"class","username svelte-1wgtlqt"),f(h,"class","status-text svelte-1wgtlqt"),f(l,"class","user-info svelte-1wgtlqt"),f(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(A,D){j(A,t,D),c(t,s),m.m(s,null),c(s,i),c(s,r),c(t,a),c(t,l),c(l,o),c(o,d),c(l,b),c(l,h),c(h,g),c(t,E),C||(S=G(t,"click",T),C=!0)},p(A,D){e=A,v===(v=k(e))&&m?m.p(e,D):(m.d(1),m=v(e),m&&(m.c(),m.m(s,i))),D&4&&Be(r,"background-color",Cc(e[9].status)),D&4&&u!==(u=e[9].username+"")&&te(d,u),D&4&&p!==(p=e[9].status+"")&&te(g,p)},d(A){A&&_(t),m.d(),C=!1,S()}}}function lv(n){let e,t=n[0]&&yc(n);return{c(){t&&t.c(),e=Le()},l(s){t&&t.l(s),e=Le()},m(s,i){t&&t.m(s,i),j(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=yc(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(s){s&&_(e),t&&t.d(s)}}}function Cc(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function av(n,e,t){let s,i,r;Me(n,Cn,h=>t(5,i=h)),Me(n,rn,h=>t(6,r=h));let{isOpen:a=!1}=e,l="";function o(h){Mu(h.id),u()}function u(){t(0,a=!1),t(1,l="")}function d(){l=this.value,t(1,l)}const b=h=>o(h);return n.$$set=h=>{"isOpen"in h&&t(0,a=h.isOpen)},n.$$.update=()=>{n.$$.dirty&98&&t(2,s=r.filter(h=>h.id===(i==null?void 0:i.id)?!1:l?h.username.toLowerCase().includes(l.toLowerCase()):!0))},[a,l,s,o,u,i,r,d,b]}class ov extends kt{constructor(e){super(),wt(this,e,av,lv,bt,{isOpen:0})}}function Tc(n,e,t){const s=n.slice();return s[33]=e[t],s}function cv(n){let e,t=n[33].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1p3szz4"),Be(e,"background-color",n[33].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&512&&t!==(t=i[33].username.charAt(0).toUpperCase()+"")&&te(s,t),r[0]&512&&Be(e,"background-color",i[33].color)},d(i){i&&_(e)}}}function uv(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[33].profilePicture)||f(e,"src",t),f(e,"alt",s=n[33].username),f(e,"class","user-avatar svelte-1p3szz4")},m(i,r){j(i,e,r)},p(i,r){r[0]&512&&!Re(e.src,t=i[33].profilePicture)&&f(e,"src",t),r[0]&512&&s!==(s=i[33].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Sc(n){let e,t="(you)";return{c(){e=y("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){f(e,"class","you-badge svelte-1p3szz4")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function Ac(n){let e,t=Pc(n[10](n[33].id))+"",s;return{c(){e=y("span"),s=X(t),this.h()},l(i){e=w(i,"SPAN",{class:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","unread-badge svelte-1p3szz4")},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&512&&t!==(t=Pc(i[10](i[33].id))+"")&&te(s,t)},d(i){i&&_(e)}}}function Ic(n){let e,t,s="ðŸ“ž",i,r,a="ðŸ“¹",l,o;function u(...b){return n[20](n[33],...b)}function d(...b){return n[21](n[33],...b)}return{c(){e=y("div"),t=y("button"),t.textContent=s,i=O(),r=y("button"),r.textContent=a,this.h()},l(b){e=w(b,"DIV",{class:!0});var h=I(e);t=w(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(t)!=="svelte-jmuv4z"&&(t.textContent=s),i=P(h),r=w(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(r)!=="svelte-1whn4df"&&(r.textContent=a),h.forEach(_),this.h()},h(){f(t,"class","call-btn voice-call svelte-1p3szz4"),f(t,"title","Voice call"),f(r,"class","call-btn video-call svelte-1p3szz4"),f(r,"title","Video call"),f(e,"class","call-buttons svelte-1p3szz4")},m(b,h){j(b,e,h),c(e,t),c(e,i),c(e,r),l||(o=[G(t,"click",u),G(r,"click",d)],l=!0)},p(b,h){n=b},d(b){b&&_(e),l=!1,je(o)}}}function Dc(n,e){var U,Y,V;let t,s,i,r,a,l=e[33].username+"",o,u,d,b,h,p,g,E=e[33].status+"",C,S,k=e[33].id!==((U=e[8])==null?void 0:U.id)&&e[10](e[33].id)>0,v,m,T,A;function D(L,H){return L[33].profilePicture?uv:cv}let N=D(e),R=N(e),M=e[33].id===((Y=e[8])==null?void 0:Y.id)&&Sc(),F=k&&Ac(e);function z(){return e[18](e[33])}function W(...L){return e[19](e[33],...L)}let B=e[33].id!==((V=e[8])==null?void 0:V.id)&&Ic(e);return{key:n,first:null,c(){t=y("div"),s=y("button"),R.c(),i=O(),r=y("div"),a=y("span"),o=X(l),u=O(),M&&M.c(),d=O(),b=y("div"),h=y("span"),p=O(),g=y("span"),C=X(E),S=O(),F&&F.c(),v=O(),B&&B.c(),m=O(),this.h()},l(L){t=w(L,"DIV",{class:!0});var H=I(t);s=w(H,"BUTTON",{class:!0});var q=I(s);R.l(q),i=P(q),r=w(q,"DIV",{class:!0});var Z=I(r);a=w(Z,"SPAN",{class:!0});var $=I(a);o=K($,l),u=P($),M&&M.l($),$.forEach(_),d=P(Z),b=w(Z,"DIV",{class:!0});var Q=I(b);h=w(Q,"SPAN",{class:!0,style:!0}),I(h).forEach(_),p=P(Q),g=w(Q,"SPAN",{class:!0});var oe=I(g);C=K(oe,E),oe.forEach(_),Q.forEach(_),Z.forEach(_),S=P(q),F&&F.l(q),q.forEach(_),v=P(H),B&&B.l(H),m=P(H),H.forEach(_),this.h()},h(){f(a,"class","user-name svelte-1p3szz4"),f(h,"class","status-dot svelte-1p3szz4"),Be(h,"background-color",Oc(e[33].status)),f(g,"class","status-text svelte-1p3szz4"),f(b,"class","user-status svelte-1p3szz4"),f(r,"class","user-info svelte-1p3szz4"),f(s,"class","user svelte-1p3szz4"),f(t,"class","user-container svelte-1p3szz4"),this.first=t},m(L,H){j(L,t,H),c(t,s),R.m(s,null),c(s,i),c(s,r),c(r,a),c(a,o),c(a,u),M&&M.m(a,null),c(r,d),c(r,b),c(b,h),c(b,p),c(b,g),c(g,C),c(s,S),F&&F.m(s,null),c(t,v),B&&B.m(t,null),c(t,m),T||(A=[G(s,"click",z),G(s,"contextmenu",W)],T=!0)},p(L,H){var q,Z,$;e=L,N===(N=D(e))&&R?R.p(e,H):(R.d(1),R=N(e),R&&(R.c(),R.m(s,i))),H[0]&512&&l!==(l=e[33].username+"")&&te(o,l),e[33].id===((q=e[8])==null?void 0:q.id)?M||(M=Sc(),M.c(),M.m(a,null)):M&&(M.d(1),M=null),H[0]&512&&Be(h,"background-color",Oc(e[33].status)),H[0]&512&&E!==(E=e[33].status+"")&&te(C,E),H[0]&768&&(k=e[33].id!==((Z=e[8])==null?void 0:Z.id)&&e[10](e[33].id)>0),k?F?F.p(e,H):(F=Ac(e),F.c(),F.m(s,null)):F&&(F.d(1),F=null),e[33].id!==(($=e[8])==null?void 0:$.id)?B?B.p(e,H):(B=Ic(e),B.c(),B.m(t,m)):B&&(B.d(1),B=null)},d(L){L&&_(t),R.d(),M&&M.d(),F&&F.d(),B&&B.d(),T=!1,je(A)}}}function Nc(n){var s;let e,t;return e=new tv({props:{user:n[5],x:n[6],y:n[7],isOwnProfile:n[5].id===((s=n[8])==null?void 0:s.id)}}),e.$on("close",n[13]),e.$on("voiceCall",n[24]),e.$on("videoCall",n[25]),e.$on("openDM",n[14]),e.$on("viewProfile",n[26]),{c(){it(e.$$.fragment)},l(i){st(e.$$.fragment,i)},m(i,r){nt(e,i,r),t=!0},p(i,r){var l;const a={};r[0]&32&&(a.user=i[5]),r[0]&64&&(a.x=i[6]),r[0]&128&&(a.y=i[7]),r[0]&288&&(a.isOwnProfile=i[5].id===((l=i[8])==null?void 0:l.id)),e.$set(a)},i(i){t||(Te(e.$$.fragment,i),t=!0)},o(i){De(e.$$.fragment,i),t=!1},d(i){tt(e,i)}}}function fv(n){let e,t,s,i,r=n[9].length+"",a,l,o,u,d="ðŸ’¬",b,h,p=[],g=new Map,E,C,S,k,v,m,T,A,D,N,R,M=xe(n[9]);const F=L=>L[33].id;for(let L=0;L<M.length;L+=1){let H=Tc(n,M,L),q=F(H);g.set(q,p[L]=Dc(q,H))}function z(L){n[22](L)}function W(L){n[23](L)}let B={isOwnProfile:n[2]};n[0]!==void 0&&(B.isOpen=n[0]),n[1]!==void 0&&(B.user=n[1]),C=new Al({props:B}),lt.push(()=>tn(C,"isOpen",z)),lt.push(()=>tn(C,"user",W));let U=n[4]&&n[5]&&Nc(n);function Y(L){n[27](L)}let V={};return n[3]!==void 0&&(V.isOpen=n[3]),T=new ov({props:V}),lt.push(()=>tn(T,"isOpen",Y)),{c(){e=y("aside"),t=y("div"),s=y("h3"),i=X("Online ("),a=X(r),l=X(")"),o=O(),u=y("button"),u.textContent=d,b=O(),h=y("div");for(let L=0;L<p.length;L+=1)p[L].c();E=O(),it(C.$$.fragment),v=O(),U&&U.c(),m=O(),it(T.$$.fragment),this.h()},l(L){e=w(L,"ASIDE",{class:!0});var H=I(e);t=w(H,"DIV",{class:!0});var q=I(t);s=w(q,"H3",{class:!0});var Z=I(s);i=K(Z,"Online ("),a=K(Z,r),l=K(Z,")"),Z.forEach(_),o=P(q),u=w(q,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(u)!=="svelte-1sotr3f"&&(u.textContent=d),q.forEach(_),b=P(H),h=w(H,"DIV",{class:!0});var $=I(h);for(let Q=0;Q<p.length;Q+=1)p[Q].l($);$.forEach(_),H.forEach(_),E=P(L),st(C.$$.fragment,L),v=P(L),U&&U.l(L),m=P(L),st(T.$$.fragment,L),this.h()},h(){f(s,"class","svelte-1p3szz4"),f(u,"class","dm-btn svelte-1p3szz4"),f(u,"title","Start a DM"),f(t,"class","panel-header svelte-1p3szz4"),f(h,"class","user-list svelte-1p3szz4"),f(e,"class","user-panel svelte-1p3szz4")},m(L,H){j(L,e,H),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,o),c(t,u),c(e,b),c(e,h);for(let q=0;q<p.length;q+=1)p[q]&&p[q].m(h,null);j(L,E,H),nt(C,L,H),j(L,v,H),U&&U.m(L,H),j(L,m,H),nt(T,L,H),D=!0,N||(R=G(u,"click",n[15]),N=!0)},p(L,H){(!D||H[0]&512)&&r!==(r=L[9].length+"")&&te(a,r),H[0]&220928&&(M=xe(L[9]),p=sn(p,H,F,1,L,M,g,h,nn,Dc,null,Tc));const q={};H[0]&4&&(q.isOwnProfile=L[2]),!S&&H[0]&1&&(S=!0,q.isOpen=L[0],en(()=>S=!1)),!k&&H[0]&2&&(k=!0,q.user=L[1],en(()=>k=!1)),C.$set(q),L[4]&&L[5]?U?(U.p(L,H),H[0]&48&&Te(U,1)):(U=Nc(L),U.c(),Te(U,1),U.m(m.parentNode,m)):U&&(gn(),De(U,1,1,()=>{U=null}),mn());const Z={};!A&&H[0]&8&&(A=!0,Z.isOpen=L[3],en(()=>A=!1)),T.$set(Z)},i(L){D||(Te(C.$$.fragment,L),Te(U),Te(T.$$.fragment,L),D=!0)},o(L){De(C.$$.fragment,L),De(U),De(T.$$.fragment,L),D=!1},d(L){L&&(_(e),_(E),_(v),_(m));for(let H=0;H<p.length;H+=1)p[H].d();tt(C,L),U&&U.d(L),tt(T,L),N=!1,R()}}}function Pc(n){return n===0?"":n<=10?`+${n}`:"â€¢"}function Oc(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function dv(n,e,t){let s,i,r,a,l;Me(n,Ns,q=>t(28,s=q)),Me(n,Cn,q=>t(8,i=q)),Me(n,jt,q=>t(29,r=q)),Me(n,ys,q=>t(30,a=q)),Me(n,rn,q=>t(9,l=q));const o=ni();function u(q){return`dm-${[i==null?void 0:i.id,q].sort().join("-")}`}function d(q){const Z=u(q);return a[Z]||0}let b=!1,h=null,p=!1,g=!1,E=!1,C=null,S=0,k=0;function v(q){t(1,h=q),t(2,p=q.id===(i==null?void 0:i.id)),t(0,b=!0)}function m(q,Z){q.preventDefault(),q.stopPropagation(),t(5,C=Z),t(6,S=q.clientX),t(7,k=q.clientY),t(4,E=!0)}function T(){t(4,E=!1),t(5,C=null)}function A(q){let Z=null;if(q&&"detail"in q?Z=q.detail.user:q&&"id"in q?Z=q:Z=C,!Z)return;const Q=`dm-${[i==null?void 0:i.id,Z.id].sort().join("-")}`;if(r.find(ae=>ae.id===Q))o("openDM",{channelId:Q,otherUser:Z});else{Mu(Z.id);const ae=jt.subscribe(ce=>{ce.find(he=>he.id===Q)&&(o("openDM",{channelId:Q,otherUser:Z}),ae())})}}function D(){t(3,g=!0)}async function N(q,Z){q&&q.stopPropagation();const $=Z||C;if(!(!s||!$||$.id===(i==null?void 0:i.id)))try{await bc(s,$.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function R(q,Z){q&&q.stopPropagation();const $=Z||C;if(!(!s||!$||$.id===(i==null?void 0:i.id)))try{await bc(s,$.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const M=q=>{q.id!==(i==null?void 0:i.id)?A(q):v(q)},F=(q,Z)=>m(Z,q),z=(q,Z)=>N(Z,q),W=(q,Z)=>R(Z,q);function B(q){b=q,t(0,b)}function U(q){h=q,t(1,h)}const Y=()=>N(),V=()=>R(),L=()=>{C&&v(C)};function H(q){g=q,t(3,g)}return[b,h,p,g,E,C,S,k,i,l,d,v,m,T,A,D,N,R,M,F,z,W,B,U,Y,V,L,H]}class hv extends kt{constructor(e){super(),wt(this,e,dv,fv,bt,{},null,[-1,-1])}}const Fl=Ct([]),Ll=Ct(!1),ts=new Map;let xn=null;const of={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function pv(n){try{return xn=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),Ll.set(!0),n.emit("start-screen-share"),xn.getVideoTracks()[0].onended=()=>{cf(n)},xn}catch(e){throw console.error("Error starting screen share:",e),e}}function cf(n){xn&&(xn.getTracks().forEach(e=>e.stop()),xn=null),Ll.set(!1),n.emit("stop-screen-share"),ts.forEach(e=>e.close()),ts.clear()}async function gv(n,e){const t=new RTCPeerConnection(of);ts.set(e,t),xn&&xn.getTracks().forEach(i=>{t.addTrack(i,xn)}),t.onicecandidate=i=>{i.candidate&&n.emit("webrtc-ice-candidate",{candidate:i.candidate,targetId:e})};const s=await t.createOffer();await t.setLocalDescription(s),n.emit("webrtc-offer",{offer:s,targetId:e})}async function mv(n,e,t,s){const i=new RTCPeerConnection(of);ts.set(e,i),i.ontrack=a=>{Fl.update(l=>{const o=l.findIndex(d=>d.userId===e),u={userId:e,username:t,stream:a.streams[0]};return o>=0?(l[o]=u,l):[...l,u]})},i.onicecandidate=a=>{a.candidate&&n.emit("webrtc-ice-candidate",{candidate:a.candidate,targetId:e})},await i.setRemoteDescription(s);const r=await i.createAnswer();await i.setLocalDescription(r),n.emit("webrtc-answer",{answer:r,targetId:e})}async function vv(n,e){const t=ts.get(n);t&&await t.setRemoteDescription(e)}async function _v(n,e){const t=ts.get(n);t&&await t.addIceCandidate(e)}function bv(n){Fl.update(t=>t.filter(s=>s.userId!==n));const e=ts.get(n);e&&(e.close(),ts.delete(n))}function Rc(n,e,t){const s=n.slice();return s[12]=e[t],s}function kv(n){let e,t="Start Sharing",s,i;return{c(){e=y("button"),e.textContent=t},l(r){e=w(r,"BUTTON",{"data-svelte-h":!0}),J(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(r,a){j(r,e,a),s||(i=G(e,"click",n[6]),s=!0)},p:Ne,d(r){r&&_(e),s=!1,i()}}}function wv(n){let e,t="Stop Sharing",s,i;return{c(){e=y("button"),e.textContent=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){f(e,"class","stop-btn svelte-1oqngqd")},m(r,a){j(r,e,a),s||(i=G(e,"click",n[7]),s=!0)},p:Ne,d(r){r&&_(e),s=!1,i()}}}function Mc(n){let e,t;return{c(){e=y("div"),t=X(n[2]),this.h()},l(s){e=w(s,"DIV",{class:!0});var i=I(e);t=K(i,n[2]),i.forEach(_),this.h()},h(){f(e,"class","error svelte-1oqngqd")},m(s,i){j(s,e,i),c(e,t)},p(s,i){i&4&&te(t,s[2])},d(s){s&&_(e)}}}function Fc(n){let e,t,s='<span class="badge svelte-1oqngqd">Your Screen</span>',i,r;return{c(){e=y("div"),t=y("div"),t.innerHTML=s,i=O(),r=y("video"),this.h()},l(a){e=w(a,"DIV",{class:!0});var l=I(e);t=w(l,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-16dlolc"&&(t.innerHTML=s),i=P(l),r=w(l,"VIDEO",{class:!0}),I(r).forEach(_),l.forEach(_),this.h()},h(){f(t,"class","screen-header svelte-1oqngqd"),r.autoplay=!0,r.muted=!0,r.playsInline=!0,f(r,"class","svelte-1oqngqd"),f(e,"class","screen-item svelte-1oqngqd")},m(a,l){j(a,e,l),c(e,t),c(e,i),c(e,r),n[9](r)},p:Ne,d(a){a&&_(e),n[9](null)}}}function Lc(n,e){let t,s,i,r=e[12].username+"",a,l,o,u,d,b,h;return{key:n,first:null,c(){t=y("div"),s=y("div"),i=y("span"),a=X(r),l=X("'s Screen"),o=O(),u=y("video"),this.h()},l(p){t=w(p,"DIV",{class:!0});var g=I(t);s=w(g,"DIV",{class:!0});var E=I(s);i=w(E,"SPAN",{class:!0});var C=I(i);a=K(C,r),l=K(C,"'s Screen"),C.forEach(_),E.forEach(_),o=P(g),u=w(g,"VIDEO",{class:!0}),I(u).forEach(_),g.forEach(_),this.h()},h(){f(i,"class","username svelte-1oqngqd"),f(s,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,f(u,"class","svelte-1oqngqd"),f(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(p,g){j(p,t,g),c(t,s),c(s,i),c(i,a),c(i,l),c(t,o),c(t,u),b||(h=pf(d=Ev.call(null,u,e[12].stream)),b=!0)},p(p,g){e=p,g&16&&r!==(r=e[12].username+"")&&te(a,r),d&&Gn(d.update)&&g&16&&d.update.call(null,e[12].stream)},d(p){p&&_(t),b=!1,h()}}}function Bc(n){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1oqngqd")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function yv(n){let e,t,s,i,r="â† Back",a,l,o="ðŸ–¥ï¸ Screen Sharing",u,d,b,h,p,g=[],E=new Map,C,S,k;function v(F,z){return F[3]?wv:kv}let m=v(n),T=m(n),A=n[2]&&Mc(n),D=n[3]&&n[0]&&Fc(n),N=xe(n[4]);const R=F=>F[12].userId;for(let F=0;F<N.length;F+=1){let z=Rc(n,N,F),W=R(z);E.set(W,g[F]=Lc(W,z))}let M=!n[3]&&n[4].length===0&&Bc();return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("button"),i.textContent=r,a=O(),l=y("h2"),l.textContent=o,u=O(),T.c(),d=O(),A&&A.c(),b=O(),h=y("div"),D&&D.c(),p=O();for(let F=0;F<g.length;F+=1)g[F].c();C=O(),M&&M.c(),this.h()},l(F){e=w(F,"DIV",{class:!0});var z=I(e);t=w(z,"DIV",{class:!0});var W=I(t);s=w(W,"DIV",{class:!0});var B=I(s);i=w(B,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(i)!=="svelte-ts724a"&&(i.textContent=r),a=P(B),l=w(B,"H2",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1el2fdv"&&(l.textContent=o),B.forEach(_),u=P(W),T.l(W),W.forEach(_),d=P(z),A&&A.l(z),b=P(z),h=w(z,"DIV",{class:!0});var U=I(h);D&&D.l(U),p=P(U);for(let Y=0;Y<g.length;Y+=1)g[Y].l(U);C=P(U),M&&M.l(U),U.forEach(_),z.forEach(_),this.h()},h(){f(i,"class","back-btn svelte-1oqngqd"),f(i,"title","Back to chat"),f(l,"class","svelte-1oqngqd"),f(s,"class","header-left svelte-1oqngqd"),f(t,"class","header svelte-1oqngqd"),f(h,"class","screens svelte-1oqngqd"),f(e,"class","screen-share-container svelte-1oqngqd")},m(F,z){j(F,e,z),c(e,t),c(t,s),c(s,i),c(s,a),c(s,l),c(t,u),T.m(t,null),c(e,d),A&&A.m(e,null),c(e,b),c(e,h),D&&D.m(h,null),c(h,p);for(let W=0;W<g.length;W+=1)g[W]&&g[W].m(h,null);c(h,C),M&&M.m(h,null),S||(k=G(i,"click",n[5]),S=!0)},p(F,[z]){m===(m=v(F))&&T?T.p(F,z):(T.d(1),T=m(F),T&&(T.c(),T.m(t,null))),F[2]?A?A.p(F,z):(A=Mc(F),A.c(),A.m(e,b)):A&&(A.d(1),A=null),F[3]&&F[0]?D?D.p(F,z):(D=Fc(F),D.c(),D.m(h,p)):D&&(D.d(1),D=null),z&16&&(N=xe(F[4]),g=sn(g,z,R,1,F,N,E,h,nn,Lc,C,Rc)),!F[3]&&F[4].length===0?M||(M=Bc(),M.c(),M.m(h,null)):M&&(M.d(1),M=null)},i:Ne,o:Ne,d(F){F&&_(e),T.d(),A&&A.d(),D&&D.d();for(let z=0;z<g.length;z+=1)g[z].d();M&&M.d(),S=!1,k()}}}function Ev(n,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),n.srcObject=e,n.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),n.srcObject=t,n.play().catch(s=>console.error("Error playing updated remote video:",s))}}}function Cv(n,e,t){let s,i,r,a;Me(n,Ns,E=>t(10,s=E)),Me(n,Ll,E=>t(3,i=E)),Me(n,rn,E=>t(11,r=E)),Me(n,Fl,E=>t(4,a=E));let{activeView:l="screen"}=e,o=null,u="",d;function b(){t(8,l="chat")}async function h(){try{if(!s)return;t(0,o=await pv(s)),console.log("Screen share started, stream:",o),console.log("Stream tracks:",o==null?void 0:o.getTracks()),console.log("Video tracks:",o==null?void 0:o.getVideoTracks()),t(2,u="")}catch(E){t(2,u="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",E)}}function p(){s&&(cf(s),t(0,o=null))}Tn(()=>{s&&(s.on("screen-share-started",async E=>{s&&(console.log(`${E.username} started screen sharing`),gl(),t(8,l="screen"),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Screen Share Started",{body:`${E.username} is sharing their screen`,icon:"/icon-192.png"}))}),s.on("screen-share-stopped",E=>{bv(E)}),s.on("webrtc-offer",async E=>{if(!s)return;const C=r.find(S=>S.id===E.senderId);C&&await mv(s,E.senderId,C.username,E.offer)}),s.on("webrtc-answer",async E=>{await vv(E.senderId,E.answer)}),s.on("webrtc-ice-candidate",async E=>{await _v(E.senderId,E.candidate)}),s.on("user-joined",async E=>{i&&s&&setTimeout(()=>{s&&gv(s,E.id)},1e3)}))});function g(E){lt[E?"unshift":"push"](()=>{d=E,t(1,d),t(0,o)})}return n.$$set=E=>{"activeView"in E&&t(8,l=E.activeView)},n.$$.update=()=>{n.$$.dirty&3&&d&&o&&(console.log("Setting local video srcObject",o),t(1,d.srcObject=o,d),d.play().catch(E=>console.error("Error playing local video:",E)))},[o,d,u,i,a,b,h,p,l,g]}class Tv extends kt{constructor(e){super(),wt(this,e,Cv,yv,bt,{activeView:8})}}function Uc(n,e,t){const s=n.slice();return s[17]=e[t],s[18]=e,s[19]=t,s}function Vc(n){let e,t,s,i,r=n[2].username.charAt(0).toUpperCase()+"",a,l,o,u=n[2].username+"",d,b,h,p=n[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,E,C,S,k,v=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,m,T,A=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,D,N;return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("div"),a=X(r),l=O(),o=y("h2"),d=X(u),b=O(),h=y("p"),g=X(p),E=X(" Call"),C=O(),S=y("div"),k=y("button"),k.innerHTML=v,m=O(),T=y("button"),T.innerHTML=A,this.h()},l(R){e=w(R,"DIV",{class:!0});var M=I(e);t=w(M,"DIV",{class:!0});var F=I(t);s=w(F,"DIV",{class:!0});var z=I(s);i=w(z,"DIV",{class:!0});var W=I(i);a=K(W,r),W.forEach(_),l=P(z),o=w(z,"H2",{class:!0});var B=I(o);d=K(B,u),B.forEach(_),b=P(z),h=w(z,"P",{class:!0});var U=I(h);g=K(U,p),E=K(U," Call"),U.forEach(_),z.forEach(_),C=P(F),S=w(F,"DIV",{class:!0});var Y=I(S);k=w(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(k)!=="svelte-u3s2jz"&&(k.innerHTML=v),m=P(Y),T=w(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(T)!=="svelte-om1ns7"&&(T.innerHTML=A),Y.forEach(_),F.forEach(_),M.forEach(_),this.h()},h(){f(i,"class","caller-avatar svelte-1mc89jk"),f(o,"class","svelte-1mc89jk"),f(h,"class","call-type svelte-1mc89jk"),f(s,"class","caller-info svelte-1mc89jk"),f(k,"class","answer-btn svelte-1mc89jk"),f(T,"class","reject-btn svelte-1mc89jk"),f(S,"class","call-actions svelte-1mc89jk"),f(t,"class","incoming-call-modal svelte-1mc89jk"),f(e,"class","call-modal-overlay svelte-1mc89jk")},m(R,M){j(R,e,M),c(e,t),c(t,s),c(s,i),c(i,a),c(s,l),c(s,o),c(o,d),c(s,b),c(s,h),c(h,g),c(h,E),c(t,C),c(t,S),c(S,k),c(S,m),c(S,T),D||(N=[G(k,"click",n[7]),G(T,"click",n[8])],D=!0)},p(R,M){M&4&&r!==(r=R[2].username.charAt(0).toUpperCase()+"")&&te(a,r),M&4&&u!==(u=R[2].username+"")&&te(d,u),M&4&&p!==(p=R[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&te(g,p)},d(R){R&&_(e),D=!1,je(N)}}}function jc(n){let e,t,s,i,r,a,l,o="You",u,d=[],b=new Map,h,p,g,E,C=n[6]?"ðŸ”‡":"ðŸŽ¤",S,k,v,m,T,A=n[5]?"ðŸ“¹":"ðŸ“·",D,N,R,M,F='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',z,W,B=n[5]&&zc(),U=xe(n[3]);const Y=V=>V[17].userId;for(let V=0;V<U.length;V+=1){let L=Uc(n,U,V),H=Y(L);b.set(H,d[V]=Hc(H,L))}return{c(){e=y("div"),t=y("div"),s=y("div"),i=y("video"),r=O(),B&&B.c(),a=O(),l=y("div"),l.textContent=o,u=O();for(let V=0;V<d.length;V+=1)d[V].c();h=O(),p=y("div"),g=y("button"),E=y("span"),S=X(C),v=O(),m=y("button"),T=y("span"),D=X(A),R=O(),M=y("button"),M.innerHTML=F,this.h()},l(V){e=w(V,"DIV",{class:!0});var L=I(e);t=w(L,"DIV",{class:!0});var H=I(t);s=w(H,"DIV",{class:!0});var q=I(s);i=w(q,"VIDEO",{class:!0}),I(i).forEach(_),r=P(q),B&&B.l(q),a=P(q),l=w(q,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1l6ztyc"&&(l.textContent=o),q.forEach(_),u=P(H);for(let ce=0;ce<d.length;ce+=1)d[ce].l(H);H.forEach(_),h=P(L),p=w(L,"DIV",{class:!0});var Z=I(p);g=w(Z,"BUTTON",{class:!0,title:!0});var $=I(g);E=w($,"SPAN",{class:!0});var Q=I(E);S=K(Q,C),Q.forEach(_),$.forEach(_),v=P(Z),m=w(Z,"BUTTON",{class:!0,title:!0});var oe=I(m);T=w(oe,"SPAN",{class:!0});var ae=I(T);D=K(ae,A),ae.forEach(_),oe.forEach(_),R=P(Z),M=w(Z,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(M)!=="svelte-1rszrze"&&(M.innerHTML=F),Z.forEach(_),L.forEach(_),this.h()},h(){i.autoplay=!0,i.muted=!0,i.playsInline=!0,f(i,"class","video-element svelte-1mc89jk"),ve(i,"video-hidden",n[5]),f(l,"class","video-label svelte-1mc89jk"),f(s,"class","video-wrapper local-video svelte-1mc89jk"),f(t,"class","video-grid svelte-1mc89jk"),f(E,"class","control-icon svelte-1mc89jk"),f(g,"class","control-btn svelte-1mc89jk"),f(g,"title",k=n[6]?"Unmute":"Mute"),ve(g,"active",n[6]),f(T,"class","control-icon svelte-1mc89jk"),f(m,"class","control-btn svelte-1mc89jk"),f(m,"title",N=n[5]?"Turn on camera":"Turn off camera"),ve(m,"active",n[5]),f(M,"class","control-btn end-call-btn svelte-1mc89jk"),f(M,"title","End call"),f(p,"class","call-controls svelte-1mc89jk"),f(e,"class","active-call-container svelte-1mc89jk")},m(V,L){j(V,e,L),c(e,t),c(t,s),c(s,i),n[13](i),c(s,r),B&&B.m(s,null),c(s,a),c(s,l),c(t,u);for(let H=0;H<d.length;H+=1)d[H]&&d[H].m(t,null);c(e,h),c(e,p),c(p,g),c(g,E),c(E,S),c(p,v),c(p,m),c(m,T),c(T,D),c(p,R),c(p,M),z||(W=[G(g,"click",n[10]),G(m,"click",n[11]),G(M,"click",n[9])],z=!0)},p(V,L){L&32&&ve(i,"video-hidden",V[5]),V[5]?B||(B=zc(),B.c(),B.m(s,a)):B&&(B.d(1),B=null),L&10&&(U=xe(V[3]),d=sn(d,L,Y,1,V,U,b,t,nn,Hc,null,Uc)),L&64&&C!==(C=V[6]?"ðŸ”‡":"ðŸŽ¤")&&te(S,C),L&64&&k!==(k=V[6]?"Unmute":"Mute")&&f(g,"title",k),L&64&&ve(g,"active",V[6]),L&32&&A!==(A=V[5]?"ðŸ“¹":"ðŸ“·")&&te(D,A),L&32&&N!==(N=V[5]?"Turn on camera":"Turn off camera")&&f(m,"title",N),L&32&&ve(m,"active",V[5])},d(V){V&&_(e),n[13](null),B&&B.d();for(let L=0;L<d.length;L+=1)d[L].d();z=!1,je(W)}}}function zc(n){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){f(e,"class","video-placeholder svelte-1mc89jk")},m(s,i){j(s,e,i)},d(s){s&&_(e)}}}function qc(n){let e,t,s="ðŸ‘¤",i,r,a=(n[17].username||"User")+"",l;return{c(){e=y("div"),t=y("span"),t.textContent=s,i=O(),r=y("span"),l=X(a),this.h()},l(o){e=w(o,"DIV",{class:!0});var u=I(e);t=w(u,"SPAN",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-18bpbb5"&&(t.textContent=s),i=P(u),r=w(u,"SPAN",{});var d=I(r);l=K(d,a),d.forEach(_),u.forEach(_),this.h()},h(){f(t,"class","placeholder-icon svelte-1mc89jk"),f(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){j(o,e,u),c(e,t),c(e,i),c(e,r),c(r,l)},p(o,u){u&8&&a!==(a=(o[17].username||"User")+"")&&te(l,a)},d(o){o&&_(e)}}}function Hc(n,e){let t,s,i=e[17],r,a,l,o=(e[17].username||"User")+"",u,d;const b=()=>e[14](s,i),h=()=>e[14](null,i);let p=!e[17].isVideoEnabled&&qc(e);return{key:n,first:null,c(){t=y("div"),s=y("video"),r=O(),p&&p.c(),a=O(),l=y("div"),u=X(o),d=O(),this.h()},l(g){t=w(g,"DIV",{class:!0});var E=I(t);s=w(E,"VIDEO",{class:!0}),I(s).forEach(_),r=P(E),p&&p.l(E),a=P(E),l=w(E,"DIV",{class:!0});var C=I(l);u=K(C,o),C.forEach(_),d=P(E),E.forEach(_),this.h()},h(){s.autoplay=!0,s.playsInline=!0,f(s,"class","video-element svelte-1mc89jk"),ve(s,"video-hidden",!e[17].isVideoEnabled),f(l,"class","video-label svelte-1mc89jk"),f(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(g,E){j(g,t,E),c(t,s),b(),c(t,r),p&&p.m(t,null),c(t,a),c(t,l),c(l,u),c(t,d)},p(g,E){e=g,i!==e[17]&&(h(),i=e[17],b()),E&8&&ve(s,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?p&&(p.d(1),p=null):p?p.p(e,E):(p=qc(e),p.c(),p.m(t,a)),E&8&&o!==(o=(e[17].username||"User")+"")&&te(u,o)},d(g){g&&_(t),h(),p&&p.d()}}}function Sv(n){let e,t,s=n[2]&&Vc(n),i=n[4]&&jc(n);return{c(){s&&s.c(),e=O(),i&&i.c(),t=Le()},l(r){s&&s.l(r),e=P(r),i&&i.l(r),t=Le()},m(r,a){s&&s.m(r,a),j(r,e,a),i&&i.m(r,a),j(r,t,a)},p(r,[a]){r[2]?s?s.p(r,a):(s=Vc(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),r[4]?i?i.p(r,a):(i=jc(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Ne,o:Ne,d(r){r&&(_(e),_(t)),s&&s.d(r),i&&i.d(r)}}}function Av(n,e,t){let s,i,r,a,l,o;Me(n,Ns,m=>t(15,s=m)),Me(n,tr,m=>t(2,i=m)),Me(n,Ml,m=>t(3,r=m)),Me(n,ur,m=>t(4,a=m)),Me(n,ai,m=>t(5,l=m)),Me(n,li,m=>t(6,o=m));let u,d={},b=null;Tn(()=>{s&&(s.on("call-incoming",m=>{tr.set({userId:m.userId,username:m.username,isVideoCall:m.isVideoCall})}),s.on("call-accepted",async m=>{await Gm(s,m.userId)}),s.on("call-rejected",m=>{alert("Call was rejected"),Gr(s)}),s.on("call-ended",m=>{Gr(s)}),s.on("call-offer",async m=>{const T=r.find(D=>D.userId===m.senderId)||i,A=T?T.username:"Unknown";await Wm(s,m.senderId,A,m.offer)}),s.on("call-answer-sdp",async m=>{await Ym(m.senderId,m.answer)}),s.on("call-ice-candidate",async m=>{await Km(m.senderId,m.candidate)}))}),tu(()=>{s&&(s.off("call-incoming"),s.off("call-accepted"),s.off("call-rejected"),s.off("call-ended"),s.off("call-offer"),s.off("call-answer-sdp"),s.off("call-ice-candidate"))});function h(){gu()}async function p(){!i||!s||await zm(s,i.userId,i.isVideoCall)}function g(){!i||!s||qm(s,i.userId)}function E(){s&&Gr(s)}function C(){Hm()}function S(){xm()}function k(m){lt[m?"unshift":"push"](()=>{u=m,t(0,u),t(4,a)})}function v(m,T){lt[m?"unshift":"push"](()=>{d[T.userId]=m,t(1,d)})}return n.$$.update=()=>{if(n.$$.dirty&4100&&(i?(h(),t(12,b=fd(i.username,i.isVideoCall,()=>p()))):b&&(b.close(),t(12,b=null))),n.$$.dirty&17&&a&&u){const m=Xm();m&&t(0,u.srcObject=m,u)}n.$$.dirty&10&&r.length>0&&r.forEach(m=>{const T=d[m.userId];T&&m.stream&&(T.srcObject=m.stream)})},[u,d,i,r,a,l,o,p,g,E,C,S,b,k,v]}class Iv extends kt{constructor(e){super(),wt(this,e,Av,Sv,bt,{})}}function xc(n,e,t){const s=n.slice();s[28]=e[t];const i=s[10](s[28]);return s[29]=i,s}function Dv(n){let e,t="Direct Message";return{c(){e=y("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1fqbvfr"&&(e.textContent=t),this.h()},h(){f(e,"class","dm-title svelte-ccslku")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function Nv(n){let e,t="â†",s,i,r,a,l,o=n[0].username+"",u,d,b,h=(n[0].status||"active")+"",p,g,E;function C(v,m){return v[0].profilePicture?Rv:Ov}let S=C(n),k=S(n);return{c(){e=y("button"),e.textContent=t,s=O(),i=y("div"),k.c(),r=O(),a=y("div"),l=y("span"),u=X(o),d=O(),b=y("span"),p=X(h),this.h()},l(v){e=w(v,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(e)!=="svelte-1lfnyad"&&(e.textContent=t),s=P(v),i=w(v,"DIV",{class:!0});var m=I(i);k.l(m),r=P(m),a=w(m,"DIV",{class:!0});var T=I(a);l=w(T,"SPAN",{class:!0});var A=I(l);u=K(A,o),A.forEach(_),d=P(T),b=w(T,"SPAN",{class:!0});var D=I(b);p=K(D,h),D.forEach(_),T.forEach(_),m.forEach(_),this.h()},h(){f(e,"class","dm-back-btn svelte-ccslku"),f(e,"title","Back to DM list"),f(l,"class","dm-username svelte-ccslku"),f(b,"class","dm-status svelte-ccslku"),f(a,"class","dm-user-details svelte-ccslku"),f(i,"class","dm-user-info svelte-ccslku")},m(v,m){j(v,e,m),j(v,s,m),j(v,i,m),k.m(i,null),c(i,r),c(i,a),c(a,l),c(l,u),c(a,d),c(a,b),c(b,p),g||(E=G(e,"click",n[8]),g=!0)},p(v,m){S===(S=C(v))&&k?k.p(v,m):(k.d(1),k=S(v),k&&(k.c(),k.m(i,r))),m[0]&1&&o!==(o=v[0].username+"")&&te(u,o),m[0]&1&&h!==(h=(v[0].status||"active")+"")&&te(p,h)},d(v){v&&(_(e),_(s),_(i)),k.d(),g=!1,E()}}}function Pv(n){let e,t="Direct Messages";return{c(){e=y("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1o8tzem"&&(e.textContent=t),this.h()},h(){f(e,"class","dm-title svelte-ccslku")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function Ov(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","dm-avatar-placeholder svelte-ccslku"),Be(e,"background-color",n[0].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&1&&t!==(t=i[0].username.charAt(0).toUpperCase()+"")&&te(s,t),r[0]&1&&Be(e,"background-color",i[0].color)},d(i){i&&_(e)}}}function Rv(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","dm-avatar svelte-ccslku")},m(i,r){j(i,e,r)},p(i,r){r[0]&1&&!Re(e.src,t=i[0].profilePicture)&&f(e,"src",t),r[0]&1&&s!==(s=i[0].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Mv(n){let e,t,s,i,r,a,l,o,u,d,b="âž¤",h,p,g,E;const C=[Bv,Lv],S=[];function k(v,m){return v[2].length===0?0:1}return t=k(n),s=S[t]=C[t](n),{c(){e=y("div"),s.c(),i=O(),r=y("form"),a=y("textarea"),o=O(),u=y("button"),d=y("span"),d.textContent=b,this.h()},l(v){e=w(v,"DIV",{class:!0});var m=I(e);s.l(m),m.forEach(_),i=P(v),r=w(v,"FORM",{class:!0});var T=I(r);a=w(T,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),I(a).forEach(_),o=P(T),u=w(T,"BUTTON",{type:!0,class:!0});var A=I(u);d=w(A,"SPAN",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-o5j1g1"&&(d.textContent=b),A.forEach(_),T.forEach(_),this.h()},h(){f(e,"class","dm-messages svelte-ccslku"),f(a,"placeholder",l=n[0]?`Message ${n[0].username}...`:"Type a message..."),f(a,"rows","1"),f(a,"class","dm-input svelte-ccslku"),f(d,"class","send-icon svelte-ccslku"),f(u,"type","submit"),f(u,"class","dm-send-btn svelte-ccslku"),u.disabled=h=!n[4].trim(),f(r,"class","dm-input-container svelte-ccslku")},m(v,m){j(v,e,m),S[t].m(e,null),n[20](e),j(v,i,m),j(v,r,m),c(r,a),n[21](a),Ke(a,n[4]),c(r,o),c(r,u),c(u,d),p=!0,g||(E=[G(a,"input",n[22]),G(a,"input",n[12]),G(a,"keydown",n[14]),G(r,"submit",n[13])],g=!0)},p(v,m){let T=t;t=k(v),t===T?S[t].p(v,m):(gn(),De(S[T],1,1,()=>{S[T]=null}),mn(),s=S[t],s?s.p(v,m):(s=S[t]=C[t](v),s.c()),Te(s,1),s.m(e,null)),(!p||m[0]&1&&l!==(l=v[0]?`Message ${v[0].username}...`:"Type a message..."))&&f(a,"placeholder",l),m[0]&16&&Ke(a,v[4]),(!p||m[0]&16&&h!==(h=!v[4].trim()))&&(u.disabled=h)},i(v){p||(Te(s),p=!0)},o(v){De(s),p=!1},d(v){v&&(_(e),_(i),_(r)),S[t].d(),n[20](null),n[21](null),g=!1,je(E)}}}function Fv(n){let e;function t(r,a){return r[7].length===0?Vv:Uv}let s=t(n),i=s(n);return{c(){e=y("div"),i.c(),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=I(e);i.l(a),a.forEach(_),this.h()},h(){f(e,"class","dm-list svelte-ccslku")},m(r,a){j(r,e,a),i.m(e,null)},p(r,a){s===(s=t(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},i:Ne,o:Ne,d(r){r&&_(e),i.d()}}}function Lv(n){let e,t;return e=new qu({props:{messages:n[2],onReply:Hv,firstUnreadMessageId:null}}),{c(){it(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,i){nt(e,s,i),t=!0},p(s,i){const r={};i[0]&4&&(r.messages=s[2]),e.$set(r)},i(s){t||(Te(e.$$.fragment,s),t=!0)},o(s){De(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function Bv(n){var l;let e,t,s,i=(((l=n[0])==null?void 0:l.username)||"this user")+"",r,a;return{c(){e=y("div"),t=y("p"),s=X("Start a conversation with "),r=X(i),a=X("!"),this.h()},l(o){e=w(o,"DIV",{class:!0});var u=I(e);t=w(u,"P",{});var d=I(t);s=K(d,"Start a conversation with "),r=K(d,i),a=K(d,"!"),d.forEach(_),u.forEach(_),this.h()},h(){f(e,"class","dm-empty svelte-ccslku")},m(o,u){j(o,e,u),c(e,t),c(t,s),c(t,r),c(t,a)},p(o,u){var d;u[0]&1&&i!==(i=(((d=o[0])==null?void 0:d.username)||"this user")+"")&&te(r,i)},i:Ne,o:Ne,d(o){o&&_(e)}}}function Uv(n){let e=[],t=new Map,s,i=xe(n[7]);const r=a=>a[28].id;for(let a=0;a<i.length;a+=1){let l=xc(n,i,a),o=r(l);t.set(o,e[a]=Wc(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);s=Le()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,s,l)},p(a,l){l[0]&3712&&(i=xe(a[7]),e=sn(e,l,r,1,a,i,t,s.parentNode,nn,Wc,s,xc))},d(a){a&&_(s);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Vv(n){let e,t="<p>No direct messages yet. Right-click a user to start a conversation!</p>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1qiugx5"&&(e.innerHTML=t),this.h()},h(){f(e,"class","dm-empty svelte-ccslku")},m(s,i){j(s,e,i)},p:Ne,d(s){s&&_(e)}}}function Gc(n){let e,t,s,i,r=n[29].username+"",a,l,o,u=n[11](n[28].id)+"",d,b,h,p;function g(k,v){return k[29].profilePicture?zv:jv}let E=g(n),C=E(n);function S(){return n[19](n[28])}return{c(){e=y("button"),C.c(),t=O(),s=y("div"),i=y("span"),a=X(r),l=O(),o=y("span"),d=X(u),b=O(),this.h()},l(k){e=w(k,"BUTTON",{class:!0});var v=I(e);C.l(v),t=P(v),s=w(v,"DIV",{class:!0});var m=I(s);i=w(m,"SPAN",{class:!0});var T=I(i);a=K(T,r),T.forEach(_),l=P(m),o=w(m,"SPAN",{class:!0});var A=I(o);d=K(A,u),A.forEach(_),m.forEach(_),b=P(v),v.forEach(_),this.h()},h(){f(i,"class","dm-list-username svelte-ccslku"),f(o,"class","dm-list-preview svelte-ccslku"),f(s,"class","dm-list-info svelte-ccslku"),f(e,"class","dm-list-item svelte-ccslku")},m(k,v){j(k,e,v),C.m(e,null),c(e,t),c(e,s),c(s,i),c(i,a),c(s,l),c(s,o),c(o,d),c(e,b),h||(p=G(e,"click",S),h=!0)},p(k,v){n=k,E===(E=g(n))&&C?C.p(n,v):(C.d(1),C=E(n),C&&(C.c(),C.m(e,t))),v[0]&128&&r!==(r=n[29].username+"")&&te(a,r),v[0]&128&&u!==(u=n[11](n[28].id)+"")&&te(d,u)},d(k){k&&_(e),C.d(),h=!1,p()}}}function jv(n){let e,t=n[29].username.charAt(0).toUpperCase()+"",s;return{c(){e=y("div"),s=X(t),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var r=I(e);s=K(r,t),r.forEach(_),this.h()},h(){f(e,"class","dm-list-avatar-placeholder svelte-ccslku"),Be(e,"background-color",n[29].color)},m(i,r){j(i,e,r),c(e,s)},p(i,r){r[0]&128&&t!==(t=i[29].username.charAt(0).toUpperCase()+"")&&te(s,t),r[0]&128&&Be(e,"background-color",i[29].color)},d(i){i&&_(e)}}}function zv(n){let e,t,s;return{c(){e=y("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(e.src,t=n[29].profilePicture)||f(e,"src",t),f(e,"alt",s=n[29].username),f(e,"class","dm-list-avatar svelte-ccslku")},m(i,r){j(i,e,r)},p(i,r){r[0]&128&&!Re(e.src,t=i[29].profilePicture)&&f(e,"src",t),r[0]&128&&s!==(s=i[29].username)&&f(e,"alt",s)},d(i){i&&_(e)}}}function Wc(n,e){let t,s,i=e[29]&&Gc(e);return{key:n,first:null,c(){t=Le(),i&&i.c(),s=Le(),this.h()},l(r){t=Le(),i&&i.l(r),s=Le(),this.h()},h(){this.first=t},m(r,a){j(r,t,a),i&&i.m(r,a),j(r,s,a)},p(r,a){e=r,e[29]?i?i.p(e,a):(i=Gc(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(r){r&&(_(t),_(s)),i&&i.d(r)}}}function qv(n){let e,t,s,i,r="âœ•",a,l,o,u,d,b;function h(k,v){return k[3]?Pv:k[0]?Nv:Dv}let p=h(n),g=p(n);const E=[Fv,Mv],C=[];function S(k,v){return k[3]?0:1}return l=S(n),o=C[l]=E[l](n),{c(){e=y("div"),t=y("div"),g.c(),s=O(),i=y("button"),i.textContent=r,a=O(),o.c(),this.h()},l(k){e=w(k,"DIV",{class:!0});var v=I(e);t=w(v,"DIV",{class:!0});var m=I(t);g.l(m),s=P(m),i=w(m,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(i)!=="svelte-1ahzpng"&&(i.textContent=r),m.forEach(_),a=P(v),o.l(v),v.forEach(_),this.h()},h(){f(i,"class","dm-close-btn svelte-ccslku"),f(i,"title","Close DM"),f(t,"class","dm-header svelte-ccslku"),f(e,"class","dm-panel svelte-ccslku")},m(k,v){j(k,e,v),c(e,t),g.m(t,null),c(t,s),c(t,i),c(e,a),C[l].m(e,null),u=!0,d||(b=G(i,"click",function(){Gn(n[1])&&n[1].apply(this,arguments)}),d=!0)},p(k,v){n=k,p===(p=h(n))&&g?g.p(n,v):(g.d(1),g=p(n),g&&(g.c(),g.m(t,s)));let m=l;l=S(n),l===m?C[l].p(n,v):(gn(),De(C[m],1,1,()=>{C[m]=null}),mn(),o=C[l],o?o.p(n,v):(o=C[l]=E[l](n),o.c()),Te(o,1),o.m(e,null))},i(k){u||(Te(o),u=!0)},o(k){De(o),u=!1},d(k){k&&_(e),g.d(),C[l].d(),d=!1,b()}}}function Hv(n){}function xv(n,e,t){let s,i,r,a,l,o;Me(n,It,B=>t(17,r=B)),Me(n,rn,B=>t(25,a=B)),Me(n,Cn,B=>t(26,l=B)),Me(n,jt,B=>t(18,o=B));let{dmChannelId:u=null}=e,{otherUser:d=null}=e,{onClose:b}=e,{onSelectDM:h}=e,p=!1;function g(){t(3,p=!0)}function E(B){B.otherUser&&(t(3,p=!1),h(B.id,B.otherUser))}function C(B){var Y;if(B.otherUser)return B.otherUser;const U=(Y=B.members)==null?void 0:Y.find(V=>V!==(l==null?void 0:l.id));return U&&a.find(V=>V.id===U)||null}function S(B){const U=r[B]||[];if(U.length===0)return"No messages yet";const Y=U[U.length-1];return Y.type==="text"?Y.text.length>50?Y.text.slice(0,50)+"...":Y.text:Y.type==="gif"?"ðŸŽ¬ Sent a GIF":Y.type==="file"?`ðŸ“Ž ${Y.fileName}`:""}let k="",v,m,T;async function A(){await Qc(),v&&t(5,v.scrollTop=v.scrollHeight,v)}function D(){T&&(t(6,T.style.height="auto",T),t(6,T.style.height=T.scrollHeight+"px",T)),clearTimeout(m),ws(!0),m=setTimeout(()=>{ws(!1)},2e3)}function N(B){B.preventDefault(),!(!k.trim()||!u)&&(ks(u,k.trim(),"text"),t(4,k=""),T&&t(6,T.style.height="auto",T),ws(!1),clearTimeout(m))}function R(B){B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),N(B))}const M=B=>E(B);function F(B){lt[B?"unshift":"push"](()=>{v=B,t(5,v)})}function z(B){lt[B?"unshift":"push"](()=>{T=B,t(6,T)})}function W(){k=this.value,t(4,k)}return n.$$set=B=>{"dmChannelId"in B&&t(15,u=B.dmChannelId),"otherUser"in B&&t(0,d=B.otherUser),"onClose"in B&&t(1,b=B.onClose),"onSelectDM"in B&&t(16,h=B.onSelectDM)},n.$$.update=()=>{n.$$.dirty[0]&163840&&t(2,s=u?r[u]||[]:[]),n.$$.dirty[0]&294912&&u&&o.find(B=>B.id===u),n.$$.dirty[0]&262144&&t(7,i=o.filter(B=>B.type==="dm")),n.$$.dirty[0]&4&&s.length>0&&A()},[d,b,s,p,k,v,T,i,g,E,C,S,D,N,R,u,h,r,o,M,F,z,W]}class Gv extends kt{constructor(e){super(),wt(this,e,xv,qv,bt,{dmChannelId:15,otherUser:0,onClose:1,onSelectDM:16},null,[-1,-1])}}const{window:Yc}=cl;function Wv(n){let e,t,s,i,r,a,l,o,u,d,b,h,p,g,E,C,S,k,v=n[2]?"â†’":"â†",m,T,A,D,N,R,M,F;function z(L){n[23](L)}let W={};n[1]!==void 0&&(W.activeView=n[1]),s=new jm({props:W}),lt.push(()=>tn(s,"activeView",z)),d=new Og({});function B(L){n[24](L)}let U={};n[1]!==void 0&&(U.activeView=n[1]),p=new Tv({props:U}),lt.push(()=>tn(p,"activeView",B));let Y=n[2]&&Kc(n),V=n[3]&&Xc(n);return N=new Iv({}),{c(){e=y("div"),t=y("div"),it(s.$$.fragment),r=O(),a=y("div"),l=O(),o=y("div"),u=y("div"),it(d.$$.fragment),b=O(),h=y("div"),it(p.$$.fragment),E=O(),Y&&Y.c(),C=O(),V&&V.c(),S=O(),k=y("button"),m=X(v),D=O(),it(N.$$.fragment),this.h()},l(L){e=w(L,"DIV",{class:!0});var H=I(e);t=w(H,"DIV",{class:!0,style:!0});var q=I(t);st(s.$$.fragment,q),r=P(q),a=w(q,"DIV",{class:!0}),I(a).forEach(_),q.forEach(_),l=P(H),o=w(H,"DIV",{class:!0});var Z=I(o);u=w(Z,"DIV",{class:!0});var $=I(u);st(d.$$.fragment,$),$.forEach(_),b=P(Z),h=w(Z,"DIV",{class:!0});var Q=I(h);st(p.$$.fragment,Q),Q.forEach(_),Z.forEach(_),E=P(H),Y&&Y.l(H),C=P(H),V&&V.l(H),S=P(H),k=w(H,"BUTTON",{class:!0,title:!0,style:!0});var oe=I(k);m=K(oe,v),oe.forEach(_),H.forEach(_),D=P(L),st(N.$$.fragment,L),this.h()},h(){f(a,"class","resize-handle resize-handle-channel svelte-1ffig2h"),f(t,"class","channel-sidebar-container svelte-1ffig2h"),Be(t,"width",n[6]+"px"),f(u,"class","svelte-1ffig2h"),ve(u,"hidden",n[1]!=="chat"),f(h,"class","svelte-1ffig2h"),ve(h,"hidden",n[1]!=="screen"),f(o,"class","main-content svelte-1ffig2h"),f(k,"class","user-panel-toggle svelte-1ffig2h"),f(k,"title",T=n[2]?"Hide user panel":"Show user panel"),f(k,"style",A=n[2]?`right: ${n[7]+(n[3]?n[8]:0)}px`:n[3]?`right: ${n[8]}px`:"right: 0"),ve(k,"open",n[2]),f(e,"class","app-container svelte-1ffig2h"),ve(e,"resizing",n[9]||n[10]||n[11])},m(L,H){j(L,e,H),c(e,t),nt(s,t,null),c(t,r),c(t,a),c(e,l),c(e,o),c(o,u),nt(d,u,null),c(o,b),c(o,h),nt(p,h,null),c(e,E),Y&&Y.m(e,null),c(e,C),V&&V.m(e,null),c(e,S),c(e,k),c(k,m),j(L,D,H),nt(N,L,H),R=!0,M||(F=[G(a,"mousedown",n[13]),G(k,"click",n[25])],M=!0)},p(L,H){const q={};!i&&H&2&&(i=!0,q.activeView=L[1],en(()=>i=!1)),s.$set(q),(!R||H&64)&&Be(t,"width",L[6]+"px"),(!R||H&2)&&ve(u,"hidden",L[1]!=="chat");const Z={};!g&&H&2&&(g=!0,Z.activeView=L[1],en(()=>g=!1)),p.$set(Z),(!R||H&2)&&ve(h,"hidden",L[1]!=="screen"),L[2]?Y?(Y.p(L,H),H&4&&Te(Y,1)):(Y=Kc(L),Y.c(),Te(Y,1),Y.m(e,C)):Y&&(gn(),De(Y,1,1,()=>{Y=null}),mn()),L[3]?V?(V.p(L,H),H&8&&Te(V,1)):(V=Xc(L),V.c(),Te(V,1),V.m(e,S)):V&&(gn(),De(V,1,1,()=>{V=null}),mn()),(!R||H&4)&&v!==(v=L[2]?"â†’":"â†")&&te(m,v),(!R||H&4&&T!==(T=L[2]?"Hide user panel":"Show user panel"))&&f(k,"title",T),(!R||H&396&&A!==(A=L[2]?`right: ${L[7]+(L[3]?L[8]:0)}px`:L[3]?`right: ${L[8]}px`:"right: 0"))&&f(k,"style",A),(!R||H&4)&&ve(k,"open",L[2]),(!R||H&3584)&&ve(e,"resizing",L[9]||L[10]||L[11])},i(L){R||(Te(s.$$.fragment,L),Te(d.$$.fragment,L),Te(p.$$.fragment,L),Te(Y),Te(V),Te(N.$$.fragment,L),R=!0)},o(L){De(s.$$.fragment,L),De(d.$$.fragment,L),De(p.$$.fragment,L),De(Y),De(V),De(N.$$.fragment,L),R=!1},d(L){L&&(_(e),_(D)),tt(s),tt(d),tt(p),Y&&Y.d(),V&&V.d(),tt(N,L),M=!1,je(F)}}}function Yv(n){let e,t;return e=new ym({}),e.$on("login",n[12]),{c(){it(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,i){nt(e,s,i),t=!0},p:Ne,i(s){t||(Te(e.$$.fragment,s),t=!0)},o(s){De(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function Kc(n){let e,t,s,i,r,a,l;return i=new hv({}),i.$on("openDM",n[18]),{c(){e=y("div"),t=y("div"),s=O(),it(i.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0});var u=I(e);t=w(u,"DIV",{class:!0}),I(t).forEach(_),s=P(u),st(i.$$.fragment,u),u.forEach(_),this.h()},h(){f(t,"class","resize-handle resize-handle-user svelte-1ffig2h"),f(e,"class","user-panel-container svelte-1ffig2h"),Be(e,"width",n[7]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,s),nt(i,e,null),r=!0,a||(l=G(t,"mousedown",n[14]),a=!0)},p(o,u){(!r||u&128)&&Be(e,"width",o[7]+"px")},i(o){r||(Te(i.$$.fragment,o),r=!0)},o(o){De(i.$$.fragment,o),r=!1},d(o){o&&_(e),tt(i),a=!1,l()}}}function Xc(n){let e,t,s,i,r,a,l;return i=new Gv({props:{dmChannelId:n[4],otherUser:n[5],onClose:n[19],onSelectDM:n[20]}}),{c(){e=y("div"),t=y("div"),s=O(),it(i.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0});var u=I(e);t=w(u,"DIV",{class:!0}),I(t).forEach(_),s=P(u),st(i.$$.fragment,u),u.forEach(_),this.h()},h(){f(t,"class","resize-handle resize-handle-dm svelte-1ffig2h"),f(e,"class","dm-panel-container svelte-1ffig2h"),Be(e,"width",n[8]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,s),nt(i,e,null),r=!0,a||(l=G(t,"mousedown",n[15]),a=!0)},p(o,u){const d={};u&16&&(d.dmChannelId=o[4]),u&32&&(d.otherUser=o[5]),i.$set(d),(!r||u&256)&&Be(e,"width",o[8]+"px")},i(o){r||(Te(i.$$.fragment,o),r=!0)},o(o){De(i.$$.fragment,o),r=!1},d(o){o&&_(e),tt(i),a=!1,l()}}}function Kv(n){let e,t,s,i,r,a;const l=[Yv,Wv],o=[];function u(d,b){return d[0]?1:0}return e=u(n),t=o[e]=l[e](n),{c(){t.c(),s=Le()},l(d){t.l(d),s=Le()},m(d,b){o[e].m(d,b),j(d,s,b),i=!0,r||(a=[G(Yc,"mousemove",n[16]),G(Yc,"mouseup",n[17])],r=!0)},p(d,[b]){let h=e;e=u(d),e===h?o[e].p(d,b):(gn(),De(o[h],1,1,()=>{o[h]=null}),mn(),t=o[e],t?t.p(d,b):(t=o[e]=l[e](d),t.c()),Te(t,1),t.m(s.parentNode,s))},i(d){i||(Te(t),i=!0)},o(d){De(t),i=!1},d(d){d&&_(s),o[e].d(d),r=!1,je(a)}}}function Xv(n,e,t){let s;Me(n,Ki,B=>t(22,s=B));let{data:i}=e,r="",a=!1,l="chat",o=!1,u=!1,d=null,b=null,h=240,p=250,g=350,E=!1,C=!1,S=!1;Tn(async()=>{localStorage.getItem("notificationsEnabled")!=="false"&&await dd()});function k(B){r=B.detail,Ih(r),t(0,a=!0)}function v(B){t(9,E=!0),B.preventDefault()}function m(B){t(10,C=!0),B.preventDefault()}function T(B){t(11,S=!0),B.preventDefault()}function A(B){if(E){const U=B.clientX;U>=180&&U<=400&&t(6,h=U)}else if(C){const U=window.innerWidth-B.clientX;U>=200&&U<=500&&t(7,p=U)}else if(S){const U=window.innerWidth-B.clientX;U>=300&&U<=600&&t(8,g=U)}}function D(){t(9,E=!1),t(10,C=!1),t(11,S=!1)}function N(B){t(4,d=B.detail.channelId),t(5,b=B.detail.otherUser),t(3,u=!0)}function R(){t(3,u=!1),t(4,d=null),t(5,b=null)}function M(B,U){t(4,d=B),t(5,b=U)}tu(()=>{Rh()});function F(B){l=B,t(1,l)}function z(B){l=B,t(1,l)}const W=()=>t(2,o=!o);return n.$$set=B=>{"data"in B&&t(21,i=B.data)},n.$$.update=()=>{n.$$.dirty&4194304&&s&&(t(4,d=s.channelId),t(5,b=s.otherUser),t(3,u=!0),Ki.set(null))},[a,l,o,u,d,b,h,p,g,E,C,S,k,v,m,T,A,D,N,R,M,i,s,F,z,W]}class n1 extends kt{constructor(e){super(),wt(this,e,Xv,Kv,bt,{data:21})}}export{n1 as component};
