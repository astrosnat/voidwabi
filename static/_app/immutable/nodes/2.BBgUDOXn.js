import{r as De,s as pt,n as Me,d as v,N as st,i as V,f as c,O as H,K as f,h as b,j as P,l as M,P as X,m as k,o as F,Q as Wr,H as Re,R as Ye,e as ie,S as it,k as Z,t as J,T as Gt,L as Ne,p as Be,q as Pn,M as rt,U as Gs,V as Bt,W as No,X as Ro,Y as he,Z as Cc,_ as Ac,$ as wi,a0 as Yr,B as Sc,a1 as Ic,a2 as Dc,a3 as Po}from"../chunks/scheduler.CyB6C0io.js";import{a as Ae,S as gt,i as mt,f as Lt,d as Ze,t as Oe,g as Hn,c as Gn,m as Je,e as Qe,b as $e}from"../chunks/index.CliTUOID.js";import{w as wt}from"../chunks/index.K3LgXoeh.js";import{b as He}from"../chunks/index.CHnl-KTq.js";/* empty css                            */const Kr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ke(n){return n?.length!==void 0?n:Array.from(n)}function en(n,e){n.d(1),e.delete(n.key)}function tn(n,e,t,s,r,i,l,a,o,u,d,p){let h=n.length,w=i.length,g=h;const y={};for(;g--;)y[n[g].key]=g;const A=[],I=new Map,m=new Map,T=[];for(g=w;g--;){const E=p(r,i,g),N=t(E);let D=l.get(N);D?T.push(()=>D.p(E,e)):(D=u(N,E),D.c()),I.set(N,A[g]=D),N in y&&m.set(N,Math.abs(g-y[N]))}const _=new Set,C=new Set;function S(E){Ae(E,1),E.m(a,d),l.set(E.key,E),d=E.first,w--}for(;h&&w;){const E=A[w-1],N=n[h-1],D=E.key,B=N.key;E===N?(d=E.first,h--,w--):I.has(B)?!l.has(D)||_.has(D)?S(E):C.has(B)?h--:m.get(D)>m.get(B)?(C.add(D),S(E)):(_.add(B),h--):(o(N,l),h--)}for(;h--;){const E=n[h];I.has(E.key)||o(E,l)}for(;w;)S(A[w-1]);return De(T),A}const fn=Object.create(null);fn.open="0";fn.close="1";fn.ping="2";fn.pong="3";fn.message="4";fn.upgrade="5";fn.noop="6";const Ms=Object.create(null);Object.keys(fn).forEach(n=>{Ms[fn[n]]=n});const Mr={type:"error",data:"parser error"},Oo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Mo=typeof ArrayBuffer=="function",Fo=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Xr=({type:n,data:e},t,s)=>Oo&&e instanceof Blob?t?s(e):yi(e,s):Mo&&(e instanceof ArrayBuffer||Fo(e))?t?s(e):yi(new Blob([e]),s):s(fn[n]+(e||"")),yi=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function Ei(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Js;function Nc(n,e){if(Oo&&n.data instanceof Blob)return n.data.arrayBuffer().then(Ei).then(e);if(Mo&&(n.data instanceof ArrayBuffer||Fo(n.data)))return e(Ei(n.data));Xr(n,!1,t=>{Js||(Js=new TextEncoder),e(Js.encode(t))})}const Ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ls=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Ti.length;n++)ls[Ti.charCodeAt(n)]=n;const Rc=n=>{let e=n.length*.75,t=n.length,s,r=0,i,l,a,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(s=0;s<t;s+=4)i=ls[n.charCodeAt(s)],l=ls[n.charCodeAt(s+1)],a=ls[n.charCodeAt(s+2)],o=ls[n.charCodeAt(s+3)],d[r++]=i<<2|l>>4,d[r++]=(l&15)<<4|a>>2,d[r++]=(a&3)<<6|o&63;return u},Pc=typeof ArrayBuffer=="function",Zr=(n,e)=>{if(typeof n!="string")return{type:"message",data:zo(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Oc(n.substring(1),e)}:Ms[t]?n.length>1?{type:Ms[t],data:n.substring(1)}:{type:Ms[t]}:Mr},Oc=(n,e)=>{if(Pc){const t=Rc(n);return zo(t,e)}else return{base64:!0,data:n}},zo=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Bo="",Mc=(n,e)=>{const t=n.length,s=new Array(t);let r=0;n.forEach((i,l)=>{Xr(i,!1,a=>{s[l]=a,++r===t&&e(s.join(Bo))})})},Fc=(n,e)=>{const t=n.split(Bo),s=[];for(let r=0;r<t.length;r++){const i=Zr(t[r],e);if(s.push(i),i.type==="error")break}return s};function zc(){return new TransformStream({transform(n,e){Nc(n,t=>{const s=t.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Qs;function Cs(n){return n.reduce((e,t)=>e+t.length,0)}function As(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)t[r]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function Bc(n,e){Qs||(Qs=new TextDecoder);const t=[];let s=0,r=-1,i=!1;return new TransformStream({transform(l,a){for(t.push(l);;){if(s===0){if(Cs(t)<1)break;const o=As(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(Cs(t)<2)break;const o=As(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),s=3}else if(s===2){if(Cs(t)<8)break;const o=As(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(Mr);break}r=d*Math.pow(2,32)+u.getUint32(4),s=3}else{if(Cs(t)<r)break;const o=As(t,r);a.enqueue(Zr(i?o:Qs.decode(o),e)),s=0}if(r===0||r>n){a.enqueue(Mr);break}}}})}const Lo=4;function ft(n){if(n)return Lc(n)}function Lc(n){for(var e in ft.prototype)n[e]=ft.prototype[e];return n}ft.prototype.on=ft.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};ft.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};ft.prototype.off=ft.prototype.removeListener=ft.prototype.removeAllListeners=ft.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};ft.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};ft.prototype.emitReserved=ft.prototype.emit;ft.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};ft.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ws=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),jt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xc="arraybuffer";function xo(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Uc=jt.setTimeout,qc=jt.clearTimeout;function Ys(n,e){e.useNativeTimers?(n.setTimeoutFn=Uc.bind(jt),n.clearTimeoutFn=qc.bind(jt)):(n.setTimeoutFn=jt.setTimeout.bind(jt),n.clearTimeoutFn=jt.clearTimeout.bind(jt))}const jc=1.33;function Vc(n){return typeof n=="string"?Hc(n):Math.ceil((n.byteLength||n.size)*jc)}function Hc(n){let e=0,t=0;for(let s=0,r=n.length;s<r;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function Uo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Gc(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Wc(n){let e={},t=n.split("&");for(let s=0,r=t.length;s<r;s++){let i=t[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Yc extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Jr extends ft{constructor(e){super(),this.writable=!1,Ys(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Yc(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Zr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Gc(e);return t.length?"?"+t:""}}class Kc extends Jr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Fc(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Mc(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Uo()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let qo=!1;try{qo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Xc=qo;function Zc(){}class Jc extends Kc{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class un extends ft{constructor(e,t,s){super(),this.createRequest=e,Ys(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=xo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=un.requestsCount++,un.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Zc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete un.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}un.requestsCount=0;un.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ci);else if(typeof addEventListener=="function"){const n="onpagehide"in jt?"pagehide":"unload";addEventListener(n,Ci,!1)}}function Ci(){for(let n in un.requests)un.requests.hasOwnProperty(n)&&un.requests[n].abort()}const Qc=(function(){const n=jo({xdomain:!1});return n&&n.responseType!==null})();class $c extends Jc{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Qc&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new un(jo,this.uri(),e)}}function jo(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Xc))return new XMLHttpRequest}catch{}if(!e)try{return new jt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class eu extends Jr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Vo?{}:xo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;Xr(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&Ws(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Uo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const $s=jt.WebSocket||jt.MozWebSocket;class tu extends eu{createSocket(e,t,s){return Vo?new $s(e,t,s):t?new $s(e,t):new $s(e)}doWrite(e,t){this.ws.send(t)}}class nu extends Jr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Bc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=zc();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:a,value:o})=>{a||(this.onPacket(o),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&Ws(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const su={websocket:tu,webtransport:nu,polling:$c},ru=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,iu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let r=ru.exec(n||""),i={},l=14;for(;l--;)i[iu[l]]=r[l]||"";return t!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=lu(i,i.path),i.queryKey=au(i,i.query),i}function lu(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function au(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(t[r]=i)}),t}const zr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fs=[];zr&&addEventListener("offline",()=>{Fs.forEach(n=>n())},!1);class wn extends ft{constructor(e,t){if(super(),this.binaryType=xc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=Fr(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Fr(t.host).host);Ys(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Wc(this.opts.query)),zr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Lo,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&wn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",wn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(t+=Vc(r)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ws(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(wn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Fs.indexOf(this._offlineEventListener);s!==-1&&Fs.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}wn.protocol=Lo;class ou extends wn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;wn.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wn.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,d(),t.close(),t=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function a(){l("transport closed")}function o(){l("socket closed")}function u(p){t&&p.name!==t.name&&i()}const d=()=>{t.removeListener("open",r),t.removeListener("error",l),t.removeListener("close",a),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",l),t.once("close",a),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let cu=class extends ou{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>su[r]).filter(r=>!!r)),super(e,s)}};function uu(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=Fr(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(t&&t.port===s.port?"":":"+s.port),s}const fu=typeof ArrayBuffer=="function",du=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Ho=Object.prototype.toString,hu=typeof Blob=="function"||typeof Blob<"u"&&Ho.call(Blob)==="[object BlobConstructor]",pu=typeof File=="function"||typeof File<"u"&&Ho.call(File)==="[object FileConstructor]";function Qr(n){return fu&&(n instanceof ArrayBuffer||du(n))||hu&&n instanceof Blob||pu&&n instanceof File}function zs(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(zs(n[t]))return!0;return!1}if(Qr(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return zs(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&zs(n[t]))return!0;return!1}function gu(n){const e=[],t=n.data,s=n;return s.data=Br(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Br(n,e){if(!n)return n;if(Qr(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Br(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Br(n[s],e));return t}return n}function mu(n,e){return n.data=Lr(n.data,e),delete n.attachments,n}function Lr(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Lr(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Lr(n[t],e));return n}const vu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_u=5;var qe;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(qe||(qe={}));class bu{constructor(e){this.replacer=e}encode(e){return(e.type===qe.EVENT||e.type===qe.ACK)&&zs(e)?this.encodeAsBinary({type:e.type===qe.EVENT?qe.BINARY_EVENT:qe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===qe.BINARY_EVENT||e.type===qe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=gu(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function Ai(n){return Object.prototype.toString.call(n)==="[object Object]"}class $r extends ft{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===qe.BINARY_EVENT;s||t.type===qe.BINARY_ACK?(t.type=s?qe.EVENT:qe.ACK,this.reconstructor=new ku(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Qr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(qe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===qe.BINARY_EVENT||s.type===qe.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(i,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(i,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if($r.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case qe.CONNECT:return Ai(t);case qe.DISCONNECT:return t===void 0;case qe.CONNECT_ERROR:return typeof t=="string"||Ai(t);case qe.EVENT:case qe.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&vu.indexOf(t[0])===-1);case qe.ACK:case qe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ku{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=mu(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wu=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$r,Encoder:bu,get PacketType(){return qe},protocol:_u},Symbol.toStringTag,{value:"Module"}));function Zt(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const yu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Go extends ft{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Zt(e,"open",this.onopen.bind(this)),Zt(e,"packet",this.onpacket.bind(this)),Zt(e,"error",this.onerror.bind(this)),Zt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,i;if(yu.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:qe.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,p=t.pop();this._registerAckCallback(d,p),l.id=d}const a=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(o?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r),l=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((s,r)=>{const i=(l,a)=>l?r(l):s(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qe.EVENT:case qe.BINARY_EVENT:this.onevent(e);break;case qe.ACK:case qe.BINARY_ACK:this.onack(e);break;case qe.DISCONNECT:this.ondisconnect();break;case qe.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:qe.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Wn(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Wn.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Wn.prototype.reset=function(){this.attempts=0};Wn.prototype.setMin=function(n){this.ms=n};Wn.prototype.setMax=function(n){this.max=n};Wn.prototype.setJitter=function(n){this.jitter=n};class xr extends ft{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ys(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Wn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||wu;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new cu(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Zt(t,"open",function(){s.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},l=Zt(t,"error",i);if(this._timeout!==!1){const a=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Zt(e,"ping",this.onping.bind(this)),Zt(e,"data",this.ondata.bind(this)),Zt(e,"error",this.onerror.bind(this)),Zt(e,"close",this.onclose.bind(this)),Zt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ws(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Go(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Zn={};function Bs(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=uu(n,e.path||"/socket.io"),s=t.source,r=t.id,i=t.path,l=Zn[r]&&i in Zn[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let o;return a?o=new xr(s,e):(Zn[r]||(Zn[r]=new xr(s,e)),o=Zn[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(Bs,{Manager:xr,Socket:Go,io:Bs,connect:Bs});let Jn=null;function Eu(){return He&&localStorage.getItem("notificationSound")||"/sounds/ProjectSound.ogg"}function Tu(){if(!He)return .5;const n=localStorage.getItem("notificationVolume");return n?parseFloat(n):.5}function Wo(){if(He)try{Jn||(Jn=new Audio),Jn.src=Eu(),Jn.volume=Tu(),Jn.play().catch(n=>{console.error("Failed to play notification sound:",n)})}catch(n){console.error("Error setting up notification sound:",n)}}function Yo(){if(!He||(initAudio(),!audioContext))return;const n=()=>{const e=audioContext.createOscillator(),t=audioContext.createOscillator(),s=audioContext.createGain();e.connect(s),t.connect(s),s.connect(audioContext.destination),e.frequency.value=480,t.frequency.value=620,e.type="sine",t.type="sine",s.gain.setValueAtTime(.15,audioContext.currentTime),s.gain.exponentialRampToValueAtTime(.01,audioContext.currentTime+.8),e.start(audioContext.currentTime),t.start(audioContext.currentTime),e.stop(audioContext.currentTime+.8),t.stop(audioContext.currentTime+.8)};n(),setTimeout(n,1e3)}function Cu(n,e,t){if(!He||e)return;if(!(localStorage.getItem("notificationsEnabled")!=="false")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(Wo(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let r="",i="",l="/icon-192.png";const a=t?`${n.user} in #${t}`:n.user;switch(n.type){case"text":r=a,i=n.text;break;case"gif":r=a,i="ðŸŽ¬ Sent a GIF";break;case"file":r=a,i=`ðŸ“Ž Sent a file: ${n.fileName}`;break}const o=new Notification(r,{body:i,icon:l,badge:l,tag:`message-${n.id}`,requireInteraction:!1,silent:!1});o.onclick=()=>{window.focus(),o.close()},setTimeout(()=>{o.close()},5e3)}function Au(n,e,t,s){if(!He)return null;if(!(localStorage.getItem("notificationsEnabled")!=="false"))return console.log("Notifications disabled in settings"),null;if(Notification.permission!=="granted")return console.log("Notification permission not granted"),null;Yo();const i=`Incoming ${e?"Video":"Voice"} Call`,l=`${n} is calling...`,a="/icon-192.png",o=new Notification(i,{body:l,icon:a,badge:a,tag:`call-${n}`,requireInteraction:!0,silent:!1,actions:[{action:"answer",title:"Answer"},{action:"reject",title:"Decline"}]});return o.onclick=()=>{window.focus(),t&&t(),o.close()},o}function ei(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Fn=ei();function Ko(n){Fn=n}var cs={exec:()=>null};function Ge(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(r,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(It.caret,"$1"),t=t.replace(r,l),s},getRegex:()=>new RegExp(t,e)};return s}var Su=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),It={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Iu=/^(?:[ \t]*(?:\n|$))+/,Du=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Nu=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ds=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ru=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ti=/(?:[*+-]|\d{1,9}[.)])/,Xo=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Zo=Ge(Xo).replace(/bull/g,ti).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Pu=Ge(Xo).replace(/bull/g,ti).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ni=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ou=/^[^\n]+/,si=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Mu=Ge(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",si).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Fu=Ge(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ti).getRegex(),Ks="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ri=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,zu=Ge("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ri).replace("tag",Ks).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Jo=Ge(ni).replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ks).getRegex(),Bu=Ge(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Jo).getRegex(),ii={blockquote:Bu,code:Du,def:Mu,fences:Nu,heading:Ru,hr:ds,html:zu,lheading:Zo,list:Fu,newline:Iu,paragraph:Jo,table:cs,text:Ou},Si=Ge("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ks).getRegex(),Lu={...ii,lheading:Pu,table:Si,paragraph:Ge(ni).replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Si).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ks).getRegex()},xu={...ii,html:Ge(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ri).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ge(ni).replace("hr",ds).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Zo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Uu=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,qu=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Qo=/^( {2,}|\\)\n(?!\s*$)/,ju=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Xs=/[\p{P}\p{S}]/u,li=/[\s\p{P}\p{S}]/u,$o=/[^\s\p{P}\p{S}]/u,Vu=Ge(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,li).getRegex(),ec=/(?!~)[\p{P}\p{S}]/u,Hu=/(?!~)[\s\p{P}\p{S}]/u,Gu=/(?:[^\s\p{P}\p{S}]|~)/u,Wu=Ge(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Su?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),tc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Yu=Ge(tc,"u").replace(/punct/g,Xs).getRegex(),Ku=Ge(tc,"u").replace(/punct/g,ec).getRegex(),nc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Xu=Ge(nc,"gu").replace(/notPunctSpace/g,$o).replace(/punctSpace/g,li).replace(/punct/g,Xs).getRegex(),Zu=Ge(nc,"gu").replace(/notPunctSpace/g,Gu).replace(/punctSpace/g,Hu).replace(/punct/g,ec).getRegex(),Ju=Ge("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$o).replace(/punctSpace/g,li).replace(/punct/g,Xs).getRegex(),Qu=Ge(/\\(punct)/,"gu").replace(/punct/g,Xs).getRegex(),$u=Ge(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ef=Ge(ri).replace("(?:-->|$)","-->").getRegex(),tf=Ge("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ef).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xs=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,nf=Ge(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),sc=Ge(/^!?\[(label)\]\[(ref)\]/).replace("label",xs).replace("ref",si).getRegex(),rc=Ge(/^!?\[(ref)\](?:\[\])?/).replace("ref",si).getRegex(),sf=Ge("reflink|nolink(?!\\()","g").replace("reflink",sc).replace("nolink",rc).getRegex(),Ii=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ai={_backpedal:cs,anyPunctuation:Qu,autolink:$u,blockSkip:Wu,br:Qo,code:qu,del:cs,emStrongLDelim:Yu,emStrongRDelimAst:Xu,emStrongRDelimUnd:Ju,escape:Uu,link:nf,nolink:rc,punctuation:Vu,reflink:sc,reflinkSearch:sf,tag:tf,text:ju,url:cs},rf={...ai,link:Ge(/^!?\[(label)\]\((.*?)\)/).replace("label",xs).getRegex(),reflink:Ge(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xs).getRegex()},Ur={...ai,emStrongRDelimAst:Zu,emStrongLDelim:Ku,url:Ge(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ii).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ge(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ii).getRegex()},lf={...Ur,br:Ge(Qo).replace("{2,}","*").getRegex(),text:Ge(Ur.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ss={normal:ii,gfm:Lu,pedantic:xu},Qn={normal:ai,gfm:Ur,breaks:lf,pedantic:rf},af={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Di=n=>af[n];function mn(n,e){if(e){if(It.escapeTest.test(n))return n.replace(It.escapeReplace,Di)}else if(It.escapeTestNoEncode.test(n))return n.replace(It.escapeReplaceNoEncode,Di);return n}function Ni(n){try{n=encodeURI(n).replace(It.percentDecode,"%")}catch{return null}return n}function Ri(n,e){let t=n.replace(It.findPipe,(i,l,a)=>{let o=!1,u=l;for(;--u>=0&&a[u]==="\\";)o=!o;return o?"|":" |"}),s=t.split(It.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(It.slashPipe,"|");return s}function $n(n,e,t){let s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function of(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function Pi(n,e,t,s,r){let i=e.href,l=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:l,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}function cf(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let r=s[1];return e.split(`
`).map(i=>{let l=i.match(t.other.beginningSpace);if(l===null)return i;let[a]=l;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}var Us=class{options;rules;lexer;constructor(n){this.options=n||Fn}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:$n(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=cf(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=$n(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:$n(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=$n(e[0],`
`).split(`
`),s="",r="",i=[];for(;t.length>0;){let l=!1,a=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))a.push(t[o]),l=!0;else if(!l)a.push(t[o]);else break;t=t.slice(o);let u=a.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,r=r?`${r}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=p,t.length===0)break;let h=i.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let w=h,g=w.raw+`
`+t.join(`
`),y=this.blockquote(g);i[i.length-1]=y,s=s.substring(0,s.length-w.raw.length)+y.raw,r=r.substring(0,r.length-w.text.length)+y.text;break}else if(h?.type==="list"){let w=h,g=w.raw+`
`+t.join(`
`),y=this.list(g);i[i.length-1]=y,s=s.substring(0,s.length-h.raw.length)+y.raw,r=r.substring(0,r.length-w.raw.length)+y.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,r={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let i=this.rules.other.listItemRegex(t),l=!1;for(;n;){let o=!1,u="",d="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),h=n.split(`
`,1)[0],w=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):w?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=e[1].length),w&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,n=n.substring(h.length+1),o=!0),!o){let y=this.rules.other.nextBulletRegex(g),A=this.rules.other.hrRegex(g),I=this.rules.other.fencesBeginRegex(g),m=this.rules.other.headingBeginRegex(g),T=this.rules.other.htmlBeginRegex(g);for(;n;){let _=n.split(`
`,1)[0],C;if(h=_,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),C=h):C=h.replace(this.rules.other.tabCharGlobal,"    "),I.test(h)||m.test(h)||T.test(h)||y.test(h)||A.test(h))break;if(C.search(this.rules.other.nonSpaceChar)>=g||!h.trim())d+=`
`+C.slice(g);else{if(w||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(p)||m.test(p)||A.test(p))break;d+=`
`+h}!w&&!h.trim()&&(w=!0),u+=_+`
`,n=n.substring(_.length+1),p=C.slice(g)}}r.loose||(l?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0)),r.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),r.raw+=u}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let o of r.items){if(this.lexer.state.top=!1,o.tokens=this.lexer.blockTokens(o.text,[]),o.task){if(o.text=o.text.replace(this.rules.other.listReplaceTask,""),o.tokens[0]?.type==="text"||o.tokens[0]?.type==="paragraph"){o.tokens[0].raw=o.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),o.tokens[0].text=o.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(o.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};o.checked=d.checked,r.loose?o.tokens[0]&&["paragraph","text"].includes(o.tokens[0].type)&&"tokens"in o.tokens[0]&&o.tokens[0].tokens?(o.tokens[0].raw=d.raw+o.tokens[0].raw,o.tokens[0].text=d.raw+o.tokens[0].text,o.tokens[0].tokens.unshift(d)):o.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):o.tokens.unshift(d)}}if(!r.loose){let u=o.tokens.filter(p=>p.type==="space"),d=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=d}}if(r.loose)for(let o of r.items){o.loose=!0;for(let u of o.tokens)u.type==="text"&&(u.type="paragraph")}return r}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:r}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Ri(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(Ri(l,i.header.length).map((a,o)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[o]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=$n(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=of(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),Pi(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[s.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Pi(t,r,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...s[0]].length-1,i,l,a=r,o=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+r);(s=u.exec(e))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(l=[...i].length,s[3]||s[4]){a+=l;continue}else if((s[5]||s[6])&&r%3&&!((r+l)%3)){o+=l;continue}if(a-=l,a>0)continue;l=Math.min(l,l+a+o);let d=[...s[0]][0].length,p=n.slice(0,r+s.index+d+l);if(Math.min(r,l)%2){let w=p.slice(1,-1);return{type:"em",raw:p,text:w,tokens:this.lexer.inlineTokens(w)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Qt=class qr{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Fn,this.options.tokenizer=this.options.tokenizer||new Us,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:It,block:Ss.normal,inline:Qn.normal};this.options.pedantic?(t.block=Ss.pedantic,t.inline=Qn.pedantic):this.options.gfm&&(t.block=Ss.gfm,this.options.breaks?t.inline=Qn.breaks:t.inline=Qn.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ss,inline:Qn}}static lex(e,t){return new qr(t).lex(e)}static lexInline(e,t){return new qr(t).inlineTokens(e)}lex(e){e=e.replace(It.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(It.tabCharGlobal,"    ").replace(It.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let l=t.at(-1);r.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,a=e.slice(1),o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},a),typeof o=="number"&&o>=0&&(l=Math.min(l,o))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let l=t.at(-1);s&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r),s=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let l=t.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let l=!1,a="";for(;e;){l||(a=""),l=!1;let o;if(this.options.extensions?.inline?.some(d=>(o=d.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let d=t.at(-1);o.type==="text"&&d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,s,a)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let u=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),h;this.options.extensions.startInline.forEach(w=>{h=w.call({lexer:this},p),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(a=o.raw.slice(-1)),l=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=o.raw,d.text+=o.text):t.push(o);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},qs=class{options;parser;constructor(n){this.options=n||Fn}space(n){return""}code({text:n,lang:e,escaped:t}){let s=(e||"").match(It.notSpaceStart)?.[0],r=n.replace(It.endingNewline,"")+`
`;return s?'<pre><code class="language-'+mn(s)+'">'+(t?r:mn(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:mn(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let l=0;l<n.items.length;l++){let a=n.items[l];s+=this.listitem(a)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+s+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let r=0;r<n.header.length;r++)t+=this.tablecell(n.header[r]);e+=this.tablerow({text:t});let s="";for(let r=0;r<n.rows.length;r++){let i=n.rows[r];t="";for(let l=0;l<i.length;l++)t+=this.tablecell(i[l]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${mn(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),r=Ni(n);if(r===null)return s;n=r;let i='<a href="'+n+'"';return e&&(i+=' title="'+mn(e)+'"'),i+=">"+s+"</a>",i}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let r=Ni(n);if(r===null)return mn(t);n=r;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${mn(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:mn(n.text)}},oi=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},$t=class jr{options;renderer;textRenderer;constructor(e){this.options=e||Fn,this.options.renderer=this.options.renderer||new qs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new oi}static parse(e,t){return new jr(t).parse(e)}static parseInline(e,t){return new jr(t).parseInline(e)}parse(e){let t="";for(let s=0;s<e.length;s++){let r=e[s];if(this.options.extensions?.renderers?.[r.type]){let l=r,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){t+=a||"";continue}}let i=r;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}parseInline(e,t=this.renderer){let s="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=a||"";continue}}let l=i;switch(l.type){case"escape":{s+=t.text(l);break}case"html":{s+=t.html(l);break}case"link":{s+=t.link(l);break}case"image":{s+=t.image(l);break}case"checkbox":{s+=t.checkbox(l);break}case"strong":{s+=t.strong(l);break}case"em":{s+=t.em(l);break}case"codespan":{s+=t.codespan(l);break}case"br":{s+=t.br(l);break}case"del":{s+=t.del(l);break}case"text":{s+=t.text(l);break}default:{let a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}},as=class{options;block;constructor(n){this.options=n||Fn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Qt.lex:Qt.lexInline}provideParser(){return this.block?$t.parse:$t.parseInline}},uf=class{defaults=ei();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=$t;Renderer=qs;TextRenderer=oi;Lexer=Qt;Tokenizer=Us;Hooks=as;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let s of n)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let r=s;for(let i of r.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of r.rows)for(let l of i)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let r=s;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let l=r[i].flat(1/0);t=t.concat(this.walkTokens(l,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...l){let a=r.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),t.renderer){let r=this.defaults.renderer||new qs(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,a=t.renderer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d||""}}s.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new Us(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,a=t.tokenizer[l],o=r[l];r[l]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new as;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,a=t.hooks[l],o=r[l];as.passThroughHooks.has(i)?r[l]=u=>{if(this.defaults.async&&as.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await a.call(r,u);return o.call(r,p)})();let d=a.call(r,u);return o.call(r,d)}:r[l]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let d=a.apply(r,u);return d===!1&&(d=o.apply(r,u)),d}}s.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;s.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),r&&(a=a.concat(r.call(this,l))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Qt.lex(n,e??this.defaults)}parser(n,e){return $t.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let l=r.hooks?await r.hooks.preprocess(e):e,a=await(r.hooks?await r.hooks.provideLexer():n?Qt.lex:Qt.lexInline)(l,r),o=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():n?$t.parse:$t.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let l=(r.hooks?r.hooks.provideLexer():n?Qt.lex:Qt.lexInline)(e,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():n?$t.parse:$t.parseInline)(l,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(l){return i(l)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+mn(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},On=new uf;function We(n,e){return On.parse(n,e)}We.options=We.setOptions=function(n){return On.setOptions(n),We.defaults=On.defaults,Ko(We.defaults),We};We.getDefaults=ei;We.defaults=Fn;We.use=function(...n){return On.use(...n),We.defaults=On.defaults,Ko(We.defaults),We};We.walkTokens=function(n,e){return On.walkTokens(n,e)};We.parseInline=On.parseInline;We.Parser=$t;We.parser=$t.parse;We.Renderer=qs;We.TextRenderer=oi;We.Lexer=Qt;We.lexer=Qt.lex;We.Tokenizer=Us;We.Hooks=as;We.parse=We;We.options;We.setOptions;We.use;We.walkTokens;We.parseInline;$t.parse;Qt.lex;var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var er={exports:{}},Mi;function ff(){return Mi||(Mi=1,(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var t=(function(s){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function m(T){return T instanceof o?new o(T.type,m(T.content),T.alias):Array.isArray(T)?T.map(m):T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++i}),m.__id},clone:function m(T,_){_=_||{};var C,S;switch(a.util.type(T)){case"Object":if(S=a.util.objId(T),_[S])return _[S];C={},_[S]=C;for(var E in T)T.hasOwnProperty(E)&&(C[E]=m(T[E],_));return C;case"Array":return S=a.util.objId(T),_[S]?_[S]:(C=[],_[S]=C,T.forEach(function(N,D){C[D]=m(N,_)}),C);default:return T}},getLanguage:function(m){for(;m;){var T=r.exec(m.className);if(T)return T[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,T){m.className=m.className.replace(RegExp(r,"gi"),""),m.classList.add("language-"+T)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(m){var T=document.getElementsByTagName("script");for(var _ in T)if(T[_].src==m)return T[_]}return null}},isActive:function(m,T,_){for(var C="no-"+T;m;){var S=m.classList;if(S.contains(T))return!0;if(S.contains(C))return!1;m=m.parentElement}return!!_}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(m,T){var _=a.util.clone(a.languages[m]);for(var C in T)_[C]=T[C];return _},insertBefore:function(m,T,_,C){C=C||a.languages;var S=C[m],E={};for(var N in S)if(S.hasOwnProperty(N)){if(N==T)for(var D in _)_.hasOwnProperty(D)&&(E[D]=_[D]);_.hasOwnProperty(N)||(E[N]=S[N])}var B=C[m];return C[m]=E,a.languages.DFS(a.languages,function(O,z){z===B&&O!=m&&(this[O]=E)}),E},DFS:function m(T,_,C,S){S=S||{};var E=a.util.objId;for(var N in T)if(T.hasOwnProperty(N)){_.call(T,N,T[N],C||N);var D=T[N],B=a.util.type(D);B==="Object"&&!S[E(D)]?(S[E(D)]=!0,m(D,_,null,S)):B==="Array"&&!S[E(D)]&&(S[E(D)]=!0,m(D,_,N,S))}}},plugins:{},highlightAll:function(m,T){a.highlightAllUnder(document,m,T)},highlightAllUnder:function(m,T,_){var C={callback:_,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),a.hooks.run("before-all-elements-highlight",C);for(var S=0,E;E=C.elements[S++];)a.highlightElement(E,T===!0,C.callback)},highlightElement:function(m,T,_){var C=a.util.getLanguage(m),S=a.languages[C];a.util.setLanguage(m,C);var E=m.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(E,C);var N=m.textContent,D={element:m,language:C,grammar:S,code:N};function B(z){D.highlightedCode=z,a.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,a.hooks.run("after-highlight",D),a.hooks.run("complete",D),_&&_.call(D.element)}if(a.hooks.run("before-sanity-check",D),E=D.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!D.code){a.hooks.run("complete",D),_&&_.call(D.element);return}if(a.hooks.run("before-highlight",D),!D.grammar){B(a.util.encode(D.code));return}if(T&&s.Worker){var O=new Worker(a.filename);O.onmessage=function(z){B(z.data)},O.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else B(a.highlight(D.code,D.grammar,D.language))},highlight:function(m,T,_){var C={code:m,grammar:T,language:_};if(a.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=a.tokenize(C.code,C.grammar),a.hooks.run("after-tokenize",C),o.stringify(a.util.encode(C.tokens),C.language)},tokenize:function(m,T){var _=T.rest;if(_){for(var C in _)T[C]=_[C];delete T.rest}var S=new p;return h(S,S.head,m),d(m,S,T,S.head,0),g(S)},hooks:{all:{},add:function(m,T){var _=a.hooks.all;_[m]=_[m]||[],_[m].push(T)},run:function(m,T){var _=a.hooks.all[m];if(!(!_||!_.length))for(var C=0,S;S=_[C++];)S(T)}},Token:o};s.Prism=a;function o(m,T,_,C){this.type=m,this.content=T,this.alias=_,this.length=(C||"").length|0}o.stringify=function m(T,_){if(typeof T=="string")return T;if(Array.isArray(T)){var C="";return T.forEach(function(B){C+=m(B,_)}),C}var S={type:T.type,content:m(T.content,_),tag:"span",classes:["token",T.type],attributes:{},language:_},E=T.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),a.hooks.run("wrap",S);var N="";for(var D in S.attributes)N+=" "+D+'="'+(S.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+N+">"+S.content+"</"+S.tag+">"};function u(m,T,_,C){m.lastIndex=T;var S=m.exec(_);if(S&&C&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function d(m,T,_,C,S,E){for(var N in _)if(!(!_.hasOwnProperty(N)||!_[N])){var D=_[N];D=Array.isArray(D)?D:[D];for(var B=0;B<D.length;++B){if(E&&E.cause==N+","+B)return;var O=D[B],z=O.inside,L=!!O.lookbehind,x=!!O.greedy,R=O.alias;if(x&&!O.pattern.global){var q=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,q+"g")}for(var Y=O.pattern||O,j=C.next,K=S;j!==T.tail&&!(E&&K>=E.reach);K+=j.value.length,j=j.next){var G=j.value;if(T.length>m.length)return;if(!(G instanceof o)){var W=1,$;if(x){if($=u(Y,K,m,L),!$||$.index>=m.length)break;var de=$.index,te=$.index+$[0].length,le=K;for(le+=j.value.length;de>=le;)j=j.next,le+=j.value.length;if(le-=j.value.length,K=le,j.value instanceof o)continue;for(var se=j;se!==T.tail&&(le<te||typeof se.value=="string");se=se.next)W++,le+=se.value.length;W--,G=m.slice(K,le),$.index-=K}else if($=u(Y,0,G,L),!$)continue;var de=$.index,re=$[0],ee=G.slice(0,de),ce=G.slice(de+re.length),ke=K+G.length;E&&ke>E.reach&&(E.reach=ke);var Ce=j.prev;ee&&(Ce=h(T,Ce,ee),K+=ee.length),w(T,Ce,W);var Le=new o(N,z?a.tokenize(re,z):re,R,re);if(j=h(T,Ce,Le),ce&&h(T,j,ce),W>1){var be={cause:N+","+B,reach:ke};d(m,T,_,j.prev,K,be),E&&be.reach>E.reach&&(E.reach=be.reach)}}}}}}function p(){var m={value:null,prev:null,next:null},T={value:null,prev:m,next:null};m.next=T,this.head=m,this.tail=T,this.length=0}function h(m,T,_){var C=T.next,S={value:_,prev:T,next:C};return T.next=S,C.prev=S,m.length++,S}function w(m,T,_){for(var C=T.next,S=0;S<_&&C!==m.tail;S++)C=C.next;T.next=C,C.prev=T,m.length-=S}function g(m){for(var T=[],_=m.head.next;_!==m.tail;)T.push(_.value),_=_.next;return T}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(m){var T=JSON.parse(m.data),_=T.language,C=T.code,S=T.immediateClose;s.postMessage(a.highlight(C,a.languages[_],_)),S&&s.close()},!1)),a;var y=a.util.currentScript();y&&(a.filename=y.src,y.hasAttribute("data-manual")&&(a.manual=!0));function A(){a.manual||a.highlightAll()}if(!a.manual){var I=document.readyState;I==="loading"||I==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return a})(e);n.exports&&(n.exports=t),typeof Oi<"u"&&(Oi.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};a["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(s,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,(function(s){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var i=s.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))})(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,(function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",r=function(y,A){return"âœ– Error "+y+" while fetching file: "+A},i="âœ– Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",o="loading",u="loaded",d="failed",p="pre[data-src]:not(["+a+'="'+u+'"]):not(['+a+'="'+o+'"])';function h(y,A,I){var m=new XMLHttpRequest;m.open("GET",y,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?A(m.responseText):m.status>=400?I(r(m.status,m.statusText)):I(i))},m.send(null)}function w(y){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(A){var I=Number(A[1]),m=A[2],T=A[3];return m?T?[I,Number(T)]:[I,void 0]:[I,I]}}t.hooks.add("before-highlightall",function(y){y.selector+=", "+p}),t.hooks.add("before-sanity-check",function(y){var A=y.element;if(A.matches(p)){y.code="",A.setAttribute(a,o);var I=A.appendChild(document.createElement("CODE"));I.textContent=s;var m=A.getAttribute("data-src"),T=y.language;if(T==="none"){var _=(/\.(\w+)$/.exec(m)||[,"none"])[1];T=l[_]||_}t.util.setLanguage(I,T),t.util.setLanguage(A,T);var C=t.plugins.autoloader;C&&C.loadLanguages(T),h(m,function(S){A.setAttribute(a,u);var E=w(A.getAttribute("data-range"));if(E){var N=S.split(/\r\n?|\n/g),D=E[0],B=E[1]==null?N.length:E[1];D<0&&(D+=N.length),D=Math.max(0,Math.min(D-1,N.length)),B<0&&(B+=N.length),B=Math.max(0,Math.min(B,N.length)),S=N.slice(D,B).join(`
`),A.hasAttribute("data-start")||A.setAttribute("data-start",String(D+1))}I.textContent=S,t.highlightElement(I)},function(S){A.setAttribute(a,d),I.textContent=S})}}),t.plugins.fileHighlight={highlight:function(A){for(var I=(A||document).querySelectorAll(p),m=0,T;T=I[m++];)t.highlightElement(T)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(er)),er.exports}var df=ff();const tr=ic(df);const{entries:lc,setPrototypeOf:Fi,isFrozen:hf,getPrototypeOf:pf,getOwnPropertyDescriptor:gf}=Object;let{freeze:Dt,seal:Wt,create:Vr}=Object,{apply:Hr,construct:Gr}=typeof Reflect<"u"&&Reflect;Dt||(Dt=function(e){return e});Wt||(Wt=function(e){return e});Hr||(Hr=function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return e.apply(t,r)});Gr||(Gr=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new e(...s)});const Is=Nt(Array.prototype.forEach),mf=Nt(Array.prototype.lastIndexOf),zi=Nt(Array.prototype.pop),es=Nt(Array.prototype.push),vf=Nt(Array.prototype.splice),Ls=Nt(String.prototype.toLowerCase),nr=Nt(String.prototype.toString),sr=Nt(String.prototype.match),ts=Nt(String.prototype.replace),_f=Nt(String.prototype.indexOf),bf=Nt(String.prototype.trim),Xt=Nt(Object.prototype.hasOwnProperty),At=Nt(RegExp.prototype.test),ns=kf(TypeError);function Nt(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return Hr(n,e,s)}}function kf(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Gr(n,t)}}function ze(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ls;Fi&&Fi(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const i=t(r);i!==r&&(hf(e)||(e[s]=i),r=i)}n[r]=!0}return n}function wf(n){for(let e=0;e<n.length;e++)Xt(n,e)||(n[e]=null);return n}function vn(n){const e=Vr(null);for(const[t,s]of lc(n))Xt(n,t)&&(Array.isArray(s)?e[t]=wf(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=vn(s):e[t]=s);return e}function ss(n,e){for(;n!==null;){const s=gf(n,e);if(s){if(s.get)return Nt(s.get);if(typeof s.value=="function")return Nt(s.value)}n=pf(n)}function t(){return null}return t}const Bi=Dt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rr=Dt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ir=Dt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yf=Dt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lr=Dt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ef=Dt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Li=Dt(["#text"]),xi=Dt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ar=Dt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ui=Dt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ds=Dt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tf=Wt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cf=Wt(/<%[\w\W]*|[\w\W]*%>/gm),Af=Wt(/\$\{[\w\W]*/gm),Sf=Wt(/^data-[\-\w.\u00B7-\uFFFF]+$/),If=Wt(/^aria-[\-\w]+$/),ac=Wt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Df=Wt(/^(?:\w+script|data):/i),Nf=Wt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),oc=Wt(/^html$/i),Rf=Wt(/^[a-z][.\w]*(-[.\w]+)+$/i);var qi=Object.freeze({__proto__:null,ARIA_ATTR:If,ATTR_WHITESPACE:Nf,CUSTOM_ELEMENT:Rf,DATA_ATTR:Sf,DOCTYPE_NAME:oc,ERB_EXPR:Cf,IS_ALLOWED_URI:ac,IS_SCRIPT_OR_DATA:Df,MUSTACHE_EXPR:Tf,TMPLIT_EXPR:Af});const rs={element:1,text:3,progressingInstruction:7,comment:8,document:9},Pf=function(){return typeof window>"u"?null:window},Of=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},ji=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function cc(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pf();const e=me=>cc(me);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==rs.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:a,Element:o,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:w}=n,g=o.prototype,y=ss(g,"cloneNode"),A=ss(g,"remove"),I=ss(g,"nextSibling"),m=ss(g,"childNodes"),T=ss(g,"parentNode");if(typeof l=="function"){const me=t.createElement("template");me.content&&me.content.ownerDocument&&(t=me.content.ownerDocument)}let _,C="";const{implementation:S,createNodeIterator:E,createDocumentFragment:N,getElementsByTagName:D}=t,{importNode:B}=s;let O=ji();e.isSupported=typeof lc=="function"&&typeof T=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:L,TMPLIT_EXPR:x,DATA_ATTR:R,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:j,CUSTOM_ELEMENT:K}=qi;let{IS_ALLOWED_URI:G}=qi,W=null;const $=ze({},[...Bi,...rr,...ir,...lr,...Li]);let te=null;const le=ze({},[...xi,...ar,...Ui,...Ds]);let se=Object.seal(Vr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,re=null;const ee=Object.seal(Vr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ce=!0,ke=!0,Ce=!1,Le=!0,be=!1,ae=!0,ve=!1,_e=!1,pe=!1,Q=!1,ue=!1,we=!1,xe=!0,Pe=!1;const Ie="user-content-";let Ve=!0,Fe=!1,et={},lt=null;const vt=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Rt=null;const fe=ze({},["audio","video","img","source","image","track"]);let ye=null;const je=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",Pt="http://www.w3.org/2000/svg",ne="http://www.w3.org/1999/xhtml";let Ee=ne,Xe=!1,Tt=null;const tt=ze({},[_t,Pt,ne],nr);let bt=ze({},["mi","mo","mn","ms","mtext"]),xt=ze({},["annotation-xml"]);const nn=ze({},["title","style","font","a","script"]);let dt=null;const Ot=["application/xhtml+xml","text/html"],Tn="text/html";let at=null,yt=null;const Cn=t.createElement("form"),An=function(U){return U instanceof RegExp||U instanceof Function},Sn=function(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yt&&yt===U)){if((!U||typeof U!="object")&&(U={}),U=vn(U),dt=Ot.indexOf(U.PARSER_MEDIA_TYPE)===-1?Tn:U.PARSER_MEDIA_TYPE,at=dt==="application/xhtml+xml"?nr:Ls,W=Xt(U,"ALLOWED_TAGS")?ze({},U.ALLOWED_TAGS,at):$,te=Xt(U,"ALLOWED_ATTR")?ze({},U.ALLOWED_ATTR,at):le,Tt=Xt(U,"ALLOWED_NAMESPACES")?ze({},U.ALLOWED_NAMESPACES,nr):tt,ye=Xt(U,"ADD_URI_SAFE_ATTR")?ze(vn(je),U.ADD_URI_SAFE_ATTR,at):je,Rt=Xt(U,"ADD_DATA_URI_TAGS")?ze(vn(fe),U.ADD_DATA_URI_TAGS,at):fe,lt=Xt(U,"FORBID_CONTENTS")?ze({},U.FORBID_CONTENTS,at):vt,de=Xt(U,"FORBID_TAGS")?ze({},U.FORBID_TAGS,at):vn({}),re=Xt(U,"FORBID_ATTR")?ze({},U.FORBID_ATTR,at):vn({}),et=Xt(U,"USE_PROFILES")?U.USE_PROFILES:!1,ce=U.ALLOW_ARIA_ATTR!==!1,ke=U.ALLOW_DATA_ATTR!==!1,Ce=U.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=U.ALLOW_SELF_CLOSE_IN_ATTR!==!1,be=U.SAFE_FOR_TEMPLATES||!1,ae=U.SAFE_FOR_XML!==!1,ve=U.WHOLE_DOCUMENT||!1,Q=U.RETURN_DOM||!1,ue=U.RETURN_DOM_FRAGMENT||!1,we=U.RETURN_TRUSTED_TYPE||!1,pe=U.FORCE_BODY||!1,xe=U.SANITIZE_DOM!==!1,Pe=U.SANITIZE_NAMED_PROPS||!1,Ve=U.KEEP_CONTENT!==!1,Fe=U.IN_PLACE||!1,G=U.ALLOWED_URI_REGEXP||ac,Ee=U.NAMESPACE||ne,bt=U.MATHML_TEXT_INTEGRATION_POINTS||bt,xt=U.HTML_INTEGRATION_POINTS||xt,se=U.CUSTOM_ELEMENT_HANDLING||{},U.CUSTOM_ELEMENT_HANDLING&&An(U.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(se.tagNameCheck=U.CUSTOM_ELEMENT_HANDLING.tagNameCheck),U.CUSTOM_ELEMENT_HANDLING&&An(U.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(se.attributeNameCheck=U.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),U.CUSTOM_ELEMENT_HANDLING&&typeof U.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(se.allowCustomizedBuiltInElements=U.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),be&&(ke=!1),ue&&(Q=!0),et&&(W=ze({},Li),te=[],et.html===!0&&(ze(W,Bi),ze(te,xi)),et.svg===!0&&(ze(W,rr),ze(te,ar),ze(te,Ds)),et.svgFilters===!0&&(ze(W,ir),ze(te,ar),ze(te,Ds)),et.mathMl===!0&&(ze(W,lr),ze(te,Ui),ze(te,Ds))),U.ADD_TAGS&&(typeof U.ADD_TAGS=="function"?ee.tagCheck=U.ADD_TAGS:(W===$&&(W=vn(W)),ze(W,U.ADD_TAGS,at))),U.ADD_ATTR&&(typeof U.ADD_ATTR=="function"?ee.attributeCheck=U.ADD_ATTR:(te===le&&(te=vn(te)),ze(te,U.ADD_ATTR,at))),U.ADD_URI_SAFE_ATTR&&ze(ye,U.ADD_URI_SAFE_ATTR,at),U.FORBID_CONTENTS&&(lt===vt&&(lt=vn(lt)),ze(lt,U.FORBID_CONTENTS,at)),Ve&&(W["#text"]=!0),ve&&ze(W,["html","head","body"]),W.table&&(ze(W,["tbody"]),delete de.tbody),U.TRUSTED_TYPES_POLICY){if(typeof U.TRUSTED_TYPES_POLICY.createHTML!="function")throw ns('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof U.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ns('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=U.TRUSTED_TYPES_POLICY,C=_.createHTML("")}else _===void 0&&(_=Of(w,r)),_!==null&&typeof C=="string"&&(C=_.createHTML(""));Dt&&Dt(U),yt=U}},Yt=ze({},[...rr,...ir,...yf]),sn=ze({},[...lr,...Ef]),gs=function(U){let oe=T(U);(!oe||!oe.tagName)&&(oe={namespaceURI:Ee,tagName:"template"});const ge=Ls(U.tagName),Te=Ls(oe.tagName);return Tt[U.namespaceURI]?U.namespaceURI===Pt?oe.namespaceURI===ne?ge==="svg":oe.namespaceURI===_t?ge==="svg"&&(Te==="annotation-xml"||bt[Te]):!!Yt[ge]:U.namespaceURI===_t?oe.namespaceURI===ne?ge==="math":oe.namespaceURI===Pt?ge==="math"&&xt[Te]:!!sn[ge]:U.namespaceURI===ne?oe.namespaceURI===Pt&&!xt[Te]||oe.namespaceURI===_t&&!bt[Te]?!1:!sn[ge]&&(nn[ge]||!Yt[ge]):!!(dt==="application/xhtml+xml"&&Tt[U.namespaceURI]):!1},Mt=function(U){es(e.removed,{element:U});try{T(U).removeChild(U)}catch{A(U)}},Et=function(U,oe){try{es(e.removed,{attribute:oe.getAttributeNode(U),from:oe})}catch{es(e.removed,{attribute:null,from:oe})}if(oe.removeAttribute(U),U==="is")if(Q||ue)try{Mt(oe)}catch{}else try{oe.setAttribute(U,"")}catch{}},rn=function(U){let oe=null,ge=null;if(pe)U="<remove></remove>"+U;else{const nt=sr(U,/^[\r\n\t ]+/);ge=nt&&nt[0]}dt==="application/xhtml+xml"&&Ee===ne&&(U='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+U+"</body></html>");const Te=_?_.createHTML(U):U;if(Ee===ne)try{oe=new h().parseFromString(Te,dt)}catch{}if(!oe||!oe.documentElement){oe=S.createDocument(Ee,"template",null);try{oe.documentElement.innerHTML=Xe?C:Te}catch{}}const Ue=oe.body||oe.documentElement;return U&&ge&&Ue.insertBefore(t.createTextNode(ge),Ue.childNodes[0]||null),Ee===ne?D.call(oe,ve?"html":"body")[0]:ve?oe.documentElement:Ue},Kn=function(U){return E.call(U.ownerDocument||U,U,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},In=function(U){return U instanceof p&&(typeof U.nodeName!="string"||typeof U.textContent!="string"||typeof U.removeChild!="function"||!(U.attributes instanceof d)||typeof U.removeAttribute!="function"||typeof U.setAttribute!="function"||typeof U.namespaceURI!="string"||typeof U.insertBefore!="function"||typeof U.hasChildNodes!="function")},Kt=function(U){return typeof a=="function"&&U instanceof a};function qt(me,U,oe){Is(me,ge=>{ge.call(e,U,oe,yt)})}const Ln=function(U){let oe=null;if(qt(O.beforeSanitizeElements,U,null),In(U))return Mt(U),!0;const ge=at(U.nodeName);if(qt(O.uponSanitizeElement,U,{tagName:ge,allowedTags:W}),ae&&U.hasChildNodes()&&!Kt(U.firstElementChild)&&At(/<[/\w!]/g,U.innerHTML)&&At(/<[/\w!]/g,U.textContent)||U.nodeType===rs.progressingInstruction||ae&&U.nodeType===rs.comment&&At(/<[/\w]/g,U.data))return Mt(U),!0;if(!(ee.tagCheck instanceof Function&&ee.tagCheck(ge))&&(!W[ge]||de[ge])){if(!de[ge]&&ln(ge)&&(se.tagNameCheck instanceof RegExp&&At(se.tagNameCheck,ge)||se.tagNameCheck instanceof Function&&se.tagNameCheck(ge)))return!1;if(Ve&&!lt[ge]){const Te=T(U)||U.parentNode,Ue=m(U)||U.childNodes;if(Ue&&Te){const nt=Ue.length;for(let ht=nt-1;ht>=0;--ht){const ot=y(Ue[ht],!0);ot.__removalCount=(U.__removalCount||0)+1,Te.insertBefore(ot,I(U))}}}return Mt(U),!0}return U instanceof o&&!gs(U)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&At(/<\/no(script|embed|frames)/i,U.innerHTML)?(Mt(U),!0):(be&&U.nodeType===rs.text&&(oe=U.textContent,Is([z,L,x],Te=>{oe=ts(oe,Te," ")}),U.textContent!==oe&&(es(e.removed,{element:U.cloneNode()}),U.textContent=oe)),qt(O.afterSanitizeElements,U,null),!1)},hn=function(U,oe,ge){if(xe&&(oe==="id"||oe==="name")&&(ge in t||ge in Cn))return!1;if(!(ke&&!re[oe]&&At(R,oe))){if(!(ce&&At(q,oe))){if(!(ee.attributeCheck instanceof Function&&ee.attributeCheck(oe,U))){if(!te[oe]||re[oe]){if(!(ln(U)&&(se.tagNameCheck instanceof RegExp&&At(se.tagNameCheck,U)||se.tagNameCheck instanceof Function&&se.tagNameCheck(U))&&(se.attributeNameCheck instanceof RegExp&&At(se.attributeNameCheck,oe)||se.attributeNameCheck instanceof Function&&se.attributeNameCheck(oe,U))||oe==="is"&&se.allowCustomizedBuiltInElements&&(se.tagNameCheck instanceof RegExp&&At(se.tagNameCheck,ge)||se.tagNameCheck instanceof Function&&se.tagNameCheck(ge))))return!1}else if(!ye[oe]){if(!At(G,ts(ge,j,""))){if(!((oe==="src"||oe==="xlink:href"||oe==="href")&&U!=="script"&&_f(ge,"data:")===0&&Rt[U])){if(!(Ce&&!At(Y,ts(ge,j,"")))){if(ge)return!1}}}}}}}return!0},ln=function(U){return U!=="annotation-xml"&&sr(U,K)},xn=function(U){qt(O.beforeSanitizeAttributes,U,null);const{attributes:oe}=U;if(!oe||In(U))return;const ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:te,forceKeepAttr:void 0};let Te=oe.length;for(;Te--;){const Ue=oe[Te],{name:nt,namespaceURI:ht,value:ot}=Ue,Ct=at(nt),_n=ot;let ut=nt==="value"?_n:bf(_n);if(ge.attrName=Ct,ge.attrValue=ut,ge.keepAttr=!0,ge.forceKeepAttr=void 0,qt(O.uponSanitizeAttribute,U,ge),ut=ge.attrValue,Pe&&(Ct==="id"||Ct==="name")&&(Et(nt,U),ut=Ie+ut),ae&&At(/((--!?|])>)|<\/(style|title|textarea)/i,ut)){Et(nt,U);continue}if(Ct==="attributename"&&sr(ut,"href")){Et(nt,U);continue}if(ge.forceKeepAttr)continue;if(!ge.keepAttr){Et(nt,U);continue}if(!Le&&At(/\/>/i,ut)){Et(nt,U);continue}be&&Is([z,L,x],Xn=>{ut=ts(ut,Xn," ")});const Dn=at(U.nodeName);if(!hn(Dn,Ct,ut)){Et(nt,U);continue}if(_&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!ht)switch(w.getAttributeType(Dn,Ct)){case"TrustedHTML":{ut=_.createHTML(ut);break}case"TrustedScriptURL":{ut=_.createScriptURL(ut);break}}if(ut!==_n)try{ht?U.setAttributeNS(ht,nt,ut):U.setAttribute(nt,ut),In(U)?Mt(U):zi(e.removed)}catch{Et(nt,U)}}qt(O.afterSanitizeAttributes,U,null)},pn=function me(U){let oe=null;const ge=Kn(U);for(qt(O.beforeSanitizeShadowDOM,U,null);oe=ge.nextNode();)qt(O.uponSanitizeShadowNode,oe,null),Ln(oe),xn(oe),oe.content instanceof i&&me(oe.content);qt(O.afterSanitizeShadowDOM,U,null)};return e.sanitize=function(me){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=null,ge=null,Te=null,Ue=null;if(Xe=!me,Xe&&(me="<!-->"),typeof me!="string"&&!Kt(me))if(typeof me.toString=="function"){if(me=me.toString(),typeof me!="string")throw ns("dirty is not a string, aborting")}else throw ns("toString is not a function");if(!e.isSupported)return me;if(_e||Sn(U),e.removed=[],typeof me=="string"&&(Fe=!1),Fe){if(me.nodeName){const ot=at(me.nodeName);if(!W[ot]||de[ot])throw ns("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof a)oe=rn("<!---->"),ge=oe.ownerDocument.importNode(me,!0),ge.nodeType===rs.element&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?oe=ge:oe.appendChild(ge);else{if(!Q&&!be&&!ve&&me.indexOf("<")===-1)return _&&we?_.createHTML(me):me;if(oe=rn(me),!oe)return Q?null:we?C:""}oe&&pe&&Mt(oe.firstChild);const nt=Kn(Fe?me:oe);for(;Te=nt.nextNode();)Ln(Te),xn(Te),Te.content instanceof i&&pn(Te.content);if(Fe)return me;if(Q){if(ue)for(Ue=N.call(oe.ownerDocument);oe.firstChild;)Ue.appendChild(oe.firstChild);else Ue=oe;return(te.shadowroot||te.shadowrootmode)&&(Ue=B.call(s,Ue,!0)),Ue}let ht=ve?oe.outerHTML:oe.innerHTML;return ve&&W["!doctype"]&&oe.ownerDocument&&oe.ownerDocument.doctype&&oe.ownerDocument.doctype.name&&At(oc,oe.ownerDocument.doctype.name)&&(ht="<!DOCTYPE "+oe.ownerDocument.doctype.name+`>
`+ht),be&&Is([z,L,x],ot=>{ht=ts(ht,ot," ")}),_&&we?_.createHTML(ht):ht},e.setConfig=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Sn(me),_e=!0},e.clearConfig=function(){yt=null,_e=!1},e.isValidAttribute=function(me,U,oe){yt||Sn({});const ge=at(me),Te=at(U);return hn(ge,Te,oe)},e.addHook=function(me,U){typeof U=="function"&&es(O[me],U)},e.removeHook=function(me,U){if(U!==void 0){const oe=mf(O[me],U);return oe===-1?void 0:vf(O[me],oe,1)[0]}return zi(O[me])},e.removeHooks=function(me){O[me]=[]},e.removeAllHooks=function(){O=ji()},e}var Mf=cc();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var Vi={},Hi;function Ff(){return Hi||(Hi=1,(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var e=n.languages.extend("typescript",{});delete e["class-name"],n.languages.typescript["class-name"].inside=e,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),n.languages.ts=n.languages.typescript})(Prism)),Vi}Ff();var Gi={},Wi;function zf(){return Wi||(Wi=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Gi}zf();var Yi={},Ki;function Bf(){return Ki||(Ki=1,(function(n){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,s={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[s,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:s.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:s.inside}],keyword:e,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":s,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:s.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:s.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),Yi}Bf();Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;var Xi={},Zi;function Lf(){return Zi||(Zi=1,(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism)),Xi}Lf();var Ji={},Qi;function xf(){return Qi||(Qi=1,(function(n){function e(K,G){return K.replace(/<<(\d+)>>/g,function(W,$){return"(?:"+G[+$]+")"})}function t(K,G,W){return RegExp(e(K,G),"")}function s(K,G){for(var W=0;W<G;W++)K=K.replace(/<<self>>/g,function(){return"(?:"+K+")"});return K.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(K){return"\\b(?:"+K.trim().replace(/ /g,"|")+")\\b"}var l=i(r.typeDeclaration),a=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),d=s(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=s(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,w=e(/<<0>>(?:\s*<<1>>)?/.source,[h,d]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,w]),y=/\[\s*(?:,\s*)*\]/.source,A=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,y]),I=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,p,y]),m=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[I]),T=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[m,g,y]),_={keyword:a,punctuation:/[<>()?,.:[\]]/},C=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,S=/"(?:\\.|[^\\"\r\n])*"/.source,E=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:_},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,T]),lookbehind:!0,inside:_},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[l,w]),lookbehind:!0,inside:_},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:_},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[A]),lookbehind:!0,inside:_},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[T,u,h]),inside:_}],keyword:a,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:_},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[T,g]),inside:_,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[T]),lookbehind:!0,inside:_,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,d]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(d),alias:"class-name",inside:_}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[l,w,h,T,a.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[w,p]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:a,"class-name":{pattern:RegExp(T),greedy:!0,inside:_},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var N=S+"|"+C,D=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[N]),B=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),O=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,z=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,B]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[O,z]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[O]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[B]),inside:n.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var L=/:[^}\r\n]+/.source,x=s(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[D]),2),R=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[x,L]),q=s(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[N]),2),Y=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[q,L]);function j(K,G){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[K]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[G,L]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[R]),lookbehind:!0,greedy:!0,inside:j(R,x)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[Y]),lookbehind:!0,greedy:!0,inside:j(Y,q)}],char:{pattern:RegExp(C),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(Prism)),Ji}xf();Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];var $i={},el;function Uf(){return el||(el=1,(function(n){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism)),$i}Uf();var tl={},nl;function qf(){return nl||(nl=1,(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",s=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+s),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+s+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism)),tl}qf();(function(n){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},s={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:s},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:s},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:s.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:s.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=n.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=s.variable[1].inside,l=0;l<r.length;l++)i[r[l]]=n.languages.bash[r[l]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var t=n.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const fs=new Map;We.setOptions({breaks:!0,gfm:!0});const sl={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},jf={code(n){const e=n.text;let t=n.lang;if(t&&sl[t.toLowerCase()]&&(t=sl[t.toLowerCase()]),t&&tr.languages[t])try{const r=tr.highlight(e,tr.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};We.use({renderer:jf});function js(n){n=n.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),n=n.replace(/```(\w+)\n([\s\S]*?)```/g,(s,r,i)=>i.endsWith(`
`)?s:"```"+r+`
`+i+"\n```");let e;try{const s=We.parse(n,{async:!1});e=typeof s=="string"?s:String(s)}catch(s){console.error("Markdown parse error:",s),e=n}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(s,r)=>{const i=fs.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:s}),Mf.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Vf(n){fs.set(n.name,n)}function Hf(n){fs.delete(n)}function Gf(n){fs.clear(),n.forEach(e=>{fs.set(e.name,e)})}const Wf="wabi-chat-db",Yf=1,Ft="messages",qn="settings";class Kf{db=null;initPromise=null;async init(){if(He&&!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Wf,Yf);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(Ft)||i.createObjectStore(Ft,{keyPath:"period"}),i.objectStoreNames.contains(qn)||i.createObjectStore(qn,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return!He||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([qn],"readonly").objectStore(qn).get(e);l.onsuccess=()=>t(l.result?.value),l.onerror=()=>s(l.error)})}async setSetting(e,t){if(!(!He||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([qn],"readwrite").objectStore(qn).put({key:e,value:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async getArchive(e){return!He||!this.db?null:new Promise((t,s)=>{const l=this.db.transaction([Ft],"readonly").objectStore(Ft).get(e);l.onsuccess=()=>t(l.result?.data),l.onerror=()=>s(l.error)})}async setArchive(e,t){if(!(!He||!this.db))return new Promise((s,r)=>{const a=this.db.transaction([Ft],"readwrite").objectStore(Ft).put({period:e,data:t});a.onsuccess=()=>s(),a.onerror=()=>r(a.error)})}async deleteArchive(e){if(!(!He||!this.db))return new Promise((t,s)=>{const l=this.db.transaction([Ft],"readwrite").objectStore(Ft).delete(e);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}async getAllArchiveKeys(){return!He||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Ft],"readonly").objectStore(Ft).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async getAllArchives(){return!He||!this.db?[]:new Promise((e,t)=>{const i=this.db.transaction([Ft],"readonly").objectStore(Ft).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async clearAllArchives(){if(!(!He||!this.db))return new Promise((e,t)=>{const i=this.db.transaction([Ft],"readwrite").objectStore(Ft).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Xf{rotationPeriod="month";maxArchives=4;db;initPromise=null;constructor(){this.db=new Kf,He&&(this.initPromise=this.init())}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){if(!He)return;const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){He&&(await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e))}async setMaxArchives(e){He&&(await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives())}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const s=this.getWeekNumber(e);return`${t}-W${String(s).padStart(2,"0")}`}case"month":{const s=e.getMonth()+1;return`${t}-${String(s).padStart(2,"0")}`}case"half-year":{const s=e.getMonth()<6?"H1":"H2";return`${t}-${s}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-t.getTime())/(1440*60*1e3));return Math.ceil((s+t.getDay()+1)/7)}async isEnabled(){if(!He)return!1;await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){He&&(await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString()))}async saveMessage(e,t){if(!He||(await this.ensureInit(),!await this.isEnabled()))return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(l){console.error("Failed to save message to IndexedDB:",l),await this.rotateArchives()}}async rotateArchives(){if(!He)return;await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const s of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${s}`),await this.db.deleteArchive(s)}}async loadAllMessages(){if(!He)return{};if(await this.ensureInit(),!await this.isEnabled())return{};const t={},s=await this.db.getAllArchives();for(const r of s){const i=r.data||{};Object.entries(i).forEach(([l,a])=>{t[l]||(t[l]=[]),t[l].push(...a)})}return Object.keys(t).forEach(r=>{t[r].sort((i,l)=>i.timestamp-l.timestamp)}),t}async deleteArchive(e){He&&(await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`))}async clearAllHistory(){He&&(await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history"))}async exportArchives(){if(!He)return;await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const s=JSON.stringify(t.data),r=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`wabi-chat-${t.period}.json`,l.click(),URL.revokeObjectURL(i)})}async exportArchive(e){if(!He)return;await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const s=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){if(!He)return{archives:[],totalSize:0,totalMessages:0};await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const l=JSON.stringify(i.data),a=new Blob([l]).size,o=i.data,u=Object.values(o).reduce((d,p)=>d+p.length,0);return{period:i.period,size:a,messageCount:u}}).sort((i,l)=>l.period.localeCompare(i.period)),s=t.reduce((i,l)=>i+l.size,0),r=t.reduce((i,l)=>i+l.messageCount,0);return{archives:t,totalSize:s,totalMessages:r}}}const Ut=new Xf,Yn=wt(null),cn=wt([]),Mn=wt("general"),St=wt({general:[]}),Vt=wt([]),uc=wt([]),dn=wt(null),rl=wt(!1),fc=wt(0),ci=wt(null);let Se=null;function Zf(n){if(!He)return;let e="http://localhost:3000";if(typeof window<"u"){const t=window.location.origin;t.includes(":5173")||(e=t)}return Se=Bs(e),Yn.set(Se),Ut.loadAllMessages().then(t=>{if(Object.keys(t).length>0){const s={};for(const[r,i]of Object.entries(t)){const l=new Set;s[r]=i.filter(a=>l.has(a.id)?!1:(l.add(a.id),!0))}St.set(s)}}),Se.on("connect",()=>{console.log("Connected to server"),rl.set(!0),Se?.emit("join",n)}),Se.on("disconnect",()=>{console.log("Disconnected from server"),rl.set(!1)}),Se.on("init",t=>{Vt.set(t.users);const s=t.channels.map(i=>{if(i.type==="dm"&&i.members){const l=i.members.find(o=>o!==Se?.id),a=t.users.find(o=>o.id===l);if(a)return{...i,name:a.username,otherUser:a}}return i});cn.set(s),t.emotes&&Gf(t.emotes);const r=t.users.find(i=>i.id===Se?.id);r&&dn.set(r),Se?.emit("join-channel","general")}),Se.on("channel-messages",t=>{St.update(s=>{const r=s[t.channelId]||[],i=new Set(r.map(a=>a.id)),l=t.messages.filter(a=>!i.has(a.id));return{...s,[t.channelId]:[...r,...l]}})}),Se.on("message",t=>{St.update(i=>{const l=i[t.channelId]||[];return l.some(a=>a.id===t.message.id)?i:{...i,[t.channelId]:[...l,t.message]}}),Ut.saveMessage(t.channelId,t.message);const s=t.message.userId===Se?.id;let r;cn.subscribe(i=>{r=i.find(a=>a.id===t.channelId)?.name})(),Cu(t.message,s,r),!s&&document.hidden&&fc.update(i=>(i===0&&ci.set(t.message.id),i+1))}),Se.on("user-joined",t=>{Vt.update(s=>[...s,t])}),Se.on("user-left",t=>{Vt.update(s=>s.filter(r=>r.id!==t.id))}),Se.on("typing",t=>{uc.set(t)}),Se.on("profile-updated",t=>{Vt.update(s=>s.map(r=>r.id===t.id?t:r)),dn.update(s=>s&&s.id===t.id?t:s)}),Se.on("message-edited",t=>{St.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),Se.on("message-deleted",t=>{St.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),Se.on("message-pin-toggled",t=>{St.update(s=>({...s,[t.channelId]:(s[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),Se.on("channel-created",t=>{let s=t;t.type==="dm"&&t.members&&Vt.subscribe(r=>{const i=t.members.find(a=>a!==Se?.id),l=r.find(a=>a.id===i);l&&(s={...t,name:l.username,otherUser:l})})(),cn.update(r=>[...r,s]),St.update(r=>({...r,[s.id]:[]}))}),Se.on("channel-deleted",t=>{cn.update(s=>s.filter(r=>r.id!==t)),St.update(s=>{const r={...s};return delete r[t],r}),Mn.update(s=>s===t?"general":s)}),Se.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),Se.on("dm-created",t=>{const s={id:t.channelId,name:t.otherUser.username,createdAt:Date.now(),type:"dm",otherUser:t.otherUser};cn.update(r=>r.some(i=>i.id===t.channelId)?r:[...r,s]),St.update(r=>({...r,[t.channelId]:r[t.channelId]||[]})),Mn.set(t.channelId)}),Se.on("group-created",t=>{cn.update(s=>s.some(r=>r.id===t.id)?s:[...s,t]),St.update(s=>({...s,[t.id]:s[t.id]||[]}))}),Se.on("emote-added",t=>{Vf(t)}),Se.on("emote-deleted",t=>{Hf(t)}),Se.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),Se.on("channel-settings-updated",t=>{cn.update(s=>s.map(r=>r.id===t.channelId?{...r,autoDeleteAfter:t.autoDeleteAfter}:r))}),Se}function Jf(n){Se?.emit("join-channel",n),Mn.set(n)}function Qf(n){Se?.emit("create-channel",n)}function $f(n){Se?.emit("delete-channel",n)}function Ns(n,e,t="text",s){Se?.emit("message",{channelId:n,text:e,type:t,...s})}function dc(n,e,t){Se?.emit("edit-message",{channelId:n,messageId:e,newText:t})}function ed(n,e){Se?.emit("delete-message",{channelId:n,messageId:e})}function ui(n,e){Se?.emit("toggle-pin-message",{channelId:n,messageId:e})}function or(n){Se?.emit("typing",n)}function il(n,e){Se?.emit("update-profile",{status:n,profilePicture:e})}function td(){Se?.disconnect(),Yn.set(null),Se=null}function nd(){fc.set(0),ci.set(null)}function hc(n){Se?.emit("create-dm",{targetUserId:n})}function sd(n,e){Se?.emit("update-channel-settings",{channelId:n,autoDeleteAfter:e})}let Rs;const rd=new Uint8Array(16);function id(){if(!Rs&&(Rs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rs(rd)}const kt=[];for(let n=0;n<256;++n)kt.push((n+256).toString(16).slice(1));function ld(n,e=0){return kt[n[e+0]]+kt[n[e+1]]+kt[n[e+2]]+kt[n[e+3]]+"-"+kt[n[e+4]]+kt[n[e+5]]+"-"+kt[n[e+6]]+kt[n[e+7]]+"-"+kt[n[e+8]]+kt[n[e+9]]+"-"+kt[n[e+10]]+kt[n[e+11]]+kt[n[e+12]]+kt[n[e+13]]+kt[n[e+14]]+kt[n[e+15]]}const ad=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ll={randomUUID:ad};function od(n,e,t){if(ll.randomUUID&&!n)return ll.randomUUID();n=n||{};const s=n.random||(n.rng||id)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ld(s)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var Nn="",pc=16,cd=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let s=0;s<pc;s++)n+=e.charAt(Math.floor(Math.random()*t));return n},ud=()=>{if(!Nn){try{Nn=sessionStorage.getItem("giphyPingbackId")}catch{}if(!Nn){const n=new Date().getTime().toString(16);try{Nn=`${n}${od().replace(/-/g,"")}`.substring(0,pc)}catch{Nn=cd()}try{sessionStorage.setItem("giphyPingbackId",Nn)}catch{}}}return Nn},fd=ud,Ps=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{Ps=!0,n(Ps)},e.onerror=()=>{Ps=!1,n(Ps)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var os=(typeof window<"u"?window:global)||{};os._GIPHY_SDK_HEADERS_=os._GIPHY_SDK_HEADERS_||(os.Headers?new os.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var gc=()=>os._GIPHY_SDK_HEADERS_,al=(n,e)=>{var t;return(t=gc())==null?void 0:t.set(n,e)},dd=Object.defineProperty,hd=Object.defineProperties,pd=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertyNames,ol=Object.getOwnPropertySymbols,md=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable,cl=(n,e,t)=>e in n?dd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,on=(n,e)=>{for(var t in e||(e={}))md.call(e,t)&&cl(n,t,e[t]);if(ol)for(var t of ol(e))vd.call(e,t)&&cl(n,t,e[t]);return n},cr=(n,e)=>hd(n,pd(e)),_d=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),bd=(n,e)=>function(){return e||(0,n[gd(n)[0]])((e={exports:{}}).exports,e),e.exports},kd=(n,e,t)=>new Promise((s,r)=>{var i=o=>{try{a(t.next(o))}catch(u){r(u)}},l=o=>{try{a(t.throw(o))}catch(u){r(u)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,l);a((t=t.apply(n,e)).next())}),wd=bd({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),yd=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],Ed=["suppress_chrome","is_public","is_verified"],ul=n=>e=>n[e]=!!n[e],Td=n=>typeof n=="string"?n:n.text,mc=(n,e="")=>{const t=on({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(Td),t.bottle_data||(t.bottle_data={}),t.response_id=e,yd.forEach(ul(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:s}=t;if(s){const r=on({},s);Ed.forEach(ul(r)),t.user=r}return t},fl=n=>{const{response_id:e}=n.meta;return n.data=mc(n.data,e),n},gn=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>mc(t,e)),n},Cd=(typeof window<"u"?window:global)||{},Ad=Cd.GIPHY_API_URL||"https://api.giphy.com/v1/",vc=class extends Error{constructor(n,e,t=0,s=""){super(n),this.url=e,this.status=t,this.statusText=s}},Sd=class extends vc{},dl=vc,Id="@giphy/js-fetch-api: ",Dd="Error fetching",Nd=n=>n,Jt={},Rd=6e4,Pd=6e3,Od=()=>{const n=Date.now();Object.keys(Jt).forEach(e=>{const t=Jt[e].isError?Pd:Rd;n-Jt[e].ts>=t&&delete Jt[e]})};function Md(n,e={}){const{apiVersion:t=1,noCache:s=!1,normalizer:r=Nd}=e,i=Ad.replace(/\/v\d+\/$/,`/v${t}/`);if(Od(),!Jt[n]||s){const l=`${i}${n}`,a=()=>kd(this,null,function*(){var o,u;let d;try{const p=yield fetch(l,{method:"get"});if(p.ok){const h=yield p.json();if((o=h.meta)!=null&&o.response_id)return r(h);throw{message:"synthetic response"}}else{let h=Dd;try{const g=yield p.json();g.message&&(h=g.message),(u=g.meta)!=null&&u.msg&&(h=g.meta.msg)}catch{}Jt[n]&&(Jt[n].isError=!0);let w=dl;h==="This content is not available in your location"&&(w=Sd),d=new w(`${Id}${h}`,l,p.status,p.statusText)}}catch(p){d=new dl(p.message,l),Jt[n]&&(Jt[n].isError=!0)}throw d});Jt[n]={request:a(),ts:Date.now()}}return Jt[n].request}var zt=Md,ur=n=>n&&n.type?n.type:"gifs",Fd=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(on(cr(on({},t),{api_key:this.apiKey,pingback_id:fd()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return zt(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return zt(`${t}gifs/${n}?${this.getQS()}`,{normalizer:fl})}gifs(n,e){return Array.isArray(n)?zt(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:gn}):zt(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:gn})}emoji(n){return zt(`emoji?${this.getQS(n)}`,{normalizer:gn})}emojiDefaultVariations(n){return zt(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:gn})}emojiVariations(n){return zt(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:gn})}animate(n,e={}){const t=this.getQS(cr(on({},e),{m:n}));return zt(`text/animate?${t}`,{normalizer:gn})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let s;e.type==="text"&&(s=!0);const r=this.getQS(cr(on({rating:"pg-13"},e),{q:t,excludeDynamicResults:s}));return zt(`${ur(e)}/search?${r}`,{normalizer:gn})}subcategories(n,e){return zt(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return zt(`${ur(n)}/trending?${this.getQS(on({rating:"pg-13"},n))}`,{normalizer:gn})}random(n){return zt(`${ur(n)}/random?${this.getQS(on({rating:"pg-13"},n))}`,{noCache:!0,normalizer:fl})}related(n,e={}){const{type:t="gifs"}=e;return zt(`${t}/related?${this.getQS(on({gif_id:n,rating:"pg-13"},e))}`,{normalizer:gn})}channels(n,e={}){return zt(`channels/search?${this.getQS(on({q:n,rating:"pg-13"},e))}`)}},zd=Fd,hl;if(typeof _d<"u"){const{version:n}=wd();(hl=gc())!=null&&hl.get("X-GIPHY-SDK-NAME")||(al("X-GIPHY-SDK-NAME","FetchAPI"),al("X-GIPHY-SDK-VERSION",n))}function pl(n,e,t){const s=n.slice();return s[11]=e[t],s}function Bd(n){let e=[],t=new Map,s,r=Ke(n[1]);const i=l=>l[11].id;for(let l=0;l<r.length;l+=1){let a=pl(n,r,l),o=i(a);t.set(o,e[l]=gl(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Re()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Re()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);V(l,s,a)},p(l,a){a&34&&(r=Ke(l[1]),e=tn(e,a,i,1,l,r,t,s.parentNode,en,gl,s,pl))},d(l){l&&v(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function Ld(n){let e,t="No GIFs found";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){f(e,"class","no-results svelte-x54k5n")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function xd(n){let e,t="Loading...";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-x54k5n")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function gl(n,e){let t,s,r,i,l,a,o;function u(){return e[8](e[11])}return{key:n,first:null,c(){t=k("button"),s=k("img"),l=F(),this.h()},l(d){t=b(d,"BUTTON",{class:!0});var p=P(t);s=b(p,"IMG",{src:!0,alt:!0,class:!0}),l=M(p),p.forEach(v),this.h()},h(){Ye(s.src,r=e[11].images.fixed_height_small.url)||f(s,"src",r),f(s,"alt",i=e[11].title),f(s,"class","svelte-x54k5n"),f(t,"class","gif-item svelte-x54k5n"),this.first=t},m(d,p){V(d,t,p),c(t,s),c(t,l),a||(o=H(t,"click",u),a=!0)},p(d,p){e=d,p&2&&!Ye(s.src,r=e[11].images.fixed_height_small.url)&&f(s,"src",r),p&2&&i!==(i=e[11].title)&&f(s,"alt",i)},d(d){d&&v(t),a=!1,o()}}}function Ud(n){let e,t,s,r,i,l="âœ•",a,o,u,d;function p(g,y){return g[2]?xd:g[1].length===0?Ld:Bd}let h=p(n),w=h(n);return{c(){e=k("div"),t=k("div"),s=k("input"),r=F(),i=k("button"),i.textContent=l,a=F(),o=k("div"),w.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var y=P(e);t=b(y,"DIV",{class:!0});var A=P(t);s=b(A,"INPUT",{type:!0,placeholder:!0,class:!0}),r=M(A),i=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-xkwxcu"&&(i.textContent=l),A.forEach(v),a=M(y),o=b(y,"DIV",{class:!0});var I=P(o);w.l(I),I.forEach(v),y.forEach(v),this.h()},h(){f(s,"type","text"),f(s,"placeholder","Search GIFs..."),f(s,"class","svelte-x54k5n"),f(i,"class","close-btn svelte-x54k5n"),f(t,"class","giphy-header svelte-x54k5n"),f(o,"class","gif-grid svelte-x54k5n"),f(e,"class","giphy-picker svelte-x54k5n")},m(g,y){V(g,e,y),c(e,t),c(t,s),st(s,n[0]),c(t,r),c(t,i),c(e,a),c(e,o),w.m(o,null),u||(d=[H(s,"input",n[6]),H(s,"input",n[4]),H(i,"click",n[7])],u=!0)},p(g,[y]){y&1&&s.value!==g[0]&&st(s,g[0]),h===(h=p(g))&&w?w.p(g,y):(w.d(1),w=h(g),w&&(w.c(),w.m(o,null)))},i:Me,o:Me,d(g){g&&v(e),w.d(),u=!1,De(d)}}}function qd(n,e,t){const s=Wr();let r="",i=[],l=!1;const a=new zd("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,l=!0);try{const{data:g}=await a.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,l=!1)}async function u(){t(2,l=!0);try{const{data:g}=await a.trending({limit:20});t(1,i=g),console.log("Loaded GIFs:",i.length,i)}catch(g){console.error("Error fetching trending GIFs:",g),t(1,i=[])}t(2,l=!1)}function d(g){s("select",g.images.fixed_height.url)}function p(){r=this.value,t(0,r)}return[r,i,l,s,o,d,p,()=>s("close"),g=>d(g)]}class jd extends gt{constructor(e){super(),mt(this,e,qd,Ud,pt,{})}}function ml(n){let e,t,s,r,i=(n[2]?"Your Profile":n[1].username)+"",l,a,o,u="Ã—",d,p,h,w,g,y,A,I,m,T="Username:",_,C,S=n[1].username+"",E,N,D,B,O,z;function L($,te){return $[4]||$[1].profilePicture?Hd:Vd}let x=L(n),R=x(n),q=n[2]&&vl(n),Y=!n[2]&&_l(n);function j($,te){return $[2]?Xd:Kd}let K=j(n),G=K(n),W=n[2]&&kl(n);return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),l=J(i),a=F(),o=k("button"),o.textContent=u,d=F(),p=k("div"),h=k("div"),w=k("div"),R.c(),g=F(),q&&q.c(),y=F(),A=k("div"),I=k("div"),m=k("span"),m.textContent=T,_=F(),C=k("span"),E=J(S),N=F(),Y&&Y.c(),D=F(),G.c(),B=F(),W&&W.c(),this.h()},l($){e=b($,"DIV",{class:!0});var te=P(e);t=b(te,"DIV",{class:!0});var le=P(t);s=b(le,"DIV",{class:!0});var se=P(s);r=b(se,"H2",{class:!0});var de=P(r);l=Z(de,i),de.forEach(v),a=M(se),o=b(se,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-12zniqk"&&(o.textContent=u),se.forEach(v),d=M(le),p=b(le,"DIV",{class:!0});var re=P(p);h=b(re,"DIV",{class:!0});var ee=P(h);w=b(ee,"DIV",{class:!0});var ce=P(w);R.l(ce),ce.forEach(v),g=M(ee),q&&q.l(ee),ee.forEach(v),y=M(re),A=b(re,"DIV",{class:!0});var ke=P(A);I=b(ke,"DIV",{class:!0});var Ce=P(I);m=b(Ce,"SPAN",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-1fffgfa"&&(m.textContent=T),_=M(Ce),C=b(Ce,"SPAN",{class:!0});var Le=P(C);E=Z(Le,S),Le.forEach(v),Ce.forEach(v),ke.forEach(v),N=M(re),Y&&Y.l(re),D=M(re),G.l(re),re.forEach(v),B=M(le),W&&W.l(le),le.forEach(v),te.forEach(v),this.h()},h(){f(r,"class","svelte-mn2c16"),f(o,"class","close-btn svelte-mn2c16"),f(s,"class","modal-header svelte-mn2c16"),f(w,"class","profile-picture-container svelte-mn2c16"),f(h,"class","profile-picture-section svelte-mn2c16"),f(m,"class","info-label svelte-mn2c16"),f(C,"class","info-value svelte-mn2c16"),f(I,"class","info-row svelte-mn2c16"),f(A,"class","user-info svelte-mn2c16"),f(p,"class","modal-body svelte-mn2c16"),f(t,"class","modal-content svelte-mn2c16"),f(e,"class","modal-overlay svelte-mn2c16")},m($,te){V($,e,te),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),c(p,h),c(h,w),R.m(w,null),c(h,g),q&&q.m(h,null),c(p,y),c(p,A),c(A,I),c(I,m),c(I,_),c(I,C),c(C,E),c(p,N),Y&&Y.m(p,null),c(p,D),G.m(p,null),c(t,B),W&&W.m(t,null),O||(z=[H(o,"click",n[9]),H(t,"click",it(n[12])),H(e,"click",n[9])],O=!0)},p($,te){te&6&&i!==(i=($[2]?"Your Profile":$[1].username)+"")&&ie(l,i),x===(x=L($))&&R?R.p($,te):(R.d(1),R=x($),R&&(R.c(),R.m(w,null))),$[2]?q?q.p($,te):(q=vl($),q.c(),q.m(h,null)):q&&(q.d(1),q=null),te&2&&S!==(S=$[1].username+"")&&ie(E,S),$[2]?Y&&(Y.d(1),Y=null):Y?Y.p($,te):(Y=_l($),Y.c(),Y.m(p,D)),K===(K=j($))&&G?G.p($,te):(G.d(1),G=K($),G&&(G.c(),G.m(p,null))),$[2]?W?W.p($,te):(W=kl($),W.c(),W.m(t,null)):W&&(W.d(1),W=null)},d($){$&&v(e),R.d(),q&&q.d(),Y&&Y.d(),G.d(),W&&W.d(),O=!1,De(z)}}}function Vd(n){let e,t=n[1].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","profile-picture-placeholder svelte-mn2c16"),Ne(e,"background-color",n[1].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&2&&Ne(e,"background-color",r[1].color)},d(r){r&&v(e)}}}function Hd(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[4]||n[1].profilePicture)||f(e,"src",t),f(e,"alt",s=n[1].username),f(e,"class","profile-picture svelte-mn2c16")},m(r,i){V(r,e,i)},p(r,i){i&18&&!Ye(e.src,t=r[4]||r[1].profilePicture)&&f(e,"src",t),i&2&&s!==(s=r[1].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function vl(n){let e,t,s=n[4]||n[1].profilePicture?"Change Picture":"Upload Picture",r,i,l,a,o;return{c(){e=k("div"),t=k("label"),r=J(s),i=F(),l=k("input"),this.h()},l(u){e=b(u,"DIV",{class:!0});var d=P(e);t=b(d,"LABEL",{for:!0,class:!0});var p=P(t);r=Z(p,s),p.forEach(v),i=M(d),l=b(d,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),d.forEach(v),this.h()},h(){f(t,"for","profile-picture"),f(t,"class","upload-label svelte-mn2c16"),f(l,"id","profile-picture"),f(l,"type","file"),f(l,"accept","image/*"),f(l,"class","file-input svelte-mn2c16"),f(e,"class","upload-section svelte-mn2c16")},m(u,d){V(u,e,d),c(e,t),c(t,r),c(e,i),c(e,l),a||(o=H(l,"change",n[10]),a=!0)},p(u,d){d&18&&s!==(s=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&ie(r,s)},d(u){u&&v(e),a=!1,o()}}}function _l(n){let e,t,s,r="Personal Notes:",i,l,a=!n[6]&&bl(n);function o(p,h){return p[6]?Yd:p[5]?Wd:Gd}let u=o(n),d=u(n);return{c(){e=k("div"),t=k("div"),s=k("label"),s.textContent=r,i=F(),a&&a.c(),l=F(),d.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var h=P(e);t=b(h,"DIV",{class:!0});var w=P(t);s=b(w,"LABEL",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1vz1uda"&&(s.textContent=r),i=M(w),a&&a.l(w),w.forEach(v),l=M(h),d.l(h),h.forEach(v),this.h()},h(){f(s,"class","notes-label svelte-mn2c16"),f(t,"class","notes-header svelte-mn2c16"),f(e,"class","notes-section svelte-mn2c16")},m(p,h){V(p,e,h),c(e,t),c(t,s),c(t,i),a&&a.m(t,null),c(e,l),d.m(e,null)},p(p,h){p[6]?a&&(a.d(1),a=null):a?a.p(p,h):(a=bl(p),a.c(),a.m(t,null)),u===(u=o(p))&&d?d.p(p,h):(d.d(1),d=u(p),d&&(d.c(),d.m(e,null)))},d(p){p&&v(e),a&&a.d(),d.d()}}}function bl(n){let e,t=n[5]?"Edit":"Add Note",s,r,i;return{c(){e=k("button"),s=J(t),this.h()},l(l){e=b(l,"BUTTON",{class:!0});var a=P(e);s=Z(a,t),a.forEach(v),this.h()},h(){f(e,"class","edit-note-btn svelte-mn2c16")},m(l,a){V(l,e,a),c(e,s),r||(i=H(e,"click",n[13]),r=!0)},p(l,a){a&32&&t!==(t=l[5]?"Edit":"Add Note")&&ie(s,t)},d(l){l&&v(e),r=!1,i()}}}function Gd(n){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){f(e,"class","note-placeholder svelte-mn2c16")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function Wd(n){let e,t;return{c(){e=k("div"),t=J(n[5]),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=P(e);t=Z(r,n[5]),r.forEach(v),this.h()},h(){f(e,"class","note-display svelte-mn2c16")},m(s,r){V(s,e,r),c(e,t)},p(s,r){r&32&&ie(t,s[5])},d(s){s&&v(e)}}}function Yd(n){let e,t,s,r,i="Cancel",l,a,o="Save Note",u,d;return{c(){e=k("textarea"),t=F(),s=k("div"),r=k("button"),r.textContent=i,l=F(),a=k("button"),a.textContent=o,this.h()},l(p){e=b(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),P(e).forEach(v),t=M(p),s=b(p,"DIV",{class:!0});var h=P(s);r=b(h,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-hulrz8"&&(r.textContent=i),l=M(h),a=b(h,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-9d2dbm"&&(a.textContent=o),h.forEach(v),this.h()},h(){f(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),f(e,"class","note-textarea svelte-mn2c16"),f(e,"rows","3"),f(r,"class","cancel-note-btn svelte-mn2c16"),f(a,"class","save-note-btn svelte-mn2c16"),f(s,"class","note-actions svelte-mn2c16")},m(p,h){V(p,e,h),st(e,n[5]),V(p,t,h),V(p,s,h),c(s,r),c(s,l),c(s,a),u||(d=[H(e,"input",n[14]),H(r,"click",n[15]),H(a,"click",n[8])],u=!0)},p(p,h){h&32&&st(e,p[5])},d(p){p&&(v(e),v(t),v(s)),u=!1,De(d)}}}function Kd(n){let e,t,s,r,i=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1)+"",l;return{c(){e=k("div"),t=k("span"),s=F(),r=k("span"),l=J(i),this.h()},l(a){e=b(a,"DIV",{class:!0});var o=P(e);t=b(o,"SPAN",{class:!0,style:!0}),P(t).forEach(v),s=M(o),r=b(o,"SPAN",{class:!0});var u=P(r);l=Z(u,i),u.forEach(v),o.forEach(v),this.h()},h(){f(t,"class","status-dot svelte-mn2c16"),Ne(t,"background-color",us(n[1].status)),f(r,"class","status-text svelte-mn2c16"),f(e,"class","status-display svelte-mn2c16")},m(a,o){V(a,e,o),c(e,t),c(e,s),c(e,r),c(r,l)},p(a,o){o&2&&Ne(t,"background-color",us(a[1].status)),o&2&&i!==(i=a[1].status.charAt(0).toUpperCase()+a[1].status.slice(1)+"")&&ie(l,i)},d(a){a&&v(e)}}}function Xd(n){let e,t,s="Status:",r,i,l,a,o,u,d,p,h,w,g,y,A,I,m,T,_,C;return{c(){e=k("div"),t=k("label"),t.textContent=s,r=F(),i=k("div"),l=k("button"),a=k("span"),o=J(`\r
								Active`),d=F(),p=k("button"),h=k("span"),w=J(`\r
								Away`),y=F(),A=k("button"),I=k("span"),m=J(`\r
								Busy`),this.h()},l(S){e=b(S,"DIV",{class:!0});var E=P(e);t=b(E,"LABEL",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-138t5u0"&&(t.textContent=s),r=M(E),i=b(E,"DIV",{class:!0});var N=P(i);l=b(N,"BUTTON",{class:!0});var D=P(l);a=b(D,"SPAN",{class:!0,style:!0}),P(a).forEach(v),o=Z(D,`\r
								Active`),D.forEach(v),d=M(N),p=b(N,"BUTTON",{class:!0});var B=P(p);h=b(B,"SPAN",{class:!0,style:!0}),P(h).forEach(v),w=Z(B,`\r
								Away`),B.forEach(v),y=M(N),A=b(N,"BUTTON",{class:!0});var O=P(A);I=b(O,"SPAN",{class:!0,style:!0}),P(I).forEach(v),m=Z(O,`\r
								Busy`),O.forEach(v),N.forEach(v),E.forEach(v),this.h()},h(){f(t,"class","status-label svelte-mn2c16"),f(a,"class","status-dot svelte-mn2c16"),Ne(a,"background-color",us("active")),f(l,"class",u="status-btn "+(n[3]==="active"?"selected":"")+" svelte-mn2c16"),f(h,"class","status-dot svelte-mn2c16"),Ne(h,"background-color",us("away")),f(p,"class",g="status-btn "+(n[3]==="away"?"selected":"")+" svelte-mn2c16"),f(I,"class","status-dot svelte-mn2c16"),Ne(I,"background-color",us("busy")),f(A,"class",T="status-btn "+(n[3]==="busy"?"selected":"")+" svelte-mn2c16"),f(i,"class","status-options svelte-mn2c16"),f(e,"class","status-section svelte-mn2c16")},m(S,E){V(S,e,E),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),c(l,o),c(i,d),c(i,p),c(p,h),c(p,w),c(i,y),c(i,A),c(A,I),c(A,m),_||(C=[H(l,"click",n[16]),H(p,"click",n[17]),H(A,"click",n[18])],_=!0)},p(S,E){E&8&&u!==(u="status-btn "+(S[3]==="active"?"selected":"")+" svelte-mn2c16")&&f(l,"class",u),E&8&&g!==(g="status-btn "+(S[3]==="away"?"selected":"")+" svelte-mn2c16")&&f(p,"class",g),E&8&&T!==(T="status-btn "+(S[3]==="busy"?"selected":"")+" svelte-mn2c16")&&f(A,"class",T)},d(S){S&&v(e),_=!1,De(C)}}}function kl(n){let e,t,s="Cancel",r,i,l="Save Changes",a,o;return{c(){e=k("div"),t=k("button"),t.textContent=s,r=F(),i=k("button"),i.textContent=l,this.h()},l(u){e=b(u,"DIV",{class:!0});var d=P(e);t=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-2pqgi7"&&(t.textContent=s),r=M(d),i=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-2yi6cr"&&(i.textContent=l),d.forEach(v),this.h()},h(){f(t,"class","cancel-btn svelte-mn2c16"),f(i,"class","save-btn svelte-mn2c16"),f(e,"class","modal-footer svelte-mn2c16")},m(u,d){V(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=[H(t,"click",n[9]),H(i,"click",n[11])],a=!0)},p:Me,d(u){u&&v(e),a=!1,De(o)}}}function Zd(n){let e,t=n[0]&&n[1]&&ml(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=ml(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function us(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Jd(n,e,t){let{isOpen:s=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,l=r?.status||"active";r?.profilePicture;let a=null,o=null,u="",d=!1;function p(){if(!He||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=E[r.id]||"")}function h(){if(!He||!r)return;const E=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?E[r.id]=u:delete E[r.id],localStorage.setItem("userNotes",JSON.stringify(E)),t(6,d=!1)}function w(){t(0,s=!1),a=null,t(4,o=null),t(6,d=!1)}function g(E){const D=E.target.files?.[0];if(D&&D.type.startsWith("image/")){a=D;const B=new FileReader;B.onload=O=>{t(4,o=O.target?.result)},B.readAsDataURL(D)}}function y(){i&&(a&&o?il(l,o):l!==r?.status&&il(l,void 0),w())}function A(E){Gt.call(this,n,E)}const I=()=>t(6,d=!0);function m(){u=this.value,t(5,u)}const T=()=>{t(6,d=!1),p()},_=()=>t(3,l="active"),C=()=>t(3,l="away"),S=()=>t(3,l="busy");return n.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"user"in E&&t(1,r=E.user),"isOwnProfile"in E&&t(2,i=E.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&2&&r&&(t(3,l=r.status),r.profilePicture,p())},[s,r,i,l,o,u,d,p,h,w,g,y,A,I,m,T,_,C,S]}class fi extends gt{constructor(e){super(),mt(this,e,Jd,Zd,pt,{isOpen:0,user:1,isOwnProfile:2})}}function wl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ’¬</span>
				Reply`,i,l,a,o,u,d,p=n[1].isPinned?"ðŸ“Œ":"ðŸ“",h,w,g=n[1].isPinned?"Unpin":"Pin",y,A,I,m,T=`<span class="menu-icon svelte-5kwx2s">ðŸ“‹</span>
				Copy Text`,_,C,S,E=n[11]&&n[6]&&yl(n),N=n[7]&&El(n),D=n[12]&&Tl(n),B=n[12]&&Cl(n);return{c(){e=k("div"),t=k("div"),s=k("button"),s.innerHTML=r,i=F(),E&&E.c(),l=F(),N&&N.c(),a=F(),D&&D.c(),o=F(),u=k("button"),d=k("span"),h=J(p),w=F(),y=J(g),A=J(" Message"),I=F(),m=k("button"),m.innerHTML=T,_=F(),B&&B.c(),this.h()},l(O){e=b(O,"DIV",{class:!0});var z=P(e);t=b(z,"DIV",{class:!0,style:!0});var L=P(t);s=b(L,"BUTTON",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1bhlhgs"&&(s.innerHTML=r),i=M(L),E&&E.l(L),l=M(L),N&&N.l(L),a=M(L),D&&D.l(L),o=M(L),u=b(L,"BUTTON",{class:!0});var x=P(u);d=b(x,"SPAN",{class:!0});var R=P(d);h=Z(R,p),R.forEach(v),w=M(x),y=Z(x,g),A=Z(x," Message"),x.forEach(v),I=M(L),m=b(L,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-pkfnng"&&(m.innerHTML=T),_=M(L),B&&B.l(L),L.forEach(v),z.forEach(v),this.h()},h(){f(s,"class","menu-item svelte-5kwx2s"),f(d,"class","menu-icon svelte-5kwx2s"),f(u,"class","menu-item svelte-5kwx2s"),f(m,"class","menu-item copy svelte-5kwx2s"),f(t,"class","context-menu svelte-5kwx2s"),Ne(t,"top",n[9]+"px"),Ne(t,"left",n[10]+"px"),f(e,"class","context-menu-overlay svelte-5kwx2s")},m(O,z){V(O,e,z),c(e,t),c(t,s),c(t,i),E&&E.m(t,null),c(t,l),N&&N.m(t,null),c(t,a),D&&D.m(t,null),c(t,o),c(t,u),c(u,d),c(d,h),c(u,w),c(u,y),c(u,A),c(t,I),c(t,m),c(t,_),B&&B.m(t,null),n[18](t),C||(S=[H(s,"click",function(){Pn(n[5])&&n[5].apply(this,arguments)}),H(u,"click",function(){Pn(n[4])&&n[4].apply(this,arguments)}),H(m,"click",n[17]),H(t,"click",it(n[16])),H(e,"click",n[19])],C=!0)},p(O,z){n=O,n[11]&&n[6]?E?E.p(n,z):(E=yl(n),E.c(),E.m(t,l)):E&&(E.d(1),E=null),n[7]?N?N.p(n,z):(N=El(n),N.c(),N.m(t,a)):N&&(N.d(1),N=null),n[12]?D?D.p(n,z):(D=Tl(n),D.c(),D.m(t,o)):D&&(D.d(1),D=null),z&2&&p!==(p=n[1].isPinned?"ðŸ“Œ":"ðŸ“")&&ie(h,p),z&2&&g!==(g=n[1].isPinned?"Unpin":"Pin")&&ie(y,g),n[12]?B?B.p(n,z):(B=Cl(n),B.c(),B.m(t,null)):B&&(B.d(1),B=null),z&512&&Ne(t,"top",n[9]+"px"),z&1024&&Ne(t,"left",n[10]+"px")},d(O){O&&v(e),E&&E.d(),N&&N.d(),D&&D.d(),B&&B.d(),n[18](null),C=!1,De(S)}}}function yl(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â¬‡ï¸</span>
					Download`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=H(e,"click",function(){Pn(n[6])&&n[6].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function El(n){let e,t=`<span class="menu-icon svelte-5kwx2s">â†—ï¸</span>
					Forward`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=H(e,"click",function(){Pn(n[7])&&n[7].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function Tl(n){let e,t=`<span class="menu-icon svelte-5kwx2s">âœï¸</span>
					Edit Message`,s,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-5kwx2s")},m(i,l){V(i,e,l),s||(r=H(e,"click",function(){Pn(n[2])&&n[2].apply(this,arguments)}),s=!0)},p(i,l){n=i},d(i){i&&v(e),s=!1,r()}}}function Cl(n){let e,t,s,r=`<span class="menu-icon svelte-5kwx2s">ðŸ—‘ï¸</span>
					Delete Message`,i,l;return{c(){e=k("div"),t=F(),s=k("button"),s.innerHTML=r,this.h()},l(a){e=b(a,"DIV",{class:!0}),P(e).forEach(v),t=M(a),s=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-g8outl"&&(s.innerHTML=r),this.h()},h(){f(e,"class","menu-divider svelte-5kwx2s"),f(s,"class","menu-item delete svelte-5kwx2s")},m(a,o){V(a,e,o),V(a,t,o),V(a,s,o),i||(l=H(s,"click",function(){Pn(n[3])&&n[3].apply(this,arguments)}),i=!0)},p(a,o){n=a},d(a){a&&(v(e),v(t),v(s)),i=!1,l()}}}function Qd(n){let e,t=n[0]&&wl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=wl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function $d(n,e,t){let s,r,i,l,a;Be(n,dn,E=>t(15,a=E));let{message:o}=e,{x:u=0}=e,{y:d=0}=e,{visible:p=!1}=e,{onEdit:h}=e,{onDelete:w}=e,{onPin:g}=e,{onReply:y}=e,{onDownload:A=void 0}=e,{onForward:I=void 0}=e,m;function T(E){Gt.call(this,n,E)}const _=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function C(E){rt[E?"unshift":"push"](()=>{m=E,t(8,m)})}const S=()=>t(0,p=!1);return n.$$set=E=>{"message"in E&&t(1,o=E.message),"x"in E&&t(13,u=E.x),"y"in E&&t(14,d=E.y),"visible"in E&&t(0,p=E.visible),"onEdit"in E&&t(2,h=E.onEdit),"onDelete"in E&&t(3,w=E.onDelete),"onPin"in E&&t(4,g=E.onPin),"onReply"in E&&t(5,y=E.onReply),"onDownload"in E&&t(6,A=E.onDownload),"onForward"in E&&t(7,I=E.onForward)},n.$$.update=()=>{n.$$.dirty&32770&&t(12,s=o.userId===a?.id),n.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),n.$$.dirty&8448&&t(10,i=(()=>{if(!m)return u;const E=m.offsetWidth||200,N=window.innerWidth;return u+E>N?u-E:u})()),n.$$.dirty&16640&&t(9,l=(()=>{if(!m)return d;const E=m.offsetHeight||300,N=window.innerHeight;return d+E>N?d-E:d})())},[p,o,h,w,g,y,A,I,m,l,i,r,s,u,d,a,T,_,C,S]}class eh extends gt{constructor(e){super(),mt(this,e,$d,Qd,pt,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function Al(n,e,t){const s=n.slice();return s[9]=e[t],s}function Sl(n){let e,t,s,r,i="Forward Message",l,a,o="âœ•",u,d,p,h="Choose a channel to forward this message to:",w,g,y,A,I=Ke(n[2]),m=[];for(let T=0;T<I.length;T+=1)m[T]=Dl(Al(n,I,T));return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h3"),r.textContent=i,l=F(),a=k("button"),a.textContent=o,u=F(),d=k("div"),p=k("p"),p.textContent=h,w=F(),g=k("div");for(let T=0;T<m.length;T+=1)m[T].c();this.h()},l(T){e=b(T,"DIV",{class:!0});var _=P(e);t=b(_,"DIV",{class:!0});var C=P(t);s=b(C,"DIV",{class:!0});var S=P(s);r=b(S,"H3",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1xq5ns4"&&(r.textContent=i),l=M(S),a=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-19jqbg1"&&(a.textContent=o),S.forEach(v),u=M(C),d=b(C,"DIV",{class:!0});var E=P(d);p=b(E,"P",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-alvqmp"&&(p.textContent=h),w=M(E),g=b(E,"DIV",{class:!0});var N=P(g);for(let D=0;D<m.length;D+=1)m[D].l(N);N.forEach(v),E.forEach(v),C.forEach(v),_.forEach(v),this.h()},h(){f(r,"class","svelte-70r9o1"),f(a,"class","close-button svelte-70r9o1"),f(s,"class","dialog-header svelte-70r9o1"),f(p,"class","dialog-description svelte-70r9o1"),f(g,"class","channel-list svelte-70r9o1"),f(d,"class","dialog-content svelte-70r9o1"),f(t,"class","dialog svelte-70r9o1"),f(e,"class","dialog-overlay svelte-70r9o1")},m(T,_){V(T,e,_),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(d,w),c(d,g);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(g,null);y||(A=[H(a,"click",n[5]),H(t,"click",it(n[6])),H(e,"click",n[5])],y=!0)},p(T,_){if(_&28){I=Ke(T[2]);let C;for(C=0;C<I.length;C+=1){const S=Al(T,I,C);m[C]?m[C].p(S,_):(m[C]=Dl(S),m[C].c(),m[C].m(g,null))}for(;C<m.length;C+=1)m[C].d(1);m.length=I.length}},d(T){T&&v(e),Gs(m,T),y=!1,De(A)}}}function Il(n){let e,t,s,r,i=n[9].name+"",l,a,o,u;function d(g,y){return g[9].type==="dm"?nh:th}let p=d(n),h=p(n);function w(){return n[7](n[9])}return{c(){e=k("button"),t=k("span"),h.c(),s=F(),r=k("span"),l=J(i),a=F(),this.h()},l(g){e=b(g,"BUTTON",{class:!0});var y=P(e);t=b(y,"SPAN",{class:!0});var A=P(t);h.l(A),A.forEach(v),s=M(y),r=b(y,"SPAN",{class:!0});var I=P(r);l=Z(I,i),I.forEach(v),a=M(y),y.forEach(v),this.h()},h(){f(t,"class","channel-icon svelte-70r9o1"),f(r,"class","channel-name svelte-70r9o1"),f(e,"class","channel-item svelte-70r9o1")},m(g,y){V(g,e,y),c(e,t),h.m(t,null),c(e,s),c(e,r),c(r,l),c(e,a),o||(u=H(e,"click",w),o=!0)},p(g,y){n=g,p!==(p=d(n))&&(h.d(1),h=p(n),h&&(h.c(),h.m(t,null))),y&4&&i!==(i=n[9].name+"")&&ie(l,i)},d(g){g&&v(e),h.d(),o=!1,u()}}}function th(n){let e;return{c(){e=J("#")},l(t){e=Z(t,"#")},m(t,s){V(t,e,s)},d(t){t&&v(e)}}}function nh(n){let e;return{c(){e=J("ðŸ’¬")},l(t){e=Z(t,"ðŸ’¬")},m(t,s){V(t,e,s)},d(t){t&&v(e)}}}function Dl(n){let e,t=n[9].id!==n[3]&&Il(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,r){s[9].id!==s[3]?t?t.p(s,r):(t=Il(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&v(e),t&&t.d(s)}}}function sh(n){let e,t=n[0]&&n[1]&&Sl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]&&s[1]?t?t.p(s,r):(t=Sl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function rh(n,e,t){let s,r,i;Be(n,Yn,h=>t(8,s=h)),Be(n,cn,h=>t(2,r=h)),Be(n,Mn,h=>t(3,i=h));let{visible:l=!1}=e,{message:a=null}=e;function o(h){!a||!s||(s.emit("message",{channelId:h,text:a.text,type:a.type,gifUrl:a.gifUrl,fileUrl:a.fileUrl,fileName:a.fileName,fileSize:a.fileSize,files:a.files}),t(0,l=!1))}function u(){t(0,l=!1)}function d(h){Gt.call(this,n,h)}const p=h=>o(h.id);return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"message"in h&&t(1,a=h.message)},[l,a,r,i,o,u,d,p]}class ih extends gt{constructor(e){super(),mt(this,e,rh,sh,pt,{visible:0,message:1})}}function Nl(n){let e,t,s,r,i,l,a,o="Ã—",u,d,p,h,w,g,y,A,I,m,T,_,C,S;return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),i=J(n[1]),l=F(),a=k("button"),a.textContent=o,u=F(),d=k("div"),p=k("p"),h=J(n[2]),w=F(),g=k("div"),y=k("button"),A=J(n[4]),I=F(),m=k("button"),T=J(n[3]),this.h()},l(E){e=b(E,"DIV",{class:!0});var N=P(e);t=b(N,"DIV",{class:!0});var D=P(t);s=b(D,"DIV",{class:!0});var B=P(s);r=b(B,"H2",{class:!0});var O=P(r);i=Z(O,n[1]),O.forEach(v),l=M(B),a=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-y9ayml"&&(a.textContent=o),B.forEach(v),u=M(D),d=b(D,"DIV",{class:!0});var z=P(d);p=b(z,"P",{class:!0});var L=P(p);h=Z(L,n[2]),L.forEach(v),z.forEach(v),w=M(D),g=b(D,"DIV",{class:!0});var x=P(g);y=b(x,"BUTTON",{class:!0});var R=P(y);A=Z(R,n[4]),R.forEach(v),I=M(x),m=b(x,"BUTTON",{class:!0});var q=P(m);T=Z(q,n[3]),q.forEach(v),x.forEach(v),D.forEach(v),N.forEach(v),this.h()},h(){f(r,"class","svelte-1myntg4"),f(a,"class","close-btn svelte-1myntg4"),f(s,"class","modal-header svelte-1myntg4"),f(p,"class","svelte-1myntg4"),f(d,"class","modal-body svelte-1myntg4"),f(y,"class","cancel-btn svelte-1myntg4"),f(m,"class",_="confirm-btn "+n[5]+" svelte-1myntg4"),f(g,"class","modal-footer svelte-1myntg4"),f(t,"class","modal-content svelte-1myntg4"),f(e,"class","modal-overlay svelte-1myntg4")},m(E,N){V(E,e,N),c(e,t),c(t,s),c(s,r),c(r,i),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(t,w),c(t,g),c(g,y),c(y,A),c(g,I),c(g,m),c(m,T),C||(S=[H(a,"click",n[7]),H(y,"click",n[7]),H(m,"click",n[6]),H(t,"click",it(n[10])),H(e,"click",n[7])],C=!0)},p(E,N){N&2&&ie(i,E[1]),N&4&&ie(h,E[2]),N&16&&ie(A,E[4]),N&8&&ie(T,E[3]),N&32&&_!==(_="confirm-btn "+E[5]+" svelte-1myntg4")&&f(m,"class",_)},d(E){E&&v(e),C=!1,De(S)}}}function lh(n){let e,t=n[0]&&Nl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=Nl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function ah(n,e,t){let{isOpen:s=!1}=e,{title:r="Confirm Action"}=e,{message:i="Are you sure you want to proceed?"}=e,{confirmText:l="Confirm"}=e,{cancelText:a="Cancel"}=e,{variant:o="warning"}=e,{onConfirm:u=()=>{}}=e,{onCancel:d=()=>{}}=e;function p(){u()}function h(){d()}function w(g){Gt.call(this,n,g)}return n.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"title"in g&&t(1,r=g.title),"message"in g&&t(2,i=g.message),"confirmText"in g&&t(3,l=g.confirmText),"cancelText"in g&&t(4,a=g.cancelText),"variant"in g&&t(5,o=g.variant),"onConfirm"in g&&t(8,u=g.onConfirm),"onCancel"in g&&t(9,d=g.onCancel)},[s,r,i,l,a,o,p,h,u,d,w]}class Rn extends gt{constructor(e){super(),mt(this,e,ah,lh,pt,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,variant:5,onConfirm:8,onCancel:9})}}const{window:oh}=Kr;function Rl(n,e,t){const s=n.slice();s[68]=e[t];const r=s[19](s[68].user);s[69]=r;const i=s[33](s[68].replyTo);return s[70]=i,s}function Pl(n,e,t){const s=n.slice();return s[73]=e[t],s[75]=t,s}function Ol(n){let e,t="<span>New Messages</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){f(e,"class","new-messages-divider svelte-zjz65z")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function ch(n){let e,t=n[68].user.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-zjz65z"),Ne(e,"background-color",n[20](n[68].user))},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user.charAt(0).toUpperCase()+"")&&ie(s,t),i[0]&1&&Ne(e,"background-color",r[20](r[68].user))},d(r){r&&v(e)}}}function uh(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[69].profilePicture)||f(e,"src",t),f(e,"alt",s=n[68].user),f(e,"class","avatar svelte-zjz65z")},m(r,i){V(r,e,i)},p(r,i){i[0]&1&&!Ye(e.src,t=r[69].profilePicture)&&f(e,"src",t),i[0]&1&&s!==(s=r[68].user)&&f(e,"alt",s)},d(r){r&&v(e)}}}function fh(n){let e,t=n[68].user+"",s;return{c(){e=k("span"),s=J(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&1&&t!==(t=r[68].user+"")&&ie(s,t)},d(r){r&&v(e)}}}function dh(n){let e,t=n[68].user+"",s,r,i;function l(){return n[44](n[69])}return{c(){e=k("button"),s=J(t),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var o=P(e);s=Z(o,t),o.forEach(v),this.h()},h(){f(e,"class","username svelte-zjz65z")},m(a,o){V(a,e,o),c(e,s),r||(i=H(e,"click",l),r=!0)},p(a,o){n=a,o[0]&1&&t!==(t=n[68].user+"")&&ie(s,t)},d(a){a&&v(e),r=!1,i()}}}function Ml(n){let e,t="ðŸ“Œ";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=b(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){f(e,"class","pin-badge svelte-zjz65z"),f(e,"title","Pinned message")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function Fl(n){let e,t="(edited)";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=b(s,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){f(e,"class","edited-badge svelte-zjz65z"),f(e,"title","Edited")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function zl(n){let e,t,s,r,i,l=n[70].user+"",a,o,u,d=n[70].text.substring(0,100)+"",p,h=n[70].text.length>100?"...":"",w,g,y;function A(){return n[45](n[70])}return{c(){e=k("div"),t=k("div"),s=F(),r=k("div"),i=k("span"),a=J(l),o=F(),u=k("span"),p=J(d),w=J(h),this.h()},l(I){e=b(I,"DIV",{class:!0});var m=P(e);t=b(m,"DIV",{class:!0}),P(t).forEach(v),s=M(m),r=b(m,"DIV",{class:!0});var T=P(r);i=b(T,"SPAN",{class:!0});var _=P(i);a=Z(_,l),_.forEach(v),o=M(T),u=b(T,"SPAN",{class:!0});var C=P(u);p=Z(C,d),w=Z(C,h),C.forEach(v),T.forEach(v),m.forEach(v),this.h()},h(){f(t,"class","reply-line svelte-zjz65z"),f(i,"class","reply-username svelte-zjz65z"),f(u,"class","reply-text svelte-zjz65z"),f(r,"class","reply-content svelte-zjz65z"),f(e,"class","reply-preview svelte-zjz65z")},m(I,m){V(I,e,m),c(e,t),c(e,s),c(e,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(u,w),g||(y=H(e,"click",A),g=!0)},p(I,m){n=I,m[0]&1&&l!==(l=n[70].user+"")&&ie(a,l),m[0]&1&&d!==(d=n[70].text.substring(0,100)+"")&&ie(p,d),m[0]&1&&h!==(h=n[70].text.length>100?"...":"")&&ie(w,h)},d(I){I&&v(e),g=!1,y()}}}function hh(n){let e;function t(i,l){return i[68].type==="gif"&&i[68].gifUrl?vh:i[68].type==="file"&&(i[68].fileUrl||i[68].files)?mh:gh}let s=t(n),r=s(n);return{c(){e=k("div"),r.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var l=P(e);r.l(l),l.forEach(v),this.h()},h(){f(e,"class","message-content")},m(i,l){V(i,e,l),r.m(e,null)},p(i,l){s===(s=t(i))&&r?r.p(i,l):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&v(e),r.d()}}}function ph(n){let e,t,s,r,i,l="Cancel",a,o,u="Save",d,p;function h(...g){return n[47](n[68],...g)}function w(){return n[48](n[68])}return{c(){e=k("div"),t=k("textarea"),s=F(),r=k("div"),i=k("button"),i.textContent=l,a=F(),o=k("button"),o.textContent=u,this.h()},l(g){e=b(g,"DIV",{class:!0});var y=P(e);t=b(y,"TEXTAREA",{class:!0,rows:!0}),P(t).forEach(v),s=M(y),r=b(y,"DIV",{class:!0});var A=P(r);i=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1czerce"&&(i.textContent=l),a=M(A),o=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-w3glyi"&&(o.textContent=u),A.forEach(v),y.forEach(v),this.h()},h(){f(t,"class","edit-textarea svelte-zjz65z"),f(t,"rows","3"),f(i,"class","edit-cancel svelte-zjz65z"),f(o,"class","edit-save svelte-zjz65z"),f(r,"class","edit-actions svelte-zjz65z"),f(e,"class","edit-mode svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),st(t,n[10]),c(e,s),c(e,r),c(r,i),c(r,a),c(r,o),d||(p=[H(t,"input",n[46]),H(t,"keydown",h),H(i,"click",n[25]),H(o,"click",w)],d=!0)},p(g,y){n=g,y[0]&1024&&st(t,n[10])},d(g){g&&v(e),d=!1,De(p)}}}function gh(n){let e,t,s=js(n[68].text)+"";return{c(){e=k("div"),t=new Ro(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=P(e);t=No(i,!1),i.forEach(v),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){V(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=js(r[68].text)+"")&&t.p(s)},d(r){r&&v(e)}}}function mh(n){let e,t;function s(a,o){if(a[68].files&&a[68].files.length>1)return bh;if(a[68].fileUrl)return _h}let r=s(n),i=r&&r(n),l=n[68].text&&(n[68].files?n[68].text!==`Shared ${n[68].files.length} files`:n[68].text!==`Shared: ${n[68].fileName}`)&&Ul(n);return{c(){i&&i.c(),e=F(),l&&l.c(),t=Re()},l(a){i&&i.l(a),e=M(a),l&&l.l(a),t=Re()},m(a,o){i&&i.m(a,o),V(a,e,o),l&&l.m(a,o),V(a,t,o)},p(a,o){r===(r=s(a))&&i?i.p(a,o):(i&&i.d(1),i=r&&r(a),i&&(i.c(),i.m(e.parentNode,e))),a[68].text&&(a[68].files?a[68].text!==`Shared ${a[68].files.length} files`:a[68].text!==`Shared: ${a[68].fileName}`)?l?l.p(a,o):(l=Ul(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){a&&(v(e),v(t)),i&&i.d(a),l&&l.d(a)}}}function vh(n){let e,t,s,r;return{c(){e=k("img"),this.h()},l(i){e=b(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Ye(e.src,t=n[68].gifUrl)||f(e,"src",t),f(e,"alt","GIF"),f(e,"class",s="gif "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(e,"data-spoiler",r=n[68].isSpoiler?"true":"false")},m(i,l){V(i,e,l)},p(i,l){l[0]&1&&!Ye(e.src,t=i[68].gifUrl)&&f(e,"src",t),l[0]&1&&s!==(s="gif "+(i[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(e,"class",s),l[0]&1&&r!==(r=i[68].isSpoiler?"true":"false")&&f(e,"data-spoiler",r)},d(i){i&&v(e)}}}function _h(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!di(a[68].fileName)),e?yh:(t==null&&(t=!!_c(a[68].fileName)),t?wh:kh)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Re()},l(a){l.l(a),s=Re()},m(a,o){l.m(a,o),V(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&v(s),l.d(a)}}}function bh(n){let e,t=Ke(n[68].files.slice(0,4)),s=[];for(let r=0;r<t.length;r+=1)s[r]=xl(Pl(n,t,r));return{c(){e=k("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var i=P(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(v),this.h()},h(){f(e,"class","files-gallery svelte-zjz65z"),he(e,"has-more",n[68].files.length>4)},m(r,i){V(r,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(r,i){if(i[0]&1|i[1]&272){t=Ke(r[68].files.slice(0,4));let l;for(l=0;l<t.length;l+=1){const a=Pl(r,t,l);s[l]?s[l].p(a,i):(s[l]=xl(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}i[0]&1&&he(e,"has-more",r[68].files.length>4)},d(r){r&&v(e),Gs(s,r)}}}function kh(n){let e,t,s=En(n[68].fileName)+"",r,i,l,a,o=n[68].fileName+"",u,d,p,h=yn(n[68].fileSize)+"",w,g,y;return{c(){e=k("a"),t=k("span"),r=J(s),i=F(),l=k("div"),a=k("span"),u=J(o),d=F(),p=k("span"),w=J(h),this.h()},l(A){e=b(A,"A",{href:!0,download:!0,class:!0});var I=P(e);t=b(I,"SPAN",{class:!0});var m=P(t);r=Z(m,s),m.forEach(v),i=M(I),l=b(I,"DIV",{class:!0});var T=P(l);a=b(T,"SPAN",{class:!0});var _=P(a);u=Z(_,o),_.forEach(v),d=M(T),p=b(T,"SPAN",{class:!0});var C=P(p);w=Z(C,h),C.forEach(v),T.forEach(v),I.forEach(v),this.h()},h(){f(t,"class","file-icon svelte-zjz65z"),f(a,"class","file-name svelte-zjz65z"),f(p,"class","file-size svelte-zjz65z"),f(l,"class","file-info svelte-zjz65z"),f(e,"href",g=ct(n[68].fileUrl)),f(e,"download",y=n[68].fileName),f(e,"class","file-attachment svelte-zjz65z")},m(A,I){V(A,e,I),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,w)},p(A,I){I[0]&1&&s!==(s=En(A[68].fileName)+"")&&ie(r,s),I[0]&1&&o!==(o=A[68].fileName+"")&&ie(u,o),I[0]&1&&h!==(h=yn(A[68].fileSize)+"")&&ie(w,h),I[0]&1&&g!==(g=ct(A[68].fileUrl))&&f(e,"href",g),I[0]&1&&y!==(y=A[68].fileName)&&f(e,"download",y)},d(A){A&&v(e)}}}function wh(n){let e,t,s,r,i,l,a,o,u,d,p,h=En(n[68].fileName)+"",w,g,y=n[68].fileName+"",A,I,m,T,_=yn(n[68].fileSize)+"",C,S,E,N,D,B;function O(...L){return n[53](n[68],...L)}function z(...L){return n[54](n[68],...L)}return{c(){e=k("div"),t=k("video"),s=k("source"),l=J(`\r
									Your browser does not support the video tag.`),u=F(),d=k("a"),p=k("span"),w=J(h),g=F(),A=J(y),I=F(),m=k("span"),T=J("("),C=J(_),S=J(")"),this.h()},l(L){e=b(L,"DIV",{class:!0});var x=P(e);t=b(x,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var R=P(t);s=b(R,"SOURCE",{src:!0,type:!0}),l=Z(R,`\r
									Your browser does not support the video tag.`),R.forEach(v),u=M(x),d=b(x,"A",{href:!0,download:!0,class:!0});var q=P(d);p=b(q,"SPAN",{class:!0});var Y=P(p);w=Z(Y,h),Y.forEach(v),g=M(q),A=Z(q,y),I=M(q),m=b(q,"SPAN",{class:!0});var j=P(m);T=Z(j,"("),C=Z(j,_),S=Z(j,")"),j.forEach(v),q.forEach(v),x.forEach(v),this.h()},h(){Ye(s.src,r=ct(n[68].fileUrl))||f(s,"src",r),f(s,"type",i="video/"+n[68].fileName?.split(".").pop()),t.controls=!0,f(t,"class",a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",o=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(p,"class","file-icon svelte-zjz65z"),f(m,"class","file-size svelte-zjz65z"),f(d,"href",E=ct(n[68].fileUrl)),f(d,"download",N=n[68].fileName),f(d,"class","video-download-link svelte-zjz65z"),f(e,"class","video-container svelte-zjz65z")},m(L,x){V(L,e,x),c(e,t),c(t,s),c(t,l),c(e,u),c(e,d),c(d,p),c(p,w),c(d,g),c(d,A),c(d,I),c(d,m),c(m,T),c(m,C),c(m,S),D||(B=[H(t,"click",O),H(t,"contextmenu",z)],D=!0)},p(L,x){n=L,x[0]&1&&!Ye(s.src,r=ct(n[68].fileUrl))&&f(s,"src",r),x[0]&1&&i!==(i="video/"+n[68].fileName?.split(".").pop())&&f(s,"type",i),x[0]&1&&a!==(a="inline-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",a),x[0]&1&&o!==(o=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",o),x[0]&1&&h!==(h=En(n[68].fileName)+"")&&ie(w,h),x[0]&1&&y!==(y=n[68].fileName+"")&&ie(A,y),x[0]&1&&_!==(_=yn(n[68].fileSize)+"")&&ie(C,_),x[0]&1&&E!==(E=ct(n[68].fileUrl))&&f(d,"href",E),x[0]&1&&N!==(N=n[68].fileName)&&f(d,"download",N)},d(L){L&&v(e),D=!1,De(B)}}}function yh(n){let e,t,s,r,i,l,a,o,u,d=En(n[68].fileName)+"",p,h,w=n[68].fileName+"",g,y,A,I,m=yn(n[68].fileSize)+"",T,_,C,S,E,N;function D(...O){return n[51](n[68],...O)}function B(...O){return n[52](n[68],...O)}return{c(){e=k("div"),t=k("img"),a=F(),o=k("a"),u=k("span"),p=J(d),h=F(),g=J(w),y=F(),A=k("span"),I=J("("),T=J(m),_=J(")"),this.h()},l(O){e=b(O,"DIV",{class:!0});var z=P(e);t=b(z,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(z),o=b(z,"A",{href:!0,download:!0,class:!0});var L=P(o);u=b(L,"SPAN",{class:!0});var x=P(u);p=Z(x,d),x.forEach(v),h=M(L),g=Z(L,w),y=M(L),A=b(L,"SPAN",{class:!0});var R=P(A);I=Z(R,"("),T=Z(R,m),_=Z(R,")"),R.forEach(v),L.forEach(v),z.forEach(v),this.h()},h(){Ye(t.src,s=ct(n[68].fileUrl))||f(t,"src",s),f(t,"alt",r=n[68].fileName),f(t,"class",i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(u,"class","file-icon svelte-zjz65z"),f(A,"class","file-size svelte-zjz65z"),f(o,"href",C=ct(n[68].fileUrl)),f(o,"download",S=n[68].fileName),f(o,"class","image-download-link svelte-zjz65z"),f(e,"class","image-container svelte-zjz65z")},m(O,z){V(O,e,z),c(e,t),c(e,a),c(e,o),c(o,u),c(u,p),c(o,h),c(o,g),c(o,y),c(o,A),c(A,I),c(A,T),c(A,_),E||(N=[H(t,"click",D),H(t,"contextmenu",B)],E=!0)},p(O,z){n=O,z[0]&1&&!Ye(t.src,s=ct(n[68].fileUrl))&&f(t,"src",s),z[0]&1&&r!==(r=n[68].fileName)&&f(t,"alt",r),z[0]&1&&i!==(i="inline-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),z[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),z[0]&1&&d!==(d=En(n[68].fileName)+"")&&ie(p,d),z[0]&1&&w!==(w=n[68].fileName+"")&&ie(g,w),z[0]&1&&m!==(m=yn(n[68].fileSize)+"")&&ie(T,m),z[0]&1&&C!==(C=ct(n[68].fileUrl))&&f(o,"href",C),z[0]&1&&S!==(S=n[68].fileName)&&f(o,"download",S)},d(O){O&&v(e),E=!1,De(N)}}}function Eh(n){let e,t,s=En(n[73].fileName)+"",r,i,l,a,o=n[73].fileName+"",u,d,p,h,w=yn(n[73].fileSize)+"",g,y,A,I,m;return{c(){e=k("a"),t=k("div"),r=J(s),i=F(),l=k("div"),a=k("span"),u=J(o),d=F(),p=k("span"),h=J("("),g=J(w),y=J(")"),A=F(),this.h()},l(T){e=b(T,"A",{href:!0,download:!0,class:!0});var _=P(e);t=b(_,"DIV",{class:!0});var C=P(t);r=Z(C,s),C.forEach(v),i=M(_),l=b(_,"DIV",{class:!0});var S=P(l);a=b(S,"SPAN",{class:!0});var E=P(a);u=Z(E,o),E.forEach(v),d=M(S),p=b(S,"SPAN",{class:!0});var N=P(p);h=Z(N,"("),g=Z(N,w),y=Z(N,")"),N.forEach(v),S.forEach(v),A=M(_),_.forEach(v),this.h()},h(){f(t,"class","gallery-file-icon-large svelte-zjz65z"),f(a,"class","file-name-truncate svelte-zjz65z"),f(p,"class","file-size-small svelte-zjz65z"),f(l,"class","gallery-file-overlay svelte-zjz65z"),f(e,"href",I=ct(n[73].fileUrl)),f(e,"download",m=n[73].fileName),f(e,"class","gallery-file-item file-link svelte-zjz65z")},m(T,_){V(T,e,_),c(e,t),c(t,r),c(e,i),c(e,l),c(l,a),c(a,u),c(l,d),c(l,p),c(p,h),c(p,g),c(p,y),c(e,A)},p(T,_){_[0]&1&&s!==(s=En(T[73].fileName)+"")&&ie(r,s),_[0]&1&&o!==(o=T[73].fileName+"")&&ie(u,o),_[0]&1&&w!==(w=yn(T[73].fileSize)+"")&&ie(g,w),_[0]&1&&I!==(I=ct(T[73].fileUrl))&&f(e,"href",I),_[0]&1&&m!==(m=T[73].fileName)&&f(e,"download",m)},d(T){T&&v(e)}}}function Th(n){let e,t,s,r,i,l,a,o,u,d;function p(...w){return n[50](n[73],...w)}let h=n[75]===3&&n[68].files.length>4&&Bl(n);return{c(){e=k("div"),t=k("video"),s=k("source"),a=F(),h&&h.c(),o=F(),this.h()},l(w){e=b(w,"DIV",{class:!0});var g=P(e);t=b(g,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var y=P(t);s=b(y,"SOURCE",{src:!0}),y.forEach(v),a=M(g),h&&h.l(g),o=M(g),g.forEach(v),this.h()},h(){Ye(s.src,r=ct(n[73].fileUrl))||f(s,"src",r),f(t,"class",i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(w,g){V(w,e,g),c(e,t),c(t,s),c(e,a),h&&h.m(e,null),c(e,o),u||(d=H(t,"click",p),u=!0)},p(w,g){n=w,g[0]&1&&!Ye(s.src,r=ct(n[73].fileUrl))&&f(s,"src",r),g[0]&1&&i!==(i="gallery-file-video "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=Bl(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(w){w&&v(e),h&&h.d(),u=!1,d()}}}function Ch(n){let e,t,s,r,i,l,a,o,u,d;function p(...w){return n[49](n[68],n[73],...w)}let h=n[75]===3&&n[68].files.length>4&&Ll(n);return{c(){e=k("div"),t=k("img"),a=F(),h&&h.c(),o=F(),this.h()},l(w){e=b(w,"DIV",{class:!0});var g=P(e);t=b(g,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),a=M(g),h&&h.l(g),o=M(g),g.forEach(v),this.h()},h(){Ye(t.src,s=ct(n[73].fileUrl))||f(t,"src",s),f(t,"alt",r=n[73].fileName),f(t,"class",i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z"),f(t,"data-spoiler",l=n[68].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-zjz65z"),he(e,"last-item",n[75]===3&&n[68].files.length>4)},m(w,g){V(w,e,g),c(e,t),c(e,a),h&&h.m(e,null),c(e,o),u||(d=H(t,"click",p),u=!0)},p(w,g){n=w,g[0]&1&&!Ye(t.src,s=ct(n[73].fileUrl))&&f(t,"src",s),g[0]&1&&r!==(r=n[73].fileName)&&f(t,"alt",r),g[0]&1&&i!==(i="gallery-file-image "+(n[68].isSpoiler?"spoiler":"")+" svelte-zjz65z")&&f(t,"class",i),g[0]&1&&l!==(l=n[68].isSpoiler?"true":"false")&&f(t,"data-spoiler",l),n[75]===3&&n[68].files.length>4?h?h.p(n,g):(h=Ll(n),h.c(),h.m(e,o)):h&&(h.d(1),h=null),g[0]&1&&he(e,"last-item",n[75]===3&&n[68].files.length>4)},d(w){w&&v(e),h&&h.d(),u=!1,d()}}}function Bl(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),s=J("+"),i=J(r),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=P(e);t=b(a,"SPAN",{class:!0});var o=P(t);s=Z(o,"+"),i=Z(o,r),o.forEach(v),a.forEach(v),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){V(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&ie(i,r)},d(l){l&&v(e)}}}function Ll(n){let e,t,s,r=n[68].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),s=J("+"),i=J(r),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=P(e);t=b(a,"SPAN",{class:!0});var o=P(t);s=Z(o,"+"),i=Z(o,r),o.forEach(v),a.forEach(v),this.h()},h(){f(t,"class","more-count svelte-zjz65z"),f(e,"class","more-overlay svelte-zjz65z")},m(l,a){V(l,e,a),c(e,t),c(t,s),c(t,i)},p(l,a){a[0]&1&&r!==(r=l[68].files.length-4+"")&&ie(i,r)},d(l){l&&v(e)}}}function xl(n){let e,t,s;function r(a,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!di(a[73].fileName)),e?Ch:(t==null&&(t=!!_c(a[73].fileName)),t?Th:Eh)}let i=r(n,[-1,-1,-1]),l=i(n);return{c(){l.c(),s=Re()},l(a){l.l(a),s=Re()},m(a,o){l.m(a,o),V(a,s,o)},p(a,o){i===(i=r(a,o))&&l?l.p(a,o):(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&v(s),l.d(a)}}}function Ul(n){let e,t,s=js(n[68].text)+"";return{c(){e=k("div"),t=new Ro(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=P(e);t=No(i,!1),i.forEach(v),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-zjz65z")},m(r,i){V(r,e,i),t.m(s,e)},p(r,i){i[0]&1&&s!==(s=js(r[68].text)+"")&&t.p(s)},d(r){r&&v(e)}}}function ql(n,e){let t,s,r,i,l,a,o,u,d,p,h,w,g=Wl(e[68].timestamp)+"",y,A,I,m,T,_,C,S=e[1]===e[68].id&&Ol();function E(G,W){return G[69]?.profilePicture?uh:ch}let N=E(e),D=N(e);function B(G,W){return G[69]?dh:fh}let O=B(e),z=O(e),L=e[68].isPinned&&Ml(),x=e[68].isEdited&&Fl(),R=e[70]&&zl(e);function q(G,W){return G[9]===G[68].id?ph:hh}let Y=q(e),j=Y(e);function K(...G){return e[55](e[68],...G)}return{key:n,first:null,c(){t=Re(),S&&S.c(),s=F(),r=k("div"),i=k("div"),D.c(),l=F(),a=k("div"),o=k("div"),u=k("div"),z.c(),d=F(),L&&L.c(),p=F(),x&&x.c(),h=F(),w=k("span"),y=J(g),A=F(),R&&R.c(),I=F(),j.c(),this.h()},l(G){t=Re(),S&&S.l(G),s=M(G),r=b(G,"DIV",{id:!0,class:!0});var W=P(r);i=b(W,"DIV",{class:!0});var $=P(i);D.l($),$.forEach(v),l=M(W),a=b(W,"DIV",{class:!0});var te=P(a);o=b(te,"DIV",{class:!0});var le=P(o);u=b(le,"DIV",{class:!0});var se=P(u);z.l(se),d=M(se),L&&L.l(se),p=M(se),x&&x.l(se),se.forEach(v),h=M(le),w=b(le,"SPAN",{class:!0});var de=P(w);y=Z(de,g),de.forEach(v),le.forEach(v),A=M(te),R&&R.l(te),I=M(te),j.l(te),te.forEach(v),W.forEach(v),this.h()},h(){f(i,"class","message-avatar svelte-zjz65z"),f(u,"class","header-left svelte-zjz65z"),f(w,"class","timestamp svelte-zjz65z"),f(o,"class","message-header svelte-zjz65z"),f(a,"class","message-body svelte-zjz65z"),f(r,"id",m="message-"+e[68].id),f(r,"class",T="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z"),this.first=t},m(G,W){V(G,t,W),S&&S.m(G,W),V(G,s,W),V(G,r,W),c(r,i),D.m(i,null),c(r,l),c(r,a),c(a,o),c(o,u),z.m(u,null),c(u,d),L&&L.m(u,null),c(u,p),x&&x.m(u,null),c(o,h),c(o,w),c(w,y),c(a,A),R&&R.m(a,null),c(a,I),j.m(a,null),_||(C=H(r,"contextmenu",K),_=!0)},p(G,W){e=G,e[1]===e[68].id?S||(S=Ol(),S.c(),S.m(s.parentNode,s)):S&&(S.d(1),S=null),N===(N=E(e))&&D?D.p(e,W):(D.d(1),D=N(e),D&&(D.c(),D.m(i,null))),O===(O=B(e))&&z?z.p(e,W):(z.d(1),z=O(e),z&&(z.c(),z.m(u,d))),e[68].isPinned?L||(L=Ml(),L.c(),L.m(u,p)):L&&(L.d(1),L=null),e[68].isEdited?x||(x=Fl(),x.c(),x.m(u,null)):x&&(x.d(1),x=null),W[0]&1&&g!==(g=Wl(e[68].timestamp)+"")&&ie(y,g),e[70]?R?R.p(e,W):(R=zl(e),R.c(),R.m(a,I)):R&&(R.d(1),R=null),Y===(Y=q(e))&&j?j.p(e,W):(j.d(1),j=Y(e),j&&(j.c(),j.m(a,null))),W[0]&1&&m!==(m="message-"+e[68].id)&&f(r,"id",m),W[0]&16385&&T!==(T="message "+(e[68].isPinned?"pinned":"")+" "+(e[14]===e[68].id?"highlighted":"")+" svelte-zjz65z")&&f(r,"class",T)},d(G){G&&(v(t),v(s),v(r)),S&&S.d(G),D.d(),z.d(),L&&L.d(),x&&x.d(),R&&R.d(),j.d(),_=!1,C()}}}function jl(n){let e,t,s;function r(l){n[58](l)}let i={message:n[8],x:n[6],y:n[7],onEdit:n[23],onDelete:n[26],onPin:n[28],onReply:n[29],onDownload:n[30],onForward:n[31]};return n[5]!==void 0&&(i.visible=n[5]),e=new eh({props:i}),rt.push(()=>Lt(e,"visible",r)),{c(){$e(e.$$.fragment)},l(l){Qe(e.$$.fragment,l)},m(l,a){Je(e,l,a),s=!0},p(l,a){const o={};a[0]&256&&(o.message=l[8]),a[0]&64&&(o.x=l[6]),a[0]&128&&(o.y=l[7]),!t&&a[0]&32&&(t=!0,o.visible=l[5],Bt(()=>t=!1)),e.$set(o)},i(l){s||(Ae(e.$$.fragment,l),s=!0)},o(l){Oe(e.$$.fragment,l),s=!1},d(l){Ze(e,l)}}}function Vl(n){let e,t,s,r,i,l,a="âœ•",o,u,d,p,h,w=n[17].length>1&&Hl(n);return{c(){e=k("div"),t=k("img"),r=F(),w&&w.c(),i=F(),l=k("button"),l.textContent=a,o=F(),u=k("a"),d=J("Open in new tab"),this.h()},l(g){e=b(g,"DIV",{class:!0});var y=P(e);t=b(y,"IMG",{src:!0,alt:!0,class:!0}),r=M(y),w&&w.l(y),i=M(y),l=b(y,"BUTTON",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-cyanf1"&&(l.textContent=a),o=M(y),u=b(y,"A",{href:!0,target:!0,rel:!0,class:!0});var A=P(u);d=Z(A,"Open in new tab"),A.forEach(v),y.forEach(v),this.h()},h(){Ye(t.src,s=n[15])||f(t,"src",s),f(t,"alt","Enlarged"),f(t,"class","enlarged-image svelte-zjz65z"),f(l,"class","close-modal svelte-zjz65z"),f(u,"href",n[15]),f(u,"target","_blank"),f(u,"rel","noopener noreferrer"),f(u,"class","open-new-tab svelte-zjz65z"),f(e,"class","image-modal svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),c(e,r),w&&w.m(e,null),c(e,i),c(e,l),c(e,o),c(e,u),c(u,d),p||(h=[H(t,"click",it(n[43])),H(l,"click",n[36]),H(e,"click",n[36])],p=!0)},p(g,y){y[0]&32768&&!Ye(t.src,s=g[15])&&f(t,"src",s),g[17].length>1?w?w.p(g,y):(w=Hl(g),w.c(),w.m(e,i)):w&&(w.d(1),w=null),y[0]&32768&&f(u,"href",g[15])},d(g){g&&v(e),w&&w.d(),p=!1,De(h)}}}function Hl(n){let e,t="â€¹",s,r,i="â€º",l,a,o=n[18]+1+"",u,d,p=n[17].length+"",h,w,g;return{c(){e=k("button"),e.textContent=t,s=F(),r=k("button"),r.textContent=i,l=F(),a=k("div"),u=J(o),d=J(" / "),h=J(p),this.h()},l(y){e=b(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-c4iawu"&&(e.textContent=t),s=M(y),r=b(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(r)!=="svelte-1gn22tr"&&(r.textContent=i),l=M(y),a=b(y,"DIV",{class:!0});var A=P(a);u=Z(A,o),d=Z(A," / "),h=Z(A,p),A.forEach(v),this.h()},h(){f(e,"class","nav-arrow nav-prev svelte-zjz65z"),f(e,"title","Previous (â†)"),f(r,"class","nav-arrow nav-next svelte-zjz65z"),f(r,"title","Next (â†’)"),f(a,"class","image-counter svelte-zjz65z")},m(y,A){V(y,e,A),V(y,s,A),V(y,r,A),V(y,l,A),V(y,a,A),c(a,u),c(a,d),c(a,h),w||(g=[H(e,"click",it(n[62])),H(r,"click",it(n[63]))],w=!0)},p(y,A){A[0]&262144&&o!==(o=y[18]+1+"")&&ie(u,o),A[0]&131072&&p!==(p=y[17].length+"")&&ie(h,p)},d(y){y&&(v(e),v(s),v(r),v(l),v(a)),w=!1,De(g)}}}function Gl(n){let e,t,s,r,i,l,a,o="âœ•",u,d,p,h,w;return{c(){e=k("div"),t=k("video"),s=k("source"),i=J(`\r
			Your browser does not support the video tag.`),l=F(),a=k("button"),a.textContent=o,u=F(),d=k("a"),p=J("Open in new tab"),this.h()},l(g){e=b(g,"DIV",{class:!0});var y=P(e);t=b(y,"VIDEO",{class:!0});var A=P(t);s=b(A,"SOURCE",{src:!0}),i=Z(A,`\r
			Your browser does not support the video tag.`),A.forEach(v),l=M(y),a=b(y,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-yc21b"&&(a.textContent=o),u=M(y),d=b(y,"A",{href:!0,target:!0,rel:!0,class:!0});var I=P(d);p=Z(I,"Open in new tab"),I.forEach(v),y.forEach(v),this.h()},h(){Ye(s.src,r=n[16])||f(s,"src",r),t.controls=!0,t.autoplay=!0,f(t,"class","enlarged-video svelte-zjz65z"),f(a,"class","close-modal svelte-zjz65z"),f(d,"href",n[16]),f(d,"target","_blank"),f(d,"rel","noopener noreferrer"),f(d,"class","open-new-tab svelte-zjz65z"),f(e,"class","video-modal svelte-zjz65z")},m(g,y){V(g,e,y),c(e,t),c(t,s),c(t,i),c(e,l),c(e,a),c(e,u),c(e,d),c(d,p),h||(w=[H(t,"click",it(n[42])),H(a,"click",n[40]),H(e,"click",n[40])],h=!0)},p(g,y){y[0]&65536&&!Ye(s.src,r=g[16])&&f(s,"src",r),y[0]&65536&&f(d,"href",g[16])},d(g){g&&v(e),h=!1,De(w)}}}function Ah(n){let e=[],t=new Map,s,r,i,l,a,o,u,d,p,h,w,g,y,A,I,m,T,_=Ke(n[0]);const C=R=>R[68].id;for(let R=0;R<_.length;R+=1){let q=Rl(n,_,R),Y=C(q);t.set(Y,e[R]=ql(Y,q))}function S(R){n[56](R)}function E(R){n[57](R)}let N={isOwnProfile:n[4]};n[2]!==void 0&&(N.isOpen=n[2]),n[3]!==void 0&&(N.user=n[3]),r=new fi({props:N}),rt.push(()=>Lt(r,"isOpen",S)),rt.push(()=>Lt(r,"user",E));let D=n[8]&&jl(n);function B(R){n[59](R)}function O(R){n[60](R)}let z={};n[12]!==void 0&&(z.visible=n[12]),n[13]!==void 0&&(z.message=n[13]),u=new ih({props:z}),rt.push(()=>Lt(u,"visible",B)),rt.push(()=>Lt(u,"message",O)),w=new Rn({props:{isOpen:n[11],title:"Delete Message",message:"Are you sure you want to delete this message?",confirmText:"Delete",variant:"danger",onConfirm:n[27],onCancel:n[61]}});let L=n[15]&&Vl(n),x=n[16]&&Gl(n);return{c(){for(let R=0;R<e.length;R+=1)e[R].c();s=F(),$e(r.$$.fragment),a=F(),D&&D.c(),o=F(),$e(u.$$.fragment),h=F(),$e(w.$$.fragment),g=F(),L&&L.c(),y=F(),x&&x.c(),A=Re()},l(R){for(let q=0;q<e.length;q+=1)e[q].l(R);s=M(R),Qe(r.$$.fragment,R),a=M(R),D&&D.l(R),o=M(R),Qe(u.$$.fragment,R),h=M(R),Qe(w.$$.fragment,R),g=M(R),L&&L.l(R),y=M(R),x&&x.l(R),A=Re()},m(R,q){for(let Y=0;Y<e.length;Y+=1)e[Y]&&e[Y].m(R,q);V(R,s,q),Je(r,R,q),V(R,a,q),D&&D.m(R,q),V(R,o,q),Je(u,R,q),V(R,h,q),Je(w,R,q),V(R,g,q),L&&L.m(R,q),V(R,y,q),x&&x.m(R,q),V(R,A,q),I=!0,m||(T=H(oh,"keydown",n[38]),m=!0)},p(R,q){q[0]&58213891|q[1]&286&&(_=Ke(R[0]),e=tn(e,q,C,1,R,_,t,s.parentNode,en,ql,s,Rl));const Y={};q[0]&16&&(Y.isOwnProfile=R[4]),!i&&q[0]&4&&(i=!0,Y.isOpen=R[2],Bt(()=>i=!1)),!l&&q[0]&8&&(l=!0,Y.user=R[3],Bt(()=>l=!1)),r.$set(Y),R[8]?D?(D.p(R,q),q[0]&256&&Ae(D,1)):(D=jl(R),D.c(),Ae(D,1),D.m(o.parentNode,o)):D&&(Hn(),Oe(D,1,1,()=>{D=null}),Gn());const j={};!d&&q[0]&4096&&(d=!0,j.visible=R[12],Bt(()=>d=!1)),!p&&q[0]&8192&&(p=!0,j.message=R[13],Bt(()=>p=!1)),u.$set(j);const K={};q[0]&2048&&(K.isOpen=R[11]),q[0]&2048&&(K.onCancel=R[61]),w.$set(K),R[15]?L?L.p(R,q):(L=Vl(R),L.c(),L.m(y.parentNode,y)):L&&(L.d(1),L=null),R[16]?x?x.p(R,q):(x=Gl(R),x.c(),x.m(A.parentNode,A)):x&&(x.d(1),x=null)},i(R){I||(Ae(r.$$.fragment,R),Ae(D),Ae(u.$$.fragment,R),Ae(w.$$.fragment,R),I=!0)},o(R){Oe(r.$$.fragment,R),Oe(D),Oe(u.$$.fragment,R),Oe(w.$$.fragment,R),I=!1},d(R){R&&(v(s),v(a),v(o),v(h),v(g),v(y),v(A));for(let q=0;q<e.length;q+=1)e[q].d(R);Ze(r,R),D&&D.d(R),Ze(u,R),Ze(w,R),L&&L.d(R),x&&x.d(R),m=!1,T()}}}function Wl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function yn(n){return n?n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB":""}function ct(n){return n?n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:")?n:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${n}`:""}function En(n){if(!n)return"ðŸ“Ž";const e=n.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function di(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function _c(n){if(!n)return!1;const e=n.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function Sh(n,e,t){let s,r,i;Be(n,Mn,ne=>t(65,s=ne)),Be(n,dn,ne=>t(66,r=ne)),Be(n,Vt,ne=>t(67,i=ne));let{messages:l}=e,{onReply:a=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,d=null,p=!1,h=!1,w=0,g=0,y=null,A=null,I="",m=!1,T=null;function _(ne){return i.find(Ee=>Ee.username===ne)}function C(ne){return _(ne)?.color||"var(--status-offline)"}function S(ne){t(3,d=ne),t(4,p=ne.id===r?.id),t(2,u=!0)}function E(ne,Ee){ne.preventDefault(),t(8,y=Ee),t(6,w=ne.clientX),t(7,g=ne.clientY),t(5,h=!0)}function N(){y&&(t(9,A=y.id),t(10,I=y.text),t(5,h=!1))}function D(ne){I.trim()&&dc(s,ne,I.trim()),t(9,A=null),t(10,I="")}function B(){t(9,A=null),t(10,I="")}function O(){y&&(T=y,t(11,m=!0),t(5,h=!1))}function z(){T&&ed(s,T.id),t(11,m=!1)}function L(){y&&(ui(s,y.id),t(5,h=!1))}function x(){y&&(a(y),t(5,h=!1))}async function R(){if(!(!y?.fileUrl||!y?.fileName)){try{const ne=ct(y.fileUrl),Xe=await(await fetch(ne)).blob(),Tt=window.URL.createObjectURL(Xe),tt=document.createElement("a");tt.href=Tt,tt.download=y.fileName,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),window.URL.revokeObjectURL(Tt)}catch(ne){console.error("Download failed:",ne)}t(5,h=!1)}}let q=!1,Y=null;function j(){y&&(t(13,Y=y),t(12,q=!0),t(5,h=!1))}function K(ne,Ee){ne.preventDefault(),t(8,y=Ee),t(6,w=ne.clientX),t(7,g=ne.clientY),t(5,h=!0)}function G(ne){if(ne)return l.find(Ee=>Ee.id===ne)}let W=null;function $(ne){const Ee=document.getElementById(`message-${ne}`);Ee&&(Ee.scrollIntoView({behavior:"smooth",block:"center"}),t(14,W=ne),setTimeout(()=>{t(14,W=null)},2e3))}let te=null,le=null,se=[],de=0;function re(ne,Ee=[]){t(15,te=ne),t(17,se=Ee.length>0?Ee:[ne]),t(18,de=se.indexOf(ne))}function ee(){t(15,te=null),t(17,se=[]),t(18,de=0)}function ce(ne){se.length!==0&&(ne==="prev"?t(18,de=(de-1+se.length)%se.length):t(18,de=(de+1)%se.length),t(15,te=se[de]))}function ke(ne){te&&(ne.key==="ArrowLeft"?(ne.preventDefault(),ce("prev")):ne.key==="ArrowRight"?(ne.preventDefault(),ce("next")):ne.key==="Escape"&&(ne.preventDefault(),ee()))}function Ce(ne){t(16,le=ne)}function Le(){t(16,le=null)}function be(ne){Gt.call(this,n,ne)}function ae(ne){Gt.call(this,n,ne)}const ve=ne=>S(ne),_e=ne=>$(ne.id);function pe(){I=this.value,t(10,I)}const Q=(ne,Ee)=>{Ee.key==="Enter"&&!Ee.shiftKey?(Ee.preventDefault(),D(ne.id)):Ee.key==="Escape"&&(Ee.preventDefault(),B())},ue=ne=>D(ne.id),we=(ne,Ee,Xe)=>{if(Xe.button===0){const Tt=ne.files.filter(tt=>di(tt.fileName)).map(tt=>ct(tt.fileUrl));re(ct(Ee.fileUrl),Tt)}},xe=(ne,Ee)=>Ee.button===0&&Ce(ct(ne.fileUrl)),Pe=(ne,Ee)=>Ee.button===0&&ne.fileUrl&&re(ct(ne.fileUrl)),Ie=(ne,Ee)=>K(Ee,ne),Ve=(ne,Ee)=>{Ee.button===0&&ne.fileUrl&&Ce(ct(ne.fileUrl))},Fe=(ne,Ee)=>K(Ee,ne),et=(ne,Ee)=>E(Ee,ne);function lt(ne){u=ne,t(2,u)}function vt(ne){d=ne,t(3,d)}function Rt(ne){h=ne,t(5,h)}function fe(ne){q=ne,t(12,q)}function ye(ne){Y=ne,t(13,Y)}const je=()=>t(11,m=!1),_t=()=>ce("prev"),Pt=()=>ce("next");return n.$$set=ne=>{"messages"in ne&&t(0,l=ne.messages),"onReply"in ne&&t(41,a=ne.onReply),"firstUnreadMessageId"in ne&&t(1,o=ne.firstUnreadMessageId)},[l,o,u,d,p,h,w,g,y,A,I,m,q,Y,W,te,le,se,de,_,C,S,E,N,D,B,O,z,L,x,R,j,K,G,$,re,ee,ce,ke,Ce,Le,a,be,ae,ve,_e,pe,Q,ue,we,xe,Pe,Ie,Ve,Fe,et,lt,vt,Rt,fe,ye,je,_t,Pt]}class Ih extends gt{constructor(e){super(),mt(this,e,Sh,Ah,pt,{messages:0,onReply:41,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Yl(n,e,t){const s=n.slice();return s[6]=e[t],s}function Kl(n){let e,t,s,r="ðŸ“Œ",i,l,a="Pinned Messages",o,u,d,p=n[0].length+"",h,w,g,y,A=[],I=new Map,m=Ke(n[0]);const T=_=>_[6].id;for(let _=0;_<m.length;_+=1){let C=Yl(n,m,_),S=T(C);I.set(S,A[_]=Xl(S,C))}return{c(){e=k("div"),t=k("div"),s=k("span"),s.textContent=r,i=F(),l=k("span"),l.textContent=a,o=F(),u=k("span"),d=J("("),h=J(p),w=J(")"),g=F(),y=k("div");for(let _=0;_<A.length;_+=1)A[_].c();this.h()},l(_){e=b(_,"DIV",{class:!0});var C=P(e);t=b(C,"DIV",{class:!0});var S=P(t);s=b(S,"SPAN",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-73xtmc"&&(s.textContent=r),i=M(S),l=b(S,"SPAN",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-123zvdk"&&(l.textContent=a),o=M(S),u=b(S,"SPAN",{class:!0});var E=P(u);d=Z(E,"("),h=Z(E,p),w=Z(E,")"),E.forEach(v),S.forEach(v),g=M(C),y=b(C,"DIV",{class:!0});var N=P(y);for(let D=0;D<A.length;D+=1)A[D].l(N);N.forEach(v),C.forEach(v),this.h()},h(){f(s,"class","pinned-icon svelte-d1025n"),f(l,"class","pinned-title svelte-d1025n"),f(u,"class","pinned-count svelte-d1025n"),f(t,"class","pinned-header svelte-d1025n"),f(y,"class","pinned-messages svelte-d1025n"),f(e,"class","pinned-container svelte-d1025n")},m(_,C){V(_,e,C),c(e,t),c(t,s),c(t,i),c(t,l),c(t,o),c(t,u),c(u,d),c(u,h),c(u,w),c(e,g),c(e,y);for(let S=0;S<A.length;S+=1)A[S]&&A[S].m(y,null)},p(_,C){C&1&&p!==(p=_[0].length+"")&&ie(h,p),C&7&&(m=Ke(_[0]),A=tn(A,C,T,1,_,m,I,y,en,Xl,null,Yl))},d(_){_&&v(e);for(let C=0;C<A.length;C+=1)A[C].d()}}}function Xl(n,e){let t,s,r,i=e[6].user+"",l,a,o,u=e[6].text.substring(0,100)+"",d,p=e[6].text.length>100?"...":"",h,w,g,y=Zl(e[6].timestamp)+"",A,I,m,T="Ã—",_,C,S;function E(){return e[3](e[6])}return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("span"),l=J(i),a=F(),o=k("span"),d=J(u),h=J(p),w=F(),g=k("span"),A=J(y),I=F(),m=k("button"),m.textContent=T,_=F(),this.h()},l(N){t=b(N,"DIV",{class:!0});var D=P(t);s=b(D,"DIV",{class:!0});var B=P(s);r=b(B,"SPAN",{class:!0,style:!0});var O=P(r);l=Z(O,i),O.forEach(v),a=M(B),o=b(B,"SPAN",{class:!0});var z=P(o);d=Z(z,u),h=Z(z,p),z.forEach(v),w=M(B),g=b(B,"SPAN",{class:!0});var L=P(g);A=Z(L,y),L.forEach(v),B.forEach(v),I=M(D),m=b(D,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(m)!=="svelte-87szfn"&&(m.textContent=T),_=M(D),D.forEach(v),this.h()},h(){f(r,"class","pinned-user svelte-d1025n"),Ne(r,"color",e[1](e[6].user)),f(o,"class","pinned-text svelte-d1025n"),f(g,"class","pinned-time svelte-d1025n"),f(s,"class","pinned-message-content svelte-d1025n"),f(m,"class","unpin-btn svelte-d1025n"),f(m,"title","Unpin message"),f(t,"class","pinned-message svelte-d1025n"),this.first=t},m(N,D){V(N,t,D),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,h),c(s,w),c(s,g),c(g,A),c(t,I),c(t,m),c(t,_),C||(S=H(m,"click",E),C=!0)},p(N,D){e=N,D&1&&i!==(i=e[6].user+"")&&ie(l,i),D&1&&Ne(r,"color",e[1](e[6].user)),D&1&&u!==(u=e[6].text.substring(0,100)+"")&&ie(d,u),D&1&&p!==(p=e[6].text.length>100?"...":"")&&ie(h,p),D&1&&y!==(y=Zl(e[6].timestamp)+"")&&ie(A,y)},d(N){N&&v(t),C=!1,S()}}}function Dh(n){let e,t=n[0].length>0&&Kl(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0].length>0?t?t.p(s,r):(t=Kl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function Zl(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function Nh(n,e,t){let s;Be(n,Vt,u=>t(4,s=u));let{pinnedMessages:r}=e;function i(u){return s.find(d=>d.username===u)}function l(u){return i(u)?.color||"var(--status-offline)"}function a(u){ui(u)}const o=u=>a(u.id);return n.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,l,a,o]}class Rh extends gt{constructor(e){super(),mt(this,e,Nh,Dh,pt,{pinnedMessages:0})}}function Jl(n,e,t){const s=n.slice();return s[47]=e[t].file,s[48]=e[t].preview,s[50]=t,s}function Ql(n){let e,t='<div class="drag-overlay-content svelte-1mvqxem"><div class="drag-icon svelte-1mvqxem">ðŸ“</div> <div class="drag-text svelte-1mvqxem">Drop files here to upload</div></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){f(e,"class","drag-overlay svelte-1mvqxem")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function $l(n){let e,t,s,r,i=n[16].join(", ")+"",l,a,o=n[16].length===1?"is":"are",u,d;return{c(){e=k("div"),t=k("span"),s=F(),r=k("span"),l=J(i),a=F(),u=J(o),d=J(" typing..."),this.h()},l(p){e=b(p,"DIV",{class:!0});var h=P(e);t=b(h,"SPAN",{class:!0}),P(t).forEach(v),s=M(h),r=b(h,"SPAN",{});var w=P(r);l=Z(w,i),a=M(w),u=Z(w,o),d=Z(w," typing..."),w.forEach(v),h.forEach(v),this.h()},h(){f(t,"class","typing-dots svelte-1mvqxem"),f(e,"class","typing-indicator svelte-1mvqxem")},m(p,h){V(p,e,h),c(e,t),c(e,s),c(e,r),c(r,l),c(r,a),c(r,u),c(r,d)},p(p,h){h[0]&65536&&i!==(i=p[16].join(", ")+"")&&ie(l,i),h[0]&65536&&o!==(o=p[16].length===1?"is":"are")&&ie(u,o)},d(p){p&&v(e)}}}function ea(n){let e,t;return e=new jd({}),e.$on("select",n[21]),e.$on("close",n[33]),{c(){$e(e.$$.fragment)},l(s){Qe(e.$$.fragment,s)},m(s,r){Je(e,s,r),t=!0},p:Me,i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Oe(e.$$.fragment,s),t=!1},d(s){Ze(e,s)}}}function Ph(n){let e,t,s,r,i=n[5].user+"",l,a,o,u,d=n[5].text.substring(0,50)+"",p,h=n[5].text.length>50?"...":"",w,g,y,A="âœ•",I,m;return{c(){e=k("div"),t=k("div"),s=k("span"),r=J("Replying to "),l=J(i),a=J(":"),o=F(),u=k("span"),p=J(d),w=J(h),g=F(),y=k("button"),y.textContent=A,this.h()},l(T){e=b(T,"DIV",{class:!0});var _=P(e);t=b(_,"DIV",{class:!0});var C=P(t);s=b(C,"SPAN",{class:!0});var S=P(s);r=Z(S,"Replying to "),l=Z(S,i),a=Z(S,":"),S.forEach(v),o=M(C),u=b(C,"SPAN",{class:!0});var E=P(u);p=Z(E,d),w=Z(E,h),E.forEach(v),C.forEach(v),g=M(_),y=b(_,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-1av190j"&&(y.textContent=A),_.forEach(v),this.h()},h(){f(s,"class","reply-label svelte-1mvqxem"),f(u,"class","reply-preview svelte-1mvqxem"),f(t,"class","reply-info svelte-1mvqxem"),f(y,"class","cancel-reply svelte-1mvqxem"),f(e,"class","reply-bar svelte-1mvqxem")},m(T,_){V(T,e,_),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(u,p),c(u,w),c(e,g),c(e,y),I||(m=H(y,"click",n[23]),I=!0)},p(T,_){_[0]&32&&i!==(i=T[5].user+"")&&ie(l,i),_[0]&32&&d!==(d=T[5].text.substring(0,50)+"")&&ie(p,d),_[0]&32&&h!==(h=T[5].text.length>50?"...":"")&&ie(w,h)},d(T){T&&v(e),I=!1,m()}}}function Oh(n){let e,t,s='<span class="edit-label svelte-1mvqxem">Editing message</span> <span class="edit-hint svelte-1mvqxem">Press Escape to cancel</span>',r,i,l="âœ•",a,o;return{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=F(),i=k("button"),i.textContent=l,this.h()},l(u){e=b(u,"DIV",{class:!0});var d=P(e);t=b(d,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1kwfa7y"&&(t.innerHTML=s),r=M(d),i=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1anw7a5"&&(i.textContent=l),d.forEach(v),this.h()},h(){f(t,"class","edit-info svelte-1mvqxem"),f(i,"class","cancel-edit svelte-1mvqxem"),f(e,"class","edit-bar svelte-1mvqxem")},m(u,d){V(u,e,d),c(e,t),c(e,r),c(e,i),a||(o=H(i,"click",n[20]),a=!0)},p:Me,d(u){u&&v(e),a=!1,o()}}}function ta(n){let e,t,s,r=n[10].length+"",i,l,a=n[10].length>1?"s":"",o,u,d,p,h="âœ•",w,g,y,A,I,m,T,_,C="Mark as spoiler",S,E,N="âš ï¸",D,B,O,z=n[10].length+"",L,x,R=n[10].length>1?"s":"",q,Y,j,K=Ke(n[10]),G=[];for(let W=0;W<K.length;W+=1)G[W]=na(Jl(n,K,W));return{c(){e=k("div"),t=k("div"),s=k("span"),i=J(r),l=J(" file"),o=J(a),u=J(" selected"),d=F(),p=k("button"),p.textContent=h,w=F(),g=k("div");for(let W=0;W<G.length;W+=1)G[W].c();y=F(),A=k("div"),I=k("label"),m=k("input"),T=F(),_=k("span"),_.textContent=C,S=F(),E=k("span"),E.textContent=N,D=F(),B=k("button"),O=J("Upload "),L=J(z),x=J(" file"),q=J(R),this.h()},l(W){e=b(W,"DIV",{class:!0});var $=P(e);t=b($,"DIV",{class:!0});var te=P(t);s=b(te,"SPAN",{});var le=P(s);i=Z(le,r),l=Z(le," file"),o=Z(le,a),u=Z(le," selected"),le.forEach(v),d=M(te),p=b(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-pcsk7y"&&(p.textContent=h),te.forEach(v),w=M($),g=b($,"DIV",{class:!0});var se=P(g);for(let ce=0;ce<G.length;ce+=1)G[ce].l(se);se.forEach(v),y=M($),A=b($,"DIV",{class:!0});var de=P(A);I=b(de,"LABEL",{class:!0});var re=P(I);m=b(re,"INPUT",{type:!0,class:!0}),T=M(re),_=b(re,"SPAN",{"data-svelte-h":!0}),X(_)!=="svelte-6s6emx"&&(_.textContent=C),re.forEach(v),S=M(de),E=b(de,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),X(E)!=="svelte-6jzi8y"&&(E.textContent=N),de.forEach(v),D=M($),B=b($,"BUTTON",{class:!0});var ee=P(B);O=Z(ee,"Upload "),L=Z(ee,z),x=Z(ee," file"),q=Z(ee,R),ee.forEach(v),$.forEach(v),this.h()},h(){f(p,"class","cancel-gallery svelte-1mvqxem"),f(t,"class","gallery-header svelte-1mvqxem"),f(g,"class","gallery-grid svelte-1mvqxem"),f(m,"type","checkbox"),f(m,"class","spoiler-checkbox svelte-1mvqxem"),f(I,"class","spoiler-checkbox-label svelte-1mvqxem"),f(E,"class","spoiler-hint svelte-1mvqxem"),f(E,"title","Sensitive content will be hidden until clicked"),f(A,"class","spoiler-checkbox-container svelte-1mvqxem"),f(B,"class","upload-files-btn svelte-1mvqxem"),f(e,"class","file-gallery svelte-1mvqxem")},m(W,$){V(W,e,$),c(e,t),c(t,s),c(s,i),c(s,l),c(s,o),c(s,u),c(t,d),c(t,p),c(e,w),c(e,g);for(let te=0;te<G.length;te+=1)G[te]&&G[te].m(g,null);c(e,y),c(e,A),c(A,I),c(I,m),m.checked=n[11],c(I,T),c(I,_),c(A,S),c(A,E),c(e,D),c(e,B),c(B,O),c(B,L),c(B,x),c(B,q),Y||(j=[H(p,"click",n[26]),H(m,"change",n[35]),H(B,"click",n[30])],Y=!0)},p(W,$){if($[0]&1024&&r!==(r=W[10].length+"")&&ie(i,r),$[0]&1024&&a!==(a=W[10].length>1?"s":"")&&ie(o,a),$[0]&33555456){K=Ke(W[10]);let te;for(te=0;te<K.length;te+=1){const le=Jl(W,K,te);G[te]?G[te].p(le,$):(G[te]=na(le),G[te].c(),G[te].m(g,null))}for(;te<G.length;te+=1)G[te].d(1);G.length=K.length}$[0]&2048&&(m.checked=W[11]),$[0]&1024&&z!==(z=W[10].length+"")&&ie(L,z),$[0]&1024&&R!==(R=W[10].length>1?"s":"")&&ie(q,R)},d(W){W&&v(e),Gs(G,W),Y=!1,De(j)}}}function Mh(n){let e,t,s;function r(a,o){return o[0]&1024&&(t=null),o[0]&1024&&(s=null),t==null&&(t=!!a[47].type.startsWith("video/")),t?Lh:(s==null&&(s=!!a[47].type.startsWith("audio/")),s?Bh:zh)}let i=r(n,[-1,-1]),l=i(n);return{c(){e=k("div"),l.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var o=P(e);l.l(o),o.forEach(v),this.h()},h(){f(e,"class","gallery-file-icon svelte-1mvqxem")},m(a,o){V(a,e,o),l.m(e,null)},p(a,o){i!==(i=r(a,o))&&(l.d(1),l=i(a),l&&(l.c(),l.m(e,null)))},d(a){a&&v(e),l.d()}}}function Fh(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[48])||f(e,"src",t),f(e,"alt",s=n[47].name),f(e,"class","gallery-preview svelte-1mvqxem")},m(r,i){V(r,e,i)},p(r,i){i[0]&1024&&!Ye(e.src,t=r[48])&&f(e,"src",t),i[0]&1024&&s!==(s=r[47].name)&&f(e,"alt",s)},d(r){r&&v(e)}}}function zh(n){let e;return{c(){e=J("ðŸ“„")},l(t){e=Z(t,"ðŸ“„")},m(t,s){V(t,e,s)},d(t){t&&v(e)}}}function Bh(n){let e;return{c(){e=J("ðŸŽµ")},l(t){e=Z(t,"ðŸŽµ")},m(t,s){V(t,e,s)},d(t){t&&v(e)}}}function Lh(n){let e;return{c(){e=J("ðŸŽ¬")},l(t){e=Z(t,"ðŸŽ¬")},m(t,s){V(t,e,s)},d(t){t&&v(e)}}}function na(n){let e,t,s,r,i=n[47].name+"",l,a,o,u=(n[47].size/1024/1024).toFixed(2)+"",d,p,h,w,g="âœ•",y,A,I;function m(S,E){return S[48]?Fh:Mh}let T=m(n),_=T(n);function C(){return n[34](n[50])}return{c(){e=k("div"),_.c(),t=F(),s=k("div"),r=k("div"),l=J(i),a=F(),o=k("div"),d=J(u),p=J(" MB"),h=F(),w=k("button"),w.textContent=g,y=F(),this.h()},l(S){e=b(S,"DIV",{class:!0});var E=P(e);_.l(E),t=M(E),s=b(E,"DIV",{class:!0});var N=P(s);r=b(N,"DIV",{class:!0});var D=P(r);l=Z(D,i),D.forEach(v),a=M(N),o=b(N,"DIV",{class:!0});var B=P(o);d=Z(B,u),p=Z(B," MB"),B.forEach(v),N.forEach(v),h=M(E),w=b(E,"BUTTON",{class:!0,"data-svelte-h":!0}),X(w)!=="svelte-17gof1i"&&(w.textContent=g),y=M(E),E.forEach(v),this.h()},h(){f(r,"class","gallery-file-name svelte-1mvqxem"),f(o,"class","gallery-file-size svelte-1mvqxem"),f(s,"class","gallery-file-info svelte-1mvqxem"),f(w,"class","remove-file svelte-1mvqxem"),f(e,"class","gallery-item svelte-1mvqxem")},m(S,E){V(S,e,E),_.m(e,null),c(e,t),c(e,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(o,p),c(e,h),c(e,w),c(e,y),A||(I=H(w,"click",C),A=!0)},p(S,E){n=S,T===(T=m(n))&&_?_.p(n,E):(_.d(1),_=T(n),_&&(_.c(),_.m(e,t))),E[0]&1024&&i!==(i=n[47].name+"")&&ie(l,i),E[0]&1024&&u!==(u=(n[47].size/1024/1024).toFixed(2)+"")&&ie(d,u)},d(S){S&&v(e),_.d(),A=!1,I()}}}function sa(n){let e,t,s,r="Uploading files...",i,l,a,o,u,d,p;return{c(){e=k("div"),t=k("div"),s=k("span"),s.textContent=r,i=F(),l=k("span"),a=J(n[8]),o=J("%"),u=F(),d=k("div"),p=k("div"),this.h()},l(h){e=b(h,"DIV",{class:!0});var w=P(e);t=b(w,"DIV",{class:!0});var g=P(t);s=b(g,"SPAN",{"data-svelte-h":!0}),X(s)!=="svelte-10wvq4k"&&(s.textContent=r),i=M(g),l=b(g,"SPAN",{});var y=P(l);a=Z(y,n[8]),o=Z(y,"%"),y.forEach(v),g.forEach(v),u=M(w),d=b(w,"DIV",{class:!0});var A=P(d);p=b(A,"DIV",{class:!0,style:!0}),P(p).forEach(v),A.forEach(v),w.forEach(v),this.h()},h(){f(t,"class","upload-progress-info svelte-1mvqxem"),f(p,"class","progress-fill svelte-1mvqxem"),Ne(p,"width",n[8]+"%"),f(d,"class","progress-bar svelte-1mvqxem"),f(e,"class","upload-progress-bar svelte-1mvqxem")},m(h,w){V(h,e,w),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),c(l,o),c(e,u),c(e,d),c(d,p)},p(h,w){w[0]&256&&ie(a,h[8]),w[0]&256&&Ne(p,"width",h[8]+"%")},d(h){h&&v(e)}}}function xh(n){let e,t,s,r,i,l,a,o,u,d,p,h,w,g,y,A,I,m,T,_,C,S,E="ðŸ“Ž",N,D,B,O,z="GIF",L,x,R,q,Y,j,K,G=n[12]&&Ql();o=new Rh({props:{pinnedMessages:n[14]}}),d=new Ih({props:{messages:n[0],onReply:n[22],firstUnreadMessageId:n[15]}});let W=n[16].length>0&&$l(n),$=n[4]&&ea(n);function te(ee,ce){if(ee[7])return Oh;if(ee[5])return Ph}let le=te(n),se=le&&le(n),de=n[10].length>0&&!n[9]&&ta(n),re=n[9]&&sa(n);return{c(){e=k("div"),G&&G.c(),t=F(),s=k("div"),r=k("h2"),i=J(n[1]),l=F(),a=k("div"),$e(o.$$.fragment),u=F(),$e(d.$$.fragment),p=F(),W&&W.c(),h=F(),$&&$.c(),w=F(),se&&se.c(),g=F(),y=k("div"),de&&de.c(),A=F(),re&&re.c(),I=F(),m=k("input"),T=F(),_=k("div"),C=k("div"),S=k("button"),S.textContent=E,N=F(),D=k("textarea"),B=F(),O=k("button"),O.textContent=z,L=F(),x=k("button"),R=J("Send"),this.h()},l(ee){e=b(ee,"DIV",{class:!0});var ce=P(e);G&&G.l(ce),t=M(ce),s=b(ce,"DIV",{class:!0});var ke=P(s);r=b(ke,"H2",{class:!0});var Ce=P(r);i=Z(Ce,n[1]),Ce.forEach(v),ke.forEach(v),l=M(ce),a=b(ce,"DIV",{class:!0});var Le=P(a);Qe(o.$$.fragment,Le),u=M(Le),Qe(d.$$.fragment,Le),p=M(Le),W&&W.l(Le),Le.forEach(v),h=M(ce),$&&$.l(ce),w=M(ce),se&&se.l(ce),g=M(ce),y=b(ce,"DIV",{class:!0});var be=P(y);de&&de.l(be),A=M(be),re&&re.l(be),I=M(be),m=b(be,"INPUT",{type:!0,style:!0}),T=M(be),_=b(be,"DIV",{class:!0});var ae=P(_);C=b(ae,"DIV",{class:!0});var ve=P(C);S=b(ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(S)!=="svelte-1fiys3t"&&(S.textContent=E),ve.forEach(v),N=M(ae),D=b(ae,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),P(D).forEach(v),B=M(ae),O=b(ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(O)!=="svelte-1ty10q8"&&(O.textContent=z),L=M(ae),x=b(ae,"BUTTON",{class:!0});var _e=P(x);R=Z(_e,"Send"),_e.forEach(v),ae.forEach(v),be.forEach(v),ce.forEach(v),this.h()},h(){f(r,"class","svelte-1mvqxem"),f(s,"class","chat-header svelte-1mvqxem"),f(a,"class","messages svelte-1mvqxem"),f(m,"type","file"),m.multiple=!0,Ne(m,"display","none"),f(S,"class","input-icon-button svelte-1mvqxem"),f(S,"title","Attach file"),f(C,"class","input-buttons-left svelte-1mvqxem"),f(D,"placeholder","Type a message... (Shift+Enter for new line)"),f(D,"maxlength","2000"),f(D,"rows","1"),f(D,"class","svelte-1mvqxem"),f(O,"class","input-icon-button svelte-1mvqxem"),f(O,"title","Add GIF"),f(x,"class","send-button svelte-1mvqxem"),x.disabled=q=!n[2].trim(),f(_,"class","input-container svelte-1mvqxem"),f(y,"class","input-wrapper svelte-1mvqxem"),f(e,"class","chat-container svelte-1mvqxem")},m(ee,ce){V(ee,e,ce),G&&G.m(e,null),c(e,t),c(e,s),c(s,r),c(r,i),c(e,l),c(e,a),Je(o,a,null),c(a,u),Je(d,a,null),c(a,p),W&&W.m(a,null),n[32](a),c(e,h),$&&$.m(e,null),c(e,w),se&&se.m(e,null),c(e,g),c(e,y),de&&de.m(y,null),c(y,A),re&&re.m(y,null),c(y,I),c(y,m),n[36](m),c(y,T),c(y,_),c(_,C),c(C,S),c(_,N),c(_,D),n[38](D),st(D,n[2]),c(_,B),c(_,O),c(_,L),c(_,x),c(x,R),Y=!0,j||(K=[H(m,"change",n[24]),H(S,"click",n[37]),H(D,"input",n[39]),H(D,"input",n[17]),H(D,"keydown",n[18]),H(O,"click",n[40]),H(x,"click",n[19]),H(e,"dragenter",n[27]),H(e,"dragleave",n[28]),H(e,"dragover",Uh),H(e,"drop",n[29])],j=!0)},p(ee,ce){ee[12]?G||(G=Ql(),G.c(),G.m(e,t)):G&&(G.d(1),G=null),(!Y||ce[0]&2)&&ie(i,ee[1]);const ke={};ce[0]&16384&&(ke.pinnedMessages=ee[14]),o.$set(ke);const Ce={};ce[0]&1&&(Ce.messages=ee[0]),ce[0]&32768&&(Ce.firstUnreadMessageId=ee[15]),d.$set(Ce),ee[16].length>0?W?W.p(ee,ce):(W=$l(ee),W.c(),W.m(a,null)):W&&(W.d(1),W=null),ee[4]?$?($.p(ee,ce),ce[0]&16&&Ae($,1)):($=ea(ee),$.c(),Ae($,1),$.m(e,w)):$&&(Hn(),Oe($,1,1,()=>{$=null}),Gn()),le===(le=te(ee))&&se?se.p(ee,ce):(se&&se.d(1),se=le&&le(ee),se&&(se.c(),se.m(e,g))),ee[10].length>0&&!ee[9]?de?de.p(ee,ce):(de=ta(ee),de.c(),de.m(y,A)):de&&(de.d(1),de=null),ee[9]?re?re.p(ee,ce):(re=sa(ee),re.c(),re.m(y,I)):re&&(re.d(1),re=null),ce[0]&4&&st(D,ee[2]),(!Y||ce[0]&4&&q!==(q=!ee[2].trim()))&&(x.disabled=q)},i(ee){Y||(Ae(o.$$.fragment,ee),Ae(d.$$.fragment,ee),Ae($),Y=!0)},o(ee){Oe(o.$$.fragment,ee),Oe(d.$$.fragment,ee),Oe($),Y=!1},d(ee){ee&&v(e),G&&G.d(),Ze(o),Ze(d),W&&W.d(),n[32](null),$&&$.d(),se&&se.d(),de&&de.d(),re&&re.d(),n[36](null),n[38](null),j=!1,De(K)}}}function Uh(n){n.preventDefault(),n.stopPropagation()}function qh(n,e,t){let s,r,i,l,a,o,u;Be(n,Mn,ae=>t(1,i=ae)),Be(n,dn,ae=>t(44,l=ae)),Be(n,St,ae=>t(31,a=ae)),Be(n,ci,ae=>t(15,o=ae)),Be(n,uc,ae=>t(16,u=ae));let d="",p,h,w=!1,g=null,y,A=null,I=0,m=!1,T=[],_=[],C=!1,S=!1,E=0,N;async function D(){await Cc(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function B(){if(!N)return;t(13,N.style.height="auto",N);const ae=Math.min(N.scrollHeight,120);t(13,N.style.height=`${ae}px`,N)}function O(){B(),or(!0),h&&clearTimeout(h),h=setTimeout(()=>{or(!1)},1e3)}function z(ae){if(ae.key==="ArrowUp"&&!d.trim()&&!A){ae.preventDefault();const ve=s.filter(_e=>_e.userId===l?.id);if(ve.length>0){const _e=ve[ve.length-1];t(7,A=_e),t(2,d=_e.text)}}else ae.key==="Escape"&&A?(ae.preventDefault(),x()):ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),L())}function L(){d.trim()&&(A?(dc(i,A.id,d.trim()),t(7,A=null)):(Ns(i,d.trim(),"text",{replyTo:g?.id,isSpoiler:C}),t(5,g=null)),t(2,d=""),or(!1),h&&clearTimeout(h),N&&t(13,N.style.height="auto",N))}function x(){t(7,A=null),t(2,d=""),N&&t(13,N.style.height="auto",N)}function R(ae){Ns(i,"","gif",{gifUrl:ae.detail,replyTo:g?.id,isSpoiler:C}),t(5,g=null),t(4,w=!1)}function q(ae){t(5,g=ae),document.querySelector('input[type="text"]')?.focus()}function Y(){t(5,g=null)}async function j(ae){const ve=ae.target,_e=Array.from(ve.files||[]);if(_e.length===0){console.log("No files selected");return}console.log("Files selected:",_e.length);const pe=1024*1024*1024;for(const Q of _e)if(Q.size>pe){alert(`File too large! Maximum size is 1GB per file. "${Q.name}" is ${(Q.size/1024/1024).toFixed(2)}MB`),ve.value="";return}T=_e,t(10,_=await Promise.all(_e.map(async Q=>{if(Q.type.startsWith("image/")){const ue=await new Promise(we=>{const xe=new FileReader;xe.onload=Pe=>we(Pe.target?.result),xe.readAsDataURL(Q)});return{file:Q,preview:ue}}return{file:Q}}))),ve.value=""}function K(ae){T=T.filter((ve,_e)=>_e!==ae),t(10,_=_.filter((ve,_e)=>_e!==ae))}function G(){T=[],t(10,_=[])}function W(ae){ae.preventDefault(),ae.stopPropagation(),E++,ae.dataTransfer?.types.includes("Files")&&t(12,S=!0)}function $(ae){ae.preventDefault(),ae.stopPropagation(),E--,E===0&&t(12,S=!1)}async function te(ae){ae.preventDefault(),ae.stopPropagation(),t(12,S=!1),E=0;const ve=Array.from(ae.dataTransfer?.files||[]);if(ve.length===0)return;const _e=1024*1024*1024;for(const pe of ve)if(pe.size>_e){alert(`File too large! Maximum size is 1GB per file. "${pe.name}" is ${(pe.size/1024/1024).toFixed(2)}MB`);return}T=ve,t(10,_=await Promise.all(ve.map(async pe=>{if(pe.type.startsWith("image/")){const Q=await new Promise(ue=>{const we=new FileReader;we.onload=xe=>ue(xe.target?.result),we.readAsDataURL(pe)});return{file:pe,preview:Q}}return{file:pe}})))}async function le(){if(T.length===0)return;t(9,m=!0);const ae=T.length;let ve=0;try{const _e=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,pe=[];for(const Q of T){const ue=await new Promise((we,xe)=>{const Pe=new FormData;Pe.append("file",Q),Pe.append("channelId",i);const Ie=new XMLHttpRequest;Ie.upload.addEventListener("progress",Ve=>{if(Ve.lengthComputable){const Fe=Ve.loaded/Ve.total*100,et=(ve+Fe/100)/ae*100;t(8,I=Math.round(et))}}),Ie.addEventListener("load",()=>{if(Ie.status===200){const Ve=JSON.parse(Ie.responseText);ve++,we({fileUrl:Ve.fileUrl,fileName:Q.name,fileSize:Q.size})}else xe(new Error("Upload failed"))}),Ie.addEventListener("error",()=>{xe(new Error("Upload failed"))}),Ie.open("POST",`${_e}/api/upload`),Ie.send(Pe)});pe.push(ue)}pe.length===1?Ns(i,d.trim()||`Shared: ${pe[0].fileName}`,"file",{fileUrl:pe[0].fileUrl,fileName:pe[0].fileName,fileSize:pe[0].fileSize,replyTo:g?.id,isSpoiler:C}):Ns(i,d.trim()||`Shared ${pe.length} files`,"file",{files:pe,replyTo:g?.id,isSpoiler:C}),console.log("All files uploaded"),t(2,d=""),t(5,g=null),T=[],t(10,_=[]),t(9,m=!1),t(8,I=0)}catch(_e){console.error("Upload error:",_e),alert("Failed to upload files. Please try again."),t(9,m=!1),t(8,I=0)}}function se(ae){rt[ae?"unshift":"push"](()=>{p=ae,t(3,p)})}const de=()=>t(4,w=!1),re=ae=>K(ae);function ee(){C=this.checked,t(11,C)}function ce(ae){rt[ae?"unshift":"push"](()=>{y=ae,t(6,y)})}const ke=()=>y?.click();function Ce(ae){rt[ae?"unshift":"push"](()=>{N=ae,t(13,N)})}function Le(){d=this.value,t(2,d)}const be=()=>t(4,w=!w);return n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1&&t(0,s=a[i]||[]),n.$$.dirty[0]&1&&t(14,r=s.filter(ae=>ae.isPinned)),n.$$.dirty[0]&1&&s.length&&D()},[s,i,d,p,w,g,y,A,I,m,_,C,S,N,r,o,u,O,z,L,x,R,q,Y,j,K,G,W,$,te,le,a,se,de,re,ee,ce,ke,Ce,Le,be]}class jh extends gt{constructor(e){super(),mt(this,e,qh,xh,pt,{},null,[-1,-1])}}var jn={},fr,ra;function Vh(){return ra||(ra=1,fr=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),fr}var dr={},kn={},ia;function zn(){if(ia)return kn;ia=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return kn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},kn.getSymbolTotalCodewords=function(s){return e[s]},kn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s},kn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');n=s},kn.isKanjiModeEnabled=function(){return typeof n<"u"},kn.toSJIS=function(s){return n(s)},kn}var hr={},la;function hi(){return la||(la=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,r){if(n.isValid(s))return s;try{return e(s)}catch{return r}}})(hr)),hr}var pr,aa;function Hh(){if(aa)return pr;aa=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},pr=n,pr}var gr,oa;function Gh(){if(oa)return gr;oa=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,s,r){const i=e*this.size+t;this.data[i]=s,r&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},gr=n,gr}var mr={},ca;function Wh(){return ca||(ca=1,(function(n){const e=zn().getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,i=e(s),l=i===145?26:Math.ceil((i-13)/(2*r-2))*2,a=[i-7];for(let o=1;o<r-1;o++)a[o]=a[o-1]-l;return a.push(6),a.reverse()},n.getPositions=function(s){const r=[],i=n.getRowColCoords(s),l=i.length;for(let a=0;a<l;a++)for(let o=0;o<l;o++)a===0&&o===0||a===0&&o===l-1||a===l-1&&o===0||r.push([i[a],i[o]]);return r}})(mr)),mr}var vr={},ua;function Yh(){if(ua)return vr;ua=1;const n=zn().getSymbolSize,e=7;return vr.getPositions=function(s){const r=n(s);return[[0,0],[r-e,0],[0,r-e]]},vr}var _r={},fa;function Kh(){return fa||(fa=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const i=r.size;let l=0,a=0,o=0,u=null,d=null;for(let p=0;p<i;p++){a=o=0,u=d=null;for(let h=0;h<i;h++){let w=r.get(p,h);w===u?a++:(a>=5&&(l+=e.N1+(a-5)),u=w,a=1),w=r.get(h,p),w===d?o++:(o>=5&&(l+=e.N1+(o-5)),d=w,o=1)}a>=5&&(l+=e.N1+(a-5)),o>=5&&(l+=e.N1+(o-5))}return l},n.getPenaltyN2=function(r){const i=r.size;let l=0;for(let a=0;a<i-1;a++)for(let o=0;o<i-1;o++){const u=r.get(a,o)+r.get(a,o+1)+r.get(a+1,o)+r.get(a+1,o+1);(u===4||u===0)&&l++}return l*e.N2},n.getPenaltyN3=function(r){const i=r.size;let l=0,a=0,o=0;for(let u=0;u<i;u++){a=o=0;for(let d=0;d<i;d++)a=a<<1&2047|r.get(u,d),d>=10&&(a===1488||a===93)&&l++,o=o<<1&2047|r.get(d,u),d>=10&&(o===1488||o===93)&&l++}return l*e.N3},n.getPenaltyN4=function(r){let i=0;const l=r.data.length;for(let o=0;o<l;o++)i+=r.data[o];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function t(s,r,i){switch(s){case n.Patterns.PATTERN000:return(r+i)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(r+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return r*i%2+r*i%3===0;case n.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case n.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(r,i){const l=i.size;for(let a=0;a<l;a++)for(let o=0;o<l;o++)i.isReserved(o,a)||i.xor(o,a,t(r,o,a))},n.getBestMask=function(r,i){const l=Object.keys(n.Patterns).length;let a=0,o=1/0;for(let u=0;u<l;u++){i(u),n.applyMask(u,r);const d=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(u,r),d<o&&(o=d,a=u)}return a}})(_r)),_r}var Os={},da;function bc(){if(da)return Os;da=1;const n=hi(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Os.getBlocksCount=function(r,i){switch(i){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},Os.getTotalCodewordsCount=function(r,i){switch(i){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},Os}var br={},is={},ha;function Xh(){if(ha)return is;ha=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let s=1;for(let r=0;r<255;r++)n[r]=s,e[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),is.log=function(s){if(s<1)throw new Error("log("+s+")");return e[s]},is.exp=function(s){return n[s]},is.mul=function(s,r){return s===0||r===0?0:n[e[s]+e[r]]},is}var pa;function Zh(){return pa||(pa=1,(function(n){const e=Xh();n.mul=function(s,r){const i=new Uint8Array(s.length+r.length-1);for(let l=0;l<s.length;l++)for(let a=0;a<r.length;a++)i[l+a]^=e.mul(s[l],r[a]);return i},n.mod=function(s,r){let i=new Uint8Array(s);for(;i.length-r.length>=0;){const l=i[0];for(let o=0;o<r.length;o++)i[o]^=e.mul(r[o],l);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let i=0;i<s;i++)r=n.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(br)),br}var kr,ga;function Jh(){if(ga)return kr;ga=1;const n=Zh();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(s){this.degree=s,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const i=n.mod(r,this.genPoly),l=this.degree-i.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(i,l),a}return i},kr=e,kr}var wr={},yr={},Er={},ma;function kc(){return ma||(ma=1,Er.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Er}var an={},va;function wc(){if(va)return an;va=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;an.KANJI=new RegExp(t,"g"),an.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),an.BYTE=new RegExp(s,"g"),an.NUMERIC=new RegExp(n,"g"),an.ALPHANUMERIC=new RegExp(e,"g");const r=new RegExp("^"+t+"$"),i=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return an.testKanji=function(o){return r.test(o)},an.testNumeric=function(o){return i.test(o)},an.testAlphanumeric=function(o){return l.test(o)},an}var _a;function Bn(){return _a||(_a=1,(function(n){const e=kc(),t=wc();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(i,l){if(n.isValid(i))return i;try{return s(i)}catch{return l}}})(yr)),yr}var ba;function Qh(){return ba||(ba=1,(function(n){const e=zn(),t=bc(),s=hi(),r=Bn(),i=kc(),l=7973,a=e.getBCHDigit(l);function o(h,w,g){for(let y=1;y<=40;y++)if(w<=n.getCapacity(y,g,h))return y}function u(h,w){return r.getCharCountIndicator(h,w)+4}function d(h,w){let g=0;return h.forEach(function(y){const A=u(y.mode,w);g+=A+y.getBitsLength()}),g}function p(h,w){for(let g=1;g<=40;g++)if(d(h,g)<=n.getCapacity(g,w,r.MIXED))return g}n.from=function(w,g){return i.isValid(w)?parseInt(w,10):g},n.getCapacity=function(w,g,y){if(!i.isValid(w))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=r.BYTE);const A=e.getSymbolTotalCodewords(w),I=t.getTotalCodewordsCount(w,g),m=(A-I)*8;if(y===r.MIXED)return m;const T=m-u(y,w);switch(y){case r.NUMERIC:return Math.floor(T/10*3);case r.ALPHANUMERIC:return Math.floor(T/11*2);case r.KANJI:return Math.floor(T/13);case r.BYTE:default:return Math.floor(T/8)}},n.getBestVersionForData=function(w,g){let y;const A=s.from(g,s.M);if(Array.isArray(w)){if(w.length>1)return p(w,A);if(w.length===0)return 1;y=w[0]}else y=w;return o(y.mode,y.getLength(),A)},n.getEncodedBits=function(w){if(!i.isValid(w)||w<7)throw new Error("Invalid QR Code version");let g=w<<12;for(;e.getBCHDigit(g)-a>=0;)g^=l<<e.getBCHDigit(g)-a;return w<<12|g}})(wr)),wr}var Tr={},ka;function $h(){if(ka)return Tr;ka=1;const n=zn(),e=1335,t=21522,s=n.getBCHDigit(e);return Tr.getEncodedBits=function(i,l){const a=i.bit<<3|l;let o=a<<10;for(;n.getBCHDigit(o)-s>=0;)o^=e<<n.getBCHDigit(o)-s;return(a<<10|o)^t},Tr}var Cr={},Ar,wa;function ep(){if(wa)return Ar;wa=1;const n=Bn();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let r,i,l;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),l=parseInt(i,10),s.put(l,10);const a=this.data.length-r;a>0&&(i=this.data.substr(r),l=parseInt(i,10),s.put(l,a*3+1))},Ar=e,Ar}var Sr,ya;function tp(){if(ya)return Sr;ya=1;const n=Bn(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(s){this.mode=n.ALPHANUMERIC,this.data=s}return t.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i+2<=this.data.length;i+=2){let l=e.indexOf(this.data[i])*45;l+=e.indexOf(this.data[i+1]),r.put(l,11)}this.data.length%2&&r.put(e.indexOf(this.data[i]),6)},Sr=t,Sr}var Ir,Ea;function np(){if(Ea)return Ir;Ea=1;const n=Bn();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(s){return s*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)},Ir=e,Ir}var Dr,Ta;function sp(){if(Ta)return Dr;Ta=1;const n=Bn(),e=zn();function t(s){this.mode=n.KANJI,this.data=s}return t.getBitsLength=function(r){return r*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let r;for(r=0;r<this.data.length;r++){let i=e.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),s.put(i,13)}},Dr=t,Dr}var Nr={exports:{}},Ca;function rp(){return Ca||(Ca=1,(function(n){var e={single_source_shortest_paths:function(t,s,r){var i={},l={};l[s]=0;var a=e.PriorityQueue.make();a.push(s,0);for(var o,u,d,p,h,w,g,y,A;!a.empty();){o=a.pop(),u=o.value,p=o.cost,h=t[u]||{};for(d in h)h.hasOwnProperty(d)&&(w=h[d],g=p+w,y=l[d],A=typeof l[d]>"u",(A||y>g)&&(l[d]=g,a.push(d,g),i[d]=u))}if(typeof r<"u"&&typeof l[r]>"u"){var I=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(I)}return i},extract_shortest_path_from_predecessor_list:function(t,s){for(var r=[],i=s;i;)r.push(i),t[i],i=t[i];return r.reverse(),r},find_path:function(t,s,r){var i=e.single_source_shortest_paths(t,s,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var s=e.PriorityQueue,r={},i;t=t||{};for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);return r.queue=[],r.sorter=t.sorter||s.default_sorter,r},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var r={value:t,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(Nr)),Nr.exports}var Aa;function ip(){return Aa||(Aa=1,(function(n){const e=Bn(),t=ep(),s=tp(),r=np(),i=sp(),l=wc(),a=zn(),o=rp();function u(I){return unescape(encodeURIComponent(I)).length}function d(I,m,T){const _=[];let C;for(;(C=I.exec(T))!==null;)_.push({data:C[0],index:C.index,mode:m,length:C[0].length});return _}function p(I){const m=d(l.NUMERIC,e.NUMERIC,I),T=d(l.ALPHANUMERIC,e.ALPHANUMERIC,I);let _,C;return a.isKanjiModeEnabled()?(_=d(l.BYTE,e.BYTE,I),C=d(l.KANJI,e.KANJI,I)):(_=d(l.BYTE_KANJI,e.BYTE,I),C=[]),m.concat(T,_,C).sort(function(E,N){return E.index-N.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function h(I,m){switch(m){case e.NUMERIC:return t.getBitsLength(I);case e.ALPHANUMERIC:return s.getBitsLength(I);case e.KANJI:return i.getBitsLength(I);case e.BYTE:return r.getBitsLength(I)}}function w(I){return I.reduce(function(m,T){const _=m.length-1>=0?m[m.length-1]:null;return _&&_.mode===T.mode?(m[m.length-1].data+=T.data,m):(m.push(T),m)},[])}function g(I){const m=[];for(let T=0;T<I.length;T++){const _=I[T];switch(_.mode){case e.NUMERIC:m.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:m.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:m.push([_,{data:_.data,mode:e.BYTE,length:u(_.data)}]);break;case e.BYTE:m.push([{data:_.data,mode:e.BYTE,length:u(_.data)}])}}return m}function y(I,m){const T={},_={start:{}};let C=["start"];for(let S=0;S<I.length;S++){const E=I[S],N=[];for(let D=0;D<E.length;D++){const B=E[D],O=""+S+D;N.push(O),T[O]={node:B,lastCount:0},_[O]={};for(let z=0;z<C.length;z++){const L=C[z];T[L]&&T[L].node.mode===B.mode?(_[L][O]=h(T[L].lastCount+B.length,B.mode)-h(T[L].lastCount,B.mode),T[L].lastCount+=B.length):(T[L]&&(T[L].lastCount=B.length),_[L][O]=h(B.length,B.mode)+4+e.getCharCountIndicator(B.mode,m))}}C=N}for(let S=0;S<C.length;S++)_[C[S]].end=0;return{map:_,table:T}}function A(I,m){let T;const _=e.getBestModeForData(I);if(T=e.from(m,_),T!==e.BYTE&&T.bit<_.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(_));switch(T===e.KANJI&&!a.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(I);case e.ALPHANUMERIC:return new s(I);case e.KANJI:return new i(I);case e.BYTE:return new r(I)}}n.fromArray=function(m){return m.reduce(function(T,_){return typeof _=="string"?T.push(A(_,null)):_.data&&T.push(A(_.data,_.mode)),T},[])},n.fromString=function(m,T){const _=p(m,a.isKanjiModeEnabled()),C=g(_),S=y(C,T),E=o.find_path(S.map,"start","end"),N=[];for(let D=1;D<E.length-1;D++)N.push(S.table[E[D]].node);return n.fromArray(w(N))},n.rawSplit=function(m){return n.fromArray(p(m,a.isKanjiModeEnabled()))}})(Cr)),Cr}var Sa;function lp(){if(Sa)return dr;Sa=1;const n=zn(),e=hi(),t=Hh(),s=Gh(),r=Wh(),i=Yh(),l=Kh(),a=bc(),o=Jh(),u=Qh(),d=$h(),p=Bn(),h=ip();function w(S,E){const N=S.size,D=i.getPositions(E);for(let B=0;B<D.length;B++){const O=D[B][0],z=D[B][1];for(let L=-1;L<=7;L++)if(!(O+L<=-1||N<=O+L))for(let x=-1;x<=7;x++)z+x<=-1||N<=z+x||(L>=0&&L<=6&&(x===0||x===6)||x>=0&&x<=6&&(L===0||L===6)||L>=2&&L<=4&&x>=2&&x<=4?S.set(O+L,z+x,!0,!0):S.set(O+L,z+x,!1,!0))}}function g(S){const E=S.size;for(let N=8;N<E-8;N++){const D=N%2===0;S.set(N,6,D,!0),S.set(6,N,D,!0)}}function y(S,E){const N=r.getPositions(E);for(let D=0;D<N.length;D++){const B=N[D][0],O=N[D][1];for(let z=-2;z<=2;z++)for(let L=-2;L<=2;L++)z===-2||z===2||L===-2||L===2||z===0&&L===0?S.set(B+z,O+L,!0,!0):S.set(B+z,O+L,!1,!0)}}function A(S,E){const N=S.size,D=u.getEncodedBits(E);let B,O,z;for(let L=0;L<18;L++)B=Math.floor(L/3),O=L%3+N-8-3,z=(D>>L&1)===1,S.set(B,O,z,!0),S.set(O,B,z,!0)}function I(S,E,N){const D=S.size,B=d.getEncodedBits(E,N);let O,z;for(O=0;O<15;O++)z=(B>>O&1)===1,O<6?S.set(O,8,z,!0):O<8?S.set(O+1,8,z,!0):S.set(D-15+O,8,z,!0),O<8?S.set(8,D-O-1,z,!0):O<9?S.set(8,15-O-1+1,z,!0):S.set(8,15-O-1,z,!0);S.set(D-8,8,1,!0)}function m(S,E){const N=S.size;let D=-1,B=N-1,O=7,z=0;for(let L=N-1;L>0;L-=2)for(L===6&&L--;;){for(let x=0;x<2;x++)if(!S.isReserved(B,L-x)){let R=!1;z<E.length&&(R=(E[z]>>>O&1)===1),S.set(B,L-x,R),O--,O===-1&&(z++,O=7)}if(B+=D,B<0||N<=B){B-=D,D=-D;break}}}function T(S,E,N){const D=new t;N.forEach(function(x){D.put(x.mode.bit,4),D.put(x.getLength(),p.getCharCountIndicator(x.mode,S)),x.write(D)});const B=n.getSymbolTotalCodewords(S),O=a.getTotalCodewordsCount(S,E),z=(B-O)*8;for(D.getLengthInBits()+4<=z&&D.put(0,4);D.getLengthInBits()%8!==0;)D.putBit(0);const L=(z-D.getLengthInBits())/8;for(let x=0;x<L;x++)D.put(x%2?17:236,8);return _(D,S,E)}function _(S,E,N){const D=n.getSymbolTotalCodewords(E),B=a.getTotalCodewordsCount(E,N),O=D-B,z=a.getBlocksCount(E,N),L=D%z,x=z-L,R=Math.floor(D/z),q=Math.floor(O/z),Y=q+1,j=R-q,K=new o(j);let G=0;const W=new Array(z),$=new Array(z);let te=0;const le=new Uint8Array(S.buffer);for(let ce=0;ce<z;ce++){const ke=ce<x?q:Y;W[ce]=le.slice(G,G+ke),$[ce]=K.encode(W[ce]),G+=ke,te=Math.max(te,ke)}const se=new Uint8Array(D);let de=0,re,ee;for(re=0;re<te;re++)for(ee=0;ee<z;ee++)re<W[ee].length&&(se[de++]=W[ee][re]);for(re=0;re<j;re++)for(ee=0;ee<z;ee++)se[de++]=$[ee][re];return se}function C(S,E,N,D){let B;if(Array.isArray(S))B=h.fromArray(S);else if(typeof S=="string"){let R=E;if(!R){const q=h.rawSplit(S);R=u.getBestVersionForData(q,N)}B=h.fromString(S,R||40)}else throw new Error("Invalid data");const O=u.getBestVersionForData(B,N);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=O;else if(E<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const z=T(E,N,B),L=n.getSymbolSize(E),x=new s(L);return w(x,E),g(x),y(x,E),I(x,N,0),E>=7&&A(x,E),m(x,z),isNaN(D)&&(D=l.getBestMask(x,I.bind(null,x,N))),l.applyMask(D,x),I(x,N,D),{modules:x,version:E,errorCorrectionLevel:N,maskPattern:D,segments:B}}return dr.create=function(E,N){if(typeof E>"u"||E==="")throw new Error("No input text");let D=e.M,B,O;return typeof N<"u"&&(D=e.from(N.errorCorrectionLevel,e.M),B=u.from(N.version),O=l.from(N.maskPattern),N.toSJISFunc&&n.setToSJISFunction(N.toSJISFunc)),C(E,B,D,O)},dr}var Rr={},Pr={},Ia;function yc(){return Ia||(Ia=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(i){return[i,i]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,i=s.width&&s.width>=21?s.width:void 0,l=s.scale||4;return{width:i,scale:i?4:l,margin:r,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},n.getImageWidth=function(s,r){const i=n.getScale(s,r);return Math.floor((s+r.margin*2)*i)},n.qrToImageData=function(s,r,i){const l=r.modules.size,a=r.modules.data,o=n.getScale(l,i),u=Math.floor((l+i.margin*2)*o),d=i.margin*o,p=[i.color.light,i.color.dark];for(let h=0;h<u;h++)for(let w=0;w<u;w++){let g=(h*u+w)*4,y=i.color.light;if(h>=d&&w>=d&&h<u-d&&w<u-d){const A=Math.floor((h-d)/o),I=Math.floor((w-d)/o);y=p[a[A*l+I]?1:0]}s[g++]=y.r,s[g++]=y.g,s[g++]=y.b,s[g]=y.a}}})(Pr)),Pr}var Da;function ap(){return Da||(Da=1,(function(n){const e=yc();function t(r,i,l){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,l,a){let o=a,u=l;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),l||(u=s()),o=e.getOptions(o);const d=e.getImageWidth(i.modules.size,o),p=u.getContext("2d"),h=p.createImageData(d,d);return e.qrToImageData(h.data,i,o),t(p,u,d),p.putImageData(h,0,0),u},n.renderToDataURL=function(i,l,a){let o=a;typeof o>"u"&&(!l||!l.getContext)&&(o=l,l=void 0),o||(o={});const u=n.render(i,l,o),d=o.type||"image/png",p=o.rendererOpts||{};return u.toDataURL(d,p.quality)}})(Rr)),Rr}var Or={},Na;function op(){if(Na)return Or;Na=1;const n=yc();function e(r,i){const l=r.a/255,a=i+'="'+r.hex+'"';return l<1?a+" "+i+'-opacity="'+l.toFixed(2).slice(1)+'"':a}function t(r,i,l){let a=r+i;return typeof l<"u"&&(a+=" "+l),a}function s(r,i,l){let a="",o=0,u=!1,d=0;for(let p=0;p<r.length;p++){const h=Math.floor(p%i),w=Math.floor(p/i);!h&&!u&&(u=!0),r[p]?(d++,p>0&&h>0&&r[p-1]||(a+=u?t("M",h+l,.5+w+l):t("m",o,0),o=0,u=!1),h+1<i&&r[p+1]||(a+=t("h",d),d=0)):o++}return a}return Or.render=function(i,l,a){const o=n.getOptions(l),u=i.modules.size,d=i.modules.data,p=u+o.margin*2,h=o.color.light.a?"<path "+e(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",w="<path "+e(o.color.dark,"stroke")+' d="'+s(d,u,o.margin)+'"/>',g='viewBox="0 0 '+p+" "+p+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+g+' shape-rendering="crispEdges">'+h+w+`</svg>
`;return typeof a=="function"&&a(null,A),A},Or}var Ra;function cp(){if(Ra)return jn;Ra=1;const n=Vh(),e=lp(),t=ap(),s=op();function r(i,l,a,o,u){const d=[].slice.call(arguments,1),p=d.length,h=typeof d[p-1]=="function";if(!h&&!n())throw new Error("Callback required as last argument");if(h){if(p<2)throw new Error("Too few arguments provided");p===2?(u=a,a=l,l=o=void 0):p===3&&(l.getContext&&typeof u>"u"?(u=o,o=void 0):(u=o,o=a,a=l,l=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(a=l,l=o=void 0):p===2&&!l.getContext&&(o=a,a=l,l=void 0),new Promise(function(w,g){try{const y=e.create(a,o);w(i(y,l,o))}catch(y){g(y)}})}try{const w=e.create(a,o);u(null,i(w,l,o))}catch(w){u(w)}}return jn.create=e.create,jn.toCanvas=r.bind(null,t.render),jn.toDataURL=r.bind(null,t.renderToDataURL),jn.toString=r.bind(null,function(i,l,a){return s.render(i,a)}),jn}var up=cp();const fp=ic(up);function Pa(n){let e,t,s,r="Join This Wabi House",i,l,a,o,u,d,p,h,w,g,y,A="Regenerate",I,m,T="Close",_,C;return{c(){e=k("div"),t=k("div"),s=k("h2"),s.textContent=r,i=F(),l=k("canvas"),a=F(),o=k("p"),u=J(n[4]),d=F(),p=k("div"),h=k("input"),w=F(),g=k("div"),y=k("button"),y.textContent=A,I=F(),m=k("button"),m.textContent=T,this.h()},l(S){e=b(S,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var E=P(e);t=b(E,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var N=P(t);s=b(N,"H2",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-147mrlj"&&(s.textContent=r),i=M(N),l=b(N,"CANVAS",{}),P(l).forEach(v),a=M(N),o=b(N,"P",{class:!0});var D=P(o);u=Z(D,n[4]),D.forEach(v),d=M(N),p=b(N,"DIV",{class:!0});var B=P(p);h=b(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(v),w=M(N),g=b(N,"DIV",{class:!0});var O=P(g);y=b(O,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-10gzc5i"&&(y.textContent=A),I=M(O),m=b(O,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-1muw4mw"&&(m.textContent=T),O.forEach(v),N.forEach(v),E.forEach(v),this.h()},h(){f(s,"class","svelte-13o88on"),f(o,"class","url svelte-13o88on"),f(h,"type","text"),f(h,"placeholder","Optional room name (e.g. kitchen)"),f(h,"class","svelte-13o88on"),f(p,"class","room-input svelte-13o88on"),f(y,"class","svelte-13o88on"),f(m,"class","svelte-13o88on"),f(g,"class","qr-actions svelte-13o88on"),f(t,"class","qr-modal svelte-13o88on"),f(t,"role","dialog"),f(t,"aria-modal","true"),f(t,"aria-label","QR code to join this Wabi house"),f(e,"class","qr-overlay svelte-13o88on"),f(e,"role","button"),f(e,"tabindex","0"),f(e,"aria-label","Close QR code modal")},m(S,E){V(S,e,E),c(e,t),c(t,s),c(t,i),c(t,l),n[10](l),c(t,a),c(t,o),c(o,u),c(t,d),c(t,p),c(p,h),st(h,n[3]),c(t,w),c(t,g),c(g,y),c(g,I),c(g,m),_||(C=[H(h,"input",n[11]),H(h,"input",n[12]),H(y,"click",n[6]),H(m,"click",n[13]),H(t,"click",it(n[7])),H(t,"keydown",it(n[8])),H(e,"click",n[14]),H(e,"keydown",n[15])],_=!0)},p(S,E){E&16&&ie(u,S[4]),E&8&&h.value!==S[3]&&st(h,S[3])},d(S){S&&v(e),n[10](null),_=!1,De(C)}}}function dp(n){let e,t,s,r,i,l,a,o,u,d="Join the Fridge",p,h,w="Scan to Join This House",g,y,A,I=n[2]&&Pa(n);return{c(){e=k("div"),t=k("div"),s=k("img"),i=F(),l=k("form"),a=k("input"),o=F(),u=k("button"),u.textContent=d,p=F(),h=k("button"),h.textContent=w,g=F(),I&&I.c(),this.h()},l(m){e=b(m,"DIV",{class:!0});var T=P(e);t=b(T,"DIV",{class:!0});var _=P(t);s=b(_,"IMG",{src:!0,alt:!0,class:!0}),i=M(_),l=b(_,"FORM",{});var C=P(l);a=b(C,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=M(C),u=b(C,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(u)!=="svelte-1jmevab"&&(u.textContent=d),C.forEach(v),p=M(_),h=b(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(h)!=="svelte-yn4djj"&&(h.textContent=w),_.forEach(v),g=M(T),I&&I.l(T),T.forEach(v),this.h()},h(){Ye(s.src,r="/wabi-logo.png")||f(s,"src",r),f(s,"alt","Wabi"),f(s,"class","logo svelte-13o88on"),f(a,"type","text"),f(a,"placeholder","Enter your name"),f(a,"maxlength","20"),a.required=!0,a.autofocus=!0,f(a,"class","svelte-13o88on"),f(u,"type","submit"),f(u,"class","join-btn svelte-13o88on"),f(h,"type","button"),f(h,"class","qr-btn svelte-13o88on"),f(t,"class","login-box svelte-13o88on"),f(e,"class","login-container svelte-13o88on")},m(m,T){V(m,e,T),c(e,t),c(t,s),c(t,i),c(t,l),c(l,a),st(a,n[0]),c(l,o),c(l,u),c(t,p),c(t,h),c(e,g),I&&I.m(e,null),a.focus(),y||(A=[H(a,"input",n[9]),H(l,"submit",Ac(n[5])),H(h,"click",n[6])],y=!0)},p(m,[T]){T&1&&a.value!==m[0]&&st(a,m[0]),m[2]?I?I.p(m,T):(I=Pa(m),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i:Me,o:Me,d(m){m&&v(e),I&&I.d(),y=!1,De(A)}}}function hp(n,e,t){let s;const r=Wr();let i="",l,a=!1,o="";function u(){i.trim()&&(localStorage.setItem("wabi-username",i.trim()),r("login",i.trim()))}function d(){t(2,a=!0),setTimeout(()=>{const _=o.trim()?`${s}?room=${encodeURIComponent(o.trim())}`:s;fp.toCanvas(l,_,{width:300,margin:2,color:{dark:"#ffffff",light:"#00000000"}})},50)}function p(_){Gt.call(this,n,_)}function h(_){Gt.call(this,n,_)}function w(){i=this.value,t(0,i)}function g(_){rt[_?"unshift":"push"](()=>{l=_,t(1,l)})}function y(){o=this.value,t(3,o)}const A=()=>setTimeout(d,300),I=()=>t(2,a=!1),m=()=>t(2,a=!1),T=_=>(_.key==="Escape"||_.key===" ")&&t(2,a=!1);return t(4,s=typeof window<"u"?`${window.location.origin}./`:""),[i,l,a,o,s,u,d,p,h,w,g,y,A,I,m,T]}class pp extends gt{constructor(e){super(),mt(this,e,hp,dp,pt,{})}}function Oa(n,e,t){const s=n.slice();return s[27]=e[t],s}function Ma(n){let e,t,s,r="Total Messages",i,l,a=n[3].totalMessages.toLocaleString()+"",o,u,d,p,h="Storage Used",w,g,y=Vs(n[3].totalSize)+"",A,I,m,T,_="Archives",C,S,E=n[3].archives.length+"",N,D,B,O,z,L="Rotation Period",x,R,q,Y="Weekly",j,K="Monthly",G,W="Every 6 Months",$,te="Yearly",le,se,de="How often to create a new archive file (like changing batteries)",re,ee,ce,ke,Ce="Keep Last",Le,be,ae,ve,_e,pe="archives",Q,ue,we="Older archives are automatically deleted to save space",xe,Pe,Ie,Ve,Fe="ðŸ—‘ï¸ Clear All History",et,lt;function vt(ye,je){return ye[3].archives.length>0?mp:gp}let Rt=vt(n),fe=Rt(n);return{c(){e=k("div"),t=k("div"),s=k("div"),s.textContent=r,i=F(),l=k("div"),o=J(a),u=F(),d=k("div"),p=k("div"),p.textContent=h,w=F(),g=k("div"),A=J(y),I=F(),m=k("div"),T=k("div"),T.textContent=_,C=F(),S=k("div"),N=J(E),D=F(),B=k("div"),O=k("label"),z=k("span"),z.textContent=L,x=F(),R=k("select"),q=k("option"),q.textContent=Y,j=k("option"),j.textContent=K,G=k("option"),G.textContent=W,$=k("option"),$.textContent=te,le=F(),se=k("p"),se.textContent=de,re=F(),ee=k("div"),ce=k("label"),ke=k("span"),ke.textContent=Ce,Le=F(),be=k("div"),ae=k("input"),ve=F(),_e=k("span"),_e.textContent=pe,Q=F(),ue=k("p"),ue.textContent=we,xe=F(),fe.c(),Pe=F(),Ie=k("div"),Ve=k("button"),Ve.textContent=Fe,this.h()},l(ye){e=b(ye,"DIV",{class:!0});var je=P(e);t=b(je,"DIV",{class:!0});var _t=P(t);s=b(_t,"DIV",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-akn32o"&&(s.textContent=r),i=M(_t),l=b(_t,"DIV",{class:!0});var Pt=P(l);o=Z(Pt,a),Pt.forEach(v),_t.forEach(v),u=M(je),d=b(je,"DIV",{class:!0});var ne=P(d);p=b(ne,"DIV",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-5vlbe4"&&(p.textContent=h),w=M(ne),g=b(ne,"DIV",{class:!0});var Ee=P(g);A=Z(Ee,y),Ee.forEach(v),ne.forEach(v),I=M(je),m=b(je,"DIV",{class:!0});var Xe=P(m);T=b(Xe,"DIV",{class:!0,"data-svelte-h":!0}),X(T)!=="svelte-1e1df45"&&(T.textContent=_),C=M(Xe),S=b(Xe,"DIV",{class:!0});var Tt=P(S);N=Z(Tt,E),Tt.forEach(v),Xe.forEach(v),je.forEach(v),D=M(ye),B=b(ye,"DIV",{class:!0});var tt=P(B);O=b(tt,"LABEL",{class:!0});var bt=P(O);z=b(bt,"SPAN",{class:!0,"data-svelte-h":!0}),X(z)!=="svelte-608xyy"&&(z.textContent=L),x=M(bt),R=b(bt,"SELECT",{class:!0});var xt=P(R);q=b(xt,"OPTION",{"data-svelte-h":!0}),X(q)!=="svelte-crm6lv"&&(q.textContent=Y),j=b(xt,"OPTION",{"data-svelte-h":!0}),X(j)!=="svelte-hva46z"&&(j.textContent=K),G=b(xt,"OPTION",{"data-svelte-h":!0}),X(G)!=="svelte-1s0lvql"&&(G.textContent=W),$=b(xt,"OPTION",{"data-svelte-h":!0}),X($)!=="svelte-jp5v27"&&($.textContent=te),xt.forEach(v),bt.forEach(v),le=M(tt),se=b(tt,"P",{class:!0,"data-svelte-h":!0}),X(se)!=="svelte-qu5pay"&&(se.textContent=de),tt.forEach(v),re=M(ye),ee=b(ye,"DIV",{class:!0});var nn=P(ee);ce=b(nn,"LABEL",{class:!0});var dt=P(ce);ke=b(dt,"SPAN",{class:!0,"data-svelte-h":!0}),X(ke)!=="svelte-1im50qe"&&(ke.textContent=Ce),Le=M(dt),be=b(dt,"DIV",{class:!0});var Ot=P(be);ae=b(Ot,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ve=M(Ot),_e=b(Ot,"SPAN",{class:!0,"data-svelte-h":!0}),X(_e)!=="svelte-nj3imy"&&(_e.textContent=pe),Ot.forEach(v),dt.forEach(v),Q=M(nn),ue=b(nn,"P",{class:!0,"data-svelte-h":!0}),X(ue)!=="svelte-he359b"&&(ue.textContent=we),nn.forEach(v),xe=M(ye),fe.l(ye),Pe=M(ye),Ie=b(ye,"DIV",{class:!0});var Tn=P(Ie);Ve=b(Tn,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Ve)!=="svelte-1u0bcm7"&&(Ve.textContent=Fe),Tn.forEach(v),this.h()},h(){f(s,"class","stat-label svelte-1jfalu6"),f(l,"class","stat-value svelte-1jfalu6"),f(t,"class","stat svelte-1jfalu6"),f(p,"class","stat-label svelte-1jfalu6"),f(g,"class","stat-value svelte-1jfalu6"),f(d,"class","stat svelte-1jfalu6"),f(T,"class","stat-label svelte-1jfalu6"),f(S,"class","stat-value svelte-1jfalu6"),f(m,"class","stat svelte-1jfalu6"),f(e,"class","stats-panel svelte-1jfalu6"),f(z,"class","label svelte-1jfalu6"),q.__value="week",st(q,q.__value),j.__value="month",st(j,j.__value),G.__value="half-year",st(G,G.__value),$.__value="year",st($,$.__value),f(R,"class","svelte-1jfalu6"),n[1]===void 0&&Sc(()=>n[20].call(R)),f(O,"class","svelte-1jfalu6"),f(se,"class","hint svelte-1jfalu6"),f(B,"class","setting-group svelte-1jfalu6"),f(ke,"class","label svelte-1jfalu6"),f(ae,"type","number"),f(ae,"min","1"),f(ae,"max","52"),f(ae,"class","svelte-1jfalu6"),f(_e,"class","unit svelte-1jfalu6"),f(be,"class","number-input-group svelte-1jfalu6"),f(ce,"class","svelte-1jfalu6"),f(ue,"class","hint svelte-1jfalu6"),f(ee,"class","setting-group svelte-1jfalu6"),f(Ve,"class","btn-danger svelte-1jfalu6"),f(Ie,"class","actions svelte-1jfalu6")},m(ye,je){V(ye,e,je),c(e,t),c(t,s),c(t,i),c(t,l),c(l,o),c(e,u),c(e,d),c(d,p),c(d,w),c(d,g),c(g,A),c(e,I),c(e,m),c(m,T),c(m,C),c(m,S),c(S,N),V(ye,D,je),V(ye,B,je),c(B,O),c(O,z),c(O,x),c(O,R),c(R,q),c(R,j),c(R,G),c(R,$),wi(R,n[1],!0),c(B,le),c(B,se),V(ye,re,je),V(ye,ee,je),c(ee,ce),c(ce,ke),c(ce,Le),c(ce,be),c(be,ae),st(ae,n[2]),c(be,ve),c(be,_e),c(ee,Q),c(ee,ue),V(ye,xe,je),fe.m(ye,je),V(ye,Pe,je),V(ye,Ie,je),c(Ie,Ve),et||(lt=[H(R,"change",n[20]),H(R,"change",n[11]),H(ae,"input",n[21]),H(ae,"change",n[12]),H(Ve,"click",n[17])],et=!0)},p(ye,je){je&8&&a!==(a=ye[3].totalMessages.toLocaleString()+"")&&ie(o,a),je&8&&y!==(y=Vs(ye[3].totalSize)+"")&&ie(A,y),je&8&&E!==(E=ye[3].archives.length+"")&&ie(N,E),je&2&&wi(R,ye[1]),je&4&&Yr(ae.value)!==ye[2]&&st(ae,ye[2]),Rt===(Rt=vt(ye))&&fe?fe.p(ye,je):(fe.d(1),fe=Rt(ye),fe&&(fe.c(),fe.m(Pe.parentNode,Pe)))},d(ye){ye&&(v(e),v(D),v(B),v(re),v(ee),v(xe),v(Pe),v(Ie)),fe.d(ye),et=!1,De(lt)}}}function gp(n){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1jfalu6")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function mp(n){let e,t,s,r="Archive History",i,l,a="ðŸ“¦ Export All",o,u,d,p,h=Ke(n[3].archives),w=[];for(let g=0;g<h.length;g+=1)w[g]=Fa(Oa(n,h,g));return{c(){e=k("div"),t=k("div"),s=k("h4"),s.textContent=r,i=F(),l=k("button"),l.textContent=a,o=F(),u=k("div");for(let g=0;g<w.length;g+=1)w[g].c();this.h()},l(g){e=b(g,"DIV",{class:!0});var y=P(e);t=b(y,"DIV",{class:!0});var A=P(t);s=b(A,"H4",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1i91zrs"&&(s.textContent=r),i=M(A),l=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-197zvis"&&(l.textContent=a),A.forEach(v),o=M(y),u=b(y,"DIV",{class:!0});var I=P(u);for(let m=0;m<w.length;m+=1)w[m].l(I);I.forEach(v),y.forEach(v),this.h()},h(){f(s,"class","svelte-1jfalu6"),f(l,"class","btn-small svelte-1jfalu6"),f(t,"class","section-header svelte-1jfalu6"),f(u,"class","archive-list svelte-1jfalu6"),f(e,"class","archives-section svelte-1jfalu6")},m(g,y){V(g,e,y),c(e,t),c(t,s),c(t,i),c(t,l),c(e,o),c(e,u);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(u,null);d||(p=H(l,"click",n[16]),d=!0)},p(g,y){if(y&40968){h=Ke(g[3].archives);let A;for(A=0;A<h.length;A+=1){const I=Oa(g,h,A);w[A]?w[A].p(I,y):(w[A]=Fa(I),w[A].c(),w[A].m(u,null))}for(;A<w.length;A+=1)w[A].d(1);w.length=h.length}},d(g){g&&v(e),Gs(w,g),d=!1,p()}}}function Fa(n){let e,t,s,r=Hs(n[27].period)+"",i,l,a,o=Vs(n[27].size)+"",u,d,p=n[27].messageCount.toLocaleString()+"",h,w,g,y,A,I="ðŸ’¾",m,T,_="ðŸ—‘ï¸",C,S,E;function N(){return n[22](n[27])}function D(){return n[23](n[27])}return{c(){e=k("div"),t=k("div"),s=k("span"),i=J(r),l=F(),a=k("span"),u=J(o),d=J(" â€¢ "),h=J(p),w=J(" messages"),g=F(),y=k("div"),A=k("button"),A.textContent=I,m=F(),T=k("button"),T.textContent=_,C=F(),this.h()},l(B){e=b(B,"DIV",{class:!0});var O=P(e);t=b(O,"DIV",{class:!0});var z=P(t);s=b(z,"SPAN",{class:!0});var L=P(s);i=Z(L,r),L.forEach(v),l=M(z),a=b(z,"SPAN",{class:!0});var x=P(a);u=Z(x,o),d=Z(x," â€¢ "),h=Z(x,p),w=Z(x," messages"),x.forEach(v),z.forEach(v),g=M(O),y=b(O,"DIV",{class:!0});var R=P(y);A=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(A)!=="svelte-13e8aja"&&(A.textContent=I),m=M(R),T=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(T)!=="svelte-1br206h"&&(T.textContent=_),R.forEach(v),C=M(O),O.forEach(v),this.h()},h(){f(s,"class","archive-period svelte-1jfalu6"),f(a,"class","archive-meta svelte-1jfalu6"),f(t,"class","archive-info svelte-1jfalu6"),f(A,"class","btn-icon svelte-1jfalu6"),f(A,"title","Export"),f(T,"class","btn-icon danger svelte-1jfalu6"),f(T,"title","Delete"),f(y,"class","archive-actions svelte-1jfalu6"),f(e,"class","archive-item svelte-1jfalu6")},m(B,O){V(B,e,O),c(e,t),c(t,s),c(s,i),c(t,l),c(t,a),c(a,u),c(a,d),c(a,h),c(a,w),c(e,g),c(e,y),c(y,A),c(y,m),c(y,T),c(e,C),S||(E=[H(A,"click",N),H(T,"click",D)],S=!0)},p(B,O){n=B,O&8&&r!==(r=Hs(n[27].period)+"")&&ie(i,r),O&8&&o!==(o=Vs(n[27].size)+"")&&ie(u,o),O&8&&p!==(p=n[27].messageCount.toLocaleString()+"")&&ie(h,p)},d(B){B&&v(e),S=!1,De(E)}}}function vp(n){let e,t,s='<h3 class="svelte-1jfalu6">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-1jfalu6">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,l,a,o,u,d="Save chat history locally",p,h,w="When enabled, messages are stored in your browser. You control your data.",g,y,A,I,m,T,_,C,S,E,N=n[0]&&Ma(n);return A=new Rn({props:{isOpen:n[4],title:"Disable Local Storage",message:"Disable local storage? Your saved history will remain until you clear it manually.",confirmText:"Disable",variant:"warning",onConfirm:n[9],onCancel:n[10]}}),m=new Rn({props:{isOpen:n[5],title:"Delete Archive",message:`Delete archive "${Hs(n[6])}"?`,confirmText:"Delete",variant:"danger",onConfirm:n[14],onCancel:n[24]}}),_=new Rn({props:{isOpen:n[7],title:"Delete All History",message:"Delete ALL saved chat history? This cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[18],onCancel:n[25]}}),{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=F(),i=k("div"),l=k("label"),a=k("input"),o=F(),u=k("span"),u.textContent=d,p=F(),h=k("p"),h.textContent=w,g=F(),N&&N.c(),y=F(),$e(A.$$.fragment),I=F(),$e(m.$$.fragment),T=F(),$e(_.$$.fragment),this.h()},l(D){e=b(D,"DIV",{class:!0});var B=P(e);t=b(B,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-s9o5r3"&&(t.innerHTML=s),r=M(B),i=b(B,"DIV",{class:!0});var O=P(i);l=b(O,"LABEL",{class:!0});var z=P(l);a=b(z,"INPUT",{type:!0,class:!0}),o=M(z),u=b(z,"SPAN",{class:!0,"data-svelte-h":!0}),X(u)!=="svelte-1ssgcs1"&&(u.textContent=d),z.forEach(v),p=M(O),h=b(O,"P",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1hbmqvb"&&(h.textContent=w),O.forEach(v),g=M(B),N&&N.l(B),B.forEach(v),y=M(D),Qe(A.$$.fragment,D),I=M(D),Qe(m.$$.fragment,D),T=M(D),Qe(_.$$.fragment,D),this.h()},h(){f(t,"class","header svelte-1jfalu6"),f(a,"type","checkbox"),f(a,"class","svelte-1jfalu6"),f(u,"class","toggle-label"),f(l,"class","toggle-setting svelte-1jfalu6"),f(h,"class","hint svelte-1jfalu6"),f(i,"class","setting-group svelte-1jfalu6"),f(e,"class","storage-settings svelte-1jfalu6")},m(D,B){V(D,e,B),c(e,t),c(e,r),c(e,i),c(i,l),c(l,a),a.checked=n[0],c(l,o),c(l,u),c(i,p),c(i,h),c(e,g),N&&N.m(e,null),V(D,y,B),Je(A,D,B),V(D,I,B),Je(m,D,B),V(D,T,B),Je(_,D,B),C=!0,S||(E=[H(a,"change",n[19]),H(a,"change",n[8])],S=!0)},p(D,[B]){B&1&&(a.checked=D[0]),D[0]?N?N.p(D,B):(N=Ma(D),N.c(),N.m(e,null)):N&&(N.d(1),N=null);const O={};B&16&&(O.isOpen=D[4]),A.$set(O);const z={};B&32&&(z.isOpen=D[5]),B&64&&(z.message=`Delete archive "${Hs(D[6])}"?`),B&32&&(z.onCancel=D[24]),m.$set(z);const L={};B&128&&(L.isOpen=D[7]),B&128&&(L.onCancel=D[25]),_.$set(L)},i(D){C||(Ae(A.$$.fragment,D),Ae(m.$$.fragment,D),Ae(_.$$.fragment,D),C=!0)},o(D){Oe(A.$$.fragment,D),Oe(m.$$.fragment,D),Oe(_.$$.fragment,D),C=!1},d(D){D&&(v(e),v(y),v(I),v(T)),N&&N.d(),Ze(A,D),Ze(m,D),Ze(_,D),S=!1,De(E)}}}function Vs(n){if(n===0)return"0 B";const e=n/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}function Hs(n){if(n.includes("-W")){const[e,t]=n.split("-W");return`Week ${t}, ${e}`}else if(n.includes("-H")){const[e,t]=n.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(n.match(/^\d{4}-\d{2}$/)){const[e,t]=n.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${n}`}function _p(n,e,t){let s=!1,r=Ut.getRotationPeriod(),i=Ut.getMaxArchives(),l={archives:[],totalSize:0,totalMessages:0},a=!1,o=!1,u="",d=!1;async function p(){t(0,s=!s),await Ut.setEnabled(s),s?await S():t(4,a=!0)}async function h(){t(4,a=!1),await S()}function w(){t(0,s=!0),Ut.setEnabled(!0),t(4,a=!1)}async function g(){await Ut.setRotationPeriod(r),await S()}async function y(){await Ut.setMaxArchives(i),await S()}async function A(x){t(6,u=x),t(5,o=!0)}async function I(){await Ut.deleteArchive(u),await S(),t(5,o=!1)}async function m(x){await Ut.exportArchive(x)}async function T(){await Ut.exportArchives()}async function _(){t(7,d=!0)}async function C(){await Ut.clearAllHistory(),await S(),t(7,d=!1)}async function S(){t(3,l=await Ut.getStats())}function E(){s=this.checked,t(0,s)}function N(){r=Ic(this),t(1,r)}function D(){i=Yr(this.value),t(2,i)}return[s,r,i,l,a,o,u,d,p,h,w,g,y,A,I,m,T,_,C,E,N,D,x=>m(x.period),x=>A(x.period),()=>t(5,o=!1),()=>t(7,d=!1)]}class bp extends gt{constructor(e){super(),mt(this,e,_p,vp,pt,{})}}function za(n){let e,t,s,r,i="âš™ï¸ Settings",l,a,o="âœ•",u,d,p,h,w="ðŸŽ¤ Audio & Video",g,y,A,I='<span class="setting-label svelte-xjesm1">Sound Effects</span> <span class="setting-description svelte-xjesm1">Play sounds for messages and notifications</span>',m,T,_=n[1]?"ðŸ”Š":"ðŸ”‡",C,S,E,N,D='<span class="setting-label svelte-xjesm1">Microphone</span> <span class="setting-description svelte-xjesm1">Enable microphone for voice calls</span>',B,O,z=n[3]?"ðŸŽ¤":"ðŸ”‡",L,x,R,q,Y='<span class="setting-label svelte-xjesm1">Camera</span> <span class="setting-description svelte-xjesm1">Enable camera for video calls</span>',j,K,G=n[4]?"ðŸ“¹":"ðŸ“·",W,$,te,le,se="ðŸ”” Notifications",de,re,ee,ce='<span class="setting-label svelte-xjesm1">Desktop Notifications</span> <span class="setting-description svelte-xjesm1">Get notified when you receive new messages</span>',ke,Ce,Le=n[2]?"âœ… Enabled":"ðŸ”” Enable",be,ae,ve,_e,pe='<span class="setting-label svelte-xjesm1">ðŸ”Š Notification Sound</span> <span class="setting-description svelte-xjesm1">Choose which sound to play for notifications</span>',Q,ue,we,xe="ProjectSound.ogg",Pe,Ie,Ve="ðŸŽµ Test Sound",Fe,et,lt,vt,Rt="ðŸ”‰ Notification Volume",fe,ye,je,_t=Math.round(n[7]*100)+"",Pt,ne,Ee,Xe,Tt,tt,bt,xt="ðŸŽ¨ Appearance",nn,dt,Ot,Tn='<span class="setting-label svelte-xjesm1">Theme</span> <span class="setting-description svelte-xjesm1">Switch between light and dark mode</span>',at,yt,Cn=n[5]==="dark"?"ðŸŒ™":"â˜€ï¸",An,Sn,Yt,sn,gs="ðŸ–¥ï¸ Server Management",Mt,Et,rn,Kn='<span class="setting-label svelte-xjesm1">Clear All Server Messages</span> <span class="setting-description svelte-xjesm1">Delete all messages from the server for all users (cannot be undone)</span>',In,Kt,qt="ðŸ—‘ï¸ Clear Server",Ln,hn,ln,xn,pn,me='<h3 class="svelte-xjesm1">â„¹ï¸ About</h3> <div class="about-info svelte-xjesm1"><p class="svelte-xjesm1"><strong class="svelte-xjesm1">Wabi Chat</strong></p> <p class="svelte-xjesm1">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-xjesm1">Server stores nothing permanently. You control your data.</p> <p class="version svelte-xjesm1">Version 1.0.0</p></div>',U,oe,ge;return ln=new bp({}),{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),r.textContent=i,l=F(),a=k("button"),a.textContent=o,u=F(),d=k("div"),p=k("div"),h=k("h3"),h.textContent=w,g=F(),y=k("div"),A=k("div"),A.innerHTML=I,m=F(),T=k("button"),C=J(_),S=F(),E=k("div"),N=k("div"),N.innerHTML=D,B=F(),O=k("button"),L=J(z),x=F(),R=k("div"),q=k("div"),q.innerHTML=Y,j=F(),K=k("button"),W=J(G),$=F(),te=k("div"),le=k("h3"),le.textContent=se,de=F(),re=k("div"),ee=k("div"),ee.innerHTML=ce,ke=F(),Ce=k("button"),be=J(Le),ae=F(),ve=k("div"),_e=k("div"),_e.innerHTML=pe,Q=F(),ue=k("div"),we=k("button"),we.textContent=xe,Pe=F(),Ie=k("button"),Ie.textContent=Ve,Fe=F(),et=k("div"),lt=k("div"),vt=k("span"),vt.textContent=Rt,fe=F(),ye=k("span"),je=J("Adjust the volume of notification sounds ("),Pt=J(_t),ne=J("%)"),Ee=F(),Xe=k("input"),Tt=F(),tt=k("div"),bt=k("h3"),bt.textContent=xt,nn=F(),dt=k("div"),Ot=k("div"),Ot.innerHTML=Tn,at=F(),yt=k("button"),An=J(Cn),Sn=F(),Yt=k("div"),sn=k("h3"),sn.textContent=gs,Mt=F(),Et=k("div"),rn=k("div"),rn.innerHTML=Kn,In=F(),Kt=k("button"),Kt.textContent=qt,Ln=F(),hn=k("div"),$e(ln.$$.fragment),xn=F(),pn=k("div"),pn.innerHTML=me,this.h()},l(Te){e=b(Te,"DIV",{class:!0});var Ue=P(e);t=b(Ue,"DIV",{class:!0});var nt=P(t);s=b(nt,"DIV",{class:!0});var ht=P(s);r=b(ht,"H2",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-15bbpfh"&&(r.textContent=i),l=M(ht),a=b(ht,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-3o141q"&&(a.textContent=o),ht.forEach(v),u=M(nt),d=b(nt,"DIV",{class:!0});var ot=P(d);p=b(ot,"DIV",{class:!0});var Ct=P(p);h=b(Ct,"H3",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1tdb4hv"&&(h.textContent=w),g=M(Ct),y=b(Ct,"DIV",{class:!0});var _n=P(y);A=b(_n,"DIV",{class:!0,"data-svelte-h":!0}),X(A)!=="svelte-5e193f"&&(A.innerHTML=I),m=M(_n),T=b(_n,"BUTTON",{class:!0});var ut=P(T);C=Z(ut,_),ut.forEach(v),_n.forEach(v),S=M(Ct),E=b(Ct,"DIV",{class:!0});var Dn=P(E);N=b(Dn,"DIV",{class:!0,"data-svelte-h":!0}),X(N)!=="svelte-ql0oob"&&(N.innerHTML=D),B=M(Dn),O=b(Dn,"BUTTON",{class:!0});var Xn=P(O);L=Z(Xn,z),Xn.forEach(v),Dn.forEach(v),x=M(Ct),R=b(Ct,"DIV",{class:!0});var ms=P(R);q=b(ms,"DIV",{class:!0,"data-svelte-h":!0}),X(q)!=="svelte-fu2kxq"&&(q.innerHTML=Y),j=M(ms),K=b(ms,"BUTTON",{class:!0});var mi=P(K);W=Z(mi,G),mi.forEach(v),ms.forEach(v),Ct.forEach(v),$=M(ot),te=b(ot,"DIV",{class:!0});var bn=P(te);le=b(bn,"H3",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-yb4801"&&(le.textContent=se),de=M(bn),re=b(bn,"DIV",{class:!0});var vs=P(re);ee=b(vs,"DIV",{class:!0,"data-svelte-h":!0}),X(ee)!=="svelte-11j8eba"&&(ee.innerHTML=ce),ke=M(vs),Ce=b(vs,"BUTTON",{class:!0});var vi=P(Ce);be=Z(vi,Le),vi.forEach(v),vs.forEach(v),ae=M(bn),ve=b(bn,"DIV",{class:!0});var Un=P(ve);_e=b(Un,"DIV",{class:!0,"data-svelte-h":!0}),X(_e)!=="svelte-1xiuakk"&&(_e.innerHTML=pe),Q=M(Un),ue=b(Un,"DIV",{class:!0});var _i=P(ue);we=b(_i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(we)!=="svelte-uo9hxj"&&(we.textContent=xe),_i.forEach(v),Pe=M(Un),Ie=b(Un,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Ie)!=="svelte-1g396qj"&&(Ie.textContent=Ve),Un.forEach(v),Fe=M(bn),et=b(bn,"DIV",{class:!0});var _s=P(et);lt=b(_s,"DIV",{class:!0});var bs=P(lt);vt=b(bs,"SPAN",{class:!0,"data-svelte-h":!0}),X(vt)!=="svelte-wf5473"&&(vt.textContent=Rt),fe=M(bs),ye=b(bs,"SPAN",{class:!0});var ks=P(ye);je=Z(ks,"Adjust the volume of notification sounds ("),Pt=Z(ks,_t),ne=Z(ks,"%)"),ks.forEach(v),bs.forEach(v),Ee=M(_s),Xe=b(_s,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),_s.forEach(v),bn.forEach(v),Tt=M(ot),tt=b(ot,"DIV",{class:!0});var ws=P(tt);bt=b(ws,"H3",{class:!0,"data-svelte-h":!0}),X(bt)!=="svelte-bdq4j0"&&(bt.textContent=xt),nn=M(ws),dt=b(ws,"DIV",{class:!0});var ys=P(dt);Ot=b(ys,"DIV",{class:!0,"data-svelte-h":!0}),X(Ot)!=="svelte-1expsbb"&&(Ot.innerHTML=Tn),at=M(ys),yt=b(ys,"BUTTON",{class:!0});var bi=P(yt);An=Z(bi,Cn),bi.forEach(v),ys.forEach(v),ws.forEach(v),Sn=M(ot),Yt=b(ot,"DIV",{class:!0});var Es=P(Yt);sn=b(Es,"H3",{class:!0,"data-svelte-h":!0}),X(sn)!=="svelte-13bxj89"&&(sn.textContent=gs),Mt=M(Es),Et=b(Es,"DIV",{class:!0});var Ts=P(Et);rn=b(Ts,"DIV",{class:!0,"data-svelte-h":!0}),X(rn)!=="svelte-1kywvm7"&&(rn.innerHTML=Kn),In=M(Ts),Kt=b(Ts,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Kt)!=="svelte-uzfcg3"&&(Kt.textContent=qt),Ts.forEach(v),Es.forEach(v),Ln=M(ot),hn=b(ot,"DIV",{class:!0});var ki=P(hn);Qe(ln.$$.fragment,ki),ki.forEach(v),xn=M(ot),pn=b(ot,"DIV",{class:!0,"data-svelte-h":!0}),X(pn)!=="svelte-137zy12"&&(pn.innerHTML=me),ot.forEach(v),nt.forEach(v),Ue.forEach(v),this.h()},h(){f(r,"class","svelte-xjesm1"),f(a,"class","close-btn svelte-xjesm1"),f(s,"class","modal-header svelte-xjesm1"),f(h,"class","svelte-xjesm1"),f(A,"class","setting-info svelte-xjesm1"),f(T,"class","toggle-btn svelte-xjesm1"),he(T,"active",n[1]),f(y,"class","setting-item svelte-xjesm1"),f(N,"class","setting-info svelte-xjesm1"),f(O,"class","toggle-btn svelte-xjesm1"),he(O,"active",n[3]),f(E,"class","setting-item svelte-xjesm1"),f(q,"class","setting-info svelte-xjesm1"),f(K,"class","toggle-btn svelte-xjesm1"),he(K,"active",n[4]),f(R,"class","setting-item svelte-xjesm1"),f(p,"class","settings-section svelte-xjesm1"),f(le,"class","svelte-xjesm1"),f(ee,"class","setting-info svelte-xjesm1"),f(Ce,"class","action-btn svelte-xjesm1"),he(Ce,"active",n[2]),f(re,"class","setting-item svelte-xjesm1"),f(_e,"class","setting-info svelte-xjesm1"),f(we,"class","sound-option svelte-xjesm1"),he(we,"active",n[6]==="/sounds/ProjectSound.ogg"),f(ue,"class","sound-options svelte-xjesm1"),f(Ie,"class","test-sound-btn svelte-xjesm1"),f(ve,"class","setting-item-full svelte-xjesm1"),f(vt,"class","setting-label svelte-xjesm1"),f(ye,"class","setting-description svelte-xjesm1"),f(lt,"class","setting-info svelte-xjesm1"),f(Xe,"type","range"),f(Xe,"min","0"),f(Xe,"max","1"),f(Xe,"step","0.05"),f(Xe,"class","volume-slider svelte-xjesm1"),f(et,"class","setting-item-full svelte-xjesm1"),f(te,"class","settings-section svelte-xjesm1"),f(bt,"class","svelte-xjesm1"),f(Ot,"class","setting-info svelte-xjesm1"),f(yt,"class","toggle-btn svelte-xjesm1"),he(yt,"active",n[5]==="light"),f(dt,"class","setting-item svelte-xjesm1"),f(tt,"class","settings-section svelte-xjesm1"),f(sn,"class","svelte-xjesm1"),f(rn,"class","setting-info svelte-xjesm1"),f(Kt,"class","action-btn danger svelte-xjesm1"),f(Et,"class","setting-item svelte-xjesm1"),f(Yt,"class","settings-section svelte-xjesm1"),f(hn,"class","settings-section svelte-xjesm1"),f(pn,"class","settings-section svelte-xjesm1"),f(d,"class","settings-sections svelte-xjesm1"),f(t,"class","modal-content svelte-xjesm1"),f(e,"class","modal-overlay svelte-xjesm1")},m(Te,Ue){V(Te,e,Ue),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(p,g),c(p,y),c(y,A),c(y,m),c(y,T),c(T,C),c(p,S),c(p,E),c(E,N),c(E,B),c(E,O),c(O,L),c(p,x),c(p,R),c(R,q),c(R,j),c(R,K),c(K,W),c(d,$),c(d,te),c(te,le),c(te,de),c(te,re),c(re,ee),c(re,ke),c(re,Ce),c(Ce,be),c(te,ae),c(te,ve),c(ve,_e),c(ve,Q),c(ve,ue),c(ue,we),c(ve,Pe),c(ve,Ie),c(te,Fe),c(te,et),c(et,lt),c(lt,vt),c(lt,fe),c(lt,ye),c(ye,je),c(ye,Pt),c(ye,ne),c(et,Ee),c(et,Xe),st(Xe,n[7]),c(d,Tt),c(d,tt),c(tt,bt),c(tt,nn),c(tt,dt),c(dt,Ot),c(dt,at),c(dt,yt),c(yt,An),c(d,Sn),c(d,Yt),c(Yt,sn),c(Yt,Mt),c(Yt,Et),c(Et,rn),c(Et,In),c(Et,Kt),c(d,Ln),c(d,hn),Je(ln,hn,null),c(d,xn),c(d,pn),U=!0,oe||(ge=[H(a,"click",n[21]),H(T,"click",n[10]),H(O,"click",n[11]),H(K,"click",n[12]),H(Ce,"click",n[17]),H(we,"click",n[23]),H(Ie,"click",n[16]),H(Xe,"change",n[24]),H(Xe,"input",n[24]),H(Xe,"input",n[25]),H(yt,"click",n[13]),H(Kt,"click",n[19]),H(t,"click",it(n[22])),H(e,"click",n[21])],oe=!0)},p(Te,Ue){(!U||Ue[0]&2)&&_!==(_=Te[1]?"ðŸ”Š":"ðŸ”‡")&&ie(C,_),(!U||Ue[0]&2)&&he(T,"active",Te[1]),(!U||Ue[0]&8)&&z!==(z=Te[3]?"ðŸŽ¤":"ðŸ”‡")&&ie(L,z),(!U||Ue[0]&8)&&he(O,"active",Te[3]),(!U||Ue[0]&16)&&G!==(G=Te[4]?"ðŸ“¹":"ðŸ“·")&&ie(W,G),(!U||Ue[0]&16)&&he(K,"active",Te[4]),(!U||Ue[0]&4)&&Le!==(Le=Te[2]?"âœ… Enabled":"ðŸ”” Enable")&&ie(be,Le),(!U||Ue[0]&4)&&he(Ce,"active",Te[2]),(!U||Ue[0]&64)&&he(we,"active",Te[6]==="/sounds/ProjectSound.ogg"),(!U||Ue[0]&128)&&_t!==(_t=Math.round(Te[7]*100)+"")&&ie(Pt,_t),Ue[0]&128&&st(Xe,Te[7]),(!U||Ue[0]&32)&&Cn!==(Cn=Te[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&ie(An,Cn),(!U||Ue[0]&32)&&he(yt,"active",Te[5]==="light")},i(Te){U||(Ae(ln.$$.fragment,Te),U=!0)},o(Te){Oe(ln.$$.fragment,Te),U=!1},d(Te){Te&&v(e),Ze(ln),oe=!1,De(ge)}}}function kp(n){let e,t,s,r,i,l=n[0]&&za(n);return t=new Rn({props:{isOpen:n[8],title:"Clear Local Data",message:"Are you sure you want to clear all chat data? This cannot be undone.",confirmText:"Clear Data",variant:"danger",onConfirm:n[18],onCancel:n[26]}}),r=new Rn({props:{isOpen:n[9],title:"Clear Server Messages",message:"Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!",confirmText:"Delete All",variant:"danger",onConfirm:n[20],onCancel:n[27]}}),{c(){l&&l.c(),e=F(),$e(t.$$.fragment),s=F(),$e(r.$$.fragment)},l(a){l&&l.l(a),e=M(a),Qe(t.$$.fragment,a),s=M(a),Qe(r.$$.fragment,a)},m(a,o){l&&l.m(a,o),V(a,e,o),Je(t,a,o),V(a,s,o),Je(r,a,o),i=!0},p(a,o){a[0]?l?(l.p(a,o),o[0]&1&&Ae(l,1)):(l=za(a),l.c(),Ae(l,1),l.m(e.parentNode,e)):l&&(Hn(),Oe(l,1,1,()=>{l=null}),Gn());const u={};o[0]&256&&(u.isOpen=a[8]),o[0]&256&&(u.onCancel=a[26]),t.$set(u);const d={};o[0]&512&&(d.isOpen=a[9]),o[0]&512&&(d.onCancel=a[27]),r.$set(d)},i(a){i||(Ae(l),Ae(t.$$.fragment,a),Ae(r.$$.fragment,a),i=!0)},o(a){Oe(l),Oe(t.$$.fragment,a),Oe(r.$$.fragment,a),i=!1},d(a){a&&(v(e),v(s)),l&&l.d(a),Ze(t,a),Ze(r,a)}}}function wp(n,e,t){Be(n,dn,R=>t(28,R)),Be(n,Vt,R=>t(29,R)),Be(n,St,R=>t(30,R));let{isOpen:s=!1}=e,r=!0,i=!0,l=!0,a=!0,o="dark",u="/sounds/ProjectSound.ogg",d=.5,p=!1,h=!1;function w(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function g(){t(3,l=!l),localStorage.setItem("micEnabled",l.toString())}function y(){t(4,a=!a),localStorage.setItem("cameraEnabled",a.toString())}function A(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}function I(R){t(6,u=R),localStorage.setItem("notificationSound",R)}function m(R){t(7,d=R),localStorage.setItem("notificationVolume",R.toString())}function T(){Wo()}async function _(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}function C(){St.set({general:[]}),localStorage.clear(),alert("All data cleared."),t(8,p=!1)}async function S(){t(9,h=!0)}async function E(){try{const R=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,Y=await(await fetch(`${R}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();Y.success?(St.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(Y.error||"Unknown error"))}catch(R){console.error("Error clearing server messages:",R),alert("Failed to clear server messages. Check console for details.")}t(9,h=!1)}function N(){t(0,s=!1)}function D(R){Gt.call(this,n,R)}const B=()=>I("/sounds/ProjectSound.ogg");function O(){d=Yr(this.value),t(7,d)}const z=R=>m(parseFloat(R.currentTarget.value)),L=()=>t(8,p=!1),x=()=>t(9,h=!1);return n.$$set=R=>{"isOpen"in R&&t(0,s=R.isOpen)},[s,r,i,l,a,o,u,d,p,h,w,g,y,A,I,m,T,_,C,S,E,N,D,B,O,z,L,x]}class yp extends gt{constructor(e){super(),mt(this,e,wp,kp,pt,{isOpen:0},null,[-1,-1])}}function Ba(n,e,t){const s=n.slice();return s[16]=e[t],s}function La(n){let e,t,s,r,i,l,a,o,u="Ã—",d,p,h,w;function g(I,m){return I[2].length===0?Tp:Ep}let y=g(n),A=y(n);return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),i=J("ðŸ“Œ Pinned Messages in #"),l=J(n[1]),a=F(),o=k("button"),o.textContent=u,d=F(),p=k("div"),A.c(),this.h()},l(I){e=b(I,"DIV",{class:!0});var m=P(e);t=b(m,"DIV",{class:!0});var T=P(t);s=b(T,"DIV",{class:!0});var _=P(s);r=b(_,"H2",{class:!0});var C=P(r);i=Z(C,"ðŸ“Œ Pinned Messages in #"),l=Z(C,n[1]),C.forEach(v),a=M(_),o=b(_,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-12zniqk"&&(o.textContent=u),_.forEach(v),d=M(T),p=b(T,"DIV",{class:!0});var S=P(p);A.l(S),S.forEach(v),T.forEach(v),m.forEach(v),this.h()},h(){f(r,"class","svelte-178cyr5"),f(o,"class","close-btn svelte-178cyr5"),f(s,"class","modal-header svelte-178cyr5"),f(p,"class","modal-body svelte-178cyr5"),f(t,"class","modal-content svelte-178cyr5"),f(e,"class","modal-overlay svelte-178cyr5")},m(I,m){V(I,e,m),c(e,t),c(t,s),c(s,r),c(r,i),c(r,l),c(s,a),c(s,o),c(t,d),c(t,p),A.m(p,null),h||(w=[H(o,"click",n[3]),H(t,"click",it(n[10])),H(e,"click",n[3])],h=!0)},p(I,m){m&2&&ie(l,I[1]),y===(y=g(I))&&A?A.p(I,m):(A.d(1),A=y(I),A&&(A.c(),A.m(p,null)))},d(I){I&&v(e),A.d(),h=!1,De(w)}}}function Ep(n){let e,t=[],s=new Map,r=Ke(n[2]);const i=l=>l[16].id;for(let l=0;l<r.length;l+=1){let a=Ba(n,r,l),o=i(a);s.set(o,t[l]=xa(o,a))}return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=b(l,"DIV",{class:!0});var a=P(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(v),this.h()},h(){f(e,"class","pinned-messages-list svelte-178cyr5")},m(l,a){V(l,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,a){a&116&&(r=Ke(l[2]),t=tn(t,a,i,1,l,r,s,e,en,xa,null,Ba))},d(l){l&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Tp(n){let e,t='<p class="svelte-178cyr5">No pinned messages in this channel</p> <p class="hint svelte-178cyr5">Right-click a message and select &quot;Pin Message&quot; to pin it here.</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1esi9tz"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-178cyr5")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function xa(n,e){let t,s,r,i,l=e[16].user+"",a,o,u,d=Ua(e[16].timestamp)+"",p,h,w,g,y="Jump to",A,I,m="Unpin",T,_,C=e[16].text+"",S,E,N,D;function B(){return e[11](e[16])}function O(){return e[12](e[16])}return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("div"),i=k("span"),a=J(l),o=F(),u=k("span"),p=J(d),h=F(),w=k("div"),g=k("button"),g.textContent=y,A=F(),I=k("button"),I.textContent=m,T=F(),_=k("div"),S=J(C),E=F(),this.h()},l(z){t=b(z,"DIV",{class:!0});var L=P(t);s=b(L,"DIV",{class:!0});var x=P(s);r=b(x,"DIV",{class:!0});var R=P(r);i=b(R,"SPAN",{class:!0,style:!0});var q=P(i);a=Z(q,l),q.forEach(v),o=M(R),u=b(R,"SPAN",{class:!0});var Y=P(u);p=Z(Y,d),Y.forEach(v),R.forEach(v),h=M(x),w=b(x,"DIV",{class:!0});var j=P(w);g=b(j,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(g)!=="svelte-1nadwym"&&(g.textContent=y),A=M(j),I=b(j,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(I)!=="svelte-eqnabo"&&(I.textContent=m),j.forEach(v),x.forEach(v),T=M(L),_=b(L,"DIV",{class:!0});var K=P(_);S=Z(K,C),K.forEach(v),E=M(L),L.forEach(v),this.h()},h(){f(i,"class","username svelte-178cyr5"),Ne(i,"color",e[6](e[16].user)),f(u,"class","timestamp svelte-178cyr5"),f(r,"class","user-info svelte-178cyr5"),f(g,"class","jump-btn svelte-178cyr5"),f(g,"title","Jump to message"),f(I,"class","unpin-btn svelte-178cyr5"),f(I,"title","Unpin message"),f(w,"class","action-buttons svelte-178cyr5"),f(s,"class","message-header svelte-178cyr5"),f(_,"class","message-text svelte-178cyr5"),f(t,"class","pinned-message svelte-178cyr5"),this.first=t},m(z,L){V(z,t,L),c(t,s),c(s,r),c(r,i),c(i,a),c(r,o),c(r,u),c(u,p),c(s,h),c(s,w),c(w,g),c(w,A),c(w,I),c(t,T),c(t,_),c(_,S),c(t,E),N||(D=[H(g,"click",B),H(I,"click",O)],N=!0)},p(z,L){e=z,L&4&&l!==(l=e[16].user+"")&&ie(a,l),L&4&&Ne(i,"color",e[6](e[16].user)),L&4&&d!==(d=Ua(e[16].timestamp)+"")&&ie(p,d),L&4&&C!==(C=e[16].text+"")&&ie(S,C)},d(z){z&&v(t),N=!1,De(D)}}}function Cp(n){let e,t=n[0]&&La(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=La(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function Ua(n){return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ap(n,e,t){let s,r,i,l,a;Be(n,Vt,m=>t(13,i=m)),Be(n,cn,m=>t(8,l=m)),Be(n,St,m=>t(9,a=m));let{isOpen:o=!1}=e,{channelId:u=""}=e;function d(){t(0,o=!1)}function p(m){ui(u,m)}function h(m){d(),setTimeout(()=>{const T=document.getElementById(`message-${m}`);T&&(T.scrollIntoView({behavior:"smooth",block:"center"}),T.classList.add("highlighted"),setTimeout(()=>{T.classList.remove("highlighted")},2e3))},100)}function w(m){return i.find(T=>T.username===m)}function g(m){return w(m)?.color||"var(--status-offline)"}function y(m){Gt.call(this,n,m)}const A=m=>h(m.id),I=m=>p(m.id);return n.$$set=m=>{"isOpen"in m&&t(0,o=m.isOpen),"channelId"in m&&t(7,u=m.channelId)},n.$$.update=()=>{n.$$.dirty&640&&t(2,s=(a[u]||[]).filter(m=>m.isPinned)),n.$$.dirty&384&&t(1,r=l.find(m=>m.id===u)?.name||u)},[o,r,s,d,p,h,g,u,l,a,y,A,I]}class Sp extends gt{constructor(e){super(),mt(this,e,Ap,Cp,pt,{isOpen:0,channelId:7})}}function qa(n,e,t){const s=n.slice();return s[63]=e[t],s}function ja(n,e,t){const s=n.slice();return s[63]=e[t],s}function Va(n,e,t){const s=n.slice();return s[63]=e[t],s}function Ha(n){let e,t,s,r,i="Create",l,a;return{c(){e=k("div"),t=k("input"),s=F(),r=k("button"),r.textContent=i,this.h()},l(o){e=b(o,"DIV",{class:!0});var u=P(e);t=b(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=M(u),r=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(v),this.h()},h(){f(t,"type","text"),f(t,"placeholder","channel-name"),t.autofocus=!0,f(t,"class","svelte-1c11uqn"),f(r,"class","svelte-1c11uqn"),f(e,"class","create-channel svelte-1c11uqn")},m(o,u){V(o,e,u),c(e,t),st(t,n[1]),c(e,s),c(e,r),t.focus(),l||(a=[H(t,"input",n[30]),H(t,"keydown",n[31]),H(r,"click",n[19])],l=!0)},p(o,u){u[0]&2&&t.value!==o[1]&&st(t,o[1])},d(o){o&&v(e),l=!1,De(a)}}}function Ga(n){let e,t,s;return{c(){e=k("span"),t=J("â±ï¸"),this.h()},l(r){e=b(r,"SPAN",{class:!0,title:!0});var i=P(e);t=Z(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&32768&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function Wa(n){let e,t="Ã—",s,r;function i(){return n[35](n[63])}return{c(){e=k("button"),e.textContent=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn svelte-1c11uqn")},m(l,a){V(l,e,a),s||(r=H(e,"click",it(i)),s=!0)},p(l,a){n=l},d(l){l&&v(e),s=!1,r()}}}function Ya(n,e){let t,s,r,i="#",l,a=e[63].name+"",o,u,d,p,h,w="âš™ï¸",g,y,A="ðŸ“Œ",I,m,T,_,C=e[63].autoDeleteAfter&&Ga(e);function S(){return e[32](e[63])}function E(){return e[33](e[63])}function N(){return e[34](e[63])}let D=e[63].id!=="general"&&Wa(e);return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=F(),o=J(a),u=F(),C&&C.c(),d=F(),p=k("div"),h=k("button"),h.textContent=w,g=F(),y=k("button"),y.textContent=A,I=F(),D&&D.c(),m=F(),this.h()},l(B){t=b(B,"DIV",{class:!0});var O=P(t);s=b(O,"BUTTON",{class:!0});var z=P(s);r=b(z,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-16vlh54"&&(r.textContent=i),l=M(z),o=Z(z,a),u=M(z),C&&C.l(z),z.forEach(v),d=M(O),p=b(O,"DIV",{class:!0});var L=P(p);h=b(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=w),g=M(L),y=b(L,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=A),I=M(L),D&&D.l(L),L.forEach(v),m=M(O),O.forEach(v),this.h()},h(){f(r,"class","hash svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(B,O){V(B,t,O),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),C&&C.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),D&&D.m(p,null),c(t,m),T||(_=[H(s,"click",S),H(h,"click",it(E)),H(y,"click",it(N))],T=!0)},p(B,O){e=B,O[0]&32768&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?C?C.p(e,O):(C=Ga(e),C.c(),C.m(s,null)):C&&(C.d(1),C=null),e[63].id!=="general"?D?D.p(e,O):(D=Wa(e),D.c(),D.m(p,null)):D&&(D.d(1),D=null),O[0]&98304&&he(t,"active",e[16]===e[63].id)},d(B){B&&v(t),C&&C.d(),D&&D.d(),T=!1,De(_)}}}function Ka(n){let e,t="Direct Messages",s,r=[],i=new Map,l,a=Ke(n[14]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=ja(n,a,u),p=o(d);i.set(p,r[u]=Za(p,d))}return{c(){e=k("div"),e.textContent=t,s=F();for(let u=0;u<r.length;u+=1)r[u].c();l=Re(),this.h()},l(u){e=b(u,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-r1afib"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Re(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){V(u,e,d),V(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);V(u,l,d)},p(u,d){d[0]&13975552&&(a=Ke(u[14]),r=tn(r,d,o,1,u,a,i,l.parentNode,en,Za,l,ja))},d(u){u&&(v(e),v(s),v(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function Xa(n){let e,t,s;return{c(){e=k("span"),t=J("â±ï¸"),this.h()},l(r){e=b(r,"SPAN",{class:!0,title:!0});var i=P(e);t=Z(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&16384&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function Za(n,e){let t,s,r,i="ðŸ’¬",l,a=e[63].name+"",o,u,d,p,h,w="âš™ï¸",g,y,A="ðŸ“Œ",I,m,T="Ã—",_,C,S,E=e[63].autoDeleteAfter&&Xa(e);function N(){return e[36](e[63])}function D(){return e[37](e[63])}function B(){return e[38](e[63])}function O(){return e[39](e[63])}return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=F(),o=J(a),u=F(),E&&E.c(),d=F(),p=k("div"),h=k("button"),h.textContent=w,g=F(),y=k("button"),y.textContent=A,I=F(),m=k("button"),m.textContent=T,_=F(),this.h()},l(z){t=b(z,"DIV",{class:!0});var L=P(t);s=b(L,"BUTTON",{class:!0});var x=P(s);r=b(x,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-q0xuov"&&(r.textContent=i),l=M(x),o=Z(x,a),u=M(x),E&&E.l(x),x.forEach(v),d=M(L),p=b(L,"DIV",{class:!0});var R=P(p);h=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=w),g=M(R),y=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=A),I=M(R),m=b(R,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-12rgdhl"&&(m.textContent=T),R.forEach(v),_=M(L),L.forEach(v),this.h()},h(){f(r,"class","dm-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(z,L){V(z,t,L),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),c(p,m),c(t,_),C||(S=[H(s,"click",N),H(h,"click",it(D)),H(y,"click",it(B)),H(m,"click",it(O))],C=!0)},p(z,L){e=z,L[0]&16384&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?E?E.p(e,L):(E=Xa(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),L[0]&81920&&he(t,"active",e[16]===e[63].id)},d(z){z&&v(t),E&&E.d(),C=!1,De(S)}}}function Ja(n){let e,t="Group Chats",s,r=[],i=new Map,l,a=Ke(n[13]);const o=u=>u[63].id;for(let u=0;u<a.length;u+=1){let d=qa(n,a,u),p=o(d);i.set(p,r[u]=$a(p,d))}return{c(){e=k("div"),e.textContent=t,s=F();for(let u=0;u<r.length;u+=1)r[u].c();l=Re(),this.h()},l(u){e=b(u,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1fof55m"&&(e.textContent=t),s=M(u);for(let d=0;d<r.length;d+=1)r[d].l(u);l=Re(),this.h()},h(){f(e,"class","section-header svelte-1c11uqn")},m(u,d){V(u,e,d),V(u,s,d);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,d);V(u,l,d)},p(u,d){d[0]&13967360&&(a=Ke(u[13]),r=tn(r,d,o,1,u,a,i,l.parentNode,en,$a,l,qa))},d(u){u&&(v(e),v(s),v(l));for(let d=0;d<r.length;d+=1)r[d].d(u)}}}function Qa(n){let e,t,s;return{c(){e=k("span"),t=J("â±ï¸"),this.h()},l(r){e=b(r,"SPAN",{class:!0,title:!0});var i=P(e);t=Z(i,"â±ï¸"),i.forEach(v),this.h()},h(){f(e,"class","auto-delete-indicator svelte-1c11uqn"),f(e,"title",s="Auto-delete: "+n[63].autoDeleteAfter)},m(r,i){V(r,e,i),c(e,t)},p(r,i){i[0]&8192&&s!==(s="Auto-delete: "+r[63].autoDeleteAfter)&&f(e,"title",s)},d(r){r&&v(e)}}}function $a(n,e){let t,s,r,i="ðŸ‘¥",l,a=e[63].name+"",o,u,d,p,h,w="âš™ï¸",g,y,A="ðŸ“Œ",I,m,T="Ã—",_,C,S,E=e[63].autoDeleteAfter&&Qa(e);function N(){return e[40](e[63])}function D(){return e[41](e[63])}function B(){return e[42](e[63])}function O(){return e[43](e[63])}return{key:n,first:null,c(){t=k("div"),s=k("button"),r=k("span"),r.textContent=i,l=F(),o=J(a),u=F(),E&&E.c(),d=F(),p=k("div"),h=k("button"),h.textContent=w,g=F(),y=k("button"),y.textContent=A,I=F(),m=k("button"),m.textContent=T,_=F(),this.h()},l(z){t=b(z,"DIV",{class:!0});var L=P(t);s=b(L,"BUTTON",{class:!0});var x=P(s);r=b(x,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-4z5ugu"&&(r.textContent=i),l=M(x),o=Z(x,a),u=M(x),E&&E.l(x),x.forEach(v),d=M(L),p=b(L,"DIV",{class:!0});var R=P(p);h=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(h)!=="svelte-17mbiia"&&(h.textContent=w),g=M(R),y=b(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(y)!=="svelte-18aqzoy"&&(y.textContent=A),I=M(R),m=b(R,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-12rgdhl"&&(m.textContent=T),R.forEach(v),_=M(L),L.forEach(v),this.h()},h(){f(r,"class","group-icon svelte-1c11uqn"),f(s,"class","channel-btn svelte-1c11uqn"),f(h,"class","settings-btn svelte-1c11uqn"),f(h,"title","Channel settings"),f(y,"class","pin-btn svelte-1c11uqn"),f(y,"title","View pinned messages"),f(m,"class","delete-btn svelte-1c11uqn"),f(p,"class","channel-actions svelte-1c11uqn"),f(t,"class","channel-item svelte-1c11uqn"),he(t,"active",e[16]===e[63].id),this.first=t},m(z,L){V(z,t,L),c(t,s),c(s,r),c(s,l),c(s,o),c(s,u),E&&E.m(s,null),c(t,d),c(t,p),c(p,h),c(p,g),c(p,y),c(p,I),c(p,m),c(t,_),C||(S=[H(s,"click",N),H(h,"click",it(D)),H(y,"click",it(B)),H(m,"click",it(O))],C=!0)},p(z,L){e=z,L[0]&8192&&a!==(a=e[63].name+"")&&ie(o,a),e[63].autoDeleteAfter?E?E.p(e,L):(E=Qa(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),L[0]&73728&&he(t,"active",e[16]===e[63].id)},d(z){z&&v(t),E&&E.d(),C=!1,De(S)}}}function eo(n){let e,t,s,r,i,l,a,o,u=n[17].username+"",d,p,h,w,g=n[17].id.slice(0,4)+"",y,A,I,m,T=n[4]?"ðŸ”‡":"ðŸŽ¤",_,C,S,E,N=n[5]?"ðŸ”‡":"ðŸŽ§",D,B,O,z,L="âš™ï¸",x,R;function q(K,G){return K[17].profilePicture?Dp:Ip}let Y=q(n),j=Y(n);return{c(){e=k("div"),t=k("button"),s=k("div"),j.c(),r=F(),i=k("div"),l=F(),a=k("div"),o=k("div"),d=J(u),p=F(),h=k("div"),w=J("#"),y=J(g),A=F(),I=k("div"),m=k("button"),_=J(T),S=F(),E=k("button"),D=J(N),O=F(),z=k("button"),z.textContent=L,this.h()},l(K){e=b(K,"DIV",{class:!0});var G=P(e);t=b(G,"BUTTON",{class:!0});var W=P(t);s=b(W,"DIV",{class:!0});var $=P(s);j.l($),r=M($),i=b($,"DIV",{class:!0}),P(i).forEach(v),$.forEach(v),l=M(W),a=b(W,"DIV",{class:!0});var te=P(a);o=b(te,"DIV",{class:!0});var le=P(o);d=Z(le,u),le.forEach(v),p=M(te),h=b(te,"DIV",{class:!0});var se=P(h);w=Z(se,"#"),y=Z(se,g),se.forEach(v),te.forEach(v),W.forEach(v),A=M(G),I=b(G,"DIV",{class:!0});var de=P(I);m=b(de,"BUTTON",{class:!0,title:!0});var re=P(m);_=Z(re,T),re.forEach(v),S=M(de),E=b(de,"BUTTON",{class:!0,title:!0});var ee=P(E);D=Z(ee,N),ee.forEach(v),O=M(de),z=b(de,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(z)!=="svelte-18txcln"&&(z.textContent=L),de.forEach(v),G.forEach(v),this.h()},h(){f(i,"class","status-indicator svelte-1c11uqn"),he(i,"online",n[17].status==="active"),he(i,"away",n[17].status==="away"),he(i,"busy",n[17].status==="busy"),f(s,"class","avatar-container svelte-1c11uqn"),f(o,"class","username svelte-1c11uqn"),f(h,"class","user-tag svelte-1c11uqn"),f(a,"class","user-details svelte-1c11uqn"),f(t,"class","profile-info svelte-1c11uqn"),f(m,"class","control-btn svelte-1c11uqn"),f(m,"title",C=n[4]?"Unmute":"Mute"),he(m,"active",n[4]),f(E,"class","control-btn svelte-1c11uqn"),f(E,"title",B=n[5]?"Undeafen":"Deafen"),he(E,"active",n[5]),f(z,"class","control-btn svelte-1c11uqn"),f(z,"title","User Settings"),f(I,"class","profile-controls svelte-1c11uqn"),f(e,"class","profile-card svelte-1c11uqn")},m(K,G){V(K,e,G),c(e,t),c(t,s),j.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,w),c(h,y),c(e,A),c(e,I),c(I,m),c(m,_),c(I,S),c(I,E),c(E,D),c(I,O),c(I,z),x||(R=[H(t,"click",n[25]),H(m,"click",n[44]),H(E,"click",n[45]),H(z,"click",n[46])],x=!0)},p(K,G){Y===(Y=q(K))&&j?j.p(K,G):(j.d(1),j=Y(K),j&&(j.c(),j.m(s,r))),G[0]&131072&&he(i,"online",K[17].status==="active"),G[0]&131072&&he(i,"away",K[17].status==="away"),G[0]&131072&&he(i,"busy",K[17].status==="busy"),G[0]&131072&&u!==(u=K[17].username+"")&&ie(d,u),G[0]&131072&&g!==(g=K[17].id.slice(0,4)+"")&&ie(y,g),G[0]&16&&T!==(T=K[4]?"ðŸ”‡":"ðŸŽ¤")&&ie(_,T),G[0]&16&&C!==(C=K[4]?"Unmute":"Mute")&&f(m,"title",C),G[0]&16&&he(m,"active",K[4]),G[0]&32&&N!==(N=K[5]?"ðŸ”‡":"ðŸŽ§")&&ie(D,N),G[0]&32&&B!==(B=K[5]?"Undeafen":"Deafen")&&f(E,"title",B),G[0]&32&&he(E,"active",K[5])},d(K){K&&v(e),j.d(),x=!1,De(R)}}}function Ip(n){let e,t=n[17].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-1c11uqn"),Ne(e,"background-color",n[17].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i[0]&131072&&t!==(t=r[17].username.charAt(0).toUpperCase()+"")&&ie(s,t),i[0]&131072&&Ne(e,"background-color",r[17].color)},d(r){r&&v(e)}}}function Dp(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[17].profilePicture)||f(e,"src",t),f(e,"alt",s=n[17].username),f(e,"class","avatar svelte-1c11uqn")},m(r,i){V(r,e,i)},p(r,i){i[0]&131072&&!Ye(e.src,t=r[17].profilePicture)&&f(e,"src",t),i[0]&131072&&s!==(s=r[17].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function to(n){let e,t,s,r,i="âš™ï¸ Channel Settings",l,a,o="Ã—",u,d,p,h,w,g=n[12].name+"",y,A,I,m,T="Auto-Delete Messages",_,C,S="Automatically delete messages after a set period of time",E,N,D,B="Disabled",O,z,L="1 Hour",x,R,q="6 Hours",Y,j,K="12 Hours",G,W,$="1 Day",te,le,se="3 Days",de,re,ee="7 Days",ce,ke,Ce="14 Days",Le,be,ae="30 Days",ve,_e;return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("h2"),r.textContent=i,l=F(),a=k("button"),a.textContent=o,u=F(),d=k("div"),p=k("div"),h=k("h3"),w=J("Channel: #"),y=J(g),A=F(),I=k("div"),m=k("label"),m.textContent=T,_=F(),C=k("p"),C.textContent=S,E=F(),N=k("div"),D=k("button"),D.textContent=B,O=F(),z=k("button"),z.textContent=L,x=F(),R=k("button"),R.textContent=q,Y=F(),j=k("button"),j.textContent=K,G=F(),W=k("button"),W.textContent=$,te=F(),le=k("button"),le.textContent=se,de=F(),re=k("button"),re.textContent=ee,ce=F(),ke=k("button"),ke.textContent=Ce,Le=F(),be=k("button"),be.textContent=ae,this.h()},l(pe){e=b(pe,"DIV",{class:!0});var Q=P(e);t=b(Q,"DIV",{class:!0});var ue=P(t);s=b(ue,"DIV",{class:!0});var we=P(s);r=b(we,"H2",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-gucqu6"&&(r.textContent=i),l=M(we),a=b(we,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1eq7ufx"&&(a.textContent=o),we.forEach(v),u=M(ue),d=b(ue,"DIV",{class:!0});var xe=P(d);p=b(xe,"DIV",{class:!0});var Pe=P(p);h=b(Pe,"H3",{class:!0});var Ie=P(h);w=Z(Ie,"Channel: #"),y=Z(Ie,g),Ie.forEach(v),A=M(Pe),I=b(Pe,"DIV",{class:!0});var Ve=P(I);m=b(Ve,"LABEL",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-ryy261"&&(m.textContent=T),_=M(Ve),C=b(Ve,"P",{class:!0,"data-svelte-h":!0}),X(C)!=="svelte-1tt2qq4"&&(C.textContent=S),E=M(Ve),N=b(Ve,"DIV",{class:!0});var Fe=P(N);D=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(D)!=="svelte-uqphio"&&(D.textContent=B),O=M(Fe),z=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(z)!=="svelte-1nt1au0"&&(z.textContent=L),x=M(Fe),R=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(R)!=="svelte-1gtmi8"&&(R.textContent=q),Y=M(Fe),j=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(j)!=="svelte-1notbsz"&&(j.textContent=K),G=M(Fe),W=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(W)!=="svelte-9g0opm"&&(W.textContent=$),te=M(Fe),le=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-1lvi2x3"&&(le.textContent=se),de=M(Fe),re=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(re)!=="svelte-1rb14zv"&&(re.textContent=ee),ce=M(Fe),ke=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(ke)!=="svelte-1i8t5rl"&&(ke.textContent=Ce),Le=M(Fe),be=b(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),X(be)!=="svelte-1snshdf"&&(be.textContent=ae),Fe.forEach(v),Ve.forEach(v),Pe.forEach(v),xe.forEach(v),ue.forEach(v),Q.forEach(v),this.h()},h(){f(r,"class","svelte-1c11uqn"),f(a,"class","close-btn svelte-1c11uqn"),f(s,"class","modal-header svelte-1c11uqn"),f(h,"class","svelte-1c11uqn"),f(m,"class","svelte-1c11uqn"),f(C,"class","setting-description svelte-1c11uqn"),f(D,"class","auto-delete-btn svelte-1c11uqn"),he(D,"active",!n[12].autoDeleteAfter),f(z,"class","auto-delete-btn svelte-1c11uqn"),he(z,"active",n[12].autoDeleteAfter==="1h"),f(R,"class","auto-delete-btn svelte-1c11uqn"),he(R,"active",n[12].autoDeleteAfter==="6h"),f(j,"class","auto-delete-btn svelte-1c11uqn"),he(j,"active",n[12].autoDeleteAfter==="12h"),f(W,"class","auto-delete-btn svelte-1c11uqn"),he(W,"active",n[12].autoDeleteAfter==="24h"),f(le,"class","auto-delete-btn svelte-1c11uqn"),he(le,"active",n[12].autoDeleteAfter==="3d"),f(re,"class","auto-delete-btn svelte-1c11uqn"),he(re,"active",n[12].autoDeleteAfter==="7d"),f(ke,"class","auto-delete-btn svelte-1c11uqn"),he(ke,"active",n[12].autoDeleteAfter==="14d"),f(be,"class","auto-delete-btn svelte-1c11uqn"),he(be,"active",n[12].autoDeleteAfter==="30d"),f(N,"class","auto-delete-options svelte-1c11uqn"),f(I,"class","setting-group svelte-1c11uqn"),f(p,"class","setting-section svelte-1c11uqn"),f(d,"class","modal-body svelte-1c11uqn"),f(t,"class","modal-content svelte-1c11uqn"),f(e,"class","modal-overlay svelte-1c11uqn")},m(pe,Q){V(pe,e,Q),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),c(t,d),c(d,p),c(p,h),c(h,w),c(h,y),c(p,A),c(p,I),c(I,m),c(I,_),c(I,C),c(I,E),c(I,N),c(N,D),c(N,O),c(N,z),c(N,x),c(N,R),c(N,Y),c(N,j),c(N,G),c(N,W),c(N,te),c(N,le),c(N,de),c(N,re),c(N,ce),c(N,ke),c(N,Le),c(N,be),ve||(_e=[H(a,"click",n[52]),H(D,"click",n[53]),H(z,"click",n[54]),H(R,"click",n[55]),H(j,"click",n[56]),H(W,"click",n[57]),H(le,"click",n[58]),H(re,"click",n[59]),H(ke,"click",n[60]),H(be,"click",n[61]),H(t,"click",it(n[27])),H(e,"click",n[62])],ve=!0)},p(pe,Q){Q[0]&4096&&g!==(g=pe[12].name+"")&&ie(y,g),Q[0]&4096&&he(D,"active",!pe[12].autoDeleteAfter),Q[0]&4096&&he(z,"active",pe[12].autoDeleteAfter==="1h"),Q[0]&4096&&he(R,"active",pe[12].autoDeleteAfter==="6h"),Q[0]&4096&&he(j,"active",pe[12].autoDeleteAfter==="12h"),Q[0]&4096&&he(W,"active",pe[12].autoDeleteAfter==="24h"),Q[0]&4096&&he(le,"active",pe[12].autoDeleteAfter==="3d"),Q[0]&4096&&he(re,"active",pe[12].autoDeleteAfter==="7d"),Q[0]&4096&&he(ke,"active",pe[12].autoDeleteAfter==="14d"),Q[0]&4096&&he(be,"active",pe[12].autoDeleteAfter==="30d")},d(pe){pe&&v(e),ve=!1,De(_e)}}}function Np(n){let e,t,s='<div class="logo svelte-1c11uqn"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-1c11uqn"/></div>',r,i,l,a="Text Channels",o,u,d,p="ðŸ“º",h,w,g="+",y,A,I,m=[],T=new Map,_,C,S,E,N,D,B,O,z,L,x,R,q,Y,j,K,G,W,$,te,le=n[2]&&Ha(n),se=Ke(n[15]);const de=Q=>Q[63].id;for(let Q=0;Q<se.length;Q+=1){let ue=Va(n,se,Q),we=de(ue);T.set(we,m[Q]=Ya(we,ue))}let re=n[14].length>0&&Ka(n),ee=n[13].length>0&&Ja(n),ce=n[17]&&eo(n);function ke(Q){n[47](Q)}let Ce={};n[3]!==void 0&&(Ce.isOpen=n[3]),N=new yp({props:Ce}),rt.push(()=>Lt(N,"isOpen",ke)),O=new Rn({props:{isOpen:n[6],title:"Delete Channel",message:"Delete channel #"+n[7]+"? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:n[21],onCancel:n[48]}});function Le(Q){n[49](Q)}let be={channelId:n[9]};n[8]!==void 0&&(be.isOpen=n[8]),L=new Sp({props:be}),rt.push(()=>Lt(L,"isOpen",Le));function ae(Q){n[50](Q)}function ve(Q){n[51](Q)}let _e={isOwnProfile:!0};n[10]!==void 0&&(_e.isOpen=n[10]),n[17]!==void 0&&(_e.user=n[17]),q=new fi({props:_e}),rt.push(()=>Lt(q,"isOpen",ae)),rt.push(()=>Lt(q,"user",ve));let pe=n[11]&&n[12]&&to(n);return{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=F(),i=k("div"),l=k("h3"),l.textContent=a,o=F(),u=k("div"),d=k("button"),d.textContent=p,h=F(),w=k("button"),w.textContent=g,y=F(),le&&le.c(),A=F(),I=k("div");for(let Q=0;Q<m.length;Q+=1)m[Q].c();_=F(),re&&re.c(),C=F(),ee&&ee.c(),S=F(),ce&&ce.c(),E=F(),$e(N.$$.fragment),B=F(),$e(O.$$.fragment),z=F(),$e(L.$$.fragment),R=F(),$e(q.$$.fragment),K=F(),pe&&pe.c(),G=Re(),this.h()},l(Q){e=b(Q,"DIV",{class:!0});var ue=P(e);t=b(ue,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-18mdtge"&&(t.innerHTML=s),r=M(ue),i=b(ue,"DIV",{class:!0});var we=P(i);l=b(we,"H3",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-cahn79"&&(l.textContent=a),o=M(we),u=b(we,"DIV",{class:!0});var xe=P(u);d=b(xe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(d)!=="svelte-5el016"&&(d.textContent=p),h=M(xe),w=b(xe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(w)!=="svelte-ou792o"&&(w.textContent=g),xe.forEach(v),we.forEach(v),y=M(ue),le&&le.l(ue),A=M(ue),I=b(ue,"DIV",{class:!0});var Pe=P(I);for(let Ie=0;Ie<m.length;Ie+=1)m[Ie].l(Pe);_=M(Pe),re&&re.l(Pe),C=M(Pe),ee&&ee.l(Pe),Pe.forEach(v),S=M(ue),ce&&ce.l(ue),ue.forEach(v),E=M(Q),Qe(N.$$.fragment,Q),B=M(Q),Qe(O.$$.fragment,Q),z=M(Q),Qe(L.$$.fragment,Q),R=M(Q),Qe(q.$$.fragment,Q),K=M(Q),pe&&pe.l(Q),G=Re(),this.h()},h(){f(t,"class","top-section svelte-1c11uqn"),f(l,"class","svelte-1c11uqn"),f(d,"class","screen-share-icon-btn svelte-1c11uqn"),f(d,"title","Screen Share"),he(d,"active",n[0]==="screen"),f(w,"class","add-btn svelte-1c11uqn"),f(w,"title","Create channel"),f(u,"class","header-buttons svelte-1c11uqn"),f(i,"class","sidebar-header svelte-1c11uqn"),f(I,"class","channel-list svelte-1c11uqn"),f(e,"class","channel-sidebar svelte-1c11uqn")},m(Q,ue){V(Q,e,ue),c(e,t),c(e,r),c(e,i),c(i,l),c(i,o),c(i,u),c(u,d),c(u,h),c(u,w),c(e,y),le&&le.m(e,null),c(e,A),c(e,I);for(let we=0;we<m.length;we+=1)m[we]&&m[we].m(I,null);c(I,_),re&&re.m(I,null),c(I,C),ee&&ee.m(I,null),c(e,S),ce&&ce.m(e,null),V(Q,E,ue),Je(N,Q,ue),V(Q,B,ue),Je(O,Q,ue),V(Q,z,ue),Je(L,Q,ue),V(Q,R,ue),Je(q,Q,ue),V(Q,K,ue),pe&&pe.m(Q,ue),V(Q,G,ue),W=!0,$||(te=[H(d,"click",n[28]),H(w,"click",n[29])],$=!0)},p(Q,ue){(!W||ue[0]&1)&&he(d,"active",Q[0]==="screen"),Q[2]?le?le.p(Q,ue):(le=Ha(Q),le.c(),le.m(e,A)):le&&(le.d(1),le=null),ue[0]&13991936&&(se=Ke(Q[15]),m=tn(m,ue,de,1,Q,se,T,I,en,Ya,_,Va)),Q[14].length>0?re?re.p(Q,ue):(re=Ka(Q),re.c(),re.m(I,C)):re&&(re.d(1),re=null),Q[13].length>0?ee?ee.p(Q,ue):(ee=Ja(Q),ee.c(),ee.m(I,null)):ee&&(ee.d(1),ee=null),Q[17]?ce?ce.p(Q,ue):(ce=eo(Q),ce.c(),ce.m(e,null)):ce&&(ce.d(1),ce=null);const we={};!D&&ue[0]&8&&(D=!0,we.isOpen=Q[3],Bt(()=>D=!1)),N.$set(we);const xe={};ue[0]&64&&(xe.isOpen=Q[6]),ue[0]&128&&(xe.message="Delete channel #"+Q[7]+"? This action cannot be undone."),ue[0]&64&&(xe.onCancel=Q[48]),O.$set(xe);const Pe={};ue[0]&512&&(Pe.channelId=Q[9]),!x&&ue[0]&256&&(x=!0,Pe.isOpen=Q[8],Bt(()=>x=!1)),L.$set(Pe);const Ie={};!Y&&ue[0]&1024&&(Y=!0,Ie.isOpen=Q[10],Bt(()=>Y=!1)),!j&&ue[0]&131072&&(j=!0,Ie.user=Q[17],Bt(()=>j=!1)),q.$set(Ie),Q[11]&&Q[12]?pe?pe.p(Q,ue):(pe=to(Q),pe.c(),pe.m(G.parentNode,G)):pe&&(pe.d(1),pe=null)},i(Q){W||(Ae(N.$$.fragment,Q),Ae(O.$$.fragment,Q),Ae(L.$$.fragment,Q),Ae(q.$$.fragment,Q),W=!0)},o(Q){Oe(N.$$.fragment,Q),Oe(O.$$.fragment,Q),Oe(L.$$.fragment,Q),Oe(q.$$.fragment,Q),W=!1},d(Q){Q&&(v(e),v(E),v(B),v(z),v(R),v(K),v(G)),le&&le.d();for(let ue=0;ue<m.length;ue+=1)m[ue].d();re&&re.d(),ee&&ee.d(),ce&&ce.d(),Ze(N,Q),Ze(O,Q),Ze(L,Q),Ze(q,Q),pe&&pe.d(Q),$=!1,De(te)}}}function Rp(n,e,t){let s,r,i,l,a,o;Be(n,cn,fe=>t(26,l=fe)),Be(n,Mn,fe=>t(16,a=fe)),Be(n,dn,fe=>t(17,o=fe));let{activeView:u="chat"}=e,d="",p=!1,h=!1,w=!1,g=!1,y=!1,A="",I=!1,m="",T=!1,_=!1,C=null;function S(fe){Jf(fe)}function E(){d.trim()&&(Qf(d.trim()),t(1,d=""),t(2,p=!1))}function N(fe){t(7,A=fe),t(6,y=!0)}function D(){$f(A),t(6,y=!1)}function B(fe){t(9,m=fe),t(8,I=!0)}function O(fe){t(12,C=fe),t(11,_=!0)}function z(fe){C&&(sd(C.id,fe),t(11,_=!1))}function L(){t(10,T=!0)}function x(fe){Gt.call(this,n,fe)}const R=()=>t(0,u="screen"),q=()=>t(2,p=!p);function Y(){d=this.value,t(1,d)}const j=fe=>fe.key==="Enter"&&E(),K=fe=>S(fe.id),G=fe=>O(fe),W=fe=>B(fe.id),$=fe=>N(fe.id),te=fe=>S(fe.id),le=fe=>O(fe),se=fe=>B(fe.id),de=fe=>N(fe.id),re=fe=>S(fe.id),ee=fe=>O(fe),ce=fe=>B(fe.id),ke=fe=>N(fe.id),Ce=()=>t(4,w=!w),Le=()=>t(5,g=!g),be=()=>t(3,h=!0);function ae(fe){h=fe,t(3,h)}const ve=()=>t(6,y=!1);function _e(fe){I=fe,t(8,I)}function pe(fe){T=fe,t(10,T)}function Q(fe){o=fe,dn.set(o)}const ue=()=>t(11,_=!1),we=()=>z(null),xe=()=>z("1h"),Pe=()=>z("6h"),Ie=()=>z("12h"),Ve=()=>z("24h"),Fe=()=>z("3d"),et=()=>z("7d"),lt=()=>z("14d"),vt=()=>z("30d"),Rt=()=>t(11,_=!1);return n.$$set=fe=>{"activeView"in fe&&t(0,u=fe.activeView)},n.$$.update=()=>{n.$$.dirty[0]&67108864&&t(15,s=l.filter(fe=>!fe.type||fe.type==="public")),n.$$.dirty[0]&67108864&&t(14,r=l.filter(fe=>fe.type==="dm")),n.$$.dirty[0]&67108864&&t(13,i=l.filter(fe=>fe.type==="group")),n.$$.dirty[0]&1&&u==="chat"&&nd()},[u,d,p,h,w,g,y,A,I,m,T,_,C,i,r,s,a,o,S,E,N,D,B,O,z,L,l,x,R,q,Y,j,K,G,W,$,te,le,se,de,re,ee,ce,ke,Ce,Le,be,ae,ve,_e,pe,Q,ue,we,xe,Pe,Ie,Ve,Fe,et,lt,vt,Rt]}class Pp extends gt{constructor(e){super(),mt(this,e,Rp,Np,pt,{activeView:0},null,[-1,-1,-1])}}const Ec=wt([]),pi=wt(null),Zs=wt(!1),hs=wt(!1),ps=wt(!1),no=new Map;let Ht=null;async function so(n,e,t=!1){try{return Ht=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Zs.set(!0),hs.set(!1),ps.set(!t),n.emit("call-initiate",{targetUserId:e,isVideoCall:t}),Ht}catch(s){throw console.error("Error starting call:",s),s}}async function Op(n,e,t=!1){try{return Ht=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Zs.set(!0),hs.set(!1),ps.set(!t),n.emit("call-answer",{callerId:e,isVideoCall:t}),pi.set(null),Ht}catch(s){throw console.error("Error answering call:",s),s}}function Mp(n,e){n.emit("call-reject",{callerId:e}),pi.set(null)}function Fp(n){Ht&&(Ht.getTracks().forEach(e=>e.stop()),Ht=null),Zs.set(!1),hs.set(!1),ps.set(!1),n.emit("call-end"),no.forEach(e=>e.close()),no.clear(),Ec.set([])}function zp(){if(Ht){const n=Ht.getAudioTracks()[0];n&&(n.enabled=!n.enabled,hs.set(!n.enabled))}}function Bp(){if(Ht){const n=Ht.getVideoTracks()[0];n&&(n.enabled=!n.enabled,ps.set(!n.enabled))}}function Lp(){return Ht}const{window:xp}=Kr;function Up(n){let e,t=n[0].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","avatar-placeholder svelte-1jgoxw0"),Ne(e,"background-color",n[0].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&1&&t!==(t=r[0].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&1&&Ne(e,"background-color",r[0].color)},d(r){r&&v(e)}}}function qp(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[0].profilePicture)||f(e,"src",t),f(e,"alt",s=n[0].username),f(e,"class","avatar svelte-1jgoxw0")},m(r,i){V(r,e,i)},p(r,i){i&1&&!Ye(e.src,t=r[0].profilePicture)&&f(e,"src",t),i&1&&s!==(s=r[0].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function ro(n){let e,t='<span class="icon svelte-1jgoxw0">ðŸ’¬</span> <span>Send Message</span>',s,r,i='<span class="icon svelte-1jgoxw0">ðŸ“ž</span> <span>Voice Call</span>',l,a,o='<span class="icon svelte-1jgoxw0">ðŸ“¹</span> <span>Video Call</span>',u,d,p,h;return{c(){e=k("button"),e.innerHTML=t,s=F(),r=k("button"),r.innerHTML=i,l=F(),a=k("button"),a.innerHTML=o,u=F(),d=k("div"),this.h()},l(w){e=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1mal7hn"&&(e.innerHTML=t),s=M(w),r=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1om8irr"&&(r.innerHTML=i),l=M(w),a=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-124vjww"&&(a.innerHTML=o),u=M(w),d=b(w,"DIV",{class:!0}),P(d).forEach(v),this.h()},h(){f(e,"class","menu-item svelte-1jgoxw0"),f(r,"class","menu-item svelte-1jgoxw0"),f(a,"class","menu-item svelte-1jgoxw0"),f(d,"class","menu-divider svelte-1jgoxw0")},m(w,g){V(w,e,g),V(w,s,g),V(w,r,g),V(w,l,g),V(w,a,g),V(w,u,g),V(w,d,g),p||(h=[H(e,"click",n[8]),H(r,"click",n[6]),H(a,"click",n[7])],p=!0)},p:Me,d(w){w&&(v(e),v(s),v(r),v(l),v(a),v(u),v(d)),p=!1,De(h)}}}function jp(n){let e,t,s,r,i,l=n[0].username+"",a,o,u,d,p,h,w='<span class="icon svelte-1jgoxw0">ðŸ‘¤</span> <span>View Profile</span>',g,y;function A(_,C){return _[0].profilePicture?qp:Up}let I=A(n),m=I(n),T=!n[1]&&ro(n);return{c(){e=k("div"),t=k("div"),s=k("div"),m.c(),r=F(),i=k("span"),a=J(l),o=F(),u=k("div"),d=F(),T&&T.c(),p=F(),h=k("button"),h.innerHTML=w,this.h()},l(_){e=b(_,"DIV",{class:!0,style:!0});var C=P(e);t=b(C,"DIV",{class:!0});var S=P(t);s=b(S,"DIV",{class:!0});var E=P(s);m.l(E),r=M(E),i=b(E,"SPAN",{class:!0});var N=P(i);a=Z(N,l),N.forEach(v),E.forEach(v),S.forEach(v),o=M(C),u=b(C,"DIV",{class:!0}),P(u).forEach(v),d=M(C),T&&T.l(C),p=M(C),h=b(C,"BUTTON",{class:!0,"data-svelte-h":!0}),X(h)!=="svelte-1rwejc6"&&(h.innerHTML=w),C.forEach(v),this.h()},h(){f(i,"class","username svelte-1jgoxw0"),f(s,"class","user-info svelte-1jgoxw0"),f(t,"class","menu-header svelte-1jgoxw0"),f(u,"class","menu-divider svelte-1jgoxw0"),f(h,"class","menu-item svelte-1jgoxw0"),f(e,"class","context-menu svelte-1jgoxw0"),Ne(e,"left",n[4]+"px"),Ne(e,"top",n[3]+"px")},m(_,C){V(_,e,C),c(e,t),c(t,s),m.m(s,null),c(s,r),c(s,i),c(i,a),c(e,o),c(e,u),c(e,d),T&&T.m(e,null),c(e,p),c(e,h),n[13](e),g||(y=[H(xp,"click",n[5]),H(h,"click",n[9]),H(e,"click",it(n[12]))],g=!0)},p(_,[C]){I===(I=A(_))&&m?m.p(_,C):(m.d(1),m=I(_),m&&(m.c(),m.m(s,r))),C&1&&l!==(l=_[0].username+"")&&ie(a,l),_[1]?T&&(T.d(1),T=null):T?T.p(_,C):(T=ro(_),T.c(),T.m(e,p)),C&16&&Ne(e,"left",_[4]+"px"),C&8&&Ne(e,"top",_[3]+"px")},i:Me,o:Me,d(_){_&&v(e),m.d(),T&&T.d(),n[13](null),g=!1,De(y)}}}function Vp(n,e,t){let s,r,{user:i}=e,{x:l}=e,{y:a}=e,{isOwnProfile:o}=e;const u=Wr();let d;function p(m){u("close")}function h(){u("voiceCall"),u("close")}function w(){u("videoCall"),u("close")}function g(){u("openDM"),u("close")}function y(){u("viewProfile"),u("close")}function A(m){Gt.call(this,n,m)}function I(m){rt[m?"unshift":"push"](()=>{d=m,t(2,d)})}return n.$$set=m=>{"user"in m&&t(0,i=m.user),"x"in m&&t(10,l=m.x),"y"in m&&t(11,a=m.y),"isOwnProfile"in m&&t(1,o=m.isOwnProfile)},n.$$.update=()=>{n.$$.dirty&1028&&t(4,s=(()=>{if(!d)return l;const m=d.offsetWidth||200,T=window.innerWidth;return l+m>T?l-m:l})()),n.$$.dirty&2052&&t(3,r=(()=>{if(!d)return a;const m=d.offsetHeight||300,T=window.innerHeight;return a+m>T?a-m:a})())},[i,o,d,r,s,p,h,w,g,y,l,a,A,I]}class Hp extends gt{constructor(e){super(),mt(this,e,Vp,jp,pt,{user:0,x:10,y:11,isOwnProfile:1})}}function io(n,e,t){const s=n.slice();return s[9]=e[t],s}function lo(n){let e,t,s,r,i,l="Start a Direct Message",a,o,u="Ã—",d,p,h,w,g,y,A;function I(_,C){return _[2].length===0?Wp:Gp}let m=I(n),T=m(n);return{c(){e=k("div"),t=F(),s=k("div"),r=k("div"),i=k("h2"),i.textContent=l,a=F(),o=k("button"),o.textContent=u,d=F(),p=k("div"),h=k("input"),w=F(),g=k("div"),T.c(),this.h()},l(_){e=b(_,"DIV",{class:!0}),P(e).forEach(v),t=M(_),s=b(_,"DIV",{class:!0});var C=P(s);r=b(C,"DIV",{class:!0});var S=P(r);i=b(S,"H2",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-14qt3ql"&&(i.textContent=l),a=M(S),o=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-mm165g"&&(o.textContent=u),S.forEach(v),d=M(C),p=b(C,"DIV",{class:!0});var E=P(p);h=b(E,"INPUT",{type:!0,placeholder:!0,class:!0}),E.forEach(v),w=M(C),g=b(C,"DIV",{class:!0});var N=P(g);T.l(N),N.forEach(v),C.forEach(v),this.h()},h(){f(e,"class","modal-overlay svelte-1wgtlqt"),f(i,"class","svelte-1wgtlqt"),f(o,"class","close-btn svelte-1wgtlqt"),f(r,"class","modal-header svelte-1wgtlqt"),f(h,"type","text"),f(h,"placeholder","Search users..."),h.autofocus=!0,f(h,"class","svelte-1wgtlqt"),f(p,"class","search-container svelte-1wgtlqt"),f(g,"class","user-list svelte-1wgtlqt"),f(s,"class","modal svelte-1wgtlqt")},m(_,C){V(_,e,C),V(_,t,C),V(_,s,C),c(s,r),c(r,i),c(r,a),c(r,o),c(s,d),c(s,p),c(p,h),st(h,n[1]),c(s,w),c(s,g),T.m(g,null),h.focus(),y||(A=[H(e,"click",n[4]),H(o,"click",n[4]),H(h,"input",n[7])],y=!0)},p(_,C){C&2&&h.value!==_[1]&&st(h,_[1]),m===(m=I(_))&&T?T.p(_,C):(T.d(1),T=m(_),T&&(T.c(),T.m(g,null)))},d(_){_&&(v(e),v(t),v(s)),T.d(),y=!1,De(A)}}}function Gp(n){let e=[],t=new Map,s,r=Ke(n[2]);const i=l=>l[9].id;for(let l=0;l<r.length;l+=1){let a=io(n,r,l),o=i(a);t.set(o,e[l]=ao(o,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Re()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);s=Re()},m(l,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(l,a);V(l,s,a)},p(l,a){a&12&&(r=Ke(l[2]),e=tn(e,a,i,1,l,r,t,s.parentNode,en,ao,s,io))},d(l){l&&v(s);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function Wp(n){let e,t="No users found";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-wdjf3i"&&(e.textContent=t),this.h()},h(){f(e,"class","no-users svelte-1wgtlqt")},m(s,r){V(s,e,r)},p:Me,d(s){s&&v(e)}}}function Yp(n){let e,t=n[9].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1wgtlqt"),Ne(e,"background-color",n[9].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&4&&t!==(t=r[9].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&4&&Ne(e,"background-color",r[9].color)},d(r){r&&v(e)}}}function Kp(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[9].profilePicture)||f(e,"src",t),f(e,"alt",s=n[9].username),f(e,"class","user-avatar svelte-1wgtlqt")},m(r,i){V(r,e,i)},p(r,i){i&4&&!Ye(e.src,t=r[9].profilePicture)&&f(e,"src",t),i&4&&s!==(s=r[9].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function ao(n,e){let t,s,r,i,l,a,o,u=e[9].username+"",d,p,h,w=e[9].status+"",g,y,A,I;function m(S,E){return S[9].profilePicture?Kp:Yp}let T=m(e),_=T(e);function C(){return e[8](e[9])}return{key:n,first:null,c(){t=k("button"),s=k("div"),_.c(),r=F(),i=k("div"),l=F(),a=k("div"),o=k("div"),d=J(u),p=F(),h=k("div"),g=J(w),y=F(),this.h()},l(S){t=b(S,"BUTTON",{class:!0});var E=P(t);s=b(E,"DIV",{class:!0});var N=P(s);_.l(N),r=M(N),i=b(N,"DIV",{class:!0,style:!0}),P(i).forEach(v),N.forEach(v),l=M(E),a=b(E,"DIV",{class:!0});var D=P(a);o=b(D,"DIV",{class:!0});var B=P(o);d=Z(B,u),B.forEach(v),p=M(D),h=b(D,"DIV",{class:!0});var O=P(h);g=Z(O,w),O.forEach(v),D.forEach(v),y=M(E),E.forEach(v),this.h()},h(){f(i,"class","status-indicator svelte-1wgtlqt"),Ne(i,"background-color",oo(e[9].status)),f(s,"class","user-avatar-container svelte-1wgtlqt"),f(o,"class","username svelte-1wgtlqt"),f(h,"class","status-text svelte-1wgtlqt"),f(a,"class","user-info svelte-1wgtlqt"),f(t,"class","user-item svelte-1wgtlqt"),this.first=t},m(S,E){V(S,t,E),c(t,s),_.m(s,null),c(s,r),c(s,i),c(t,l),c(t,a),c(a,o),c(o,d),c(a,p),c(a,h),c(h,g),c(t,y),A||(I=H(t,"click",C),A=!0)},p(S,E){e=S,T===(T=m(e))&&_?_.p(e,E):(_.d(1),_=T(e),_&&(_.c(),_.m(s,r))),E&4&&Ne(i,"background-color",oo(e[9].status)),E&4&&u!==(u=e[9].username+"")&&ie(d,u),E&4&&w!==(w=e[9].status+"")&&ie(g,w)},d(S){S&&v(t),_.d(),A=!1,I()}}}function Xp(n){let e,t=n[0]&&lo(n);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,r){t&&t.m(s,r),V(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=lo(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(s){s&&v(e),t&&t.d(s)}}}function oo(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function Zp(n,e,t){let s,r,i;Be(n,dn,h=>t(5,r=h)),Be(n,Vt,h=>t(6,i=h));let{isOpen:l=!1}=e,a="";function o(h){hc(h.id),u()}function u(){t(0,l=!1),t(1,a="")}function d(){a=this.value,t(1,a)}const p=h=>o(h);return n.$$set=h=>{"isOpen"in h&&t(0,l=h.isOpen)},n.$$.update=()=>{n.$$.dirty&98&&t(2,s=i.filter(h=>h.id===r?.id?!1:a?h.username.toLowerCase().includes(a.toLowerCase()):!0))},[l,a,s,o,u,r,i,d,p]}class Jp extends gt{constructor(e){super(),mt(this,e,Zp,Xp,pt,{isOpen:0})}}function co(n,e,t){const s=n.slice();return s[28]=e[t],s}function Qp(n){let e,t=n[28].username.charAt(0).toUpperCase()+"",s;return{c(){e=k("div"),s=J(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=P(e);s=Z(i,t),i.forEach(v),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-1dxxmv3"),Ne(e,"background-color",n[28].color)},m(r,i){V(r,e,i),c(e,s)},p(r,i){i&512&&t!==(t=r[28].username.charAt(0).toUpperCase()+"")&&ie(s,t),i&512&&Ne(e,"background-color",r[28].color)},d(r){r&&v(e)}}}function $p(n){let e,t,s;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ye(e.src,t=n[28].profilePicture)||f(e,"src",t),f(e,"alt",s=n[28].username),f(e,"class","user-avatar svelte-1dxxmv3")},m(r,i){V(r,e,i)},p(r,i){i&512&&!Ye(e.src,t=r[28].profilePicture)&&f(e,"src",t),i&512&&s!==(s=r[28].username)&&f(e,"alt",s)},d(r){r&&v(e)}}}function uo(n){let e,t="(you)";return{c(){e=k("span"),e.textContent=t,this.h()},l(s){e=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){f(e,"class","you-badge svelte-1dxxmv3")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function fo(n){let e,t,s="ðŸ“ž",r,i,l="ðŸ“¹",a,o;function u(...p){return n[19](n[28],...p)}function d(...p){return n[20](n[28],...p)}return{c(){e=k("div"),t=k("button"),t.textContent=s,r=F(),i=k("button"),i.textContent=l,this.h()},l(p){e=b(p,"DIV",{class:!0});var h=P(e);t=b(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(t)!=="svelte-jmuv4z"&&(t.textContent=s),r=M(h),i=b(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(i)!=="svelte-1whn4df"&&(i.textContent=l),h.forEach(v),this.h()},h(){f(t,"class","call-btn voice-call svelte-1dxxmv3"),f(t,"title","Voice call"),f(i,"class","call-btn video-call svelte-1dxxmv3"),f(i,"title","Video call"),f(e,"class","call-buttons svelte-1dxxmv3")},m(p,h){V(p,e,h),c(e,t),c(e,r),c(e,i),a||(o=[H(t,"click",u),H(i,"click",d)],a=!0)},p(p,h){n=p},d(p){p&&v(e),a=!1,De(o)}}}function ho(n,e){let t,s,r,i,l,a=e[28].username+"",o,u,d,p,h,w,g,y=e[28].status+"",A,I,m,T,_;function C(z,L){return z[28].profilePicture?$p:Qp}let S=C(e),E=S(e),N=e[28].id===e[8]?.id&&uo();function D(){return e[17](e[28])}function B(...z){return e[18](e[28],...z)}let O=e[28].id!==e[8]?.id&&fo(e);return{key:n,first:null,c(){t=k("div"),s=k("button"),E.c(),r=F(),i=k("div"),l=k("span"),o=J(a),u=F(),N&&N.c(),d=F(),p=k("div"),h=k("span"),w=F(),g=k("span"),A=J(y),I=F(),O&&O.c(),m=F(),this.h()},l(z){t=b(z,"DIV",{class:!0});var L=P(t);s=b(L,"BUTTON",{class:!0});var x=P(s);E.l(x),r=M(x),i=b(x,"DIV",{class:!0});var R=P(i);l=b(R,"SPAN",{class:!0});var q=P(l);o=Z(q,a),u=M(q),N&&N.l(q),q.forEach(v),d=M(R),p=b(R,"DIV",{class:!0});var Y=P(p);h=b(Y,"SPAN",{class:!0,style:!0}),P(h).forEach(v),w=M(Y),g=b(Y,"SPAN",{class:!0});var j=P(g);A=Z(j,y),j.forEach(v),Y.forEach(v),R.forEach(v),x.forEach(v),I=M(L),O&&O.l(L),m=M(L),L.forEach(v),this.h()},h(){f(l,"class","user-name svelte-1dxxmv3"),f(h,"class","status-dot svelte-1dxxmv3"),Ne(h,"background-color",go(e[28].status)),f(g,"class","status-text svelte-1dxxmv3"),f(p,"class","user-status svelte-1dxxmv3"),f(i,"class","user-info svelte-1dxxmv3"),f(s,"class","user svelte-1dxxmv3"),f(t,"class","user-container svelte-1dxxmv3"),this.first=t},m(z,L){V(z,t,L),c(t,s),E.m(s,null),c(s,r),c(s,i),c(i,l),c(l,o),c(l,u),N&&N.m(l,null),c(i,d),c(i,p),c(p,h),c(p,w),c(p,g),c(g,A),c(t,I),O&&O.m(t,null),c(t,m),T||(_=[H(s,"click",D),H(s,"contextmenu",B)],T=!0)},p(z,L){e=z,S===(S=C(e))&&E?E.p(e,L):(E.d(1),E=S(e),E&&(E.c(),E.m(s,r))),L&512&&a!==(a=e[28].username+"")&&ie(o,a),e[28].id===e[8]?.id?N||(N=uo(),N.c(),N.m(l,null)):N&&(N.d(1),N=null),L&512&&Ne(h,"background-color",go(e[28].status)),L&512&&y!==(y=e[28].status+"")&&ie(A,y),e[28].id!==e[8]?.id?O?O.p(e,L):(O=fo(e),O.c(),O.m(t,m)):O&&(O.d(1),O=null)},d(z){z&&v(t),E.d(),N&&N.d(),O&&O.d(),T=!1,De(_)}}}function po(n){let e,t;return e=new Hp({props:{user:n[5],x:n[6],y:n[7],isOwnProfile:n[5].id===n[8]?.id}}),e.$on("close",n[12]),e.$on("voiceCall",n[23]),e.$on("videoCall",n[24]),e.$on("openDM",n[13]),e.$on("viewProfile",n[25]),{c(){$e(e.$$.fragment)},l(s){Qe(e.$$.fragment,s)},m(s,r){Je(e,s,r),t=!0},p(s,r){const i={};r&32&&(i.user=s[5]),r&64&&(i.x=s[6]),r&128&&(i.y=s[7]),r&288&&(i.isOwnProfile=s[5].id===s[8]?.id),e.$set(i)},i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Oe(e.$$.fragment,s),t=!1},d(s){Ze(e,s)}}}function eg(n){let e,t,s,r,i=n[9].length+"",l,a,o,u,d="ðŸ’¬",p,h,w=[],g=new Map,y,A,I,m,T,_,C,S,E,N,D,B=Ke(n[9]);const O=j=>j[28].id;for(let j=0;j<B.length;j+=1){let K=co(n,B,j),G=O(K);g.set(G,w[j]=ho(G,K))}function z(j){n[21](j)}function L(j){n[22](j)}let x={isOwnProfile:n[2]};n[0]!==void 0&&(x.isOpen=n[0]),n[1]!==void 0&&(x.user=n[1]),A=new fi({props:x}),rt.push(()=>Lt(A,"isOpen",z)),rt.push(()=>Lt(A,"user",L));let R=n[4]&&n[5]&&po(n);function q(j){n[26](j)}let Y={};return n[3]!==void 0&&(Y.isOpen=n[3]),C=new Jp({props:Y}),rt.push(()=>Lt(C,"isOpen",q)),{c(){e=k("aside"),t=k("div"),s=k("h3"),r=J("Online ("),l=J(i),a=J(")"),o=F(),u=k("button"),u.textContent=d,p=F(),h=k("div");for(let j=0;j<w.length;j+=1)w[j].c();y=F(),$e(A.$$.fragment),T=F(),R&&R.c(),_=F(),$e(C.$$.fragment),this.h()},l(j){e=b(j,"ASIDE",{class:!0});var K=P(e);t=b(K,"DIV",{class:!0});var G=P(t);s=b(G,"H3",{class:!0});var W=P(s);r=Z(W,"Online ("),l=Z(W,i),a=Z(W,")"),W.forEach(v),o=M(G),u=b(G,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(u)!=="svelte-1sotr3f"&&(u.textContent=d),G.forEach(v),p=M(K),h=b(K,"DIV",{class:!0});var $=P(h);for(let te=0;te<w.length;te+=1)w[te].l($);$.forEach(v),K.forEach(v),y=M(j),Qe(A.$$.fragment,j),T=M(j),R&&R.l(j),_=M(j),Qe(C.$$.fragment,j),this.h()},h(){f(s,"class","svelte-1dxxmv3"),f(u,"class","dm-btn svelte-1dxxmv3"),f(u,"title","Start a DM"),f(t,"class","panel-header svelte-1dxxmv3"),f(h,"class","user-list svelte-1dxxmv3"),f(e,"class","user-panel svelte-1dxxmv3")},m(j,K){V(j,e,K),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,o),c(t,u),c(e,p),c(e,h);for(let G=0;G<w.length;G+=1)w[G]&&w[G].m(h,null);V(j,y,K),Je(A,j,K),V(j,T,K),R&&R.m(j,K),V(j,_,K),Je(C,j,K),E=!0,N||(D=H(u,"click",n[14]),N=!0)},p(j,[K]){(!E||K&512)&&i!==(i=j[9].length+"")&&ie(l,i),K&102144&&(B=Ke(j[9]),w=tn(w,K,O,1,j,B,g,h,en,ho,null,co));const G={};K&4&&(G.isOwnProfile=j[2]),!I&&K&1&&(I=!0,G.isOpen=j[0],Bt(()=>I=!1)),!m&&K&2&&(m=!0,G.user=j[1],Bt(()=>m=!1)),A.$set(G),j[4]&&j[5]?R?(R.p(j,K),K&48&&Ae(R,1)):(R=po(j),R.c(),Ae(R,1),R.m(_.parentNode,_)):R&&(Hn(),Oe(R,1,1,()=>{R=null}),Gn());const W={};!S&&K&8&&(S=!0,W.isOpen=j[3],Bt(()=>S=!1)),C.$set(W)},i(j){E||(Ae(A.$$.fragment,j),Ae(R),Ae(C.$$.fragment,j),E=!0)},o(j){Oe(A.$$.fragment,j),Oe(R),Oe(C.$$.fragment,j),E=!1},d(j){j&&(v(e),v(y),v(T),v(_));for(let K=0;K<w.length;K+=1)w[K].d();Ze(A,j),R&&R.d(j),Ze(C,j),N=!1,D()}}}function go(n){switch(n){case"active":return"var(--status-online)";case"away":return"var(--status-away)";case"busy":return"var(--status-busy)";default:return"var(--status-offline)"}}function tg(n,e,t){let s,r,i;Be(n,Yn,R=>t(27,s=R)),Be(n,dn,R=>t(8,r=R)),Be(n,Vt,R=>t(9,i=R));let l=!1,a=null,o=!1,u=!1,d=!1,p=null,h=0,w=0;function g(R){t(1,a=R),t(2,o=R.id===r?.id),t(0,l=!0)}function y(R,q){R.preventDefault(),R.stopPropagation(),t(5,p=q),t(6,h=R.clientX),t(7,w=R.clientY),t(4,d=!0)}function A(){t(4,d=!1),t(5,p=null)}function I(){p&&hc(p.id)}function m(){t(3,u=!0)}async function T(R,q){R&&R.stopPropagation();const Y=q||p;if(!(!s||!Y||Y.id===r?.id))try{await so(s,Y.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function _(R,q){R&&R.stopPropagation();const Y=q||p;if(!(!s||!Y||Y.id===r?.id))try{await so(s,Y.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const C=R=>g(R),S=(R,q)=>y(q,R),E=(R,q)=>T(q,R),N=(R,q)=>_(q,R);function D(R){l=R,t(0,l)}function B(R){a=R,t(1,a)}const O=()=>T(),z=()=>_(),L=()=>{p&&g(p)};function x(R){u=R,t(3,u)}return[l,a,o,u,d,p,h,w,r,i,g,y,A,I,m,T,_,C,S,E,N,D,B,O,z,L,x]}class ng extends gt{constructor(e){super(),mt(this,e,tg,eg,pt,{})}}const sg=wt([]),gi=wt(!1),mo=new Map;let Vn=null;async function rg(n){try{return Vn=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),gi.set(!0),n.emit("start-screen-share"),Vn.getVideoTracks()[0].onended=()=>{Tc(n)},Vn}catch(e){throw console.error("Error starting screen share:",e),e}}function Tc(n){Vn&&(Vn.getTracks().forEach(e=>e.stop()),Vn=null),gi.set(!1),n.emit("stop-screen-share"),mo.forEach(e=>e.close()),mo.clear()}function vo(n,e,t){const s=n.slice();return s[12]=e[t],s}function ig(n){let e,t="Start Sharing",s,r;return{c(){e=k("button"),e.textContent=t},l(i){e=b(i,"BUTTON",{"data-svelte-h":!0}),X(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,l){V(i,e,l),s||(r=H(e,"click",n[6]),s=!0)},p:Me,d(i){i&&v(e),s=!1,r()}}}function lg(n){let e,t="Stop Sharing",s,r;return{c(){e=k("button"),e.textContent=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){f(e,"class","stop-btn svelte-1oqngqd")},m(i,l){V(i,e,l),s||(r=H(e,"click",n[7]),s=!0)},p:Me,d(i){i&&v(e),s=!1,r()}}}function _o(n){let e,t;return{c(){e=k("div"),t=J(n[2]),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=P(e);t=Z(r,n[2]),r.forEach(v),this.h()},h(){f(e,"class","error svelte-1oqngqd")},m(s,r){V(s,e,r),c(e,t)},p(s,r){r&4&&ie(t,s[2])},d(s){s&&v(e)}}}function bo(n){let e,t,s='<span class="badge svelte-1oqngqd">Your Screen</span>',r,i;return{c(){e=k("div"),t=k("div"),t.innerHTML=s,r=F(),i=k("video"),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=P(e);t=b(a,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-16dlolc"&&(t.innerHTML=s),r=M(a),i=b(a,"VIDEO",{class:!0}),P(i).forEach(v),a.forEach(v),this.h()},h(){f(t,"class","screen-header svelte-1oqngqd"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,f(i,"class","svelte-1oqngqd"),f(e,"class","screen-item svelte-1oqngqd")},m(l,a){V(l,e,a),c(e,t),c(e,r),c(e,i),n[9](i)},p:Me,d(l){l&&v(e),n[9](null)}}}function ko(n,e){let t,s,r,i=e[12].username+"",l,a,o,u,d,p,h;return{key:n,first:null,c(){t=k("div"),s=k("div"),r=k("span"),l=J(i),a=J("'s Screen"),o=F(),u=k("video"),this.h()},l(w){t=b(w,"DIV",{class:!0});var g=P(t);s=b(g,"DIV",{class:!0});var y=P(s);r=b(y,"SPAN",{class:!0});var A=P(r);l=Z(A,i),a=Z(A,"'s Screen"),A.forEach(v),y.forEach(v),o=M(g),u=b(g,"VIDEO",{class:!0}),P(u).forEach(v),g.forEach(v),this.h()},h(){f(r,"class","username svelte-1oqngqd"),f(s,"class","screen-header svelte-1oqngqd"),u.autoplay=!0,u.playsInline=!0,f(u,"class","svelte-1oqngqd"),f(t,"class","screen-item svelte-1oqngqd"),this.first=t},m(w,g){V(w,t,g),c(t,s),c(s,r),c(r,l),c(r,a),c(t,o),c(t,u),p||(h=Dc(d=og.call(null,u,e[12].stream)),p=!0)},p(w,g){e=w,g&16&&i!==(i=e[12].username+"")&&ie(l,i),d&&Pn(d.update)&&g&16&&d.update.call(null,e[12].stream)},d(w){w&&v(t),p=!1,h()}}}function wo(n){let e,t='<p class="svelte-1oqngqd">No active screen shares</p> <p class="hint svelte-1oqngqd">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-1oqngqd")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function ag(n){let e,t,s,r,i="â† Back",l,a,o="ðŸ–¥ï¸ Screen Sharing",u,d,p,h,w,g=[],y=new Map,A,I,m;function T(O,z){return O[3]?lg:ig}let _=T(n),C=_(n),S=n[2]&&_o(n),E=n[3]&&n[0]&&bo(n),N=Ke(n[4]);const D=O=>O[12].userId;for(let O=0;O<N.length;O+=1){let z=vo(n,N,O),L=D(z);y.set(L,g[O]=ko(L,z))}let B=!n[3]&&n[4].length===0&&wo();return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("button"),r.textContent=i,l=F(),a=k("h2"),a.textContent=o,u=F(),C.c(),d=F(),S&&S.c(),p=F(),h=k("div"),E&&E.c(),w=F();for(let O=0;O<g.length;O+=1)g[O].c();A=F(),B&&B.c(),this.h()},l(O){e=b(O,"DIV",{class:!0});var z=P(e);t=b(z,"DIV",{class:!0});var L=P(t);s=b(L,"DIV",{class:!0});var x=P(s);r=b(x,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(r)!=="svelte-ts724a"&&(r.textContent=i),l=M(x),a=b(x,"H2",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1el2fdv"&&(a.textContent=o),x.forEach(v),u=M(L),C.l(L),L.forEach(v),d=M(z),S&&S.l(z),p=M(z),h=b(z,"DIV",{class:!0});var R=P(h);E&&E.l(R),w=M(R);for(let q=0;q<g.length;q+=1)g[q].l(R);A=M(R),B&&B.l(R),R.forEach(v),z.forEach(v),this.h()},h(){f(r,"class","back-btn svelte-1oqngqd"),f(r,"title","Back to chat"),f(a,"class","svelte-1oqngqd"),f(s,"class","header-left svelte-1oqngqd"),f(t,"class","header svelte-1oqngqd"),f(h,"class","screens svelte-1oqngqd"),f(e,"class","screen-share-container svelte-1oqngqd")},m(O,z){V(O,e,z),c(e,t),c(t,s),c(s,r),c(s,l),c(s,a),c(t,u),C.m(t,null),c(e,d),S&&S.m(e,null),c(e,p),c(e,h),E&&E.m(h,null),c(h,w);for(let L=0;L<g.length;L+=1)g[L]&&g[L].m(h,null);c(h,A),B&&B.m(h,null),I||(m=H(r,"click",n[5]),I=!0)},p(O,[z]){_===(_=T(O))&&C?C.p(O,z):(C.d(1),C=_(O),C&&(C.c(),C.m(t,null))),O[2]?S?S.p(O,z):(S=_o(O),S.c(),S.m(e,p)):S&&(S.d(1),S=null),O[3]&&O[0]?E?E.p(O,z):(E=bo(O),E.c(),E.m(h,w)):E&&(E.d(1),E=null),z&16&&(N=Ke(O[4]),g=tn(g,z,D,1,O,N,y,h,en,ko,A,vo)),!O[3]&&O[4].length===0?B||(B=wo(),B.c(),B.m(h,null)):B&&(B.d(1),B=null)},i:Me,o:Me,d(O){O&&v(e),C.d(),S&&S.d(),E&&E.d();for(let z=0;z<g.length;z+=1)g[z].d();B&&B.d(),I=!1,m()}}}function og(n,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),n.srcObject=e,n.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),n.srcObject=t,n.play().catch(s=>console.error("Error playing updated remote video:",s))}}}function cg(n,e,t){let s,r,i;Be(n,Yn,g=>t(10,s=g)),Be(n,gi,g=>t(3,r=g)),Be(n,Vt,g=>t(11,g)),Be(n,sg,g=>t(4,i=g));let{activeView:l="screen"}=e,a=null,o="",u;function d(){t(8,l="chat")}async function p(){try{if(!s)return;t(0,a=await rg(s)),console.log("Screen share started, stream:",a),console.log("Stream tracks:",a?.getTracks()),console.log("Video tracks:",a?.getVideoTracks()),t(2,o="")}catch(g){t(2,o="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",g)}}function h(){s&&(Tc(s),t(0,a=null))}function w(g){rt[g?"unshift":"push"](()=>{u=g,t(1,u),t(0,a)})}return n.$$set=g=>{"activeView"in g&&t(8,l=g.activeView)},n.$$.update=()=>{n.$$.dirty&3&&u&&a&&(console.log("Setting local video srcObject",a),t(1,u.srcObject=a,u),u.play().catch(g=>console.error("Error playing local video:",g)))},[a,u,o,r,i,d,p,h,l,w]}class ug extends gt{constructor(e){super(),mt(this,e,cg,ag,pt,{activeView:8})}}function yo(n,e,t){const s=n.slice();return s[17]=e[t],s[18]=e,s[19]=t,s}function Eo(n){let e,t,s,r,i=n[2].username.charAt(0).toUpperCase()+"",l,a,o,u=n[2].username+"",d,p,h,w=n[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,y,A,I,m,T=`<span class="btn-icon svelte-1mc89jk">ðŸ“ž</span>
					Answer`,_,C,S=`<span class="btn-icon svelte-1mc89jk">âœ–ï¸</span>
					Decline`,E,N;return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("div"),l=J(i),a=F(),o=k("h2"),d=J(u),p=F(),h=k("p"),g=J(w),y=J(" Call"),A=F(),I=k("div"),m=k("button"),m.innerHTML=T,_=F(),C=k("button"),C.innerHTML=S,this.h()},l(D){e=b(D,"DIV",{class:!0});var B=P(e);t=b(B,"DIV",{class:!0});var O=P(t);s=b(O,"DIV",{class:!0});var z=P(s);r=b(z,"DIV",{class:!0});var L=P(r);l=Z(L,i),L.forEach(v),a=M(z),o=b(z,"H2",{class:!0});var x=P(o);d=Z(x,u),x.forEach(v),p=M(z),h=b(z,"P",{class:!0});var R=P(h);g=Z(R,w),y=Z(R," Call"),R.forEach(v),z.forEach(v),A=M(O),I=b(O,"DIV",{class:!0});var q=P(I);m=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),X(m)!=="svelte-u3s2jz"&&(m.innerHTML=T),_=M(q),C=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),X(C)!=="svelte-om1ns7"&&(C.innerHTML=S),q.forEach(v),O.forEach(v),B.forEach(v),this.h()},h(){f(r,"class","caller-avatar svelte-1mc89jk"),f(o,"class","svelte-1mc89jk"),f(h,"class","call-type svelte-1mc89jk"),f(s,"class","caller-info svelte-1mc89jk"),f(m,"class","answer-btn svelte-1mc89jk"),f(C,"class","reject-btn svelte-1mc89jk"),f(I,"class","call-actions svelte-1mc89jk"),f(t,"class","incoming-call-modal svelte-1mc89jk"),f(e,"class","call-modal-overlay svelte-1mc89jk")},m(D,B){V(D,e,B),c(e,t),c(t,s),c(s,r),c(r,l),c(s,a),c(s,o),c(o,d),c(s,p),c(s,h),c(h,g),c(h,y),c(t,A),c(t,I),c(I,m),c(I,_),c(I,C),E||(N=[H(m,"click",n[7]),H(C,"click",n[8])],E=!0)},p(D,B){B&4&&i!==(i=D[2].username.charAt(0).toUpperCase()+"")&&ie(l,i),B&4&&u!==(u=D[2].username+"")&&ie(d,u),B&4&&w!==(w=D[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&ie(g,w)},d(D){D&&v(e),E=!1,De(N)}}}function To(n){let e,t,s,r,i,l,a,o="You",u,d=[],p=new Map,h,w,g,y,A=n[6]?"ðŸ”‡":"ðŸŽ¤",I,m,T,_,C,S=n[5]?"ðŸ“¹":"ðŸ“·",E,N,D,B,O='<span class="control-icon svelte-1mc89jk">ðŸ“ž</span>',z,L,x=n[5]&&Co(),R=Ke(n[3]);const q=Y=>Y[17].userId;for(let Y=0;Y<R.length;Y+=1){let j=yo(n,R,Y),K=q(j);p.set(K,d[Y]=So(K,j))}return{c(){e=k("div"),t=k("div"),s=k("div"),r=k("video"),i=F(),x&&x.c(),l=F(),a=k("div"),a.textContent=o,u=F();for(let Y=0;Y<d.length;Y+=1)d[Y].c();h=F(),w=k("div"),g=k("button"),y=k("span"),I=J(A),T=F(),_=k("button"),C=k("span"),E=J(S),D=F(),B=k("button"),B.innerHTML=O,this.h()},l(Y){e=b(Y,"DIV",{class:!0});var j=P(e);t=b(j,"DIV",{class:!0});var K=P(t);s=b(K,"DIV",{class:!0});var G=P(s);r=b(G,"VIDEO",{class:!0}),P(r).forEach(v),i=M(G),x&&x.l(G),l=M(G),a=b(G,"DIV",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1l6ztyc"&&(a.textContent=o),G.forEach(v),u=M(K);for(let de=0;de<d.length;de+=1)d[de].l(K);K.forEach(v),h=M(j),w=b(j,"DIV",{class:!0});var W=P(w);g=b(W,"BUTTON",{class:!0,title:!0});var $=P(g);y=b($,"SPAN",{class:!0});var te=P(y);I=Z(te,A),te.forEach(v),$.forEach(v),T=M(W),_=b(W,"BUTTON",{class:!0,title:!0});var le=P(_);C=b(le,"SPAN",{class:!0});var se=P(C);E=Z(se,S),se.forEach(v),le.forEach(v),D=M(W),B=b(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(B)!=="svelte-1rszrze"&&(B.innerHTML=O),W.forEach(v),j.forEach(v),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,f(r,"class","video-element svelte-1mc89jk"),he(r,"video-hidden",n[5]),f(a,"class","video-label svelte-1mc89jk"),f(s,"class","video-wrapper local-video svelte-1mc89jk"),f(t,"class","video-grid svelte-1mc89jk"),f(y,"class","control-icon svelte-1mc89jk"),f(g,"class","control-btn svelte-1mc89jk"),f(g,"title",m=n[6]?"Unmute":"Mute"),he(g,"active",n[6]),f(C,"class","control-icon svelte-1mc89jk"),f(_,"class","control-btn svelte-1mc89jk"),f(_,"title",N=n[5]?"Turn on camera":"Turn off camera"),he(_,"active",n[5]),f(B,"class","control-btn end-call-btn svelte-1mc89jk"),f(B,"title","End call"),f(w,"class","call-controls svelte-1mc89jk"),f(e,"class","active-call-container svelte-1mc89jk")},m(Y,j){V(Y,e,j),c(e,t),c(t,s),c(s,r),n[13](r),c(s,i),x&&x.m(s,null),c(s,l),c(s,a),c(t,u);for(let K=0;K<d.length;K+=1)d[K]&&d[K].m(t,null);c(e,h),c(e,w),c(w,g),c(g,y),c(y,I),c(w,T),c(w,_),c(_,C),c(C,E),c(w,D),c(w,B),z||(L=[H(g,"click",n[10]),H(_,"click",n[11]),H(B,"click",n[9])],z=!0)},p(Y,j){j&32&&he(r,"video-hidden",Y[5]),Y[5]?x||(x=Co(),x.c(),x.m(s,l)):x&&(x.d(1),x=null),j&10&&(R=Ke(Y[3]),d=tn(d,j,q,1,Y,R,p,t,en,So,null,yo)),j&64&&A!==(A=Y[6]?"ðŸ”‡":"ðŸŽ¤")&&ie(I,A),j&64&&m!==(m=Y[6]?"Unmute":"Mute")&&f(g,"title",m),j&64&&he(g,"active",Y[6]),j&32&&S!==(S=Y[5]?"ðŸ“¹":"ðŸ“·")&&ie(E,S),j&32&&N!==(N=Y[5]?"Turn on camera":"Turn off camera")&&f(_,"title",N),j&32&&he(_,"active",Y[5])},d(Y){Y&&v(e),n[13](null),x&&x.d();for(let j=0;j<d.length;j+=1)d[j].d();z=!1,De(L)}}}function Co(n){let e,t='<span class="placeholder-icon svelte-1mc89jk">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){f(e,"class","video-placeholder svelte-1mc89jk")},m(s,r){V(s,e,r)},d(s){s&&v(e)}}}function Ao(n){let e,t,s="ðŸ‘¤",r,i,l=(n[17].username||"User")+"",a;return{c(){e=k("div"),t=k("span"),t.textContent=s,r=F(),i=k("span"),a=J(l),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=P(e);t=b(u,"SPAN",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-18bpbb5"&&(t.textContent=s),r=M(u),i=b(u,"SPAN",{});var d=P(i);a=Z(d,l),d.forEach(v),u.forEach(v),this.h()},h(){f(t,"class","placeholder-icon svelte-1mc89jk"),f(e,"class","video-placeholder svelte-1mc89jk")},m(o,u){V(o,e,u),c(e,t),c(e,r),c(e,i),c(i,a)},p(o,u){u&8&&l!==(l=(o[17].username||"User")+"")&&ie(a,l)},d(o){o&&v(e)}}}function So(n,e){let t,s,r=e[17],i,l,a,o=(e[17].username||"User")+"",u,d;const p=()=>e[14](s,r),h=()=>e[14](null,r);let w=!e[17].isVideoEnabled&&Ao(e);return{key:n,first:null,c(){t=k("div"),s=k("video"),i=F(),w&&w.c(),l=F(),a=k("div"),u=J(o),d=F(),this.h()},l(g){t=b(g,"DIV",{class:!0});var y=P(t);s=b(y,"VIDEO",{class:!0}),P(s).forEach(v),i=M(y),w&&w.l(y),l=M(y),a=b(y,"DIV",{class:!0});var A=P(a);u=Z(A,o),A.forEach(v),d=M(y),y.forEach(v),this.h()},h(){s.autoplay=!0,s.playsInline=!0,f(s,"class","video-element svelte-1mc89jk"),he(s,"video-hidden",!e[17].isVideoEnabled),f(a,"class","video-label svelte-1mc89jk"),f(t,"class","video-wrapper remote-video svelte-1mc89jk"),this.first=t},m(g,y){V(g,t,y),c(t,s),p(),c(t,i),w&&w.m(t,null),c(t,l),c(t,a),c(a,u),c(t,d)},p(g,y){e=g,r!==e[17]&&(h(),r=e[17],p()),y&8&&he(s,"video-hidden",!e[17].isVideoEnabled),e[17].isVideoEnabled?w&&(w.d(1),w=null):w?w.p(e,y):(w=Ao(e),w.c(),w.m(t,l)),y&8&&o!==(o=(e[17].username||"User")+"")&&ie(u,o)},d(g){g&&v(t),h(),w&&w.d()}}}function fg(n){let e,t,s=n[2]&&Eo(n),r=n[4]&&To(n);return{c(){s&&s.c(),e=F(),r&&r.c(),t=Re()},l(i){s&&s.l(i),e=M(i),r&&r.l(i),t=Re()},m(i,l){s&&s.m(i,l),V(i,e,l),r&&r.m(i,l),V(i,t,l)},p(i,[l]){i[2]?s?s.p(i,l):(s=Eo(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[4]?r?r.p(i,l):(r=To(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Me,o:Me,d(i){i&&(v(e),v(t)),s&&s.d(i),r&&r.d(i)}}}function dg(n,e,t){let s,r,i,l,a,o;Be(n,Yn,_=>t(15,s=_)),Be(n,pi,_=>t(2,r=_)),Be(n,Ec,_=>t(3,i=_)),Be(n,Zs,_=>t(4,l=_)),Be(n,ps,_=>t(5,a=_)),Be(n,hs,_=>t(6,o=_));let u,d={},p=null;Po(()=>{s&&(s.off("call-incoming"),s.off("call-accepted"),s.off("call-rejected"),s.off("call-ended"),s.off("call-offer"),s.off("call-answer-sdp"),s.off("call-ice-candidate"))});function h(){Yo()}async function w(){!r||!s||await Op(s,r.userId,r.isVideoCall)}function g(){!r||!s||Mp(s,r.userId)}function y(){s&&Fp(s)}function A(){zp()}function I(){Bp()}function m(_){rt[_?"unshift":"push"](()=>{u=_,t(0,u),t(4,l)})}function T(_,C){rt[_?"unshift":"push"](()=>{d[C.userId]=_,t(1,d)})}return n.$$.update=()=>{if(n.$$.dirty&4100&&(r?(h(),t(12,p=Au(r.username,r.isVideoCall,()=>w()))):p&&(p.close(),t(12,p=null))),n.$$.dirty&17&&l&&u){const _=Lp();_&&t(0,u.srcObject=_,u)}n.$$.dirty&10&&i.length>0&&i.forEach(_=>{const C=d[_.userId];C&&_.stream&&(C.srcObject=_.stream)})},[u,d,r,i,l,a,o,w,g,y,A,I,p,m,T]}class hg extends gt{constructor(e){super(),mt(this,e,dg,fg,pt,{})}}const{window:Io}=Kr;function pg(n){let e,t,s,r,i,l,a,o,u,d,p,h,w,g,y,A,I,m=n[2]?"â†’":"â†",T,_,C,S,E,N,D,B;function O(q){n[13](q)}let z={};n[1]!==void 0&&(z.activeView=n[1]),s=new Pp({props:z}),rt.push(()=>Lt(s,"activeView",O)),d=new jh({});function L(q){n[14](q)}let x={};n[1]!==void 0&&(x.activeView=n[1]),w=new ug({props:x}),rt.push(()=>Lt(w,"activeView",L));let R=n[2]&&Do(n);return E=new hg({}),{c(){e=k("div"),t=k("div"),$e(s.$$.fragment),i=F(),l=k("div"),a=F(),o=k("div"),u=k("div"),$e(d.$$.fragment),p=F(),h=k("div"),$e(w.$$.fragment),y=F(),R&&R.c(),A=F(),I=k("button"),T=J(m),S=F(),$e(E.$$.fragment),this.h()},l(q){e=b(q,"DIV",{class:!0});var Y=P(e);t=b(Y,"DIV",{class:!0,style:!0});var j=P(t);Qe(s.$$.fragment,j),i=M(j),l=b(j,"DIV",{class:!0}),P(l).forEach(v),j.forEach(v),a=M(Y),o=b(Y,"DIV",{class:!0});var K=P(o);u=b(K,"DIV",{class:!0});var G=P(u);Qe(d.$$.fragment,G),G.forEach(v),p=M(K),h=b(K,"DIV",{class:!0});var W=P(h);Qe(w.$$.fragment,W),W.forEach(v),K.forEach(v),y=M(Y),R&&R.l(Y),A=M(Y),I=b(Y,"BUTTON",{class:!0,title:!0,style:!0});var $=P(I);T=Z($,m),$.forEach(v),Y.forEach(v),S=M(q),Qe(E.$$.fragment,q),this.h()},h(){f(l,"class","resize-handle resize-handle-channel svelte-10wao8h"),f(t,"class","channel-sidebar-container svelte-10wao8h"),Ne(t,"width",n[3]+"px"),f(u,"class","svelte-10wao8h"),he(u,"hidden",n[1]!=="chat"),f(h,"class","svelte-10wao8h"),he(h,"hidden",n[1]!=="screen"),f(o,"class","main-content svelte-10wao8h"),f(I,"class","user-panel-toggle svelte-10wao8h"),f(I,"title",_=n[2]?"Hide user panel":"Show user panel"),f(I,"style",C=n[2]?`right: ${n[4]}px`:"right: 0"),he(I,"open",n[2]),f(e,"class","app-container svelte-10wao8h"),he(e,"resizing",n[5]||n[6])},m(q,Y){V(q,e,Y),c(e,t),Je(s,t,null),c(t,i),c(t,l),c(e,a),c(e,o),c(o,u),Je(d,u,null),c(o,p),c(o,h),Je(w,h,null),c(e,y),R&&R.m(e,null),c(e,A),c(e,I),c(I,T),V(q,S,Y),Je(E,q,Y),N=!0,D||(B=[H(l,"mousedown",n[8]),H(I,"click",n[15])],D=!0)},p(q,Y){const j={};!r&&Y&2&&(r=!0,j.activeView=q[1],Bt(()=>r=!1)),s.$set(j),(!N||Y&8)&&Ne(t,"width",q[3]+"px"),(!N||Y&2)&&he(u,"hidden",q[1]!=="chat");const K={};!g&&Y&2&&(g=!0,K.activeView=q[1],Bt(()=>g=!1)),w.$set(K),(!N||Y&2)&&he(h,"hidden",q[1]!=="screen"),q[2]?R?(R.p(q,Y),Y&4&&Ae(R,1)):(R=Do(q),R.c(),Ae(R,1),R.m(e,A)):R&&(Hn(),Oe(R,1,1,()=>{R=null}),Gn()),(!N||Y&4)&&m!==(m=q[2]?"â†’":"â†")&&ie(T,m),(!N||Y&4&&_!==(_=q[2]?"Hide user panel":"Show user panel"))&&f(I,"title",_),(!N||Y&20&&C!==(C=q[2]?`right: ${q[4]}px`:"right: 0"))&&f(I,"style",C),(!N||Y&4)&&he(I,"open",q[2]),(!N||Y&96)&&he(e,"resizing",q[5]||q[6])},i(q){N||(Ae(s.$$.fragment,q),Ae(d.$$.fragment,q),Ae(w.$$.fragment,q),Ae(R),Ae(E.$$.fragment,q),N=!0)},o(q){Oe(s.$$.fragment,q),Oe(d.$$.fragment,q),Oe(w.$$.fragment,q),Oe(R),Oe(E.$$.fragment,q),N=!1},d(q){q&&(v(e),v(S)),Ze(s),Ze(d),Ze(w),R&&R.d(),Ze(E,q),D=!1,De(B)}}}function gg(n){let e,t;return e=new pp({}),e.$on("login",n[7]),{c(){$e(e.$$.fragment)},l(s){Qe(e.$$.fragment,s)},m(s,r){Je(e,s,r),t=!0},p:Me,i(s){t||(Ae(e.$$.fragment,s),t=!0)},o(s){Oe(e.$$.fragment,s),t=!1},d(s){Ze(e,s)}}}function Do(n){let e,t,s,r,i,l,a;return r=new ng({}),{c(){e=k("div"),t=k("div"),s=F(),$e(r.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var u=P(e);t=b(u,"DIV",{class:!0}),P(t).forEach(v),s=M(u),Qe(r.$$.fragment,u),u.forEach(v),this.h()},h(){f(t,"class","resize-handle resize-handle-user svelte-10wao8h"),f(e,"class","user-panel-container svelte-10wao8h"),Ne(e,"width",n[4]+"px")},m(o,u){V(o,e,u),c(e,t),c(e,s),Je(r,e,null),i=!0,l||(a=H(t,"mousedown",n[9]),l=!0)},p(o,u){(!i||u&16)&&Ne(e,"width",o[4]+"px")},i(o){i||(Ae(r.$$.fragment,o),i=!0)},o(o){Oe(r.$$.fragment,o),i=!1},d(o){o&&v(e),Ze(r),l=!1,a()}}}function mg(n){let e,t,s,r,i,l;const a=[gg,pg],o=[];function u(d,p){return d[0]?1:0}return e=u(n),t=o[e]=a[e](n),{c(){t.c(),s=Re()},l(d){t.l(d),s=Re()},m(d,p){o[e].m(d,p),V(d,s,p),r=!0,i||(l=[H(Io,"mousemove",n[10]),H(Io,"mouseup",n[11])],i=!0)},p(d,[p]){let h=e;e=u(d),e===h?o[e].p(d,p):(Hn(),Oe(o[h],1,1,()=>{o[h]=null}),Gn(),t=o[e],t?t.p(d,p):(t=o[e]=a[e](d),t.c()),Ae(t,1),t.m(s.parentNode,s))},i(d){r||(Ae(t),r=!0)},o(d){Oe(t),r=!1},d(d){d&&v(s),o[e].d(d),i=!1,De(l)}}}function vg(n,e,t){let{data:s}=e,r="",i=!1,l="chat",a=!1,o=240,u=250,d=!1,p=!1;function h(_){r=_.detail,Zf(r),t(0,i=!0)}function w(_){t(5,d=!0),_.preventDefault()}function g(_){t(6,p=!0),_.preventDefault()}function y(_){if(d){const C=_.clientX;C>=180&&C<=400&&t(3,o=C)}else if(p){const C=window.innerWidth-_.clientX;C>=200&&C<=500&&t(4,u=C)}}function A(){t(5,d=!1),t(6,p=!1)}Po(()=>{td()});function I(_){l=_,t(1,l)}function m(_){l=_,t(1,l)}const T=()=>t(2,a=!a);return n.$$set=_=>{"data"in _&&t(12,s=_.data)},[i,l,a,o,u,d,p,h,w,g,y,A,s,I,m,T]}class Tg extends gt{constructor(e){super(),mt(this,e,vg,mg,pt,{data:12})}}export{Tg as component};
